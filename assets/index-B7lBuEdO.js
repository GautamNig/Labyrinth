(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const u of o)if(u.type==="childList")for(const f of u.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&s(f)}).observe(document,{childList:!0,subtree:!0});function n(o){const u={};return o.integrity&&(u.integrity=o.integrity),o.referrerPolicy&&(u.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?u.credentials="include":o.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function s(o){if(o.ep)return;o.ep=!0;const u=n(o);fetch(o.href,u)}})();function aA(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var Tm={exports:{}},jl={};var G_;function oA(){if(G_)return jl;G_=1;var i=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(s,o,u){var f=null;if(u!==void 0&&(f=""+u),o.key!==void 0&&(f=""+o.key),"key"in o){u={};for(var m in o)m!=="key"&&(u[m]=o[m])}else u=o;return o=u.ref,{$$typeof:i,type:s,key:f,ref:o!==void 0?o:null,props:u}}return jl.Fragment=e,jl.jsx=n,jl.jsxs=n,jl}var Q_;function lA(){return Q_||(Q_=1,Tm.exports=oA()),Tm.exports}var S=lA(),bm={exports:{}},De={};var Y_;function uA(){if(Y_)return De;Y_=1;var i=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),u=Symbol.for("react.consumer"),f=Symbol.for("react.context"),m=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),E=Symbol.for("react.lazy"),T=Symbol.for("react.activity"),R=Symbol.iterator;function O(V){return V===null||typeof V!="object"?null:(V=R&&V[R]||V["@@iterator"],typeof V=="function"?V:null)}var j={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Q=Object.assign,q={};function $(V,te,le){this.props=V,this.context=te,this.refs=q,this.updater=le||j}$.prototype.isReactComponent={},$.prototype.setState=function(V,te){if(typeof V!="object"&&typeof V!="function"&&V!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,V,te,"setState")},$.prototype.forceUpdate=function(V){this.updater.enqueueForceUpdate(this,V,"forceUpdate")};function X(){}X.prototype=$.prototype;function ee(V,te,le){this.props=V,this.context=te,this.refs=q,this.updater=le||j}var de=ee.prototype=new X;de.constructor=ee,Q(de,$.prototype),de.isPureReactComponent=!0;var pe=Array.isArray;function Ee(){}var x={H:null,A:null,T:null,S:null},C=Object.prototype.hasOwnProperty;function w(V,te,le){var ce=le.ref;return{$$typeof:i,type:V,key:te,ref:ce!==void 0?ce:null,props:le}}function D(V,te){return w(V.type,te,V.props)}function M(V){return typeof V=="object"&&V!==null&&V.$$typeof===i}function U(V){var te={"=":"=0",":":"=2"};return"$"+V.replace(/[=:]/g,function(le){return te[le]})}var I=/\/+/g;function oe(V,te){return typeof V=="object"&&V!==null&&V.key!=null?U(""+V.key):te.toString(36)}function he(V){switch(V.status){case"fulfilled":return V.value;case"rejected":throw V.reason;default:switch(typeof V.status=="string"?V.then(Ee,Ee):(V.status="pending",V.then(function(te){V.status==="pending"&&(V.status="fulfilled",V.value=te)},function(te){V.status==="pending"&&(V.status="rejected",V.reason=te)})),V.status){case"fulfilled":return V.value;case"rejected":throw V.reason}}throw V}function P(V,te,le,ce,ye){var _e=typeof V;(_e==="undefined"||_e==="boolean")&&(V=null);var Oe=!1;if(V===null)Oe=!0;else switch(_e){case"bigint":case"string":case"number":Oe=!0;break;case"object":switch(V.$$typeof){case i:case e:Oe=!0;break;case E:return Oe=V._init,P(Oe(V._payload),te,le,ce,ye)}}if(Oe)return ye=ye(V),Oe=ce===""?"."+oe(V,0):ce,pe(ye)?(le="",Oe!=null&&(le=Oe.replace(I,"$&/")+"/"),P(ye,te,le,"",function($t){return $t})):ye!=null&&(M(ye)&&(ye=D(ye,le+(ye.key==null||V&&V.key===ye.key?"":(""+ye.key).replace(I,"$&/")+"/")+Oe)),te.push(ye)),1;Oe=0;var ot=ce===""?".":ce+":";if(pe(V))for(var Xe=0;Xe<V.length;Xe++)ce=V[Xe],_e=ot+oe(ce,Xe),Oe+=P(ce,te,le,_e,ye);else if(Xe=O(V),typeof Xe=="function")for(V=Xe.call(V),Xe=0;!(ce=V.next()).done;)ce=ce.value,_e=ot+oe(ce,Xe++),Oe+=P(ce,te,le,_e,ye);else if(_e==="object"){if(typeof V.then=="function")return P(he(V),te,le,ce,ye);throw te=String(V),Error("Objects are not valid as a React child (found: "+(te==="[object Object]"?"object with keys {"+Object.keys(V).join(", ")+"}":te)+"). If you meant to render a collection of children, use an array instead.")}return Oe}function W(V,te,le){if(V==null)return V;var ce=[],ye=0;return P(V,ce,"","",function(_e){return te.call(le,_e,ye++)}),ce}function Z(V){if(V._status===-1){var te=V._result;te=te(),te.then(function(le){(V._status===0||V._status===-1)&&(V._status=1,V._result=le)},function(le){(V._status===0||V._status===-1)&&(V._status=2,V._result=le)}),V._status===-1&&(V._status=0,V._result=te)}if(V._status===1)return V._result.default;throw V._result}var we=typeof reportError=="function"?reportError:function(V){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var te=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof V=="object"&&V!==null&&typeof V.message=="string"?String(V.message):String(V),error:V});if(!window.dispatchEvent(te))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",V);return}console.error(V)},Ce={map:W,forEach:function(V,te,le){W(V,function(){te.apply(this,arguments)},le)},count:function(V){var te=0;return W(V,function(){te++}),te},toArray:function(V){return W(V,function(te){return te})||[]},only:function(V){if(!M(V))throw Error("React.Children.only expected to receive a single React element child.");return V}};return De.Activity=T,De.Children=Ce,De.Component=$,De.Fragment=n,De.Profiler=o,De.PureComponent=ee,De.StrictMode=s,De.Suspense=p,De.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=x,De.__COMPILER_RUNTIME={__proto__:null,c:function(V){return x.H.useMemoCache(V)}},De.cache=function(V){return function(){return V.apply(null,arguments)}},De.cacheSignal=function(){return null},De.cloneElement=function(V,te,le){if(V==null)throw Error("The argument must be a React element, but you passed "+V+".");var ce=Q({},V.props),ye=V.key;if(te!=null)for(_e in te.key!==void 0&&(ye=""+te.key),te)!C.call(te,_e)||_e==="key"||_e==="__self"||_e==="__source"||_e==="ref"&&te.ref===void 0||(ce[_e]=te[_e]);var _e=arguments.length-2;if(_e===1)ce.children=le;else if(1<_e){for(var Oe=Array(_e),ot=0;ot<_e;ot++)Oe[ot]=arguments[ot+2];ce.children=Oe}return w(V.type,ye,ce)},De.createContext=function(V){return V={$$typeof:f,_currentValue:V,_currentValue2:V,_threadCount:0,Provider:null,Consumer:null},V.Provider=V,V.Consumer={$$typeof:u,_context:V},V},De.createElement=function(V,te,le){var ce,ye={},_e=null;if(te!=null)for(ce in te.key!==void 0&&(_e=""+te.key),te)C.call(te,ce)&&ce!=="key"&&ce!=="__self"&&ce!=="__source"&&(ye[ce]=te[ce]);var Oe=arguments.length-2;if(Oe===1)ye.children=le;else if(1<Oe){for(var ot=Array(Oe),Xe=0;Xe<Oe;Xe++)ot[Xe]=arguments[Xe+2];ye.children=ot}if(V&&V.defaultProps)for(ce in Oe=V.defaultProps,Oe)ye[ce]===void 0&&(ye[ce]=Oe[ce]);return w(V,_e,ye)},De.createRef=function(){return{current:null}},De.forwardRef=function(V){return{$$typeof:m,render:V}},De.isValidElement=M,De.lazy=function(V){return{$$typeof:E,_payload:{_status:-1,_result:V},_init:Z}},De.memo=function(V,te){return{$$typeof:g,type:V,compare:te===void 0?null:te}},De.startTransition=function(V){var te=x.T,le={};x.T=le;try{var ce=V(),ye=x.S;ye!==null&&ye(le,ce),typeof ce=="object"&&ce!==null&&typeof ce.then=="function"&&ce.then(Ee,we)}catch(_e){we(_e)}finally{te!==null&&le.types!==null&&(te.types=le.types),x.T=te}},De.unstable_useCacheRefresh=function(){return x.H.useCacheRefresh()},De.use=function(V){return x.H.use(V)},De.useActionState=function(V,te,le){return x.H.useActionState(V,te,le)},De.useCallback=function(V,te){return x.H.useCallback(V,te)},De.useContext=function(V){return x.H.useContext(V)},De.useDebugValue=function(){},De.useDeferredValue=function(V,te){return x.H.useDeferredValue(V,te)},De.useEffect=function(V,te){return x.H.useEffect(V,te)},De.useEffectEvent=function(V){return x.H.useEffectEvent(V)},De.useId=function(){return x.H.useId()},De.useImperativeHandle=function(V,te,le){return x.H.useImperativeHandle(V,te,le)},De.useInsertionEffect=function(V,te){return x.H.useInsertionEffect(V,te)},De.useLayoutEffect=function(V,te){return x.H.useLayoutEffect(V,te)},De.useMemo=function(V,te){return x.H.useMemo(V,te)},De.useOptimistic=function(V,te){return x.H.useOptimistic(V,te)},De.useReducer=function(V,te,le){return x.H.useReducer(V,te,le)},De.useRef=function(V){return x.H.useRef(V)},De.useState=function(V){return x.H.useState(V)},De.useSyncExternalStore=function(V,te,le){return x.H.useSyncExternalStore(V,te,le)},De.useTransition=function(){return x.H.useTransition()},De.version="19.2.3",De}var K_;function yp(){return K_||(K_=1,bm.exports=uA()),bm.exports}var k=yp();const Hm=aA(k);var Sm={exports:{}},zl={},Am={exports:{}},wm={};var $_;function cA(){return $_||($_=1,(function(i){function e(P,W){var Z=P.length;P.push(W);e:for(;0<Z;){var we=Z-1>>>1,Ce=P[we];if(0<o(Ce,W))P[we]=W,P[Z]=Ce,Z=we;else break e}}function n(P){return P.length===0?null:P[0]}function s(P){if(P.length===0)return null;var W=P[0],Z=P.pop();if(Z!==W){P[0]=Z;e:for(var we=0,Ce=P.length,V=Ce>>>1;we<V;){var te=2*(we+1)-1,le=P[te],ce=te+1,ye=P[ce];if(0>o(le,Z))ce<Ce&&0>o(ye,le)?(P[we]=ye,P[ce]=Z,we=ce):(P[we]=le,P[te]=Z,we=te);else if(ce<Ce&&0>o(ye,Z))P[we]=ye,P[ce]=Z,we=ce;else break e}}return W}function o(P,W){var Z=P.sortIndex-W.sortIndex;return Z!==0?Z:P.id-W.id}if(i.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var u=performance;i.unstable_now=function(){return u.now()}}else{var f=Date,m=f.now();i.unstable_now=function(){return f.now()-m}}var p=[],g=[],E=1,T=null,R=3,O=!1,j=!1,Q=!1,q=!1,$=typeof setTimeout=="function"?setTimeout:null,X=typeof clearTimeout=="function"?clearTimeout:null,ee=typeof setImmediate<"u"?setImmediate:null;function de(P){for(var W=n(g);W!==null;){if(W.callback===null)s(g);else if(W.startTime<=P)s(g),W.sortIndex=W.expirationTime,e(p,W);else break;W=n(g)}}function pe(P){if(Q=!1,de(P),!j)if(n(p)!==null)j=!0,Ee||(Ee=!0,U());else{var W=n(g);W!==null&&he(pe,W.startTime-P)}}var Ee=!1,x=-1,C=5,w=-1;function D(){return q?!0:!(i.unstable_now()-w<C)}function M(){if(q=!1,Ee){var P=i.unstable_now();w=P;var W=!0;try{e:{j=!1,Q&&(Q=!1,X(x),x=-1),O=!0;var Z=R;try{t:{for(de(P),T=n(p);T!==null&&!(T.expirationTime>P&&D());){var we=T.callback;if(typeof we=="function"){T.callback=null,R=T.priorityLevel;var Ce=we(T.expirationTime<=P);if(P=i.unstable_now(),typeof Ce=="function"){T.callback=Ce,de(P),W=!0;break t}T===n(p)&&s(p),de(P)}else s(p);T=n(p)}if(T!==null)W=!0;else{var V=n(g);V!==null&&he(pe,V.startTime-P),W=!1}}break e}finally{T=null,R=Z,O=!1}W=void 0}}finally{W?U():Ee=!1}}}var U;if(typeof ee=="function")U=function(){ee(M)};else if(typeof MessageChannel<"u"){var I=new MessageChannel,oe=I.port2;I.port1.onmessage=M,U=function(){oe.postMessage(null)}}else U=function(){$(M,0)};function he(P,W){x=$(function(){P(i.unstable_now())},W)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(P){P.callback=null},i.unstable_forceFrameRate=function(P){0>P||125<P?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<P?Math.floor(1e3/P):5},i.unstable_getCurrentPriorityLevel=function(){return R},i.unstable_next=function(P){switch(R){case 1:case 2:case 3:var W=3;break;default:W=R}var Z=R;R=W;try{return P()}finally{R=Z}},i.unstable_requestPaint=function(){q=!0},i.unstable_runWithPriority=function(P,W){switch(P){case 1:case 2:case 3:case 4:case 5:break;default:P=3}var Z=R;R=P;try{return W()}finally{R=Z}},i.unstable_scheduleCallback=function(P,W,Z){var we=i.unstable_now();switch(typeof Z=="object"&&Z!==null?(Z=Z.delay,Z=typeof Z=="number"&&0<Z?we+Z:we):Z=we,P){case 1:var Ce=-1;break;case 2:Ce=250;break;case 5:Ce=1073741823;break;case 4:Ce=1e4;break;default:Ce=5e3}return Ce=Z+Ce,P={id:E++,callback:W,priorityLevel:P,startTime:Z,expirationTime:Ce,sortIndex:-1},Z>we?(P.sortIndex=Z,e(g,P),n(p)===null&&P===n(g)&&(Q?(X(x),x=-1):Q=!0,he(pe,Z-we))):(P.sortIndex=Ce,e(p,P),j||O||(j=!0,Ee||(Ee=!0,U()))),P},i.unstable_shouldYield=D,i.unstable_wrapCallback=function(P){var W=R;return function(){var Z=R;R=W;try{return P.apply(this,arguments)}finally{R=Z}}}})(wm)),wm}var X_;function hA(){return X_||(X_=1,Am.exports=cA()),Am.exports}var Rm={exports:{}},on={};var W_;function fA(){if(W_)return on;W_=1;var i=yp();function e(p){var g="https://react.dev/errors/"+p;if(1<arguments.length){g+="?args[]="+encodeURIComponent(arguments[1]);for(var E=2;E<arguments.length;E++)g+="&args[]="+encodeURIComponent(arguments[E])}return"Minified React error #"+p+"; visit "+g+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var s={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},o=Symbol.for("react.portal");function u(p,g,E){var T=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:T==null?null:""+T,children:p,containerInfo:g,implementation:E}}var f=i.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function m(p,g){if(p==="font")return"";if(typeof g=="string")return g==="use-credentials"?g:""}return on.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,on.createPortal=function(p,g){var E=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!g||g.nodeType!==1&&g.nodeType!==9&&g.nodeType!==11)throw Error(e(299));return u(p,g,null,E)},on.flushSync=function(p){var g=f.T,E=s.p;try{if(f.T=null,s.p=2,p)return p()}finally{f.T=g,s.p=E,s.d.f()}},on.preconnect=function(p,g){typeof p=="string"&&(g?(g=g.crossOrigin,g=typeof g=="string"?g==="use-credentials"?g:"":void 0):g=null,s.d.C(p,g))},on.prefetchDNS=function(p){typeof p=="string"&&s.d.D(p)},on.preinit=function(p,g){if(typeof p=="string"&&g&&typeof g.as=="string"){var E=g.as,T=m(E,g.crossOrigin),R=typeof g.integrity=="string"?g.integrity:void 0,O=typeof g.fetchPriority=="string"?g.fetchPriority:void 0;E==="style"?s.d.S(p,typeof g.precedence=="string"?g.precedence:void 0,{crossOrigin:T,integrity:R,fetchPriority:O}):E==="script"&&s.d.X(p,{crossOrigin:T,integrity:R,fetchPriority:O,nonce:typeof g.nonce=="string"?g.nonce:void 0})}},on.preinitModule=function(p,g){if(typeof p=="string")if(typeof g=="object"&&g!==null){if(g.as==null||g.as==="script"){var E=m(g.as,g.crossOrigin);s.d.M(p,{crossOrigin:E,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0})}}else g==null&&s.d.M(p)},on.preload=function(p,g){if(typeof p=="string"&&typeof g=="object"&&g!==null&&typeof g.as=="string"){var E=g.as,T=m(E,g.crossOrigin);s.d.L(p,E,{crossOrigin:T,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0,type:typeof g.type=="string"?g.type:void 0,fetchPriority:typeof g.fetchPriority=="string"?g.fetchPriority:void 0,referrerPolicy:typeof g.referrerPolicy=="string"?g.referrerPolicy:void 0,imageSrcSet:typeof g.imageSrcSet=="string"?g.imageSrcSet:void 0,imageSizes:typeof g.imageSizes=="string"?g.imageSizes:void 0,media:typeof g.media=="string"?g.media:void 0})}},on.preloadModule=function(p,g){if(typeof p=="string")if(g){var E=m(g.as,g.crossOrigin);s.d.m(p,{as:typeof g.as=="string"&&g.as!=="script"?g.as:void 0,crossOrigin:E,integrity:typeof g.integrity=="string"?g.integrity:void 0})}else s.d.m(p)},on.requestFormReset=function(p){s.d.r(p)},on.unstable_batchedUpdates=function(p,g){return p(g)},on.useFormState=function(p,g,E){return f.H.useFormState(p,g,E)},on.useFormStatus=function(){return f.H.useHostTransitionStatus()},on.version="19.2.3",on}var J_;function dA(){if(J_)return Rm.exports;J_=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),Rm.exports=fA(),Rm.exports}var Z_;function mA(){if(Z_)return zl;Z_=1;var i=hA(),e=yp(),n=dA();function s(t){var r="https://react.dev/errors/"+t;if(1<arguments.length){r+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)r+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+t+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function u(t){var r=t,a=t;if(t.alternate)for(;r.return;)r=r.return;else{t=r;do r=t,(r.flags&4098)!==0&&(a=r.return),t=r.return;while(t)}return r.tag===3?a:null}function f(t){if(t.tag===13){var r=t.memoizedState;if(r===null&&(t=t.alternate,t!==null&&(r=t.memoizedState)),r!==null)return r.dehydrated}return null}function m(t){if(t.tag===31){var r=t.memoizedState;if(r===null&&(t=t.alternate,t!==null&&(r=t.memoizedState)),r!==null)return r.dehydrated}return null}function p(t){if(u(t)!==t)throw Error(s(188))}function g(t){var r=t.alternate;if(!r){if(r=u(t),r===null)throw Error(s(188));return r!==t?null:t}for(var a=t,l=r;;){var h=a.return;if(h===null)break;var d=h.alternate;if(d===null){if(l=h.return,l!==null){a=l;continue}break}if(h.child===d.child){for(d=h.child;d;){if(d===a)return p(h),t;if(d===l)return p(h),r;d=d.sibling}throw Error(s(188))}if(a.return!==l.return)a=h,l=d;else{for(var v=!1,b=h.child;b;){if(b===a){v=!0,a=h,l=d;break}if(b===l){v=!0,l=h,a=d;break}b=b.sibling}if(!v){for(b=d.child;b;){if(b===a){v=!0,a=d,l=h;break}if(b===l){v=!0,l=d,a=h;break}b=b.sibling}if(!v)throw Error(s(189))}}if(a.alternate!==l)throw Error(s(190))}if(a.tag!==3)throw Error(s(188));return a.stateNode.current===a?t:r}function E(t){var r=t.tag;if(r===5||r===26||r===27||r===6)return t;for(t=t.child;t!==null;){if(r=E(t),r!==null)return r;t=t.sibling}return null}var T=Object.assign,R=Symbol.for("react.element"),O=Symbol.for("react.transitional.element"),j=Symbol.for("react.portal"),Q=Symbol.for("react.fragment"),q=Symbol.for("react.strict_mode"),$=Symbol.for("react.profiler"),X=Symbol.for("react.consumer"),ee=Symbol.for("react.context"),de=Symbol.for("react.forward_ref"),pe=Symbol.for("react.suspense"),Ee=Symbol.for("react.suspense_list"),x=Symbol.for("react.memo"),C=Symbol.for("react.lazy"),w=Symbol.for("react.activity"),D=Symbol.for("react.memo_cache_sentinel"),M=Symbol.iterator;function U(t){return t===null||typeof t!="object"?null:(t=M&&t[M]||t["@@iterator"],typeof t=="function"?t:null)}var I=Symbol.for("react.client.reference");function oe(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===I?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Q:return"Fragment";case $:return"Profiler";case q:return"StrictMode";case pe:return"Suspense";case Ee:return"SuspenseList";case w:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case j:return"Portal";case ee:return t.displayName||"Context";case X:return(t._context.displayName||"Context")+".Consumer";case de:var r=t.render;return t=t.displayName,t||(t=r.displayName||r.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case x:return r=t.displayName||null,r!==null?r:oe(t.type)||"Memo";case C:r=t._payload,t=t._init;try{return oe(t(r))}catch{}}return null}var he=Array.isArray,P=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,W=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Z={pending:!1,data:null,method:null,action:null},we=[],Ce=-1;function V(t){return{current:t}}function te(t){0>Ce||(t.current=we[Ce],we[Ce]=null,Ce--)}function le(t,r){Ce++,we[Ce]=t.current,t.current=r}var ce=V(null),ye=V(null),_e=V(null),Oe=V(null);function ot(t,r){switch(le(_e,r),le(ye,t),le(ce,null),r.nodeType){case 9:case 11:t=(t=r.documentElement)&&(t=t.namespaceURI)?m_(t):0;break;default:if(t=r.tagName,r=r.namespaceURI)r=m_(r),t=p_(r,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}te(ce),le(ce,t)}function Xe(){te(ce),te(ye),te(_e)}function $t(t){t.memoizedState!==null&&le(Oe,t);var r=ce.current,a=p_(r,t.type);r!==a&&(le(ye,t),le(ce,a))}function $r(t){ye.current===t&&(te(ce),te(ye)),Oe.current===t&&(te(Oe),kl._currentValue=Z)}var zn,yn;function wt(t){if(zn===void 0)try{throw Error()}catch(a){var r=a.stack.trim().match(/\n( *(at )?)/);zn=r&&r[1]||"",yn=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+zn+t+yn}var ko=!1;function Rs(t,r){if(!t||ko)return"";ko=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(r){var ie=function(){throw Error()};if(Object.defineProperty(ie.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ie,[])}catch(K){var G=K}Reflect.construct(t,[],ie)}else{try{ie.call()}catch(K){G=K}t.call(ie.prototype)}}else{try{throw Error()}catch(K){G=K}(ie=t())&&typeof ie.catch=="function"&&ie.catch(function(){})}}catch(K){if(K&&G&&typeof K.stack=="string")return[K.stack,G.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var h=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");h&&h.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var d=l.DetermineComponentFrameRoot(),v=d[0],b=d[1];if(v&&b){var N=v.split(`
`),F=b.split(`
`);for(h=l=0;l<N.length&&!N[l].includes("DetermineComponentFrameRoot");)l++;for(;h<F.length&&!F[h].includes("DetermineComponentFrameRoot");)h++;if(l===N.length||h===F.length)for(l=N.length-1,h=F.length-1;1<=l&&0<=h&&N[l]!==F[h];)h--;for(;1<=l&&0<=h;l--,h--)if(N[l]!==F[h]){if(l!==1||h!==1)do if(l--,h--,0>h||N[l]!==F[h]){var J=`
`+N[l].replace(" at new "," at ");return t.displayName&&J.includes("<anonymous>")&&(J=J.replace("<anonymous>",t.displayName)),J}while(1<=l&&0<=h);break}}}finally{ko=!1,Error.prepareStackTrace=a}return(a=t?t.displayName||t.name:"")?wt(a):""}function Po(t,r){switch(t.tag){case 26:case 27:case 5:return wt(t.type);case 16:return wt("Lazy");case 13:return t.child!==r&&r!==null?wt("Suspense Fallback"):wt("Suspense");case 19:return wt("SuspenseList");case 0:case 15:return Rs(t.type,!1);case 11:return Rs(t.type.render,!1);case 1:return Rs(t.type,!0);case 31:return wt("Activity");default:return""}}function Lo(t){try{var r="",a=null;do r+=Po(t,a),a=t,t=t.return;while(t);return r}catch(l){return`
Error generating stack: `+l.message+`
`+l.stack}}var Rt=Object.prototype.hasOwnProperty,Bt=i.unstable_scheduleCallback,Ci=i.unstable_cancelCallback,Sf=i.unstable_shouldYield,Du=i.unstable_requestPaint,hn=i.unstable_now,Cs=i.unstable_getCurrentPriorityLevel,Uo=i.unstable_ImmediatePriority,jo=i.unstable_UserBlockingPriority,xi=i.unstable_NormalPriority,Af=i.unstable_LowPriority,Nu=i.unstable_IdlePriority,Ou=i.log,Mu=i.unstable_setDisableYieldValue,tr=null,Xt=null;function Bn(t){if(typeof Ou=="function"&&Mu(t),Xt&&typeof Xt.setStrictMode=="function")try{Xt.setStrictMode(tr,t)}catch{}}var Et=Math.clz32?Math.clz32:ku,Vu=Math.log,ga=Math.LN2;function ku(t){return t>>>=0,t===0?32:31-(Vu(t)/ga|0)|0}var _r=256,xs=262144,Ct=4194304;function Er(t){var r=t&42;if(r!==0)return r;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return t&261888;case 262144:case 524288:case 1048576:case 2097152:return t&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function Tr(t,r,a){var l=t.pendingLanes;if(l===0)return 0;var h=0,d=t.suspendedLanes,v=t.pingedLanes;t=t.warmLanes;var b=l&134217727;return b!==0?(l=b&~d,l!==0?h=Er(l):(v&=b,v!==0?h=Er(v):a||(a=b&~t,a!==0&&(h=Er(a))))):(b=l&~d,b!==0?h=Er(b):v!==0?h=Er(v):a||(a=l&~t,a!==0&&(h=Er(a)))),h===0?0:r!==0&&r!==h&&(r&d)===0&&(d=h&-h,a=r&-r,d>=a||d===32&&(a&4194048)!==0)?r:h}function nr(t,r){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&r)===0}function wf(t,r){switch(t){case 1:case 2:case 4:case 8:case 64:return r+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Pu(){var t=Ct;return Ct<<=1,(Ct&62914560)===0&&(Ct=4194304),t}function br(t){for(var r=[],a=0;31>a;a++)r.push(t);return r}function Is(t,r){t.pendingLanes|=r,r!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function Rf(t,r,a,l,h,d){var v=t.pendingLanes;t.pendingLanes=a,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=a,t.entangledLanes&=a,t.errorRecoveryDisabledLanes&=a,t.shellSuspendCounter=0;var b=t.entanglements,N=t.expirationTimes,F=t.hiddenUpdates;for(a=v&~a;0<a;){var J=31-Et(a),ie=1<<J;b[J]=0,N[J]=-1;var G=F[J];if(G!==null)for(F[J]=null,J=0;J<G.length;J++){var K=G[J];K!==null&&(K.lane&=-536870913)}a&=~ie}l!==0&&Ds(t,l,0),d!==0&&h===0&&t.tag!==0&&(t.suspendedLanes|=d&~(v&~r))}function Ds(t,r,a){t.pendingLanes|=r,t.suspendedLanes&=~r;var l=31-Et(r);t.entangledLanes|=r,t.entanglements[l]=t.entanglements[l]|1073741824|a&261930}function zo(t,r){var a=t.entangledLanes|=r;for(t=t.entanglements;a;){var l=31-Et(a),h=1<<l;h&r|t[l]&r&&(t[l]|=r),a&=~h}}function Bo(t,r){var a=r&-r;return a=(a&42)!==0?1:Ns(a),(a&(t.suspendedLanes|r))!==0?0:a}function Ns(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function Xr(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function Lu(){var t=W.p;return t!==0?t:(t=window.event,t===void 0?32:U_(t.type))}function rr(t,r){var a=W.p;try{return W.p=t,r()}finally{W.p=a}}var ir=Math.random().toString(36).slice(2),xt="__reactFiber$"+ir,Ft="__reactProps$"+ir,Sr="__reactContainer$"+ir,ya="__reactEvents$"+ir,Cf="__reactListeners$"+ir,Uu="__reactHandles$"+ir,ju="__reactResources$"+ir,Ar="__reactMarker$"+ir;function va(t){delete t[xt],delete t[Ft],delete t[ya],delete t[Cf],delete t[Uu]}function wr(t){var r=t[xt];if(r)return r;for(var a=t.parentNode;a;){if(r=a[Sr]||a[xt]){if(a=r.alternate,r.child!==null||a!==null&&a.child!==null)for(t=b_(t);t!==null;){if(a=t[xt])return a;t=b_(t)}return r}t=a,a=t.parentNode}return null}function qn(t){if(t=t[xt]||t[Sr]){var r=t.tag;if(r===5||r===6||r===13||r===31||r===26||r===27||r===3)return t}return null}function Cn(t){var r=t.tag;if(r===5||r===26||r===27||r===6)return t.stateNode;throw Error(s(33))}function Rr(t){var r=t[ju];return r||(r=t[ju]={hoistableStyles:new Map,hoistableScripts:new Map}),r}function It(t){t[Ar]=!0}var qo=new Set,Ho={};function Cr(t,r){xr(t,r),xr(t+"Capture",r)}function xr(t,r){for(Ho[t]=r,t=0;t<r.length;t++)qo.add(r[t])}var Fo=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Go={},Qo={};function zu(t){return Rt.call(Qo,t)?!0:Rt.call(Go,t)?!1:Fo.test(t)?Qo[t]=!0:(Go[t]=!0,!1)}function _a(t,r,a){if(zu(r))if(a===null)t.removeAttribute(r);else{switch(typeof a){case"undefined":case"function":case"symbol":t.removeAttribute(r);return;case"boolean":var l=r.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){t.removeAttribute(r);return}}t.setAttribute(r,""+a)}}function xn(t,r,a){if(a===null)t.removeAttribute(r);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(r);return}t.setAttribute(r,""+a)}}function Dt(t,r,a,l){if(l===null)t.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(a);return}t.setAttributeNS(r,a,""+l)}}function Gt(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Ii(t){var r=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function Yo(t,r,a){var l=Object.getOwnPropertyDescriptor(t.constructor.prototype,r);if(!t.hasOwnProperty(r)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var h=l.get,d=l.set;return Object.defineProperty(t,r,{configurable:!0,get:function(){return h.call(this)},set:function(v){a=""+v,d.call(this,v)}}),Object.defineProperty(t,r,{enumerable:l.enumerable}),{getValue:function(){return a},setValue:function(v){a=""+v},stopTracking:function(){t._valueTracker=null,delete t[r]}}}}function Ze(t){if(!t._valueTracker){var r=Ii(t)?"checked":"value";t._valueTracker=Yo(t,r,""+t[r])}}function Os(t){if(!t)return!1;var r=t._valueTracker;if(!r)return!0;var a=r.getValue(),l="";return t&&(l=Ii(t)?t.checked?"true":"false":t.value),t=l,t!==a?(r.setValue(t),!0):!1}function Ir(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var Ms=/[\n"\\]/g;function vn(t){return t.replace(Ms,function(r){return"\\"+r.charCodeAt(0).toString(16)+" "})}function Ea(t,r,a,l,h,d,v,b){t.name="",v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"?t.type=v:t.removeAttribute("type"),r!=null?v==="number"?(r===0&&t.value===""||t.value!=r)&&(t.value=""+Gt(r)):t.value!==""+Gt(r)&&(t.value=""+Gt(r)):v!=="submit"&&v!=="reset"||t.removeAttribute("value"),r!=null?Ko(t,v,Gt(r)):a!=null?Ko(t,v,Gt(a)):l!=null&&t.removeAttribute("value"),h==null&&d!=null&&(t.defaultChecked=!!d),h!=null&&(t.checked=h&&typeof h!="function"&&typeof h!="symbol"),b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"?t.name=""+Gt(b):t.removeAttribute("name")}function Bu(t,r,a,l,h,d,v,b){if(d!=null&&typeof d!="function"&&typeof d!="symbol"&&typeof d!="boolean"&&(t.type=d),r!=null||a!=null){if(!(d!=="submit"&&d!=="reset"||r!=null)){Ze(t);return}a=a!=null?""+Gt(a):"",r=r!=null?""+Gt(r):a,b||r===t.value||(t.value=r),t.defaultValue=r}l=l??h,l=typeof l!="function"&&typeof l!="symbol"&&!!l,t.checked=b?t.checked:!!l,t.defaultChecked=!!l,v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"&&(t.name=v),Ze(t)}function Ko(t,r,a){r==="number"&&Ir(t.ownerDocument)===t||t.defaultValue===""+a||(t.defaultValue=""+a)}function Di(t,r,a,l){if(t=t.options,r){r={};for(var h=0;h<a.length;h++)r["$"+a[h]]=!0;for(a=0;a<t.length;a++)h=r.hasOwnProperty("$"+t[a].value),t[a].selected!==h&&(t[a].selected=h),h&&l&&(t[a].defaultSelected=!0)}else{for(a=""+Gt(a),r=null,h=0;h<t.length;h++){if(t[h].value===a){t[h].selected=!0,l&&(t[h].defaultSelected=!0);return}r!==null||t[h].disabled||(r=t[h])}r!==null&&(r.selected=!0)}}function qu(t,r,a){if(r!=null&&(r=""+Gt(r),r!==t.value&&(t.value=r),a==null)){t.defaultValue!==r&&(t.defaultValue=r);return}t.defaultValue=a!=null?""+Gt(a):""}function Ni(t,r,a,l){if(r==null){if(l!=null){if(a!=null)throw Error(s(92));if(he(l)){if(1<l.length)throw Error(s(93));l=l[0]}a=l}a==null&&(a=""),r=a}a=Gt(r),t.defaultValue=a,l=t.textContent,l===a&&l!==""&&l!==null&&(t.value=l),Ze(t)}function _n(t,r){if(r){var a=t.firstChild;if(a&&a===t.lastChild&&a.nodeType===3){a.nodeValue=r;return}}t.textContent=r}var Hu=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function $o(t,r,a){var l=r.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?l?t.setProperty(r,""):r==="float"?t.cssFloat="":t[r]="":l?t.setProperty(r,a):typeof a!="number"||a===0||Hu.has(r)?r==="float"?t.cssFloat=a:t[r]=(""+a).trim():t[r]=a+"px"}function Xo(t,r,a){if(r!=null&&typeof r!="object")throw Error(s(62));if(t=t.style,a!=null){for(var l in a)!a.hasOwnProperty(l)||r!=null&&r.hasOwnProperty(l)||(l.indexOf("--")===0?t.setProperty(l,""):l==="float"?t.cssFloat="":t[l]="");for(var h in r)l=r[h],r.hasOwnProperty(h)&&a[h]!==l&&$o(t,h,l)}else for(var d in r)r.hasOwnProperty(d)&&$o(t,d,r[d])}function Ta(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Fu=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Oi=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function ba(t){return Oi.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}function sr(){}var Wo=null;function Hn(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Mi=null,Dr=null;function Vs(t){var r=qn(t);if(r&&(t=r.stateNode)){var a=t[Ft]||null;e:switch(t=r.stateNode,r.type){case"input":if(Ea(t,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),r=a.name,a.type==="radio"&&r!=null){for(a=t;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+vn(""+r)+'"][type="radio"]'),r=0;r<a.length;r++){var l=a[r];if(l!==t&&l.form===t.form){var h=l[Ft]||null;if(!h)throw Error(s(90));Ea(l,h.value,h.defaultValue,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name)}}for(r=0;r<a.length;r++)l=a[r],l.form===t.form&&Os(l)}break e;case"textarea":qu(t,a.value,a.defaultValue);break e;case"select":r=a.value,r!=null&&Di(t,!!a.multiple,r,!1)}}}var Sa=!1;function Vi(t,r,a){if(Sa)return t(r,a);Sa=!0;try{var l=t(r);return l}finally{if(Sa=!1,(Mi!==null||Dr!==null)&&(Lc(),Mi&&(r=Mi,t=Dr,Dr=Mi=null,Vs(r),t)))for(r=0;r<t.length;r++)Vs(t[r])}}function ar(t,r){var a=t.stateNode;if(a===null)return null;var l=a[Ft]||null;if(l===null)return null;a=l[r];e:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(t=t.type,l=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!l;break e;default:t=!1}if(t)return null;if(a&&typeof a!="function")throw Error(s(231,r,typeof a));return a}var Fn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ks=!1;if(Fn)try{var nt={};Object.defineProperty(nt,"passive",{get:function(){ks=!0}}),window.addEventListener("test",nt,nt),window.removeEventListener("test",nt,nt)}catch{ks=!1}var Nr=null,Jo=null,Ps=null;function Zo(){if(Ps)return Ps;var t,r=Jo,a=r.length,l,h="value"in Nr?Nr.value:Nr.textContent,d=h.length;for(t=0;t<a&&r[t]===h[t];t++);var v=a-t;for(l=1;l<=v&&r[a-l]===h[d-l];l++);return Ps=h.slice(t,1<l?1-l:void 0)}function Ls(t){var r=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&r===13&&(t=13)):t=r,t===10&&(t=13),32<=t||t===13?t:0}function Wr(){return!0}function or(){return!1}function Wt(t){function r(a,l,h,d,v){this._reactName=a,this._targetInst=h,this.type=l,this.nativeEvent=d,this.target=v,this.currentTarget=null;for(var b in t)t.hasOwnProperty(b)&&(a=t[b],this[b]=a?a(d):d[b]);return this.isDefaultPrevented=(d.defaultPrevented!=null?d.defaultPrevented:d.returnValue===!1)?Wr:or,this.isPropagationStopped=or,this}return T(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Wr)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Wr)},persist:function(){},isPersistent:Wr}),r}var Jr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Or=Wt(Jr),ki=T({},Jr,{view:0,detail:0}),el=Wt(ki),Pi,Aa,Mr,wa=T({},ki,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Li,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Mr&&(Mr&&t.type==="mousemove"?(Pi=t.screenX-Mr.screenX,Aa=t.screenY-Mr.screenY):Aa=Pi=0,Mr=t),Pi)},movementY:function(t){return"movementY"in t?t.movementY:Aa}}),tl=Wt(wa),Us=T({},wa,{dataTransfer:0}),Gu=Wt(Us),Qu=T({},ki,{relatedTarget:0}),js=Wt(Qu),nl=T({},Jr,{animationName:0,elapsedTime:0,pseudoElement:0}),Yu=Wt(nl),Ra=T({},Jr,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Ku=Wt(Ra),$u=T({},Jr,{data:0}),Vr=Wt($u),Xu={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Wu={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Ju={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Zu(t){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(t):(t=Ju[t])?!!r[t]:!1}function Li(){return Zu}var fn=T({},ki,{key:function(t){if(t.key){var r=Xu[t.key]||t.key;if(r!=="Unidentified")return r}return t.type==="keypress"?(t=Ls(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Wu[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Li,charCode:function(t){return t.type==="keypress"?Ls(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Ls(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),ec=Wt(fn),tc=T({},wa,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Zr=Wt(tc),c=T({},ki,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Li}),y=Wt(c),_=T({},Jr,{propertyName:0,elapsedTime:0,pseudoElement:0}),A=Wt(_),B=T({},wa,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Y=Wt(B),ue=T({},Jr,{newState:0,oldState:0}),Me=Wt(ue),Tt=[9,13,27,32],We=Fn&&"CompositionEvent"in window,ft=null;Fn&&"documentMode"in document&&(ft=document.documentMode);var Gn=Fn&&"TextEvent"in window&&!ft,kr=Fn&&(!We||ft&&8<ft&&11>=ft),lr=" ",ur=!1;function zs(t,r){switch(t){case"keyup":return Tt.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ca(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var xa=!1;function DS(t,r){switch(t){case"compositionend":return Ca(r);case"keypress":return r.which!==32?null:(ur=!0,lr);case"textInput":return t=r.data,t===lr&&ur?null:t;default:return null}}function NS(t,r){if(xa)return t==="compositionend"||!We&&zs(t,r)?(t=Zo(),Ps=Jo=Nr=null,xa=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return kr&&r.locale!=="ko"?null:r.data;default:return null}}var OS={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function wg(t){var r=t&&t.nodeName&&t.nodeName.toLowerCase();return r==="input"?!!OS[t.type]:r==="textarea"}function Rg(t,r,a,l){Mi?Dr?Dr.push(l):Dr=[l]:Mi=l,r=Fc(r,"onChange"),0<r.length&&(a=new Or("onChange","change",null,a,l),t.push({event:a,listeners:r}))}var rl=null,il=null;function MS(t){l_(t,0)}function nc(t){var r=Cn(t);if(Os(r))return t}function Cg(t,r){if(t==="change")return r}var xg=!1;if(Fn){var xf;if(Fn){var If="oninput"in document;if(!If){var Ig=document.createElement("div");Ig.setAttribute("oninput","return;"),If=typeof Ig.oninput=="function"}xf=If}else xf=!1;xg=xf&&(!document.documentMode||9<document.documentMode)}function Dg(){rl&&(rl.detachEvent("onpropertychange",Ng),il=rl=null)}function Ng(t){if(t.propertyName==="value"&&nc(il)){var r=[];Rg(r,il,t,Hn(t)),Vi(MS,r)}}function VS(t,r,a){t==="focusin"?(Dg(),rl=r,il=a,rl.attachEvent("onpropertychange",Ng)):t==="focusout"&&Dg()}function kS(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return nc(il)}function PS(t,r){if(t==="click")return nc(r)}function LS(t,r){if(t==="input"||t==="change")return nc(r)}function US(t,r){return t===r&&(t!==0||1/t===1/r)||t!==t&&r!==r}var In=typeof Object.is=="function"?Object.is:US;function sl(t,r){if(In(t,r))return!0;if(typeof t!="object"||t===null||typeof r!="object"||r===null)return!1;var a=Object.keys(t),l=Object.keys(r);if(a.length!==l.length)return!1;for(l=0;l<a.length;l++){var h=a[l];if(!Rt.call(r,h)||!In(t[h],r[h]))return!1}return!0}function Og(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Mg(t,r){var a=Og(t);t=0;for(var l;a;){if(a.nodeType===3){if(l=t+a.textContent.length,t<=r&&l>=r)return{node:a,offset:r-t};t=l}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=Og(a)}}function Vg(t,r){return t&&r?t===r?!0:t&&t.nodeType===3?!1:r&&r.nodeType===3?Vg(t,r.parentNode):"contains"in t?t.contains(r):t.compareDocumentPosition?!!(t.compareDocumentPosition(r)&16):!1:!1}function kg(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var r=Ir(t.document);r instanceof t.HTMLIFrameElement;){try{var a=typeof r.contentWindow.location.href=="string"}catch{a=!1}if(a)t=r.contentWindow;else break;r=Ir(t.document)}return r}function Df(t){var r=t&&t.nodeName&&t.nodeName.toLowerCase();return r&&(r==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||r==="textarea"||t.contentEditable==="true")}var jS=Fn&&"documentMode"in document&&11>=document.documentMode,Ia=null,Nf=null,al=null,Of=!1;function Pg(t,r,a){var l=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;Of||Ia==null||Ia!==Ir(l)||(l=Ia,"selectionStart"in l&&Df(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),al&&sl(al,l)||(al=l,l=Fc(Nf,"onSelect"),0<l.length&&(r=new Or("onSelect","select",null,r,a),t.push({event:r,listeners:l}),r.target=Ia)))}function Bs(t,r){var a={};return a[t.toLowerCase()]=r.toLowerCase(),a["Webkit"+t]="webkit"+r,a["Moz"+t]="moz"+r,a}var Da={animationend:Bs("Animation","AnimationEnd"),animationiteration:Bs("Animation","AnimationIteration"),animationstart:Bs("Animation","AnimationStart"),transitionrun:Bs("Transition","TransitionRun"),transitionstart:Bs("Transition","TransitionStart"),transitioncancel:Bs("Transition","TransitionCancel"),transitionend:Bs("Transition","TransitionEnd")},Mf={},Lg={};Fn&&(Lg=document.createElement("div").style,"AnimationEvent"in window||(delete Da.animationend.animation,delete Da.animationiteration.animation,delete Da.animationstart.animation),"TransitionEvent"in window||delete Da.transitionend.transition);function qs(t){if(Mf[t])return Mf[t];if(!Da[t])return t;var r=Da[t],a;for(a in r)if(r.hasOwnProperty(a)&&a in Lg)return Mf[t]=r[a];return t}var Ug=qs("animationend"),jg=qs("animationiteration"),zg=qs("animationstart"),zS=qs("transitionrun"),BS=qs("transitionstart"),qS=qs("transitioncancel"),Bg=qs("transitionend"),qg=new Map,Vf="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Vf.push("scrollEnd");function cr(t,r){qg.set(t,r),Cr(r,[t])}var rc=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var r=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(r))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)},Qn=[],Na=0,kf=0;function ic(){for(var t=Na,r=kf=Na=0;r<t;){var a=Qn[r];Qn[r++]=null;var l=Qn[r];Qn[r++]=null;var h=Qn[r];Qn[r++]=null;var d=Qn[r];if(Qn[r++]=null,l!==null&&h!==null){var v=l.pending;v===null?h.next=h:(h.next=v.next,v.next=h),l.pending=h}d!==0&&Hg(a,h,d)}}function sc(t,r,a,l){Qn[Na++]=t,Qn[Na++]=r,Qn[Na++]=a,Qn[Na++]=l,kf|=l,t.lanes|=l,t=t.alternate,t!==null&&(t.lanes|=l)}function Pf(t,r,a,l){return sc(t,r,a,l),ac(t)}function Hs(t,r){return sc(t,null,null,r),ac(t)}function Hg(t,r,a){t.lanes|=a;var l=t.alternate;l!==null&&(l.lanes|=a);for(var h=!1,d=t.return;d!==null;)d.childLanes|=a,l=d.alternate,l!==null&&(l.childLanes|=a),d.tag===22&&(t=d.stateNode,t===null||t._visibility&1||(h=!0)),t=d,d=d.return;return t.tag===3?(d=t.stateNode,h&&r!==null&&(h=31-Et(a),t=d.hiddenUpdates,l=t[h],l===null?t[h]=[r]:l.push(r),r.lane=a|536870912),d):null}function ac(t){if(50<xl)throw xl=0,Gd=null,Error(s(185));for(var r=t.return;r!==null;)t=r,r=t.return;return t.tag===3?t.stateNode:null}var Oa={};function HS(t,r,a,l){this.tag=t,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Dn(t,r,a,l){return new HS(t,r,a,l)}function Lf(t){return t=t.prototype,!(!t||!t.isReactComponent)}function ei(t,r){var a=t.alternate;return a===null?(a=Dn(t.tag,r,t.key,t.mode),a.elementType=t.elementType,a.type=t.type,a.stateNode=t.stateNode,a.alternate=t,t.alternate=a):(a.pendingProps=r,a.type=t.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=t.flags&65011712,a.childLanes=t.childLanes,a.lanes=t.lanes,a.child=t.child,a.memoizedProps=t.memoizedProps,a.memoizedState=t.memoizedState,a.updateQueue=t.updateQueue,r=t.dependencies,a.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},a.sibling=t.sibling,a.index=t.index,a.ref=t.ref,a.refCleanup=t.refCleanup,a}function Fg(t,r){t.flags&=65011714;var a=t.alternate;return a===null?(t.childLanes=0,t.lanes=r,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=a.childLanes,t.lanes=a.lanes,t.child=a.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=a.memoizedProps,t.memoizedState=a.memoizedState,t.updateQueue=a.updateQueue,t.type=a.type,r=a.dependencies,t.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),t}function oc(t,r,a,l,h,d){var v=0;if(l=t,typeof t=="function")Lf(t)&&(v=1);else if(typeof t=="string")v=K1(t,a,ce.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case w:return t=Dn(31,a,r,h),t.elementType=w,t.lanes=d,t;case Q:return Fs(a.children,h,d,r);case q:v=8,h|=24;break;case $:return t=Dn(12,a,r,h|2),t.elementType=$,t.lanes=d,t;case pe:return t=Dn(13,a,r,h),t.elementType=pe,t.lanes=d,t;case Ee:return t=Dn(19,a,r,h),t.elementType=Ee,t.lanes=d,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case ee:v=10;break e;case X:v=9;break e;case de:v=11;break e;case x:v=14;break e;case C:v=16,l=null;break e}v=29,a=Error(s(130,t===null?"null":typeof t,"")),l=null}return r=Dn(v,a,r,h),r.elementType=t,r.type=l,r.lanes=d,r}function Fs(t,r,a,l){return t=Dn(7,t,l,r),t.lanes=a,t}function Uf(t,r,a){return t=Dn(6,t,null,r),t.lanes=a,t}function Gg(t){var r=Dn(18,null,null,0);return r.stateNode=t,r}function jf(t,r,a){return r=Dn(4,t.children!==null?t.children:[],t.key,r),r.lanes=a,r.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},r}var Qg=new WeakMap;function Yn(t,r){if(typeof t=="object"&&t!==null){var a=Qg.get(t);return a!==void 0?a:(r={value:t,source:r,stack:Lo(r)},Qg.set(t,r),r)}return{value:t,source:r,stack:Lo(r)}}var Ma=[],Va=0,lc=null,ol=0,Kn=[],$n=0,Ui=null,Pr=1,Lr="";function ti(t,r){Ma[Va++]=ol,Ma[Va++]=lc,lc=t,ol=r}function Yg(t,r,a){Kn[$n++]=Pr,Kn[$n++]=Lr,Kn[$n++]=Ui,Ui=t;var l=Pr;t=Lr;var h=32-Et(l)-1;l&=~(1<<h),a+=1;var d=32-Et(r)+h;if(30<d){var v=h-h%5;d=(l&(1<<v)-1).toString(32),l>>=v,h-=v,Pr=1<<32-Et(r)+h|a<<h|l,Lr=d+t}else Pr=1<<d|a<<h|l,Lr=t}function zf(t){t.return!==null&&(ti(t,1),Yg(t,1,0))}function Bf(t){for(;t===lc;)lc=Ma[--Va],Ma[Va]=null,ol=Ma[--Va],Ma[Va]=null;for(;t===Ui;)Ui=Kn[--$n],Kn[$n]=null,Lr=Kn[--$n],Kn[$n]=null,Pr=Kn[--$n],Kn[$n]=null}function Kg(t,r){Kn[$n++]=Pr,Kn[$n++]=Lr,Kn[$n++]=Ui,Pr=r.id,Lr=r.overflow,Ui=t}var Jt=null,ut=null,He=!1,ji=null,Xn=!1,qf=Error(s(519));function zi(t){var r=Error(s(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw ll(Yn(r,t)),qf}function $g(t){var r=t.stateNode,a=t.type,l=t.memoizedProps;switch(r[xt]=t,r[Ft]=l,a){case"dialog":Le("cancel",r),Le("close",r);break;case"iframe":case"object":case"embed":Le("load",r);break;case"video":case"audio":for(a=0;a<Dl.length;a++)Le(Dl[a],r);break;case"source":Le("error",r);break;case"img":case"image":case"link":Le("error",r),Le("load",r);break;case"details":Le("toggle",r);break;case"input":Le("invalid",r),Bu(r,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0);break;case"select":Le("invalid",r);break;case"textarea":Le("invalid",r),Ni(r,l.value,l.defaultValue,l.children)}a=l.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||r.textContent===""+a||l.suppressHydrationWarning===!0||f_(r.textContent,a)?(l.popover!=null&&(Le("beforetoggle",r),Le("toggle",r)),l.onScroll!=null&&Le("scroll",r),l.onScrollEnd!=null&&Le("scrollend",r),l.onClick!=null&&(r.onclick=sr),r=!0):r=!1,r||zi(t,!0)}function Xg(t){for(Jt=t.return;Jt;)switch(Jt.tag){case 5:case 31:case 13:Xn=!1;return;case 27:case 3:Xn=!0;return;default:Jt=Jt.return}}function ka(t){if(t!==Jt)return!1;if(!He)return Xg(t),He=!0,!1;var r=t.tag,a;if((a=r!==3&&r!==27)&&((a=r===5)&&(a=t.type,a=!(a!=="form"&&a!=="button")||am(t.type,t.memoizedProps)),a=!a),a&&ut&&zi(t),Xg(t),r===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(s(317));ut=T_(t)}else if(r===31){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(s(317));ut=T_(t)}else r===27?(r=ut,es(t.type)?(t=hm,hm=null,ut=t):ut=r):ut=Jt?Jn(t.stateNode.nextSibling):null;return!0}function Gs(){ut=Jt=null,He=!1}function Hf(){var t=ji;return t!==null&&(Sn===null?Sn=t:Sn.push.apply(Sn,t),ji=null),t}function ll(t){ji===null?ji=[t]:ji.push(t)}var Ff=V(null),Qs=null,ni=null;function Bi(t,r,a){le(Ff,r._currentValue),r._currentValue=a}function ri(t){t._currentValue=Ff.current,te(Ff)}function Gf(t,r,a){for(;t!==null;){var l=t.alternate;if((t.childLanes&r)!==r?(t.childLanes|=r,l!==null&&(l.childLanes|=r)):l!==null&&(l.childLanes&r)!==r&&(l.childLanes|=r),t===a)break;t=t.return}}function Qf(t,r,a,l){var h=t.child;for(h!==null&&(h.return=t);h!==null;){var d=h.dependencies;if(d!==null){var v=h.child;d=d.firstContext;e:for(;d!==null;){var b=d;d=h;for(var N=0;N<r.length;N++)if(b.context===r[N]){d.lanes|=a,b=d.alternate,b!==null&&(b.lanes|=a),Gf(d.return,a,t),l||(v=null);break e}d=b.next}}else if(h.tag===18){if(v=h.return,v===null)throw Error(s(341));v.lanes|=a,d=v.alternate,d!==null&&(d.lanes|=a),Gf(v,a,t),v=null}else v=h.child;if(v!==null)v.return=h;else for(v=h;v!==null;){if(v===t){v=null;break}if(h=v.sibling,h!==null){h.return=v.return,v=h;break}v=v.return}h=v}}function Pa(t,r,a,l){t=null;for(var h=r,d=!1;h!==null;){if(!d){if((h.flags&524288)!==0)d=!0;else if((h.flags&262144)!==0)break}if(h.tag===10){var v=h.alternate;if(v===null)throw Error(s(387));if(v=v.memoizedProps,v!==null){var b=h.type;In(h.pendingProps.value,v.value)||(t!==null?t.push(b):t=[b])}}else if(h===Oe.current){if(v=h.alternate,v===null)throw Error(s(387));v.memoizedState.memoizedState!==h.memoizedState.memoizedState&&(t!==null?t.push(kl):t=[kl])}h=h.return}t!==null&&Qf(r,t,a,l),r.flags|=262144}function uc(t){for(t=t.firstContext;t!==null;){if(!In(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function Ys(t){Qs=t,ni=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function Zt(t){return Wg(Qs,t)}function cc(t,r){return Qs===null&&Ys(t),Wg(t,r)}function Wg(t,r){var a=r._currentValue;if(r={context:r,memoizedValue:a,next:null},ni===null){if(t===null)throw Error(s(308));ni=r,t.dependencies={lanes:0,firstContext:r},t.flags|=524288}else ni=ni.next=r;return a}var FS=typeof AbortController<"u"?AbortController:function(){var t=[],r=this.signal={aborted:!1,addEventListener:function(a,l){t.push(l)}};this.abort=function(){r.aborted=!0,t.forEach(function(a){return a()})}},GS=i.unstable_scheduleCallback,QS=i.unstable_NormalPriority,Nt={$$typeof:ee,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Yf(){return{controller:new FS,data:new Map,refCount:0}}function ul(t){t.refCount--,t.refCount===0&&GS(QS,function(){t.controller.abort()})}var cl=null,Kf=0,La=0,Ua=null;function YS(t,r){if(cl===null){var a=cl=[];Kf=0,La=Wd(),Ua={status:"pending",value:void 0,then:function(l){a.push(l)}}}return Kf++,r.then(Jg,Jg),r}function Jg(){if(--Kf===0&&cl!==null){Ua!==null&&(Ua.status="fulfilled");var t=cl;cl=null,La=0,Ua=null;for(var r=0;r<t.length;r++)(0,t[r])()}}function KS(t,r){var a=[],l={status:"pending",value:null,reason:null,then:function(h){a.push(h)}};return t.then(function(){l.status="fulfilled",l.value=r;for(var h=0;h<a.length;h++)(0,a[h])(r)},function(h){for(l.status="rejected",l.reason=h,h=0;h<a.length;h++)(0,a[h])(void 0)}),l}var Zg=P.S;P.S=function(t,r){Pv=hn(),typeof r=="object"&&r!==null&&typeof r.then=="function"&&YS(t,r),Zg!==null&&Zg(t,r)};var Ks=V(null);function $f(){var t=Ks.current;return t!==null?t:lt.pooledCache}function hc(t,r){r===null?le(Ks,Ks.current):le(Ks,r.pool)}function ey(){var t=$f();return t===null?null:{parent:Nt._currentValue,pool:t}}var ja=Error(s(460)),Xf=Error(s(474)),fc=Error(s(542)),dc={then:function(){}};function ty(t){return t=t.status,t==="fulfilled"||t==="rejected"}function ny(t,r,a){switch(a=t[a],a===void 0?t.push(r):a!==r&&(r.then(sr,sr),r=a),r.status){case"fulfilled":return r.value;case"rejected":throw t=r.reason,iy(t),t;default:if(typeof r.status=="string")r.then(sr,sr);else{if(t=lt,t!==null&&100<t.shellSuspendCounter)throw Error(s(482));t=r,t.status="pending",t.then(function(l){if(r.status==="pending"){var h=r;h.status="fulfilled",h.value=l}},function(l){if(r.status==="pending"){var h=r;h.status="rejected",h.reason=l}})}switch(r.status){case"fulfilled":return r.value;case"rejected":throw t=r.reason,iy(t),t}throw Xs=r,ja}}function $s(t){try{var r=t._init;return r(t._payload)}catch(a){throw a!==null&&typeof a=="object"&&typeof a.then=="function"?(Xs=a,ja):a}}var Xs=null;function ry(){if(Xs===null)throw Error(s(459));var t=Xs;return Xs=null,t}function iy(t){if(t===ja||t===fc)throw Error(s(483))}var za=null,hl=0;function mc(t){var r=hl;return hl+=1,za===null&&(za=[]),ny(za,t,r)}function fl(t,r){r=r.props.ref,t.ref=r!==void 0?r:null}function pc(t,r){throw r.$$typeof===R?Error(s(525)):(t=Object.prototype.toString.call(r),Error(s(31,t==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":t)))}function sy(t){function r(z,L){if(t){var H=z.deletions;H===null?(z.deletions=[L],z.flags|=16):H.push(L)}}function a(z,L){if(!t)return null;for(;L!==null;)r(z,L),L=L.sibling;return null}function l(z){for(var L=new Map;z!==null;)z.key!==null?L.set(z.key,z):L.set(z.index,z),z=z.sibling;return L}function h(z,L){return z=ei(z,L),z.index=0,z.sibling=null,z}function d(z,L,H){return z.index=H,t?(H=z.alternate,H!==null?(H=H.index,H<L?(z.flags|=67108866,L):H):(z.flags|=67108866,L)):(z.flags|=1048576,L)}function v(z){return t&&z.alternate===null&&(z.flags|=67108866),z}function b(z,L,H,re){return L===null||L.tag!==6?(L=Uf(H,z.mode,re),L.return=z,L):(L=h(L,H),L.return=z,L)}function N(z,L,H,re){var be=H.type;return be===Q?J(z,L,H.props.children,re,H.key):L!==null&&(L.elementType===be||typeof be=="object"&&be!==null&&be.$$typeof===C&&$s(be)===L.type)?(L=h(L,H.props),fl(L,H),L.return=z,L):(L=oc(H.type,H.key,H.props,null,z.mode,re),fl(L,H),L.return=z,L)}function F(z,L,H,re){return L===null||L.tag!==4||L.stateNode.containerInfo!==H.containerInfo||L.stateNode.implementation!==H.implementation?(L=jf(H,z.mode,re),L.return=z,L):(L=h(L,H.children||[]),L.return=z,L)}function J(z,L,H,re,be){return L===null||L.tag!==7?(L=Fs(H,z.mode,re,be),L.return=z,L):(L=h(L,H),L.return=z,L)}function ie(z,L,H){if(typeof L=="string"&&L!==""||typeof L=="number"||typeof L=="bigint")return L=Uf(""+L,z.mode,H),L.return=z,L;if(typeof L=="object"&&L!==null){switch(L.$$typeof){case O:return H=oc(L.type,L.key,L.props,null,z.mode,H),fl(H,L),H.return=z,H;case j:return L=jf(L,z.mode,H),L.return=z,L;case C:return L=$s(L),ie(z,L,H)}if(he(L)||U(L))return L=Fs(L,z.mode,H,null),L.return=z,L;if(typeof L.then=="function")return ie(z,mc(L),H);if(L.$$typeof===ee)return ie(z,cc(z,L),H);pc(z,L)}return null}function G(z,L,H,re){var be=L!==null?L.key:null;if(typeof H=="string"&&H!==""||typeof H=="number"||typeof H=="bigint")return be!==null?null:b(z,L,""+H,re);if(typeof H=="object"&&H!==null){switch(H.$$typeof){case O:return H.key===be?N(z,L,H,re):null;case j:return H.key===be?F(z,L,H,re):null;case C:return H=$s(H),G(z,L,H,re)}if(he(H)||U(H))return be!==null?null:J(z,L,H,re,null);if(typeof H.then=="function")return G(z,L,mc(H),re);if(H.$$typeof===ee)return G(z,L,cc(z,H),re);pc(z,H)}return null}function K(z,L,H,re,be){if(typeof re=="string"&&re!==""||typeof re=="number"||typeof re=="bigint")return z=z.get(H)||null,b(L,z,""+re,be);if(typeof re=="object"&&re!==null){switch(re.$$typeof){case O:return z=z.get(re.key===null?H:re.key)||null,N(L,z,re,be);case j:return z=z.get(re.key===null?H:re.key)||null,F(L,z,re,be);case C:return re=$s(re),K(z,L,H,re,be)}if(he(re)||U(re))return z=z.get(H)||null,J(L,z,re,be,null);if(typeof re.then=="function")return K(z,L,H,mc(re),be);if(re.$$typeof===ee)return K(z,L,H,cc(L,re),be);pc(L,re)}return null}function ge(z,L,H,re){for(var be=null,Ye=null,ve=L,ke=L=0,je=null;ve!==null&&ke<H.length;ke++){ve.index>ke?(je=ve,ve=null):je=ve.sibling;var Ke=G(z,ve,H[ke],re);if(Ke===null){ve===null&&(ve=je);break}t&&ve&&Ke.alternate===null&&r(z,ve),L=d(Ke,L,ke),Ye===null?be=Ke:Ye.sibling=Ke,Ye=Ke,ve=je}if(ke===H.length)return a(z,ve),He&&ti(z,ke),be;if(ve===null){for(;ke<H.length;ke++)ve=ie(z,H[ke],re),ve!==null&&(L=d(ve,L,ke),Ye===null?be=ve:Ye.sibling=ve,Ye=ve);return He&&ti(z,ke),be}for(ve=l(ve);ke<H.length;ke++)je=K(ve,z,ke,H[ke],re),je!==null&&(t&&je.alternate!==null&&ve.delete(je.key===null?ke:je.key),L=d(je,L,ke),Ye===null?be=je:Ye.sibling=je,Ye=je);return t&&ve.forEach(function(ss){return r(z,ss)}),He&&ti(z,ke),be}function Ae(z,L,H,re){if(H==null)throw Error(s(151));for(var be=null,Ye=null,ve=L,ke=L=0,je=null,Ke=H.next();ve!==null&&!Ke.done;ke++,Ke=H.next()){ve.index>ke?(je=ve,ve=null):je=ve.sibling;var ss=G(z,ve,Ke.value,re);if(ss===null){ve===null&&(ve=je);break}t&&ve&&ss.alternate===null&&r(z,ve),L=d(ss,L,ke),Ye===null?be=ss:Ye.sibling=ss,Ye=ss,ve=je}if(Ke.done)return a(z,ve),He&&ti(z,ke),be;if(ve===null){for(;!Ke.done;ke++,Ke=H.next())Ke=ie(z,Ke.value,re),Ke!==null&&(L=d(Ke,L,ke),Ye===null?be=Ke:Ye.sibling=Ke,Ye=Ke);return He&&ti(z,ke),be}for(ve=l(ve);!Ke.done;ke++,Ke=H.next())Ke=K(ve,z,ke,Ke.value,re),Ke!==null&&(t&&Ke.alternate!==null&&ve.delete(Ke.key===null?ke:Ke.key),L=d(Ke,L,ke),Ye===null?be=Ke:Ye.sibling=Ke,Ye=Ke);return t&&ve.forEach(function(sA){return r(z,sA)}),He&&ti(z,ke),be}function st(z,L,H,re){if(typeof H=="object"&&H!==null&&H.type===Q&&H.key===null&&(H=H.props.children),typeof H=="object"&&H!==null){switch(H.$$typeof){case O:e:{for(var be=H.key;L!==null;){if(L.key===be){if(be=H.type,be===Q){if(L.tag===7){a(z,L.sibling),re=h(L,H.props.children),re.return=z,z=re;break e}}else if(L.elementType===be||typeof be=="object"&&be!==null&&be.$$typeof===C&&$s(be)===L.type){a(z,L.sibling),re=h(L,H.props),fl(re,H),re.return=z,z=re;break e}a(z,L);break}else r(z,L);L=L.sibling}H.type===Q?(re=Fs(H.props.children,z.mode,re,H.key),re.return=z,z=re):(re=oc(H.type,H.key,H.props,null,z.mode,re),fl(re,H),re.return=z,z=re)}return v(z);case j:e:{for(be=H.key;L!==null;){if(L.key===be)if(L.tag===4&&L.stateNode.containerInfo===H.containerInfo&&L.stateNode.implementation===H.implementation){a(z,L.sibling),re=h(L,H.children||[]),re.return=z,z=re;break e}else{a(z,L);break}else r(z,L);L=L.sibling}re=jf(H,z.mode,re),re.return=z,z=re}return v(z);case C:return H=$s(H),st(z,L,H,re)}if(he(H))return ge(z,L,H,re);if(U(H)){if(be=U(H),typeof be!="function")throw Error(s(150));return H=be.call(H),Ae(z,L,H,re)}if(typeof H.then=="function")return st(z,L,mc(H),re);if(H.$$typeof===ee)return st(z,L,cc(z,H),re);pc(z,H)}return typeof H=="string"&&H!==""||typeof H=="number"||typeof H=="bigint"?(H=""+H,L!==null&&L.tag===6?(a(z,L.sibling),re=h(L,H),re.return=z,z=re):(a(z,L),re=Uf(H,z.mode,re),re.return=z,z=re),v(z)):a(z,L)}return function(z,L,H,re){try{hl=0;var be=st(z,L,H,re);return za=null,be}catch(ve){if(ve===ja||ve===fc)throw ve;var Ye=Dn(29,ve,null,z.mode);return Ye.lanes=re,Ye.return=z,Ye}}}var Ws=sy(!0),ay=sy(!1),qi=!1;function Wf(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Jf(t,r){t=t.updateQueue,r.updateQueue===t&&(r.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function Hi(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function Fi(t,r,a){var l=t.updateQueue;if(l===null)return null;if(l=l.shared,(Je&2)!==0){var h=l.pending;return h===null?r.next=r:(r.next=h.next,h.next=r),l.pending=r,r=ac(t),Hg(t,null,a),r}return sc(t,l,r,a),ac(t)}function dl(t,r,a){if(r=r.updateQueue,r!==null&&(r=r.shared,(a&4194048)!==0)){var l=r.lanes;l&=t.pendingLanes,a|=l,r.lanes=a,zo(t,a)}}function Zf(t,r){var a=t.updateQueue,l=t.alternate;if(l!==null&&(l=l.updateQueue,a===l)){var h=null,d=null;if(a=a.firstBaseUpdate,a!==null){do{var v={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};d===null?h=d=v:d=d.next=v,a=a.next}while(a!==null);d===null?h=d=r:d=d.next=r}else h=d=r;a={baseState:l.baseState,firstBaseUpdate:h,lastBaseUpdate:d,shared:l.shared,callbacks:l.callbacks},t.updateQueue=a;return}t=a.lastBaseUpdate,t===null?a.firstBaseUpdate=r:t.next=r,a.lastBaseUpdate=r}var ed=!1;function ml(){if(ed){var t=Ua;if(t!==null)throw t}}function pl(t,r,a,l){ed=!1;var h=t.updateQueue;qi=!1;var d=h.firstBaseUpdate,v=h.lastBaseUpdate,b=h.shared.pending;if(b!==null){h.shared.pending=null;var N=b,F=N.next;N.next=null,v===null?d=F:v.next=F,v=N;var J=t.alternate;J!==null&&(J=J.updateQueue,b=J.lastBaseUpdate,b!==v&&(b===null?J.firstBaseUpdate=F:b.next=F,J.lastBaseUpdate=N))}if(d!==null){var ie=h.baseState;v=0,J=F=N=null,b=d;do{var G=b.lane&-536870913,K=G!==b.lane;if(K?(Ue&G)===G:(l&G)===G){G!==0&&G===La&&(ed=!0),J!==null&&(J=J.next={lane:0,tag:b.tag,payload:b.payload,callback:null,next:null});e:{var ge=t,Ae=b;G=r;var st=a;switch(Ae.tag){case 1:if(ge=Ae.payload,typeof ge=="function"){ie=ge.call(st,ie,G);break e}ie=ge;break e;case 3:ge.flags=ge.flags&-65537|128;case 0:if(ge=Ae.payload,G=typeof ge=="function"?ge.call(st,ie,G):ge,G==null)break e;ie=T({},ie,G);break e;case 2:qi=!0}}G=b.callback,G!==null&&(t.flags|=64,K&&(t.flags|=8192),K=h.callbacks,K===null?h.callbacks=[G]:K.push(G))}else K={lane:G,tag:b.tag,payload:b.payload,callback:b.callback,next:null},J===null?(F=J=K,N=ie):J=J.next=K,v|=G;if(b=b.next,b===null){if(b=h.shared.pending,b===null)break;K=b,b=K.next,K.next=null,h.lastBaseUpdate=K,h.shared.pending=null}}while(!0);J===null&&(N=ie),h.baseState=N,h.firstBaseUpdate=F,h.lastBaseUpdate=J,d===null&&(h.shared.lanes=0),$i|=v,t.lanes=v,t.memoizedState=ie}}function oy(t,r){if(typeof t!="function")throw Error(s(191,t));t.call(r)}function ly(t,r){var a=t.callbacks;if(a!==null)for(t.callbacks=null,t=0;t<a.length;t++)oy(a[t],r)}var Ba=V(null),gc=V(0);function uy(t,r){t=fi,le(gc,t),le(Ba,r),fi=t|r.baseLanes}function td(){le(gc,fi),le(Ba,Ba.current)}function nd(){fi=gc.current,te(Ba),te(gc)}var Nn=V(null),Wn=null;function Gi(t){var r=t.alternate;le(bt,bt.current&1),le(Nn,t),Wn===null&&(r===null||Ba.current!==null||r.memoizedState!==null)&&(Wn=t)}function rd(t){le(bt,bt.current),le(Nn,t),Wn===null&&(Wn=t)}function cy(t){t.tag===22?(le(bt,bt.current),le(Nn,t),Wn===null&&(Wn=t)):Qi()}function Qi(){le(bt,bt.current),le(Nn,Nn.current)}function On(t){te(Nn),Wn===t&&(Wn=null),te(bt)}var bt=V(0);function yc(t){for(var r=t;r!==null;){if(r.tag===13){var a=r.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||um(a)||cm(a)))return r}else if(r.tag===19&&(r.memoizedProps.revealOrder==="forwards"||r.memoizedProps.revealOrder==="backwards"||r.memoizedProps.revealOrder==="unstable_legacy-backwards"||r.memoizedProps.revealOrder==="together")){if((r.flags&128)!==0)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}var ii=0,Ve=null,rt=null,Ot=null,vc=!1,qa=!1,Js=!1,_c=0,gl=0,Ha=null,$S=0;function yt(){throw Error(s(321))}function id(t,r){if(r===null)return!1;for(var a=0;a<r.length&&a<t.length;a++)if(!In(t[a],r[a]))return!1;return!0}function sd(t,r,a,l,h,d){return ii=d,Ve=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,P.H=t===null||t.memoizedState===null?Yy:Ed,Js=!1,d=a(l,h),Js=!1,qa&&(d=fy(r,a,l,h)),hy(t),d}function hy(t){P.H=_l;var r=rt!==null&&rt.next!==null;if(ii=0,Ot=rt=Ve=null,vc=!1,gl=0,Ha=null,r)throw Error(s(300));t===null||Mt||(t=t.dependencies,t!==null&&uc(t)&&(Mt=!0))}function fy(t,r,a,l){Ve=t;var h=0;do{if(qa&&(Ha=null),gl=0,qa=!1,25<=h)throw Error(s(301));if(h+=1,Ot=rt=null,t.updateQueue!=null){var d=t.updateQueue;d.lastEffect=null,d.events=null,d.stores=null,d.memoCache!=null&&(d.memoCache.index=0)}P.H=Ky,d=r(a,l)}while(qa);return d}function XS(){var t=P.H,r=t.useState()[0];return r=typeof r.then=="function"?yl(r):r,t=t.useState()[0],(rt!==null?rt.memoizedState:null)!==t&&(Ve.flags|=1024),r}function ad(){var t=_c!==0;return _c=0,t}function od(t,r,a){r.updateQueue=t.updateQueue,r.flags&=-2053,t.lanes&=~a}function ld(t){if(vc){for(t=t.memoizedState;t!==null;){var r=t.queue;r!==null&&(r.pending=null),t=t.next}vc=!1}ii=0,Ot=rt=Ve=null,qa=!1,gl=_c=0,Ha=null}function dn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ot===null?Ve.memoizedState=Ot=t:Ot=Ot.next=t,Ot}function St(){if(rt===null){var t=Ve.alternate;t=t!==null?t.memoizedState:null}else t=rt.next;var r=Ot===null?Ve.memoizedState:Ot.next;if(r!==null)Ot=r,rt=t;else{if(t===null)throw Ve.alternate===null?Error(s(467)):Error(s(310));rt=t,t={memoizedState:rt.memoizedState,baseState:rt.baseState,baseQueue:rt.baseQueue,queue:rt.queue,next:null},Ot===null?Ve.memoizedState=Ot=t:Ot=Ot.next=t}return Ot}function Ec(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function yl(t){var r=gl;return gl+=1,Ha===null&&(Ha=[]),t=ny(Ha,t,r),r=Ve,(Ot===null?r.memoizedState:Ot.next)===null&&(r=r.alternate,P.H=r===null||r.memoizedState===null?Yy:Ed),t}function Tc(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return yl(t);if(t.$$typeof===ee)return Zt(t)}throw Error(s(438,String(t)))}function ud(t){var r=null,a=Ve.updateQueue;if(a!==null&&(r=a.memoCache),r==null){var l=Ve.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(r={data:l.data.map(function(h){return h.slice()}),index:0})))}if(r==null&&(r={data:[],index:0}),a===null&&(a=Ec(),Ve.updateQueue=a),a.memoCache=r,a=r.data[r.index],a===void 0)for(a=r.data[r.index]=Array(t),l=0;l<t;l++)a[l]=D;return r.index++,a}function si(t,r){return typeof r=="function"?r(t):r}function bc(t){var r=St();return cd(r,rt,t)}function cd(t,r,a){var l=t.queue;if(l===null)throw Error(s(311));l.lastRenderedReducer=a;var h=t.baseQueue,d=l.pending;if(d!==null){if(h!==null){var v=h.next;h.next=d.next,d.next=v}r.baseQueue=h=d,l.pending=null}if(d=t.baseState,h===null)t.memoizedState=d;else{r=h.next;var b=v=null,N=null,F=r,J=!1;do{var ie=F.lane&-536870913;if(ie!==F.lane?(Ue&ie)===ie:(ii&ie)===ie){var G=F.revertLane;if(G===0)N!==null&&(N=N.next={lane:0,revertLane:0,gesture:null,action:F.action,hasEagerState:F.hasEagerState,eagerState:F.eagerState,next:null}),ie===La&&(J=!0);else if((ii&G)===G){F=F.next,G===La&&(J=!0);continue}else ie={lane:0,revertLane:F.revertLane,gesture:null,action:F.action,hasEagerState:F.hasEagerState,eagerState:F.eagerState,next:null},N===null?(b=N=ie,v=d):N=N.next=ie,Ve.lanes|=G,$i|=G;ie=F.action,Js&&a(d,ie),d=F.hasEagerState?F.eagerState:a(d,ie)}else G={lane:ie,revertLane:F.revertLane,gesture:F.gesture,action:F.action,hasEagerState:F.hasEagerState,eagerState:F.eagerState,next:null},N===null?(b=N=G,v=d):N=N.next=G,Ve.lanes|=ie,$i|=ie;F=F.next}while(F!==null&&F!==r);if(N===null?v=d:N.next=b,!In(d,t.memoizedState)&&(Mt=!0,J&&(a=Ua,a!==null)))throw a;t.memoizedState=d,t.baseState=v,t.baseQueue=N,l.lastRenderedState=d}return h===null&&(l.lanes=0),[t.memoizedState,l.dispatch]}function hd(t){var r=St(),a=r.queue;if(a===null)throw Error(s(311));a.lastRenderedReducer=t;var l=a.dispatch,h=a.pending,d=r.memoizedState;if(h!==null){a.pending=null;var v=h=h.next;do d=t(d,v.action),v=v.next;while(v!==h);In(d,r.memoizedState)||(Mt=!0),r.memoizedState=d,r.baseQueue===null&&(r.baseState=d),a.lastRenderedState=d}return[d,l]}function dy(t,r,a){var l=Ve,h=St(),d=He;if(d){if(a===void 0)throw Error(s(407));a=a()}else a=r();var v=!In((rt||h).memoizedState,a);if(v&&(h.memoizedState=a,Mt=!0),h=h.queue,md(gy.bind(null,l,h,t),[t]),h.getSnapshot!==r||v||Ot!==null&&Ot.memoizedState.tag&1){if(l.flags|=2048,Fa(9,{destroy:void 0},py.bind(null,l,h,a,r),null),lt===null)throw Error(s(349));d||(ii&127)!==0||my(l,r,a)}return a}function my(t,r,a){t.flags|=16384,t={getSnapshot:r,value:a},r=Ve.updateQueue,r===null?(r=Ec(),Ve.updateQueue=r,r.stores=[t]):(a=r.stores,a===null?r.stores=[t]:a.push(t))}function py(t,r,a,l){r.value=a,r.getSnapshot=l,yy(r)&&vy(t)}function gy(t,r,a){return a(function(){yy(r)&&vy(t)})}function yy(t){var r=t.getSnapshot;t=t.value;try{var a=r();return!In(t,a)}catch{return!0}}function vy(t){var r=Hs(t,2);r!==null&&An(r,t,2)}function fd(t){var r=dn();if(typeof t=="function"){var a=t;if(t=a(),Js){Bn(!0);try{a()}finally{Bn(!1)}}}return r.memoizedState=r.baseState=t,r.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:si,lastRenderedState:t},r}function _y(t,r,a,l){return t.baseState=a,cd(t,rt,typeof l=="function"?l:si)}function WS(t,r,a,l,h){if(wc(t))throw Error(s(485));if(t=r.action,t!==null){var d={payload:h,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(v){d.listeners.push(v)}};P.T!==null?a(!0):d.isTransition=!1,l(d),a=r.pending,a===null?(d.next=r.pending=d,Ey(r,d)):(d.next=a.next,r.pending=a.next=d)}}function Ey(t,r){var a=r.action,l=r.payload,h=t.state;if(r.isTransition){var d=P.T,v={};P.T=v;try{var b=a(h,l),N=P.S;N!==null&&N(v,b),Ty(t,r,b)}catch(F){dd(t,r,F)}finally{d!==null&&v.types!==null&&(d.types=v.types),P.T=d}}else try{d=a(h,l),Ty(t,r,d)}catch(F){dd(t,r,F)}}function Ty(t,r,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(l){by(t,r,l)},function(l){return dd(t,r,l)}):by(t,r,a)}function by(t,r,a){r.status="fulfilled",r.value=a,Sy(r),t.state=a,r=t.pending,r!==null&&(a=r.next,a===r?t.pending=null:(a=a.next,r.next=a,Ey(t,a)))}function dd(t,r,a){var l=t.pending;if(t.pending=null,l!==null){l=l.next;do r.status="rejected",r.reason=a,Sy(r),r=r.next;while(r!==l)}t.action=null}function Sy(t){t=t.listeners;for(var r=0;r<t.length;r++)(0,t[r])()}function Ay(t,r){return r}function wy(t,r){if(He){var a=lt.formState;if(a!==null){e:{var l=Ve;if(He){if(ut){t:{for(var h=ut,d=Xn;h.nodeType!==8;){if(!d){h=null;break t}if(h=Jn(h.nextSibling),h===null){h=null;break t}}d=h.data,h=d==="F!"||d==="F"?h:null}if(h){ut=Jn(h.nextSibling),l=h.data==="F!";break e}}zi(l)}l=!1}l&&(r=a[0])}}return a=dn(),a.memoizedState=a.baseState=r,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ay,lastRenderedState:r},a.queue=l,a=Fy.bind(null,Ve,l),l.dispatch=a,l=fd(!1),d=_d.bind(null,Ve,!1,l.queue),l=dn(),h={state:r,dispatch:null,action:t,pending:null},l.queue=h,a=WS.bind(null,Ve,h,d,a),h.dispatch=a,l.memoizedState=t,[r,a,!1]}function Ry(t){var r=St();return Cy(r,rt,t)}function Cy(t,r,a){if(r=cd(t,r,Ay)[0],t=bc(si)[0],typeof r=="object"&&r!==null&&typeof r.then=="function")try{var l=yl(r)}catch(v){throw v===ja?fc:v}else l=r;r=St();var h=r.queue,d=h.dispatch;return a!==r.memoizedState&&(Ve.flags|=2048,Fa(9,{destroy:void 0},JS.bind(null,h,a),null)),[l,d,t]}function JS(t,r){t.action=r}function xy(t){var r=St(),a=rt;if(a!==null)return Cy(r,a,t);St(),r=r.memoizedState,a=St();var l=a.queue.dispatch;return a.memoizedState=t,[r,l,!1]}function Fa(t,r,a,l){return t={tag:t,create:a,deps:l,inst:r,next:null},r=Ve.updateQueue,r===null&&(r=Ec(),Ve.updateQueue=r),a=r.lastEffect,a===null?r.lastEffect=t.next=t:(l=a.next,a.next=t,t.next=l,r.lastEffect=t),t}function Iy(){return St().memoizedState}function Sc(t,r,a,l){var h=dn();Ve.flags|=t,h.memoizedState=Fa(1|r,{destroy:void 0},a,l===void 0?null:l)}function Ac(t,r,a,l){var h=St();l=l===void 0?null:l;var d=h.memoizedState.inst;rt!==null&&l!==null&&id(l,rt.memoizedState.deps)?h.memoizedState=Fa(r,d,a,l):(Ve.flags|=t,h.memoizedState=Fa(1|r,d,a,l))}function Dy(t,r){Sc(8390656,8,t,r)}function md(t,r){Ac(2048,8,t,r)}function ZS(t){Ve.flags|=4;var r=Ve.updateQueue;if(r===null)r=Ec(),Ve.updateQueue=r,r.events=[t];else{var a=r.events;a===null?r.events=[t]:a.push(t)}}function Ny(t){var r=St().memoizedState;return ZS({ref:r,nextImpl:t}),function(){if((Je&2)!==0)throw Error(s(440));return r.impl.apply(void 0,arguments)}}function Oy(t,r){return Ac(4,2,t,r)}function My(t,r){return Ac(4,4,t,r)}function Vy(t,r){if(typeof r=="function"){t=t();var a=r(t);return function(){typeof a=="function"?a():r(null)}}if(r!=null)return t=t(),r.current=t,function(){r.current=null}}function ky(t,r,a){a=a!=null?a.concat([t]):null,Ac(4,4,Vy.bind(null,r,t),a)}function pd(){}function Py(t,r){var a=St();r=r===void 0?null:r;var l=a.memoizedState;return r!==null&&id(r,l[1])?l[0]:(a.memoizedState=[t,r],t)}function Ly(t,r){var a=St();r=r===void 0?null:r;var l=a.memoizedState;if(r!==null&&id(r,l[1]))return l[0];if(l=t(),Js){Bn(!0);try{t()}finally{Bn(!1)}}return a.memoizedState=[l,r],l}function gd(t,r,a){return a===void 0||(ii&1073741824)!==0&&(Ue&261930)===0?t.memoizedState=r:(t.memoizedState=a,t=Uv(),Ve.lanes|=t,$i|=t,a)}function Uy(t,r,a,l){return In(a,r)?a:Ba.current!==null?(t=gd(t,a,l),In(t,r)||(Mt=!0),t):(ii&42)===0||(ii&1073741824)!==0&&(Ue&261930)===0?(Mt=!0,t.memoizedState=a):(t=Uv(),Ve.lanes|=t,$i|=t,r)}function jy(t,r,a,l,h){var d=W.p;W.p=d!==0&&8>d?d:8;var v=P.T,b={};P.T=b,_d(t,!1,r,a);try{var N=h(),F=P.S;if(F!==null&&F(b,N),N!==null&&typeof N=="object"&&typeof N.then=="function"){var J=KS(N,l);vl(t,r,J,kn(t))}else vl(t,r,l,kn(t))}catch(ie){vl(t,r,{then:function(){},status:"rejected",reason:ie},kn())}finally{W.p=d,v!==null&&b.types!==null&&(v.types=b.types),P.T=v}}function e1(){}function yd(t,r,a,l){if(t.tag!==5)throw Error(s(476));var h=zy(t).queue;jy(t,h,r,Z,a===null?e1:function(){return By(t),a(l)})}function zy(t){var r=t.memoizedState;if(r!==null)return r;r={memoizedState:Z,baseState:Z,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:si,lastRenderedState:Z},next:null};var a={};return r.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:si,lastRenderedState:a},next:null},t.memoizedState=r,t=t.alternate,t!==null&&(t.memoizedState=r),r}function By(t){var r=zy(t);r.next===null&&(r=t.alternate.memoizedState),vl(t,r.next.queue,{},kn())}function vd(){return Zt(kl)}function qy(){return St().memoizedState}function Hy(){return St().memoizedState}function t1(t){for(var r=t.return;r!==null;){switch(r.tag){case 24:case 3:var a=kn();t=Hi(a);var l=Fi(r,t,a);l!==null&&(An(l,r,a),dl(l,r,a)),r={cache:Yf()},t.payload=r;return}r=r.return}}function n1(t,r,a){var l=kn();a={lane:l,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},wc(t)?Gy(r,a):(a=Pf(t,r,a,l),a!==null&&(An(a,t,l),Qy(a,r,l)))}function Fy(t,r,a){var l=kn();vl(t,r,a,l)}function vl(t,r,a,l){var h={lane:l,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null};if(wc(t))Gy(r,h);else{var d=t.alternate;if(t.lanes===0&&(d===null||d.lanes===0)&&(d=r.lastRenderedReducer,d!==null))try{var v=r.lastRenderedState,b=d(v,a);if(h.hasEagerState=!0,h.eagerState=b,In(b,v))return sc(t,r,h,0),lt===null&&ic(),!1}catch{}if(a=Pf(t,r,h,l),a!==null)return An(a,t,l),Qy(a,r,l),!0}return!1}function _d(t,r,a,l){if(l={lane:2,revertLane:Wd(),gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},wc(t)){if(r)throw Error(s(479))}else r=Pf(t,a,l,2),r!==null&&An(r,t,2)}function wc(t){var r=t.alternate;return t===Ve||r!==null&&r===Ve}function Gy(t,r){qa=vc=!0;var a=t.pending;a===null?r.next=r:(r.next=a.next,a.next=r),t.pending=r}function Qy(t,r,a){if((a&4194048)!==0){var l=r.lanes;l&=t.pendingLanes,a|=l,r.lanes=a,zo(t,a)}}var _l={readContext:Zt,use:Tc,useCallback:yt,useContext:yt,useEffect:yt,useImperativeHandle:yt,useLayoutEffect:yt,useInsertionEffect:yt,useMemo:yt,useReducer:yt,useRef:yt,useState:yt,useDebugValue:yt,useDeferredValue:yt,useTransition:yt,useSyncExternalStore:yt,useId:yt,useHostTransitionStatus:yt,useFormState:yt,useActionState:yt,useOptimistic:yt,useMemoCache:yt,useCacheRefresh:yt};_l.useEffectEvent=yt;var Yy={readContext:Zt,use:Tc,useCallback:function(t,r){return dn().memoizedState=[t,r===void 0?null:r],t},useContext:Zt,useEffect:Dy,useImperativeHandle:function(t,r,a){a=a!=null?a.concat([t]):null,Sc(4194308,4,Vy.bind(null,r,t),a)},useLayoutEffect:function(t,r){return Sc(4194308,4,t,r)},useInsertionEffect:function(t,r){Sc(4,2,t,r)},useMemo:function(t,r){var a=dn();r=r===void 0?null:r;var l=t();if(Js){Bn(!0);try{t()}finally{Bn(!1)}}return a.memoizedState=[l,r],l},useReducer:function(t,r,a){var l=dn();if(a!==void 0){var h=a(r);if(Js){Bn(!0);try{a(r)}finally{Bn(!1)}}}else h=r;return l.memoizedState=l.baseState=h,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:h},l.queue=t,t=t.dispatch=n1.bind(null,Ve,t),[l.memoizedState,t]},useRef:function(t){var r=dn();return t={current:t},r.memoizedState=t},useState:function(t){t=fd(t);var r=t.queue,a=Fy.bind(null,Ve,r);return r.dispatch=a,[t.memoizedState,a]},useDebugValue:pd,useDeferredValue:function(t,r){var a=dn();return gd(a,t,r)},useTransition:function(){var t=fd(!1);return t=jy.bind(null,Ve,t.queue,!0,!1),dn().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,r,a){var l=Ve,h=dn();if(He){if(a===void 0)throw Error(s(407));a=a()}else{if(a=r(),lt===null)throw Error(s(349));(Ue&127)!==0||my(l,r,a)}h.memoizedState=a;var d={value:a,getSnapshot:r};return h.queue=d,Dy(gy.bind(null,l,d,t),[t]),l.flags|=2048,Fa(9,{destroy:void 0},py.bind(null,l,d,a,r),null),a},useId:function(){var t=dn(),r=lt.identifierPrefix;if(He){var a=Lr,l=Pr;a=(l&~(1<<32-Et(l)-1)).toString(32)+a,r="_"+r+"R_"+a,a=_c++,0<a&&(r+="H"+a.toString(32)),r+="_"}else a=$S++,r="_"+r+"r_"+a.toString(32)+"_";return t.memoizedState=r},useHostTransitionStatus:vd,useFormState:wy,useActionState:wy,useOptimistic:function(t){var r=dn();r.memoizedState=r.baseState=t;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return r.queue=a,r=_d.bind(null,Ve,!0,a),a.dispatch=r,[t,r]},useMemoCache:ud,useCacheRefresh:function(){return dn().memoizedState=t1.bind(null,Ve)},useEffectEvent:function(t){var r=dn(),a={impl:t};return r.memoizedState=a,function(){if((Je&2)!==0)throw Error(s(440));return a.impl.apply(void 0,arguments)}}},Ed={readContext:Zt,use:Tc,useCallback:Py,useContext:Zt,useEffect:md,useImperativeHandle:ky,useInsertionEffect:Oy,useLayoutEffect:My,useMemo:Ly,useReducer:bc,useRef:Iy,useState:function(){return bc(si)},useDebugValue:pd,useDeferredValue:function(t,r){var a=St();return Uy(a,rt.memoizedState,t,r)},useTransition:function(){var t=bc(si)[0],r=St().memoizedState;return[typeof t=="boolean"?t:yl(t),r]},useSyncExternalStore:dy,useId:qy,useHostTransitionStatus:vd,useFormState:Ry,useActionState:Ry,useOptimistic:function(t,r){var a=St();return _y(a,rt,t,r)},useMemoCache:ud,useCacheRefresh:Hy};Ed.useEffectEvent=Ny;var Ky={readContext:Zt,use:Tc,useCallback:Py,useContext:Zt,useEffect:md,useImperativeHandle:ky,useInsertionEffect:Oy,useLayoutEffect:My,useMemo:Ly,useReducer:hd,useRef:Iy,useState:function(){return hd(si)},useDebugValue:pd,useDeferredValue:function(t,r){var a=St();return rt===null?gd(a,t,r):Uy(a,rt.memoizedState,t,r)},useTransition:function(){var t=hd(si)[0],r=St().memoizedState;return[typeof t=="boolean"?t:yl(t),r]},useSyncExternalStore:dy,useId:qy,useHostTransitionStatus:vd,useFormState:xy,useActionState:xy,useOptimistic:function(t,r){var a=St();return rt!==null?_y(a,rt,t,r):(a.baseState=t,[t,a.queue.dispatch])},useMemoCache:ud,useCacheRefresh:Hy};Ky.useEffectEvent=Ny;function Td(t,r,a,l){r=t.memoizedState,a=a(l,r),a=a==null?r:T({},r,a),t.memoizedState=a,t.lanes===0&&(t.updateQueue.baseState=a)}var bd={enqueueSetState:function(t,r,a){t=t._reactInternals;var l=kn(),h=Hi(l);h.payload=r,a!=null&&(h.callback=a),r=Fi(t,h,l),r!==null&&(An(r,t,l),dl(r,t,l))},enqueueReplaceState:function(t,r,a){t=t._reactInternals;var l=kn(),h=Hi(l);h.tag=1,h.payload=r,a!=null&&(h.callback=a),r=Fi(t,h,l),r!==null&&(An(r,t,l),dl(r,t,l))},enqueueForceUpdate:function(t,r){t=t._reactInternals;var a=kn(),l=Hi(a);l.tag=2,r!=null&&(l.callback=r),r=Fi(t,l,a),r!==null&&(An(r,t,a),dl(r,t,a))}};function $y(t,r,a,l,h,d,v){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(l,d,v):r.prototype&&r.prototype.isPureReactComponent?!sl(a,l)||!sl(h,d):!0}function Xy(t,r,a,l){t=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(a,l),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(a,l),r.state!==t&&bd.enqueueReplaceState(r,r.state,null)}function Zs(t,r){var a=r;if("ref"in r){a={};for(var l in r)l!=="ref"&&(a[l]=r[l])}if(t=t.defaultProps){a===r&&(a=T({},a));for(var h in t)a[h]===void 0&&(a[h]=t[h])}return a}function Wy(t){rc(t)}function Jy(t){console.error(t)}function Zy(t){rc(t)}function Rc(t,r){try{var a=t.onUncaughtError;a(r.value,{componentStack:r.stack})}catch(l){setTimeout(function(){throw l})}}function ev(t,r,a){try{var l=t.onCaughtError;l(a.value,{componentStack:a.stack,errorBoundary:r.tag===1?r.stateNode:null})}catch(h){setTimeout(function(){throw h})}}function Sd(t,r,a){return a=Hi(a),a.tag=3,a.payload={element:null},a.callback=function(){Rc(t,r)},a}function tv(t){return t=Hi(t),t.tag=3,t}function nv(t,r,a,l){var h=a.type.getDerivedStateFromError;if(typeof h=="function"){var d=l.value;t.payload=function(){return h(d)},t.callback=function(){ev(r,a,l)}}var v=a.stateNode;v!==null&&typeof v.componentDidCatch=="function"&&(t.callback=function(){ev(r,a,l),typeof h!="function"&&(Xi===null?Xi=new Set([this]):Xi.add(this));var b=l.stack;this.componentDidCatch(l.value,{componentStack:b!==null?b:""})})}function r1(t,r,a,l,h){if(a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(r=a.alternate,r!==null&&Pa(r,a,h,!0),a=Nn.current,a!==null){switch(a.tag){case 31:case 13:return Wn===null?Uc():a.alternate===null&&vt===0&&(vt=3),a.flags&=-257,a.flags|=65536,a.lanes=h,l===dc?a.flags|=16384:(r=a.updateQueue,r===null?a.updateQueue=new Set([l]):r.add(l),Kd(t,l,h)),!1;case 22:return a.flags|=65536,l===dc?a.flags|=16384:(r=a.updateQueue,r===null?(r={transitions:null,markerInstances:null,retryQueue:new Set([l])},a.updateQueue=r):(a=r.retryQueue,a===null?r.retryQueue=new Set([l]):a.add(l)),Kd(t,l,h)),!1}throw Error(s(435,a.tag))}return Kd(t,l,h),Uc(),!1}if(He)return r=Nn.current,r!==null?((r.flags&65536)===0&&(r.flags|=256),r.flags|=65536,r.lanes=h,l!==qf&&(t=Error(s(422),{cause:l}),ll(Yn(t,a)))):(l!==qf&&(r=Error(s(423),{cause:l}),ll(Yn(r,a))),t=t.current.alternate,t.flags|=65536,h&=-h,t.lanes|=h,l=Yn(l,a),h=Sd(t.stateNode,l,h),Zf(t,h),vt!==4&&(vt=2)),!1;var d=Error(s(520),{cause:l});if(d=Yn(d,a),Cl===null?Cl=[d]:Cl.push(d),vt!==4&&(vt=2),r===null)return!0;l=Yn(l,a),a=r;do{switch(a.tag){case 3:return a.flags|=65536,t=h&-h,a.lanes|=t,t=Sd(a.stateNode,l,t),Zf(a,t),!1;case 1:if(r=a.type,d=a.stateNode,(a.flags&128)===0&&(typeof r.getDerivedStateFromError=="function"||d!==null&&typeof d.componentDidCatch=="function"&&(Xi===null||!Xi.has(d))))return a.flags|=65536,h&=-h,a.lanes|=h,h=tv(h),nv(h,t,a,l),Zf(a,h),!1}a=a.return}while(a!==null);return!1}var Ad=Error(s(461)),Mt=!1;function en(t,r,a,l){r.child=t===null?ay(r,null,a,l):Ws(r,t.child,a,l)}function rv(t,r,a,l,h){a=a.render;var d=r.ref;if("ref"in l){var v={};for(var b in l)b!=="ref"&&(v[b]=l[b])}else v=l;return Ys(r),l=sd(t,r,a,v,d,h),b=ad(),t!==null&&!Mt?(od(t,r,h),ai(t,r,h)):(He&&b&&zf(r),r.flags|=1,en(t,r,l,h),r.child)}function iv(t,r,a,l,h){if(t===null){var d=a.type;return typeof d=="function"&&!Lf(d)&&d.defaultProps===void 0&&a.compare===null?(r.tag=15,r.type=d,sv(t,r,d,l,h)):(t=oc(a.type,null,l,r,r.mode,h),t.ref=r.ref,t.return=r,r.child=t)}if(d=t.child,!Od(t,h)){var v=d.memoizedProps;if(a=a.compare,a=a!==null?a:sl,a(v,l)&&t.ref===r.ref)return ai(t,r,h)}return r.flags|=1,t=ei(d,l),t.ref=r.ref,t.return=r,r.child=t}function sv(t,r,a,l,h){if(t!==null){var d=t.memoizedProps;if(sl(d,l)&&t.ref===r.ref)if(Mt=!1,r.pendingProps=l=d,Od(t,h))(t.flags&131072)!==0&&(Mt=!0);else return r.lanes=t.lanes,ai(t,r,h)}return wd(t,r,a,l,h)}function av(t,r,a,l){var h=l.children,d=t!==null?t.memoizedState:null;if(t===null&&r.stateNode===null&&(r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),l.mode==="hidden"){if((r.flags&128)!==0){if(d=d!==null?d.baseLanes|a:a,t!==null){for(l=r.child=t.child,h=0;l!==null;)h=h|l.lanes|l.childLanes,l=l.sibling;l=h&~d}else l=0,r.child=null;return ov(t,r,d,a,l)}if((a&536870912)!==0)r.memoizedState={baseLanes:0,cachePool:null},t!==null&&hc(r,d!==null?d.cachePool:null),d!==null?uy(r,d):td(),cy(r);else return l=r.lanes=536870912,ov(t,r,d!==null?d.baseLanes|a:a,a,l)}else d!==null?(hc(r,d.cachePool),uy(r,d),Qi(),r.memoizedState=null):(t!==null&&hc(r,null),td(),Qi());return en(t,r,h,a),r.child}function El(t,r){return t!==null&&t.tag===22||r.stateNode!==null||(r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),r.sibling}function ov(t,r,a,l,h){var d=$f();return d=d===null?null:{parent:Nt._currentValue,pool:d},r.memoizedState={baseLanes:a,cachePool:d},t!==null&&hc(r,null),td(),cy(r),t!==null&&Pa(t,r,l,!0),r.childLanes=h,null}function Cc(t,r){return r=Ic({mode:r.mode,children:r.children},t.mode),r.ref=t.ref,t.child=r,r.return=t,r}function lv(t,r,a){return Ws(r,t.child,null,a),t=Cc(r,r.pendingProps),t.flags|=2,On(r),r.memoizedState=null,t}function i1(t,r,a){var l=r.pendingProps,h=(r.flags&128)!==0;if(r.flags&=-129,t===null){if(He){if(l.mode==="hidden")return t=Cc(r,l),r.lanes=536870912,El(null,t);if(rd(r),(t=ut)?(t=E_(t,Xn),t=t!==null&&t.data==="&"?t:null,t!==null&&(r.memoizedState={dehydrated:t,treeContext:Ui!==null?{id:Pr,overflow:Lr}:null,retryLane:536870912,hydrationErrors:null},a=Gg(t),a.return=r,r.child=a,Jt=r,ut=null)):t=null,t===null)throw zi(r);return r.lanes=536870912,null}return Cc(r,l)}var d=t.memoizedState;if(d!==null){var v=d.dehydrated;if(rd(r),h)if(r.flags&256)r.flags&=-257,r=lv(t,r,a);else if(r.memoizedState!==null)r.child=t.child,r.flags|=128,r=null;else throw Error(s(558));else if(Mt||Pa(t,r,a,!1),h=(a&t.childLanes)!==0,Mt||h){if(l=lt,l!==null&&(v=Bo(l,a),v!==0&&v!==d.retryLane))throw d.retryLane=v,Hs(t,v),An(l,t,v),Ad;Uc(),r=lv(t,r,a)}else t=d.treeContext,ut=Jn(v.nextSibling),Jt=r,He=!0,ji=null,Xn=!1,t!==null&&Kg(r,t),r=Cc(r,l),r.flags|=4096;return r}return t=ei(t.child,{mode:l.mode,children:l.children}),t.ref=r.ref,r.child=t,t.return=r,t}function xc(t,r){var a=r.ref;if(a===null)t!==null&&t.ref!==null&&(r.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(s(284));(t===null||t.ref!==a)&&(r.flags|=4194816)}}function wd(t,r,a,l,h){return Ys(r),a=sd(t,r,a,l,void 0,h),l=ad(),t!==null&&!Mt?(od(t,r,h),ai(t,r,h)):(He&&l&&zf(r),r.flags|=1,en(t,r,a,h),r.child)}function uv(t,r,a,l,h,d){return Ys(r),r.updateQueue=null,a=fy(r,l,a,h),hy(t),l=ad(),t!==null&&!Mt?(od(t,r,d),ai(t,r,d)):(He&&l&&zf(r),r.flags|=1,en(t,r,a,d),r.child)}function cv(t,r,a,l,h){if(Ys(r),r.stateNode===null){var d=Oa,v=a.contextType;typeof v=="object"&&v!==null&&(d=Zt(v)),d=new a(l,d),r.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,d.updater=bd,r.stateNode=d,d._reactInternals=r,d=r.stateNode,d.props=l,d.state=r.memoizedState,d.refs={},Wf(r),v=a.contextType,d.context=typeof v=="object"&&v!==null?Zt(v):Oa,d.state=r.memoizedState,v=a.getDerivedStateFromProps,typeof v=="function"&&(Td(r,a,v,l),d.state=r.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof d.getSnapshotBeforeUpdate=="function"||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(v=d.state,typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount(),v!==d.state&&bd.enqueueReplaceState(d,d.state,null),pl(r,l,d,h),ml(),d.state=r.memoizedState),typeof d.componentDidMount=="function"&&(r.flags|=4194308),l=!0}else if(t===null){d=r.stateNode;var b=r.memoizedProps,N=Zs(a,b);d.props=N;var F=d.context,J=a.contextType;v=Oa,typeof J=="object"&&J!==null&&(v=Zt(J));var ie=a.getDerivedStateFromProps;J=typeof ie=="function"||typeof d.getSnapshotBeforeUpdate=="function",b=r.pendingProps!==b,J||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(b||F!==v)&&Xy(r,d,l,v),qi=!1;var G=r.memoizedState;d.state=G,pl(r,l,d,h),ml(),F=r.memoizedState,b||G!==F||qi?(typeof ie=="function"&&(Td(r,a,ie,l),F=r.memoizedState),(N=qi||$y(r,a,N,l,G,F,v))?(J||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount()),typeof d.componentDidMount=="function"&&(r.flags|=4194308)):(typeof d.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=l,r.memoizedState=F),d.props=l,d.state=F,d.context=v,l=N):(typeof d.componentDidMount=="function"&&(r.flags|=4194308),l=!1)}else{d=r.stateNode,Jf(t,r),v=r.memoizedProps,J=Zs(a,v),d.props=J,ie=r.pendingProps,G=d.context,F=a.contextType,N=Oa,typeof F=="object"&&F!==null&&(N=Zt(F)),b=a.getDerivedStateFromProps,(F=typeof b=="function"||typeof d.getSnapshotBeforeUpdate=="function")||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(v!==ie||G!==N)&&Xy(r,d,l,N),qi=!1,G=r.memoizedState,d.state=G,pl(r,l,d,h),ml();var K=r.memoizedState;v!==ie||G!==K||qi||t!==null&&t.dependencies!==null&&uc(t.dependencies)?(typeof b=="function"&&(Td(r,a,b,l),K=r.memoizedState),(J=qi||$y(r,a,J,l,G,K,N)||t!==null&&t.dependencies!==null&&uc(t.dependencies))?(F||typeof d.UNSAFE_componentWillUpdate!="function"&&typeof d.componentWillUpdate!="function"||(typeof d.componentWillUpdate=="function"&&d.componentWillUpdate(l,K,N),typeof d.UNSAFE_componentWillUpdate=="function"&&d.UNSAFE_componentWillUpdate(l,K,N)),typeof d.componentDidUpdate=="function"&&(r.flags|=4),typeof d.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof d.componentDidUpdate!="function"||v===t.memoizedProps&&G===t.memoizedState||(r.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||v===t.memoizedProps&&G===t.memoizedState||(r.flags|=1024),r.memoizedProps=l,r.memoizedState=K),d.props=l,d.state=K,d.context=N,l=J):(typeof d.componentDidUpdate!="function"||v===t.memoizedProps&&G===t.memoizedState||(r.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||v===t.memoizedProps&&G===t.memoizedState||(r.flags|=1024),l=!1)}return d=l,xc(t,r),l=(r.flags&128)!==0,d||l?(d=r.stateNode,a=l&&typeof a.getDerivedStateFromError!="function"?null:d.render(),r.flags|=1,t!==null&&l?(r.child=Ws(r,t.child,null,h),r.child=Ws(r,null,a,h)):en(t,r,a,h),r.memoizedState=d.state,t=r.child):t=ai(t,r,h),t}function hv(t,r,a,l){return Gs(),r.flags|=256,en(t,r,a,l),r.child}var Rd={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Cd(t){return{baseLanes:t,cachePool:ey()}}function xd(t,r,a){return t=t!==null?t.childLanes&~a:0,r&&(t|=Vn),t}function fv(t,r,a){var l=r.pendingProps,h=!1,d=(r.flags&128)!==0,v;if((v=d)||(v=t!==null&&t.memoizedState===null?!1:(bt.current&2)!==0),v&&(h=!0,r.flags&=-129),v=(r.flags&32)!==0,r.flags&=-33,t===null){if(He){if(h?Gi(r):Qi(),(t=ut)?(t=E_(t,Xn),t=t!==null&&t.data!=="&"?t:null,t!==null&&(r.memoizedState={dehydrated:t,treeContext:Ui!==null?{id:Pr,overflow:Lr}:null,retryLane:536870912,hydrationErrors:null},a=Gg(t),a.return=r,r.child=a,Jt=r,ut=null)):t=null,t===null)throw zi(r);return cm(t)?r.lanes=32:r.lanes=536870912,null}var b=l.children;return l=l.fallback,h?(Qi(),h=r.mode,b=Ic({mode:"hidden",children:b},h),l=Fs(l,h,a,null),b.return=r,l.return=r,b.sibling=l,r.child=b,l=r.child,l.memoizedState=Cd(a),l.childLanes=xd(t,v,a),r.memoizedState=Rd,El(null,l)):(Gi(r),Id(r,b))}var N=t.memoizedState;if(N!==null&&(b=N.dehydrated,b!==null)){if(d)r.flags&256?(Gi(r),r.flags&=-257,r=Dd(t,r,a)):r.memoizedState!==null?(Qi(),r.child=t.child,r.flags|=128,r=null):(Qi(),b=l.fallback,h=r.mode,l=Ic({mode:"visible",children:l.children},h),b=Fs(b,h,a,null),b.flags|=2,l.return=r,b.return=r,l.sibling=b,r.child=l,Ws(r,t.child,null,a),l=r.child,l.memoizedState=Cd(a),l.childLanes=xd(t,v,a),r.memoizedState=Rd,r=El(null,l));else if(Gi(r),cm(b)){if(v=b.nextSibling&&b.nextSibling.dataset,v)var F=v.dgst;v=F,l=Error(s(419)),l.stack="",l.digest=v,ll({value:l,source:null,stack:null}),r=Dd(t,r,a)}else if(Mt||Pa(t,r,a,!1),v=(a&t.childLanes)!==0,Mt||v){if(v=lt,v!==null&&(l=Bo(v,a),l!==0&&l!==N.retryLane))throw N.retryLane=l,Hs(t,l),An(v,t,l),Ad;um(b)||Uc(),r=Dd(t,r,a)}else um(b)?(r.flags|=192,r.child=t.child,r=null):(t=N.treeContext,ut=Jn(b.nextSibling),Jt=r,He=!0,ji=null,Xn=!1,t!==null&&Kg(r,t),r=Id(r,l.children),r.flags|=4096);return r}return h?(Qi(),b=l.fallback,h=r.mode,N=t.child,F=N.sibling,l=ei(N,{mode:"hidden",children:l.children}),l.subtreeFlags=N.subtreeFlags&65011712,F!==null?b=ei(F,b):(b=Fs(b,h,a,null),b.flags|=2),b.return=r,l.return=r,l.sibling=b,r.child=l,El(null,l),l=r.child,b=t.child.memoizedState,b===null?b=Cd(a):(h=b.cachePool,h!==null?(N=Nt._currentValue,h=h.parent!==N?{parent:N,pool:N}:h):h=ey(),b={baseLanes:b.baseLanes|a,cachePool:h}),l.memoizedState=b,l.childLanes=xd(t,v,a),r.memoizedState=Rd,El(t.child,l)):(Gi(r),a=t.child,t=a.sibling,a=ei(a,{mode:"visible",children:l.children}),a.return=r,a.sibling=null,t!==null&&(v=r.deletions,v===null?(r.deletions=[t],r.flags|=16):v.push(t)),r.child=a,r.memoizedState=null,a)}function Id(t,r){return r=Ic({mode:"visible",children:r},t.mode),r.return=t,t.child=r}function Ic(t,r){return t=Dn(22,t,null,r),t.lanes=0,t}function Dd(t,r,a){return Ws(r,t.child,null,a),t=Id(r,r.pendingProps.children),t.flags|=2,r.memoizedState=null,t}function dv(t,r,a){t.lanes|=r;var l=t.alternate;l!==null&&(l.lanes|=r),Gf(t.return,r,a)}function Nd(t,r,a,l,h,d){var v=t.memoizedState;v===null?t.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:l,tail:a,tailMode:h,treeForkCount:d}:(v.isBackwards=r,v.rendering=null,v.renderingStartTime=0,v.last=l,v.tail=a,v.tailMode=h,v.treeForkCount=d)}function mv(t,r,a){var l=r.pendingProps,h=l.revealOrder,d=l.tail;l=l.children;var v=bt.current,b=(v&2)!==0;if(b?(v=v&1|2,r.flags|=128):v&=1,le(bt,v),en(t,r,l,a),l=He?ol:0,!b&&t!==null&&(t.flags&128)!==0)e:for(t=r.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&dv(t,a,r);else if(t.tag===19)dv(t,a,r);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===r)break e;for(;t.sibling===null;){if(t.return===null||t.return===r)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}switch(h){case"forwards":for(a=r.child,h=null;a!==null;)t=a.alternate,t!==null&&yc(t)===null&&(h=a),a=a.sibling;a=h,a===null?(h=r.child,r.child=null):(h=a.sibling,a.sibling=null),Nd(r,!1,h,a,d,l);break;case"backwards":case"unstable_legacy-backwards":for(a=null,h=r.child,r.child=null;h!==null;){if(t=h.alternate,t!==null&&yc(t)===null){r.child=h;break}t=h.sibling,h.sibling=a,a=h,h=t}Nd(r,!0,a,null,d,l);break;case"together":Nd(r,!1,null,null,void 0,l);break;default:r.memoizedState=null}return r.child}function ai(t,r,a){if(t!==null&&(r.dependencies=t.dependencies),$i|=r.lanes,(a&r.childLanes)===0)if(t!==null){if(Pa(t,r,a,!1),(a&r.childLanes)===0)return null}else return null;if(t!==null&&r.child!==t.child)throw Error(s(153));if(r.child!==null){for(t=r.child,a=ei(t,t.pendingProps),r.child=a,a.return=r;t.sibling!==null;)t=t.sibling,a=a.sibling=ei(t,t.pendingProps),a.return=r;a.sibling=null}return r.child}function Od(t,r){return(t.lanes&r)!==0?!0:(t=t.dependencies,!!(t!==null&&uc(t)))}function s1(t,r,a){switch(r.tag){case 3:ot(r,r.stateNode.containerInfo),Bi(r,Nt,t.memoizedState.cache),Gs();break;case 27:case 5:$t(r);break;case 4:ot(r,r.stateNode.containerInfo);break;case 10:Bi(r,r.type,r.memoizedProps.value);break;case 31:if(r.memoizedState!==null)return r.flags|=128,rd(r),null;break;case 13:var l=r.memoizedState;if(l!==null)return l.dehydrated!==null?(Gi(r),r.flags|=128,null):(a&r.child.childLanes)!==0?fv(t,r,a):(Gi(r),t=ai(t,r,a),t!==null?t.sibling:null);Gi(r);break;case 19:var h=(t.flags&128)!==0;if(l=(a&r.childLanes)!==0,l||(Pa(t,r,a,!1),l=(a&r.childLanes)!==0),h){if(l)return mv(t,r,a);r.flags|=128}if(h=r.memoizedState,h!==null&&(h.rendering=null,h.tail=null,h.lastEffect=null),le(bt,bt.current),l)break;return null;case 22:return r.lanes=0,av(t,r,a,r.pendingProps);case 24:Bi(r,Nt,t.memoizedState.cache)}return ai(t,r,a)}function pv(t,r,a){if(t!==null)if(t.memoizedProps!==r.pendingProps)Mt=!0;else{if(!Od(t,a)&&(r.flags&128)===0)return Mt=!1,s1(t,r,a);Mt=(t.flags&131072)!==0}else Mt=!1,He&&(r.flags&1048576)!==0&&Yg(r,ol,r.index);switch(r.lanes=0,r.tag){case 16:e:{var l=r.pendingProps;if(t=$s(r.elementType),r.type=t,typeof t=="function")Lf(t)?(l=Zs(t,l),r.tag=1,r=cv(null,r,t,l,a)):(r.tag=0,r=wd(null,r,t,l,a));else{if(t!=null){var h=t.$$typeof;if(h===de){r.tag=11,r=rv(null,r,t,l,a);break e}else if(h===x){r.tag=14,r=iv(null,r,t,l,a);break e}}throw r=oe(t)||t,Error(s(306,r,""))}}return r;case 0:return wd(t,r,r.type,r.pendingProps,a);case 1:return l=r.type,h=Zs(l,r.pendingProps),cv(t,r,l,h,a);case 3:e:{if(ot(r,r.stateNode.containerInfo),t===null)throw Error(s(387));l=r.pendingProps;var d=r.memoizedState;h=d.element,Jf(t,r),pl(r,l,null,a);var v=r.memoizedState;if(l=v.cache,Bi(r,Nt,l),l!==d.cache&&Qf(r,[Nt],a,!0),ml(),l=v.element,d.isDehydrated)if(d={element:l,isDehydrated:!1,cache:v.cache},r.updateQueue.baseState=d,r.memoizedState=d,r.flags&256){r=hv(t,r,l,a);break e}else if(l!==h){h=Yn(Error(s(424)),r),ll(h),r=hv(t,r,l,a);break e}else for(t=r.stateNode.containerInfo,t.nodeType===9?t=t.body:t=t.nodeName==="HTML"?t.ownerDocument.body:t,ut=Jn(t.firstChild),Jt=r,He=!0,ji=null,Xn=!0,a=ay(r,null,l,a),r.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling;else{if(Gs(),l===h){r=ai(t,r,a);break e}en(t,r,l,a)}r=r.child}return r;case 26:return xc(t,r),t===null?(a=R_(r.type,null,r.pendingProps,null))?r.memoizedState=a:He||(a=r.type,t=r.pendingProps,l=Gc(_e.current).createElement(a),l[xt]=r,l[Ft]=t,tn(l,a,t),It(l),r.stateNode=l):r.memoizedState=R_(r.type,t.memoizedProps,r.pendingProps,t.memoizedState),null;case 27:return $t(r),t===null&&He&&(l=r.stateNode=S_(r.type,r.pendingProps,_e.current),Jt=r,Xn=!0,h=ut,es(r.type)?(hm=h,ut=Jn(l.firstChild)):ut=h),en(t,r,r.pendingProps.children,a),xc(t,r),t===null&&(r.flags|=4194304),r.child;case 5:return t===null&&He&&((h=l=ut)&&(l=k1(l,r.type,r.pendingProps,Xn),l!==null?(r.stateNode=l,Jt=r,ut=Jn(l.firstChild),Xn=!1,h=!0):h=!1),h||zi(r)),$t(r),h=r.type,d=r.pendingProps,v=t!==null?t.memoizedProps:null,l=d.children,am(h,d)?l=null:v!==null&&am(h,v)&&(r.flags|=32),r.memoizedState!==null&&(h=sd(t,r,XS,null,null,a),kl._currentValue=h),xc(t,r),en(t,r,l,a),r.child;case 6:return t===null&&He&&((t=a=ut)&&(a=P1(a,r.pendingProps,Xn),a!==null?(r.stateNode=a,Jt=r,ut=null,t=!0):t=!1),t||zi(r)),null;case 13:return fv(t,r,a);case 4:return ot(r,r.stateNode.containerInfo),l=r.pendingProps,t===null?r.child=Ws(r,null,l,a):en(t,r,l,a),r.child;case 11:return rv(t,r,r.type,r.pendingProps,a);case 7:return en(t,r,r.pendingProps,a),r.child;case 8:return en(t,r,r.pendingProps.children,a),r.child;case 12:return en(t,r,r.pendingProps.children,a),r.child;case 10:return l=r.pendingProps,Bi(r,r.type,l.value),en(t,r,l.children,a),r.child;case 9:return h=r.type._context,l=r.pendingProps.children,Ys(r),h=Zt(h),l=l(h),r.flags|=1,en(t,r,l,a),r.child;case 14:return iv(t,r,r.type,r.pendingProps,a);case 15:return sv(t,r,r.type,r.pendingProps,a);case 19:return mv(t,r,a);case 31:return i1(t,r,a);case 22:return av(t,r,a,r.pendingProps);case 24:return Ys(r),l=Zt(Nt),t===null?(h=$f(),h===null&&(h=lt,d=Yf(),h.pooledCache=d,d.refCount++,d!==null&&(h.pooledCacheLanes|=a),h=d),r.memoizedState={parent:l,cache:h},Wf(r),Bi(r,Nt,h)):((t.lanes&a)!==0&&(Jf(t,r),pl(r,null,null,a),ml()),h=t.memoizedState,d=r.memoizedState,h.parent!==l?(h={parent:l,cache:l},r.memoizedState=h,r.lanes===0&&(r.memoizedState=r.updateQueue.baseState=h),Bi(r,Nt,l)):(l=d.cache,Bi(r,Nt,l),l!==h.cache&&Qf(r,[Nt],a,!0))),en(t,r,r.pendingProps.children,a),r.child;case 29:throw r.pendingProps}throw Error(s(156,r.tag))}function oi(t){t.flags|=4}function Md(t,r,a,l,h){if((r=(t.mode&32)!==0)&&(r=!1),r){if(t.flags|=16777216,(h&335544128)===h)if(t.stateNode.complete)t.flags|=8192;else if(qv())t.flags|=8192;else throw Xs=dc,Xf}else t.flags&=-16777217}function gv(t,r){if(r.type!=="stylesheet"||(r.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!N_(r))if(qv())t.flags|=8192;else throw Xs=dc,Xf}function Dc(t,r){r!==null&&(t.flags|=4),t.flags&16384&&(r=t.tag!==22?Pu():536870912,t.lanes|=r,Ka|=r)}function Tl(t,r){if(!He)switch(t.tailMode){case"hidden":r=t.tail;for(var a=null;r!==null;)r.alternate!==null&&(a=r),r=r.sibling;a===null?t.tail=null:a.sibling=null;break;case"collapsed":a=t.tail;for(var l=null;a!==null;)a.alternate!==null&&(l=a),a=a.sibling;l===null?r||t.tail===null?t.tail=null:t.tail.sibling=null:l.sibling=null}}function ct(t){var r=t.alternate!==null&&t.alternate.child===t.child,a=0,l=0;if(r)for(var h=t.child;h!==null;)a|=h.lanes|h.childLanes,l|=h.subtreeFlags&65011712,l|=h.flags&65011712,h.return=t,h=h.sibling;else for(h=t.child;h!==null;)a|=h.lanes|h.childLanes,l|=h.subtreeFlags,l|=h.flags,h.return=t,h=h.sibling;return t.subtreeFlags|=l,t.childLanes=a,r}function a1(t,r,a){var l=r.pendingProps;switch(Bf(r),r.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ct(r),null;case 1:return ct(r),null;case 3:return a=r.stateNode,l=null,t!==null&&(l=t.memoizedState.cache),r.memoizedState.cache!==l&&(r.flags|=2048),ri(Nt),Xe(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(t===null||t.child===null)&&(ka(r)?oi(r):t===null||t.memoizedState.isDehydrated&&(r.flags&256)===0||(r.flags|=1024,Hf())),ct(r),null;case 26:var h=r.type,d=r.memoizedState;return t===null?(oi(r),d!==null?(ct(r),gv(r,d)):(ct(r),Md(r,h,null,l,a))):d?d!==t.memoizedState?(oi(r),ct(r),gv(r,d)):(ct(r),r.flags&=-16777217):(t=t.memoizedProps,t!==l&&oi(r),ct(r),Md(r,h,t,l,a)),null;case 27:if($r(r),a=_e.current,h=r.type,t!==null&&r.stateNode!=null)t.memoizedProps!==l&&oi(r);else{if(!l){if(r.stateNode===null)throw Error(s(166));return ct(r),null}t=ce.current,ka(r)?$g(r):(t=S_(h,l,a),r.stateNode=t,oi(r))}return ct(r),null;case 5:if($r(r),h=r.type,t!==null&&r.stateNode!=null)t.memoizedProps!==l&&oi(r);else{if(!l){if(r.stateNode===null)throw Error(s(166));return ct(r),null}if(d=ce.current,ka(r))$g(r);else{var v=Gc(_e.current);switch(d){case 1:d=v.createElementNS("http://www.w3.org/2000/svg",h);break;case 2:d=v.createElementNS("http://www.w3.org/1998/Math/MathML",h);break;default:switch(h){case"svg":d=v.createElementNS("http://www.w3.org/2000/svg",h);break;case"math":d=v.createElementNS("http://www.w3.org/1998/Math/MathML",h);break;case"script":d=v.createElement("div"),d.innerHTML="<script><\/script>",d=d.removeChild(d.firstChild);break;case"select":d=typeof l.is=="string"?v.createElement("select",{is:l.is}):v.createElement("select"),l.multiple?d.multiple=!0:l.size&&(d.size=l.size);break;default:d=typeof l.is=="string"?v.createElement(h,{is:l.is}):v.createElement(h)}}d[xt]=r,d[Ft]=l;e:for(v=r.child;v!==null;){if(v.tag===5||v.tag===6)d.appendChild(v.stateNode);else if(v.tag!==4&&v.tag!==27&&v.child!==null){v.child.return=v,v=v.child;continue}if(v===r)break e;for(;v.sibling===null;){if(v.return===null||v.return===r)break e;v=v.return}v.sibling.return=v.return,v=v.sibling}r.stateNode=d;e:switch(tn(d,h,l),h){case"button":case"input":case"select":case"textarea":l=!!l.autoFocus;break e;case"img":l=!0;break e;default:l=!1}l&&oi(r)}}return ct(r),Md(r,r.type,t===null?null:t.memoizedProps,r.pendingProps,a),null;case 6:if(t&&r.stateNode!=null)t.memoizedProps!==l&&oi(r);else{if(typeof l!="string"&&r.stateNode===null)throw Error(s(166));if(t=_e.current,ka(r)){if(t=r.stateNode,a=r.memoizedProps,l=null,h=Jt,h!==null)switch(h.tag){case 27:case 5:l=h.memoizedProps}t[xt]=r,t=!!(t.nodeValue===a||l!==null&&l.suppressHydrationWarning===!0||f_(t.nodeValue,a)),t||zi(r,!0)}else t=Gc(t).createTextNode(l),t[xt]=r,r.stateNode=t}return ct(r),null;case 31:if(a=r.memoizedState,t===null||t.memoizedState!==null){if(l=ka(r),a!==null){if(t===null){if(!l)throw Error(s(318));if(t=r.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(s(557));t[xt]=r}else Gs(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;ct(r),t=!1}else a=Hf(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=a),t=!0;if(!t)return r.flags&256?(On(r),r):(On(r),null);if((r.flags&128)!==0)throw Error(s(558))}return ct(r),null;case 13:if(l=r.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(h=ka(r),l!==null&&l.dehydrated!==null){if(t===null){if(!h)throw Error(s(318));if(h=r.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(s(317));h[xt]=r}else Gs(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;ct(r),h=!1}else h=Hf(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=h),h=!0;if(!h)return r.flags&256?(On(r),r):(On(r),null)}return On(r),(r.flags&128)!==0?(r.lanes=a,r):(a=l!==null,t=t!==null&&t.memoizedState!==null,a&&(l=r.child,h=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(h=l.alternate.memoizedState.cachePool.pool),d=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(d=l.memoizedState.cachePool.pool),d!==h&&(l.flags|=2048)),a!==t&&a&&(r.child.flags|=8192),Dc(r,r.updateQueue),ct(r),null);case 4:return Xe(),t===null&&tm(r.stateNode.containerInfo),ct(r),null;case 10:return ri(r.type),ct(r),null;case 19:if(te(bt),l=r.memoizedState,l===null)return ct(r),null;if(h=(r.flags&128)!==0,d=l.rendering,d===null)if(h)Tl(l,!1);else{if(vt!==0||t!==null&&(t.flags&128)!==0)for(t=r.child;t!==null;){if(d=yc(t),d!==null){for(r.flags|=128,Tl(l,!1),t=d.updateQueue,r.updateQueue=t,Dc(r,t),r.subtreeFlags=0,t=a,a=r.child;a!==null;)Fg(a,t),a=a.sibling;return le(bt,bt.current&1|2),He&&ti(r,l.treeForkCount),r.child}t=t.sibling}l.tail!==null&&hn()>kc&&(r.flags|=128,h=!0,Tl(l,!1),r.lanes=4194304)}else{if(!h)if(t=yc(d),t!==null){if(r.flags|=128,h=!0,t=t.updateQueue,r.updateQueue=t,Dc(r,t),Tl(l,!0),l.tail===null&&l.tailMode==="hidden"&&!d.alternate&&!He)return ct(r),null}else 2*hn()-l.renderingStartTime>kc&&a!==536870912&&(r.flags|=128,h=!0,Tl(l,!1),r.lanes=4194304);l.isBackwards?(d.sibling=r.child,r.child=d):(t=l.last,t!==null?t.sibling=d:r.child=d,l.last=d)}return l.tail!==null?(t=l.tail,l.rendering=t,l.tail=t.sibling,l.renderingStartTime=hn(),t.sibling=null,a=bt.current,le(bt,h?a&1|2:a&1),He&&ti(r,l.treeForkCount),t):(ct(r),null);case 22:case 23:return On(r),nd(),l=r.memoizedState!==null,t!==null?t.memoizedState!==null!==l&&(r.flags|=8192):l&&(r.flags|=8192),l?(a&536870912)!==0&&(r.flags&128)===0&&(ct(r),r.subtreeFlags&6&&(r.flags|=8192)):ct(r),a=r.updateQueue,a!==null&&Dc(r,a.retryQueue),a=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),l=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(l=r.memoizedState.cachePool.pool),l!==a&&(r.flags|=2048),t!==null&&te(Ks),null;case 24:return a=null,t!==null&&(a=t.memoizedState.cache),r.memoizedState.cache!==a&&(r.flags|=2048),ri(Nt),ct(r),null;case 25:return null;case 30:return null}throw Error(s(156,r.tag))}function o1(t,r){switch(Bf(r),r.tag){case 1:return t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 3:return ri(Nt),Xe(),t=r.flags,(t&65536)!==0&&(t&128)===0?(r.flags=t&-65537|128,r):null;case 26:case 27:case 5:return $r(r),null;case 31:if(r.memoizedState!==null){if(On(r),r.alternate===null)throw Error(s(340));Gs()}return t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 13:if(On(r),t=r.memoizedState,t!==null&&t.dehydrated!==null){if(r.alternate===null)throw Error(s(340));Gs()}return t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 19:return te(bt),null;case 4:return Xe(),null;case 10:return ri(r.type),null;case 22:case 23:return On(r),nd(),t!==null&&te(Ks),t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 24:return ri(Nt),null;case 25:return null;default:return null}}function yv(t,r){switch(Bf(r),r.tag){case 3:ri(Nt),Xe();break;case 26:case 27:case 5:$r(r);break;case 4:Xe();break;case 31:r.memoizedState!==null&&On(r);break;case 13:On(r);break;case 19:te(bt);break;case 10:ri(r.type);break;case 22:case 23:On(r),nd(),t!==null&&te(Ks);break;case 24:ri(Nt)}}function bl(t,r){try{var a=r.updateQueue,l=a!==null?a.lastEffect:null;if(l!==null){var h=l.next;a=h;do{if((a.tag&t)===t){l=void 0;var d=a.create,v=a.inst;l=d(),v.destroy=l}a=a.next}while(a!==h)}}catch(b){tt(r,r.return,b)}}function Yi(t,r,a){try{var l=r.updateQueue,h=l!==null?l.lastEffect:null;if(h!==null){var d=h.next;l=d;do{if((l.tag&t)===t){var v=l.inst,b=v.destroy;if(b!==void 0){v.destroy=void 0,h=r;var N=a,F=b;try{F()}catch(J){tt(h,N,J)}}}l=l.next}while(l!==d)}}catch(J){tt(r,r.return,J)}}function vv(t){var r=t.updateQueue;if(r!==null){var a=t.stateNode;try{ly(r,a)}catch(l){tt(t,t.return,l)}}}function _v(t,r,a){a.props=Zs(t.type,t.memoizedProps),a.state=t.memoizedState;try{a.componentWillUnmount()}catch(l){tt(t,r,l)}}function Sl(t,r){try{var a=t.ref;if(a!==null){switch(t.tag){case 26:case 27:case 5:var l=t.stateNode;break;case 30:l=t.stateNode;break;default:l=t.stateNode}typeof a=="function"?t.refCleanup=a(l):a.current=l}}catch(h){tt(t,r,h)}}function Ur(t,r){var a=t.ref,l=t.refCleanup;if(a!==null)if(typeof l=="function")try{l()}catch(h){tt(t,r,h)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(h){tt(t,r,h)}else a.current=null}function Ev(t){var r=t.type,a=t.memoizedProps,l=t.stateNode;try{e:switch(r){case"button":case"input":case"select":case"textarea":a.autoFocus&&l.focus();break e;case"img":a.src?l.src=a.src:a.srcSet&&(l.srcset=a.srcSet)}}catch(h){tt(t,t.return,h)}}function Vd(t,r,a){try{var l=t.stateNode;I1(l,t.type,a,r),l[Ft]=r}catch(h){tt(t,t.return,h)}}function Tv(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&es(t.type)||t.tag===4}function kd(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Tv(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&es(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Pd(t,r,a){var l=t.tag;if(l===5||l===6)t=t.stateNode,r?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(t,r):(r=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,r.appendChild(t),a=a._reactRootContainer,a!=null||r.onclick!==null||(r.onclick=sr));else if(l!==4&&(l===27&&es(t.type)&&(a=t.stateNode,r=null),t=t.child,t!==null))for(Pd(t,r,a),t=t.sibling;t!==null;)Pd(t,r,a),t=t.sibling}function Nc(t,r,a){var l=t.tag;if(l===5||l===6)t=t.stateNode,r?a.insertBefore(t,r):a.appendChild(t);else if(l!==4&&(l===27&&es(t.type)&&(a=t.stateNode),t=t.child,t!==null))for(Nc(t,r,a),t=t.sibling;t!==null;)Nc(t,r,a),t=t.sibling}function bv(t){var r=t.stateNode,a=t.memoizedProps;try{for(var l=t.type,h=r.attributes;h.length;)r.removeAttributeNode(h[0]);tn(r,l,a),r[xt]=t,r[Ft]=a}catch(d){tt(t,t.return,d)}}var li=!1,Vt=!1,Ld=!1,Sv=typeof WeakSet=="function"?WeakSet:Set,Qt=null;function l1(t,r){if(t=t.containerInfo,im=Jc,t=kg(t),Df(t)){if("selectionStart"in t)var a={start:t.selectionStart,end:t.selectionEnd};else e:{a=(a=t.ownerDocument)&&a.defaultView||window;var l=a.getSelection&&a.getSelection();if(l&&l.rangeCount!==0){a=l.anchorNode;var h=l.anchorOffset,d=l.focusNode;l=l.focusOffset;try{a.nodeType,d.nodeType}catch{a=null;break e}var v=0,b=-1,N=-1,F=0,J=0,ie=t,G=null;t:for(;;){for(var K;ie!==a||h!==0&&ie.nodeType!==3||(b=v+h),ie!==d||l!==0&&ie.nodeType!==3||(N=v+l),ie.nodeType===3&&(v+=ie.nodeValue.length),(K=ie.firstChild)!==null;)G=ie,ie=K;for(;;){if(ie===t)break t;if(G===a&&++F===h&&(b=v),G===d&&++J===l&&(N=v),(K=ie.nextSibling)!==null)break;ie=G,G=ie.parentNode}ie=K}a=b===-1||N===-1?null:{start:b,end:N}}else a=null}a=a||{start:0,end:0}}else a=null;for(sm={focusedElem:t,selectionRange:a},Jc=!1,Qt=r;Qt!==null;)if(r=Qt,t=r.child,(r.subtreeFlags&1028)!==0&&t!==null)t.return=r,Qt=t;else for(;Qt!==null;){switch(r=Qt,d=r.alternate,t=r.flags,r.tag){case 0:if((t&4)!==0&&(t=r.updateQueue,t=t!==null?t.events:null,t!==null))for(a=0;a<t.length;a++)h=t[a],h.ref.impl=h.nextImpl;break;case 11:case 15:break;case 1:if((t&1024)!==0&&d!==null){t=void 0,a=r,h=d.memoizedProps,d=d.memoizedState,l=a.stateNode;try{var ge=Zs(a.type,h);t=l.getSnapshotBeforeUpdate(ge,d),l.__reactInternalSnapshotBeforeUpdate=t}catch(Ae){tt(a,a.return,Ae)}}break;case 3:if((t&1024)!==0){if(t=r.stateNode.containerInfo,a=t.nodeType,a===9)lm(t);else if(a===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":lm(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(s(163))}if(t=r.sibling,t!==null){t.return=r.return,Qt=t;break}Qt=r.return}}function Av(t,r,a){var l=a.flags;switch(a.tag){case 0:case 11:case 15:ci(t,a),l&4&&bl(5,a);break;case 1:if(ci(t,a),l&4)if(t=a.stateNode,r===null)try{t.componentDidMount()}catch(v){tt(a,a.return,v)}else{var h=Zs(a.type,r.memoizedProps);r=r.memoizedState;try{t.componentDidUpdate(h,r,t.__reactInternalSnapshotBeforeUpdate)}catch(v){tt(a,a.return,v)}}l&64&&vv(a),l&512&&Sl(a,a.return);break;case 3:if(ci(t,a),l&64&&(t=a.updateQueue,t!==null)){if(r=null,a.child!==null)switch(a.child.tag){case 27:case 5:r=a.child.stateNode;break;case 1:r=a.child.stateNode}try{ly(t,r)}catch(v){tt(a,a.return,v)}}break;case 27:r===null&&l&4&&bv(a);case 26:case 5:ci(t,a),r===null&&l&4&&Ev(a),l&512&&Sl(a,a.return);break;case 12:ci(t,a);break;case 31:ci(t,a),l&4&&Cv(t,a);break;case 13:ci(t,a),l&4&&xv(t,a),l&64&&(t=a.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(a=y1.bind(null,a),L1(t,a))));break;case 22:if(l=a.memoizedState!==null||li,!l){r=r!==null&&r.memoizedState!==null||Vt,h=li;var d=Vt;li=l,(Vt=r)&&!d?hi(t,a,(a.subtreeFlags&8772)!==0):ci(t,a),li=h,Vt=d}break;case 30:break;default:ci(t,a)}}function wv(t){var r=t.alternate;r!==null&&(t.alternate=null,wv(r)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(r=t.stateNode,r!==null&&va(r)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var dt=null,En=!1;function ui(t,r,a){for(a=a.child;a!==null;)Rv(t,r,a),a=a.sibling}function Rv(t,r,a){if(Xt&&typeof Xt.onCommitFiberUnmount=="function")try{Xt.onCommitFiberUnmount(tr,a)}catch{}switch(a.tag){case 26:Vt||Ur(a,r),ui(t,r,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:Vt||Ur(a,r);var l=dt,h=En;es(a.type)&&(dt=a.stateNode,En=!1),ui(t,r,a),Ol(a.stateNode),dt=l,En=h;break;case 5:Vt||Ur(a,r);case 6:if(l=dt,h=En,dt=null,ui(t,r,a),dt=l,En=h,dt!==null)if(En)try{(dt.nodeType===9?dt.body:dt.nodeName==="HTML"?dt.ownerDocument.body:dt).removeChild(a.stateNode)}catch(d){tt(a,r,d)}else try{dt.removeChild(a.stateNode)}catch(d){tt(a,r,d)}break;case 18:dt!==null&&(En?(t=dt,v_(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,a.stateNode),no(t)):v_(dt,a.stateNode));break;case 4:l=dt,h=En,dt=a.stateNode.containerInfo,En=!0,ui(t,r,a),dt=l,En=h;break;case 0:case 11:case 14:case 15:Yi(2,a,r),Vt||Yi(4,a,r),ui(t,r,a);break;case 1:Vt||(Ur(a,r),l=a.stateNode,typeof l.componentWillUnmount=="function"&&_v(a,r,l)),ui(t,r,a);break;case 21:ui(t,r,a);break;case 22:Vt=(l=Vt)||a.memoizedState!==null,ui(t,r,a),Vt=l;break;default:ui(t,r,a)}}function Cv(t,r){if(r.memoizedState===null&&(t=r.alternate,t!==null&&(t=t.memoizedState,t!==null))){t=t.dehydrated;try{no(t)}catch(a){tt(r,r.return,a)}}}function xv(t,r){if(r.memoizedState===null&&(t=r.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{no(t)}catch(a){tt(r,r.return,a)}}function u1(t){switch(t.tag){case 31:case 13:case 19:var r=t.stateNode;return r===null&&(r=t.stateNode=new Sv),r;case 22:return t=t.stateNode,r=t._retryCache,r===null&&(r=t._retryCache=new Sv),r;default:throw Error(s(435,t.tag))}}function Oc(t,r){var a=u1(t);r.forEach(function(l){if(!a.has(l)){a.add(l);var h=v1.bind(null,t,l);l.then(h,h)}})}function Tn(t,r){var a=r.deletions;if(a!==null)for(var l=0;l<a.length;l++){var h=a[l],d=t,v=r,b=v;e:for(;b!==null;){switch(b.tag){case 27:if(es(b.type)){dt=b.stateNode,En=!1;break e}break;case 5:dt=b.stateNode,En=!1;break e;case 3:case 4:dt=b.stateNode.containerInfo,En=!0;break e}b=b.return}if(dt===null)throw Error(s(160));Rv(d,v,h),dt=null,En=!1,d=h.alternate,d!==null&&(d.return=null),h.return=null}if(r.subtreeFlags&13886)for(r=r.child;r!==null;)Iv(r,t),r=r.sibling}var hr=null;function Iv(t,r){var a=t.alternate,l=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:Tn(r,t),bn(t),l&4&&(Yi(3,t,t.return),bl(3,t),Yi(5,t,t.return));break;case 1:Tn(r,t),bn(t),l&512&&(Vt||a===null||Ur(a,a.return)),l&64&&li&&(t=t.updateQueue,t!==null&&(l=t.callbacks,l!==null&&(a=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=a===null?l:a.concat(l))));break;case 26:var h=hr;if(Tn(r,t),bn(t),l&512&&(Vt||a===null||Ur(a,a.return)),l&4){var d=a!==null?a.memoizedState:null;if(l=t.memoizedState,a===null)if(l===null)if(t.stateNode===null){e:{l=t.type,a=t.memoizedProps,h=h.ownerDocument||h;t:switch(l){case"title":d=h.getElementsByTagName("title")[0],(!d||d[Ar]||d[xt]||d.namespaceURI==="http://www.w3.org/2000/svg"||d.hasAttribute("itemprop"))&&(d=h.createElement(l),h.head.insertBefore(d,h.querySelector("head > title"))),tn(d,l,a),d[xt]=t,It(d),l=d;break e;case"link":var v=I_("link","href",h).get(l+(a.href||""));if(v){for(var b=0;b<v.length;b++)if(d=v[b],d.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&d.getAttribute("rel")===(a.rel==null?null:a.rel)&&d.getAttribute("title")===(a.title==null?null:a.title)&&d.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){v.splice(b,1);break t}}d=h.createElement(l),tn(d,l,a),h.head.appendChild(d);break;case"meta":if(v=I_("meta","content",h).get(l+(a.content||""))){for(b=0;b<v.length;b++)if(d=v[b],d.getAttribute("content")===(a.content==null?null:""+a.content)&&d.getAttribute("name")===(a.name==null?null:a.name)&&d.getAttribute("property")===(a.property==null?null:a.property)&&d.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&d.getAttribute("charset")===(a.charSet==null?null:a.charSet)){v.splice(b,1);break t}}d=h.createElement(l),tn(d,l,a),h.head.appendChild(d);break;default:throw Error(s(468,l))}d[xt]=t,It(d),l=d}t.stateNode=l}else D_(h,t.type,t.stateNode);else t.stateNode=x_(h,l,t.memoizedProps);else d!==l?(d===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):d.count--,l===null?D_(h,t.type,t.stateNode):x_(h,l,t.memoizedProps)):l===null&&t.stateNode!==null&&Vd(t,t.memoizedProps,a.memoizedProps)}break;case 27:Tn(r,t),bn(t),l&512&&(Vt||a===null||Ur(a,a.return)),a!==null&&l&4&&Vd(t,t.memoizedProps,a.memoizedProps);break;case 5:if(Tn(r,t),bn(t),l&512&&(Vt||a===null||Ur(a,a.return)),t.flags&32){h=t.stateNode;try{_n(h,"")}catch(ge){tt(t,t.return,ge)}}l&4&&t.stateNode!=null&&(h=t.memoizedProps,Vd(t,h,a!==null?a.memoizedProps:h)),l&1024&&(Ld=!0);break;case 6:if(Tn(r,t),bn(t),l&4){if(t.stateNode===null)throw Error(s(162));l=t.memoizedProps,a=t.stateNode;try{a.nodeValue=l}catch(ge){tt(t,t.return,ge)}}break;case 3:if(Kc=null,h=hr,hr=Qc(r.containerInfo),Tn(r,t),hr=h,bn(t),l&4&&a!==null&&a.memoizedState.isDehydrated)try{no(r.containerInfo)}catch(ge){tt(t,t.return,ge)}Ld&&(Ld=!1,Dv(t));break;case 4:l=hr,hr=Qc(t.stateNode.containerInfo),Tn(r,t),bn(t),hr=l;break;case 12:Tn(r,t),bn(t);break;case 31:Tn(r,t),bn(t),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,Oc(t,l)));break;case 13:Tn(r,t),bn(t),t.child.flags&8192&&t.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(Vc=hn()),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,Oc(t,l)));break;case 22:h=t.memoizedState!==null;var N=a!==null&&a.memoizedState!==null,F=li,J=Vt;if(li=F||h,Vt=J||N,Tn(r,t),Vt=J,li=F,bn(t),l&8192)e:for(r=t.stateNode,r._visibility=h?r._visibility&-2:r._visibility|1,h&&(a===null||N||li||Vt||ea(t)),a=null,r=t;;){if(r.tag===5||r.tag===26){if(a===null){N=a=r;try{if(d=N.stateNode,h)v=d.style,typeof v.setProperty=="function"?v.setProperty("display","none","important"):v.display="none";else{b=N.stateNode;var ie=N.memoizedProps.style,G=ie!=null&&ie.hasOwnProperty("display")?ie.display:null;b.style.display=G==null||typeof G=="boolean"?"":(""+G).trim()}}catch(ge){tt(N,N.return,ge)}}}else if(r.tag===6){if(a===null){N=r;try{N.stateNode.nodeValue=h?"":N.memoizedProps}catch(ge){tt(N,N.return,ge)}}}else if(r.tag===18){if(a===null){N=r;try{var K=N.stateNode;h?__(K,!0):__(N.stateNode,!1)}catch(ge){tt(N,N.return,ge)}}}else if((r.tag!==22&&r.tag!==23||r.memoizedState===null||r===t)&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break e;for(;r.sibling===null;){if(r.return===null||r.return===t)break e;a===r&&(a=null),r=r.return}a===r&&(a=null),r.sibling.return=r.return,r=r.sibling}l&4&&(l=t.updateQueue,l!==null&&(a=l.retryQueue,a!==null&&(l.retryQueue=null,Oc(t,a))));break;case 19:Tn(r,t),bn(t),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,Oc(t,l)));break;case 30:break;case 21:break;default:Tn(r,t),bn(t)}}function bn(t){var r=t.flags;if(r&2){try{for(var a,l=t.return;l!==null;){if(Tv(l)){a=l;break}l=l.return}if(a==null)throw Error(s(160));switch(a.tag){case 27:var h=a.stateNode,d=kd(t);Nc(t,d,h);break;case 5:var v=a.stateNode;a.flags&32&&(_n(v,""),a.flags&=-33);var b=kd(t);Nc(t,b,v);break;case 3:case 4:var N=a.stateNode.containerInfo,F=kd(t);Pd(t,F,N);break;default:throw Error(s(161))}}catch(J){tt(t,t.return,J)}t.flags&=-3}r&4096&&(t.flags&=-4097)}function Dv(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var r=t;Dv(r),r.tag===5&&r.flags&1024&&r.stateNode.reset(),t=t.sibling}}function ci(t,r){if(r.subtreeFlags&8772)for(r=r.child;r!==null;)Av(t,r.alternate,r),r=r.sibling}function ea(t){for(t=t.child;t!==null;){var r=t;switch(r.tag){case 0:case 11:case 14:case 15:Yi(4,r,r.return),ea(r);break;case 1:Ur(r,r.return);var a=r.stateNode;typeof a.componentWillUnmount=="function"&&_v(r,r.return,a),ea(r);break;case 27:Ol(r.stateNode);case 26:case 5:Ur(r,r.return),ea(r);break;case 22:r.memoizedState===null&&ea(r);break;case 30:ea(r);break;default:ea(r)}t=t.sibling}}function hi(t,r,a){for(a=a&&(r.subtreeFlags&8772)!==0,r=r.child;r!==null;){var l=r.alternate,h=t,d=r,v=d.flags;switch(d.tag){case 0:case 11:case 15:hi(h,d,a),bl(4,d);break;case 1:if(hi(h,d,a),l=d,h=l.stateNode,typeof h.componentDidMount=="function")try{h.componentDidMount()}catch(F){tt(l,l.return,F)}if(l=d,h=l.updateQueue,h!==null){var b=l.stateNode;try{var N=h.shared.hiddenCallbacks;if(N!==null)for(h.shared.hiddenCallbacks=null,h=0;h<N.length;h++)oy(N[h],b)}catch(F){tt(l,l.return,F)}}a&&v&64&&vv(d),Sl(d,d.return);break;case 27:bv(d);case 26:case 5:hi(h,d,a),a&&l===null&&v&4&&Ev(d),Sl(d,d.return);break;case 12:hi(h,d,a);break;case 31:hi(h,d,a),a&&v&4&&Cv(h,d);break;case 13:hi(h,d,a),a&&v&4&&xv(h,d);break;case 22:d.memoizedState===null&&hi(h,d,a),Sl(d,d.return);break;case 30:break;default:hi(h,d,a)}r=r.sibling}}function Ud(t,r){var a=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),t=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(t=r.memoizedState.cachePool.pool),t!==a&&(t!=null&&t.refCount++,a!=null&&ul(a))}function jd(t,r){t=null,r.alternate!==null&&(t=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==t&&(r.refCount++,t!=null&&ul(t))}function fr(t,r,a,l){if(r.subtreeFlags&10256)for(r=r.child;r!==null;)Nv(t,r,a,l),r=r.sibling}function Nv(t,r,a,l){var h=r.flags;switch(r.tag){case 0:case 11:case 15:fr(t,r,a,l),h&2048&&bl(9,r);break;case 1:fr(t,r,a,l);break;case 3:fr(t,r,a,l),h&2048&&(t=null,r.alternate!==null&&(t=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==t&&(r.refCount++,t!=null&&ul(t)));break;case 12:if(h&2048){fr(t,r,a,l),t=r.stateNode;try{var d=r.memoizedProps,v=d.id,b=d.onPostCommit;typeof b=="function"&&b(v,r.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(N){tt(r,r.return,N)}}else fr(t,r,a,l);break;case 31:fr(t,r,a,l);break;case 13:fr(t,r,a,l);break;case 23:break;case 22:d=r.stateNode,v=r.alternate,r.memoizedState!==null?d._visibility&2?fr(t,r,a,l):Al(t,r):d._visibility&2?fr(t,r,a,l):(d._visibility|=2,Ga(t,r,a,l,(r.subtreeFlags&10256)!==0||!1)),h&2048&&Ud(v,r);break;case 24:fr(t,r,a,l),h&2048&&jd(r.alternate,r);break;default:fr(t,r,a,l)}}function Ga(t,r,a,l,h){for(h=h&&((r.subtreeFlags&10256)!==0||!1),r=r.child;r!==null;){var d=t,v=r,b=a,N=l,F=v.flags;switch(v.tag){case 0:case 11:case 15:Ga(d,v,b,N,h),bl(8,v);break;case 23:break;case 22:var J=v.stateNode;v.memoizedState!==null?J._visibility&2?Ga(d,v,b,N,h):Al(d,v):(J._visibility|=2,Ga(d,v,b,N,h)),h&&F&2048&&Ud(v.alternate,v);break;case 24:Ga(d,v,b,N,h),h&&F&2048&&jd(v.alternate,v);break;default:Ga(d,v,b,N,h)}r=r.sibling}}function Al(t,r){if(r.subtreeFlags&10256)for(r=r.child;r!==null;){var a=t,l=r,h=l.flags;switch(l.tag){case 22:Al(a,l),h&2048&&Ud(l.alternate,l);break;case 24:Al(a,l),h&2048&&jd(l.alternate,l);break;default:Al(a,l)}r=r.sibling}}var wl=8192;function Qa(t,r,a){if(t.subtreeFlags&wl)for(t=t.child;t!==null;)Ov(t,r,a),t=t.sibling}function Ov(t,r,a){switch(t.tag){case 26:Qa(t,r,a),t.flags&wl&&t.memoizedState!==null&&$1(a,hr,t.memoizedState,t.memoizedProps);break;case 5:Qa(t,r,a);break;case 3:case 4:var l=hr;hr=Qc(t.stateNode.containerInfo),Qa(t,r,a),hr=l;break;case 22:t.memoizedState===null&&(l=t.alternate,l!==null&&l.memoizedState!==null?(l=wl,wl=16777216,Qa(t,r,a),wl=l):Qa(t,r,a));break;default:Qa(t,r,a)}}function Mv(t){var r=t.alternate;if(r!==null&&(t=r.child,t!==null)){r.child=null;do r=t.sibling,t.sibling=null,t=r;while(t!==null)}}function Rl(t){var r=t.deletions;if((t.flags&16)!==0){if(r!==null)for(var a=0;a<r.length;a++){var l=r[a];Qt=l,kv(l,t)}Mv(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)Vv(t),t=t.sibling}function Vv(t){switch(t.tag){case 0:case 11:case 15:Rl(t),t.flags&2048&&Yi(9,t,t.return);break;case 3:Rl(t);break;case 12:Rl(t);break;case 22:var r=t.stateNode;t.memoizedState!==null&&r._visibility&2&&(t.return===null||t.return.tag!==13)?(r._visibility&=-3,Mc(t)):Rl(t);break;default:Rl(t)}}function Mc(t){var r=t.deletions;if((t.flags&16)!==0){if(r!==null)for(var a=0;a<r.length;a++){var l=r[a];Qt=l,kv(l,t)}Mv(t)}for(t=t.child;t!==null;){switch(r=t,r.tag){case 0:case 11:case 15:Yi(8,r,r.return),Mc(r);break;case 22:a=r.stateNode,a._visibility&2&&(a._visibility&=-3,Mc(r));break;default:Mc(r)}t=t.sibling}}function kv(t,r){for(;Qt!==null;){var a=Qt;switch(a.tag){case 0:case 11:case 15:Yi(8,a,r);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var l=a.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:ul(a.memoizedState.cache)}if(l=a.child,l!==null)l.return=a,Qt=l;else e:for(a=t;Qt!==null;){l=Qt;var h=l.sibling,d=l.return;if(wv(l),l===a){Qt=null;break e}if(h!==null){h.return=d,Qt=h;break e}Qt=d}}}var c1={getCacheForType:function(t){var r=Zt(Nt),a=r.data.get(t);return a===void 0&&(a=t(),r.data.set(t,a)),a},cacheSignal:function(){return Zt(Nt).controller.signal}},h1=typeof WeakMap=="function"?WeakMap:Map,Je=0,lt=null,Pe=null,Ue=0,et=0,Mn=null,Ki=!1,Ya=!1,zd=!1,fi=0,vt=0,$i=0,ta=0,Bd=0,Vn=0,Ka=0,Cl=null,Sn=null,qd=!1,Vc=0,Pv=0,kc=1/0,Pc=null,Xi=null,qt=0,Wi=null,$a=null,di=0,Hd=0,Fd=null,Lv=null,xl=0,Gd=null;function kn(){return(Je&2)!==0&&Ue!==0?Ue&-Ue:P.T!==null?Wd():Lu()}function Uv(){if(Vn===0)if((Ue&536870912)===0||He){var t=xs;xs<<=1,(xs&3932160)===0&&(xs=262144),Vn=t}else Vn=536870912;return t=Nn.current,t!==null&&(t.flags|=32),Vn}function An(t,r,a){(t===lt&&(et===2||et===9)||t.cancelPendingCommit!==null)&&(Xa(t,0),Ji(t,Ue,Vn,!1)),Is(t,a),((Je&2)===0||t!==lt)&&(t===lt&&((Je&2)===0&&(ta|=a),vt===4&&Ji(t,Ue,Vn,!1)),jr(t))}function jv(t,r,a){if((Je&6)!==0)throw Error(s(327));var l=!a&&(r&127)===0&&(r&t.expiredLanes)===0||nr(t,r),h=l?m1(t,r):Yd(t,r,!0),d=l;do{if(h===0){Ya&&!l&&Ji(t,r,0,!1);break}else{if(a=t.current.alternate,d&&!f1(a)){h=Yd(t,r,!1),d=!1;continue}if(h===2){if(d=r,t.errorRecoveryDisabledLanes&d)var v=0;else v=t.pendingLanes&-536870913,v=v!==0?v:v&536870912?536870912:0;if(v!==0){r=v;e:{var b=t;h=Cl;var N=b.current.memoizedState.isDehydrated;if(N&&(Xa(b,v).flags|=256),v=Yd(b,v,!1),v!==2){if(zd&&!N){b.errorRecoveryDisabledLanes|=d,ta|=d,h=4;break e}d=Sn,Sn=h,d!==null&&(Sn===null?Sn=d:Sn.push.apply(Sn,d))}h=v}if(d=!1,h!==2)continue}}if(h===1){Xa(t,0),Ji(t,r,0,!0);break}e:{switch(l=t,d=h,d){case 0:case 1:throw Error(s(345));case 4:if((r&4194048)!==r)break;case 6:Ji(l,r,Vn,!Ki);break e;case 2:Sn=null;break;case 3:case 5:break;default:throw Error(s(329))}if((r&62914560)===r&&(h=Vc+300-hn(),10<h)){if(Ji(l,r,Vn,!Ki),Tr(l,0,!0)!==0)break e;di=r,l.timeoutHandle=g_(zv.bind(null,l,a,Sn,Pc,qd,r,Vn,ta,Ka,Ki,d,"Throttled",-0,0),h);break e}zv(l,a,Sn,Pc,qd,r,Vn,ta,Ka,Ki,d,null,-0,0)}}break}while(!0);jr(t)}function zv(t,r,a,l,h,d,v,b,N,F,J,ie,G,K){if(t.timeoutHandle=-1,ie=r.subtreeFlags,ie&8192||(ie&16785408)===16785408){ie={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:sr},Ov(r,d,ie);var ge=(d&62914560)===d?Vc-hn():(d&4194048)===d?Pv-hn():0;if(ge=X1(ie,ge),ge!==null){di=d,t.cancelPendingCommit=ge(Kv.bind(null,t,r,d,a,l,h,v,b,N,J,ie,null,G,K)),Ji(t,d,v,!F);return}}Kv(t,r,d,a,l,h,v,b,N)}function f1(t){for(var r=t;;){var a=r.tag;if((a===0||a===11||a===15)&&r.flags&16384&&(a=r.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var l=0;l<a.length;l++){var h=a[l],d=h.getSnapshot;h=h.value;try{if(!In(d(),h))return!1}catch{return!1}}if(a=r.child,r.subtreeFlags&16384&&a!==null)a.return=r,r=a;else{if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function Ji(t,r,a,l){r&=~Bd,r&=~ta,t.suspendedLanes|=r,t.pingedLanes&=~r,l&&(t.warmLanes|=r),l=t.expirationTimes;for(var h=r;0<h;){var d=31-Et(h),v=1<<d;l[d]=-1,h&=~v}a!==0&&Ds(t,a,r)}function Lc(){return(Je&6)===0?(Il(0),!1):!0}function Qd(){if(Pe!==null){if(et===0)var t=Pe.return;else t=Pe,ni=Qs=null,ld(t),za=null,hl=0,t=Pe;for(;t!==null;)yv(t.alternate,t),t=t.return;Pe=null}}function Xa(t,r){var a=t.timeoutHandle;a!==-1&&(t.timeoutHandle=-1,O1(a)),a=t.cancelPendingCommit,a!==null&&(t.cancelPendingCommit=null,a()),di=0,Qd(),lt=t,Pe=a=ei(t.current,null),Ue=r,et=0,Mn=null,Ki=!1,Ya=nr(t,r),zd=!1,Ka=Vn=Bd=ta=$i=vt=0,Sn=Cl=null,qd=!1,(r&8)!==0&&(r|=r&32);var l=t.entangledLanes;if(l!==0)for(t=t.entanglements,l&=r;0<l;){var h=31-Et(l),d=1<<h;r|=t[h],l&=~d}return fi=r,ic(),a}function Bv(t,r){Ve=null,P.H=_l,r===ja||r===fc?(r=ry(),et=3):r===Xf?(r=ry(),et=4):et=r===Ad?8:r!==null&&typeof r=="object"&&typeof r.then=="function"?6:1,Mn=r,Pe===null&&(vt=1,Rc(t,Yn(r,t.current)))}function qv(){var t=Nn.current;return t===null?!0:(Ue&4194048)===Ue?Wn===null:(Ue&62914560)===Ue||(Ue&536870912)!==0?t===Wn:!1}function Hv(){var t=P.H;return P.H=_l,t===null?_l:t}function Fv(){var t=P.A;return P.A=c1,t}function Uc(){vt=4,Ki||(Ue&4194048)!==Ue&&Nn.current!==null||(Ya=!0),($i&134217727)===0&&(ta&134217727)===0||lt===null||Ji(lt,Ue,Vn,!1)}function Yd(t,r,a){var l=Je;Je|=2;var h=Hv(),d=Fv();(lt!==t||Ue!==r)&&(Pc=null,Xa(t,r)),r=!1;var v=vt;e:do try{if(et!==0&&Pe!==null){var b=Pe,N=Mn;switch(et){case 8:Qd(),v=6;break e;case 3:case 2:case 9:case 6:Nn.current===null&&(r=!0);var F=et;if(et=0,Mn=null,Wa(t,b,N,F),a&&Ya){v=0;break e}break;default:F=et,et=0,Mn=null,Wa(t,b,N,F)}}d1(),v=vt;break}catch(J){Bv(t,J)}while(!0);return r&&t.shellSuspendCounter++,ni=Qs=null,Je=l,P.H=h,P.A=d,Pe===null&&(lt=null,Ue=0,ic()),v}function d1(){for(;Pe!==null;)Gv(Pe)}function m1(t,r){var a=Je;Je|=2;var l=Hv(),h=Fv();lt!==t||Ue!==r?(Pc=null,kc=hn()+500,Xa(t,r)):Ya=nr(t,r);e:do try{if(et!==0&&Pe!==null){r=Pe;var d=Mn;t:switch(et){case 1:et=0,Mn=null,Wa(t,r,d,1);break;case 2:case 9:if(ty(d)){et=0,Mn=null,Qv(r);break}r=function(){et!==2&&et!==9||lt!==t||(et=7),jr(t)},d.then(r,r);break e;case 3:et=7;break e;case 4:et=5;break e;case 7:ty(d)?(et=0,Mn=null,Qv(r)):(et=0,Mn=null,Wa(t,r,d,7));break;case 5:var v=null;switch(Pe.tag){case 26:v=Pe.memoizedState;case 5:case 27:var b=Pe;if(v?N_(v):b.stateNode.complete){et=0,Mn=null;var N=b.sibling;if(N!==null)Pe=N;else{var F=b.return;F!==null?(Pe=F,jc(F)):Pe=null}break t}}et=0,Mn=null,Wa(t,r,d,5);break;case 6:et=0,Mn=null,Wa(t,r,d,6);break;case 8:Qd(),vt=6;break e;default:throw Error(s(462))}}p1();break}catch(J){Bv(t,J)}while(!0);return ni=Qs=null,P.H=l,P.A=h,Je=a,Pe!==null?0:(lt=null,Ue=0,ic(),vt)}function p1(){for(;Pe!==null&&!Sf();)Gv(Pe)}function Gv(t){var r=pv(t.alternate,t,fi);t.memoizedProps=t.pendingProps,r===null?jc(t):Pe=r}function Qv(t){var r=t,a=r.alternate;switch(r.tag){case 15:case 0:r=uv(a,r,r.pendingProps,r.type,void 0,Ue);break;case 11:r=uv(a,r,r.pendingProps,r.type.render,r.ref,Ue);break;case 5:ld(r);default:yv(a,r),r=Pe=Fg(r,fi),r=pv(a,r,fi)}t.memoizedProps=t.pendingProps,r===null?jc(t):Pe=r}function Wa(t,r,a,l){ni=Qs=null,ld(r),za=null,hl=0;var h=r.return;try{if(r1(t,h,r,a,Ue)){vt=1,Rc(t,Yn(a,t.current)),Pe=null;return}}catch(d){if(h!==null)throw Pe=h,d;vt=1,Rc(t,Yn(a,t.current)),Pe=null;return}r.flags&32768?(He||l===1?t=!0:Ya||(Ue&536870912)!==0?t=!1:(Ki=t=!0,(l===2||l===9||l===3||l===6)&&(l=Nn.current,l!==null&&l.tag===13&&(l.flags|=16384))),Yv(r,t)):jc(r)}function jc(t){var r=t;do{if((r.flags&32768)!==0){Yv(r,Ki);return}t=r.return;var a=a1(r.alternate,r,fi);if(a!==null){Pe=a;return}if(r=r.sibling,r!==null){Pe=r;return}Pe=r=t}while(r!==null);vt===0&&(vt=5)}function Yv(t,r){do{var a=o1(t.alternate,t);if(a!==null){a.flags&=32767,Pe=a;return}if(a=t.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!r&&(t=t.sibling,t!==null)){Pe=t;return}Pe=t=a}while(t!==null);vt=6,Pe=null}function Kv(t,r,a,l,h,d,v,b,N){t.cancelPendingCommit=null;do zc();while(qt!==0);if((Je&6)!==0)throw Error(s(327));if(r!==null){if(r===t.current)throw Error(s(177));if(d=r.lanes|r.childLanes,d|=kf,Rf(t,a,d,v,b,N),t===lt&&(Pe=lt=null,Ue=0),$a=r,Wi=t,di=a,Hd=d,Fd=h,Lv=l,(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,_1(xi,function(){return Zv(),null})):(t.callbackNode=null,t.callbackPriority=0),l=(r.flags&13878)!==0,(r.subtreeFlags&13878)!==0||l){l=P.T,P.T=null,h=W.p,W.p=2,v=Je,Je|=4;try{l1(t,r,a)}finally{Je=v,W.p=h,P.T=l}}qt=1,$v(),Xv(),Wv()}}function $v(){if(qt===1){qt=0;var t=Wi,r=$a,a=(r.flags&13878)!==0;if((r.subtreeFlags&13878)!==0||a){a=P.T,P.T=null;var l=W.p;W.p=2;var h=Je;Je|=4;try{Iv(r,t);var d=sm,v=kg(t.containerInfo),b=d.focusedElem,N=d.selectionRange;if(v!==b&&b&&b.ownerDocument&&Vg(b.ownerDocument.documentElement,b)){if(N!==null&&Df(b)){var F=N.start,J=N.end;if(J===void 0&&(J=F),"selectionStart"in b)b.selectionStart=F,b.selectionEnd=Math.min(J,b.value.length);else{var ie=b.ownerDocument||document,G=ie&&ie.defaultView||window;if(G.getSelection){var K=G.getSelection(),ge=b.textContent.length,Ae=Math.min(N.start,ge),st=N.end===void 0?Ae:Math.min(N.end,ge);!K.extend&&Ae>st&&(v=st,st=Ae,Ae=v);var z=Mg(b,Ae),L=Mg(b,st);if(z&&L&&(K.rangeCount!==1||K.anchorNode!==z.node||K.anchorOffset!==z.offset||K.focusNode!==L.node||K.focusOffset!==L.offset)){var H=ie.createRange();H.setStart(z.node,z.offset),K.removeAllRanges(),Ae>st?(K.addRange(H),K.extend(L.node,L.offset)):(H.setEnd(L.node,L.offset),K.addRange(H))}}}}for(ie=[],K=b;K=K.parentNode;)K.nodeType===1&&ie.push({element:K,left:K.scrollLeft,top:K.scrollTop});for(typeof b.focus=="function"&&b.focus(),b=0;b<ie.length;b++){var re=ie[b];re.element.scrollLeft=re.left,re.element.scrollTop=re.top}}Jc=!!im,sm=im=null}finally{Je=h,W.p=l,P.T=a}}t.current=r,qt=2}}function Xv(){if(qt===2){qt=0;var t=Wi,r=$a,a=(r.flags&8772)!==0;if((r.subtreeFlags&8772)!==0||a){a=P.T,P.T=null;var l=W.p;W.p=2;var h=Je;Je|=4;try{Av(t,r.alternate,r)}finally{Je=h,W.p=l,P.T=a}}qt=3}}function Wv(){if(qt===4||qt===3){qt=0,Du();var t=Wi,r=$a,a=di,l=Lv;(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?qt=5:(qt=0,$a=Wi=null,Jv(t,t.pendingLanes));var h=t.pendingLanes;if(h===0&&(Xi=null),Xr(a),r=r.stateNode,Xt&&typeof Xt.onCommitFiberRoot=="function")try{Xt.onCommitFiberRoot(tr,r,void 0,(r.current.flags&128)===128)}catch{}if(l!==null){r=P.T,h=W.p,W.p=2,P.T=null;try{for(var d=t.onRecoverableError,v=0;v<l.length;v++){var b=l[v];d(b.value,{componentStack:b.stack})}}finally{P.T=r,W.p=h}}(di&3)!==0&&zc(),jr(t),h=t.pendingLanes,(a&261930)!==0&&(h&42)!==0?t===Gd?xl++:(xl=0,Gd=t):xl=0,Il(0)}}function Jv(t,r){(t.pooledCacheLanes&=r)===0&&(r=t.pooledCache,r!=null&&(t.pooledCache=null,ul(r)))}function zc(){return $v(),Xv(),Wv(),Zv()}function Zv(){if(qt!==5)return!1;var t=Wi,r=Hd;Hd=0;var a=Xr(di),l=P.T,h=W.p;try{W.p=32>a?32:a,P.T=null,a=Fd,Fd=null;var d=Wi,v=di;if(qt=0,$a=Wi=null,di=0,(Je&6)!==0)throw Error(s(331));var b=Je;if(Je|=4,Vv(d.current),Nv(d,d.current,v,a),Je=b,Il(0,!1),Xt&&typeof Xt.onPostCommitFiberRoot=="function")try{Xt.onPostCommitFiberRoot(tr,d)}catch{}return!0}finally{W.p=h,P.T=l,Jv(t,r)}}function e_(t,r,a){r=Yn(a,r),r=Sd(t.stateNode,r,2),t=Fi(t,r,2),t!==null&&(Is(t,2),jr(t))}function tt(t,r,a){if(t.tag===3)e_(t,t,a);else for(;r!==null;){if(r.tag===3){e_(r,t,a);break}else if(r.tag===1){var l=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(Xi===null||!Xi.has(l))){t=Yn(a,t),a=tv(2),l=Fi(r,a,2),l!==null&&(nv(a,l,r,t),Is(l,2),jr(l));break}}r=r.return}}function Kd(t,r,a){var l=t.pingCache;if(l===null){l=t.pingCache=new h1;var h=new Set;l.set(r,h)}else h=l.get(r),h===void 0&&(h=new Set,l.set(r,h));h.has(a)||(zd=!0,h.add(a),t=g1.bind(null,t,r,a),r.then(t,t))}function g1(t,r,a){var l=t.pingCache;l!==null&&l.delete(r),t.pingedLanes|=t.suspendedLanes&a,t.warmLanes&=~a,lt===t&&(Ue&a)===a&&(vt===4||vt===3&&(Ue&62914560)===Ue&&300>hn()-Vc?(Je&2)===0&&Xa(t,0):Bd|=a,Ka===Ue&&(Ka=0)),jr(t)}function t_(t,r){r===0&&(r=Pu()),t=Hs(t,r),t!==null&&(Is(t,r),jr(t))}function y1(t){var r=t.memoizedState,a=0;r!==null&&(a=r.retryLane),t_(t,a)}function v1(t,r){var a=0;switch(t.tag){case 31:case 13:var l=t.stateNode,h=t.memoizedState;h!==null&&(a=h.retryLane);break;case 19:l=t.stateNode;break;case 22:l=t.stateNode._retryCache;break;default:throw Error(s(314))}l!==null&&l.delete(r),t_(t,a)}function _1(t,r){return Bt(t,r)}var Bc=null,Ja=null,$d=!1,qc=!1,Xd=!1,Zi=0;function jr(t){t!==Ja&&t.next===null&&(Ja===null?Bc=Ja=t:Ja=Ja.next=t),qc=!0,$d||($d=!0,T1())}function Il(t,r){if(!Xd&&qc){Xd=!0;do for(var a=!1,l=Bc;l!==null;){if(t!==0){var h=l.pendingLanes;if(h===0)var d=0;else{var v=l.suspendedLanes,b=l.pingedLanes;d=(1<<31-Et(42|t)+1)-1,d&=h&~(v&~b),d=d&201326741?d&201326741|1:d?d|2:0}d!==0&&(a=!0,s_(l,d))}else d=Ue,d=Tr(l,l===lt?d:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(d&3)===0||nr(l,d)||(a=!0,s_(l,d));l=l.next}while(a);Xd=!1}}function E1(){n_()}function n_(){qc=$d=!1;var t=0;Zi!==0&&N1()&&(t=Zi);for(var r=hn(),a=null,l=Bc;l!==null;){var h=l.next,d=r_(l,r);d===0?(l.next=null,a===null?Bc=h:a.next=h,h===null&&(Ja=a)):(a=l,(t!==0||(d&3)!==0)&&(qc=!0)),l=h}qt!==0&&qt!==5||Il(t),Zi!==0&&(Zi=0)}function r_(t,r){for(var a=t.suspendedLanes,l=t.pingedLanes,h=t.expirationTimes,d=t.pendingLanes&-62914561;0<d;){var v=31-Et(d),b=1<<v,N=h[v];N===-1?((b&a)===0||(b&l)!==0)&&(h[v]=wf(b,r)):N<=r&&(t.expiredLanes|=b),d&=~b}if(r=lt,a=Ue,a=Tr(t,t===r?a:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l=t.callbackNode,a===0||t===r&&(et===2||et===9)||t.cancelPendingCommit!==null)return l!==null&&l!==null&&Ci(l),t.callbackNode=null,t.callbackPriority=0;if((a&3)===0||nr(t,a)){if(r=a&-a,r===t.callbackPriority)return r;switch(l!==null&&Ci(l),Xr(a)){case 2:case 8:a=jo;break;case 32:a=xi;break;case 268435456:a=Nu;break;default:a=xi}return l=i_.bind(null,t),a=Bt(a,l),t.callbackPriority=r,t.callbackNode=a,r}return l!==null&&l!==null&&Ci(l),t.callbackPriority=2,t.callbackNode=null,2}function i_(t,r){if(qt!==0&&qt!==5)return t.callbackNode=null,t.callbackPriority=0,null;var a=t.callbackNode;if(zc()&&t.callbackNode!==a)return null;var l=Ue;return l=Tr(t,t===lt?l:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l===0?null:(jv(t,l,r),r_(t,hn()),t.callbackNode!=null&&t.callbackNode===a?i_.bind(null,t):null)}function s_(t,r){if(zc())return null;jv(t,r,!0)}function T1(){M1(function(){(Je&6)!==0?Bt(Uo,E1):n_()})}function Wd(){if(Zi===0){var t=La;t===0&&(t=_r,_r<<=1,(_r&261888)===0&&(_r=256)),Zi=t}return Zi}function a_(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:ba(""+t)}function o_(t,r){var a=r.ownerDocument.createElement("input");return a.name=r.name,a.value=r.value,t.id&&a.setAttribute("form",t.id),r.parentNode.insertBefore(a,r),t=new FormData(t),a.parentNode.removeChild(a),t}function b1(t,r,a,l,h){if(r==="submit"&&a&&a.stateNode===h){var d=a_((h[Ft]||null).action),v=l.submitter;v&&(r=(r=v[Ft]||null)?a_(r.formAction):v.getAttribute("formAction"),r!==null&&(d=r,v=null));var b=new Or("action","action",null,l,h);t.push({event:b,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(Zi!==0){var N=v?o_(h,v):new FormData(h);yd(a,{pending:!0,data:N,method:h.method,action:d},null,N)}}else typeof d=="function"&&(b.preventDefault(),N=v?o_(h,v):new FormData(h),yd(a,{pending:!0,data:N,method:h.method,action:d},d,N))},currentTarget:h}]})}}for(var Jd=0;Jd<Vf.length;Jd++){var Zd=Vf[Jd],S1=Zd.toLowerCase(),A1=Zd[0].toUpperCase()+Zd.slice(1);cr(S1,"on"+A1)}cr(Ug,"onAnimationEnd"),cr(jg,"onAnimationIteration"),cr(zg,"onAnimationStart"),cr("dblclick","onDoubleClick"),cr("focusin","onFocus"),cr("focusout","onBlur"),cr(zS,"onTransitionRun"),cr(BS,"onTransitionStart"),cr(qS,"onTransitionCancel"),cr(Bg,"onTransitionEnd"),xr("onMouseEnter",["mouseout","mouseover"]),xr("onMouseLeave",["mouseout","mouseover"]),xr("onPointerEnter",["pointerout","pointerover"]),xr("onPointerLeave",["pointerout","pointerover"]),Cr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Cr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Cr("onBeforeInput",["compositionend","keypress","textInput","paste"]),Cr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Cr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Cr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Dl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),w1=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Dl));function l_(t,r){r=(r&4)!==0;for(var a=0;a<t.length;a++){var l=t[a],h=l.event;l=l.listeners;e:{var d=void 0;if(r)for(var v=l.length-1;0<=v;v--){var b=l[v],N=b.instance,F=b.currentTarget;if(b=b.listener,N!==d&&h.isPropagationStopped())break e;d=b,h.currentTarget=F;try{d(h)}catch(J){rc(J)}h.currentTarget=null,d=N}else for(v=0;v<l.length;v++){if(b=l[v],N=b.instance,F=b.currentTarget,b=b.listener,N!==d&&h.isPropagationStopped())break e;d=b,h.currentTarget=F;try{d(h)}catch(J){rc(J)}h.currentTarget=null,d=N}}}}function Le(t,r){var a=r[ya];a===void 0&&(a=r[ya]=new Set);var l=t+"__bubble";a.has(l)||(u_(r,t,2,!1),a.add(l))}function em(t,r,a){var l=0;r&&(l|=4),u_(a,t,l,r)}var Hc="_reactListening"+Math.random().toString(36).slice(2);function tm(t){if(!t[Hc]){t[Hc]=!0,qo.forEach(function(a){a!=="selectionchange"&&(w1.has(a)||em(a,!1,t),em(a,!0,t))});var r=t.nodeType===9?t:t.ownerDocument;r===null||r[Hc]||(r[Hc]=!0,em("selectionchange",!1,r))}}function u_(t,r,a,l){switch(U_(r)){case 2:var h=Z1;break;case 8:h=eA;break;default:h=gm}a=h.bind(null,r,a,t),h=void 0,!ks||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(h=!0),l?h!==void 0?t.addEventListener(r,a,{capture:!0,passive:h}):t.addEventListener(r,a,!0):h!==void 0?t.addEventListener(r,a,{passive:h}):t.addEventListener(r,a,!1)}function nm(t,r,a,l,h){var d=l;if((r&1)===0&&(r&2)===0&&l!==null)e:for(;;){if(l===null)return;var v=l.tag;if(v===3||v===4){var b=l.stateNode.containerInfo;if(b===h)break;if(v===4)for(v=l.return;v!==null;){var N=v.tag;if((N===3||N===4)&&v.stateNode.containerInfo===h)return;v=v.return}for(;b!==null;){if(v=wr(b),v===null)return;if(N=v.tag,N===5||N===6||N===26||N===27){l=d=v;continue e}b=b.parentNode}}l=l.return}Vi(function(){var F=d,J=Hn(a),ie=[];e:{var G=qg.get(t);if(G!==void 0){var K=Or,ge=t;switch(t){case"keypress":if(Ls(a)===0)break e;case"keydown":case"keyup":K=ec;break;case"focusin":ge="focus",K=js;break;case"focusout":ge="blur",K=js;break;case"beforeblur":case"afterblur":K=js;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":K=tl;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":K=Gu;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":K=y;break;case Ug:case jg:case zg:K=Yu;break;case Bg:K=A;break;case"scroll":case"scrollend":K=el;break;case"wheel":K=Y;break;case"copy":case"cut":case"paste":K=Ku;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":K=Zr;break;case"toggle":case"beforetoggle":K=Me}var Ae=(r&4)!==0,st=!Ae&&(t==="scroll"||t==="scrollend"),z=Ae?G!==null?G+"Capture":null:G;Ae=[];for(var L=F,H;L!==null;){var re=L;if(H=re.stateNode,re=re.tag,re!==5&&re!==26&&re!==27||H===null||z===null||(re=ar(L,z),re!=null&&Ae.push(Nl(L,re,H))),st)break;L=L.return}0<Ae.length&&(G=new K(G,ge,null,a,J),ie.push({event:G,listeners:Ae}))}}if((r&7)===0){e:{if(G=t==="mouseover"||t==="pointerover",K=t==="mouseout"||t==="pointerout",G&&a!==Wo&&(ge=a.relatedTarget||a.fromElement)&&(wr(ge)||ge[Sr]))break e;if((K||G)&&(G=J.window===J?J:(G=J.ownerDocument)?G.defaultView||G.parentWindow:window,K?(ge=a.relatedTarget||a.toElement,K=F,ge=ge?wr(ge):null,ge!==null&&(st=u(ge),Ae=ge.tag,ge!==st||Ae!==5&&Ae!==27&&Ae!==6)&&(ge=null)):(K=null,ge=F),K!==ge)){if(Ae=tl,re="onMouseLeave",z="onMouseEnter",L="mouse",(t==="pointerout"||t==="pointerover")&&(Ae=Zr,re="onPointerLeave",z="onPointerEnter",L="pointer"),st=K==null?G:Cn(K),H=ge==null?G:Cn(ge),G=new Ae(re,L+"leave",K,a,J),G.target=st,G.relatedTarget=H,re=null,wr(J)===F&&(Ae=new Ae(z,L+"enter",ge,a,J),Ae.target=H,Ae.relatedTarget=st,re=Ae),st=re,K&&ge)t:{for(Ae=R1,z=K,L=ge,H=0,re=z;re;re=Ae(re))H++;re=0;for(var be=L;be;be=Ae(be))re++;for(;0<H-re;)z=Ae(z),H--;for(;0<re-H;)L=Ae(L),re--;for(;H--;){if(z===L||L!==null&&z===L.alternate){Ae=z;break t}z=Ae(z),L=Ae(L)}Ae=null}else Ae=null;K!==null&&c_(ie,G,K,Ae,!1),ge!==null&&st!==null&&c_(ie,st,ge,Ae,!0)}}e:{if(G=F?Cn(F):window,K=G.nodeName&&G.nodeName.toLowerCase(),K==="select"||K==="input"&&G.type==="file")var Ye=Cg;else if(wg(G))if(xg)Ye=LS;else{Ye=kS;var ve=VS}else K=G.nodeName,!K||K.toLowerCase()!=="input"||G.type!=="checkbox"&&G.type!=="radio"?F&&Ta(F.elementType)&&(Ye=Cg):Ye=PS;if(Ye&&(Ye=Ye(t,F))){Rg(ie,Ye,a,J);break e}ve&&ve(t,G,F),t==="focusout"&&F&&G.type==="number"&&F.memoizedProps.value!=null&&Ko(G,"number",G.value)}switch(ve=F?Cn(F):window,t){case"focusin":(wg(ve)||ve.contentEditable==="true")&&(Ia=ve,Nf=F,al=null);break;case"focusout":al=Nf=Ia=null;break;case"mousedown":Of=!0;break;case"contextmenu":case"mouseup":case"dragend":Of=!1,Pg(ie,a,J);break;case"selectionchange":if(jS)break;case"keydown":case"keyup":Pg(ie,a,J)}var ke;if(We)e:{switch(t){case"compositionstart":var je="onCompositionStart";break e;case"compositionend":je="onCompositionEnd";break e;case"compositionupdate":je="onCompositionUpdate";break e}je=void 0}else xa?zs(t,a)&&(je="onCompositionEnd"):t==="keydown"&&a.keyCode===229&&(je="onCompositionStart");je&&(kr&&a.locale!=="ko"&&(xa||je!=="onCompositionStart"?je==="onCompositionEnd"&&xa&&(ke=Zo()):(Nr=J,Jo="value"in Nr?Nr.value:Nr.textContent,xa=!0)),ve=Fc(F,je),0<ve.length&&(je=new Vr(je,t,null,a,J),ie.push({event:je,listeners:ve}),ke?je.data=ke:(ke=Ca(a),ke!==null&&(je.data=ke)))),(ke=Gn?DS(t,a):NS(t,a))&&(je=Fc(F,"onBeforeInput"),0<je.length&&(ve=new Vr("onBeforeInput","beforeinput",null,a,J),ie.push({event:ve,listeners:je}),ve.data=ke)),b1(ie,t,F,a,J)}l_(ie,r)})}function Nl(t,r,a){return{instance:t,listener:r,currentTarget:a}}function Fc(t,r){for(var a=r+"Capture",l=[];t!==null;){var h=t,d=h.stateNode;if(h=h.tag,h!==5&&h!==26&&h!==27||d===null||(h=ar(t,a),h!=null&&l.unshift(Nl(t,h,d)),h=ar(t,r),h!=null&&l.push(Nl(t,h,d))),t.tag===3)return l;t=t.return}return[]}function R1(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function c_(t,r,a,l,h){for(var d=r._reactName,v=[];a!==null&&a!==l;){var b=a,N=b.alternate,F=b.stateNode;if(b=b.tag,N!==null&&N===l)break;b!==5&&b!==26&&b!==27||F===null||(N=F,h?(F=ar(a,d),F!=null&&v.unshift(Nl(a,F,N))):h||(F=ar(a,d),F!=null&&v.push(Nl(a,F,N)))),a=a.return}v.length!==0&&t.push({event:r,listeners:v})}var C1=/\r\n?/g,x1=/\u0000|\uFFFD/g;function h_(t){return(typeof t=="string"?t:""+t).replace(C1,`
`).replace(x1,"")}function f_(t,r){return r=h_(r),h_(t)===r}function it(t,r,a,l,h,d){switch(a){case"children":typeof l=="string"?r==="body"||r==="textarea"&&l===""||_n(t,l):(typeof l=="number"||typeof l=="bigint")&&r!=="body"&&_n(t,""+l);break;case"className":xn(t,"class",l);break;case"tabIndex":xn(t,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":xn(t,a,l);break;case"style":Xo(t,l,d);break;case"data":if(r!=="object"){xn(t,"data",l);break}case"src":case"href":if(l===""&&(r!=="a"||a!=="href")){t.removeAttribute(a);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(a);break}l=ba(""+l),t.setAttribute(a,l);break;case"action":case"formAction":if(typeof l=="function"){t.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof d=="function"&&(a==="formAction"?(r!=="input"&&it(t,r,"name",h.name,h,null),it(t,r,"formEncType",h.formEncType,h,null),it(t,r,"formMethod",h.formMethod,h,null),it(t,r,"formTarget",h.formTarget,h,null)):(it(t,r,"encType",h.encType,h,null),it(t,r,"method",h.method,h,null),it(t,r,"target",h.target,h,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(a);break}l=ba(""+l),t.setAttribute(a,l);break;case"onClick":l!=null&&(t.onclick=sr);break;case"onScroll":l!=null&&Le("scroll",t);break;case"onScrollEnd":l!=null&&Le("scrollend",t);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(s(61));if(a=l.__html,a!=null){if(h.children!=null)throw Error(s(60));t.innerHTML=a}}break;case"multiple":t.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":t.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){t.removeAttribute("xlink:href");break}a=ba(""+l),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,""+l):t.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,""):t.removeAttribute(a);break;case"capture":case"download":l===!0?t.setAttribute(a,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,l):t.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?t.setAttribute(a,l):t.removeAttribute(a);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?t.removeAttribute(a):t.setAttribute(a,l);break;case"popover":Le("beforetoggle",t),Le("toggle",t),_a(t,"popover",l);break;case"xlinkActuate":Dt(t,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":Dt(t,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":Dt(t,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":Dt(t,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":Dt(t,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":Dt(t,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":Dt(t,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":Dt(t,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":Dt(t,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":_a(t,"is",l);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=Fu.get(a)||a,_a(t,a,l))}}function rm(t,r,a,l,h,d){switch(a){case"style":Xo(t,l,d);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(s(61));if(a=l.__html,a!=null){if(h.children!=null)throw Error(s(60));t.innerHTML=a}}break;case"children":typeof l=="string"?_n(t,l):(typeof l=="number"||typeof l=="bigint")&&_n(t,""+l);break;case"onScroll":l!=null&&Le("scroll",t);break;case"onScrollEnd":l!=null&&Le("scrollend",t);break;case"onClick":l!=null&&(t.onclick=sr);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Ho.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(h=a.endsWith("Capture"),r=a.slice(2,h?a.length-7:void 0),d=t[Ft]||null,d=d!=null?d[a]:null,typeof d=="function"&&t.removeEventListener(r,d,h),typeof l=="function")){typeof d!="function"&&d!==null&&(a in t?t[a]=null:t.hasAttribute(a)&&t.removeAttribute(a)),t.addEventListener(r,l,h);break e}a in t?t[a]=l:l===!0?t.setAttribute(a,""):_a(t,a,l)}}}function tn(t,r,a){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Le("error",t),Le("load",t);var l=!1,h=!1,d;for(d in a)if(a.hasOwnProperty(d)){var v=a[d];if(v!=null)switch(d){case"src":l=!0;break;case"srcSet":h=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,r));default:it(t,r,d,v,a,null)}}h&&it(t,r,"srcSet",a.srcSet,a,null),l&&it(t,r,"src",a.src,a,null);return;case"input":Le("invalid",t);var b=d=v=h=null,N=null,F=null;for(l in a)if(a.hasOwnProperty(l)){var J=a[l];if(J!=null)switch(l){case"name":h=J;break;case"type":v=J;break;case"checked":N=J;break;case"defaultChecked":F=J;break;case"value":d=J;break;case"defaultValue":b=J;break;case"children":case"dangerouslySetInnerHTML":if(J!=null)throw Error(s(137,r));break;default:it(t,r,l,J,a,null)}}Bu(t,d,b,N,F,v,h,!1);return;case"select":Le("invalid",t),l=v=d=null;for(h in a)if(a.hasOwnProperty(h)&&(b=a[h],b!=null))switch(h){case"value":d=b;break;case"defaultValue":v=b;break;case"multiple":l=b;default:it(t,r,h,b,a,null)}r=d,a=v,t.multiple=!!l,r!=null?Di(t,!!l,r,!1):a!=null&&Di(t,!!l,a,!0);return;case"textarea":Le("invalid",t),d=h=l=null;for(v in a)if(a.hasOwnProperty(v)&&(b=a[v],b!=null))switch(v){case"value":l=b;break;case"defaultValue":h=b;break;case"children":d=b;break;case"dangerouslySetInnerHTML":if(b!=null)throw Error(s(91));break;default:it(t,r,v,b,a,null)}Ni(t,l,h,d);return;case"option":for(N in a)a.hasOwnProperty(N)&&(l=a[N],l!=null)&&(N==="selected"?t.selected=l&&typeof l!="function"&&typeof l!="symbol":it(t,r,N,l,a,null));return;case"dialog":Le("beforetoggle",t),Le("toggle",t),Le("cancel",t),Le("close",t);break;case"iframe":case"object":Le("load",t);break;case"video":case"audio":for(l=0;l<Dl.length;l++)Le(Dl[l],t);break;case"image":Le("error",t),Le("load",t);break;case"details":Le("toggle",t);break;case"embed":case"source":case"link":Le("error",t),Le("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(F in a)if(a.hasOwnProperty(F)&&(l=a[F],l!=null))switch(F){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,r));default:it(t,r,F,l,a,null)}return;default:if(Ta(r)){for(J in a)a.hasOwnProperty(J)&&(l=a[J],l!==void 0&&rm(t,r,J,l,a,void 0));return}}for(b in a)a.hasOwnProperty(b)&&(l=a[b],l!=null&&it(t,r,b,l,a,null))}function I1(t,r,a,l){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var h=null,d=null,v=null,b=null,N=null,F=null,J=null;for(K in a){var ie=a[K];if(a.hasOwnProperty(K)&&ie!=null)switch(K){case"checked":break;case"value":break;case"defaultValue":N=ie;default:l.hasOwnProperty(K)||it(t,r,K,null,l,ie)}}for(var G in l){var K=l[G];if(ie=a[G],l.hasOwnProperty(G)&&(K!=null||ie!=null))switch(G){case"type":d=K;break;case"name":h=K;break;case"checked":F=K;break;case"defaultChecked":J=K;break;case"value":v=K;break;case"defaultValue":b=K;break;case"children":case"dangerouslySetInnerHTML":if(K!=null)throw Error(s(137,r));break;default:K!==ie&&it(t,r,G,K,l,ie)}}Ea(t,v,b,N,F,J,d,h);return;case"select":K=v=b=G=null;for(d in a)if(N=a[d],a.hasOwnProperty(d)&&N!=null)switch(d){case"value":break;case"multiple":K=N;default:l.hasOwnProperty(d)||it(t,r,d,null,l,N)}for(h in l)if(d=l[h],N=a[h],l.hasOwnProperty(h)&&(d!=null||N!=null))switch(h){case"value":G=d;break;case"defaultValue":b=d;break;case"multiple":v=d;default:d!==N&&it(t,r,h,d,l,N)}r=b,a=v,l=K,G!=null?Di(t,!!a,G,!1):!!l!=!!a&&(r!=null?Di(t,!!a,r,!0):Di(t,!!a,a?[]:"",!1));return;case"textarea":K=G=null;for(b in a)if(h=a[b],a.hasOwnProperty(b)&&h!=null&&!l.hasOwnProperty(b))switch(b){case"value":break;case"children":break;default:it(t,r,b,null,l,h)}for(v in l)if(h=l[v],d=a[v],l.hasOwnProperty(v)&&(h!=null||d!=null))switch(v){case"value":G=h;break;case"defaultValue":K=h;break;case"children":break;case"dangerouslySetInnerHTML":if(h!=null)throw Error(s(91));break;default:h!==d&&it(t,r,v,h,l,d)}qu(t,G,K);return;case"option":for(var ge in a)G=a[ge],a.hasOwnProperty(ge)&&G!=null&&!l.hasOwnProperty(ge)&&(ge==="selected"?t.selected=!1:it(t,r,ge,null,l,G));for(N in l)G=l[N],K=a[N],l.hasOwnProperty(N)&&G!==K&&(G!=null||K!=null)&&(N==="selected"?t.selected=G&&typeof G!="function"&&typeof G!="symbol":it(t,r,N,G,l,K));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ae in a)G=a[Ae],a.hasOwnProperty(Ae)&&G!=null&&!l.hasOwnProperty(Ae)&&it(t,r,Ae,null,l,G);for(F in l)if(G=l[F],K=a[F],l.hasOwnProperty(F)&&G!==K&&(G!=null||K!=null))switch(F){case"children":case"dangerouslySetInnerHTML":if(G!=null)throw Error(s(137,r));break;default:it(t,r,F,G,l,K)}return;default:if(Ta(r)){for(var st in a)G=a[st],a.hasOwnProperty(st)&&G!==void 0&&!l.hasOwnProperty(st)&&rm(t,r,st,void 0,l,G);for(J in l)G=l[J],K=a[J],!l.hasOwnProperty(J)||G===K||G===void 0&&K===void 0||rm(t,r,J,G,l,K);return}}for(var z in a)G=a[z],a.hasOwnProperty(z)&&G!=null&&!l.hasOwnProperty(z)&&it(t,r,z,null,l,G);for(ie in l)G=l[ie],K=a[ie],!l.hasOwnProperty(ie)||G===K||G==null&&K==null||it(t,r,ie,G,l,K)}function d_(t){switch(t){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function D1(){if(typeof performance.getEntriesByType=="function"){for(var t=0,r=0,a=performance.getEntriesByType("resource"),l=0;l<a.length;l++){var h=a[l],d=h.transferSize,v=h.initiatorType,b=h.duration;if(d&&b&&d_(v)){for(v=0,b=h.responseEnd,l+=1;l<a.length;l++){var N=a[l],F=N.startTime;if(F>b)break;var J=N.transferSize,ie=N.initiatorType;J&&d_(ie)&&(N=N.responseEnd,v+=J*(N<b?1:(b-F)/(N-F)))}if(--l,r+=8*(d+v)/(h.duration/1e3),t++,10<t)break}}if(0<t)return r/t/1e6}return navigator.connection&&(t=navigator.connection.downlink,typeof t=="number")?t:5}var im=null,sm=null;function Gc(t){return t.nodeType===9?t:t.ownerDocument}function m_(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function p_(t,r){if(t===0)switch(r){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&r==="foreignObject"?0:t}function am(t,r){return t==="textarea"||t==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.children=="bigint"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var om=null;function N1(){var t=window.event;return t&&t.type==="popstate"?t===om?!1:(om=t,!0):(om=null,!1)}var g_=typeof setTimeout=="function"?setTimeout:void 0,O1=typeof clearTimeout=="function"?clearTimeout:void 0,y_=typeof Promise=="function"?Promise:void 0,M1=typeof queueMicrotask=="function"?queueMicrotask:typeof y_<"u"?function(t){return y_.resolve(null).then(t).catch(V1)}:g_;function V1(t){setTimeout(function(){throw t})}function es(t){return t==="head"}function v_(t,r){var a=r,l=0;do{var h=a.nextSibling;if(t.removeChild(a),h&&h.nodeType===8)if(a=h.data,a==="/$"||a==="/&"){if(l===0){t.removeChild(h),no(r);return}l--}else if(a==="$"||a==="$?"||a==="$~"||a==="$!"||a==="&")l++;else if(a==="html")Ol(t.ownerDocument.documentElement);else if(a==="head"){a=t.ownerDocument.head,Ol(a);for(var d=a.firstChild;d;){var v=d.nextSibling,b=d.nodeName;d[Ar]||b==="SCRIPT"||b==="STYLE"||b==="LINK"&&d.rel.toLowerCase()==="stylesheet"||a.removeChild(d),d=v}}else a==="body"&&Ol(t.ownerDocument.body);a=h}while(a);no(r)}function __(t,r){var a=t;t=0;do{var l=a.nextSibling;if(a.nodeType===1?r?(a._stashedDisplay=a.style.display,a.style.display="none"):(a.style.display=a._stashedDisplay||"",a.getAttribute("style")===""&&a.removeAttribute("style")):a.nodeType===3&&(r?(a._stashedText=a.nodeValue,a.nodeValue=""):a.nodeValue=a._stashedText||""),l&&l.nodeType===8)if(a=l.data,a==="/$"){if(t===0)break;t--}else a!=="$"&&a!=="$?"&&a!=="$~"&&a!=="$!"||t++;a=l}while(a)}function lm(t){var r=t.firstChild;for(r&&r.nodeType===10&&(r=r.nextSibling);r;){var a=r;switch(r=r.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":lm(a),va(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}t.removeChild(a)}}function k1(t,r,a,l){for(;t.nodeType===1;){var h=a;if(t.nodeName.toLowerCase()!==r.toLowerCase()){if(!l&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(l){if(!t[Ar])switch(r){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(d=t.getAttribute("rel"),d==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(d!==h.rel||t.getAttribute("href")!==(h.href==null||h.href===""?null:h.href)||t.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin)||t.getAttribute("title")!==(h.title==null?null:h.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(d=t.getAttribute("src"),(d!==(h.src==null?null:h.src)||t.getAttribute("type")!==(h.type==null?null:h.type)||t.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin))&&d&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(r==="input"&&t.type==="hidden"){var d=h.name==null?null:""+h.name;if(h.type==="hidden"&&t.getAttribute("name")===d)return t}else return t;if(t=Jn(t.nextSibling),t===null)break}return null}function P1(t,r,a){if(r==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!a||(t=Jn(t.nextSibling),t===null))return null;return t}function E_(t,r){for(;t.nodeType!==8;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!r||(t=Jn(t.nextSibling),t===null))return null;return t}function um(t){return t.data==="$?"||t.data==="$~"}function cm(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState!=="loading"}function L1(t,r){var a=t.ownerDocument;if(t.data==="$~")t._reactRetry=r;else if(t.data!=="$?"||a.readyState!=="loading")r();else{var l=function(){r(),a.removeEventListener("DOMContentLoaded",l)};a.addEventListener("DOMContentLoaded",l),t._reactRetry=l}}function Jn(t){for(;t!=null;t=t.nextSibling){var r=t.nodeType;if(r===1||r===3)break;if(r===8){if(r=t.data,r==="$"||r==="$!"||r==="$?"||r==="$~"||r==="&"||r==="F!"||r==="F")break;if(r==="/$"||r==="/&")return null}}return t}var hm=null;function T_(t){t=t.nextSibling;for(var r=0;t;){if(t.nodeType===8){var a=t.data;if(a==="/$"||a==="/&"){if(r===0)return Jn(t.nextSibling);r--}else a!=="$"&&a!=="$!"&&a!=="$?"&&a!=="$~"&&a!=="&"||r++}t=t.nextSibling}return null}function b_(t){t=t.previousSibling;for(var r=0;t;){if(t.nodeType===8){var a=t.data;if(a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"){if(r===0)return t;r--}else a!=="/$"&&a!=="/&"||r++}t=t.previousSibling}return null}function S_(t,r,a){switch(r=Gc(a),t){case"html":if(t=r.documentElement,!t)throw Error(s(452));return t;case"head":if(t=r.head,!t)throw Error(s(453));return t;case"body":if(t=r.body,!t)throw Error(s(454));return t;default:throw Error(s(451))}}function Ol(t){for(var r=t.attributes;r.length;)t.removeAttributeNode(r[0]);va(t)}var Zn=new Map,A_=new Set;function Qc(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var mi=W.d;W.d={f:U1,r:j1,D:z1,C:B1,L:q1,m:H1,X:G1,S:F1,M:Q1};function U1(){var t=mi.f(),r=Lc();return t||r}function j1(t){var r=qn(t);r!==null&&r.tag===5&&r.type==="form"?By(r):mi.r(t)}var Za=typeof document>"u"?null:document;function w_(t,r,a){var l=Za;if(l&&typeof r=="string"&&r){var h=vn(r);h='link[rel="'+t+'"][href="'+h+'"]',typeof a=="string"&&(h+='[crossorigin="'+a+'"]'),A_.has(h)||(A_.add(h),t={rel:t,crossOrigin:a,href:r},l.querySelector(h)===null&&(r=l.createElement("link"),tn(r,"link",t),It(r),l.head.appendChild(r)))}}function z1(t){mi.D(t),w_("dns-prefetch",t,null)}function B1(t,r){mi.C(t,r),w_("preconnect",t,r)}function q1(t,r,a){mi.L(t,r,a);var l=Za;if(l&&t&&r){var h='link[rel="preload"][as="'+vn(r)+'"]';r==="image"&&a&&a.imageSrcSet?(h+='[imagesrcset="'+vn(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(h+='[imagesizes="'+vn(a.imageSizes)+'"]')):h+='[href="'+vn(t)+'"]';var d=h;switch(r){case"style":d=eo(t);break;case"script":d=to(t)}Zn.has(d)||(t=T({rel:"preload",href:r==="image"&&a&&a.imageSrcSet?void 0:t,as:r},a),Zn.set(d,t),l.querySelector(h)!==null||r==="style"&&l.querySelector(Ml(d))||r==="script"&&l.querySelector(Vl(d))||(r=l.createElement("link"),tn(r,"link",t),It(r),l.head.appendChild(r)))}}function H1(t,r){mi.m(t,r);var a=Za;if(a&&t){var l=r&&typeof r.as=="string"?r.as:"script",h='link[rel="modulepreload"][as="'+vn(l)+'"][href="'+vn(t)+'"]',d=h;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":d=to(t)}if(!Zn.has(d)&&(t=T({rel:"modulepreload",href:t},r),Zn.set(d,t),a.querySelector(h)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(Vl(d)))return}l=a.createElement("link"),tn(l,"link",t),It(l),a.head.appendChild(l)}}}function F1(t,r,a){mi.S(t,r,a);var l=Za;if(l&&t){var h=Rr(l).hoistableStyles,d=eo(t);r=r||"default";var v=h.get(d);if(!v){var b={loading:0,preload:null};if(v=l.querySelector(Ml(d)))b.loading=5;else{t=T({rel:"stylesheet",href:t,"data-precedence":r},a),(a=Zn.get(d))&&fm(t,a);var N=v=l.createElement("link");It(N),tn(N,"link",t),N._p=new Promise(function(F,J){N.onload=F,N.onerror=J}),N.addEventListener("load",function(){b.loading|=1}),N.addEventListener("error",function(){b.loading|=2}),b.loading|=4,Yc(v,r,l)}v={type:"stylesheet",instance:v,count:1,state:b},h.set(d,v)}}}function G1(t,r){mi.X(t,r);var a=Za;if(a&&t){var l=Rr(a).hoistableScripts,h=to(t),d=l.get(h);d||(d=a.querySelector(Vl(h)),d||(t=T({src:t,async:!0},r),(r=Zn.get(h))&&dm(t,r),d=a.createElement("script"),It(d),tn(d,"link",t),a.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},l.set(h,d))}}function Q1(t,r){mi.M(t,r);var a=Za;if(a&&t){var l=Rr(a).hoistableScripts,h=to(t),d=l.get(h);d||(d=a.querySelector(Vl(h)),d||(t=T({src:t,async:!0,type:"module"},r),(r=Zn.get(h))&&dm(t,r),d=a.createElement("script"),It(d),tn(d,"link",t),a.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},l.set(h,d))}}function R_(t,r,a,l){var h=(h=_e.current)?Qc(h):null;if(!h)throw Error(s(446));switch(t){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(r=eo(a.href),a=Rr(h).hoistableStyles,l=a.get(r),l||(l={type:"style",instance:null,count:0,state:null},a.set(r,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){t=eo(a.href);var d=Rr(h).hoistableStyles,v=d.get(t);if(v||(h=h.ownerDocument||h,v={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},d.set(t,v),(d=h.querySelector(Ml(t)))&&!d._p&&(v.instance=d,v.state.loading=5),Zn.has(t)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},Zn.set(t,a),d||Y1(h,t,a,v.state))),r&&l===null)throw Error(s(528,""));return v}if(r&&l!==null)throw Error(s(529,""));return null;case"script":return r=a.async,a=a.src,typeof a=="string"&&r&&typeof r!="function"&&typeof r!="symbol"?(r=to(a),a=Rr(h).hoistableScripts,l=a.get(r),l||(l={type:"script",instance:null,count:0,state:null},a.set(r,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,t))}}function eo(t){return'href="'+vn(t)+'"'}function Ml(t){return'link[rel="stylesheet"]['+t+"]"}function C_(t){return T({},t,{"data-precedence":t.precedence,precedence:null})}function Y1(t,r,a,l){t.querySelector('link[rel="preload"][as="style"]['+r+"]")?l.loading=1:(r=t.createElement("link"),l.preload=r,r.addEventListener("load",function(){return l.loading|=1}),r.addEventListener("error",function(){return l.loading|=2}),tn(r,"link",a),It(r),t.head.appendChild(r))}function to(t){return'[src="'+vn(t)+'"]'}function Vl(t){return"script[async]"+t}function x_(t,r,a){if(r.count++,r.instance===null)switch(r.type){case"style":var l=t.querySelector('style[data-href~="'+vn(a.href)+'"]');if(l)return r.instance=l,It(l),l;var h=T({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return l=(t.ownerDocument||t).createElement("style"),It(l),tn(l,"style",h),Yc(l,a.precedence,t),r.instance=l;case"stylesheet":h=eo(a.href);var d=t.querySelector(Ml(h));if(d)return r.state.loading|=4,r.instance=d,It(d),d;l=C_(a),(h=Zn.get(h))&&fm(l,h),d=(t.ownerDocument||t).createElement("link"),It(d);var v=d;return v._p=new Promise(function(b,N){v.onload=b,v.onerror=N}),tn(d,"link",l),r.state.loading|=4,Yc(d,a.precedence,t),r.instance=d;case"script":return d=to(a.src),(h=t.querySelector(Vl(d)))?(r.instance=h,It(h),h):(l=a,(h=Zn.get(d))&&(l=T({},a),dm(l,h)),t=t.ownerDocument||t,h=t.createElement("script"),It(h),tn(h,"link",l),t.head.appendChild(h),r.instance=h);case"void":return null;default:throw Error(s(443,r.type))}else r.type==="stylesheet"&&(r.state.loading&4)===0&&(l=r.instance,r.state.loading|=4,Yc(l,a.precedence,t));return r.instance}function Yc(t,r,a){for(var l=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),h=l.length?l[l.length-1]:null,d=h,v=0;v<l.length;v++){var b=l[v];if(b.dataset.precedence===r)d=b;else if(d!==h)break}d?d.parentNode.insertBefore(t,d.nextSibling):(r=a.nodeType===9?a.head:a,r.insertBefore(t,r.firstChild))}function fm(t,r){t.crossOrigin==null&&(t.crossOrigin=r.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=r.referrerPolicy),t.title==null&&(t.title=r.title)}function dm(t,r){t.crossOrigin==null&&(t.crossOrigin=r.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=r.referrerPolicy),t.integrity==null&&(t.integrity=r.integrity)}var Kc=null;function I_(t,r,a){if(Kc===null){var l=new Map,h=Kc=new Map;h.set(a,l)}else h=Kc,l=h.get(a),l||(l=new Map,h.set(a,l));if(l.has(t))return l;for(l.set(t,null),a=a.getElementsByTagName(t),h=0;h<a.length;h++){var d=a[h];if(!(d[Ar]||d[xt]||t==="link"&&d.getAttribute("rel")==="stylesheet")&&d.namespaceURI!=="http://www.w3.org/2000/svg"){var v=d.getAttribute(r)||"";v=t+v;var b=l.get(v);b?b.push(d):l.set(v,[d])}}return l}function D_(t,r,a){t=t.ownerDocument||t,t.head.insertBefore(a,r==="title"?t.querySelector("head > title"):null)}function K1(t,r,a){if(a===1||r.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof r.precedence!="string"||typeof r.href!="string"||r.href==="")break;return!0;case"link":if(typeof r.rel!="string"||typeof r.href!="string"||r.href===""||r.onLoad||r.onError)break;return r.rel==="stylesheet"?(t=r.disabled,typeof r.precedence=="string"&&t==null):!0;case"script":if(r.async&&typeof r.async!="function"&&typeof r.async!="symbol"&&!r.onLoad&&!r.onError&&r.src&&typeof r.src=="string")return!0}return!1}function N_(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}function $1(t,r,a,l){if(a.type==="stylesheet"&&(typeof l.media!="string"||matchMedia(l.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var h=eo(l.href),d=r.querySelector(Ml(h));if(d){r=d._p,r!==null&&typeof r=="object"&&typeof r.then=="function"&&(t.count++,t=$c.bind(t),r.then(t,t)),a.state.loading|=4,a.instance=d,It(d);return}d=r.ownerDocument||r,l=C_(l),(h=Zn.get(h))&&fm(l,h),d=d.createElement("link"),It(d);var v=d;v._p=new Promise(function(b,N){v.onload=b,v.onerror=N}),tn(d,"link",l),a.instance=d}t.stylesheets===null&&(t.stylesheets=new Map),t.stylesheets.set(a,r),(r=a.state.preload)&&(a.state.loading&3)===0&&(t.count++,a=$c.bind(t),r.addEventListener("load",a),r.addEventListener("error",a))}}var mm=0;function X1(t,r){return t.stylesheets&&t.count===0&&Wc(t,t.stylesheets),0<t.count||0<t.imgCount?function(a){var l=setTimeout(function(){if(t.stylesheets&&Wc(t,t.stylesheets),t.unsuspend){var d=t.unsuspend;t.unsuspend=null,d()}},6e4+r);0<t.imgBytes&&mm===0&&(mm=62500*D1());var h=setTimeout(function(){if(t.waitingForImages=!1,t.count===0&&(t.stylesheets&&Wc(t,t.stylesheets),t.unsuspend)){var d=t.unsuspend;t.unsuspend=null,d()}},(t.imgBytes>mm?50:800)+r);return t.unsuspend=a,function(){t.unsuspend=null,clearTimeout(l),clearTimeout(h)}}:null}function $c(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Wc(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var Xc=null;function Wc(t,r){t.stylesheets=null,t.unsuspend!==null&&(t.count++,Xc=new Map,r.forEach(W1,t),Xc=null,$c.call(t))}function W1(t,r){if(!(r.state.loading&4)){var a=Xc.get(t);if(a)var l=a.get(null);else{a=new Map,Xc.set(t,a);for(var h=t.querySelectorAll("link[data-precedence],style[data-precedence]"),d=0;d<h.length;d++){var v=h[d];(v.nodeName==="LINK"||v.getAttribute("media")!=="not all")&&(a.set(v.dataset.precedence,v),l=v)}l&&a.set(null,l)}h=r.instance,v=h.getAttribute("data-precedence"),d=a.get(v)||l,d===l&&a.set(null,h),a.set(v,h),this.count++,l=$c.bind(this),h.addEventListener("load",l),h.addEventListener("error",l),d?d.parentNode.insertBefore(h,d.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(h,t.firstChild)),r.state.loading|=4}}var kl={$$typeof:ee,Provider:null,Consumer:null,_currentValue:Z,_currentValue2:Z,_threadCount:0};function J1(t,r,a,l,h,d,v,b,N){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=br(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=br(0),this.hiddenUpdates=br(null),this.identifierPrefix=l,this.onUncaughtError=h,this.onCaughtError=d,this.onRecoverableError=v,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=N,this.incompleteTransitions=new Map}function O_(t,r,a,l,h,d,v,b,N,F,J,ie){return t=new J1(t,r,a,v,N,F,J,ie,b),r=1,d===!0&&(r|=24),d=Dn(3,null,null,r),t.current=d,d.stateNode=t,r=Yf(),r.refCount++,t.pooledCache=r,r.refCount++,d.memoizedState={element:l,isDehydrated:a,cache:r},Wf(d),t}function M_(t){return t?(t=Oa,t):Oa}function V_(t,r,a,l,h,d){h=M_(h),l.context===null?l.context=h:l.pendingContext=h,l=Hi(r),l.payload={element:a},d=d===void 0?null:d,d!==null&&(l.callback=d),a=Fi(t,l,r),a!==null&&(An(a,t,r),dl(a,t,r))}function k_(t,r){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var a=t.retryLane;t.retryLane=a!==0&&a<r?a:r}}function pm(t,r){k_(t,r),(t=t.alternate)&&k_(t,r)}function P_(t){if(t.tag===13||t.tag===31){var r=Hs(t,67108864);r!==null&&An(r,t,67108864),pm(t,67108864)}}function L_(t){if(t.tag===13||t.tag===31){var r=kn();r=Ns(r);var a=Hs(t,r);a!==null&&An(a,t,r),pm(t,r)}}var Jc=!0;function Z1(t,r,a,l){var h=P.T;P.T=null;var d=W.p;try{W.p=2,gm(t,r,a,l)}finally{W.p=d,P.T=h}}function eA(t,r,a,l){var h=P.T;P.T=null;var d=W.p;try{W.p=8,gm(t,r,a,l)}finally{W.p=d,P.T=h}}function gm(t,r,a,l){if(Jc){var h=ym(l);if(h===null)nm(t,r,l,Zc,a),j_(t,l);else if(nA(h,t,r,a,l))l.stopPropagation();else if(j_(t,l),r&4&&-1<tA.indexOf(t)){for(;h!==null;){var d=qn(h);if(d!==null)switch(d.tag){case 3:if(d=d.stateNode,d.current.memoizedState.isDehydrated){var v=Er(d.pendingLanes);if(v!==0){var b=d;for(b.pendingLanes|=2,b.entangledLanes|=2;v;){var N=1<<31-Et(v);b.entanglements[1]|=N,v&=~N}jr(d),(Je&6)===0&&(kc=hn()+500,Il(0))}}break;case 31:case 13:b=Hs(d,2),b!==null&&An(b,d,2),Lc(),pm(d,2)}if(d=ym(l),d===null&&nm(t,r,l,Zc,a),d===h)break;h=d}h!==null&&l.stopPropagation()}else nm(t,r,l,null,a)}}function ym(t){return t=Hn(t),vm(t)}var Zc=null;function vm(t){if(Zc=null,t=wr(t),t!==null){var r=u(t);if(r===null)t=null;else{var a=r.tag;if(a===13){if(t=f(r),t!==null)return t;t=null}else if(a===31){if(t=m(r),t!==null)return t;t=null}else if(a===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;t=null}else r!==t&&(t=null)}}return Zc=t,null}function U_(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Cs()){case Uo:return 2;case jo:return 8;case xi:case Af:return 32;case Nu:return 268435456;default:return 32}default:return 32}}var _m=!1,ts=null,ns=null,rs=null,Pl=new Map,Ll=new Map,is=[],tA="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function j_(t,r){switch(t){case"focusin":case"focusout":ts=null;break;case"dragenter":case"dragleave":ns=null;break;case"mouseover":case"mouseout":rs=null;break;case"pointerover":case"pointerout":Pl.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ll.delete(r.pointerId)}}function Ul(t,r,a,l,h,d){return t===null||t.nativeEvent!==d?(t={blockedOn:r,domEventName:a,eventSystemFlags:l,nativeEvent:d,targetContainers:[h]},r!==null&&(r=qn(r),r!==null&&P_(r)),t):(t.eventSystemFlags|=l,r=t.targetContainers,h!==null&&r.indexOf(h)===-1&&r.push(h),t)}function nA(t,r,a,l,h){switch(r){case"focusin":return ts=Ul(ts,t,r,a,l,h),!0;case"dragenter":return ns=Ul(ns,t,r,a,l,h),!0;case"mouseover":return rs=Ul(rs,t,r,a,l,h),!0;case"pointerover":var d=h.pointerId;return Pl.set(d,Ul(Pl.get(d)||null,t,r,a,l,h)),!0;case"gotpointercapture":return d=h.pointerId,Ll.set(d,Ul(Ll.get(d)||null,t,r,a,l,h)),!0}return!1}function z_(t){var r=wr(t.target);if(r!==null){var a=u(r);if(a!==null){if(r=a.tag,r===13){if(r=f(a),r!==null){t.blockedOn=r,rr(t.priority,function(){L_(a)});return}}else if(r===31){if(r=m(a),r!==null){t.blockedOn=r,rr(t.priority,function(){L_(a)});return}}else if(r===3&&a.stateNode.current.memoizedState.isDehydrated){t.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}t.blockedOn=null}function eh(t){if(t.blockedOn!==null)return!1;for(var r=t.targetContainers;0<r.length;){var a=ym(t.nativeEvent);if(a===null){a=t.nativeEvent;var l=new a.constructor(a.type,a);Wo=l,a.target.dispatchEvent(l),Wo=null}else return r=qn(a),r!==null&&P_(r),t.blockedOn=a,!1;r.shift()}return!0}function B_(t,r,a){eh(t)&&a.delete(r)}function rA(){_m=!1,ts!==null&&eh(ts)&&(ts=null),ns!==null&&eh(ns)&&(ns=null),rs!==null&&eh(rs)&&(rs=null),Pl.forEach(B_),Ll.forEach(B_)}function th(t,r){t.blockedOn===r&&(t.blockedOn=null,_m||(_m=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,rA)))}var nh=null;function q_(t){nh!==t&&(nh=t,i.unstable_scheduleCallback(i.unstable_NormalPriority,function(){nh===t&&(nh=null);for(var r=0;r<t.length;r+=3){var a=t[r],l=t[r+1],h=t[r+2];if(typeof l!="function"){if(vm(l||a)===null)continue;break}var d=qn(a);d!==null&&(t.splice(r,3),r-=3,yd(d,{pending:!0,data:h,method:a.method,action:l},l,h))}}))}function no(t){function r(N){return th(N,t)}ts!==null&&th(ts,t),ns!==null&&th(ns,t),rs!==null&&th(rs,t),Pl.forEach(r),Ll.forEach(r);for(var a=0;a<is.length;a++){var l=is[a];l.blockedOn===t&&(l.blockedOn=null)}for(;0<is.length&&(a=is[0],a.blockedOn===null);)z_(a),a.blockedOn===null&&is.shift();if(a=(t.ownerDocument||t).$$reactFormReplay,a!=null)for(l=0;l<a.length;l+=3){var h=a[l],d=a[l+1],v=h[Ft]||null;if(typeof d=="function")v||q_(a);else if(v){var b=null;if(d&&d.hasAttribute("formAction")){if(h=d,v=d[Ft]||null)b=v.formAction;else if(vm(h)!==null)continue}else b=v.action;typeof b=="function"?a[l+1]=b:(a.splice(l,3),l-=3),q_(a)}}}function H_(){function t(d){d.canIntercept&&d.info==="react-transition"&&d.intercept({handler:function(){return new Promise(function(v){return h=v})},focusReset:"manual",scroll:"manual"})}function r(){h!==null&&(h(),h=null),l||setTimeout(a,20)}function a(){if(!l&&!navigation.transition){var d=navigation.currentEntry;d&&d.url!=null&&navigation.navigate(d.url,{state:d.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var l=!1,h=null;return navigation.addEventListener("navigate",t),navigation.addEventListener("navigatesuccess",r),navigation.addEventListener("navigateerror",r),setTimeout(a,100),function(){l=!0,navigation.removeEventListener("navigate",t),navigation.removeEventListener("navigatesuccess",r),navigation.removeEventListener("navigateerror",r),h!==null&&(h(),h=null)}}}function Em(t){this._internalRoot=t}rh.prototype.render=Em.prototype.render=function(t){var r=this._internalRoot;if(r===null)throw Error(s(409));var a=r.current,l=kn();V_(a,l,t,r,null,null)},rh.prototype.unmount=Em.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var r=t.containerInfo;V_(t.current,2,null,t,null,null),Lc(),r[Sr]=null}};function rh(t){this._internalRoot=t}rh.prototype.unstable_scheduleHydration=function(t){if(t){var r=Lu();t={blockedOn:null,target:t,priority:r};for(var a=0;a<is.length&&r!==0&&r<is[a].priority;a++);is.splice(a,0,t),a===0&&z_(t)}};var F_=e.version;if(F_!=="19.2.3")throw Error(s(527,F_,"19.2.3"));W.findDOMNode=function(t){var r=t._reactInternals;if(r===void 0)throw typeof t.render=="function"?Error(s(188)):(t=Object.keys(t).join(","),Error(s(268,t)));return t=g(r),t=t!==null?E(t):null,t=t===null?null:t.stateNode,t};var iA={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:P,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ih=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ih.isDisabled&&ih.supportsFiber)try{tr=ih.inject(iA),Xt=ih}catch{}}return zl.createRoot=function(t,r){if(!o(t))throw Error(s(299));var a=!1,l="",h=Wy,d=Jy,v=Zy;return r!=null&&(r.unstable_strictMode===!0&&(a=!0),r.identifierPrefix!==void 0&&(l=r.identifierPrefix),r.onUncaughtError!==void 0&&(h=r.onUncaughtError),r.onCaughtError!==void 0&&(d=r.onCaughtError),r.onRecoverableError!==void 0&&(v=r.onRecoverableError)),r=O_(t,1,!1,null,null,a,l,null,h,d,v,H_),t[Sr]=r.current,tm(t),new Em(r)},zl.hydrateRoot=function(t,r,a){if(!o(t))throw Error(s(299));var l=!1,h="",d=Wy,v=Jy,b=Zy,N=null;return a!=null&&(a.unstable_strictMode===!0&&(l=!0),a.identifierPrefix!==void 0&&(h=a.identifierPrefix),a.onUncaughtError!==void 0&&(d=a.onUncaughtError),a.onCaughtError!==void 0&&(v=a.onCaughtError),a.onRecoverableError!==void 0&&(b=a.onRecoverableError),a.formState!==void 0&&(N=a.formState)),r=O_(t,1,!0,r,a??null,l,h,N,d,v,b,H_),r.context=M_(null),a=r.current,l=kn(),l=Ns(l),h=Hi(l),h.callback=null,Fi(a,h,l),a=l,r.current.lanes=a,Is(r,a),jr(r),t[Sr]=r.current,tm(t),new rh(r)},zl.version="19.2.3",zl}var e0;function pA(){if(e0)return Sm.exports;e0=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),Sm.exports=mA(),Sm.exports}var gA=pA();var t0="popstate";function yA(i={}){function e(s,o){let{pathname:u,search:f,hash:m}=s.location;return Fm("",{pathname:u,search:f,hash:m},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function n(s,o){return typeof o=="string"?o:eu(o)}return _A(e,n,null,i)}function mt(i,e){if(i===!1||i===null||typeof i>"u")throw new Error(e)}function er(i,e){if(!i){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function vA(){return Math.random().toString(36).substring(2,10)}function n0(i,e){return{usr:i.state,key:i.key,idx:e}}function Fm(i,e,n=null,s){return{pathname:typeof i=="string"?i:i.pathname,search:"",hash:"",...typeof e=="string"?So(e):e,state:n,key:e&&e.key||s||vA()}}function eu({pathname:i="/",search:e="",hash:n=""}){return e&&e!=="?"&&(i+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(i+=n.charAt(0)==="#"?n:"#"+n),i}function So(i){let e={};if(i){let n=i.indexOf("#");n>=0&&(e.hash=i.substring(n),i=i.substring(0,n));let s=i.indexOf("?");s>=0&&(e.search=i.substring(s),i=i.substring(0,s)),i&&(e.pathname=i)}return e}function _A(i,e,n,s={}){let{window:o=document.defaultView,v5Compat:u=!1}=s,f=o.history,m="POP",p=null,g=E();g==null&&(g=0,f.replaceState({...f.state,idx:g},""));function E(){return(f.state||{idx:null}).idx}function T(){m="POP";let q=E(),$=q==null?null:q-g;g=q,p&&p({action:m,location:Q.location,delta:$})}function R(q,$){m="PUSH";let X=Fm(Q.location,q,$);g=E()+1;let ee=n0(X,g),de=Q.createHref(X);try{f.pushState(ee,"",de)}catch(pe){if(pe instanceof DOMException&&pe.name==="DataCloneError")throw pe;o.location.assign(de)}u&&p&&p({action:m,location:Q.location,delta:1})}function O(q,$){m="REPLACE";let X=Fm(Q.location,q,$);g=E();let ee=n0(X,g),de=Q.createHref(X);f.replaceState(ee,"",de),u&&p&&p({action:m,location:Q.location,delta:0})}function j(q){return EA(q)}let Q={get action(){return m},get location(){return i(o,f)},listen(q){if(p)throw new Error("A history only accepts one active listener");return o.addEventListener(t0,T),p=q,()=>{o.removeEventListener(t0,T),p=null}},createHref(q){return e(o,q)},createURL:j,encodeLocation(q){let $=j(q);return{pathname:$.pathname,search:$.search,hash:$.hash}},push:R,replace:O,go(q){return f.go(q)}};return Q}function EA(i,e=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),mt(n,"No window.location.(origin|href) available to create URL");let s=typeof i=="string"?i:eu(i);return s=s.replace(/ $/,"%20"),!e&&s.startsWith("//")&&(s=n+s),new URL(s,n)}function PE(i,e,n="/"){return TA(i,e,n,!1)}function TA(i,e,n,s){let o=typeof e=="string"?So(e):e,u=Ti(o.pathname||"/",n);if(u==null)return null;let f=LE(i);bA(f);let m=null;for(let p=0;m==null&&p<f.length;++p){let g=MA(u);m=NA(f[p],g,s)}return m}function LE(i,e=[],n=[],s="",o=!1){let u=(f,m,p=o,g)=>{let E={relativePath:g===void 0?f.path||"":g,caseSensitive:f.caseSensitive===!0,childrenIndex:m,route:f};if(E.relativePath.startsWith("/")){if(!E.relativePath.startsWith(s)&&p)return;mt(E.relativePath.startsWith(s),`Absolute route path "${E.relativePath}" nested under path "${s}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),E.relativePath=E.relativePath.slice(s.length)}let T=_i([s,E.relativePath]),R=n.concat(E);f.children&&f.children.length>0&&(mt(f.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${T}".`),LE(f.children,e,R,T,p)),!(f.path==null&&!f.index)&&e.push({path:T,score:IA(T,f.index),routesMeta:R})};return i.forEach((f,m)=>{if(f.path===""||!f.path?.includes("?"))u(f,m);else for(let p of UE(f.path))u(f,m,!0,p)}),e}function UE(i){let e=i.split("/");if(e.length===0)return[];let[n,...s]=e,o=n.endsWith("?"),u=n.replace(/\?$/,"");if(s.length===0)return o?[u,""]:[u];let f=UE(s.join("/")),m=[];return m.push(...f.map(p=>p===""?u:[u,p].join("/"))),o&&m.push(...f),m.map(p=>i.startsWith("/")&&p===""?"/":p)}function bA(i){i.sort((e,n)=>e.score!==n.score?n.score-e.score:DA(e.routesMeta.map(s=>s.childrenIndex),n.routesMeta.map(s=>s.childrenIndex)))}var SA=/^:[\w-]+$/,AA=3,wA=2,RA=1,CA=10,xA=-2,r0=i=>i==="*";function IA(i,e){let n=i.split("/"),s=n.length;return n.some(r0)&&(s+=xA),e&&(s+=wA),n.filter(o=>!r0(o)).reduce((o,u)=>o+(SA.test(u)?AA:u===""?RA:CA),s)}function DA(i,e){return i.length===e.length&&i.slice(0,-1).every((s,o)=>s===e[o])?i[i.length-1]-e[e.length-1]:0}function NA(i,e,n=!1){let{routesMeta:s}=i,o={},u="/",f=[];for(let m=0;m<s.length;++m){let p=s[m],g=m===s.length-1,E=u==="/"?e:e.slice(u.length)||"/",T=Ch({path:p.relativePath,caseSensitive:p.caseSensitive,end:g},E),R=p.route;if(!T&&g&&n&&!s[s.length-1].route.index&&(T=Ch({path:p.relativePath,caseSensitive:p.caseSensitive,end:!1},E)),!T)return null;Object.assign(o,T.params),f.push({params:o,pathname:_i([u,T.pathname]),pathnameBase:LA(_i([u,T.pathnameBase])),route:R}),T.pathnameBase!=="/"&&(u=_i([u,T.pathnameBase]))}return f}function Ch(i,e){typeof i=="string"&&(i={path:i,caseSensitive:!1,end:!0});let[n,s]=OA(i.path,i.caseSensitive,i.end),o=e.match(n);if(!o)return null;let u=o[0],f=u.replace(/(.)\/+$/,"$1"),m=o.slice(1);return{params:s.reduce((g,{paramName:E,isOptional:T},R)=>{if(E==="*"){let j=m[R]||"";f=u.slice(0,u.length-j.length).replace(/(.)\/+$/,"$1")}const O=m[R];return T&&!O?g[E]=void 0:g[E]=(O||"").replace(/%2F/g,"/"),g},{}),pathname:u,pathnameBase:f,pattern:i}}function OA(i,e=!1,n=!0){er(i==="*"||!i.endsWith("*")||i.endsWith("/*"),`Route path "${i}" will be treated as if it were "${i.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${i.replace(/\*$/,"/*")}".`);let s=[],o="^"+i.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(f,m,p)=>(s.push({paramName:m,isOptional:p!=null}),p?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return i.endsWith("*")?(s.push({paramName:"*"}),o+=i==="*"||i==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?o+="\\/*$":i!==""&&i!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,e?void 0:"i"),s]}function MA(i){try{return i.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return er(!1,`The URL path "${i}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),i}}function Ti(i,e){if(e==="/")return i;if(!i.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,s=i.charAt(n);return s&&s!=="/"?null:i.slice(n)||"/"}var jE=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,VA=i=>jE.test(i);function kA(i,e="/"){let{pathname:n,search:s="",hash:o=""}=typeof i=="string"?So(i):i,u;if(n)if(VA(n))u=n;else{if(n.includes("//")){let f=n;n=n.replace(/\/\/+/g,"/"),er(!1,`Pathnames cannot have embedded double slashes - normalizing ${f} -> ${n}`)}n.startsWith("/")?u=i0(n.substring(1),"/"):u=i0(n,e)}else u=e;return{pathname:u,search:UA(s),hash:jA(o)}}function i0(i,e){let n=e.replace(/\/+$/,"").split("/");return i.split("/").forEach(o=>{o===".."?n.length>1&&n.pop():o!=="."&&n.push(o)}),n.length>1?n.join("/"):"/"}function Cm(i,e,n,s){return`Cannot include a '${i}' character in a manually specified \`to.${e}\` field [${JSON.stringify(s)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function PA(i){return i.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function vp(i){let e=PA(i);return e.map((n,s)=>s===e.length-1?n.pathname:n.pathnameBase)}function _p(i,e,n,s=!1){let o;typeof i=="string"?o=So(i):(o={...i},mt(!o.pathname||!o.pathname.includes("?"),Cm("?","pathname","search",o)),mt(!o.pathname||!o.pathname.includes("#"),Cm("#","pathname","hash",o)),mt(!o.search||!o.search.includes("#"),Cm("#","search","hash",o)));let u=i===""||o.pathname==="",f=u?"/":o.pathname,m;if(f==null)m=n;else{let T=e.length-1;if(!s&&f.startsWith("..")){let R=f.split("/");for(;R[0]==="..";)R.shift(),T-=1;o.pathname=R.join("/")}m=T>=0?e[T]:"/"}let p=kA(o,m),g=f&&f!=="/"&&f.endsWith("/"),E=(u||f===".")&&n.endsWith("/");return!p.pathname.endsWith("/")&&(g||E)&&(p.pathname+="/"),p}var _i=i=>i.join("/").replace(/\/\/+/g,"/"),LA=i=>i.replace(/\/+$/,"").replace(/^\/*/,"/"),UA=i=>!i||i==="?"?"":i.startsWith("?")?i:"?"+i,jA=i=>!i||i==="#"?"":i.startsWith("#")?i:"#"+i,zA=class{constructor(i,e,n,s=!1){this.status=i,this.statusText=e||"",this.internal=s,n instanceof Error?(this.data=n.toString(),this.error=n):this.data=n}};function BA(i){return i!=null&&typeof i.status=="number"&&typeof i.statusText=="string"&&typeof i.internal=="boolean"&&"data"in i}function qA(i){return i.map(e=>e.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var zE=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function BE(i,e){let n=i;if(typeof n!="string"||!jE.test(n))return{absoluteURL:void 0,isExternal:!1,to:n};let s=n,o=!1;if(zE)try{let u=new URL(window.location.href),f=n.startsWith("//")?new URL(u.protocol+n):new URL(n),m=Ti(f.pathname,e);f.origin===u.origin&&m!=null?n=m+f.search+f.hash:o=!0}catch{er(!1,`<Link to="${n}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:s,isExternal:o,to:n}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var qE=["POST","PUT","PATCH","DELETE"];new Set(qE);var HA=["GET",...qE];new Set(HA);var Ao=k.createContext(null);Ao.displayName="DataRouter";var $h=k.createContext(null);$h.displayName="DataRouterState";var FA=k.createContext(!1),HE=k.createContext({isTransitioning:!1});HE.displayName="ViewTransition";var GA=k.createContext(new Map);GA.displayName="Fetchers";var QA=k.createContext(null);QA.displayName="Await";var jn=k.createContext(null);jn.displayName="Navigation";var hu=k.createContext(null);hu.displayName="Location";var vr=k.createContext({outlet:null,matches:[],isDataRoute:!1});vr.displayName="Route";var Ep=k.createContext(null);Ep.displayName="RouteError";var FE="REACT_ROUTER_ERROR",YA="REDIRECT",KA="ROUTE_ERROR_RESPONSE";function $A(i){if(i.startsWith(`${FE}:${YA}:{`))try{let e=JSON.parse(i.slice(28));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.location=="string"&&typeof e.reloadDocument=="boolean"&&typeof e.replace=="boolean")return e}catch{}}function XA(i){if(i.startsWith(`${FE}:${KA}:{`))try{let e=JSON.parse(i.slice(40));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string")return new zA(e.status,e.statusText,e.data)}catch{}}function WA(i,{relative:e}={}){mt(wo(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:s}=k.useContext(jn),{hash:o,pathname:u,search:f}=fu(i,{relative:e}),m=u;return n!=="/"&&(m=u==="/"?n:_i([n,u])),s.createHref({pathname:m,search:f,hash:o})}function wo(){return k.useContext(hu)!=null}function Ss(){return mt(wo(),"useLocation() may be used only in the context of a <Router> component."),k.useContext(hu).location}var GE="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function QE(i){k.useContext(jn).static||k.useLayoutEffect(i)}function Ro(){let{isDataRoute:i}=k.useContext(vr);return i?hw():JA()}function JA(){mt(wo(),"useNavigate() may be used only in the context of a <Router> component.");let i=k.useContext(Ao),{basename:e,navigator:n}=k.useContext(jn),{matches:s}=k.useContext(vr),{pathname:o}=Ss(),u=JSON.stringify(vp(s)),f=k.useRef(!1);return QE(()=>{f.current=!0}),k.useCallback((p,g={})=>{if(er(f.current,GE),!f.current)return;if(typeof p=="number"){n.go(p);return}let E=_p(p,JSON.parse(u),o,g.relative==="path");i==null&&e!=="/"&&(E.pathname=E.pathname==="/"?e:_i([e,E.pathname])),(g.replace?n.replace:n.push)(E,g.state,g)},[e,n,u,o,i])}k.createContext(null);function ZA(){let{matches:i}=k.useContext(vr),e=i[i.length-1];return e?e.params:{}}function fu(i,{relative:e}={}){let{matches:n}=k.useContext(vr),{pathname:s}=Ss(),o=JSON.stringify(vp(n));return k.useMemo(()=>_p(i,JSON.parse(o),s,e==="path"),[i,o,s,e])}function ew(i,e){return YE(i,e)}function YE(i,e,n,s,o){mt(wo(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:u}=k.useContext(jn),{matches:f}=k.useContext(vr),m=f[f.length-1],p=m?m.params:{},g=m?m.pathname:"/",E=m?m.pathnameBase:"/",T=m&&m.route;{let X=T&&T.path||"";$E(g,!T||X.endsWith("*")||X.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${g}" (under <Route path="${X}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${X}"> to <Route path="${X==="/"?"*":`${X}/*`}">.`)}let R=Ss(),O;if(e){let X=typeof e=="string"?So(e):e;mt(E==="/"||X.pathname?.startsWith(E),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${E}" but pathname "${X.pathname}" was given in the \`location\` prop.`),O=X}else O=R;let j=O.pathname||"/",Q=j;if(E!=="/"){let X=E.replace(/^\//,"").split("/");Q="/"+j.replace(/^\//,"").split("/").slice(X.length).join("/")}let q=PE(i,{pathname:Q});er(T||q!=null,`No routes matched location "${O.pathname}${O.search}${O.hash}" `),er(q==null||q[q.length-1].route.element!==void 0||q[q.length-1].route.Component!==void 0||q[q.length-1].route.lazy!==void 0,`Matched leaf route at location "${O.pathname}${O.search}${O.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let $=sw(q&&q.map(X=>Object.assign({},X,{params:Object.assign({},p,X.params),pathname:_i([E,u.encodeLocation?u.encodeLocation(X.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:X.pathname]),pathnameBase:X.pathnameBase==="/"?E:_i([E,u.encodeLocation?u.encodeLocation(X.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:X.pathnameBase])})),f,n,s,o);return e&&$?k.createElement(hu.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...O},navigationType:"POP"}},$):$}function tw(){let i=cw(),e=BA(i)?`${i.status} ${i.statusText}`:i instanceof Error?i.message:JSON.stringify(i),n=i instanceof Error?i.stack:null,s="rgba(200,200,200, 0.5)",o={padding:"0.5rem",backgroundColor:s},u={padding:"2px 4px",backgroundColor:s},f=null;return console.error("Error handled by React Router default ErrorBoundary:",i),f=k.createElement(k.Fragment,null,k.createElement("p",null," Hey developer "),k.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",k.createElement("code",{style:u},"ErrorBoundary")," or"," ",k.createElement("code",{style:u},"errorElement")," prop on your route.")),k.createElement(k.Fragment,null,k.createElement("h2",null,"Unexpected Application Error!"),k.createElement("h3",{style:{fontStyle:"italic"}},e),n?k.createElement("pre",{style:o},n):null,f)}var nw=k.createElement(tw,null),KE=class extends k.Component{constructor(i){super(i),this.state={location:i.location,revalidation:i.revalidation,error:i.error}}static getDerivedStateFromError(i){return{error:i}}static getDerivedStateFromProps(i,e){return e.location!==i.location||e.revalidation!=="idle"&&i.revalidation==="idle"?{error:i.error,location:i.location,revalidation:i.revalidation}:{error:i.error!==void 0?i.error:e.error,location:e.location,revalidation:i.revalidation||e.revalidation}}componentDidCatch(i,e){this.props.onError?this.props.onError(i,e):console.error("React Router caught the following error during render",i)}render(){let i=this.state.error;if(this.context&&typeof i=="object"&&i&&"digest"in i&&typeof i.digest=="string"){const n=XA(i.digest);n&&(i=n)}let e=i!==void 0?k.createElement(vr.Provider,{value:this.props.routeContext},k.createElement(Ep.Provider,{value:i,children:this.props.component})):this.props.children;return this.context?k.createElement(rw,{error:i},e):e}};KE.contextType=FA;var xm=new WeakMap;function rw({children:i,error:e}){let{basename:n}=k.useContext(jn);if(typeof e=="object"&&e&&"digest"in e&&typeof e.digest=="string"){let s=$A(e.digest);if(s){let o=xm.get(e);if(o)throw o;let u=BE(s.location,n);if(zE&&!xm.get(e))if(u.isExternal||s.reloadDocument)window.location.href=u.absoluteURL||u.to;else{const f=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(u.to,{replace:s.replace}));throw xm.set(e,f),f}return k.createElement("meta",{httpEquiv:"refresh",content:`0;url=${u.absoluteURL||u.to}`})}}return i}function iw({routeContext:i,match:e,children:n}){let s=k.useContext(Ao);return s&&s.static&&s.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=e.route.id),k.createElement(vr.Provider,{value:i},n)}function sw(i,e=[],n=null,s=null,o=null){if(i==null){if(!n)return null;if(n.errors)i=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)i=n.matches;else return null}let u=i,f=n?.errors;if(f!=null){let E=u.findIndex(T=>T.route.id&&f?.[T.route.id]!==void 0);mt(E>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(f).join(",")}`),u=u.slice(0,Math.min(u.length,E+1))}let m=!1,p=-1;if(n)for(let E=0;E<u.length;E++){let T=u[E];if((T.route.HydrateFallback||T.route.hydrateFallbackElement)&&(p=E),T.route.id){let{loaderData:R,errors:O}=n,j=T.route.loader&&!R.hasOwnProperty(T.route.id)&&(!O||O[T.route.id]===void 0);if(T.route.lazy||j){m=!0,p>=0?u=u.slice(0,p+1):u=[u[0]];break}}}let g=n&&s?(E,T)=>{s(E,{location:n.location,params:n.matches?.[0]?.params??{},unstable_pattern:qA(n.matches),errorInfo:T})}:void 0;return u.reduceRight((E,T,R)=>{let O,j=!1,Q=null,q=null;n&&(O=f&&T.route.id?f[T.route.id]:void 0,Q=T.route.errorElement||nw,m&&(p<0&&R===0?($E("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),j=!0,q=null):p===R&&(j=!0,q=T.route.hydrateFallbackElement||null)));let $=e.concat(u.slice(0,R+1)),X=()=>{let ee;return O?ee=Q:j?ee=q:T.route.Component?ee=k.createElement(T.route.Component,null):T.route.element?ee=T.route.element:ee=E,k.createElement(iw,{match:T,routeContext:{outlet:E,matches:$,isDataRoute:n!=null},children:ee})};return n&&(T.route.ErrorBoundary||T.route.errorElement||R===0)?k.createElement(KE,{location:n.location,revalidation:n.revalidation,component:Q,error:O,children:X(),routeContext:{outlet:null,matches:$,isDataRoute:!0},onError:g}):X()},null)}function Tp(i){return`${i} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function aw(i){let e=k.useContext(Ao);return mt(e,Tp(i)),e}function ow(i){let e=k.useContext($h);return mt(e,Tp(i)),e}function lw(i){let e=k.useContext(vr);return mt(e,Tp(i)),e}function bp(i){let e=lw(i),n=e.matches[e.matches.length-1];return mt(n.route.id,`${i} can only be used on routes that contain a unique "id"`),n.route.id}function uw(){return bp("useRouteId")}function cw(){let i=k.useContext(Ep),e=ow("useRouteError"),n=bp("useRouteError");return i!==void 0?i:e.errors?.[n]}function hw(){let{router:i}=aw("useNavigate"),e=bp("useNavigate"),n=k.useRef(!1);return QE(()=>{n.current=!0}),k.useCallback(async(o,u={})=>{er(n.current,GE),n.current&&(typeof o=="number"?await i.navigate(o):await i.navigate(o,{fromRouteId:e,...u}))},[i,e])}var s0={};function $E(i,e,n){!e&&!s0[i]&&(s0[i]=!0,er(!1,n))}k.memo(fw);function fw({routes:i,future:e,state:n,onError:s}){return YE(i,void 0,n,s,e)}function dw({to:i,replace:e,state:n,relative:s}){mt(wo(),"<Navigate> may be used only in the context of a <Router> component.");let{static:o}=k.useContext(jn);er(!o,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:u}=k.useContext(vr),{pathname:f}=Ss(),m=Ro(),p=_p(i,vp(u),f,s==="path"),g=JSON.stringify(p);return k.useEffect(()=>{m(JSON.parse(g),{replace:e,state:n,relative:s})},[m,g,s,e,n]),null}function ro(i){mt(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function mw({basename:i="/",children:e=null,location:n,navigationType:s="POP",navigator:o,static:u=!1,unstable_useTransitions:f}){mt(!wo(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let m=i.replace(/^\/*/,"/"),p=k.useMemo(()=>({basename:m,navigator:o,static:u,unstable_useTransitions:f,future:{}}),[m,o,u,f]);typeof n=="string"&&(n=So(n));let{pathname:g="/",search:E="",hash:T="",state:R=null,key:O="default"}=n,j=k.useMemo(()=>{let Q=Ti(g,m);return Q==null?null:{location:{pathname:Q,search:E,hash:T,state:R,key:O},navigationType:s}},[m,g,E,T,R,O,s]);return er(j!=null,`<Router basename="${m}"> is not able to match the URL "${g}${E}${T}" because it does not start with the basename, so the <Router> won't render anything.`),j==null?null:k.createElement(jn.Provider,{value:p},k.createElement(hu.Provider,{children:e,value:j}))}function pw({children:i,location:e}){return ew(Gm(i),e)}function Gm(i,e=[]){let n=[];return k.Children.forEach(i,(s,o)=>{if(!k.isValidElement(s))return;let u=[...e,o];if(s.type===k.Fragment){n.push.apply(n,Gm(s.props.children,u));return}mt(s.type===ro,`[${typeof s.type=="string"?s.type:s.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),mt(!s.props.index||!s.props.children,"An index route cannot have child routes.");let f={id:s.props.id||u.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,middleware:s.props.middleware,loader:s.props.loader,action:s.props.action,hydrateFallbackElement:s.props.hydrateFallbackElement,HydrateFallback:s.props.HydrateFallback,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.hasErrorBoundary===!0||s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(f.children=Gm(s.props.children,u)),n.push(f)}),n}var mh="get",ph="application/x-www-form-urlencoded";function Xh(i){return typeof HTMLElement<"u"&&i instanceof HTMLElement}function gw(i){return Xh(i)&&i.tagName.toLowerCase()==="button"}function yw(i){return Xh(i)&&i.tagName.toLowerCase()==="form"}function vw(i){return Xh(i)&&i.tagName.toLowerCase()==="input"}function _w(i){return!!(i.metaKey||i.altKey||i.ctrlKey||i.shiftKey)}function Ew(i,e){return i.button===0&&(!e||e==="_self")&&!_w(i)}var sh=null;function Tw(){if(sh===null)try{new FormData(document.createElement("form"),0),sh=!1}catch{sh=!0}return sh}var bw=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Im(i){return i!=null&&!bw.has(i)?(er(!1,`"${i}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${ph}"`),null):i}function Sw(i,e){let n,s,o,u,f;if(yw(i)){let m=i.getAttribute("action");s=m?Ti(m,e):null,n=i.getAttribute("method")||mh,o=Im(i.getAttribute("enctype"))||ph,u=new FormData(i)}else if(gw(i)||vw(i)&&(i.type==="submit"||i.type==="image")){let m=i.form;if(m==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let p=i.getAttribute("formaction")||m.getAttribute("action");if(s=p?Ti(p,e):null,n=i.getAttribute("formmethod")||m.getAttribute("method")||mh,o=Im(i.getAttribute("formenctype"))||Im(m.getAttribute("enctype"))||ph,u=new FormData(m,i),!Tw()){let{name:g,type:E,value:T}=i;if(E==="image"){let R=g?`${g}.`:"";u.append(`${R}x`,"0"),u.append(`${R}y`,"0")}else g&&u.append(g,T)}}else{if(Xh(i))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=mh,s=null,o=ph,f=i}return u&&o==="text/plain"&&(f=u,u=void 0),{action:s,method:n.toLowerCase(),encType:o,formData:u,body:f}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Sp(i,e){if(i===!1||i===null||typeof i>"u")throw new Error(e)}function Aw(i,e,n){let s=typeof i=="string"?new URL(i,typeof window>"u"?"server://singlefetch/":window.location.origin):i;return s.pathname==="/"?s.pathname=`_root.${n}`:e&&Ti(s.pathname,e)==="/"?s.pathname=`${e.replace(/\/$/,"")}/_root.${n}`:s.pathname=`${s.pathname.replace(/\/$/,"")}.${n}`,s}async function ww(i,e){if(i.id in e)return e[i.id];try{let n=await import(i.module);return e[i.id]=n,n}catch(n){return console.error(`Error loading route module \`${i.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function Rw(i){return i==null?!1:i.href==null?i.rel==="preload"&&typeof i.imageSrcSet=="string"&&typeof i.imageSizes=="string":typeof i.rel=="string"&&typeof i.href=="string"}async function Cw(i,e,n){let s=await Promise.all(i.map(async o=>{let u=e.routes[o.route.id];if(u){let f=await ww(u,n);return f.links?f.links():[]}return[]}));return Nw(s.flat(1).filter(Rw).filter(o=>o.rel==="stylesheet"||o.rel==="preload").map(o=>o.rel==="stylesheet"?{...o,rel:"prefetch",as:"style"}:{...o,rel:"prefetch"}))}function a0(i,e,n,s,o,u){let f=(p,g)=>n[g]?p.route.id!==n[g].route.id:!0,m=(p,g)=>n[g].pathname!==p.pathname||n[g].route.path?.endsWith("*")&&n[g].params["*"]!==p.params["*"];return u==="assets"?e.filter((p,g)=>f(p,g)||m(p,g)):u==="data"?e.filter((p,g)=>{let E=s.routes[p.route.id];if(!E||!E.hasLoader)return!1;if(f(p,g)||m(p,g))return!0;if(p.route.shouldRevalidate){let T=p.route.shouldRevalidate({currentUrl:new URL(o.pathname+o.search+o.hash,window.origin),currentParams:n[0]?.params||{},nextUrl:new URL(i,window.origin),nextParams:p.params,defaultShouldRevalidate:!0});if(typeof T=="boolean")return T}return!0}):[]}function xw(i,e,{includeHydrateFallback:n}={}){return Iw(i.map(s=>{let o=e.routes[s.route.id];if(!o)return[];let u=[o.module];return o.clientActionModule&&(u=u.concat(o.clientActionModule)),o.clientLoaderModule&&(u=u.concat(o.clientLoaderModule)),n&&o.hydrateFallbackModule&&(u=u.concat(o.hydrateFallbackModule)),o.imports&&(u=u.concat(o.imports)),u}).flat(1))}function Iw(i){return[...new Set(i)]}function Dw(i){let e={},n=Object.keys(i).sort();for(let s of n)e[s]=i[s];return e}function Nw(i,e){let n=new Set;return new Set(e),i.reduce((s,o)=>{let u=JSON.stringify(Dw(o));return n.has(u)||(n.add(u),s.push({key:u,link:o})),s},[])}function XE(){let i=k.useContext(Ao);return Sp(i,"You must render this element inside a <DataRouterContext.Provider> element"),i}function Ow(){let i=k.useContext($h);return Sp(i,"You must render this element inside a <DataRouterStateContext.Provider> element"),i}var Ap=k.createContext(void 0);Ap.displayName="FrameworkContext";function WE(){let i=k.useContext(Ap);return Sp(i,"You must render this element inside a <HydratedRouter> element"),i}function Mw(i,e){let n=k.useContext(Ap),[s,o]=k.useState(!1),[u,f]=k.useState(!1),{onFocus:m,onBlur:p,onMouseEnter:g,onMouseLeave:E,onTouchStart:T}=e,R=k.useRef(null);k.useEffect(()=>{if(i==="render"&&f(!0),i==="viewport"){let Q=$=>{$.forEach(X=>{f(X.isIntersecting)})},q=new IntersectionObserver(Q,{threshold:.5});return R.current&&q.observe(R.current),()=>{q.disconnect()}}},[i]),k.useEffect(()=>{if(s){let Q=setTimeout(()=>{f(!0)},100);return()=>{clearTimeout(Q)}}},[s]);let O=()=>{o(!0)},j=()=>{o(!1),f(!1)};return n?i!=="intent"?[u,R,{}]:[u,R,{onFocus:Bl(m,O),onBlur:Bl(p,j),onMouseEnter:Bl(g,O),onMouseLeave:Bl(E,j),onTouchStart:Bl(T,O)}]:[!1,R,{}]}function Bl(i,e){return n=>{i&&i(n),n.defaultPrevented||e(n)}}function Vw({page:i,...e}){let{router:n}=XE(),s=k.useMemo(()=>PE(n.routes,i,n.basename),[n.routes,i,n.basename]);return s?k.createElement(Pw,{page:i,matches:s,...e}):null}function kw(i){let{manifest:e,routeModules:n}=WE(),[s,o]=k.useState([]);return k.useEffect(()=>{let u=!1;return Cw(i,e,n).then(f=>{u||o(f)}),()=>{u=!0}},[i,e,n]),s}function Pw({page:i,matches:e,...n}){let s=Ss(),{manifest:o,routeModules:u}=WE(),{basename:f}=XE(),{loaderData:m,matches:p}=Ow(),g=k.useMemo(()=>a0(i,e,p,o,s,"data"),[i,e,p,o,s]),E=k.useMemo(()=>a0(i,e,p,o,s,"assets"),[i,e,p,o,s]),T=k.useMemo(()=>{if(i===s.pathname+s.search+s.hash)return[];let j=new Set,Q=!1;if(e.forEach($=>{let X=o.routes[$.route.id];!X||!X.hasLoader||(!g.some(ee=>ee.route.id===$.route.id)&&$.route.id in m&&u[$.route.id]?.shouldRevalidate||X.hasClientLoader?Q=!0:j.add($.route.id))}),j.size===0)return[];let q=Aw(i,f,"data");return Q&&j.size>0&&q.searchParams.set("_routes",e.filter($=>j.has($.route.id)).map($=>$.route.id).join(",")),[q.pathname+q.search]},[f,m,s,o,g,e,i,u]),R=k.useMemo(()=>xw(E,o),[E,o]),O=kw(E);return k.createElement(k.Fragment,null,T.map(j=>k.createElement("link",{key:j,rel:"prefetch",as:"fetch",href:j,...n})),R.map(j=>k.createElement("link",{key:j,rel:"modulepreload",href:j,...n})),O.map(({key:j,link:Q})=>k.createElement("link",{key:j,nonce:n.nonce,...Q})))}function Lw(...i){return e=>{i.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var Uw=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{Uw&&(window.__reactRouterVersion="7.11.0")}catch{}function jw({basename:i,children:e,unstable_useTransitions:n,window:s}){let o=k.useRef();o.current==null&&(o.current=yA({window:s,v5Compat:!0}));let u=o.current,[f,m]=k.useState({action:u.action,location:u.location}),p=k.useCallback(g=>{n===!1?m(g):k.startTransition(()=>m(g))},[n]);return k.useLayoutEffect(()=>u.listen(p),[u,p]),k.createElement(mw,{basename:i,children:e,location:f.location,navigationType:f.action,navigator:u,unstable_useTransitions:n})}var JE=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,ZE=k.forwardRef(function({onClick:e,discover:n="render",prefetch:s="none",relative:o,reloadDocument:u,replace:f,state:m,target:p,to:g,preventScrollReset:E,viewTransition:T,unstable_defaultShouldRevalidate:R,...O},j){let{basename:Q,unstable_useTransitions:q}=k.useContext(jn),$=typeof g=="string"&&JE.test(g),X=BE(g,Q);g=X.to;let ee=WA(g,{relative:o}),[de,pe,Ee]=Mw(s,O),x=Hw(g,{replace:f,state:m,target:p,preventScrollReset:E,relative:o,viewTransition:T,unstable_defaultShouldRevalidate:R,unstable_useTransitions:q});function C(D){e&&e(D),D.defaultPrevented||x(D)}let w=k.createElement("a",{...O,...Ee,href:X.absoluteURL||ee,onClick:X.isExternal||u?e:C,ref:Lw(j,pe),target:p,"data-discover":!$&&n==="render"?"true":void 0});return de&&!$?k.createElement(k.Fragment,null,w,k.createElement(Vw,{page:ee})):w});ZE.displayName="Link";var zw=k.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:s="",end:o=!1,style:u,to:f,viewTransition:m,children:p,...g},E){let T=fu(f,{relative:g.relative}),R=Ss(),O=k.useContext($h),{navigator:j,basename:Q}=k.useContext(jn),q=O!=null&&Kw(T)&&m===!0,$=j.encodeLocation?j.encodeLocation(T).pathname:T.pathname,X=R.pathname,ee=O&&O.navigation&&O.navigation.location?O.navigation.location.pathname:null;n||(X=X.toLowerCase(),ee=ee?ee.toLowerCase():null,$=$.toLowerCase()),ee&&Q&&(ee=Ti(ee,Q)||ee);const de=$!=="/"&&$.endsWith("/")?$.length-1:$.length;let pe=X===$||!o&&X.startsWith($)&&X.charAt(de)==="/",Ee=ee!=null&&(ee===$||!o&&ee.startsWith($)&&ee.charAt($.length)==="/"),x={isActive:pe,isPending:Ee,isTransitioning:q},C=pe?e:void 0,w;typeof s=="function"?w=s(x):w=[s,pe?"active":null,Ee?"pending":null,q?"transitioning":null].filter(Boolean).join(" ");let D=typeof u=="function"?u(x):u;return k.createElement(ZE,{...g,"aria-current":C,className:w,ref:E,style:D,to:f,viewTransition:m},typeof p=="function"?p(x):p)});zw.displayName="NavLink";var Bw=k.forwardRef(({discover:i="render",fetcherKey:e,navigate:n,reloadDocument:s,replace:o,state:u,method:f=mh,action:m,onSubmit:p,relative:g,preventScrollReset:E,viewTransition:T,unstable_defaultShouldRevalidate:R,...O},j)=>{let{unstable_useTransitions:Q}=k.useContext(jn),q=Qw(),$=Yw(m,{relative:g}),X=f.toLowerCase()==="get"?"get":"post",ee=typeof m=="string"&&JE.test(m),de=pe=>{if(p&&p(pe),pe.defaultPrevented)return;pe.preventDefault();let Ee=pe.nativeEvent.submitter,x=Ee?.getAttribute("formmethod")||f,C=()=>q(Ee||pe.currentTarget,{fetcherKey:e,method:x,navigate:n,replace:o,state:u,relative:g,preventScrollReset:E,viewTransition:T,unstable_defaultShouldRevalidate:R});Q&&n!==!1?k.startTransition(()=>C()):C()};return k.createElement("form",{ref:j,method:X,action:$,onSubmit:s?p:de,...O,"data-discover":!ee&&i==="render"?"true":void 0})});Bw.displayName="Form";function qw(i){return`${i} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function eT(i){let e=k.useContext(Ao);return mt(e,qw(i)),e}function Hw(i,{target:e,replace:n,state:s,preventScrollReset:o,relative:u,viewTransition:f,unstable_defaultShouldRevalidate:m,unstable_useTransitions:p}={}){let g=Ro(),E=Ss(),T=fu(i,{relative:u});return k.useCallback(R=>{if(Ew(R,e)){R.preventDefault();let O=n!==void 0?n:eu(E)===eu(T),j=()=>g(i,{replace:O,state:s,preventScrollReset:o,relative:u,viewTransition:f,unstable_defaultShouldRevalidate:m});p?k.startTransition(()=>j()):j()}},[E,g,T,n,s,e,i,o,u,f,m,p])}var Fw=0,Gw=()=>`__${String(++Fw)}__`;function Qw(){let{router:i}=eT("useSubmit"),{basename:e}=k.useContext(jn),n=uw(),s=i.fetch,o=i.navigate;return k.useCallback(async(u,f={})=>{let{action:m,method:p,encType:g,formData:E,body:T}=Sw(u,e);if(f.navigate===!1){let R=f.fetcherKey||Gw();await s(R,n,f.action||m,{unstable_defaultShouldRevalidate:f.unstable_defaultShouldRevalidate,preventScrollReset:f.preventScrollReset,formData:E,body:T,formMethod:f.method||p,formEncType:f.encType||g,flushSync:f.flushSync})}else await o(f.action||m,{unstable_defaultShouldRevalidate:f.unstable_defaultShouldRevalidate,preventScrollReset:f.preventScrollReset,formData:E,body:T,formMethod:f.method||p,formEncType:f.encType||g,replace:f.replace,state:f.state,fromRouteId:n,flushSync:f.flushSync,viewTransition:f.viewTransition})},[s,o,e,n])}function Yw(i,{relative:e}={}){let{basename:n}=k.useContext(jn),s=k.useContext(vr);mt(s,"useFormAction must be used inside a RouteContext");let[o]=s.matches.slice(-1),u={...fu(i||".",{relative:e})},f=Ss();if(i==null){u.search=f.search;let m=new URLSearchParams(u.search),p=m.getAll("index");if(p.some(E=>E==="")){m.delete("index"),p.filter(T=>T).forEach(T=>m.append("index",T));let E=m.toString();u.search=E?`?${E}`:""}}return(!i||i===".")&&o.route.index&&(u.search=u.search?u.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(u.pathname=u.pathname==="/"?n:_i([n,u.pathname])),eu(u)}function Kw(i,{relative:e}={}){let n=k.useContext(HE);mt(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:s}=eT("useViewTransitionState"),o=fu(i,{relative:e});if(!n.isTransitioning)return!1;let u=Ti(n.currentLocation.pathname,s)||n.currentLocation.pathname,f=Ti(n.nextLocation.pathname,s)||n.nextLocation.pathname;return Ch(o.pathname,f)!=null||Ch(o.pathname,u)!=null}const $w=()=>{};var o0={};const tT=function(i){const e=[];let n=0;for(let s=0;s<i.length;s++){let o=i.charCodeAt(s);o<128?e[n++]=o:o<2048?(e[n++]=o>>6|192,e[n++]=o&63|128):(o&64512)===55296&&s+1<i.length&&(i.charCodeAt(s+1)&64512)===56320?(o=65536+((o&1023)<<10)+(i.charCodeAt(++s)&1023),e[n++]=o>>18|240,e[n++]=o>>12&63|128,e[n++]=o>>6&63|128,e[n++]=o&63|128):(e[n++]=o>>12|224,e[n++]=o>>6&63|128,e[n++]=o&63|128)}return e},Xw=function(i){const e=[];let n=0,s=0;for(;n<i.length;){const o=i[n++];if(o<128)e[s++]=String.fromCharCode(o);else if(o>191&&o<224){const u=i[n++];e[s++]=String.fromCharCode((o&31)<<6|u&63)}else if(o>239&&o<365){const u=i[n++],f=i[n++],m=i[n++],p=((o&7)<<18|(u&63)<<12|(f&63)<<6|m&63)-65536;e[s++]=String.fromCharCode(55296+(p>>10)),e[s++]=String.fromCharCode(56320+(p&1023))}else{const u=i[n++],f=i[n++];e[s++]=String.fromCharCode((o&15)<<12|(u&63)<<6|f&63)}}return e.join("")},nT={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(i,e){if(!Array.isArray(i))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let o=0;o<i.length;o+=3){const u=i[o],f=o+1<i.length,m=f?i[o+1]:0,p=o+2<i.length,g=p?i[o+2]:0,E=u>>2,T=(u&3)<<4|m>>4;let R=(m&15)<<2|g>>6,O=g&63;p||(O=64,f||(R=64)),s.push(n[E],n[T],n[R],n[O])}return s.join("")},encodeString(i,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(i):this.encodeByteArray(tT(i),e)},decodeString(i,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(i):Xw(this.decodeStringToByteArray(i,e))},decodeStringToByteArray(i,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let o=0;o<i.length;){const u=n[i.charAt(o++)],m=o<i.length?n[i.charAt(o)]:0;++o;const g=o<i.length?n[i.charAt(o)]:64;++o;const T=o<i.length?n[i.charAt(o)]:64;if(++o,u==null||m==null||g==null||T==null)throw new Ww;const R=u<<2|m>>4;if(s.push(R),g!==64){const O=m<<4&240|g>>2;if(s.push(O),T!==64){const j=g<<6&192|T;s.push(j)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let i=0;i<this.ENCODED_VALS.length;i++)this.byteToCharMap_[i]=this.ENCODED_VALS.charAt(i),this.charToByteMap_[this.byteToCharMap_[i]]=i,this.byteToCharMapWebSafe_[i]=this.ENCODED_VALS_WEBSAFE.charAt(i),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[i]]=i,i>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(i)]=i,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(i)]=i)}}};class Ww extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Jw=function(i){const e=tT(i);return nT.encodeByteArray(e,!0)},xh=function(i){return Jw(i).replace(/\./g,"")},rT=function(i){try{return nT.decodeString(i,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function Zw(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const eR=()=>Zw().__FIREBASE_DEFAULTS__,tR=()=>{if(typeof process>"u"||typeof o0>"u")return;const i=o0.__FIREBASE_DEFAULTS__;if(i)return JSON.parse(i)},nR=()=>{if(typeof document>"u")return;let i;try{i=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=i&&rT(i[1]);return e&&JSON.parse(e)},Wh=()=>{try{return $w()||eR()||tR()||nR()}catch(i){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${i}`);return}},iT=i=>Wh()?.emulatorHosts?.[i],rR=i=>{const e=iT(i);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),s]:[e.substring(0,n),s]},sT=()=>Wh()?.config,aT=i=>Wh()?.[`_${i}`];class iR{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,s)=>{n?this.reject(n):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,s))}}}function Co(i){try{return(i.startsWith("http://")||i.startsWith("https://")?new URL(i).hostname:i).endsWith(".cloudworkstations.dev")}catch{return!1}}async function oT(i){return(await fetch(i,{credentials:"include"})).ok}function sR(i,e){if(i.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},s=e||"demo-project",o=i.iat||0,u=i.sub||i.user_id;if(!u)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const f={iss:`https://securetoken.google.com/${s}`,aud:s,iat:o,exp:o+3600,auth_time:o,sub:u,user_id:u,firebase:{sign_in_provider:"custom",identities:{}},...i};return[xh(JSON.stringify(n)),xh(JSON.stringify(f)),""].join(".")}const Yl={};function aR(){const i={prod:[],emulator:[]};for(const e of Object.keys(Yl))Yl[e]?i.emulator.push(e):i.prod.push(e);return i}function oR(i){let e=document.getElementById(i),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",i),n=!0),{created:n,element:e}}let l0=!1;function lT(i,e){if(typeof window>"u"||typeof document>"u"||!Co(window.location.host)||Yl[i]===e||Yl[i]||l0)return;Yl[i]=e;function n(R){return`__firebase__banner__${R}`}const s="__firebase__banner",u=aR().prod.length>0;function f(){const R=document.getElementById(s);R&&R.remove()}function m(R){R.style.display="flex",R.style.background="#7faaf0",R.style.position="fixed",R.style.bottom="5px",R.style.left="5px",R.style.padding=".5em",R.style.borderRadius="5px",R.style.alignItems="center"}function p(R,O){R.setAttribute("width","24"),R.setAttribute("id",O),R.setAttribute("height","24"),R.setAttribute("viewBox","0 0 24 24"),R.setAttribute("fill","none"),R.style.marginLeft="-6px"}function g(){const R=document.createElement("span");return R.style.cursor="pointer",R.style.marginLeft="16px",R.style.fontSize="24px",R.innerHTML=" &times;",R.onclick=()=>{l0=!0,f()},R}function E(R,O){R.setAttribute("id",O),R.innerText="Learn more",R.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",R.setAttribute("target","__blank"),R.style.paddingLeft="5px",R.style.textDecoration="underline"}function T(){const R=oR(s),O=n("text"),j=document.getElementById(O)||document.createElement("span"),Q=n("learnmore"),q=document.getElementById(Q)||document.createElement("a"),$=n("preprendIcon"),X=document.getElementById($)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(R.created){const ee=R.element;m(ee),E(q,Q);const de=g();p(X,$),ee.append(X,j,q,de),document.body.appendChild(ee)}u?(j.innerText="Preview backend disconnected.",X.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(X.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,j.innerText="Preview backend running in this workspace."),j.setAttribute("id",O)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",T):T()}function cn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function lR(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(cn())}function uR(){const i=Wh()?.forceEnvironment;if(i==="node")return!0;if(i==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function cR(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function hR(){const i=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof i=="object"&&i.id!==void 0}function fR(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function dR(){const i=cn();return i.indexOf("MSIE ")>=0||i.indexOf("Trident/")>=0}function mR(){return!uR()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function pR(){try{return typeof indexedDB=="object"}catch{return!1}}function gR(){return new Promise((i,e)=>{try{let n=!0;const s="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(s);o.onsuccess=()=>{o.result.close(),n||self.indexedDB.deleteDatabase(s),i(!0)},o.onupgradeneeded=()=>{n=!1},o.onerror=()=>{e(o.error?.message||"")}}catch(n){e(n)}})}const yR="FirebaseError";class Ri extends Error{constructor(e,n,s){super(n),this.code=e,this.customData=s,this.name=yR,Object.setPrototypeOf(this,Ri.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,du.prototype.create)}}class du{constructor(e,n,s){this.service=e,this.serviceName=n,this.errors=s}create(e,...n){const s=n[0]||{},o=`${this.service}/${e}`,u=this.errors[e],f=u?vR(u,s):"Error",m=`${this.serviceName}: ${f} (${o}).`;return new Ri(o,m,s)}}function vR(i,e){return i.replace(_R,(n,s)=>{const o=e[s];return o!=null?String(o):`<${s}?>`})}const _R=/\{\$([^}]+)}/g;function ER(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}function la(i,e){if(i===e)return!0;const n=Object.keys(i),s=Object.keys(e);for(const o of n){if(!s.includes(o))return!1;const u=i[o],f=e[o];if(u0(u)&&u0(f)){if(!la(u,f))return!1}else if(u!==f)return!1}for(const o of s)if(!n.includes(o))return!1;return!0}function u0(i){return i!==null&&typeof i=="object"}function mu(i){const e=[];for(const[n,s]of Object.entries(i))Array.isArray(s)?s.forEach(o=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}function TR(i,e){const n=new bR(i,e);return n.subscribe.bind(n)}class bR{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(s=>{this.error(s)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,s){let o;if(e===void 0&&n===void 0&&s===void 0)throw new Error("Missing Observer.");SR(e,["next","error","complete"])?o=e:o={next:e,error:n,complete:s},o.next===void 0&&(o.next=Dm),o.error===void 0&&(o.error=Dm),o.complete===void 0&&(o.complete=Dm);const u=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),u}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function SR(i,e){if(typeof i!="object"||i===null)return!1;for(const n of e)if(n in i&&typeof i[n]=="function")return!0;return!1}function Dm(){}function zt(i){return i&&i._delegate?i._delegate:i}class ua{constructor(e,n,s){this.name=e,this.instanceFactory=n,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const na="[DEFAULT]";class AR{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const s=new iR;if(this.instancesDeferred.set(n,s),this.isInitialized(n)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:n});o&&s.resolve(o)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e?.identifier),s=e?.optional??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(o){if(s)return null;throw o}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(RR(e))try{this.getOrInitializeService({instanceIdentifier:na})}catch{}for(const[n,s]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(n);try{const u=this.getOrInitializeService({instanceIdentifier:o});s.resolve(u)}catch{}}}}clearInstance(e=na){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=na){return this.instances.has(e)}getOptions(e=na){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:s,options:n});for(const[u,f]of this.instancesDeferred.entries()){const m=this.normalizeInstanceIdentifier(u);s===m&&f.resolve(o)}return o}onInit(e,n){const s=this.normalizeInstanceIdentifier(n),o=this.onInitCallbacks.get(s)??new Set;o.add(e),this.onInitCallbacks.set(s,o);const u=this.instances.get(s);return u&&e(u,s),()=>{o.delete(e)}}invokeOnInitCallbacks(e,n){const s=this.onInitCallbacks.get(n);if(s)for(const o of s)try{o(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:wR(e),options:n}),this.instances.set(e,s),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=na){return this.component?this.component.multipleInstances?e:na:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function wR(i){return i===na?void 0:i}function RR(i){return i.instantiationMode==="EAGER"}class CR{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new AR(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}var ze;(function(i){i[i.DEBUG=0]="DEBUG",i[i.VERBOSE=1]="VERBOSE",i[i.INFO=2]="INFO",i[i.WARN=3]="WARN",i[i.ERROR=4]="ERROR",i[i.SILENT=5]="SILENT"})(ze||(ze={}));const xR={debug:ze.DEBUG,verbose:ze.VERBOSE,info:ze.INFO,warn:ze.WARN,error:ze.ERROR,silent:ze.SILENT},IR=ze.INFO,DR={[ze.DEBUG]:"log",[ze.VERBOSE]:"log",[ze.INFO]:"info",[ze.WARN]:"warn",[ze.ERROR]:"error"},NR=(i,e,...n)=>{if(e<i.logLevel)return;const s=new Date().toISOString(),o=DR[e];if(o)console[o](`[${s}]  ${i.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class wp{constructor(e){this.name=e,this._logLevel=IR,this._logHandler=NR,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ze))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?xR[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ze.DEBUG,...e),this._logHandler(this,ze.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ze.VERBOSE,...e),this._logHandler(this,ze.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ze.INFO,...e),this._logHandler(this,ze.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ze.WARN,...e),this._logHandler(this,ze.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ze.ERROR,...e),this._logHandler(this,ze.ERROR,...e)}}const OR=(i,e)=>e.some(n=>i instanceof n);let c0,h0;function MR(){return c0||(c0=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function VR(){return h0||(h0=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const uT=new WeakMap,Qm=new WeakMap,cT=new WeakMap,Nm=new WeakMap,Rp=new WeakMap;function kR(i){const e=new Promise((n,s)=>{const o=()=>{i.removeEventListener("success",u),i.removeEventListener("error",f)},u=()=>{n(hs(i.result)),o()},f=()=>{s(i.error),o()};i.addEventListener("success",u),i.addEventListener("error",f)});return e.then(n=>{n instanceof IDBCursor&&uT.set(n,i)}).catch(()=>{}),Rp.set(e,i),e}function PR(i){if(Qm.has(i))return;const e=new Promise((n,s)=>{const o=()=>{i.removeEventListener("complete",u),i.removeEventListener("error",f),i.removeEventListener("abort",f)},u=()=>{n(),o()},f=()=>{s(i.error||new DOMException("AbortError","AbortError")),o()};i.addEventListener("complete",u),i.addEventListener("error",f),i.addEventListener("abort",f)});Qm.set(i,e)}let Ym={get(i,e,n){if(i instanceof IDBTransaction){if(e==="done")return Qm.get(i);if(e==="objectStoreNames")return i.objectStoreNames||cT.get(i);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return hs(i[e])},set(i,e,n){return i[e]=n,!0},has(i,e){return i instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in i}};function LR(i){Ym=i(Ym)}function UR(i){return i===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const s=i.call(Om(this),e,...n);return cT.set(s,e.sort?e.sort():[e]),hs(s)}:VR().includes(i)?function(...e){return i.apply(Om(this),e),hs(uT.get(this))}:function(...e){return hs(i.apply(Om(this),e))}}function jR(i){return typeof i=="function"?UR(i):(i instanceof IDBTransaction&&PR(i),OR(i,MR())?new Proxy(i,Ym):i)}function hs(i){if(i instanceof IDBRequest)return kR(i);if(Nm.has(i))return Nm.get(i);const e=jR(i);return e!==i&&(Nm.set(i,e),Rp.set(e,i)),e}const Om=i=>Rp.get(i);function zR(i,e,{blocked:n,upgrade:s,blocking:o,terminated:u}={}){const f=indexedDB.open(i,e),m=hs(f);return s&&f.addEventListener("upgradeneeded",p=>{s(hs(f.result),p.oldVersion,p.newVersion,hs(f.transaction),p)}),n&&f.addEventListener("blocked",p=>n(p.oldVersion,p.newVersion,p)),m.then(p=>{u&&p.addEventListener("close",()=>u()),o&&p.addEventListener("versionchange",g=>o(g.oldVersion,g.newVersion,g))}).catch(()=>{}),m}const BR=["get","getKey","getAll","getAllKeys","count"],qR=["put","add","delete","clear"],Mm=new Map;function f0(i,e){if(!(i instanceof IDBDatabase&&!(e in i)&&typeof e=="string"))return;if(Mm.get(e))return Mm.get(e);const n=e.replace(/FromIndex$/,""),s=e!==n,o=qR.includes(n);if(!(n in(s?IDBIndex:IDBObjectStore).prototype)||!(o||BR.includes(n)))return;const u=async function(f,...m){const p=this.transaction(f,o?"readwrite":"readonly");let g=p.store;return s&&(g=g.index(m.shift())),(await Promise.all([g[n](...m),o&&p.done]))[0]};return Mm.set(e,u),u}LR(i=>({...i,get:(e,n,s)=>f0(e,n)||i.get(e,n,s),has:(e,n)=>!!f0(e,n)||i.has(e,n)}));class HR{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(FR(n)){const s=n.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(n=>n).join(" ")}}function FR(i){return i.getComponent()?.type==="VERSION"}const Km="@firebase/app",d0="0.14.6";const bi=new wp("@firebase/app"),GR="@firebase/app-compat",QR="@firebase/analytics-compat",YR="@firebase/analytics",KR="@firebase/app-check-compat",$R="@firebase/app-check",XR="@firebase/auth",WR="@firebase/auth-compat",JR="@firebase/database",ZR="@firebase/data-connect",eC="@firebase/database-compat",tC="@firebase/functions",nC="@firebase/functions-compat",rC="@firebase/installations",iC="@firebase/installations-compat",sC="@firebase/messaging",aC="@firebase/messaging-compat",oC="@firebase/performance",lC="@firebase/performance-compat",uC="@firebase/remote-config",cC="@firebase/remote-config-compat",hC="@firebase/storage",fC="@firebase/storage-compat",dC="@firebase/firestore",mC="@firebase/ai",pC="@firebase/firestore-compat",gC="firebase",yC="12.6.0";const $m="[DEFAULT]",vC={[Km]:"fire-core",[GR]:"fire-core-compat",[YR]:"fire-analytics",[QR]:"fire-analytics-compat",[$R]:"fire-app-check",[KR]:"fire-app-check-compat",[XR]:"fire-auth",[WR]:"fire-auth-compat",[JR]:"fire-rtdb",[ZR]:"fire-data-connect",[eC]:"fire-rtdb-compat",[tC]:"fire-fn",[nC]:"fire-fn-compat",[rC]:"fire-iid",[iC]:"fire-iid-compat",[sC]:"fire-fcm",[aC]:"fire-fcm-compat",[oC]:"fire-perf",[lC]:"fire-perf-compat",[uC]:"fire-rc",[cC]:"fire-rc-compat",[hC]:"fire-gcs",[fC]:"fire-gcs-compat",[dC]:"fire-fst",[pC]:"fire-fst-compat",[mC]:"fire-vertex","fire-js":"fire-js",[gC]:"fire-js-all"};const Ih=new Map,_C=new Map,Xm=new Map;function m0(i,e){try{i.container.addComponent(e)}catch(n){bi.debug(`Component ${e.name} failed to register with FirebaseApp ${i.name}`,n)}}function mo(i){const e=i.name;if(Xm.has(e))return bi.debug(`There were multiple attempts to register component ${e}.`),!1;Xm.set(e,i);for(const n of Ih.values())m0(n,i);for(const n of _C.values())m0(n,i);return!0}function Cp(i,e){const n=i.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),i.container.getProvider(e)}function dr(i){return i==null?!1:i.settings!==void 0}const EC={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},fs=new du("app","Firebase",EC);class TC{constructor(e,n,s){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new ua("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw fs.create("app-deleted",{appName:this._name})}}const xo=yC;function hT(i,e={}){let n=i;typeof e!="object"&&(e={name:e});const s={name:$m,automaticDataCollectionEnabled:!0,...e},o=s.name;if(typeof o!="string"||!o)throw fs.create("bad-app-name",{appName:String(o)});if(n||(n=sT()),!n)throw fs.create("no-options");const u=Ih.get(o);if(u){if(la(n,u.options)&&la(s,u.config))return u;throw fs.create("duplicate-app",{appName:o})}const f=new CR(o);for(const p of Xm.values())f.addComponent(p);const m=new TC(n,s,f);return Ih.set(o,m),m}function fT(i=$m){const e=Ih.get(i);if(!e&&i===$m&&sT())return hT();if(!e)throw fs.create("no-app",{appName:i});return e}function ds(i,e,n){let s=vC[i]??i;n&&(s+=`-${n}`);const o=s.match(/\s|\//),u=e.match(/\s|\//);if(o||u){const f=[`Unable to register library "${s}" with version "${e}":`];o&&f.push(`library name "${s}" contains illegal characters (whitespace or "/")`),o&&u&&f.push("and"),u&&f.push(`version name "${e}" contains illegal characters (whitespace or "/")`),bi.warn(f.join(" "));return}mo(new ua(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}const bC="firebase-heartbeat-database",SC=1,tu="firebase-heartbeat-store";let Vm=null;function dT(){return Vm||(Vm=zR(bC,SC,{upgrade:(i,e)=>{switch(e){case 0:try{i.createObjectStore(tu)}catch(n){console.warn(n)}}}}).catch(i=>{throw fs.create("idb-open",{originalErrorMessage:i.message})})),Vm}async function AC(i){try{const n=(await dT()).transaction(tu),s=await n.objectStore(tu).get(mT(i));return await n.done,s}catch(e){if(e instanceof Ri)bi.warn(e.message);else{const n=fs.create("idb-get",{originalErrorMessage:e?.message});bi.warn(n.message)}}}async function p0(i,e){try{const s=(await dT()).transaction(tu,"readwrite");await s.objectStore(tu).put(e,mT(i)),await s.done}catch(n){if(n instanceof Ri)bi.warn(n.message);else{const s=fs.create("idb-set",{originalErrorMessage:n?.message});bi.warn(s.message)}}}function mT(i){return`${i.name}!${i.options.appId}`}const wC=1024,RC=30;class CC{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new IC(n),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=g0();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:n}),this._heartbeatsCache.heartbeats.length>RC){const o=DC(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){bi.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=g0(),{heartbeatsToSend:n,unsentEntries:s}=xC(this._heartbeatsCache.heartbeats),o=xh(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(e){return bi.warn(e),""}}}function g0(){return new Date().toISOString().substring(0,10)}function xC(i,e=wC){const n=[];let s=i.slice();for(const o of i){const u=n.find(f=>f.agent===o.agent);if(u){if(u.dates.push(o.date),y0(n)>e){u.dates.pop();break}}else if(n.push({agent:o.agent,dates:[o.date]}),y0(n)>e){n.pop();break}s=s.slice(1)}return{heartbeatsToSend:n,unsentEntries:s}}class IC{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return pR()?gR().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await AC(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return p0(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return p0(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function y0(i){return xh(JSON.stringify({version:2,heartbeats:i})).length}function DC(i){if(i.length===0)return-1;let e=0,n=i[0].date;for(let s=1;s<i.length;s++)i[s].date<n&&(n=i[s].date,e=s);return e}function NC(i){mo(new ua("platform-logger",e=>new HR(e),"PRIVATE")),mo(new ua("heartbeat",e=>new CC(e),"PRIVATE")),ds(Km,d0,i),ds(Km,d0,"esm2020"),ds("fire-js","")}NC("");function pT(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const OC=pT,gT=new du("auth","Firebase",pT());const Dh=new wp("@firebase/auth");function MC(i,...e){Dh.logLevel<=ze.WARN&&Dh.warn(`Auth (${xo}): ${i}`,...e)}function gh(i,...e){Dh.logLevel<=ze.ERROR&&Dh.error(`Auth (${xo}): ${i}`,...e)}function Qr(i,...e){throw Ip(i,...e)}function gr(i,...e){return Ip(i,...e)}function xp(i,e,n){const s={...OC(),[e]:n};return new du("auth","Firebase",s).create(e,{appName:i.name})}function aa(i){return xp(i,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function VC(i,e,n){const s=n;if(!(e instanceof s))throw s.name!==e.constructor.name&&Qr(i,"argument-error"),xp(i,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Ip(i,...e){if(typeof i!="string"){const n=e[0],s=[...e.slice(1)];return s[0]&&(s[0].appName=i.name),i._errorFactory.create(n,...s)}return gT.create(i,...e)}function xe(i,e,...n){if(!i)throw Ip(e,...n)}function yi(i){const e="INTERNAL ASSERTION FAILED: "+i;throw gh(e),new Error(e)}function Si(i,e){i||yi(e)}function Wm(){return typeof self<"u"&&self.location?.href||""}function kC(){return v0()==="http:"||v0()==="https:"}function v0(){return typeof self<"u"&&self.location?.protocol||null}function PC(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(kC()||hR()||"connection"in navigator)?navigator.onLine:!0}function LC(){if(typeof navigator>"u")return null;const i=navigator;return i.languages&&i.languages[0]||i.language||null}class pu{constructor(e,n){this.shortDelay=e,this.longDelay=n,Si(n>e,"Short delay should be less than long delay!"),this.isMobile=lR()||fR()}get(){return PC()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Dp(i,e){Si(i.emulator,"Emulator should always be set here");const{url:n}=i.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}class yT{static initialize(e,n,s){this.fetchImpl=e,n&&(this.headersImpl=n),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;yi("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;yi("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;yi("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const UC={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const jC=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],zC=new pu(3e4,6e4);function Np(i,e){return i.tenantId&&!e.tenantId?{...e,tenantId:i.tenantId}:e}async function Io(i,e,n,s,o={}){return vT(i,o,async()=>{let u={},f={};s&&(e==="GET"?f=s:u={body:JSON.stringify(s)});const m=mu({key:i.config.apiKey,...f}).slice(1),p=await i._getAdditionalHeaders();p["Content-Type"]="application/json",i.languageCode&&(p["X-Firebase-Locale"]=i.languageCode);const g={method:e,headers:p,...u};return cR()||(g.referrerPolicy="no-referrer"),i.emulatorConfig&&Co(i.emulatorConfig.host)&&(g.credentials="include"),yT.fetch()(await _T(i,i.config.apiHost,n,m),g)})}async function vT(i,e,n){i._canInitEmulator=!1;const s={...UC,...e};try{const o=new qC(i),u=await Promise.race([n(),o.promise]);o.clearNetworkTimeout();const f=await u.json();if("needConfirmation"in f)throw ah(i,"account-exists-with-different-credential",f);if(u.ok&&!("errorMessage"in f))return f;{const m=u.ok?f.errorMessage:f.error.message,[p,g]=m.split(" : ");if(p==="FEDERATED_USER_ID_ALREADY_LINKED")throw ah(i,"credential-already-in-use",f);if(p==="EMAIL_EXISTS")throw ah(i,"email-already-in-use",f);if(p==="USER_DISABLED")throw ah(i,"user-disabled",f);const E=s[p]||p.toLowerCase().replace(/[_\s]+/g,"-");if(g)throw xp(i,E,g);Qr(i,E)}}catch(o){if(o instanceof Ri)throw o;Qr(i,"network-request-failed",{message:String(o)})}}async function BC(i,e,n,s,o={}){const u=await Io(i,e,n,s,o);return"mfaPendingCredential"in u&&Qr(i,"multi-factor-auth-required",{_serverResponse:u}),u}async function _T(i,e,n,s){const o=`${e}${n}?${s}`,u=i,f=u.config.emulator?Dp(i.config,o):`${i.config.apiScheme}://${o}`;return jC.includes(n)&&(await u._persistenceManagerAvailable,u._getPersistenceType()==="COOKIE")?u._getPersistence()._getFinalTarget(f).toString():f}class qC{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,s)=>{this.timer=setTimeout(()=>s(gr(this.auth,"network-request-failed")),zC.get())})}}function ah(i,e,n){const s={appName:i.name};n.email&&(s.email=n.email),n.phoneNumber&&(s.phoneNumber=n.phoneNumber);const o=gr(i,e,s);return o.customData._tokenResponse=n,o}async function HC(i,e){return Io(i,"POST","/v1/accounts:delete",e)}async function Nh(i,e){return Io(i,"POST","/v1/accounts:lookup",e)}function Kl(i){if(i)try{const e=new Date(Number(i));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function FC(i,e=!1){const n=zt(i),s=await n.getIdToken(e),o=Op(s);xe(o&&o.exp&&o.auth_time&&o.iat,n.auth,"internal-error");const u=typeof o.firebase=="object"?o.firebase:void 0,f=u?.sign_in_provider;return{claims:o,token:s,authTime:Kl(km(o.auth_time)),issuedAtTime:Kl(km(o.iat)),expirationTime:Kl(km(o.exp)),signInProvider:f||null,signInSecondFactor:u?.sign_in_second_factor||null}}function km(i){return Number(i)*1e3}function Op(i){const[e,n,s]=i.split(".");if(e===void 0||n===void 0||s===void 0)return gh("JWT malformed, contained fewer than 3 sections"),null;try{const o=rT(n);return o?JSON.parse(o):(gh("Failed to decode base64 JWT payload"),null)}catch(o){return gh("Caught error parsing JWT payload as JSON",o?.toString()),null}}function _0(i){const e=Op(i);return xe(e,"internal-error"),xe(typeof e.exp<"u","internal-error"),xe(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function nu(i,e,n=!1){if(n)return e;try{return await e}catch(s){throw s instanceof Ri&&GC(s)&&i.auth.currentUser===i&&await i.auth.signOut(),s}}function GC({code:i}){return i==="auth/user-disabled"||i==="auth/user-token-expired"}class QC{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const s=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class Jm{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Kl(this.lastLoginAt),this.creationTime=Kl(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function Oh(i){const e=i.auth,n=await i.getIdToken(),s=await nu(i,Nh(e,{idToken:n}));xe(s?.users.length,e,"internal-error");const o=s.users[0];i._notifyReloadListener(o);const u=o.providerUserInfo?.length?ET(o.providerUserInfo):[],f=KC(i.providerData,u),m=i.isAnonymous,p=!(i.email&&o.passwordHash)&&!f?.length,g=m?p:!1,E={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:f,metadata:new Jm(o.createdAt,o.lastLoginAt),isAnonymous:g};Object.assign(i,E)}async function YC(i){const e=zt(i);await Oh(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function KC(i,e){return[...i.filter(s=>!e.some(o=>o.providerId===s.providerId)),...e]}function ET(i){return i.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}async function $C(i,e){const n=await vT(i,{},async()=>{const s=mu({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:u}=i.config,f=await _T(i,o,"/v1/token",`key=${u}`),m=await i._getAdditionalHeaders();m["Content-Type"]="application/x-www-form-urlencoded";const p={method:"POST",headers:m,body:s};return i.emulatorConfig&&Co(i.emulatorConfig.host)&&(p.credentials="include"),yT.fetch()(f,p)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function XC(i,e){return Io(i,"POST","/v2/accounts:revokeToken",Np(i,e))}class uo{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){xe(e.idToken,"internal-error"),xe(typeof e.idToken<"u","internal-error"),xe(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):_0(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){xe(e.length!==0,"internal-error");const n=_0(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(xe(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:s,refreshToken:o,expiresIn:u}=await $C(e,n);this.updateTokensAndExpiration(s,o,Number(u))}updateTokensAndExpiration(e,n,s){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(e,n){const{refreshToken:s,accessToken:o,expirationTime:u}=n,f=new uo;return s&&(xe(typeof s=="string","internal-error",{appName:e}),f.refreshToken=s),o&&(xe(typeof o=="string","internal-error",{appName:e}),f.accessToken=o),u&&(xe(typeof u=="number","internal-error",{appName:e}),f.expirationTime=u),f}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new uo,this.toJSON())}_performRefresh(){return yi("not implemented")}}function as(i,e){xe(typeof i=="string"||typeof i>"u","internal-error",{appName:e})}class mr{constructor({uid:e,auth:n,stsTokenManager:s,...o}){this.providerId="firebase",this.proactiveRefresh=new QC(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new Jm(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const n=await nu(this,this.stsTokenManager.getToken(this.auth,e));return xe(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return FC(this,e)}reload(){return YC(this)}_assign(e){this!==e&&(xe(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new mr({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){xe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let s=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),s=!0),n&&await Oh(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(dr(this.auth.app))return Promise.reject(aa(this.auth));const e=await this.getIdToken();return await nu(this,HC(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const s=n.displayName??void 0,o=n.email??void 0,u=n.phoneNumber??void 0,f=n.photoURL??void 0,m=n.tenantId??void 0,p=n._redirectEventId??void 0,g=n.createdAt??void 0,E=n.lastLoginAt??void 0,{uid:T,emailVerified:R,isAnonymous:O,providerData:j,stsTokenManager:Q}=n;xe(T&&Q,e,"internal-error");const q=uo.fromJSON(this.name,Q);xe(typeof T=="string",e,"internal-error"),as(s,e.name),as(o,e.name),xe(typeof R=="boolean",e,"internal-error"),xe(typeof O=="boolean",e,"internal-error"),as(u,e.name),as(f,e.name),as(m,e.name),as(p,e.name),as(g,e.name),as(E,e.name);const $=new mr({uid:T,auth:e,email:o,emailVerified:R,displayName:s,isAnonymous:O,photoURL:f,phoneNumber:u,tenantId:m,stsTokenManager:q,createdAt:g,lastLoginAt:E});return j&&Array.isArray(j)&&($.providerData=j.map(X=>({...X}))),p&&($._redirectEventId=p),$}static async _fromIdTokenResponse(e,n,s=!1){const o=new uo;o.updateFromServerResponse(n);const u=new mr({uid:n.localId,auth:e,stsTokenManager:o,isAnonymous:s});return await Oh(u),u}static async _fromGetAccountInfoResponse(e,n,s){const o=n.users[0];xe(o.localId!==void 0,"internal-error");const u=o.providerUserInfo!==void 0?ET(o.providerUserInfo):[],f=!(o.email&&o.passwordHash)&&!u?.length,m=new uo;m.updateFromIdToken(s);const p=new mr({uid:o.localId,auth:e,stsTokenManager:m,isAnonymous:f}),g={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:u,metadata:new Jm(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!u?.length};return Object.assign(p,g),p}}const E0=new Map;function vi(i){Si(i instanceof Function,"Expected a class definition");let e=E0.get(i);return e?(Si(e instanceof i,"Instance stored in cache mismatched with class"),e):(e=new i,E0.set(i,e),e)}class TT{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}TT.type="NONE";const T0=TT;function yh(i,e,n){return`firebase:${i}:${e}:${n}`}class co{constructor(e,n,s){this.persistence=e,this.auth=n,this.userKey=s;const{config:o,name:u}=this.auth;this.fullUserKey=yh(this.userKey,o.apiKey,u),this.fullPersistenceKey=yh("persistence",o.apiKey,u),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await Nh(this.auth,{idToken:e}).catch(()=>{});return n?mr._fromGetAccountInfoResponse(this.auth,n,e):null}return mr._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,s="authUser"){if(!n.length)return new co(vi(T0),e,s);const o=(await Promise.all(n.map(async g=>{if(await g._isAvailable())return g}))).filter(g=>g);let u=o[0]||vi(T0);const f=yh(s,e.config.apiKey,e.name);let m=null;for(const g of n)try{const E=await g._get(f);if(E){let T;if(typeof E=="string"){const R=await Nh(e,{idToken:E}).catch(()=>{});if(!R)break;T=await mr._fromGetAccountInfoResponse(e,R,E)}else T=mr._fromJSON(e,E);g!==u&&(m=T),u=g;break}}catch{}const p=o.filter(g=>g._shouldAllowMigration);return!u._shouldAllowMigration||!p.length?new co(u,e,s):(u=p[0],m&&await u._set(f,m.toJSON()),await Promise.all(n.map(async g=>{if(g!==u)try{await g._remove(f)}catch{}})),new co(u,e,s))}}function b0(i){const e=i.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(wT(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(bT(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(CT(e))return"Blackberry";if(xT(e))return"Webos";if(ST(e))return"Safari";if((e.includes("chrome/")||AT(e))&&!e.includes("edge/"))return"Chrome";if(RT(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=i.match(n);if(s?.length===2)return s[1]}return"Other"}function bT(i=cn()){return/firefox\//i.test(i)}function ST(i=cn()){const e=i.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function AT(i=cn()){return/crios\//i.test(i)}function wT(i=cn()){return/iemobile/i.test(i)}function RT(i=cn()){return/android/i.test(i)}function CT(i=cn()){return/blackberry/i.test(i)}function xT(i=cn()){return/webos/i.test(i)}function Mp(i=cn()){return/iphone|ipad|ipod/i.test(i)||/macintosh/i.test(i)&&/mobile/i.test(i)}function WC(i=cn()){return Mp(i)&&!!window.navigator?.standalone}function JC(){return dR()&&document.documentMode===10}function IT(i=cn()){return Mp(i)||RT(i)||xT(i)||CT(i)||/windows phone/i.test(i)||wT(i)}function DT(i,e=[]){let n;switch(i){case"Browser":n=b0(cn());break;case"Worker":n=`${b0(cn())}-${i}`;break;default:n=i}const s=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${xo}/${s}`}class ZC{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const s=u=>new Promise((f,m)=>{try{const p=e(u);f(p)}catch(p){m(p)}});s.onAbort=n,this.queue.push(s);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const s of this.queue)await s(e),s.onAbort&&n.push(s.onAbort)}catch(s){n.reverse();for(const o of n)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s?.message})}}}async function ex(i,e={}){return Io(i,"GET","/v2/passwordPolicy",Np(i,e))}const tx=6;class nx{constructor(e){const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??tx,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const s=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;s&&(n.meetsMinPasswordLength=e.length>=s),o&&(n.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let s;for(let o=0;o<e.length;o++)s=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(n,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(e,n,s,o,u){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=u))}}class rx{constructor(e,n,s,o){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=s,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new S0(this),this.idTokenSubscription=new S0(this),this.beforeStateQueue=new ZC(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=gT,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(u=>this._resolvePersistenceManagerAvailable=u)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=vi(n)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await co.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Nh(this,{idToken:e}),s=await mr._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(s)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(dr(this.app)){const u=this.app.settings.authIdToken;return u?new Promise(f=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(u).then(f,f))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let s=n,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const u=this.redirectUser?._redirectEventId,f=s?._redirectEventId,m=await this.tryRedirectSignIn(e);(!u||u===f)&&m?.user&&(s=m.user,o=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(s)}catch(u){s=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(u))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return xe(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Oh(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=LC()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(dr(this.app))return Promise.reject(aa(this));const n=e?zt(e):null;return n&&xe(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&xe(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return dr(this.app)?Promise.reject(aa(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return dr(this.app)?Promise.reject(aa(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(vi(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await ex(this),n=new nx(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new du("auth","Firebase",e())}onAuthStateChanged(e,n,s){return this.registerStateListener(this.authStateSubscription,e,n,s)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,s){return this.registerStateListener(this.idTokenSubscription,e,n,s)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const s=this.onAuthStateChanged(()=>{s(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(s.tenantId=this.tenantId),await XC(this,s)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,n){const s=await this.getOrInitRedirectPersistenceManager(n);return e===null?s.removeCurrentUser():s.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&vi(e)||this._popupRedirectResolver;xe(n,this,"argument-error"),this.redirectPersistenceManager=await co.create(this,[vi(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,s,o){if(this._deleted)return()=>{};const u=typeof n=="function"?n:n.next.bind(n);let f=!1;const m=this._isInitialized?Promise.resolve():this._initializationPromise;if(xe(m,this,"internal-error"),m.then(()=>{f||u(this.currentUser)}),typeof n=="function"){const p=e.addObserver(n,s,o);return()=>{f=!0,p()}}else{const p=e.addObserver(n);return()=>{f=!0,p()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return xe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=DT(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();n&&(e["X-Firebase-Client"]=n);const s=await this._getAppCheckToken();return s&&(e["X-Firebase-AppCheck"]=s),e}async _getAppCheckToken(){if(dr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&MC(`Error while retrieving App Check token: ${e.error}`),e?.token}}function Jh(i){return zt(i)}class S0{constructor(e){this.auth=e,this.observer=null,this.addObserver=TR(n=>this.observer=n)}get next(){return xe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let Vp={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function ix(i){Vp=i}function sx(i){return Vp.loadJS(i)}function ax(){return Vp.gapiScript}function ox(i){return`__${i}${Math.floor(Math.random()*1e6)}`}function lx(i,e){const n=Cp(i,"auth");if(n.isInitialized()){const o=n.getImmediate(),u=n.getOptions();if(la(u,e??{}))return o;Qr(o,"already-initialized")}return n.initialize({options:e})}function ux(i,e){const n=e?.persistence||[],s=(Array.isArray(n)?n:[n]).map(vi);e?.errorMap&&i._updateErrorMap(e.errorMap),i._initializeWithPersistence(s,e?.popupRedirectResolver)}function cx(i,e,n){const s=Jh(i);xe(/^https?:\/\//.test(e),s,"invalid-emulator-scheme");const o=!1,u=NT(e),{host:f,port:m}=hx(e),p=m===null?"":`:${m}`,g={url:`${u}//${f}${p}/`},E=Object.freeze({host:f,port:m,protocol:u.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!s._canInitEmulator){xe(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),xe(la(g,s.config.emulator)&&la(E,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=g,s.emulatorConfig=E,s.settings.appVerificationDisabledForTesting=!0,Co(f)?(oT(`${u}//${f}${p}`),lT("Auth",!0)):fx()}function NT(i){const e=i.indexOf(":");return e<0?"":i.substr(0,e+1)}function hx(i){const e=NT(i),n=/(\/\/)?([^?#/]+)/.exec(i.substr(e.length));if(!n)return{host:"",port:null};const s=n[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(s);if(o){const u=o[1];return{host:u,port:A0(s.substr(u.length+1))}}else{const[u,f]=s.split(":");return{host:u,port:A0(f)}}}function A0(i){if(!i)return null;const e=Number(i);return isNaN(e)?null:e}function fx(){function i(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",i):i())}class OT{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return yi("not implemented")}_getIdTokenResponse(e){return yi("not implemented")}_linkToIdToken(e,n){return yi("not implemented")}_getReauthenticationResolver(e){return yi("not implemented")}}async function ho(i,e){return BC(i,"POST","/v1/accounts:signInWithIdp",Np(i,e))}const dx="http://localhost";class ca extends OT{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new ca(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Qr("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:s,signInMethod:o,...u}=n;if(!s||!o)return null;const f=new ca(s,o);return f.idToken=u.idToken||void 0,f.accessToken=u.accessToken||void 0,f.secret=u.secret,f.nonce=u.nonce,f.pendingToken=u.pendingToken||null,f}_getIdTokenResponse(e){const n=this.buildRequest();return ho(e,n)}_linkToIdToken(e,n){const s=this.buildRequest();return s.idToken=n,ho(e,s)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,ho(e,n)}buildRequest(){const e={requestUri:dx,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=mu(n)}return e}}class kp{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class gu extends kp{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class os extends gu{constructor(){super("facebook.com")}static credential(e){return ca._fromParams({providerId:os.PROVIDER_ID,signInMethod:os.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return os.credentialFromTaggedObject(e)}static credentialFromError(e){return os.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return os.credential(e.oauthAccessToken)}catch{return null}}}os.FACEBOOK_SIGN_IN_METHOD="facebook.com";os.PROVIDER_ID="facebook.com";class gi extends gu{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return ca._fromParams({providerId:gi.PROVIDER_ID,signInMethod:gi.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return gi.credentialFromTaggedObject(e)}static credentialFromError(e){return gi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:s}=e;if(!n&&!s)return null;try{return gi.credential(n,s)}catch{return null}}}gi.GOOGLE_SIGN_IN_METHOD="google.com";gi.PROVIDER_ID="google.com";class ls extends gu{constructor(){super("github.com")}static credential(e){return ca._fromParams({providerId:ls.PROVIDER_ID,signInMethod:ls.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ls.credentialFromTaggedObject(e)}static credentialFromError(e){return ls.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ls.credential(e.oauthAccessToken)}catch{return null}}}ls.GITHUB_SIGN_IN_METHOD="github.com";ls.PROVIDER_ID="github.com";class us extends gu{constructor(){super("twitter.com")}static credential(e,n){return ca._fromParams({providerId:us.PROVIDER_ID,signInMethod:us.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return us.credentialFromTaggedObject(e)}static credentialFromError(e){return us.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:s}=e;if(!n||!s)return null;try{return us.credential(n,s)}catch{return null}}}us.TWITTER_SIGN_IN_METHOD="twitter.com";us.PROVIDER_ID="twitter.com";class po{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,s,o=!1){const u=await mr._fromIdTokenResponse(e,s,o),f=w0(s);return new po({user:u,providerId:f,_tokenResponse:s,operationType:n})}static async _forOperation(e,n,s){await e._updateTokensIfNecessary(s,!0);const o=w0(s);return new po({user:e,providerId:o,_tokenResponse:s,operationType:n})}}function w0(i){return i.providerId?i.providerId:"phoneNumber"in i?"phone":null}class Mh extends Ri{constructor(e,n,s,o){super(n.code,n.message),this.operationType=s,this.user=o,Object.setPrototypeOf(this,Mh.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(e,n,s,o){return new Mh(e,n,s,o)}}function MT(i,e,n,s){return(e==="reauthenticate"?n._getReauthenticationResolver(i):n._getIdTokenResponse(i)).catch(u=>{throw u.code==="auth/multi-factor-auth-required"?Mh._fromErrorAndOperation(i,u,e,s):u})}async function mx(i,e,n=!1){const s=await nu(i,e._linkToIdToken(i.auth,await i.getIdToken()),n);return po._forOperation(i,"link",s)}async function px(i,e,n=!1){const{auth:s}=i;if(dr(s.app))return Promise.reject(aa(s));const o="reauthenticate";try{const u=await nu(i,MT(s,o,e,i),n);xe(u.idToken,s,"internal-error");const f=Op(u.idToken);xe(f,s,"internal-error");const{sub:m}=f;return xe(i.uid===m,s,"user-mismatch"),po._forOperation(i,o,u)}catch(u){throw u?.code==="auth/user-not-found"&&Qr(s,"user-mismatch"),u}}async function gx(i,e,n=!1){if(dr(i.app))return Promise.reject(aa(i));const s="signIn",o=await MT(i,s,e),u=await po._fromIdTokenResponse(i,s,o);return n||await i._updateCurrentUser(u.user),u}function yx(i,e,n,s){return zt(i).onIdTokenChanged(e,n,s)}function vx(i,e,n){return zt(i).beforeAuthStateChanged(e,n)}function _x(i,e,n,s){return zt(i).onAuthStateChanged(e,n,s)}function Ex(i){return zt(i).signOut()}const Vh="__sak";class VT{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Vh,"1"),this.storage.removeItem(Vh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const Tx=1e3,bx=10;class kT extends VT{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=IT(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const s=this.storage.getItem(n),o=this.localCache[n];s!==o&&e(n,o,s)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((f,m,p)=>{this.notifyListeners(f,p)});return}const s=e.key;n?this.detachListener():this.stopPolling();const o=()=>{const f=this.storage.getItem(s);!n&&this.localCache[s]===f||this.notifyListeners(s,f)},u=this.storage.getItem(s);JC()&&u!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,bx):o()}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const o of Array.from(s))o(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:s}),!0)})},Tx)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}kT.type="LOCAL";const Sx=kT;class PT extends VT{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}PT.type="SESSION";const LT=PT;function Ax(i){return Promise.all(i.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}class Zh{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(o=>o.isListeningto(e));if(n)return n;const s=new Zh(e);return this.receivers.push(s),s}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:s,eventType:o,data:u}=n.data,f=this.handlersMap[o];if(!f?.size)return;n.ports[0].postMessage({status:"ack",eventId:s,eventType:o});const m=Array.from(f).map(async g=>g(n.origin,u)),p=await Ax(m);n.ports[0].postMessage({status:"done",eventId:s,eventType:o,response:p})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Zh.receivers=[];function Pp(i="",e=10){let n="";for(let s=0;s<e;s++)n+=Math.floor(Math.random()*10);return i+n}class wx{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,s=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let u,f;return new Promise((m,p)=>{const g=Pp("",20);o.port1.start();const E=setTimeout(()=>{p(new Error("unsupported_event"))},s);f={messageChannel:o,onMessage(T){const R=T;if(R.data.eventId===g)switch(R.data.status){case"ack":clearTimeout(E),u=setTimeout(()=>{p(new Error("timeout"))},3e3);break;case"done":clearTimeout(u),m(R.data.response);break;default:clearTimeout(E),clearTimeout(u),p(new Error("invalid_response"));break}}},this.handlers.add(f),o.port1.addEventListener("message",f.onMessage),this.target.postMessage({eventType:e,eventId:g,data:n},[o.port2])}).finally(()=>{f&&this.removeMessageHandler(f)})}}function Br(){return window}function Rx(i){Br().location.href=i}function UT(){return typeof Br().WorkerGlobalScope<"u"&&typeof Br().importScripts=="function"}async function Cx(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function xx(){return navigator?.serviceWorker?.controller||null}function Ix(){return UT()?self:null}const jT="firebaseLocalStorageDb",Dx=1,kh="firebaseLocalStorage",zT="fbase_key";class yu{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function ef(i,e){return i.transaction([kh],e?"readwrite":"readonly").objectStore(kh)}function Nx(){const i=indexedDB.deleteDatabase(jT);return new yu(i).toPromise()}function Zm(){const i=indexedDB.open(jT,Dx);return new Promise((e,n)=>{i.addEventListener("error",()=>{n(i.error)}),i.addEventListener("upgradeneeded",()=>{const s=i.result;try{s.createObjectStore(kh,{keyPath:zT})}catch(o){n(o)}}),i.addEventListener("success",async()=>{const s=i.result;s.objectStoreNames.contains(kh)?e(s):(s.close(),await Nx(),e(await Zm()))})})}async function R0(i,e,n){const s=ef(i,!0).put({[zT]:e,value:n});return new yu(s).toPromise()}async function Ox(i,e){const n=ef(i,!1).get(e),s=await new yu(n).toPromise();return s===void 0?null:s.value}function C0(i,e){const n=ef(i,!0).delete(e);return new yu(n).toPromise()}const Mx=800,Vx=3;class BT{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Zm(),this.db)}async _withRetries(e){let n=0;for(;;)try{const s=await this._openDb();return await e(s)}catch(s){if(n++>Vx)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return UT()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Zh._getInstance(Ix()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await Cx(),!this.activeServiceWorker)return;this.sender=new wx(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||xx()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Zm();return await R0(e,Vh,"1"),await C0(e,Vh),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(s=>R0(s,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(s=>Ox(s,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>C0(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const u=ef(o,!1).getAll();return new yu(u).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],s=new Set;if(e.length!==0)for(const{fbase_key:o,value:u}of e)s.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(u)&&(this.notifyListeners(o,u),n.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!s.has(o)&&(this.notifyListeners(o,null),n.push(o));return n}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const o of Array.from(s))o(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),Mx)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}BT.type="LOCAL";const kx=BT;new pu(3e4,6e4);function qT(i,e){return e?vi(e):(xe(i._popupRedirectResolver,i,"argument-error"),i._popupRedirectResolver)}class Lp extends OT{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return ho(e,this._buildIdpRequest())}_linkToIdToken(e,n){return ho(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return ho(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function Px(i){return gx(i.auth,new Lp(i),i.bypassAuthState)}function Lx(i){const{auth:e,user:n}=i;return xe(n,e,"internal-error"),px(n,new Lp(i),i.bypassAuthState)}async function Ux(i){const{auth:e,user:n}=i;return xe(n,e,"internal-error"),mx(n,new Lp(i),i.bypassAuthState)}class HT{constructor(e,n,s,o,u=!1){this.auth=e,this.resolver=s,this.user=o,this.bypassAuthState=u,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:s,postBody:o,tenantId:u,error:f,type:m}=e;if(f){this.reject(f);return}const p={auth:this.auth,requestUri:n,sessionId:s,tenantId:u||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(m)(p))}catch(g){this.reject(g)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Px;case"linkViaPopup":case"linkViaRedirect":return Ux;case"reauthViaPopup":case"reauthViaRedirect":return Lx;default:Qr(this.auth,"internal-error")}}resolve(e){Si(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Si(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const jx=new pu(2e3,1e4);async function zx(i,e,n){if(dr(i.app))return Promise.reject(gr(i,"operation-not-supported-in-this-environment"));const s=Jh(i);VC(i,e,kp);const o=qT(s,n);return new ra(s,"signInViaPopup",e,o).executeNotNull()}class ra extends HT{constructor(e,n,s,o,u){super(e,n,o,u),this.provider=s,this.authWindow=null,this.pollId=null,ra.currentPopupAction&&ra.currentPopupAction.cancel(),ra.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return xe(e,this.auth,"internal-error"),e}async onExecution(){Si(this.filter.length===1,"Popup operations only handle one event");const e=Pp();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(gr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(gr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ra.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(gr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,jx.get())};e()}}ra.currentPopupAction=null;const Bx="pendingRedirect",vh=new Map;class qx extends HT{constructor(e,n,s=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,s),this.eventId=null}async execute(){let e=vh.get(this.auth._key());if(!e){try{const s=await Hx(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(s)}catch(n){e=()=>Promise.reject(n)}vh.set(this.auth._key(),e)}return this.bypassAuthState||vh.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function Hx(i,e){const n=Qx(e),s=Gx(i);if(!await s._isAvailable())return!1;const o=await s._get(n)==="true";return await s._remove(n),o}function Fx(i,e){vh.set(i._key(),e)}function Gx(i){return vi(i._redirectPersistence)}function Qx(i){return yh(Bx,i.config.apiKey,i.name)}async function Yx(i,e,n=!1){if(dr(i.app))return Promise.reject(aa(i));const s=Jh(i),o=qT(s,e),f=await new qx(s,o,n).execute();return f&&!n&&(delete f.user._redirectEventId,await s._persistUserIfCurrent(f.user),await s._setRedirectUser(null,e)),f}const Kx=600*1e3;class $x{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(e,s)&&(n=!0,this.sendToConsumer(e,s),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!Xx(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){if(e.error&&!FT(e)){const s=e.error.code?.split("auth/")[1]||"internal-error";n.onError(gr(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const s=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&s}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=Kx&&this.cachedEventUids.clear(),this.cachedEventUids.has(x0(e))}saveEventToCache(e){this.cachedEventUids.add(x0(e)),this.lastProcessedEventTime=Date.now()}}function x0(i){return[i.type,i.eventId,i.sessionId,i.tenantId].filter(e=>e).join("-")}function FT({type:i,error:e}){return i==="unknown"&&e?.code==="auth/no-auth-event"}function Xx(i){switch(i.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return FT(i);default:return!1}}async function Wx(i,e={}){return Io(i,"GET","/v1/projects",e)}const Jx=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Zx=/^https?/;async function eI(i){if(i.config.emulator)return;const{authorizedDomains:e}=await Wx(i);for(const n of e)try{if(tI(n))return}catch{}Qr(i,"unauthorized-domain")}function tI(i){const e=Wm(),{protocol:n,hostname:s}=new URL(e);if(i.startsWith("chrome-extension://")){const f=new URL(i);return f.hostname===""&&s===""?n==="chrome-extension:"&&i.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&f.hostname===s}if(!Zx.test(n))return!1;if(Jx.test(i))return s===i;const o=i.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(s)}const nI=new pu(3e4,6e4);function I0(){const i=Br().___jsl;if(i?.H){for(const e of Object.keys(i.H))if(i.H[e].r=i.H[e].r||[],i.H[e].L=i.H[e].L||[],i.H[e].r=[...i.H[e].L],i.CP)for(let n=0;n<i.CP.length;n++)i.CP[n]=null}}function rI(i){return new Promise((e,n)=>{function s(){I0(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{I0(),n(gr(i,"network-request-failed"))},timeout:nI.get()})}if(Br().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(Br().gapi?.load)s();else{const o=ox("iframefcb");return Br()[o]=()=>{gapi.load?s():n(gr(i,"network-request-failed"))},sx(`${ax()}?onload=${o}`).catch(u=>n(u))}}).catch(e=>{throw _h=null,e})}let _h=null;function iI(i){return _h=_h||rI(i),_h}const sI=new pu(5e3,15e3),aI="__/auth/iframe",oI="emulator/auth/iframe",lI={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},uI=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function cI(i){const e=i.config;xe(e.authDomain,i,"auth-domain-config-required");const n=e.emulator?Dp(e,oI):`https://${i.config.authDomain}/${aI}`,s={apiKey:e.apiKey,appName:i.name,v:xo},o=uI.get(i.config.apiHost);o&&(s.eid=o);const u=i._getFrameworks();return u.length&&(s.fw=u.join(",")),`${n}?${mu(s).slice(1)}`}async function hI(i){const e=await iI(i),n=Br().gapi;return xe(n,i,"internal-error"),e.open({where:document.body,url:cI(i),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:lI,dontclear:!0},s=>new Promise(async(o,u)=>{await s.restyle({setHideOnLeave:!1});const f=gr(i,"network-request-failed"),m=Br().setTimeout(()=>{u(f)},sI.get());function p(){Br().clearTimeout(m),o(s)}s.ping(p).then(p,()=>{u(f)})}))}const fI={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},dI=500,mI=600,pI="_blank",gI="http://localhost";class D0{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function yI(i,e,n,s=dI,o=mI){const u=Math.max((window.screen.availHeight-o)/2,0).toString(),f=Math.max((window.screen.availWidth-s)/2,0).toString();let m="";const p={...fI,width:s.toString(),height:o.toString(),top:u,left:f},g=cn().toLowerCase();n&&(m=AT(g)?pI:n),bT(g)&&(e=e||gI,p.scrollbars="yes");const E=Object.entries(p).reduce((R,[O,j])=>`${R}${O}=${j},`,"");if(WC(g)&&m!=="_self")return vI(e||"",m),new D0(null);const T=window.open(e||"",m,E);xe(T,i,"popup-blocked");try{T.focus()}catch{}return new D0(T)}function vI(i,e){const n=document.createElement("a");n.href=i,n.target=e;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(s)}const _I="__/auth/handler",EI="emulator/auth/handler",TI=encodeURIComponent("fac");async function N0(i,e,n,s,o,u){xe(i.config.authDomain,i,"auth-domain-config-required"),xe(i.config.apiKey,i,"invalid-api-key");const f={apiKey:i.config.apiKey,appName:i.name,authType:n,redirectUrl:s,v:xo,eventId:o};if(e instanceof kp){e.setDefaultLanguage(i.languageCode),f.providerId=e.providerId||"",ER(e.getCustomParameters())||(f.customParameters=JSON.stringify(e.getCustomParameters()));for(const[E,T]of Object.entries({}))f[E]=T}if(e instanceof gu){const E=e.getScopes().filter(T=>T!=="");E.length>0&&(f.scopes=E.join(","))}i.tenantId&&(f.tid=i.tenantId);const m=f;for(const E of Object.keys(m))m[E]===void 0&&delete m[E];const p=await i._getAppCheckToken(),g=p?`#${TI}=${encodeURIComponent(p)}`:"";return`${bI(i)}?${mu(m).slice(1)}${g}`}function bI({config:i}){return i.emulator?Dp(i,EI):`https://${i.authDomain}/${_I}`}const Pm="webStorageSupport";class SI{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=LT,this._completeRedirectFn=Yx,this._overrideRedirectResult=Fx}async _openPopup(e,n,s,o){Si(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const u=await N0(e,n,s,Wm(),o);return yI(e,u,Pp())}async _openRedirect(e,n,s,o){await this._originValidation(e);const u=await N0(e,n,s,Wm(),o);return Rx(u),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:o,promise:u}=this.eventManagers[n];return o?Promise.resolve(o):(Si(u,"If manager is not set, promise should be"),u)}const s=this.initAndGetManager(e);return this.eventManagers[n]={promise:s},s.catch(()=>{delete this.eventManagers[n]}),s}async initAndGetManager(e){const n=await hI(e),s=new $x(e);return n.register("authEvent",o=>(xe(o?.authEvent,e,"invalid-auth-event"),{status:s.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:s},this.iframes[e._key()]=n,s}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Pm,{type:Pm},o=>{const u=o?.[0]?.[Pm];u!==void 0&&n(!!u),Qr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=eI(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return IT()||ST()||Mp()}}const AI=SI;var O0="@firebase/auth",M0="1.12.0";class wI{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(s=>{e(s?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){xe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function RI(i){switch(i){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function CI(i){mo(new ua("auth",(e,{options:n})=>{const s=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),u=e.getProvider("app-check-internal"),{apiKey:f,authDomain:m}=s.options;xe(f&&!f.includes(":"),"invalid-api-key",{appName:s.name});const p={apiKey:f,authDomain:m,clientPlatform:i,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:DT(i)},g=new rx(s,o,u,p);return ux(g,n),g},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,s)=>{e.getProvider("auth-internal").initialize()})),mo(new ua("auth-internal",e=>{const n=Jh(e.getProvider("auth").getImmediate());return(s=>new wI(s))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),ds(O0,M0,RI(i)),ds(O0,M0,"esm2020")}const xI=300,II=aT("authIdTokenMaxAge")||xI;let V0=null;const DI=i=>async e=>{const n=e&&await e.getIdTokenResult(),s=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(s&&s>II)return;const o=n?.token;V0!==o&&(V0=o,await fetch(i,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function NI(i=fT()){const e=Cp(i,"auth");if(e.isInitialized())return e.getImmediate();const n=lx(i,{popupRedirectResolver:AI,persistence:[kx,Sx,LT]}),s=aT("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const u=new URL(s,location.origin);if(location.origin===u.origin){const f=DI(u.toString());vx(n,f,()=>f(n.currentUser)),yx(n,m=>f(m))}}const o=iT("auth");return o&&cx(n,`http://${o}`),n}function OI(){return document.getElementsByTagName("head")?.[0]??document}ix({loadJS(i){return new Promise((e,n)=>{const s=document.createElement("script");s.setAttribute("src",i),s.onload=e,s.onerror=o=>{const u=gr("internal-error");u.customData=o,n(u)},s.type="text/javascript",s.charset="UTF-8",OI().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});CI("Browser");var MI="firebase",VI="12.7.0";ds(MI,VI,"app");var k0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var ms,GT;(function(){var i;function e(x,C){function w(){}w.prototype=C.prototype,x.F=C.prototype,x.prototype=new w,x.prototype.constructor=x,x.D=function(D,M,U){for(var I=Array(arguments.length-2),oe=2;oe<arguments.length;oe++)I[oe-2]=arguments[oe];return C.prototype[M].apply(D,I)}}function n(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(s,n),s.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(x,C,w){w||(w=0);const D=Array(16);if(typeof C=="string")for(var M=0;M<16;++M)D[M]=C.charCodeAt(w++)|C.charCodeAt(w++)<<8|C.charCodeAt(w++)<<16|C.charCodeAt(w++)<<24;else for(M=0;M<16;++M)D[M]=C[w++]|C[w++]<<8|C[w++]<<16|C[w++]<<24;C=x.g[0],w=x.g[1],M=x.g[2];let U=x.g[3],I;I=C+(U^w&(M^U))+D[0]+3614090360&4294967295,C=w+(I<<7&4294967295|I>>>25),I=U+(M^C&(w^M))+D[1]+3905402710&4294967295,U=C+(I<<12&4294967295|I>>>20),I=M+(w^U&(C^w))+D[2]+606105819&4294967295,M=U+(I<<17&4294967295|I>>>15),I=w+(C^M&(U^C))+D[3]+3250441966&4294967295,w=M+(I<<22&4294967295|I>>>10),I=C+(U^w&(M^U))+D[4]+4118548399&4294967295,C=w+(I<<7&4294967295|I>>>25),I=U+(M^C&(w^M))+D[5]+1200080426&4294967295,U=C+(I<<12&4294967295|I>>>20),I=M+(w^U&(C^w))+D[6]+2821735955&4294967295,M=U+(I<<17&4294967295|I>>>15),I=w+(C^M&(U^C))+D[7]+4249261313&4294967295,w=M+(I<<22&4294967295|I>>>10),I=C+(U^w&(M^U))+D[8]+1770035416&4294967295,C=w+(I<<7&4294967295|I>>>25),I=U+(M^C&(w^M))+D[9]+2336552879&4294967295,U=C+(I<<12&4294967295|I>>>20),I=M+(w^U&(C^w))+D[10]+4294925233&4294967295,M=U+(I<<17&4294967295|I>>>15),I=w+(C^M&(U^C))+D[11]+2304563134&4294967295,w=M+(I<<22&4294967295|I>>>10),I=C+(U^w&(M^U))+D[12]+1804603682&4294967295,C=w+(I<<7&4294967295|I>>>25),I=U+(M^C&(w^M))+D[13]+4254626195&4294967295,U=C+(I<<12&4294967295|I>>>20),I=M+(w^U&(C^w))+D[14]+2792965006&4294967295,M=U+(I<<17&4294967295|I>>>15),I=w+(C^M&(U^C))+D[15]+1236535329&4294967295,w=M+(I<<22&4294967295|I>>>10),I=C+(M^U&(w^M))+D[1]+4129170786&4294967295,C=w+(I<<5&4294967295|I>>>27),I=U+(w^M&(C^w))+D[6]+3225465664&4294967295,U=C+(I<<9&4294967295|I>>>23),I=M+(C^w&(U^C))+D[11]+643717713&4294967295,M=U+(I<<14&4294967295|I>>>18),I=w+(U^C&(M^U))+D[0]+3921069994&4294967295,w=M+(I<<20&4294967295|I>>>12),I=C+(M^U&(w^M))+D[5]+3593408605&4294967295,C=w+(I<<5&4294967295|I>>>27),I=U+(w^M&(C^w))+D[10]+38016083&4294967295,U=C+(I<<9&4294967295|I>>>23),I=M+(C^w&(U^C))+D[15]+3634488961&4294967295,M=U+(I<<14&4294967295|I>>>18),I=w+(U^C&(M^U))+D[4]+3889429448&4294967295,w=M+(I<<20&4294967295|I>>>12),I=C+(M^U&(w^M))+D[9]+568446438&4294967295,C=w+(I<<5&4294967295|I>>>27),I=U+(w^M&(C^w))+D[14]+3275163606&4294967295,U=C+(I<<9&4294967295|I>>>23),I=M+(C^w&(U^C))+D[3]+4107603335&4294967295,M=U+(I<<14&4294967295|I>>>18),I=w+(U^C&(M^U))+D[8]+1163531501&4294967295,w=M+(I<<20&4294967295|I>>>12),I=C+(M^U&(w^M))+D[13]+2850285829&4294967295,C=w+(I<<5&4294967295|I>>>27),I=U+(w^M&(C^w))+D[2]+4243563512&4294967295,U=C+(I<<9&4294967295|I>>>23),I=M+(C^w&(U^C))+D[7]+1735328473&4294967295,M=U+(I<<14&4294967295|I>>>18),I=w+(U^C&(M^U))+D[12]+2368359562&4294967295,w=M+(I<<20&4294967295|I>>>12),I=C+(w^M^U)+D[5]+4294588738&4294967295,C=w+(I<<4&4294967295|I>>>28),I=U+(C^w^M)+D[8]+2272392833&4294967295,U=C+(I<<11&4294967295|I>>>21),I=M+(U^C^w)+D[11]+1839030562&4294967295,M=U+(I<<16&4294967295|I>>>16),I=w+(M^U^C)+D[14]+4259657740&4294967295,w=M+(I<<23&4294967295|I>>>9),I=C+(w^M^U)+D[1]+2763975236&4294967295,C=w+(I<<4&4294967295|I>>>28),I=U+(C^w^M)+D[4]+1272893353&4294967295,U=C+(I<<11&4294967295|I>>>21),I=M+(U^C^w)+D[7]+4139469664&4294967295,M=U+(I<<16&4294967295|I>>>16),I=w+(M^U^C)+D[10]+3200236656&4294967295,w=M+(I<<23&4294967295|I>>>9),I=C+(w^M^U)+D[13]+681279174&4294967295,C=w+(I<<4&4294967295|I>>>28),I=U+(C^w^M)+D[0]+3936430074&4294967295,U=C+(I<<11&4294967295|I>>>21),I=M+(U^C^w)+D[3]+3572445317&4294967295,M=U+(I<<16&4294967295|I>>>16),I=w+(M^U^C)+D[6]+76029189&4294967295,w=M+(I<<23&4294967295|I>>>9),I=C+(w^M^U)+D[9]+3654602809&4294967295,C=w+(I<<4&4294967295|I>>>28),I=U+(C^w^M)+D[12]+3873151461&4294967295,U=C+(I<<11&4294967295|I>>>21),I=M+(U^C^w)+D[15]+530742520&4294967295,M=U+(I<<16&4294967295|I>>>16),I=w+(M^U^C)+D[2]+3299628645&4294967295,w=M+(I<<23&4294967295|I>>>9),I=C+(M^(w|~U))+D[0]+4096336452&4294967295,C=w+(I<<6&4294967295|I>>>26),I=U+(w^(C|~M))+D[7]+1126891415&4294967295,U=C+(I<<10&4294967295|I>>>22),I=M+(C^(U|~w))+D[14]+2878612391&4294967295,M=U+(I<<15&4294967295|I>>>17),I=w+(U^(M|~C))+D[5]+4237533241&4294967295,w=M+(I<<21&4294967295|I>>>11),I=C+(M^(w|~U))+D[12]+1700485571&4294967295,C=w+(I<<6&4294967295|I>>>26),I=U+(w^(C|~M))+D[3]+2399980690&4294967295,U=C+(I<<10&4294967295|I>>>22),I=M+(C^(U|~w))+D[10]+4293915773&4294967295,M=U+(I<<15&4294967295|I>>>17),I=w+(U^(M|~C))+D[1]+2240044497&4294967295,w=M+(I<<21&4294967295|I>>>11),I=C+(M^(w|~U))+D[8]+1873313359&4294967295,C=w+(I<<6&4294967295|I>>>26),I=U+(w^(C|~M))+D[15]+4264355552&4294967295,U=C+(I<<10&4294967295|I>>>22),I=M+(C^(U|~w))+D[6]+2734768916&4294967295,M=U+(I<<15&4294967295|I>>>17),I=w+(U^(M|~C))+D[13]+1309151649&4294967295,w=M+(I<<21&4294967295|I>>>11),I=C+(M^(w|~U))+D[4]+4149444226&4294967295,C=w+(I<<6&4294967295|I>>>26),I=U+(w^(C|~M))+D[11]+3174756917&4294967295,U=C+(I<<10&4294967295|I>>>22),I=M+(C^(U|~w))+D[2]+718787259&4294967295,M=U+(I<<15&4294967295|I>>>17),I=w+(U^(M|~C))+D[9]+3951481745&4294967295,x.g[0]=x.g[0]+C&4294967295,x.g[1]=x.g[1]+(M+(I<<21&4294967295|I>>>11))&4294967295,x.g[2]=x.g[2]+M&4294967295,x.g[3]=x.g[3]+U&4294967295}s.prototype.v=function(x,C){C===void 0&&(C=x.length);const w=C-this.blockSize,D=this.C;let M=this.h,U=0;for(;U<C;){if(M==0)for(;U<=w;)o(this,x,U),U+=this.blockSize;if(typeof x=="string"){for(;U<C;)if(D[M++]=x.charCodeAt(U++),M==this.blockSize){o(this,D),M=0;break}}else for(;U<C;)if(D[M++]=x[U++],M==this.blockSize){o(this,D),M=0;break}}this.h=M,this.o+=C},s.prototype.A=function(){var x=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);x[0]=128;for(var C=1;C<x.length-8;++C)x[C]=0;C=this.o*8;for(var w=x.length-8;w<x.length;++w)x[w]=C&255,C/=256;for(this.v(x),x=Array(16),C=0,w=0;w<4;++w)for(let D=0;D<32;D+=8)x[C++]=this.g[w]>>>D&255;return x};function u(x,C){var w=m;return Object.prototype.hasOwnProperty.call(w,x)?w[x]:w[x]=C(x)}function f(x,C){this.h=C;const w=[];let D=!0;for(let M=x.length-1;M>=0;M--){const U=x[M]|0;D&&U==C||(w[M]=U,D=!1)}this.g=w}var m={};function p(x){return-128<=x&&x<128?u(x,function(C){return new f([C|0],C<0?-1:0)}):new f([x|0],x<0?-1:0)}function g(x){if(isNaN(x)||!isFinite(x))return T;if(x<0)return q(g(-x));const C=[];let w=1;for(let D=0;x>=w;D++)C[D]=x/w|0,w*=4294967296;return new f(C,0)}function E(x,C){if(x.length==0)throw Error("number format error: empty string");if(C=C||10,C<2||36<C)throw Error("radix out of range: "+C);if(x.charAt(0)=="-")return q(E(x.substring(1),C));if(x.indexOf("-")>=0)throw Error('number format error: interior "-" character');const w=g(Math.pow(C,8));let D=T;for(let U=0;U<x.length;U+=8){var M=Math.min(8,x.length-U);const I=parseInt(x.substring(U,U+M),C);M<8?(M=g(Math.pow(C,M)),D=D.j(M).add(g(I))):(D=D.j(w),D=D.add(g(I)))}return D}var T=p(0),R=p(1),O=p(16777216);i=f.prototype,i.m=function(){if(Q(this))return-q(this).m();let x=0,C=1;for(let w=0;w<this.g.length;w++){const D=this.i(w);x+=(D>=0?D:4294967296+D)*C,C*=4294967296}return x},i.toString=function(x){if(x=x||10,x<2||36<x)throw Error("radix out of range: "+x);if(j(this))return"0";if(Q(this))return"-"+q(this).toString(x);const C=g(Math.pow(x,6));var w=this;let D="";for(;;){const M=de(w,C).g;w=$(w,M.j(C));let U=((w.g.length>0?w.g[0]:w.h)>>>0).toString(x);if(w=M,j(w))return U+D;for(;U.length<6;)U="0"+U;D=U+D}},i.i=function(x){return x<0?0:x<this.g.length?this.g[x]:this.h};function j(x){if(x.h!=0)return!1;for(let C=0;C<x.g.length;C++)if(x.g[C]!=0)return!1;return!0}function Q(x){return x.h==-1}i.l=function(x){return x=$(this,x),Q(x)?-1:j(x)?0:1};function q(x){const C=x.g.length,w=[];for(let D=0;D<C;D++)w[D]=~x.g[D];return new f(w,~x.h).add(R)}i.abs=function(){return Q(this)?q(this):this},i.add=function(x){const C=Math.max(this.g.length,x.g.length),w=[];let D=0;for(let M=0;M<=C;M++){let U=D+(this.i(M)&65535)+(x.i(M)&65535),I=(U>>>16)+(this.i(M)>>>16)+(x.i(M)>>>16);D=I>>>16,U&=65535,I&=65535,w[M]=I<<16|U}return new f(w,w[w.length-1]&-2147483648?-1:0)};function $(x,C){return x.add(q(C))}i.j=function(x){if(j(this)||j(x))return T;if(Q(this))return Q(x)?q(this).j(q(x)):q(q(this).j(x));if(Q(x))return q(this.j(q(x)));if(this.l(O)<0&&x.l(O)<0)return g(this.m()*x.m());const C=this.g.length+x.g.length,w=[];for(var D=0;D<2*C;D++)w[D]=0;for(D=0;D<this.g.length;D++)for(let M=0;M<x.g.length;M++){const U=this.i(D)>>>16,I=this.i(D)&65535,oe=x.i(M)>>>16,he=x.i(M)&65535;w[2*D+2*M]+=I*he,X(w,2*D+2*M),w[2*D+2*M+1]+=U*he,X(w,2*D+2*M+1),w[2*D+2*M+1]+=I*oe,X(w,2*D+2*M+1),w[2*D+2*M+2]+=U*oe,X(w,2*D+2*M+2)}for(x=0;x<C;x++)w[x]=w[2*x+1]<<16|w[2*x];for(x=C;x<2*C;x++)w[x]=0;return new f(w,0)};function X(x,C){for(;(x[C]&65535)!=x[C];)x[C+1]+=x[C]>>>16,x[C]&=65535,C++}function ee(x,C){this.g=x,this.h=C}function de(x,C){if(j(C))throw Error("division by zero");if(j(x))return new ee(T,T);if(Q(x))return C=de(q(x),C),new ee(q(C.g),q(C.h));if(Q(C))return C=de(x,q(C)),new ee(q(C.g),C.h);if(x.g.length>30){if(Q(x)||Q(C))throw Error("slowDivide_ only works with positive integers.");for(var w=R,D=C;D.l(x)<=0;)w=pe(w),D=pe(D);var M=Ee(w,1),U=Ee(D,1);for(D=Ee(D,2),w=Ee(w,2);!j(D);){var I=U.add(D);I.l(x)<=0&&(M=M.add(w),U=I),D=Ee(D,1),w=Ee(w,1)}return C=$(x,M.j(C)),new ee(M,C)}for(M=T;x.l(C)>=0;){for(w=Math.max(1,Math.floor(x.m()/C.m())),D=Math.ceil(Math.log(w)/Math.LN2),D=D<=48?1:Math.pow(2,D-48),U=g(w),I=U.j(C);Q(I)||I.l(x)>0;)w-=D,U=g(w),I=U.j(C);j(U)&&(U=R),M=M.add(U),x=$(x,I)}return new ee(M,x)}i.B=function(x){return de(this,x).h},i.and=function(x){const C=Math.max(this.g.length,x.g.length),w=[];for(let D=0;D<C;D++)w[D]=this.i(D)&x.i(D);return new f(w,this.h&x.h)},i.or=function(x){const C=Math.max(this.g.length,x.g.length),w=[];for(let D=0;D<C;D++)w[D]=this.i(D)|x.i(D);return new f(w,this.h|x.h)},i.xor=function(x){const C=Math.max(this.g.length,x.g.length),w=[];for(let D=0;D<C;D++)w[D]=this.i(D)^x.i(D);return new f(w,this.h^x.h)};function pe(x){const C=x.g.length+1,w=[];for(let D=0;D<C;D++)w[D]=x.i(D)<<1|x.i(D-1)>>>31;return new f(w,x.h)}function Ee(x,C){const w=C>>5;C%=32;const D=x.g.length-w,M=[];for(let U=0;U<D;U++)M[U]=C>0?x.i(U+w)>>>C|x.i(U+w+1)<<32-C:x.i(U+w);return new f(M,x.h)}s.prototype.digest=s.prototype.A,s.prototype.reset=s.prototype.u,s.prototype.update=s.prototype.v,GT=s,f.prototype.add=f.prototype.add,f.prototype.multiply=f.prototype.j,f.prototype.modulo=f.prototype.B,f.prototype.compare=f.prototype.l,f.prototype.toNumber=f.prototype.m,f.prototype.toString=f.prototype.toString,f.prototype.getBits=f.prototype.i,f.fromNumber=g,f.fromString=E,ms=f}).apply(typeof k0<"u"?k0:typeof self<"u"?self:typeof window<"u"?window:{});var oh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var QT,ql,YT,Eh,ep,KT,$T,XT;(function(){var i,e=Object.defineProperty;function n(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof oh=="object"&&oh];for(var y=0;y<c.length;++y){var _=c[y];if(_&&_.Math==Math)return _}throw Error("Cannot find global object")}var s=n(this);function o(c,y){if(y)e:{var _=s;c=c.split(".");for(var A=0;A<c.length-1;A++){var B=c[A];if(!(B in _))break e;_=_[B]}c=c[c.length-1],A=_[c],y=y(A),y!=A&&y!=null&&e(_,c,{configurable:!0,writable:!0,value:y})}}o("Symbol.dispose",function(c){return c||Symbol("Symbol.dispose")}),o("Array.prototype.values",function(c){return c||function(){return this[Symbol.iterator]()}}),o("Object.entries",function(c){return c||function(y){var _=[],A;for(A in y)Object.prototype.hasOwnProperty.call(y,A)&&_.push([A,y[A]]);return _}});var u=u||{},f=this||self;function m(c){var y=typeof c;return y=="object"&&c!=null||y=="function"}function p(c,y,_){return c.call.apply(c.bind,arguments)}function g(c,y,_){return g=p,g.apply(null,arguments)}function E(c,y){var _=Array.prototype.slice.call(arguments,1);return function(){var A=_.slice();return A.push.apply(A,arguments),c.apply(this,A)}}function T(c,y){function _(){}_.prototype=y.prototype,c.Z=y.prototype,c.prototype=new _,c.prototype.constructor=c,c.Ob=function(A,B,Y){for(var ue=Array(arguments.length-2),Me=2;Me<arguments.length;Me++)ue[Me-2]=arguments[Me];return y.prototype[B].apply(A,ue)}}var R=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?c=>c&&AsyncContext.Snapshot.wrap(c):c=>c;function O(c){const y=c.length;if(y>0){const _=Array(y);for(let A=0;A<y;A++)_[A]=c[A];return _}return[]}function j(c,y){for(let A=1;A<arguments.length;A++){const B=arguments[A];var _=typeof B;if(_=_!="object"?_:B?Array.isArray(B)?"array":_:"null",_=="array"||_=="object"&&typeof B.length=="number"){_=c.length||0;const Y=B.length||0;c.length=_+Y;for(let ue=0;ue<Y;ue++)c[_+ue]=B[ue]}else c.push(B)}}class Q{constructor(y,_){this.i=y,this.j=_,this.h=0,this.g=null}get(){let y;return this.h>0?(this.h--,y=this.g,this.g=y.next,y.next=null):y=this.i(),y}}function q(c){f.setTimeout(()=>{throw c},0)}function $(){var c=x;let y=null;return c.g&&(y=c.g,c.g=c.g.next,c.g||(c.h=null),y.next=null),y}class X{constructor(){this.h=this.g=null}add(y,_){const A=ee.get();A.set(y,_),this.h?this.h.next=A:this.g=A,this.h=A}}var ee=new Q(()=>new de,c=>c.reset());class de{constructor(){this.next=this.g=this.h=null}set(y,_){this.h=y,this.g=_,this.next=null}reset(){this.next=this.g=this.h=null}}let pe,Ee=!1,x=new X,C=()=>{const c=Promise.resolve(void 0);pe=()=>{c.then(w)}};function w(){for(var c;c=$();){try{c.h.call(c.g)}catch(_){q(_)}var y=ee;y.j(c),y.h<100&&(y.h++,c.next=y.g,y.g=c)}Ee=!1}function D(){this.u=this.u,this.C=this.C}D.prototype.u=!1,D.prototype.dispose=function(){this.u||(this.u=!0,this.N())},D.prototype[Symbol.dispose]=function(){this.dispose()},D.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function M(c,y){this.type=c,this.g=this.target=y,this.defaultPrevented=!1}M.prototype.h=function(){this.defaultPrevented=!0};var U=(function(){if(!f.addEventListener||!Object.defineProperty)return!1;var c=!1,y=Object.defineProperty({},"passive",{get:function(){c=!0}});try{const _=()=>{};f.addEventListener("test",_,y),f.removeEventListener("test",_,y)}catch{}return c})();function I(c){return/^[\s\xa0]*$/.test(c)}function oe(c,y){M.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c&&this.init(c,y)}T(oe,M),oe.prototype.init=function(c,y){const _=this.type=c.type,A=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;this.target=c.target||c.srcElement,this.g=y,y=c.relatedTarget,y||(_=="mouseover"?y=c.fromElement:_=="mouseout"&&(y=c.toElement)),this.relatedTarget=y,A?(this.clientX=A.clientX!==void 0?A.clientX:A.pageX,this.clientY=A.clientY!==void 0?A.clientY:A.pageY,this.screenX=A.screenX||0,this.screenY=A.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=c.pointerType,this.state=c.state,this.i=c,c.defaultPrevented&&oe.Z.h.call(this)},oe.prototype.h=function(){oe.Z.h.call(this);const c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var he="closure_listenable_"+(Math.random()*1e6|0),P=0;function W(c,y,_,A,B){this.listener=c,this.proxy=null,this.src=y,this.type=_,this.capture=!!A,this.ha=B,this.key=++P,this.da=this.fa=!1}function Z(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function we(c,y,_){for(const A in c)y.call(_,c[A],A,c)}function Ce(c,y){for(const _ in c)y.call(void 0,c[_],_,c)}function V(c){const y={};for(const _ in c)y[_]=c[_];return y}const te="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function le(c,y){let _,A;for(let B=1;B<arguments.length;B++){A=arguments[B];for(_ in A)c[_]=A[_];for(let Y=0;Y<te.length;Y++)_=te[Y],Object.prototype.hasOwnProperty.call(A,_)&&(c[_]=A[_])}}function ce(c){this.src=c,this.g={},this.h=0}ce.prototype.add=function(c,y,_,A,B){const Y=c.toString();c=this.g[Y],c||(c=this.g[Y]=[],this.h++);const ue=_e(c,y,A,B);return ue>-1?(y=c[ue],_||(y.fa=!1)):(y=new W(y,this.src,Y,!!A,B),y.fa=_,c.push(y)),y};function ye(c,y){const _=y.type;if(_ in c.g){var A=c.g[_],B=Array.prototype.indexOf.call(A,y,void 0),Y;(Y=B>=0)&&Array.prototype.splice.call(A,B,1),Y&&(Z(y),c.g[_].length==0&&(delete c.g[_],c.h--))}}function _e(c,y,_,A){for(let B=0;B<c.length;++B){const Y=c[B];if(!Y.da&&Y.listener==y&&Y.capture==!!_&&Y.ha==A)return B}return-1}var Oe="closure_lm_"+(Math.random()*1e6|0),ot={};function Xe(c,y,_,A,B){if(Array.isArray(y)){for(let Y=0;Y<y.length;Y++)Xe(c,y[Y],_,A,B);return null}return _=Lo(_),c&&c[he]?c.J(y,_,m(A)?!!A.capture:!1,B):$t(c,y,_,!1,A,B)}function $t(c,y,_,A,B,Y){if(!y)throw Error("Invalid event type");const ue=m(B)?!!B.capture:!!B;let Me=Rs(c);if(Me||(c[Oe]=Me=new ce(c)),_=Me.add(y,_,A,ue,Y),_.proxy)return _;if(A=$r(),_.proxy=A,A.src=c,A.listener=_,c.addEventListener)U||(B=ue),B===void 0&&(B=!1),c.addEventListener(y.toString(),A,B);else if(c.attachEvent)c.attachEvent(wt(y.toString()),A);else if(c.addListener&&c.removeListener)c.addListener(A);else throw Error("addEventListener and attachEvent are unavailable.");return _}function $r(){function c(_){return y.call(c.src,c.listener,_)}const y=ko;return c}function zn(c,y,_,A,B){if(Array.isArray(y))for(var Y=0;Y<y.length;Y++)zn(c,y[Y],_,A,B);else A=m(A)?!!A.capture:!!A,_=Lo(_),c&&c[he]?(c=c.i,Y=String(y).toString(),Y in c.g&&(y=c.g[Y],_=_e(y,_,A,B),_>-1&&(Z(y[_]),Array.prototype.splice.call(y,_,1),y.length==0&&(delete c.g[Y],c.h--)))):c&&(c=Rs(c))&&(y=c.g[y.toString()],c=-1,y&&(c=_e(y,_,A,B)),(_=c>-1?y[c]:null)&&yn(_))}function yn(c){if(typeof c!="number"&&c&&!c.da){var y=c.src;if(y&&y[he])ye(y.i,c);else{var _=c.type,A=c.proxy;y.removeEventListener?y.removeEventListener(_,A,c.capture):y.detachEvent?y.detachEvent(wt(_),A):y.addListener&&y.removeListener&&y.removeListener(A),(_=Rs(y))?(ye(_,c),_.h==0&&(_.src=null,y[Oe]=null)):Z(c)}}}function wt(c){return c in ot?ot[c]:ot[c]="on"+c}function ko(c,y){if(c.da)c=!0;else{y=new oe(y,this);const _=c.listener,A=c.ha||c.src;c.fa&&yn(c),c=_.call(A,y)}return c}function Rs(c){return c=c[Oe],c instanceof ce?c:null}var Po="__closure_events_fn_"+(Math.random()*1e9>>>0);function Lo(c){return typeof c=="function"?c:(c[Po]||(c[Po]=function(y){return c.handleEvent(y)}),c[Po])}function Rt(){D.call(this),this.i=new ce(this),this.M=this,this.G=null}T(Rt,D),Rt.prototype[he]=!0,Rt.prototype.removeEventListener=function(c,y,_,A){zn(this,c,y,_,A)};function Bt(c,y){var _,A=c.G;if(A)for(_=[];A;A=A.G)_.push(A);if(c=c.M,A=y.type||y,typeof y=="string")y=new M(y,c);else if(y instanceof M)y.target=y.target||c;else{var B=y;y=new M(A,c),le(y,B)}B=!0;let Y,ue;if(_)for(ue=_.length-1;ue>=0;ue--)Y=y.g=_[ue],B=Ci(Y,A,!0,y)&&B;if(Y=y.g=c,B=Ci(Y,A,!0,y)&&B,B=Ci(Y,A,!1,y)&&B,_)for(ue=0;ue<_.length;ue++)Y=y.g=_[ue],B=Ci(Y,A,!1,y)&&B}Rt.prototype.N=function(){if(Rt.Z.N.call(this),this.i){var c=this.i;for(const y in c.g){const _=c.g[y];for(let A=0;A<_.length;A++)Z(_[A]);delete c.g[y],c.h--}}this.G=null},Rt.prototype.J=function(c,y,_,A){return this.i.add(String(c),y,!1,_,A)},Rt.prototype.K=function(c,y,_,A){return this.i.add(String(c),y,!0,_,A)};function Ci(c,y,_,A){if(y=c.i.g[String(y)],!y)return!0;y=y.concat();let B=!0;for(let Y=0;Y<y.length;++Y){const ue=y[Y];if(ue&&!ue.da&&ue.capture==_){const Me=ue.listener,Tt=ue.ha||ue.src;ue.fa&&ye(c.i,ue),B=Me.call(Tt,A)!==!1&&B}}return B&&!A.defaultPrevented}function Sf(c,y){if(typeof c!="function")if(c&&typeof c.handleEvent=="function")c=g(c.handleEvent,c);else throw Error("Invalid listener argument");return Number(y)>2147483647?-1:f.setTimeout(c,y||0)}function Du(c){c.g=Sf(()=>{c.g=null,c.i&&(c.i=!1,Du(c))},c.l);const y=c.h;c.h=null,c.m.apply(null,y)}class hn extends D{constructor(y,_){super(),this.m=y,this.l=_,this.h=null,this.i=!1,this.g=null}j(y){this.h=arguments,this.g?this.i=!0:Du(this)}N(){super.N(),this.g&&(f.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Cs(c){D.call(this),this.h=c,this.g={}}T(Cs,D);var Uo=[];function jo(c){we(c.g,function(y,_){this.g.hasOwnProperty(_)&&yn(y)},c),c.g={}}Cs.prototype.N=function(){Cs.Z.N.call(this),jo(this)},Cs.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var xi=f.JSON.stringify,Af=f.JSON.parse,Nu=class{stringify(c){return f.JSON.stringify(c,void 0)}parse(c){return f.JSON.parse(c,void 0)}};function Ou(){}function Mu(){}var tr={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Xt(){M.call(this,"d")}T(Xt,M);function Bn(){M.call(this,"c")}T(Bn,M);var Et={},Vu=null;function ga(){return Vu=Vu||new Rt}Et.Ia="serverreachability";function ku(c){M.call(this,Et.Ia,c)}T(ku,M);function _r(c){const y=ga();Bt(y,new ku(y))}Et.STAT_EVENT="statevent";function xs(c,y){M.call(this,Et.STAT_EVENT,c),this.stat=y}T(xs,M);function Ct(c){const y=ga();Bt(y,new xs(y,c))}Et.Ja="timingevent";function Er(c,y){M.call(this,Et.Ja,c),this.size=y}T(Er,M);function Tr(c,y){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return f.setTimeout(function(){c()},y)}function nr(){this.g=!0}nr.prototype.ua=function(){this.g=!1};function wf(c,y,_,A,B,Y){c.info(function(){if(c.g)if(Y){var ue="",Me=Y.split("&");for(let We=0;We<Me.length;We++){var Tt=Me[We].split("=");if(Tt.length>1){const ft=Tt[0];Tt=Tt[1];const Gn=ft.split("_");ue=Gn.length>=2&&Gn[1]=="type"?ue+(ft+"="+Tt+"&"):ue+(ft+"=redacted&")}}}else ue=null;else ue=Y;return"XMLHTTP REQ ("+A+") [attempt "+B+"]: "+y+`
`+_+`
`+ue})}function Pu(c,y,_,A,B,Y,ue){c.info(function(){return"XMLHTTP RESP ("+A+") [ attempt "+B+"]: "+y+`
`+_+`
`+Y+" "+ue})}function br(c,y,_,A){c.info(function(){return"XMLHTTP TEXT ("+y+"): "+Rf(c,_)+(A?" "+A:"")})}function Is(c,y){c.info(function(){return"TIMEOUT: "+y})}nr.prototype.info=function(){};function Rf(c,y){if(!c.g)return y;if(!y)return null;try{const Y=JSON.parse(y);if(Y){for(c=0;c<Y.length;c++)if(Array.isArray(Y[c])){var _=Y[c];if(!(_.length<2)){var A=_[1];if(Array.isArray(A)&&!(A.length<1)){var B=A[0];if(B!="noop"&&B!="stop"&&B!="close")for(let ue=1;ue<A.length;ue++)A[ue]=""}}}}return xi(Y)}catch{return y}}var Ds={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},zo={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Bo;function Ns(){}T(Ns,Ou),Ns.prototype.g=function(){return new XMLHttpRequest},Bo=new Ns;function Xr(c){return encodeURIComponent(String(c))}function Lu(c){var y=1;c=c.split(":");const _=[];for(;y>0&&c.length;)_.push(c.shift()),y--;return c.length&&_.push(c.join(":")),_}function rr(c,y,_,A){this.j=c,this.i=y,this.l=_,this.S=A||1,this.V=new Cs(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new ir}function ir(){this.i=null,this.g="",this.h=!1}var xt={},Ft={};function Sr(c,y,_){c.M=1,c.A=Os(Dt(y)),c.u=_,c.R=!0,ya(c,null)}function ya(c,y){c.F=Date.now(),Ar(c),c.B=Dt(c.A);var _=c.B,A=c.S;Array.isArray(A)||(A=[String(A)]),Ta(_.i,"t",A),c.C=0,_=c.j.L,c.h=new ir,c.g=Ju(c.j,_?y:null,!c.u),c.P>0&&(c.O=new hn(g(c.Y,c,c.g),c.P)),y=c.V,_=c.g,A=c.ba;var B="readystatechange";Array.isArray(B)||(B&&(Uo[0]=B.toString()),B=Uo);for(let Y=0;Y<B.length;Y++){const ue=Xe(_,B[Y],A||y.handleEvent,!1,y.h||y);if(!ue)break;y.g[ue.key]=ue}y=c.J?V(c.J):{},c.u?(c.v||(c.v="POST"),y["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.B,c.v,c.u,y)):(c.v="GET",c.g.ea(c.B,c.v,null,y)),_r(),wf(c.i,c.v,c.B,c.l,c.S,c.u)}rr.prototype.ba=function(c){c=c.target;const y=this.O;y&&or(c)==3?y.j():this.Y(c)},rr.prototype.Y=function(c){try{if(c==this.g)e:{const Me=or(this.g),Tt=this.g.ya(),We=this.g.ca();if(!(Me<3)&&(Me!=3||this.g&&(this.h.h||this.g.la()||Wt(this.g)))){this.K||Me!=4||Tt==7||(Tt==8||We<=0?_r(3):_r(2)),wr(this);var y=this.g.ca();this.X=y;var _=Cf(this);if(this.o=y==200,Pu(this.i,this.v,this.B,this.l,this.S,Me,y),this.o){if(this.U&&!this.L){t:{if(this.g){var A,B=this.g;if((A=B.g?B.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!I(A)){var Y=A;break t}}Y=null}if(c=Y)br(this.i,this.l,c,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Rr(this,c);else{this.o=!1,this.m=3,Ct(12),Cn(this),qn(this);break e}}if(this.R){c=!0;let ft;for(;!this.K&&this.C<_.length;)if(ft=ju(this,_),ft==Ft){Me==4&&(this.m=4,Ct(14),c=!1),br(this.i,this.l,null,"[Incomplete Response]");break}else if(ft==xt){this.m=4,Ct(15),br(this.i,this.l,_,"[Invalid Chunk]"),c=!1;break}else br(this.i,this.l,ft,null),Rr(this,ft);if(Uu(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Me!=4||_.length!=0||this.h.h||(this.m=1,Ct(16),c=!1),this.o=this.o&&c,!c)br(this.i,this.l,_,"[Invalid Chunked Response]"),Cn(this),qn(this);else if(_.length>0&&!this.W){this.W=!0;var ue=this.j;ue.g==this&&ue.aa&&!ue.P&&(ue.j.info("Great, no buffering proxy detected. Bytes received: "+_.length),nl(ue),ue.P=!0,Ct(11))}}else br(this.i,this.l,_,null),Rr(this,_);Me==4&&Cn(this),this.o&&!this.K&&(Me==4?Ku(this.j,this):(this.o=!1,Ar(this)))}else Jr(this.g),y==400&&_.indexOf("Unknown SID")>0?(this.m=3,Ct(12)):(this.m=0,Ct(13)),Cn(this),qn(this)}}}catch{}};function Cf(c){if(!Uu(c))return c.g.la();const y=Wt(c.g);if(y==="")return"";let _="";const A=y.length,B=or(c.g)==4;if(!c.h.i){if(typeof TextDecoder>"u")return Cn(c),qn(c),"";c.h.i=new f.TextDecoder}for(let Y=0;Y<A;Y++)c.h.h=!0,_+=c.h.i.decode(y[Y],{stream:!(B&&Y==A-1)});return y.length=0,c.h.g+=_,c.C=0,c.h.g}function Uu(c){return c.g?c.v=="GET"&&c.M!=2&&c.j.Aa:!1}function ju(c,y){var _=c.C,A=y.indexOf(`
`,_);return A==-1?Ft:(_=Number(y.substring(_,A)),isNaN(_)?xt:(A+=1,A+_>y.length?Ft:(y=y.slice(A,A+_),c.C=A+_,y)))}rr.prototype.cancel=function(){this.K=!0,Cn(this)};function Ar(c){c.T=Date.now()+c.H,va(c,c.H)}function va(c,y){if(c.D!=null)throw Error("WatchDog timer not null");c.D=Tr(g(c.aa,c),y)}function wr(c){c.D&&(f.clearTimeout(c.D),c.D=null)}rr.prototype.aa=function(){this.D=null;const c=Date.now();c-this.T>=0?(Is(this.i,this.B),this.M!=2&&(_r(),Ct(17)),Cn(this),this.m=2,qn(this)):va(this,this.T-c)};function qn(c){c.j.I==0||c.K||Ku(c.j,c)}function Cn(c){wr(c);var y=c.O;y&&typeof y.dispose=="function"&&y.dispose(),c.O=null,jo(c.V),c.g&&(y=c.g,c.g=null,y.abort(),y.dispose())}function Rr(c,y){try{var _=c.j;if(_.I!=0&&(_.g==c||xr(_.h,c))){if(!c.L&&xr(_.h,c)&&_.I==3){try{var A=_.Ba.g.parse(y)}catch{A=null}if(Array.isArray(A)&&A.length==3){var B=A;if(B[0]==0){e:if(!_.v){if(_.g)if(_.g.F+3e3<c.F)Ra(_),Pi(_);else break e;js(_),Ct(18)}}else _.xa=B[1],0<_.xa-_.K&&B[2]<37500&&_.F&&_.A==0&&!_.C&&(_.C=Tr(g(_.Va,_),6e3));Cr(_.h)<=1&&_.ta&&(_.ta=void 0)}else Vr(_,11)}else if((c.L||_.g==c)&&Ra(_),!I(y))for(B=_.Ba.g.parse(y),y=0;y<B.length;y++){let We=B[y];const ft=We[0];if(!(ft<=_.K))if(_.K=ft,We=We[1],_.I==2)if(We[0]=="c"){_.M=We[1],_.ba=We[2];const Gn=We[3];Gn!=null&&(_.ka=Gn,_.j.info("VER="+_.ka));const kr=We[4];kr!=null&&(_.za=kr,_.j.info("SVER="+_.za));const lr=We[5];lr!=null&&typeof lr=="number"&&lr>0&&(A=1.5*lr,_.O=A,_.j.info("backChannelRequestTimeoutMs_="+A)),A=_;const ur=c.g;if(ur){const zs=ur.g?ur.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(zs){var Y=A.h;Y.g||zs.indexOf("spdy")==-1&&zs.indexOf("quic")==-1&&zs.indexOf("h2")==-1||(Y.j=Y.l,Y.g=new Set,Y.h&&(Fo(Y,Y.h),Y.h=null))}if(A.G){const Ca=ur.g?ur.g.getResponseHeader("X-HTTP-Session-Id"):null;Ca&&(A.wa=Ca,Ze(A.J,A.G,Ca))}}_.I=3,_.l&&_.l.ra(),_.aa&&(_.T=Date.now()-c.F,_.j.info("Handshake RTT: "+_.T+"ms")),A=_;var ue=c;if(A.na=Wu(A,A.L?A.ba:null,A.W),ue.L){Go(A.h,ue);var Me=ue,Tt=A.O;Tt&&(Me.H=Tt),Me.D&&(wr(Me),Ar(Me)),A.g=ue}else Qu(A);_.i.length>0&&Mr(_)}else We[0]!="stop"&&We[0]!="close"||Vr(_,7);else _.I==3&&(We[0]=="stop"||We[0]=="close"?We[0]=="stop"?Vr(_,7):el(_):We[0]!="noop"&&_.l&&_.l.qa(We),_.A=0)}}_r(4)}catch{}}var It=class{constructor(c,y){this.g=c,this.map=y}};function qo(c){this.l=c||10,f.PerformanceNavigationTiming?(c=f.performance.getEntriesByType("navigation"),c=c.length>0&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(f.chrome&&f.chrome.loadTimes&&f.chrome.loadTimes()&&f.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Ho(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function Cr(c){return c.h?1:c.g?c.g.size:0}function xr(c,y){return c.h?c.h==y:c.g?c.g.has(y):!1}function Fo(c,y){c.g?c.g.add(y):c.h=y}function Go(c,y){c.h&&c.h==y?c.h=null:c.g&&c.g.has(y)&&c.g.delete(y)}qo.prototype.cancel=function(){if(this.i=Qo(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const c of this.g.values())c.cancel();this.g.clear()}};function Qo(c){if(c.h!=null)return c.i.concat(c.h.G);if(c.g!=null&&c.g.size!==0){let y=c.i;for(const _ of c.g.values())y=y.concat(_.G);return y}return O(c.i)}var zu=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function _a(c,y){if(c){c=c.split("&");for(let _=0;_<c.length;_++){const A=c[_].indexOf("=");let B,Y=null;A>=0?(B=c[_].substring(0,A),Y=c[_].substring(A+1)):B=c[_],y(B,Y?decodeURIComponent(Y.replace(/\+/g," ")):"")}}}function xn(c){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let y;c instanceof xn?(this.l=c.l,Gt(this,c.j),this.o=c.o,this.g=c.g,Ii(this,c.u),this.h=c.h,Yo(this,Fu(c.i)),this.m=c.m):c&&(y=String(c).match(zu))?(this.l=!1,Gt(this,y[1]||"",!0),this.o=Ir(y[2]||""),this.g=Ir(y[3]||"",!0),Ii(this,y[4]),this.h=Ir(y[5]||"",!0),Yo(this,y[6]||"",!0),this.m=Ir(y[7]||"")):(this.l=!1,this.i=new Ni(null,this.l))}xn.prototype.toString=function(){const c=[];var y=this.j;y&&c.push(Ms(y,Ea,!0),":");var _=this.g;return(_||y=="file")&&(c.push("//"),(y=this.o)&&c.push(Ms(y,Ea,!0),"@"),c.push(Xr(_).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),_=this.u,_!=null&&c.push(":",String(_))),(_=this.h)&&(this.g&&_.charAt(0)!="/"&&c.push("/"),c.push(Ms(_,_.charAt(0)=="/"?Ko:Bu,!0))),(_=this.i.toString())&&c.push("?",_),(_=this.m)&&c.push("#",Ms(_,qu)),c.join("")},xn.prototype.resolve=function(c){const y=Dt(this);let _=!!c.j;_?Gt(y,c.j):_=!!c.o,_?y.o=c.o:_=!!c.g,_?y.g=c.g:_=c.u!=null;var A=c.h;if(_)Ii(y,c.u);else if(_=!!c.h){if(A.charAt(0)!="/")if(this.g&&!this.h)A="/"+A;else{var B=y.h.lastIndexOf("/");B!=-1&&(A=y.h.slice(0,B+1)+A)}if(B=A,B==".."||B==".")A="";else if(B.indexOf("./")!=-1||B.indexOf("/.")!=-1){A=B.lastIndexOf("/",0)==0,B=B.split("/");const Y=[];for(let ue=0;ue<B.length;){const Me=B[ue++];Me=="."?A&&ue==B.length&&Y.push(""):Me==".."?((Y.length>1||Y.length==1&&Y[0]!="")&&Y.pop(),A&&ue==B.length&&Y.push("")):(Y.push(Me),A=!0)}A=Y.join("/")}else A=B}return _?y.h=A:_=c.i.toString()!=="",_?Yo(y,Fu(c.i)):_=!!c.m,_&&(y.m=c.m),y};function Dt(c){return new xn(c)}function Gt(c,y,_){c.j=_?Ir(y,!0):y,c.j&&(c.j=c.j.replace(/:$/,""))}function Ii(c,y){if(y){if(y=Number(y),isNaN(y)||y<0)throw Error("Bad port number "+y);c.u=y}else c.u=null}function Yo(c,y,_){y instanceof Ni?(c.i=y,ba(c.i,c.l)):(_||(y=Ms(y,Di)),c.i=new Ni(y,c.l))}function Ze(c,y,_){c.i.set(y,_)}function Os(c){return Ze(c,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),c}function Ir(c,y){return c?y?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function Ms(c,y,_){return typeof c=="string"?(c=encodeURI(c).replace(y,vn),_&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function vn(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var Ea=/[#\/\?@]/g,Bu=/[#\?:]/g,Ko=/[#\?]/g,Di=/[#\?@]/g,qu=/#/g;function Ni(c,y){this.h=this.g=null,this.i=c||null,this.j=!!y}function _n(c){c.g||(c.g=new Map,c.h=0,c.i&&_a(c.i,function(y,_){c.add(decodeURIComponent(y.replace(/\+/g," ")),_)}))}i=Ni.prototype,i.add=function(c,y){_n(this),this.i=null,c=Oi(this,c);let _=this.g.get(c);return _||this.g.set(c,_=[]),_.push(y),this.h+=1,this};function Hu(c,y){_n(c),y=Oi(c,y),c.g.has(y)&&(c.i=null,c.h-=c.g.get(y).length,c.g.delete(y))}function $o(c,y){return _n(c),y=Oi(c,y),c.g.has(y)}i.forEach=function(c,y){_n(this),this.g.forEach(function(_,A){_.forEach(function(B){c.call(y,B,A,this)},this)},this)};function Xo(c,y){_n(c);let _=[];if(typeof y=="string")$o(c,y)&&(_=_.concat(c.g.get(Oi(c,y))));else for(c=Array.from(c.g.values()),y=0;y<c.length;y++)_=_.concat(c[y]);return _}i.set=function(c,y){return _n(this),this.i=null,c=Oi(this,c),$o(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[y]),this.h+=1,this},i.get=function(c,y){return c?(c=Xo(this,c),c.length>0?String(c[0]):y):y};function Ta(c,y,_){Hu(c,y),_.length>0&&(c.i=null,c.g.set(Oi(c,y),O(_)),c.h+=_.length)}i.toString=function(){if(this.i)return this.i;if(!this.g)return"";const c=[],y=Array.from(this.g.keys());for(let A=0;A<y.length;A++){var _=y[A];const B=Xr(_);_=Xo(this,_);for(let Y=0;Y<_.length;Y++){let ue=B;_[Y]!==""&&(ue+="="+Xr(_[Y])),c.push(ue)}}return this.i=c.join("&")};function Fu(c){const y=new Ni;return y.i=c.i,c.g&&(y.g=new Map(c.g),y.h=c.h),y}function Oi(c,y){return y=String(y),c.j&&(y=y.toLowerCase()),y}function ba(c,y){y&&!c.j&&(_n(c),c.i=null,c.g.forEach(function(_,A){const B=A.toLowerCase();A!=B&&(Hu(this,A),Ta(this,B,_))},c)),c.j=y}function sr(c,y){const _=new nr;if(f.Image){const A=new Image;A.onload=E(Hn,_,"TestLoadImage: loaded",!0,y,A),A.onerror=E(Hn,_,"TestLoadImage: error",!1,y,A),A.onabort=E(Hn,_,"TestLoadImage: abort",!1,y,A),A.ontimeout=E(Hn,_,"TestLoadImage: timeout",!1,y,A),f.setTimeout(function(){A.ontimeout&&A.ontimeout()},1e4),A.src=c}else y(!1)}function Wo(c,y){const _=new nr,A=new AbortController,B=setTimeout(()=>{A.abort(),Hn(_,"TestPingServer: timeout",!1,y)},1e4);fetch(c,{signal:A.signal}).then(Y=>{clearTimeout(B),Y.ok?Hn(_,"TestPingServer: ok",!0,y):Hn(_,"TestPingServer: server error",!1,y)}).catch(()=>{clearTimeout(B),Hn(_,"TestPingServer: error",!1,y)})}function Hn(c,y,_,A,B){try{B&&(B.onload=null,B.onerror=null,B.onabort=null,B.ontimeout=null),A(_)}catch{}}function Mi(){this.g=new Nu}function Dr(c){this.i=c.Sb||null,this.h=c.ab||!1}T(Dr,Ou),Dr.prototype.g=function(){return new Vs(this.i,this.h)};function Vs(c,y){Rt.call(this),this.H=c,this.o=y,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}T(Vs,Rt),i=Vs.prototype,i.open=function(c,y){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=c,this.D=y,this.readyState=1,ar(this)},i.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const y={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};c&&(y.body=c),(this.H||f).fetch(new Request(this.D,y)).then(this.Pa.bind(this),this.ga.bind(this))},i.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Vi(this)),this.readyState=0},i.Pa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,ar(this)),this.g&&(this.readyState=3,ar(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof f.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Sa(this)}else c.text().then(this.Oa.bind(this),this.ga.bind(this))};function Sa(c){c.j.read().then(c.Ma.bind(c)).catch(c.ga.bind(c))}i.Ma=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var y=c.value?c.value:new Uint8Array(0);(y=this.B.decode(y,{stream:!c.done}))&&(this.response=this.responseText+=y)}c.done?Vi(this):ar(this),this.readyState==3&&Sa(this)}},i.Oa=function(c){this.g&&(this.response=this.responseText=c,Vi(this))},i.Na=function(c){this.g&&(this.response=c,Vi(this))},i.ga=function(){this.g&&Vi(this)};function Vi(c){c.readyState=4,c.l=null,c.j=null,c.B=null,ar(c)}i.setRequestHeader=function(c,y){this.A.append(c,y)},i.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},i.getAllResponseHeaders=function(){if(!this.h)return"";const c=[],y=this.h.entries();for(var _=y.next();!_.done;)_=_.value,c.push(_[0]+": "+_[1]),_=y.next();return c.join(`\r
`)};function ar(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(Vs.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function Fn(c){let y="";return we(c,function(_,A){y+=A,y+=":",y+=_,y+=`\r
`}),y}function ks(c,y,_){e:{for(A in _){var A=!1;break e}A=!0}A||(_=Fn(_),typeof c=="string"?_!=null&&Xr(_):Ze(c,y,_))}function nt(c){Rt.call(this),this.headers=new Map,this.L=c||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}T(nt,Rt);var Nr=/^https?$/i,Jo=["POST","PUT"];i=nt.prototype,i.Fa=function(c){this.H=c},i.ea=function(c,y,_,A){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);y=y?y.toUpperCase():"GET",this.D=c,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Bo.g(),this.g.onreadystatechange=R(g(this.Ca,this));try{this.B=!0,this.g.open(y,String(c),!0),this.B=!1}catch(Y){Ps(this,Y);return}if(c=_||"",_=new Map(this.headers),A)if(Object.getPrototypeOf(A)===Object.prototype)for(var B in A)_.set(B,A[B]);else if(typeof A.keys=="function"&&typeof A.get=="function")for(const Y of A.keys())_.set(Y,A.get(Y));else throw Error("Unknown input type for opt_headers: "+String(A));A=Array.from(_.keys()).find(Y=>Y.toLowerCase()=="content-type"),B=f.FormData&&c instanceof f.FormData,!(Array.prototype.indexOf.call(Jo,y,void 0)>=0)||A||B||_.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Y,ue]of _)this.g.setRequestHeader(Y,ue);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(c),this.v=!1}catch(Y){Ps(this,Y)}};function Ps(c,y){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=y,c.o=5,Zo(c),Wr(c)}function Zo(c){c.A||(c.A=!0,Bt(c,"complete"),Bt(c,"error"))}i.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=c||7,Bt(this,"complete"),Bt(this,"abort"),Wr(this))},i.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Wr(this,!0)),nt.Z.N.call(this)},i.Ca=function(){this.u||(this.B||this.v||this.j?Ls(this):this.Xa())},i.Xa=function(){Ls(this)};function Ls(c){if(c.h&&typeof u<"u"){if(c.v&&or(c)==4)setTimeout(c.Ca.bind(c),0);else if(Bt(c,"readystatechange"),or(c)==4){c.h=!1;try{const Y=c.ca();e:switch(Y){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var y=!0;break e;default:y=!1}var _;if(!(_=y)){var A;if(A=Y===0){let ue=String(c.D).match(zu)[1]||null;!ue&&f.self&&f.self.location&&(ue=f.self.location.protocol.slice(0,-1)),A=!Nr.test(ue?ue.toLowerCase():"")}_=A}if(_)Bt(c,"complete"),Bt(c,"success");else{c.o=6;try{var B=or(c)>2?c.g.statusText:""}catch{B=""}c.l=B+" ["+c.ca()+"]",Zo(c)}}finally{Wr(c)}}}}function Wr(c,y){if(c.g){c.m&&(clearTimeout(c.m),c.m=null);const _=c.g;c.g=null,y||Bt(c,"ready");try{_.onreadystatechange=null}catch{}}}i.isActive=function(){return!!this.g};function or(c){return c.g?c.g.readyState:0}i.ca=function(){try{return or(this)>2?this.g.status:-1}catch{return-1}},i.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},i.La=function(c){if(this.g){var y=this.g.responseText;return c&&y.indexOf(c)==0&&(y=y.substring(c.length)),Af(y)}};function Wt(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.F){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function Jr(c){const y={};c=(c.g&&or(c)>=2&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let A=0;A<c.length;A++){if(I(c[A]))continue;var _=Lu(c[A]);const B=_[0];if(_=_[1],typeof _!="string")continue;_=_.trim();const Y=y[B]||[];y[B]=Y,Y.push(_)}Ce(y,function(A){return A.join(", ")})}i.ya=function(){return this.o},i.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Or(c,y,_){return _&&_.internalChannelParams&&_.internalChannelParams[c]||y}function ki(c){this.za=0,this.i=[],this.j=new nr,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Or("failFast",!1,c),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Or("baseRetryDelayMs",5e3,c),this.Za=Or("retryDelaySeedMs",1e4,c),this.Ta=Or("forwardChannelMaxRetries",2,c),this.va=Or("forwardChannelRequestTimeoutMs",2e4,c),this.ma=c&&c.xmlHttpFactory||void 0,this.Ua=c&&c.Rb||void 0,this.Aa=c&&c.useFetchStreams||!1,this.O=void 0,this.L=c&&c.supportsCrossDomainXhr||!1,this.M="",this.h=new qo(c&&c.concurrentRequestLimit),this.Ba=new Mi,this.S=c&&c.fastHandshake||!1,this.R=c&&c.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=c&&c.Pb||!1,c&&c.ua&&this.j.ua(),c&&c.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&c&&c.detectBufferingProxy||!1,this.ia=void 0,c&&c.longPollingTimeout&&c.longPollingTimeout>0&&(this.ia=c.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}i=ki.prototype,i.ka=8,i.I=1,i.connect=function(c,y,_,A){Ct(0),this.W=c,this.H=y||{},_&&A!==void 0&&(this.H.OSID=_,this.H.OAID=A),this.F=this.X,this.J=Wu(this,null,this.W),Mr(this)};function el(c){if(Aa(c),c.I==3){var y=c.V++,_=Dt(c.J);if(Ze(_,"SID",c.M),Ze(_,"RID",y),Ze(_,"TYPE","terminate"),Us(c,_),y=new rr(c,c.j,y),y.M=2,y.A=Os(Dt(_)),_=!1,f.navigator&&f.navigator.sendBeacon)try{_=f.navigator.sendBeacon(y.A.toString(),"")}catch{}!_&&f.Image&&(new Image().src=y.A,_=!0),_||(y.g=Ju(y.j,null),y.g.ea(y.A)),y.F=Date.now(),Ar(y)}Xu(c)}function Pi(c){c.g&&(nl(c),c.g.cancel(),c.g=null)}function Aa(c){Pi(c),c.v&&(f.clearTimeout(c.v),c.v=null),Ra(c),c.h.cancel(),c.m&&(typeof c.m=="number"&&f.clearTimeout(c.m),c.m=null)}function Mr(c){if(!Ho(c.h)&&!c.m){c.m=!0;var y=c.Ea;pe||C(),Ee||(pe(),Ee=!0),x.add(y,c),c.D=0}}function wa(c,y){return Cr(c.h)>=c.h.j-(c.m?1:0)?!1:c.m?(c.i=y.G.concat(c.i),!0):c.I==1||c.I==2||c.D>=(c.Sa?0:c.Ta)?!1:(c.m=Tr(g(c.Ea,c,y),$u(c,c.D)),c.D++,!0)}i.Ea=function(c){if(this.m)if(this.m=null,this.I==1){if(!c){this.V=Math.floor(Math.random()*1e5),c=this.V++;const B=new rr(this,this.j,c);let Y=this.o;if(this.U&&(Y?(Y=V(Y),le(Y,this.U)):Y=this.U),this.u!==null||this.R||(B.J=Y,Y=null),this.S)e:{for(var y=0,_=0;_<this.i.length;_++){t:{var A=this.i[_];if("__data__"in A.map&&(A=A.map.__data__,typeof A=="string")){A=A.length;break t}A=void 0}if(A===void 0)break;if(y+=A,y>4096){y=_;break e}if(y===4096||_===this.i.length-1){y=_+1;break e}}y=1e3}else y=1e3;y=Gu(this,B,y),_=Dt(this.J),Ze(_,"RID",c),Ze(_,"CVER",22),this.G&&Ze(_,"X-HTTP-Session-Id",this.G),Us(this,_),Y&&(this.R?y="headers="+Xr(Fn(Y))+"&"+y:this.u&&ks(_,this.u,Y)),Fo(this.h,B),this.Ra&&Ze(_,"TYPE","init"),this.S?(Ze(_,"$req",y),Ze(_,"SID","null"),B.U=!0,Sr(B,_,null)):Sr(B,_,y),this.I=2}}else this.I==3&&(c?tl(this,c):this.i.length==0||Ho(this.h)||tl(this))};function tl(c,y){var _;y?_=y.l:_=c.V++;const A=Dt(c.J);Ze(A,"SID",c.M),Ze(A,"RID",_),Ze(A,"AID",c.K),Us(c,A),c.u&&c.o&&ks(A,c.u,c.o),_=new rr(c,c.j,_,c.D+1),c.u===null&&(_.J=c.o),y&&(c.i=y.G.concat(c.i)),y=Gu(c,_,1e3),_.H=Math.round(c.va*.5)+Math.round(c.va*.5*Math.random()),Fo(c.h,_),Sr(_,A,y)}function Us(c,y){c.H&&we(c.H,function(_,A){Ze(y,A,_)}),c.l&&we({},function(_,A){Ze(y,A,_)})}function Gu(c,y,_){_=Math.min(c.i.length,_);const A=c.l?g(c.l.Ka,c.l,c):null;e:{var B=c.i;let Me=-1;for(;;){const Tt=["count="+_];Me==-1?_>0?(Me=B[0].g,Tt.push("ofs="+Me)):Me=0:Tt.push("ofs="+Me);let We=!0;for(let ft=0;ft<_;ft++){var Y=B[ft].g;const Gn=B[ft].map;if(Y-=Me,Y<0)Me=Math.max(0,B[ft].g-100),We=!1;else try{Y="req"+Y+"_"||"";try{var ue=Gn instanceof Map?Gn:Object.entries(Gn);for(const[kr,lr]of ue){let ur=lr;m(lr)&&(ur=xi(lr)),Tt.push(Y+kr+"="+encodeURIComponent(ur))}}catch(kr){throw Tt.push(Y+"type="+encodeURIComponent("_badmap")),kr}}catch{A&&A(Gn)}}if(We){ue=Tt.join("&");break e}}ue=void 0}return c=c.i.splice(0,_),y.G=c,ue}function Qu(c){if(!c.g&&!c.v){c.Y=1;var y=c.Da;pe||C(),Ee||(pe(),Ee=!0),x.add(y,c),c.A=0}}function js(c){return c.g||c.v||c.A>=3?!1:(c.Y++,c.v=Tr(g(c.Da,c),$u(c,c.A)),c.A++,!0)}i.Da=function(){if(this.v=null,Yu(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var c=4*this.T;this.j.info("BP detection timer enabled: "+c),this.B=Tr(g(this.Wa,this),c)}},i.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Ct(10),Pi(this),Yu(this))};function nl(c){c.B!=null&&(f.clearTimeout(c.B),c.B=null)}function Yu(c){c.g=new rr(c,c.j,"rpc",c.Y),c.u===null&&(c.g.J=c.o),c.g.P=0;var y=Dt(c.na);Ze(y,"RID","rpc"),Ze(y,"SID",c.M),Ze(y,"AID",c.K),Ze(y,"CI",c.F?"0":"1"),!c.F&&c.ia&&Ze(y,"TO",c.ia),Ze(y,"TYPE","xmlhttp"),Us(c,y),c.u&&c.o&&ks(y,c.u,c.o),c.O&&(c.g.H=c.O);var _=c.g;c=c.ba,_.M=1,_.A=Os(Dt(y)),_.u=null,_.R=!0,ya(_,c)}i.Va=function(){this.C!=null&&(this.C=null,Pi(this),js(this),Ct(19))};function Ra(c){c.C!=null&&(f.clearTimeout(c.C),c.C=null)}function Ku(c,y){var _=null;if(c.g==y){Ra(c),nl(c),c.g=null;var A=2}else if(xr(c.h,y))_=y.G,Go(c.h,y),A=1;else return;if(c.I!=0){if(y.o)if(A==1){_=y.u?y.u.length:0,y=Date.now()-y.F;var B=c.D;A=ga(),Bt(A,new Er(A,_)),Mr(c)}else Qu(c);else if(B=y.m,B==3||B==0&&y.X>0||!(A==1&&wa(c,y)||A==2&&js(c)))switch(_&&_.length>0&&(y=c.h,y.i=y.i.concat(_)),B){case 1:Vr(c,5);break;case 4:Vr(c,10);break;case 3:Vr(c,6);break;default:Vr(c,2)}}}function $u(c,y){let _=c.Qa+Math.floor(Math.random()*c.Za);return c.isActive()||(_*=2),_*y}function Vr(c,y){if(c.j.info("Error code "+y),y==2){var _=g(c.bb,c),A=c.Ua;const B=!A;A=new xn(A||"//www.google.com/images/cleardot.gif"),f.location&&f.location.protocol=="http"||Gt(A,"https"),Os(A),B?sr(A.toString(),_):Wo(A.toString(),_)}else Ct(2);c.I=0,c.l&&c.l.pa(y),Xu(c),Aa(c)}i.bb=function(c){c?(this.j.info("Successfully pinged google.com"),Ct(2)):(this.j.info("Failed to ping google.com"),Ct(1))};function Xu(c){if(c.I=0,c.ja=[],c.l){const y=Qo(c.h);(y.length!=0||c.i.length!=0)&&(j(c.ja,y),j(c.ja,c.i),c.h.i.length=0,O(c.i),c.i.length=0),c.l.oa()}}function Wu(c,y,_){var A=_ instanceof xn?Dt(_):new xn(_);if(A.g!="")y&&(A.g=y+"."+A.g),Ii(A,A.u);else{var B=f.location;A=B.protocol,y=y?y+"."+B.hostname:B.hostname,B=+B.port;const Y=new xn(null);A&&Gt(Y,A),y&&(Y.g=y),B&&Ii(Y,B),_&&(Y.h=_),A=Y}return _=c.G,y=c.wa,_&&y&&Ze(A,_,y),Ze(A,"VER",c.ka),Us(c,A),A}function Ju(c,y,_){if(y&&!c.L)throw Error("Can't create secondary domain capable XhrIo object.");return y=c.Aa&&!c.ma?new nt(new Dr({ab:_})):new nt(c.ma),y.Fa(c.L),y}i.isActive=function(){return!!this.l&&this.l.isActive(this)};function Zu(){}i=Zu.prototype,i.ra=function(){},i.qa=function(){},i.pa=function(){},i.oa=function(){},i.isActive=function(){return!0},i.Ka=function(){};function Li(){}Li.prototype.g=function(c,y){return new fn(c,y)};function fn(c,y){Rt.call(this),this.g=new ki(y),this.l=c,this.h=y&&y.messageUrlParams||null,c=y&&y.messageHeaders||null,y&&y.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=y&&y.initMessageHeaders||null,y&&y.messageContentType&&(c?c["X-WebChannel-Content-Type"]=y.messageContentType:c={"X-WebChannel-Content-Type":y.messageContentType}),y&&y.sa&&(c?c["X-WebChannel-Client-Profile"]=y.sa:c={"X-WebChannel-Client-Profile":y.sa}),this.g.U=c,(c=y&&y.Qb)&&!I(c)&&(this.g.u=c),this.A=y&&y.supportsCrossDomainXhr||!1,this.v=y&&y.sendRawJson||!1,(y=y&&y.httpSessionIdParam)&&!I(y)&&(this.g.G=y,c=this.h,c!==null&&y in c&&(c=this.h,y in c&&delete c[y])),this.j=new Zr(this)}T(fn,Rt),fn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},fn.prototype.close=function(){el(this.g)},fn.prototype.o=function(c){var y=this.g;if(typeof c=="string"){var _={};_.__data__=c,c=_}else this.v&&(_={},_.__data__=xi(c),c=_);y.i.push(new It(y.Ya++,c)),y.I==3&&Mr(y)},fn.prototype.N=function(){this.g.l=null,delete this.j,el(this.g),delete this.g,fn.Z.N.call(this)};function ec(c){Xt.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var y=c.__sm__;if(y){e:{for(const _ in y){c=_;break e}c=void 0}(this.i=c)&&(c=this.i,y=y!==null&&c in y?y[c]:void 0),this.data=y}else this.data=c}T(ec,Xt);function tc(){Bn.call(this),this.status=1}T(tc,Bn);function Zr(c){this.g=c}T(Zr,Zu),Zr.prototype.ra=function(){Bt(this.g,"a")},Zr.prototype.qa=function(c){Bt(this.g,new ec(c))},Zr.prototype.pa=function(c){Bt(this.g,new tc)},Zr.prototype.oa=function(){Bt(this.g,"b")},Li.prototype.createWebChannel=Li.prototype.g,fn.prototype.send=fn.prototype.o,fn.prototype.open=fn.prototype.m,fn.prototype.close=fn.prototype.close,XT=function(){return new Li},$T=function(){return ga()},KT=Et,ep={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Ds.NO_ERROR=0,Ds.TIMEOUT=8,Ds.HTTP_ERROR=6,Eh=Ds,zo.COMPLETE="complete",YT=zo,Mu.EventType=tr,tr.OPEN="a",tr.CLOSE="b",tr.ERROR="c",tr.MESSAGE="d",Rt.prototype.listen=Rt.prototype.J,ql=Mu,nt.prototype.listenOnce=nt.prototype.K,nt.prototype.getLastError=nt.prototype.Ha,nt.prototype.getLastErrorCode=nt.prototype.ya,nt.prototype.getStatus=nt.prototype.ca,nt.prototype.getResponseJson=nt.prototype.La,nt.prototype.getResponseText=nt.prototype.la,nt.prototype.send=nt.prototype.ea,nt.prototype.setWithCredentials=nt.prototype.Fa,QT=nt}).apply(typeof oh<"u"?oh:typeof self<"u"?self:typeof window<"u"?window:{});const P0="@firebase/firestore",L0="4.9.3";class un{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}un.UNAUTHENTICATED=new un(null),un.GOOGLE_CREDENTIALS=new un("google-credentials-uid"),un.FIRST_PARTY=new un("first-party-uid"),un.MOCK_USER=new un("mock-user");let Do="12.7.0";const ha=new wp("@firebase/firestore");function io(){return ha.logLevel}function me(i,...e){if(ha.logLevel<=ze.DEBUG){const n=e.map(Up);ha.debug(`Firestore (${Do}): ${i}`,...n)}}function Ai(i,...e){if(ha.logLevel<=ze.ERROR){const n=e.map(Up);ha.error(`Firestore (${Do}): ${i}`,...n)}}function go(i,...e){if(ha.logLevel<=ze.WARN){const n=e.map(Up);ha.warn(`Firestore (${Do}): ${i}`,...n)}}function Up(i){if(typeof i=="string")return i;try{return(function(n){return JSON.stringify(n)})(i)}catch{return i}}function Se(i,e,n){let s="Unexpected state";typeof e=="string"?s=e:n=e,WT(i,s,n)}function WT(i,e,n){let s=`FIRESTORE (${Do}) INTERNAL ASSERTION FAILED: ${e} (ID: ${i.toString(16)})`;if(n!==void 0)try{s+=" CONTEXT: "+JSON.stringify(n)}catch{s+=" CONTEXT: "+n}throw Ai(s),new Error(s)}function Qe(i,e,n,s){let o="Unexpected state";typeof n=="string"?o=n:s=n,i||WT(e,o,s)}function Ie(i,e){return i}const ne={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class fe extends Ri{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class qr{constructor(){this.promise=new Promise(((e,n)=>{this.resolve=e,this.reject=n}))}}class JT{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class kI{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable((()=>n(un.UNAUTHENTICATED)))}shutdown(){}}class PI{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class LI{constructor(e){this.t=e,this.currentUser=un.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Qe(this.o===void 0,42304);let s=this.i;const o=p=>this.i!==s?(s=this.i,n(p)):Promise.resolve();let u=new qr;this.o=()=>{this.i++,this.currentUser=this.u(),u.resolve(),u=new qr,e.enqueueRetryable((()=>o(this.currentUser)))};const f=()=>{const p=u;e.enqueueRetryable((async()=>{await p.promise,await o(this.currentUser)}))},m=p=>{me("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=p,this.o&&(this.auth.addAuthTokenListener(this.o),f())};this.t.onInit((p=>m(p))),setTimeout((()=>{if(!this.auth){const p=this.t.getImmediate({optional:!0});p?m(p):(me("FirebaseAuthCredentialsProvider","Auth not yet detected"),u.resolve(),u=new qr)}}),0),f()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((s=>this.i!==e?(me("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(Qe(typeof s.accessToken=="string",31837,{l:s}),new JT(s.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Qe(e===null||typeof e=="string",2055,{h:e}),new un(e)}}class UI{constructor(e,n,s){this.P=e,this.T=n,this.I=s,this.type="FirstParty",this.user=un.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class jI{constructor(e,n,s){this.P=e,this.T=n,this.I=s}getToken(){return Promise.resolve(new UI(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable((()=>n(un.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class U0{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class zI{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,dr(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){Qe(this.o===void 0,3512);const s=u=>{u.error!=null&&me("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const f=u.token!==this.m;return this.m=u.token,me("FirebaseAppCheckTokenProvider",`Received ${f?"new":"existing"} token.`),f?n(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable((()=>s(u)))};const o=u=>{me("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((u=>o(u))),setTimeout((()=>{if(!this.appCheck){const u=this.V.getImmediate({optional:!0});u?o(u):me("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new U0(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((n=>n?(Qe(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new U0(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function BI(i){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(i);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let s=0;s<i;s++)n[s]=Math.floor(256*Math.random());return n}class jp{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const o=BI(40);for(let u=0;u<o.length;++u)s.length<20&&o[u]<n&&(s+=e.charAt(o[u]%62))}return s}}function Be(i,e){return i<e?-1:i>e?1:0}function tp(i,e){const n=Math.min(i.length,e.length);for(let s=0;s<n;s++){const o=i.charAt(s),u=e.charAt(s);if(o!==u)return Lm(o)===Lm(u)?Be(o,u):Lm(o)?1:-1}return Be(i.length,e.length)}const qI=55296,HI=57343;function Lm(i){const e=i.charCodeAt(0);return e>=qI&&e<=HI}function yo(i,e,n){return i.length===e.length&&i.every(((s,o)=>n(s,e[o])))}const j0="__name__";class zr{constructor(e,n,s){n===void 0?n=0:n>e.length&&Se(637,{offset:n,range:e.length}),s===void 0?s=e.length-n:s>e.length-n&&Se(1746,{length:s,range:e.length-n}),this.segments=e,this.offset=n,this.len=s}get length(){return this.len}isEqual(e){return zr.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof zr?e.forEach((s=>{n.push(s)})):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,s=this.limit();n<s;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const s=Math.min(e.length,n.length);for(let o=0;o<s;o++){const u=zr.compareSegments(e.get(o),n.get(o));if(u!==0)return u}return Be(e.length,n.length)}static compareSegments(e,n){const s=zr.isNumericId(e),o=zr.isNumericId(n);return s&&!o?-1:!s&&o?1:s&&o?zr.extractNumericId(e).compare(zr.extractNumericId(n)):tp(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return ms.fromString(e.substring(4,e.length-2))}}class at extends zr{construct(e,n,s){return new at(e,n,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const s of e){if(s.indexOf("//")>=0)throw new fe(ne.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);n.push(...s.split("/").filter((o=>o.length>0)))}return new at(n)}static emptyPath(){return new at([])}}const FI=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class rn extends zr{construct(e,n,s){return new rn(e,n,s)}static isValidIdentifier(e){return FI.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),rn.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===j0}static keyField(){return new rn([j0])}static fromServerFormat(e){const n=[];let s="",o=0;const u=()=>{if(s.length===0)throw new fe(ne.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(s),s=""};let f=!1;for(;o<e.length;){const m=e[o];if(m==="\\"){if(o+1===e.length)throw new fe(ne.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const p=e[o+1];if(p!=="\\"&&p!=="."&&p!=="`")throw new fe(ne.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=p,o+=2}else m==="`"?(f=!f,o++):m!=="."||f?(s+=m,o++):(u(),o++)}if(u(),f)throw new fe(ne.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new rn(n)}static emptyPath(){return new rn([])}}class Te{constructor(e){this.path=e}static fromPath(e){return new Te(at.fromString(e))}static fromName(e){return new Te(at.fromString(e).popFirst(5))}static empty(){return new Te(at.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&at.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return at.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Te(new at(e.slice()))}}function ZT(i,e,n){if(!n)throw new fe(ne.INVALID_ARGUMENT,`Function ${i}() cannot be called with an empty ${e}.`)}function GI(i,e,n,s){if(e===!0&&s===!0)throw new fe(ne.INVALID_ARGUMENT,`${i} and ${n} cannot be used together.`)}function z0(i){if(!Te.isDocumentKey(i))throw new fe(ne.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${i} has ${i.length}.`)}function B0(i){if(Te.isDocumentKey(i))throw new fe(ne.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${i} has ${i.length}.`)}function eb(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}function tf(i){if(i===void 0)return"undefined";if(i===null)return"null";if(typeof i=="string")return i.length>20&&(i=`${i.substring(0,20)}...`),JSON.stringify(i);if(typeof i=="number"||typeof i=="boolean")return""+i;if(typeof i=="object"){if(i instanceof Array)return"an array";{const e=(function(s){return s.constructor?s.constructor.name:null})(i);return e?`a custom ${e} object`:"an object"}}return typeof i=="function"?"a function":Se(12329,{type:typeof i})}function gn(i,e){if("_delegate"in i&&(i=i._delegate),!(i instanceof e)){if(e.name===i.constructor.name)throw new fe(ne.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=tf(i);throw new fe(ne.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return i}function jt(i,e){const n={typeString:i};return e&&(n.value=e),n}function vu(i,e){if(!eb(i))throw new fe(ne.INVALID_ARGUMENT,"JSON must be an object");let n;for(const s in e)if(e[s]){const o=e[s].typeString,u="value"in e[s]?{value:e[s].value}:void 0;if(!(s in i)){n=`JSON missing required field: '${s}'`;break}const f=i[s];if(o&&typeof f!==o){n=`JSON field '${s}' must be a ${o}.`;break}if(u!==void 0&&f!==u.value){n=`Expected '${s}' field to equal '${u.value}'`;break}}if(n)throw new fe(ne.INVALID_ARGUMENT,n);return!0}const q0=-62135596800,H0=1e6;class ht{static now(){return ht.fromMillis(Date.now())}static fromDate(e){return ht.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),s=Math.floor((e-1e3*n)*H0);return new ht(n,s)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new fe(ne.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new fe(ne.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<q0)throw new fe(ne.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new fe(ne.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/H0}_compareTo(e){return this.seconds===e.seconds?Be(this.nanoseconds,e.nanoseconds):Be(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:ht._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(vu(e,ht._jsonSchema))return new ht(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-q0;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}ht._jsonSchemaVersion="firestore/timestamp/1.0",ht._jsonSchema={type:jt("string",ht._jsonSchemaVersion),seconds:jt("number"),nanoseconds:jt("number")};class Re{static fromTimestamp(e){return new Re(e)}static min(){return new Re(new ht(0,0))}static max(){return new Re(new ht(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const ru=-1;function QI(i,e){const n=i.toTimestamp().seconds,s=i.toTimestamp().nanoseconds+1,o=Re.fromTimestamp(s===1e9?new ht(n+1,0):new ht(n,s));return new ys(o,Te.empty(),e)}function YI(i){return new ys(i.readTime,i.key,ru)}class ys{constructor(e,n,s){this.readTime=e,this.documentKey=n,this.largestBatchId=s}static min(){return new ys(Re.min(),Te.empty(),ru)}static max(){return new ys(Re.max(),Te.empty(),ru)}}function KI(i,e){let n=i.readTime.compareTo(e.readTime);return n!==0?n:(n=Te.comparator(i.documentKey,e.documentKey),n!==0?n:Be(i.largestBatchId,e.largestBatchId))}const $I="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class XI{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function No(i){if(i.code!==ne.FAILED_PRECONDITION||i.message!==$I)throw i;me("LocalStore","Unexpectedly lost primary lease")}class se{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Se(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new se(((s,o)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(s,o)},this.catchCallback=u=>{this.wrapFailure(n,u).next(s,o)}}))}toPromise(){return new Promise(((e,n)=>{this.next(e,n)}))}wrapUserFunction(e){try{const n=e();return n instanceof se?n:se.resolve(n)}catch(n){return se.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction((()=>e(n))):se.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction((()=>e(n))):se.reject(n)}static resolve(e){return new se(((n,s)=>{n(e)}))}static reject(e){return new se(((n,s)=>{s(e)}))}static waitFor(e){return new se(((n,s)=>{let o=0,u=0,f=!1;e.forEach((m=>{++o,m.next((()=>{++u,f&&u===o&&n()}),(p=>s(p)))})),f=!0,u===o&&n()}))}static or(e){let n=se.resolve(!1);for(const s of e)n=n.next((o=>o?se.resolve(o):s()));return n}static forEach(e,n){const s=[];return e.forEach(((o,u)=>{s.push(n.call(this,o,u))})),this.waitFor(s)}static mapArray(e,n){return new se(((s,o)=>{const u=e.length,f=new Array(u);let m=0;for(let p=0;p<u;p++){const g=p;n(e[g]).next((E=>{f[g]=E,++m,m===u&&s(f)}),(E=>o(E)))}}))}static doWhile(e,n){return new se(((s,o)=>{const u=()=>{e()===!0?n().next((()=>{u()}),o):s()};u()}))}}function WI(i){const e=i.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Oo(i){return i.name==="IndexedDbTransactionError"}class nf{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=s=>this.ae(s),this.ue=s=>n.writeSequenceNumber(s))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}nf.ce=-1;const zp=-1;function _u(i){return i==null}function Ph(i){return i===0&&1/i==-1/0}function JI(i){return typeof i=="number"&&Number.isInteger(i)&&!Ph(i)&&i<=Number.MAX_SAFE_INTEGER&&i>=Number.MIN_SAFE_INTEGER}const tb="";function ZI(i){let e="";for(let n=0;n<i.length;n++)e.length>0&&(e=F0(e)),e=e2(i.get(n),e);return F0(e)}function e2(i,e){let n=e;const s=i.length;for(let o=0;o<s;o++){const u=i.charAt(o);switch(u){case"\0":n+="";break;case tb:n+="";break;default:n+=u}}return n}function F0(i){return i+tb+""}function G0(i){let e=0;for(const n in i)Object.prototype.hasOwnProperty.call(i,n)&&e++;return e}function As(i,e){for(const n in i)Object.prototype.hasOwnProperty.call(i,n)&&e(n,i[n])}function nb(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}class gt{constructor(e,n){this.comparator=e,this.root=n||nn.EMPTY}insert(e,n){return new gt(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,nn.BLACK,null,null))}remove(e){return new gt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,nn.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const s=this.comparator(e,n.key);if(s===0)return n.value;s<0?n=n.left:s>0&&(n=n.right)}return null}indexOf(e){let n=0,s=this.root;for(;!s.isEmpty();){const o=this.comparator(e,s.key);if(o===0)return n+s.left.size;o<0?s=s.left:(n+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((n,s)=>(e(n,s),!1)))}toString(){const e=[];return this.inorderTraversal(((n,s)=>(e.push(`${n}:${s}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new lh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new lh(this.root,e,this.comparator,!1)}getReverseIterator(){return new lh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new lh(this.root,e,this.comparator,!0)}}class lh{constructor(e,n,s,o){this.isReverse=o,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=n?s(e.key,n):1,n&&o&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(u===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class nn{constructor(e,n,s,o,u){this.key=e,this.value=n,this.color=s??nn.RED,this.left=o??nn.EMPTY,this.right=u??nn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,s,o,u){return new nn(e??this.key,n??this.value,s??this.color,o??this.left,u??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,s){let o=this;const u=s(e,o.key);return o=u<0?o.copy(null,null,null,o.left.insert(e,n,s),null):u===0?o.copy(null,n,null,null,null):o.copy(null,null,null,null,o.right.insert(e,n,s)),o.fixUp()}removeMin(){if(this.left.isEmpty())return nn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let s,o=this;if(n(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,n),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),n(e,o.key)===0){if(o.right.isEmpty())return nn.EMPTY;s=o.right.min(),o=o.copy(s.key,s.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,n))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,nn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,nn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Se(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Se(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Se(27949);return e+(this.isRed()?0:1)}}nn.EMPTY=null,nn.RED=!0,nn.BLACK=!1;nn.EMPTY=new class{constructor(){this.size=0}get key(){throw Se(57766)}get value(){throw Se(16141)}get color(){throw Se(16727)}get left(){throw Se(29726)}get right(){throw Se(36894)}copy(e,n,s,o,u){return this}insert(e,n,s){return new nn(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Ht{constructor(e){this.comparator=e,this.data=new gt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((n,s)=>(e(n),!1)))}forEachInRange(e,n){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const o=s.getNext();if(this.comparator(o.key,e[1])>=0)return;n(o.key)}}forEachWhile(e,n){let s;for(s=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Q0(this.data.getIterator())}getIteratorFrom(e){return new Q0(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach((s=>{n=n.add(s)})),n}isEqual(e){if(!(e instanceof Ht)||this.size!==e.size)return!1;const n=this.data.getIterator(),s=e.data.getIterator();for(;n.hasNext();){const o=n.getNext().key,u=s.getNext().key;if(this.comparator(o,u)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((n=>{e.push(n)})),e}toString(){const e=[];return this.forEach((n=>e.push(n))),"SortedSet("+e.toString()+")"}copy(e){const n=new Ht(this.comparator);return n.data=e,n}}class Q0{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class Ln{constructor(e){this.fields=e,e.sort(rn.comparator)}static empty(){return new Ln([])}unionWith(e){let n=new Ht(rn.comparator);for(const s of this.fields)n=n.add(s);for(const s of e)n=n.add(s);return new Ln(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return yo(this.fields,e.fields,((n,s)=>n.isEqual(s)))}}class rb extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class an{constructor(e){this.binaryString=e}static fromBase64String(e){const n=(function(o){try{return atob(o)}catch(u){throw typeof DOMException<"u"&&u instanceof DOMException?new rb("Invalid base64 string: "+u):u}})(e);return new an(n)}static fromUint8Array(e){const n=(function(o){let u="";for(let f=0;f<o.length;++f)u+=String.fromCharCode(o[f]);return u})(e);return new an(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const s=new Uint8Array(n.length);for(let o=0;o<n.length;o++)s[o]=n.charCodeAt(o);return s})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Be(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}an.EMPTY_BYTE_STRING=new an("");const t2=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function vs(i){if(Qe(!!i,39018),typeof i=="string"){let e=0;const n=t2.exec(i);if(Qe(!!n,46558,{timestamp:i}),n[1]){let o=n[1];o=(o+"000000000").substr(0,9),e=Number(o)}const s=new Date(i);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:At(i.seconds),nanos:At(i.nanos)}}function At(i){return typeof i=="number"?i:typeof i=="string"?Number(i):0}function _s(i){return typeof i=="string"?an.fromBase64String(i):an.fromUint8Array(i)}const ib="server_timestamp",sb="__type__",ab="__previous_value__",ob="__local_write_time__";function Bp(i){return(i?.mapValue?.fields||{})[sb]?.stringValue===ib}function rf(i){const e=i.mapValue.fields[ab];return Bp(e)?rf(e):e}function iu(i){const e=vs(i.mapValue.fields[ob].timestampValue);return new ht(e.seconds,e.nanos)}class n2{constructor(e,n,s,o,u,f,m,p,g,E){this.databaseId=e,this.appId=n,this.persistenceKey=s,this.host=o,this.ssl=u,this.forceLongPolling=f,this.autoDetectLongPolling=m,this.longPollingOptions=p,this.useFetchStreams=g,this.isUsingEmulator=E}}const Lh="(default)";class su{constructor(e,n){this.projectId=e,this.database=n||Lh}static empty(){return new su("","")}get isDefaultDatabase(){return this.database===Lh}isEqual(e){return e instanceof su&&e.projectId===this.projectId&&e.database===this.database}}const lb="__type__",r2="__max__",uh={mapValue:{}},ub="__vector__",Uh="value";function Es(i){return"nullValue"in i?0:"booleanValue"in i?1:"integerValue"in i||"doubleValue"in i?2:"timestampValue"in i?3:"stringValue"in i?5:"bytesValue"in i?6:"referenceValue"in i?7:"geoPointValue"in i?8:"arrayValue"in i?9:"mapValue"in i?Bp(i)?4:s2(i)?9007199254740991:i2(i)?10:11:Se(28295,{value:i})}function Yr(i,e){if(i===e)return!0;const n=Es(i);if(n!==Es(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return i.booleanValue===e.booleanValue;case 4:return iu(i).isEqual(iu(e));case 3:return(function(o,u){if(typeof o.timestampValue=="string"&&typeof u.timestampValue=="string"&&o.timestampValue.length===u.timestampValue.length)return o.timestampValue===u.timestampValue;const f=vs(o.timestampValue),m=vs(u.timestampValue);return f.seconds===m.seconds&&f.nanos===m.nanos})(i,e);case 5:return i.stringValue===e.stringValue;case 6:return(function(o,u){return _s(o.bytesValue).isEqual(_s(u.bytesValue))})(i,e);case 7:return i.referenceValue===e.referenceValue;case 8:return(function(o,u){return At(o.geoPointValue.latitude)===At(u.geoPointValue.latitude)&&At(o.geoPointValue.longitude)===At(u.geoPointValue.longitude)})(i,e);case 2:return(function(o,u){if("integerValue"in o&&"integerValue"in u)return At(o.integerValue)===At(u.integerValue);if("doubleValue"in o&&"doubleValue"in u){const f=At(o.doubleValue),m=At(u.doubleValue);return f===m?Ph(f)===Ph(m):isNaN(f)&&isNaN(m)}return!1})(i,e);case 9:return yo(i.arrayValue.values||[],e.arrayValue.values||[],Yr);case 10:case 11:return(function(o,u){const f=o.mapValue.fields||{},m=u.mapValue.fields||{};if(G0(f)!==G0(m))return!1;for(const p in f)if(f.hasOwnProperty(p)&&(m[p]===void 0||!Yr(f[p],m[p])))return!1;return!0})(i,e);default:return Se(52216,{left:i})}}function au(i,e){return(i.values||[]).find((n=>Yr(n,e)))!==void 0}function vo(i,e){if(i===e)return 0;const n=Es(i),s=Es(e);if(n!==s)return Be(n,s);switch(n){case 0:case 9007199254740991:return 0;case 1:return Be(i.booleanValue,e.booleanValue);case 2:return(function(u,f){const m=At(u.integerValue||u.doubleValue),p=At(f.integerValue||f.doubleValue);return m<p?-1:m>p?1:m===p?0:isNaN(m)?isNaN(p)?0:-1:1})(i,e);case 3:return Y0(i.timestampValue,e.timestampValue);case 4:return Y0(iu(i),iu(e));case 5:return tp(i.stringValue,e.stringValue);case 6:return(function(u,f){const m=_s(u),p=_s(f);return m.compareTo(p)})(i.bytesValue,e.bytesValue);case 7:return(function(u,f){const m=u.split("/"),p=f.split("/");for(let g=0;g<m.length&&g<p.length;g++){const E=Be(m[g],p[g]);if(E!==0)return E}return Be(m.length,p.length)})(i.referenceValue,e.referenceValue);case 8:return(function(u,f){const m=Be(At(u.latitude),At(f.latitude));return m!==0?m:Be(At(u.longitude),At(f.longitude))})(i.geoPointValue,e.geoPointValue);case 9:return K0(i.arrayValue,e.arrayValue);case 10:return(function(u,f){const m=u.fields||{},p=f.fields||{},g=m[Uh]?.arrayValue,E=p[Uh]?.arrayValue,T=Be(g?.values?.length||0,E?.values?.length||0);return T!==0?T:K0(g,E)})(i.mapValue,e.mapValue);case 11:return(function(u,f){if(u===uh.mapValue&&f===uh.mapValue)return 0;if(u===uh.mapValue)return 1;if(f===uh.mapValue)return-1;const m=u.fields||{},p=Object.keys(m),g=f.fields||{},E=Object.keys(g);p.sort(),E.sort();for(let T=0;T<p.length&&T<E.length;++T){const R=tp(p[T],E[T]);if(R!==0)return R;const O=vo(m[p[T]],g[E[T]]);if(O!==0)return O}return Be(p.length,E.length)})(i.mapValue,e.mapValue);default:throw Se(23264,{he:n})}}function Y0(i,e){if(typeof i=="string"&&typeof e=="string"&&i.length===e.length)return Be(i,e);const n=vs(i),s=vs(e),o=Be(n.seconds,s.seconds);return o!==0?o:Be(n.nanos,s.nanos)}function K0(i,e){const n=i.values||[],s=e.values||[];for(let o=0;o<n.length&&o<s.length;++o){const u=vo(n[o],s[o]);if(u)return u}return Be(n.length,s.length)}function _o(i){return np(i)}function np(i){return"nullValue"in i?"null":"booleanValue"in i?""+i.booleanValue:"integerValue"in i?""+i.integerValue:"doubleValue"in i?""+i.doubleValue:"timestampValue"in i?(function(n){const s=vs(n);return`time(${s.seconds},${s.nanos})`})(i.timestampValue):"stringValue"in i?i.stringValue:"bytesValue"in i?(function(n){return _s(n).toBase64()})(i.bytesValue):"referenceValue"in i?(function(n){return Te.fromName(n).toString()})(i.referenceValue):"geoPointValue"in i?(function(n){return`geo(${n.latitude},${n.longitude})`})(i.geoPointValue):"arrayValue"in i?(function(n){let s="[",o=!0;for(const u of n.values||[])o?o=!1:s+=",",s+=np(u);return s+"]"})(i.arrayValue):"mapValue"in i?(function(n){const s=Object.keys(n.fields||{}).sort();let o="{",u=!0;for(const f of s)u?u=!1:o+=",",o+=`${f}:${np(n.fields[f])}`;return o+"}"})(i.mapValue):Se(61005,{value:i})}function Th(i){switch(Es(i)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=rf(i);return e?16+Th(e):16;case 5:return 2*i.stringValue.length;case 6:return _s(i.bytesValue).approximateByteSize();case 7:return i.referenceValue.length;case 9:return(function(s){return(s.values||[]).reduce(((o,u)=>o+Th(u)),0)})(i.arrayValue);case 10:case 11:return(function(s){let o=0;return As(s.fields,((u,f)=>{o+=u.length+Th(f)})),o})(i.mapValue);default:throw Se(13486,{value:i})}}function $0(i,e){return{referenceValue:`projects/${i.projectId}/databases/${i.database}/documents/${e.path.canonicalString()}`}}function rp(i){return!!i&&"integerValue"in i}function qp(i){return!!i&&"arrayValue"in i}function X0(i){return!!i&&"nullValue"in i}function W0(i){return!!i&&"doubleValue"in i&&isNaN(Number(i.doubleValue))}function bh(i){return!!i&&"mapValue"in i}function i2(i){return(i?.mapValue?.fields||{})[lb]?.stringValue===ub}function $l(i){if(i.geoPointValue)return{geoPointValue:{...i.geoPointValue}};if(i.timestampValue&&typeof i.timestampValue=="object")return{timestampValue:{...i.timestampValue}};if(i.mapValue){const e={mapValue:{fields:{}}};return As(i.mapValue.fields,((n,s)=>e.mapValue.fields[n]=$l(s))),e}if(i.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(i.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=$l(i.arrayValue.values[n]);return e}return{...i}}function s2(i){return(((i.mapValue||{}).fields||{}).__type__||{}).stringValue===r2}class mn{constructor(e){this.value=e}static empty(){return new mn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let s=0;s<e.length-1;++s)if(n=(n.mapValue.fields||{})[e.get(s)],!bh(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=$l(n)}setAll(e){let n=rn.emptyPath(),s={},o=[];e.forEach(((f,m)=>{if(!n.isImmediateParentOf(m)){const p=this.getFieldsMap(n);this.applyChanges(p,s,o),s={},o=[],n=m.popLast()}f?s[m.lastSegment()]=$l(f):o.push(m.lastSegment())}));const u=this.getFieldsMap(n);this.applyChanges(u,s,o)}delete(e){const n=this.field(e.popLast());bh(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Yr(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let s=0;s<e.length;++s){let o=n.mapValue.fields[e.get(s)];bh(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},n.mapValue.fields[e.get(s)]=o),n=o}return n.mapValue.fields}applyChanges(e,n,s){As(n,((o,u)=>e[o]=u));for(const o of s)delete e[o]}clone(){return new mn($l(this.value))}}function cb(i){const e=[];return As(i.fields,((n,s)=>{const o=new rn([n]);if(bh(s)){const u=cb(s.mapValue).fields;if(u.length===0)e.push(o);else for(const f of u)e.push(o.child(f))}else e.push(o)})),new Ln(e)}class Kt{constructor(e,n,s,o,u,f,m){this.key=e,this.documentType=n,this.version=s,this.readTime=o,this.createTime=u,this.data=f,this.documentState=m}static newInvalidDocument(e){return new Kt(e,0,Re.min(),Re.min(),Re.min(),mn.empty(),0)}static newFoundDocument(e,n,s,o){return new Kt(e,1,n,Re.min(),s,o,0)}static newNoDocument(e,n){return new Kt(e,2,n,Re.min(),Re.min(),mn.empty(),0)}static newUnknownDocument(e,n){return new Kt(e,3,n,Re.min(),Re.min(),mn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Re.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=mn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=mn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Re.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Kt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Kt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class jh{constructor(e,n){this.position=e,this.inclusive=n}}function J0(i,e,n){let s=0;for(let o=0;o<i.position.length;o++){const u=e[o],f=i.position[o];if(u.field.isKeyField()?s=Te.comparator(Te.fromName(f.referenceValue),n.key):s=vo(f,n.data.field(u.field)),u.dir==="desc"&&(s*=-1),s!==0)break}return s}function Z0(i,e){if(i===null)return e===null;if(e===null||i.inclusive!==e.inclusive||i.position.length!==e.position.length)return!1;for(let n=0;n<i.position.length;n++)if(!Yr(i.position[n],e.position[n]))return!1;return!0}class zh{constructor(e,n="asc"){this.field=e,this.dir=n}}function a2(i,e){return i.dir===e.dir&&i.field.isEqual(e.field)}class hb{}class Ut extends hb{constructor(e,n,s){super(),this.field=e,this.op=n,this.value=s}static create(e,n,s){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,s):new l2(e,n,s):n==="array-contains"?new h2(e,s):n==="in"?new f2(e,s):n==="not-in"?new d2(e,s):n==="array-contains-any"?new m2(e,s):new Ut(e,n,s)}static createKeyFieldInFilter(e,n,s){return n==="in"?new u2(e,s):new c2(e,s)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(vo(n,this.value)):n!==null&&Es(this.value)===Es(n)&&this.matchesComparison(vo(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Se(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class yr extends hb{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new yr(e,n)}matches(e){return fb(this)?this.filters.find((n=>!n.matches(e)))===void 0:this.filters.find((n=>n.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,n)=>e.concat(n.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function fb(i){return i.op==="and"}function db(i){return o2(i)&&fb(i)}function o2(i){for(const e of i.filters)if(e instanceof yr)return!1;return!0}function ip(i){if(i instanceof Ut)return i.field.canonicalString()+i.op.toString()+_o(i.value);if(db(i))return i.filters.map((e=>ip(e))).join(",");{const e=i.filters.map((n=>ip(n))).join(",");return`${i.op}(${e})`}}function mb(i,e){return i instanceof Ut?(function(s,o){return o instanceof Ut&&s.op===o.op&&s.field.isEqual(o.field)&&Yr(s.value,o.value)})(i,e):i instanceof yr?(function(s,o){return o instanceof yr&&s.op===o.op&&s.filters.length===o.filters.length?s.filters.reduce(((u,f,m)=>u&&mb(f,o.filters[m])),!0):!1})(i,e):void Se(19439)}function pb(i){return i instanceof Ut?(function(n){return`${n.field.canonicalString()} ${n.op} ${_o(n.value)}`})(i):i instanceof yr?(function(n){return n.op.toString()+" {"+n.getFilters().map(pb).join(" ,")+"}"})(i):"Filter"}class l2 extends Ut{constructor(e,n,s){super(e,n,s),this.key=Te.fromName(s.referenceValue)}matches(e){const n=Te.comparator(e.key,this.key);return this.matchesComparison(n)}}class u2 extends Ut{constructor(e,n){super(e,"in",n),this.keys=gb("in",n)}matches(e){return this.keys.some((n=>n.isEqual(e.key)))}}class c2 extends Ut{constructor(e,n){super(e,"not-in",n),this.keys=gb("not-in",n)}matches(e){return!this.keys.some((n=>n.isEqual(e.key)))}}function gb(i,e){return(e.arrayValue?.values||[]).map((n=>Te.fromName(n.referenceValue)))}class h2 extends Ut{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return qp(n)&&au(n.arrayValue,this.value)}}class f2 extends Ut{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&au(this.value.arrayValue,n)}}class d2 extends Ut{constructor(e,n){super(e,"not-in",n)}matches(e){if(au(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!au(this.value.arrayValue,n)}}class m2 extends Ut{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!qp(n)||!n.arrayValue.values)&&n.arrayValue.values.some((s=>au(this.value.arrayValue,s)))}}class p2{constructor(e,n=null,s=[],o=[],u=null,f=null,m=null){this.path=e,this.collectionGroup=n,this.orderBy=s,this.filters=o,this.limit=u,this.startAt=f,this.endAt=m,this.Te=null}}function eE(i,e=null,n=[],s=[],o=null,u=null,f=null){return new p2(i,e,n,s,o,u,f)}function Hp(i){const e=Ie(i);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((s=>ip(s))).join(","),n+="|ob:",n+=e.orderBy.map((s=>(function(u){return u.field.canonicalString()+u.dir})(s))).join(","),_u(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((s=>_o(s))).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((s=>_o(s))).join(",")),e.Te=n}return e.Te}function Fp(i,e){if(i.limit!==e.limit||i.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<i.orderBy.length;n++)if(!a2(i.orderBy[n],e.orderBy[n]))return!1;if(i.filters.length!==e.filters.length)return!1;for(let n=0;n<i.filters.length;n++)if(!mb(i.filters[n],e.filters[n]))return!1;return i.collectionGroup===e.collectionGroup&&!!i.path.isEqual(e.path)&&!!Z0(i.startAt,e.startAt)&&Z0(i.endAt,e.endAt)}function sp(i){return Te.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}class Eu{constructor(e,n=null,s=[],o=[],u=null,f="F",m=null,p=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=s,this.filters=o,this.limit=u,this.limitType=f,this.startAt=m,this.endAt=p,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function g2(i,e,n,s,o,u,f,m){return new Eu(i,e,n,s,o,u,f,m)}function sf(i){return new Eu(i)}function tE(i){return i.filters.length===0&&i.limit===null&&i.startAt==null&&i.endAt==null&&(i.explicitOrderBy.length===0||i.explicitOrderBy.length===1&&i.explicitOrderBy[0].field.isKeyField())}function yb(i){return i.collectionGroup!==null}function Xl(i){const e=Ie(i);if(e.Ie===null){e.Ie=[];const n=new Set;for(const u of e.explicitOrderBy)e.Ie.push(u),n.add(u.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(f){let m=new Ht(rn.comparator);return f.filters.forEach((p=>{p.getFlattenedFilters().forEach((g=>{g.isInequality()&&(m=m.add(g.field))}))})),m})(e).forEach((u=>{n.has(u.canonicalString())||u.isKeyField()||e.Ie.push(new zh(u,s))})),n.has(rn.keyField().canonicalString())||e.Ie.push(new zh(rn.keyField(),s))}return e.Ie}function Hr(i){const e=Ie(i);return e.Ee||(e.Ee=y2(e,Xl(i))),e.Ee}function y2(i,e){if(i.limitType==="F")return eE(i.path,i.collectionGroup,e,i.filters,i.limit,i.startAt,i.endAt);{e=e.map((o=>{const u=o.dir==="desc"?"asc":"desc";return new zh(o.field,u)}));const n=i.endAt?new jh(i.endAt.position,i.endAt.inclusive):null,s=i.startAt?new jh(i.startAt.position,i.startAt.inclusive):null;return eE(i.path,i.collectionGroup,e,i.filters,i.limit,n,s)}}function ap(i,e){const n=i.filters.concat([e]);return new Eu(i.path,i.collectionGroup,i.explicitOrderBy.slice(),n,i.limit,i.limitType,i.startAt,i.endAt)}function op(i,e,n){return new Eu(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),e,n,i.startAt,i.endAt)}function af(i,e){return Fp(Hr(i),Hr(e))&&i.limitType===e.limitType}function vb(i){return`${Hp(Hr(i))}|lt:${i.limitType}`}function so(i){return`Query(target=${(function(n){let s=n.path.canonicalString();return n.collectionGroup!==null&&(s+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(s+=`, filters: [${n.filters.map((o=>pb(o))).join(", ")}]`),_u(n.limit)||(s+=", limit: "+n.limit),n.orderBy.length>0&&(s+=`, orderBy: [${n.orderBy.map((o=>(function(f){return`${f.field.canonicalString()} (${f.dir})`})(o))).join(", ")}]`),n.startAt&&(s+=", startAt: ",s+=n.startAt.inclusive?"b:":"a:",s+=n.startAt.position.map((o=>_o(o))).join(",")),n.endAt&&(s+=", endAt: ",s+=n.endAt.inclusive?"a:":"b:",s+=n.endAt.position.map((o=>_o(o))).join(",")),`Target(${s})`})(Hr(i))}; limitType=${i.limitType})`}function of(i,e){return e.isFoundDocument()&&(function(s,o){const u=o.key.path;return s.collectionGroup!==null?o.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(u):Te.isDocumentKey(s.path)?s.path.isEqual(u):s.path.isImmediateParentOf(u)})(i,e)&&(function(s,o){for(const u of Xl(s))if(!u.field.isKeyField()&&o.data.field(u.field)===null)return!1;return!0})(i,e)&&(function(s,o){for(const u of s.filters)if(!u.matches(o))return!1;return!0})(i,e)&&(function(s,o){return!(s.startAt&&!(function(f,m,p){const g=J0(f,m,p);return f.inclusive?g<=0:g<0})(s.startAt,Xl(s),o)||s.endAt&&!(function(f,m,p){const g=J0(f,m,p);return f.inclusive?g>=0:g>0})(s.endAt,Xl(s),o))})(i,e)}function v2(i){return i.collectionGroup||(i.path.length%2==1?i.path.lastSegment():i.path.get(i.path.length-2))}function _b(i){return(e,n)=>{let s=!1;for(const o of Xl(i)){const u=_2(o,e,n);if(u!==0)return u;s=s||o.field.isKeyField()}return 0}}function _2(i,e,n){const s=i.field.isKeyField()?Te.comparator(e.key,n.key):(function(u,f,m){const p=f.data.field(u),g=m.data.field(u);return p!==null&&g!==null?vo(p,g):Se(42886)})(i.field,e,n);switch(i.dir){case"asc":return s;case"desc":return-1*s;default:return Se(19790,{direction:i.dir})}}class da{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s!==void 0){for(const[o,u]of s)if(this.equalsFn(o,e))return u}}has(e){return this.get(e)!==void 0}set(e,n){const s=this.mapKeyFn(e),o=this.inner[s];if(o===void 0)return this.inner[s]=[[e,n]],void this.innerSize++;for(let u=0;u<o.length;u++)if(this.equalsFn(o[u][0],e))return void(o[u]=[e,n]);o.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s===void 0)return!1;for(let o=0;o<s.length;o++)if(this.equalsFn(s[o][0],e))return s.length===1?delete this.inner[n]:s.splice(o,1),this.innerSize--,!0;return!1}forEach(e){As(this.inner,((n,s)=>{for(const[o,u]of s)e(o,u)}))}isEmpty(){return nb(this.inner)}size(){return this.innerSize}}const E2=new gt(Te.comparator);function wi(){return E2}const Eb=new gt(Te.comparator);function Hl(...i){let e=Eb;for(const n of i)e=e.insert(n.key,n);return e}function Tb(i){let e=Eb;return i.forEach(((n,s)=>e=e.insert(n,s.overlayedDocument))),e}function ia(){return Wl()}function bb(){return Wl()}function Wl(){return new da((i=>i.toString()),((i,e)=>i.isEqual(e)))}const T2=new gt(Te.comparator),b2=new Ht(Te.comparator);function qe(...i){let e=b2;for(const n of i)e=e.add(n);return e}const S2=new Ht(Be);function A2(){return S2}function Gp(i,e){if(i.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ph(e)?"-0":e}}function Sb(i){return{integerValue:""+i}}function Ab(i,e){return JI(e)?Sb(e):Gp(i,e)}class lf{constructor(){this._=void 0}}function w2(i,e,n){return i instanceof ou?(function(o,u){const f={fields:{[sb]:{stringValue:ib},[ob]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return u&&Bp(u)&&(u=rf(u)),u&&(f.fields[ab]=u),{mapValue:f}})(n,e):i instanceof lu?Rb(i,e):i instanceof uu?Cb(i,e):(function(o,u){const f=wb(o,u),m=nE(f)+nE(o.Ae);return rp(f)&&rp(o.Ae)?Sb(m):Gp(o.serializer,m)})(i,e)}function R2(i,e,n){return i instanceof lu?Rb(i,e):i instanceof uu?Cb(i,e):n}function wb(i,e){return i instanceof cu?(function(s){return rp(s)||(function(u){return!!u&&"doubleValue"in u})(s)})(e)?e:{integerValue:0}:null}class ou extends lf{}class lu extends lf{constructor(e){super(),this.elements=e}}function Rb(i,e){const n=xb(e);for(const s of i.elements)n.some((o=>Yr(o,s)))||n.push(s);return{arrayValue:{values:n}}}class uu extends lf{constructor(e){super(),this.elements=e}}function Cb(i,e){let n=xb(e);for(const s of i.elements)n=n.filter((o=>!Yr(o,s)));return{arrayValue:{values:n}}}class cu extends lf{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function nE(i){return At(i.integerValue||i.doubleValue)}function xb(i){return qp(i)&&i.arrayValue.values?i.arrayValue.values.slice():[]}class Ib{constructor(e,n){this.field=e,this.transform=n}}function C2(i,e){return i.field.isEqual(e.field)&&(function(s,o){return s instanceof lu&&o instanceof lu||s instanceof uu&&o instanceof uu?yo(s.elements,o.elements,Yr):s instanceof cu&&o instanceof cu?Yr(s.Ae,o.Ae):s instanceof ou&&o instanceof ou})(i.transform,e.transform)}class x2{constructor(e,n){this.version=e,this.transformResults=n}}class sn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new sn}static exists(e){return new sn(void 0,e)}static updateTime(e){return new sn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Sh(i,e){return i.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(i.updateTime):i.exists===void 0||i.exists===e.isFoundDocument()}class uf{}function Db(i,e){if(!i.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return i.isNoDocument()?new cf(i.key,sn.none()):new Tu(i.key,i.data,sn.none());{const n=i.data,s=mn.empty();let o=new Ht(rn.comparator);for(let u of e.fields)if(!o.has(u)){let f=n.field(u);f===null&&u.length>1&&(u=u.popLast(),f=n.field(u)),f===null?s.delete(u):s.set(u,f),o=o.add(u)}return new ws(i.key,s,new Ln(o.toArray()),sn.none())}}function I2(i,e,n){i instanceof Tu?(function(o,u,f){const m=o.value.clone(),p=iE(o.fieldTransforms,u,f.transformResults);m.setAll(p),u.convertToFoundDocument(f.version,m).setHasCommittedMutations()})(i,e,n):i instanceof ws?(function(o,u,f){if(!Sh(o.precondition,u))return void u.convertToUnknownDocument(f.version);const m=iE(o.fieldTransforms,u,f.transformResults),p=u.data;p.setAll(Nb(o)),p.setAll(m),u.convertToFoundDocument(f.version,p).setHasCommittedMutations()})(i,e,n):(function(o,u,f){u.convertToNoDocument(f.version).setHasCommittedMutations()})(0,e,n)}function Jl(i,e,n,s){return i instanceof Tu?(function(u,f,m,p){if(!Sh(u.precondition,f))return m;const g=u.value.clone(),E=sE(u.fieldTransforms,p,f);return g.setAll(E),f.convertToFoundDocument(f.version,g).setHasLocalMutations(),null})(i,e,n,s):i instanceof ws?(function(u,f,m,p){if(!Sh(u.precondition,f))return m;const g=sE(u.fieldTransforms,p,f),E=f.data;return E.setAll(Nb(u)),E.setAll(g),f.convertToFoundDocument(f.version,E).setHasLocalMutations(),m===null?null:m.unionWith(u.fieldMask.fields).unionWith(u.fieldTransforms.map((T=>T.field)))})(i,e,n,s):(function(u,f,m){return Sh(u.precondition,f)?(f.convertToNoDocument(f.version).setHasLocalMutations(),null):m})(i,e,n)}function D2(i,e){let n=null;for(const s of i.fieldTransforms){const o=e.data.field(s.field),u=wb(s.transform,o||null);u!=null&&(n===null&&(n=mn.empty()),n.set(s.field,u))}return n||null}function rE(i,e){return i.type===e.type&&!!i.key.isEqual(e.key)&&!!i.precondition.isEqual(e.precondition)&&!!(function(s,o){return s===void 0&&o===void 0||!(!s||!o)&&yo(s,o,((u,f)=>C2(u,f)))})(i.fieldTransforms,e.fieldTransforms)&&(i.type===0?i.value.isEqual(e.value):i.type!==1||i.data.isEqual(e.data)&&i.fieldMask.isEqual(e.fieldMask))}class Tu extends uf{constructor(e,n,s,o=[]){super(),this.key=e,this.value=n,this.precondition=s,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class ws extends uf{constructor(e,n,s,o,u=[]){super(),this.key=e,this.data=n,this.fieldMask=s,this.precondition=o,this.fieldTransforms=u,this.type=1}getFieldMask(){return this.fieldMask}}function Nb(i){const e=new Map;return i.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const s=i.data.field(n);e.set(n,s)}})),e}function iE(i,e,n){const s=new Map;Qe(i.length===n.length,32656,{Re:n.length,Ve:i.length});for(let o=0;o<n.length;o++){const u=i[o],f=u.transform,m=e.data.field(u.field);s.set(u.field,R2(f,m,n[o]))}return s}function sE(i,e,n){const s=new Map;for(const o of i){const u=o.transform,f=n.data.field(o.field);s.set(o.field,w2(u,f,e))}return s}class cf extends uf{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Ob extends uf{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class N2{constructor(e,n,s,o){this.batchId=e,this.localWriteTime=n,this.baseMutations=s,this.mutations=o}applyToRemoteDocument(e,n){const s=n.mutationResults;for(let o=0;o<this.mutations.length;o++){const u=this.mutations[o];u.key.isEqual(e.key)&&I2(u,e,s[o])}}applyToLocalView(e,n){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(n=Jl(s,e,n,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(n=Jl(s,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const s=bb();return this.mutations.forEach((o=>{const u=e.get(o.key),f=u.overlayedDocument;let m=this.applyToLocalView(f,u.mutatedFields);m=n.has(o.key)?null:m;const p=Db(f,m);p!==null&&s.set(o.key,p),f.isValidDocument()||f.convertToNoDocument(Re.min())})),s}keys(){return this.mutations.reduce(((e,n)=>e.add(n.key)),qe())}isEqual(e){return this.batchId===e.batchId&&yo(this.mutations,e.mutations,((n,s)=>rE(n,s)))&&yo(this.baseMutations,e.baseMutations,((n,s)=>rE(n,s)))}}class Qp{constructor(e,n,s,o){this.batch=e,this.commitVersion=n,this.mutationResults=s,this.docVersions=o}static from(e,n,s){Qe(e.mutations.length===s.length,58842,{me:e.mutations.length,fe:s.length});let o=(function(){return T2})();const u=e.mutations;for(let f=0;f<u.length;f++)o=o.insert(u[f].key,s[f].version);return new Qp(e,n,s,o)}}class O2{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class M2{constructor(e,n){this.count=e,this.unchangedNames=n}}var Pt,Ge;function Mb(i){switch(i){case ne.OK:return Se(64938);case ne.CANCELLED:case ne.UNKNOWN:case ne.DEADLINE_EXCEEDED:case ne.RESOURCE_EXHAUSTED:case ne.INTERNAL:case ne.UNAVAILABLE:case ne.UNAUTHENTICATED:return!1;case ne.INVALID_ARGUMENT:case ne.NOT_FOUND:case ne.ALREADY_EXISTS:case ne.PERMISSION_DENIED:case ne.FAILED_PRECONDITION:case ne.ABORTED:case ne.OUT_OF_RANGE:case ne.UNIMPLEMENTED:case ne.DATA_LOSS:return!0;default:return Se(15467,{code:i})}}function Vb(i){if(i===void 0)return Ai("GRPC error has no .code"),ne.UNKNOWN;switch(i){case Pt.OK:return ne.OK;case Pt.CANCELLED:return ne.CANCELLED;case Pt.UNKNOWN:return ne.UNKNOWN;case Pt.DEADLINE_EXCEEDED:return ne.DEADLINE_EXCEEDED;case Pt.RESOURCE_EXHAUSTED:return ne.RESOURCE_EXHAUSTED;case Pt.INTERNAL:return ne.INTERNAL;case Pt.UNAVAILABLE:return ne.UNAVAILABLE;case Pt.UNAUTHENTICATED:return ne.UNAUTHENTICATED;case Pt.INVALID_ARGUMENT:return ne.INVALID_ARGUMENT;case Pt.NOT_FOUND:return ne.NOT_FOUND;case Pt.ALREADY_EXISTS:return ne.ALREADY_EXISTS;case Pt.PERMISSION_DENIED:return ne.PERMISSION_DENIED;case Pt.FAILED_PRECONDITION:return ne.FAILED_PRECONDITION;case Pt.ABORTED:return ne.ABORTED;case Pt.OUT_OF_RANGE:return ne.OUT_OF_RANGE;case Pt.UNIMPLEMENTED:return ne.UNIMPLEMENTED;case Pt.DATA_LOSS:return ne.DATA_LOSS;default:return Se(39323,{code:i})}}(Ge=Pt||(Pt={}))[Ge.OK=0]="OK",Ge[Ge.CANCELLED=1]="CANCELLED",Ge[Ge.UNKNOWN=2]="UNKNOWN",Ge[Ge.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ge[Ge.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ge[Ge.NOT_FOUND=5]="NOT_FOUND",Ge[Ge.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ge[Ge.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ge[Ge.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ge[Ge.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ge[Ge.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ge[Ge.ABORTED=10]="ABORTED",Ge[Ge.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ge[Ge.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ge[Ge.INTERNAL=13]="INTERNAL",Ge[Ge.UNAVAILABLE=14]="UNAVAILABLE",Ge[Ge.DATA_LOSS=15]="DATA_LOSS";function V2(){return new TextEncoder}const k2=new ms([4294967295,4294967295],0);function aE(i){const e=V2().encode(i),n=new GT;return n.update(e),new Uint8Array(n.digest())}function oE(i){const e=new DataView(i.buffer),n=e.getUint32(0,!0),s=e.getUint32(4,!0),o=e.getUint32(8,!0),u=e.getUint32(12,!0);return[new ms([n,s],0),new ms([o,u],0)]}class Yp{constructor(e,n,s){if(this.bitmap=e,this.padding=n,this.hashCount=s,n<0||n>=8)throw new Fl(`Invalid padding: ${n}`);if(s<0)throw new Fl(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new Fl(`Invalid hash count: ${s}`);if(e.length===0&&n!==0)throw new Fl(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=ms.fromNumber(this.ge)}ye(e,n,s){let o=e.add(n.multiply(ms.fromNumber(s)));return o.compare(k2)===1&&(o=new ms([o.getBits(0),o.getBits(1)],0)),o.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=aE(e),[s,o]=oE(n);for(let u=0;u<this.hashCount;u++){const f=this.ye(s,o,u);if(!this.we(f))return!1}return!0}static create(e,n,s){const o=e%8==0?0:8-e%8,u=new Uint8Array(Math.ceil(e/8)),f=new Yp(u,o,n);return s.forEach((m=>f.insert(m))),f}insert(e){if(this.ge===0)return;const n=aE(e),[s,o]=oE(n);for(let u=0;u<this.hashCount;u++){const f=this.ye(s,o,u);this.Se(f)}}Se(e){const n=Math.floor(e/8),s=e%8;this.bitmap[n]|=1<<s}}class Fl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class hf{constructor(e,n,s,o,u){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=s,this.documentUpdates=o,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,n,s){const o=new Map;return o.set(e,bu.createSynthesizedTargetChangeForCurrentChange(e,n,s)),new hf(Re.min(),o,new gt(Be),wi(),qe())}}class bu{constructor(e,n,s,o,u){this.resumeToken=e,this.current=n,this.addedDocuments=s,this.modifiedDocuments=o,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,n,s){return new bu(s,n,qe(),qe(),qe())}}class Ah{constructor(e,n,s,o){this.be=e,this.removedTargetIds=n,this.key=s,this.De=o}}class kb{constructor(e,n){this.targetId=e,this.Ce=n}}class Pb{constructor(e,n,s=an.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=n,this.resumeToken=s,this.cause=o}}class lE{constructor(){this.ve=0,this.Fe=uE(),this.Me=an.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=qe(),n=qe(),s=qe();return this.Fe.forEach(((o,u)=>{switch(u){case 0:e=e.add(o);break;case 2:n=n.add(o);break;case 1:s=s.add(o);break;default:Se(38017,{changeType:u})}})),new bu(this.Me,this.xe,e,n,s)}qe(){this.Oe=!1,this.Fe=uE()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Qe(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class P2{constructor(e){this.Ge=e,this.ze=new Map,this.je=wi(),this.Je=ch(),this.He=ch(),this.Ye=new gt(Be)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,(n=>{const s=this.nt(n);switch(e.state){case 0:this.rt(n)&&s.Le(e.resumeToken);break;case 1:s.Ke(),s.Ne||s.qe(),s.Le(e.resumeToken);break;case 2:s.Ke(),s.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(s.We(),s.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),s.Le(e.resumeToken));break;default:Se(56790,{state:e.state})}}))}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach(((s,o)=>{this.rt(o)&&n(o)}))}st(e){const n=e.targetId,s=e.Ce.count,o=this.ot(n);if(o){const u=o.target;if(sp(u))if(s===0){const f=new Te(u.path);this.et(n,f,Kt.newNoDocument(f,Re.min()))}else Qe(s===1,20013,{expectedCount:s});else{const f=this._t(n);if(f!==s){const m=this.ut(e),p=m?this.ct(m,e,f):1;if(p!==0){this.it(n);const g=p===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,g)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:s="",padding:o=0},hashCount:u=0}=n;let f,m;try{f=_s(s).toUint8Array()}catch(p){if(p instanceof rb)return go("Decoding the base64 bloom filter in existence filter failed ("+p.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw p}try{m=new Yp(f,o,u)}catch(p){return go(p instanceof Fl?"BloomFilter error: ":"Applying bloom filter failed: ",p),null}return m.ge===0?null:m}ct(e,n,s){return n.Ce.count===s-this.Pt(e,n.targetId)?0:2}Pt(e,n){const s=this.Ge.getRemoteKeysForTarget(n);let o=0;return s.forEach((u=>{const f=this.Ge.ht(),m=`projects/${f.projectId}/databases/${f.database}/documents/${u.path.canonicalString()}`;e.mightContain(m)||(this.et(n,u,null),o++)})),o}Tt(e){const n=new Map;this.ze.forEach(((u,f)=>{const m=this.ot(f);if(m){if(u.current&&sp(m.target)){const p=new Te(m.target.path);this.It(p).has(f)||this.Et(f,p)||this.et(f,p,Kt.newNoDocument(p,e))}u.Be&&(n.set(f,u.ke()),u.qe())}}));let s=qe();this.He.forEach(((u,f)=>{let m=!0;f.forEachWhile((p=>{const g=this.ot(p);return!g||g.purpose==="TargetPurposeLimboResolution"||(m=!1,!1)})),m&&(s=s.add(u))})),this.je.forEach(((u,f)=>f.setReadTime(e)));const o=new hf(e,n,this.Ye,this.je,s);return this.je=wi(),this.Je=ch(),this.He=ch(),this.Ye=new gt(Be),o}Xe(e,n){if(!this.rt(e))return;const s=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,s),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,s){if(!this.rt(e))return;const o=this.nt(e);this.Et(e,n)?o.Qe(n,1):o.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),s&&(this.je=this.je.insert(n,s))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new lE,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new Ht(Be),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new Ht(Be),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||me("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new lE),this.Ge.getRemoteKeysForTarget(e).forEach((n=>{this.et(e,n,null)}))}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function ch(){return new gt(Te.comparator)}function uE(){return new gt(Te.comparator)}const L2={asc:"ASCENDING",desc:"DESCENDING"},U2={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},j2={and:"AND",or:"OR"};class z2{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function lp(i,e){return i.useProto3Json||_u(e)?e:{value:e}}function Bh(i,e){return i.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Lb(i,e){return i.useProto3Json?e.toBase64():e.toUint8Array()}function B2(i,e){return Bh(i,e.toTimestamp())}function Un(i){return Qe(!!i,49232),Re.fromTimestamp((function(n){const s=vs(n);return new ht(s.seconds,s.nanos)})(i))}function Kp(i,e){return up(i,e).canonicalString()}function up(i,e){const n=(function(o){return new at(["projects",o.projectId,"databases",o.database])})(i).child("documents");return e===void 0?n:n.child(e)}function Ub(i){const e=at.fromString(i);return Qe(Fb(e),10190,{key:e.toString()}),e}function qh(i,e){return Kp(i.databaseId,e.path)}function Zl(i,e){const n=Ub(e);if(n.get(1)!==i.databaseId.projectId)throw new fe(ne.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+i.databaseId.projectId);if(n.get(3)!==i.databaseId.database)throw new fe(ne.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+i.databaseId.database);return new Te(zb(n))}function jb(i,e){return Kp(i.databaseId,e)}function q2(i){const e=Ub(i);return e.length===4?at.emptyPath():zb(e)}function cp(i){return new at(["projects",i.databaseId.projectId,"databases",i.databaseId.database]).canonicalString()}function zb(i){return Qe(i.length>4&&i.get(4)==="documents",29091,{key:i.toString()}),i.popFirst(5)}function cE(i,e,n){return{name:qh(i,e),fields:n.value.mapValue.fields}}function H2(i,e){return"found"in e?(function(s,o){Qe(!!o.found,43571),o.found.name,o.found.updateTime;const u=Zl(s,o.found.name),f=Un(o.found.updateTime),m=o.found.createTime?Un(o.found.createTime):Re.min(),p=new mn({mapValue:{fields:o.found.fields}});return Kt.newFoundDocument(u,f,m,p)})(i,e):"missing"in e?(function(s,o){Qe(!!o.missing,3894),Qe(!!o.readTime,22933);const u=Zl(s,o.missing),f=Un(o.readTime);return Kt.newNoDocument(u,f)})(i,e):Se(7234,{result:e})}function F2(i,e){let n;if("targetChange"in e){e.targetChange;const s=(function(g){return g==="NO_CHANGE"?0:g==="ADD"?1:g==="REMOVE"?2:g==="CURRENT"?3:g==="RESET"?4:Se(39313,{state:g})})(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],u=(function(g,E){return g.useProto3Json?(Qe(E===void 0||typeof E=="string",58123),an.fromBase64String(E||"")):(Qe(E===void 0||E instanceof Buffer||E instanceof Uint8Array,16193),an.fromUint8Array(E||new Uint8Array))})(i,e.targetChange.resumeToken),f=e.targetChange.cause,m=f&&(function(g){const E=g.code===void 0?ne.UNKNOWN:Vb(g.code);return new fe(E,g.message||"")})(f);n=new Pb(s,o,u,m||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const o=Zl(i,s.document.name),u=Un(s.document.updateTime),f=s.document.createTime?Un(s.document.createTime):Re.min(),m=new mn({mapValue:{fields:s.document.fields}}),p=Kt.newFoundDocument(o,u,f,m),g=s.targetIds||[],E=s.removedTargetIds||[];n=new Ah(g,E,p.key,p)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const o=Zl(i,s.document),u=s.readTime?Un(s.readTime):Re.min(),f=Kt.newNoDocument(o,u),m=s.removedTargetIds||[];n=new Ah([],m,f.key,f)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const o=Zl(i,s.document),u=s.removedTargetIds||[];n=new Ah([],u,o,null)}else{if(!("filter"in e))return Se(11601,{Rt:e});{e.filter;const s=e.filter;s.targetId;const{count:o=0,unchangedNames:u}=s,f=new M2(o,u),m=s.targetId;n=new kb(m,f)}}return n}function Bb(i,e){let n;if(e instanceof Tu)n={update:cE(i,e.key,e.value)};else if(e instanceof cf)n={delete:qh(i,e.key)};else if(e instanceof ws)n={update:cE(i,e.key,e.data),updateMask:Z2(e.fieldMask)};else{if(!(e instanceof Ob))return Se(16599,{Vt:e.type});n={verify:qh(i,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((s=>(function(u,f){const m=f.transform;if(m instanceof ou)return{fieldPath:f.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(m instanceof lu)return{fieldPath:f.field.canonicalString(),appendMissingElements:{values:m.elements}};if(m instanceof uu)return{fieldPath:f.field.canonicalString(),removeAllFromArray:{values:m.elements}};if(m instanceof cu)return{fieldPath:f.field.canonicalString(),increment:m.Ae};throw Se(20930,{transform:f.transform})})(0,s)))),e.precondition.isNone||(n.currentDocument=(function(o,u){return u.updateTime!==void 0?{updateTime:B2(o,u.updateTime)}:u.exists!==void 0?{exists:u.exists}:Se(27497)})(i,e.precondition)),n}function G2(i,e){return i&&i.length>0?(Qe(e!==void 0,14353),i.map((n=>(function(o,u){let f=o.updateTime?Un(o.updateTime):Un(u);return f.isEqual(Re.min())&&(f=Un(u)),new x2(f,o.transformResults||[])})(n,e)))):[]}function Q2(i,e){return{documents:[jb(i,e.path)]}}function Y2(i,e){const n={structuredQuery:{}},s=e.path;let o;e.collectionGroup!==null?(o=s,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=s.popLast(),n.structuredQuery.from=[{collectionId:s.lastSegment()}]),n.parent=jb(i,o);const u=(function(g){if(g.length!==0)return Hb(yr.create(g,"and"))})(e.filters);u&&(n.structuredQuery.where=u);const f=(function(g){if(g.length!==0)return g.map((E=>(function(R){return{field:ao(R.field),direction:X2(R.dir)}})(E)))})(e.orderBy);f&&(n.structuredQuery.orderBy=f);const m=lp(i,e.limit);return m!==null&&(n.structuredQuery.limit=m),e.startAt&&(n.structuredQuery.startAt=(function(g){return{before:g.inclusive,values:g.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(g){return{before:!g.inclusive,values:g.position}})(e.endAt)),{ft:n,parent:o}}function K2(i){let e=q2(i.parent);const n=i.structuredQuery,s=n.from?n.from.length:0;let o=null;if(s>0){Qe(s===1,65062);const E=n.from[0];E.allDescendants?o=E.collectionId:e=e.child(E.collectionId)}let u=[];n.where&&(u=(function(T){const R=qb(T);return R instanceof yr&&db(R)?R.getFilters():[R]})(n.where));let f=[];n.orderBy&&(f=(function(T){return T.map((R=>(function(j){return new zh(oo(j.field),(function(q){switch(q){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(j.direction))})(R)))})(n.orderBy));let m=null;n.limit&&(m=(function(T){let R;return R=typeof T=="object"?T.value:T,_u(R)?null:R})(n.limit));let p=null;n.startAt&&(p=(function(T){const R=!!T.before,O=T.values||[];return new jh(O,R)})(n.startAt));let g=null;return n.endAt&&(g=(function(T){const R=!T.before,O=T.values||[];return new jh(O,R)})(n.endAt)),g2(e,o,f,u,m,"F",p,g)}function $2(i,e){const n=(function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Se(28987,{purpose:o})}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function qb(i){return i.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const s=oo(n.unaryFilter.field);return Ut.create(s,"==",{doubleValue:NaN});case"IS_NULL":const o=oo(n.unaryFilter.field);return Ut.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const u=oo(n.unaryFilter.field);return Ut.create(u,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const f=oo(n.unaryFilter.field);return Ut.create(f,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Se(61313);default:return Se(60726)}})(i):i.fieldFilter!==void 0?(function(n){return Ut.create(oo(n.fieldFilter.field),(function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Se(58110);default:return Se(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(i):i.compositeFilter!==void 0?(function(n){return yr.create(n.compositeFilter.filters.map((s=>qb(s))),(function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return Se(1026)}})(n.compositeFilter.op))})(i):Se(30097,{filter:i})}function X2(i){return L2[i]}function W2(i){return U2[i]}function J2(i){return j2[i]}function ao(i){return{fieldPath:i.canonicalString()}}function oo(i){return rn.fromServerFormat(i.fieldPath)}function Hb(i){return i instanceof Ut?(function(n){if(n.op==="=="){if(W0(n.value))return{unaryFilter:{field:ao(n.field),op:"IS_NAN"}};if(X0(n.value))return{unaryFilter:{field:ao(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(W0(n.value))return{unaryFilter:{field:ao(n.field),op:"IS_NOT_NAN"}};if(X0(n.value))return{unaryFilter:{field:ao(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ao(n.field),op:W2(n.op),value:n.value}}})(i):i instanceof yr?(function(n){const s=n.getFilters().map((o=>Hb(o)));return s.length===1?s[0]:{compositeFilter:{op:J2(n.op),filters:s}}})(i):Se(54877,{filter:i})}function Z2(i){const e=[];return i.fields.forEach((n=>e.push(n.canonicalString()))),{fieldPaths:e}}function Fb(i){return i.length>=4&&i.get(0)==="projects"&&i.get(2)==="databases"}class cs{constructor(e,n,s,o,u=Re.min(),f=Re.min(),m=an.EMPTY_BYTE_STRING,p=null){this.target=e,this.targetId=n,this.purpose=s,this.sequenceNumber=o,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=f,this.resumeToken=m,this.expectedCount=p}withSequenceNumber(e){return new cs(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new cs(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new cs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new cs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class eD{constructor(e){this.yt=e}}function tD(i){const e=K2({parent:i.parent,structuredQuery:i.structuredQuery});return i.limitType==="LAST"?op(e,e.limit,"L"):e}class nD{constructor(){this.Cn=new rD}addToCollectionParentIndex(e,n){return this.Cn.add(n),se.resolve()}getCollectionParents(e,n){return se.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return se.resolve()}deleteFieldIndex(e,n){return se.resolve()}deleteAllFieldIndexes(e){return se.resolve()}createTargetIndexes(e,n){return se.resolve()}getDocumentsMatchingTarget(e,n){return se.resolve(null)}getIndexType(e,n){return se.resolve(0)}getFieldIndexes(e,n){return se.resolve([])}getNextCollectionGroupToUpdate(e){return se.resolve(null)}getMinOffset(e,n){return se.resolve(ys.min())}getMinOffsetFromCollectionGroup(e,n){return se.resolve(ys.min())}updateCollectionGroup(e,n,s){return se.resolve()}updateIndexEntries(e,n){return se.resolve()}}class rD{constructor(){this.index={}}add(e){const n=e.lastSegment(),s=e.popLast(),o=this.index[n]||new Ht(at.comparator),u=!o.has(s);return this.index[n]=o.add(s),u}has(e){const n=e.lastSegment(),s=e.popLast(),o=this.index[n];return o&&o.has(s)}getEntries(e){return(this.index[e]||new Ht(at.comparator)).toArray()}}const hE={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Gb=41943040;class wn{static withCacheSize(e){return new wn(e,wn.DEFAULT_COLLECTION_PERCENTILE,wn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=s}}wn.DEFAULT_COLLECTION_PERCENTILE=10,wn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,wn.DEFAULT=new wn(Gb,wn.DEFAULT_COLLECTION_PERCENTILE,wn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),wn.DISABLED=new wn(-1,0,0);class Eo{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Eo(0)}static cr(){return new Eo(-1)}}const fE="LruGarbageCollector",iD=1048576;function dE([i,e],[n,s]){const o=Be(i,n);return o===0?Be(e,s):o}class sD{constructor(e){this.Ir=e,this.buffer=new Ht(dE),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const s=this.buffer.last();dE(n,s)<0&&(this.buffer=this.buffer.delete(s).add(n))}}get maxValue(){return this.buffer.last()[0]}}class aD{constructor(e,n,s){this.garbageCollector=e,this.asyncQueue=n,this.localStore=s,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){me(fE,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Oo(n)?me(fE,"Ignoring IndexedDB error during garbage collection: ",n):await No(n)}await this.Vr(3e5)}))}}class oD{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next((s=>Math.floor(n/100*s)))}nthSequenceNumber(e,n){if(n===0)return se.resolve(nf.ce);const s=new sD(n);return this.mr.forEachTarget(e,(o=>s.Ar(o.sequenceNumber))).next((()=>this.mr.pr(e,(o=>s.Ar(o))))).next((()=>s.maxValue))}removeTargets(e,n,s){return this.mr.removeTargets(e,n,s)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(me("LruGarbageCollector","Garbage collection skipped; disabled"),se.resolve(hE)):this.getCacheSize(e).next((s=>s<this.params.cacheSizeCollectionThreshold?(me("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),hE):this.yr(e,n)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let s,o,u,f,m,p,g;const E=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((T=>(T>this.params.maximumSequenceNumbersToCollect?(me("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${T}`),o=this.params.maximumSequenceNumbersToCollect):o=T,f=Date.now(),this.nthSequenceNumber(e,o)))).next((T=>(s=T,m=Date.now(),this.removeTargets(e,s,n)))).next((T=>(u=T,p=Date.now(),this.removeOrphanedDocuments(e,s)))).next((T=>(g=Date.now(),io()<=ze.DEBUG&&me("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${f-E}ms
	Determined least recently used ${o} in `+(m-f)+`ms
	Removed ${u} targets in `+(p-m)+`ms
	Removed ${T} documents in `+(g-p)+`ms
Total Duration: ${g-E}ms`),se.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:u,documentsRemoved:T}))))}}function lD(i,e){return new oD(i,e)}class uD{constructor(){this.changes=new da((e=>e.toString()),((e,n)=>e.isEqual(n))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Kt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const s=this.changes.get(n);return s!==void 0?se.resolve(s):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class cD{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}class hD{constructor(e,n,s,o){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=s,this.indexManager=o}getDocument(e,n){let s=null;return this.documentOverlayCache.getOverlay(e,n).next((o=>(s=o,this.remoteDocumentCache.getEntry(e,n)))).next((o=>(s!==null&&Jl(s.mutation,o,Ln.empty(),ht.now()),o)))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next((s=>this.getLocalViewOfDocuments(e,s,qe()).next((()=>s))))}getLocalViewOfDocuments(e,n,s=qe()){const o=ia();return this.populateOverlays(e,o,n).next((()=>this.computeViews(e,n,o,s).next((u=>{let f=Hl();return u.forEach(((m,p)=>{f=f.insert(m,p.overlayedDocument)})),f}))))}getOverlayedDocuments(e,n){const s=ia();return this.populateOverlays(e,s,n).next((()=>this.computeViews(e,n,s,qe())))}populateOverlays(e,n,s){const o=[];return s.forEach((u=>{n.has(u)||o.push(u)})),this.documentOverlayCache.getOverlays(e,o).next((u=>{u.forEach(((f,m)=>{n.set(f,m)}))}))}computeViews(e,n,s,o){let u=wi();const f=Wl(),m=(function(){return Wl()})();return n.forEach(((p,g)=>{const E=s.get(g.key);o.has(g.key)&&(E===void 0||E.mutation instanceof ws)?u=u.insert(g.key,g):E!==void 0?(f.set(g.key,E.mutation.getFieldMask()),Jl(E.mutation,g,E.mutation.getFieldMask(),ht.now())):f.set(g.key,Ln.empty())})),this.recalculateAndSaveOverlays(e,u).next((p=>(p.forEach(((g,E)=>f.set(g,E))),n.forEach(((g,E)=>m.set(g,new cD(E,f.get(g)??null)))),m)))}recalculateAndSaveOverlays(e,n){const s=Wl();let o=new gt(((f,m)=>f-m)),u=qe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next((f=>{for(const m of f)m.keys().forEach((p=>{const g=n.get(p);if(g===null)return;let E=s.get(p)||Ln.empty();E=m.applyToLocalView(g,E),s.set(p,E);const T=(o.get(m.batchId)||qe()).add(p);o=o.insert(m.batchId,T)}))})).next((()=>{const f=[],m=o.getReverseIterator();for(;m.hasNext();){const p=m.getNext(),g=p.key,E=p.value,T=bb();E.forEach((R=>{if(!u.has(R)){const O=Db(n.get(R),s.get(R));O!==null&&T.set(R,O),u=u.add(R)}})),f.push(this.documentOverlayCache.saveOverlays(e,g,T))}return se.waitFor(f)})).next((()=>s))}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next((s=>this.recalculateAndSaveOverlays(e,s)))}getDocumentsMatchingQuery(e,n,s,o){return(function(f){return Te.isDocumentKey(f.path)&&f.collectionGroup===null&&f.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):yb(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,s,o):this.getDocumentsMatchingCollectionQuery(e,n,s,o)}getNextDocuments(e,n,s,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,s,o).next((u=>{const f=o-u.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,s.largestBatchId,o-u.size):se.resolve(ia());let m=ru,p=u;return f.next((g=>se.forEach(g,((E,T)=>(m<T.largestBatchId&&(m=T.largestBatchId),u.get(E)?se.resolve():this.remoteDocumentCache.getEntry(e,E).next((R=>{p=p.insert(E,R)}))))).next((()=>this.populateOverlays(e,g,u))).next((()=>this.computeViews(e,p,g,qe()))).next((E=>({batchId:m,changes:Tb(E)})))))}))}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Te(n)).next((s=>{let o=Hl();return s.isFoundDocument()&&(o=o.insert(s.key,s)),o}))}getDocumentsMatchingCollectionGroupQuery(e,n,s,o){const u=n.collectionGroup;let f=Hl();return this.indexManager.getCollectionParents(e,u).next((m=>se.forEach(m,(p=>{const g=(function(T,R){return new Eu(R,null,T.explicitOrderBy.slice(),T.filters.slice(),T.limit,T.limitType,T.startAt,T.endAt)})(n,p.child(u));return this.getDocumentsMatchingCollectionQuery(e,g,s,o).next((E=>{E.forEach(((T,R)=>{f=f.insert(T,R)}))}))})).next((()=>f))))}getDocumentsMatchingCollectionQuery(e,n,s,o){let u;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,s.largestBatchId).next((f=>(u=f,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,s,u,o)))).next((f=>{u.forEach(((p,g)=>{const E=g.getKey();f.get(E)===null&&(f=f.insert(E,Kt.newInvalidDocument(E)))}));let m=Hl();return f.forEach(((p,g)=>{const E=u.get(p);E!==void 0&&Jl(E.mutation,g,Ln.empty(),ht.now()),of(n,g)&&(m=m.insert(p,g))})),m}))}}class fD{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return se.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,(function(o){return{id:o.id,version:o.version,createTime:Un(o.createTime)}})(n)),se.resolve()}getNamedQuery(e,n){return se.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,(function(o){return{name:o.name,query:tD(o.bundledQuery),readTime:Un(o.readTime)}})(n)),se.resolve()}}class dD{constructor(){this.overlays=new gt(Te.comparator),this.qr=new Map}getOverlay(e,n){return se.resolve(this.overlays.get(n))}getOverlays(e,n){const s=ia();return se.forEach(n,(o=>this.getOverlay(e,o).next((u=>{u!==null&&s.set(o,u)})))).next((()=>s))}saveOverlays(e,n,s){return s.forEach(((o,u)=>{this.St(e,n,u)})),se.resolve()}removeOverlaysForBatchId(e,n,s){const o=this.qr.get(s);return o!==void 0&&(o.forEach((u=>this.overlays=this.overlays.remove(u))),this.qr.delete(s)),se.resolve()}getOverlaysForCollection(e,n,s){const o=ia(),u=n.length+1,f=new Te(n.child("")),m=this.overlays.getIteratorFrom(f);for(;m.hasNext();){const p=m.getNext().value,g=p.getKey();if(!n.isPrefixOf(g.path))break;g.path.length===u&&p.largestBatchId>s&&o.set(p.getKey(),p)}return se.resolve(o)}getOverlaysForCollectionGroup(e,n,s,o){let u=new gt(((g,E)=>g-E));const f=this.overlays.getIterator();for(;f.hasNext();){const g=f.getNext().value;if(g.getKey().getCollectionGroup()===n&&g.largestBatchId>s){let E=u.get(g.largestBatchId);E===null&&(E=ia(),u=u.insert(g.largestBatchId,E)),E.set(g.getKey(),g)}}const m=ia(),p=u.getIterator();for(;p.hasNext()&&(p.getNext().value.forEach(((g,E)=>m.set(g,E))),!(m.size()>=o)););return se.resolve(m)}St(e,n,s){const o=this.overlays.get(s.key);if(o!==null){const f=this.qr.get(o.largestBatchId).delete(s.key);this.qr.set(o.largestBatchId,f)}this.overlays=this.overlays.insert(s.key,new O2(n,s));let u=this.qr.get(n);u===void 0&&(u=qe(),this.qr.set(n,u)),this.qr.set(n,u.add(s.key))}}class mD{constructor(){this.sessionToken=an.EMPTY_BYTE_STRING}getSessionToken(e){return se.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,se.resolve()}}class $p{constructor(){this.Qr=new Ht(Yt.$r),this.Ur=new Ht(Yt.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const s=new Yt(e,n);this.Qr=this.Qr.add(s),this.Ur=this.Ur.add(s)}Wr(e,n){e.forEach((s=>this.addReference(s,n)))}removeReference(e,n){this.Gr(new Yt(e,n))}zr(e,n){e.forEach((s=>this.removeReference(s,n)))}jr(e){const n=new Te(new at([])),s=new Yt(n,e),o=new Yt(n,e+1),u=[];return this.Ur.forEachInRange([s,o],(f=>{this.Gr(f),u.push(f.key)})),u}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new Te(new at([])),s=new Yt(n,e),o=new Yt(n,e+1);let u=qe();return this.Ur.forEachInRange([s,o],(f=>{u=u.add(f.key)})),u}containsKey(e){const n=new Yt(e,0),s=this.Qr.firstAfterOrEqual(n);return s!==null&&e.isEqual(s.key)}}class Yt{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return Te.comparator(e.key,n.key)||Be(e.Yr,n.Yr)}static Kr(e,n){return Be(e.Yr,n.Yr)||Te.comparator(e.key,n.key)}}class pD{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new Ht(Yt.$r)}checkEmpty(e){return se.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,s,o){const u=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const f=new N2(u,n,s,o);this.mutationQueue.push(f);for(const m of o)this.Zr=this.Zr.add(new Yt(m.key,u)),this.indexManager.addToCollectionParentIndex(e,m.key.path.popLast());return se.resolve(f)}lookupMutationBatch(e,n){return se.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const s=n+1,o=this.ei(s),u=o<0?0:o;return se.resolve(this.mutationQueue.length>u?this.mutationQueue[u]:null)}getHighestUnacknowledgedBatchId(){return se.resolve(this.mutationQueue.length===0?zp:this.tr-1)}getAllMutationBatches(e){return se.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const s=new Yt(n,0),o=new Yt(n,Number.POSITIVE_INFINITY),u=[];return this.Zr.forEachInRange([s,o],(f=>{const m=this.Xr(f.Yr);u.push(m)})),se.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,n){let s=new Ht(Be);return n.forEach((o=>{const u=new Yt(o,0),f=new Yt(o,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([u,f],(m=>{s=s.add(m.Yr)}))})),se.resolve(this.ti(s))}getAllMutationBatchesAffectingQuery(e,n){const s=n.path,o=s.length+1;let u=s;Te.isDocumentKey(u)||(u=u.child(""));const f=new Yt(new Te(u),0);let m=new Ht(Be);return this.Zr.forEachWhile((p=>{const g=p.key.path;return!!s.isPrefixOf(g)&&(g.length===o&&(m=m.add(p.Yr)),!0)}),f),se.resolve(this.ti(m))}ti(e){const n=[];return e.forEach((s=>{const o=this.Xr(s);o!==null&&n.push(o)})),n}removeMutationBatch(e,n){Qe(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Zr;return se.forEach(n.mutations,(o=>{const u=new Yt(o.key,n.batchId);return s=s.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)})).next((()=>{this.Zr=s}))}ir(e){}containsKey(e,n){const s=new Yt(n,0),o=this.Zr.firstAfterOrEqual(s);return se.resolve(n.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,se.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}class gD{constructor(e){this.ri=e,this.docs=(function(){return new gt(Te.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const s=n.key,o=this.docs.get(s),u=o?o.size:0,f=this.ri(n);return this.docs=this.docs.insert(s,{document:n.mutableCopy(),size:f}),this.size+=f-u,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const s=this.docs.get(n);return se.resolve(s?s.document.mutableCopy():Kt.newInvalidDocument(n))}getEntries(e,n){let s=wi();return n.forEach((o=>{const u=this.docs.get(o);s=s.insert(o,u?u.document.mutableCopy():Kt.newInvalidDocument(o))})),se.resolve(s)}getDocumentsMatchingQuery(e,n,s,o){let u=wi();const f=n.path,m=new Te(f.child("__id-9223372036854775808__")),p=this.docs.getIteratorFrom(m);for(;p.hasNext();){const{key:g,value:{document:E}}=p.getNext();if(!f.isPrefixOf(g.path))break;g.path.length>f.length+1||KI(YI(E),s)<=0||(o.has(E.key)||of(n,E))&&(u=u.insert(E.key,E.mutableCopy()))}return se.resolve(u)}getAllFromCollectionGroup(e,n,s,o){Se(9500)}ii(e,n){return se.forEach(this.docs,(s=>n(s)))}newChangeBuffer(e){return new yD(this)}getSize(e){return se.resolve(this.size)}}class yD extends uD{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach(((s,o)=>{o.isValidDocument()?n.push(this.Nr.addEntry(e,o)):this.Nr.removeEntry(s)})),se.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}class vD{constructor(e){this.persistence=e,this.si=new da((n=>Hp(n)),Fp),this.lastRemoteSnapshotVersion=Re.min(),this.highestTargetId=0,this.oi=0,this._i=new $p,this.targetCount=0,this.ai=Eo.ur()}forEachTarget(e,n){return this.si.forEach(((s,o)=>n(o))),se.resolve()}getLastRemoteSnapshotVersion(e){return se.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return se.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),se.resolve(this.highestTargetId)}setTargetsMetadata(e,n,s){return s&&(this.lastRemoteSnapshotVersion=s),n>this.oi&&(this.oi=n),se.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new Eo(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,se.resolve()}updateTargetData(e,n){return this.Pr(n),se.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,se.resolve()}removeTargets(e,n,s){let o=0;const u=[];return this.si.forEach(((f,m)=>{m.sequenceNumber<=n&&s.get(m.targetId)===null&&(this.si.delete(f),u.push(this.removeMatchingKeysForTargetId(e,m.targetId)),o++)})),se.waitFor(u).next((()=>o))}getTargetCount(e){return se.resolve(this.targetCount)}getTargetData(e,n){const s=this.si.get(n)||null;return se.resolve(s)}addMatchingKeys(e,n,s){return this._i.Wr(n,s),se.resolve()}removeMatchingKeys(e,n,s){this._i.zr(n,s);const o=this.persistence.referenceDelegate,u=[];return o&&n.forEach((f=>{u.push(o.markPotentiallyOrphaned(e,f))})),se.waitFor(u)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),se.resolve()}getMatchingKeysForTargetId(e,n){const s=this._i.Hr(n);return se.resolve(s)}containsKey(e,n){return se.resolve(this._i.containsKey(n))}}class Qb{constructor(e,n){this.ui={},this.overlays={},this.ci=new nf(0),this.li=!1,this.li=!0,this.hi=new mD,this.referenceDelegate=e(this),this.Pi=new vD(this),this.indexManager=new nD,this.remoteDocumentCache=(function(o){return new gD(o)})((s=>this.referenceDelegate.Ti(s))),this.serializer=new eD(n),this.Ii=new fD(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new dD,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let s=this.ui[e.toKey()];return s||(s=new pD(n,this.referenceDelegate),this.ui[e.toKey()]=s),s}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,s){me("MemoryPersistence","Starting transaction:",e);const o=new _D(this.ci.next());return this.referenceDelegate.Ei(),s(o).next((u=>this.referenceDelegate.di(o).next((()=>u)))).toPromise().then((u=>(o.raiseOnCommittedEvent(),u)))}Ai(e,n){return se.or(Object.values(this.ui).map((s=>()=>s.containsKey(e,n))))}}class _D extends XI{constructor(e){super(),this.currentSequenceNumber=e}}class Xp{constructor(e){this.persistence=e,this.Ri=new $p,this.Vi=null}static mi(e){return new Xp(e)}get fi(){if(this.Vi)return this.Vi;throw Se(60996)}addReference(e,n,s){return this.Ri.addReference(s,n),this.fi.delete(s.toString()),se.resolve()}removeReference(e,n,s){return this.Ri.removeReference(s,n),this.fi.add(s.toString()),se.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),se.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach((o=>this.fi.add(o.toString())));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,n.targetId).next((o=>{o.forEach((u=>this.fi.add(u.toString())))})).next((()=>s.removeTargetData(e,n)))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return se.forEach(this.fi,(s=>{const o=Te.fromPath(s);return this.gi(e,o).next((u=>{u||n.removeEntry(o,Re.min())}))})).next((()=>(this.Vi=null,n.apply(e))))}updateLimboDocument(e,n){return this.gi(e,n).next((s=>{s?this.fi.delete(n.toString()):this.fi.add(n.toString())}))}Ti(e){return 0}gi(e,n){return se.or([()=>se.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class Hh{constructor(e,n){this.persistence=e,this.pi=new da((s=>ZI(s.path)),((s,o)=>s.isEqual(o))),this.garbageCollector=lD(this,n)}static mi(e,n){return new Hh(e,n)}Ei(){}di(e){return se.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((s=>n.next((o=>s+o))))}wr(e){let n=0;return this.pr(e,(s=>{n++})).next((()=>n))}pr(e,n){return se.forEach(this.pi,((s,o)=>this.br(e,s,o).next((u=>u?se.resolve():n(o)))))}removeTargets(e,n,s){return this.persistence.getTargetCache().removeTargets(e,n,s)}removeOrphanedDocuments(e,n){let s=0;const o=this.persistence.getRemoteDocumentCache(),u=o.newChangeBuffer();return o.ii(e,(f=>this.br(e,f,n).next((m=>{m||(s++,u.removeEntry(f,Re.min()))})))).next((()=>u.apply(e))).next((()=>s))}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),se.resolve()}removeTarget(e,n){const s=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,s)}addReference(e,n,s){return this.pi.set(s,e.currentSequenceNumber),se.resolve()}removeReference(e,n,s){return this.pi.set(s,e.currentSequenceNumber),se.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),se.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Th(e.data.value)),n}br(e,n,s){return se.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const o=this.pi.get(n);return se.resolve(o!==void 0&&o>s)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class Wp{constructor(e,n,s,o){this.targetId=e,this.fromCache=n,this.Es=s,this.ds=o}static As(e,n){let s=qe(),o=qe();for(const u of n.docChanges)switch(u.type){case 0:s=s.add(u.doc.key);break;case 1:o=o.add(u.doc.key)}return new Wp(e,n.fromCache,s,o)}}class ED{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class TD{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return mR()?8:WI(cn())>0?6:4})()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,s,o){const u={result:null};return this.ys(e,n).next((f=>{u.result=f})).next((()=>{if(!u.result)return this.ws(e,n,o,s).next((f=>{u.result=f}))})).next((()=>{if(u.result)return;const f=new ED;return this.Ss(e,n,f).next((m=>{if(u.result=m,this.Vs)return this.bs(e,n,f,m.size)}))})).next((()=>u.result))}bs(e,n,s,o){return s.documentReadCount<this.fs?(io()<=ze.DEBUG&&me("QueryEngine","SDK will not create cache indexes for query:",so(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),se.resolve()):(io()<=ze.DEBUG&&me("QueryEngine","Query:",so(n),"scans",s.documentReadCount,"local documents and returns",o,"documents as results."),s.documentReadCount>this.gs*o?(io()<=ze.DEBUG&&me("QueryEngine","The SDK decides to create cache indexes for query:",so(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Hr(n))):se.resolve())}ys(e,n){if(tE(n))return se.resolve(null);let s=Hr(n);return this.indexManager.getIndexType(e,s).next((o=>o===0?null:(n.limit!==null&&o===1&&(n=op(n,null,"F"),s=Hr(n)),this.indexManager.getDocumentsMatchingTarget(e,s).next((u=>{const f=qe(...u);return this.ps.getDocuments(e,f).next((m=>this.indexManager.getMinOffset(e,s).next((p=>{const g=this.Ds(n,m);return this.Cs(n,g,f,p.readTime)?this.ys(e,op(n,null,"F")):this.vs(e,g,n,p)}))))})))))}ws(e,n,s,o){return tE(n)||o.isEqual(Re.min())?se.resolve(null):this.ps.getDocuments(e,s).next((u=>{const f=this.Ds(n,u);return this.Cs(n,f,s,o)?se.resolve(null):(io()<=ze.DEBUG&&me("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),so(n)),this.vs(e,f,n,QI(o,ru)).next((m=>m)))}))}Ds(e,n){let s=new Ht(_b(e));return n.forEach(((o,u)=>{of(e,u)&&(s=s.add(u))})),s}Cs(e,n,s,o){if(e.limit===null)return!1;if(s.size!==n.size)return!0;const u=e.limitType==="F"?n.last():n.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(o)>0)}Ss(e,n,s){return io()<=ze.DEBUG&&me("QueryEngine","Using full collection scan to execute query:",so(n)),this.ps.getDocumentsMatchingQuery(e,n,ys.min(),s)}vs(e,n,s,o){return this.ps.getDocumentsMatchingQuery(e,s,o).next((u=>(n.forEach((f=>{u=u.insert(f.key,f)})),u)))}}const Jp="LocalStore",bD=3e8;class SD{constructor(e,n,s,o){this.persistence=e,this.Fs=n,this.serializer=o,this.Ms=new gt(Be),this.xs=new da((u=>Hp(u)),Fp),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(s)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new hD(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>e.collect(n,this.Ms)))}}function AD(i,e,n,s){return new SD(i,e,n,s)}async function Yb(i,e){const n=Ie(i);return await n.persistence.runTransaction("Handle user change","readonly",(s=>{let o;return n.mutationQueue.getAllMutationBatches(s).next((u=>(o=u,n.Bs(e),n.mutationQueue.getAllMutationBatches(s)))).next((u=>{const f=[],m=[];let p=qe();for(const g of o){f.push(g.batchId);for(const E of g.mutations)p=p.add(E.key)}for(const g of u){m.push(g.batchId);for(const E of g.mutations)p=p.add(E.key)}return n.localDocuments.getDocuments(s,p).next((g=>({Ls:g,removedBatchIds:f,addedBatchIds:m})))}))}))}function wD(i,e){const n=Ie(i);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(s=>{const o=e.batch.keys(),u=n.Ns.newChangeBuffer({trackRemovals:!0});return(function(m,p,g,E){const T=g.batch,R=T.keys();let O=se.resolve();return R.forEach((j=>{O=O.next((()=>E.getEntry(p,j))).next((Q=>{const q=g.docVersions.get(j);Qe(q!==null,48541),Q.version.compareTo(q)<0&&(T.applyToRemoteDocument(Q,g),Q.isValidDocument()&&(Q.setReadTime(g.commitVersion),E.addEntry(Q)))}))})),O.next((()=>m.mutationQueue.removeMutationBatch(p,T)))})(n,s,e,u).next((()=>u.apply(s))).next((()=>n.mutationQueue.performConsistencyCheck(s))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(s,o,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,(function(m){let p=qe();for(let g=0;g<m.mutationResults.length;++g)m.mutationResults[g].transformResults.length>0&&(p=p.add(m.batch.mutations[g].key));return p})(e)))).next((()=>n.localDocuments.getDocuments(s,o)))}))}function Kb(i){const e=Ie(i);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>e.Pi.getLastRemoteSnapshotVersion(n)))}function RD(i,e){const n=Ie(i),s=e.snapshotVersion;let o=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(u=>{const f=n.Ns.newChangeBuffer({trackRemovals:!0});o=n.Ms;const m=[];e.targetChanges.forEach(((E,T)=>{const R=o.get(T);if(!R)return;m.push(n.Pi.removeMatchingKeys(u,E.removedDocuments,T).next((()=>n.Pi.addMatchingKeys(u,E.addedDocuments,T))));let O=R.withSequenceNumber(u.currentSequenceNumber);e.targetMismatches.get(T)!==null?O=O.withResumeToken(an.EMPTY_BYTE_STRING,Re.min()).withLastLimboFreeSnapshotVersion(Re.min()):E.resumeToken.approximateByteSize()>0&&(O=O.withResumeToken(E.resumeToken,s)),o=o.insert(T,O),(function(Q,q,$){return Q.resumeToken.approximateByteSize()===0||q.snapshotVersion.toMicroseconds()-Q.snapshotVersion.toMicroseconds()>=bD?!0:$.addedDocuments.size+$.modifiedDocuments.size+$.removedDocuments.size>0})(R,O,E)&&m.push(n.Pi.updateTargetData(u,O))}));let p=wi(),g=qe();if(e.documentUpdates.forEach((E=>{e.resolvedLimboDocuments.has(E)&&m.push(n.persistence.referenceDelegate.updateLimboDocument(u,E))})),m.push(CD(u,f,e.documentUpdates).next((E=>{p=E.ks,g=E.qs}))),!s.isEqual(Re.min())){const E=n.Pi.getLastRemoteSnapshotVersion(u).next((T=>n.Pi.setTargetsMetadata(u,u.currentSequenceNumber,s)));m.push(E)}return se.waitFor(m).next((()=>f.apply(u))).next((()=>n.localDocuments.getLocalViewOfDocuments(u,p,g))).next((()=>p))})).then((u=>(n.Ms=o,u)))}function CD(i,e,n){let s=qe(),o=qe();return n.forEach((u=>s=s.add(u))),e.getEntries(i,s).next((u=>{let f=wi();return n.forEach(((m,p)=>{const g=u.get(m);p.isFoundDocument()!==g.isFoundDocument()&&(o=o.add(m)),p.isNoDocument()&&p.version.isEqual(Re.min())?(e.removeEntry(m,p.readTime),f=f.insert(m,p)):!g.isValidDocument()||p.version.compareTo(g.version)>0||p.version.compareTo(g.version)===0&&g.hasPendingWrites?(e.addEntry(p),f=f.insert(m,p)):me(Jp,"Ignoring outdated watch update for ",m,". Current version:",g.version," Watch version:",p.version)})),{ks:f,qs:o}}))}function xD(i,e){const n=Ie(i);return n.persistence.runTransaction("Get next mutation batch","readonly",(s=>(e===void 0&&(e=zp),n.mutationQueue.getNextMutationBatchAfterBatchId(s,e))))}function ID(i,e){const n=Ie(i);return n.persistence.runTransaction("Allocate target","readwrite",(s=>{let o;return n.Pi.getTargetData(s,e).next((u=>u?(o=u,se.resolve(o)):n.Pi.allocateTargetId(s).next((f=>(o=new cs(e,f,"TargetPurposeListen",s.currentSequenceNumber),n.Pi.addTargetData(s,o).next((()=>o)))))))})).then((s=>{const o=n.Ms.get(s.targetId);return(o===null||s.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(s.targetId,s),n.xs.set(e,s.targetId)),s}))}async function hp(i,e,n){const s=Ie(i),o=s.Ms.get(e),u=n?"readwrite":"readwrite-primary";try{n||await s.persistence.runTransaction("Release target",u,(f=>s.persistence.referenceDelegate.removeTarget(f,o)))}catch(f){if(!Oo(f))throw f;me(Jp,`Failed to update sequence numbers for target ${e}: ${f}`)}s.Ms=s.Ms.remove(e),s.xs.delete(o.target)}function mE(i,e,n){const s=Ie(i);let o=Re.min(),u=qe();return s.persistence.runTransaction("Execute query","readwrite",(f=>(function(p,g,E){const T=Ie(p),R=T.xs.get(E);return R!==void 0?se.resolve(T.Ms.get(R)):T.Pi.getTargetData(g,E)})(s,f,Hr(e)).next((m=>{if(m)return o=m.lastLimboFreeSnapshotVersion,s.Pi.getMatchingKeysForTargetId(f,m.targetId).next((p=>{u=p}))})).next((()=>s.Fs.getDocumentsMatchingQuery(f,e,n?o:Re.min(),n?u:qe()))).next((m=>(DD(s,v2(e),m),{documents:m,Qs:u})))))}function DD(i,e,n){let s=i.Os.get(e)||Re.min();n.forEach(((o,u)=>{u.readTime.compareTo(s)>0&&(s=u.readTime)})),i.Os.set(e,s)}class pE{constructor(){this.activeTargetIds=A2()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class ND{constructor(){this.Mo=new pE,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,s){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,s){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new pE,Promise.resolve()}handleUserChange(e,n,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class OD{Oo(e){}shutdown(){}}const gE="ConnectivityMonitor";class yE{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){me(gE,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){me(gE,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let hh=null;function fp(){return hh===null?hh=(function(){return 268435456+Math.round(2147483648*Math.random())})():hh++,"0x"+hh.toString(16)}const Um="RestConnection",MD={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class VD{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${s}/databases/${o}`,this.Wo=this.databaseId.database===Lh?`project_id=${s}`:`project_id=${s}&database_id=${o}`}Go(e,n,s,o,u){const f=fp(),m=this.zo(e,n.toUriEncodedString());me(Um,`Sending RPC '${e}' ${f}:`,m,s);const p={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(p,o,u);const{host:g}=new URL(m),E=Co(g);return this.Jo(e,m,p,s,E).then((T=>(me(Um,`Received RPC '${e}' ${f}: `,T),T)),(T=>{throw go(Um,`RPC '${e}' ${f} failed with error: `,T,"url: ",m,"request:",s),T}))}Ho(e,n,s,o,u,f){return this.Go(e,n,s,o,u)}jo(e,n,s){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Do})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((o,u)=>e[u]=o)),s&&s.headers.forEach(((o,u)=>e[u]=o))}zo(e,n){const s=MD[e];return`${this.Uo}/v1/${n}:${s}`}terminate(){}}class kD{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}const ln="WebChannelConnection";class PD extends VD{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,s,o,u){const f=fp();return new Promise(((m,p)=>{const g=new QT;g.setWithCredentials(!0),g.listenOnce(YT.COMPLETE,(()=>{try{switch(g.getLastErrorCode()){case Eh.NO_ERROR:const T=g.getResponseJson();me(ln,`XHR for RPC '${e}' ${f} received:`,JSON.stringify(T)),m(T);break;case Eh.TIMEOUT:me(ln,`RPC '${e}' ${f} timed out`),p(new fe(ne.DEADLINE_EXCEEDED,"Request time out"));break;case Eh.HTTP_ERROR:const R=g.getStatus();if(me(ln,`RPC '${e}' ${f} failed with status:`,R,"response text:",g.getResponseText()),R>0){let O=g.getResponseJson();Array.isArray(O)&&(O=O[0]);const j=O?.error;if(j&&j.status&&j.message){const Q=(function($){const X=$.toLowerCase().replace(/_/g,"-");return Object.values(ne).indexOf(X)>=0?X:ne.UNKNOWN})(j.status);p(new fe(Q,j.message))}else p(new fe(ne.UNKNOWN,"Server responded with status "+g.getStatus()))}else p(new fe(ne.UNAVAILABLE,"Connection failed."));break;default:Se(9055,{l_:e,streamId:f,h_:g.getLastErrorCode(),P_:g.getLastError()})}}finally{me(ln,`RPC '${e}' ${f} completed.`)}}));const E=JSON.stringify(o);me(ln,`RPC '${e}' ${f} sending request:`,o),g.send(n,"POST",E,s,15)}))}T_(e,n,s){const o=fp(),u=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],f=XT(),m=$T(),p={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},g=this.longPollingOptions.timeoutSeconds;g!==void 0&&(p.longPollingTimeout=Math.round(1e3*g)),this.useFetchStreams&&(p.useFetchStreams=!0),this.jo(p.initMessageHeaders,n,s),p.encodeInitMessageHeaders=!0;const E=u.join("");me(ln,`Creating RPC '${e}' stream ${o}: ${E}`,p);const T=f.createWebChannel(E,p);this.I_(T);let R=!1,O=!1;const j=new kD({Yo:q=>{O?me(ln,`Not sending because RPC '${e}' stream ${o} is closed:`,q):(R||(me(ln,`Opening RPC '${e}' stream ${o} transport.`),T.open(),R=!0),me(ln,`RPC '${e}' stream ${o} sending:`,q),T.send(q))},Zo:()=>T.close()}),Q=(q,$,X)=>{q.listen($,(ee=>{try{X(ee)}catch(de){setTimeout((()=>{throw de}),0)}}))};return Q(T,ql.EventType.OPEN,(()=>{O||(me(ln,`RPC '${e}' stream ${o} transport opened.`),j.o_())})),Q(T,ql.EventType.CLOSE,(()=>{O||(O=!0,me(ln,`RPC '${e}' stream ${o} transport closed`),j.a_(),this.E_(T))})),Q(T,ql.EventType.ERROR,(q=>{O||(O=!0,go(ln,`RPC '${e}' stream ${o} transport errored. Name:`,q.name,"Message:",q.message),j.a_(new fe(ne.UNAVAILABLE,"The operation could not be completed")))})),Q(T,ql.EventType.MESSAGE,(q=>{if(!O){const $=q.data[0];Qe(!!$,16349);const X=$,ee=X?.error||X[0]?.error;if(ee){me(ln,`RPC '${e}' stream ${o} received error:`,ee);const de=ee.status;let pe=(function(C){const w=Pt[C];if(w!==void 0)return Vb(w)})(de),Ee=ee.message;pe===void 0&&(pe=ne.INTERNAL,Ee="Unknown error status: "+de+" with message "+ee.message),O=!0,j.a_(new fe(pe,Ee)),T.close()}else me(ln,`RPC '${e}' stream ${o} received:`,$),j.u_($)}})),Q(m,KT.STAT_EVENT,(q=>{q.stat===ep.PROXY?me(ln,`RPC '${e}' stream ${o} detected buffering proxy`):q.stat===ep.NOPROXY&&me(ln,`RPC '${e}' stream ${o} detected no buffering proxy`)})),setTimeout((()=>{j.__()}),0),j}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((n=>n===e))}}function jm(){return typeof document<"u"?document:null}function ff(i){return new z2(i,!0)}class Zp{constructor(e,n,s=1e3,o=1.5,u=6e4){this.Mi=e,this.timerId=n,this.d_=s,this.A_=o,this.R_=u,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),s=Math.max(0,Date.now()-this.f_),o=Math.max(0,n-s);o>0&&me("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${s} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,o,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}const vE="PersistentStream";class $b{constructor(e,n,s,o,u,f,m,p){this.Mi=e,this.S_=s,this.b_=o,this.connection=u,this.authCredentialsProvider=f,this.appCheckCredentialsProvider=m,this.listener=p,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new Zp(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===ne.RESOURCE_EXHAUSTED?(Ai(n.toString()),Ai("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===ne.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([s,o])=>{this.D_===n&&this.G_(s,o)}),(s=>{e((()=>{const o=new fe(ne.UNKNOWN,"Fetching auth token failed: "+s.message);return this.z_(o)}))}))}G_(e,n){const s=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo((()=>{s((()=>this.listener.Xo()))})),this.stream.t_((()=>{s((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((o=>{s((()=>this.z_(o)))})),this.stream.onMessage((o=>{s((()=>++this.F_==1?this.J_(o):this.onNext(o)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return me(vE,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget((()=>this.D_===e?n():(me(vE,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class LD extends $b{constructor(e,n,s,o,u,f){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,s,o,f),this.serializer=u}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=F2(this.serializer,e),s=(function(u){if(!("targetChange"in u))return Re.min();const f=u.targetChange;return f.targetIds&&f.targetIds.length?Re.min():f.readTime?Un(f.readTime):Re.min()})(e);return this.listener.H_(n,s)}Y_(e){const n={};n.database=cp(this.serializer),n.addTarget=(function(u,f){let m;const p=f.target;if(m=sp(p)?{documents:Q2(u,p)}:{query:Y2(u,p).ft},m.targetId=f.targetId,f.resumeToken.approximateByteSize()>0){m.resumeToken=Lb(u,f.resumeToken);const g=lp(u,f.expectedCount);g!==null&&(m.expectedCount=g)}else if(f.snapshotVersion.compareTo(Re.min())>0){m.readTime=Bh(u,f.snapshotVersion.toTimestamp());const g=lp(u,f.expectedCount);g!==null&&(m.expectedCount=g)}return m})(this.serializer,e);const s=$2(this.serializer,e);s&&(n.labels=s),this.q_(n)}Z_(e){const n={};n.database=cp(this.serializer),n.removeTarget=e,this.q_(n)}}class UD extends $b{constructor(e,n,s,o,u,f){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,s,o,f),this.serializer=u}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return Qe(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Qe(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Qe(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=G2(e.writeResults,e.commitTime),s=Un(e.commitTime);return this.listener.na(s,n)}ra(){const e={};e.database=cp(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map((s=>Bb(this.serializer,s)))};this.q_(n)}}class jD{}class zD extends jD{constructor(e,n,s,o){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=s,this.serializer=o,this.ia=!1}sa(){if(this.ia)throw new fe(ne.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,s,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([u,f])=>this.connection.Go(e,up(n,s),o,u,f))).catch((u=>{throw u.name==="FirebaseError"?(u.code===ne.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new fe(ne.UNKNOWN,u.toString())}))}Ho(e,n,s,o,u){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([f,m])=>this.connection.Ho(e,up(n,s),o,f,m,u))).catch((f=>{throw f.name==="FirebaseError"?(f.code===ne.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),f):new fe(ne.UNKNOWN,f.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class BD{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Ai(n),this.aa=!1):me("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const fa="RemoteStore";class qD{constructor(e,n,s,o,u){this.localStore=e,this.datastore=n,this.asyncQueue=s,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=u,this.Aa.Oo((f=>{s.enqueueAndForget((async()=>{ma(this)&&(me(fa,"Restarting streams for network reachability change."),await(async function(p){const g=Ie(p);g.Ea.add(4),await Su(g),g.Ra.set("Unknown"),g.Ea.delete(4),await df(g)})(this))}))})),this.Ra=new BD(s,o)}}async function df(i){if(ma(i))for(const e of i.da)await e(!0)}async function Su(i){for(const e of i.da)await e(!1)}function Xb(i,e){const n=Ie(i);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),rg(n)?ng(n):Mo(n).O_()&&tg(n,e))}function eg(i,e){const n=Ie(i),s=Mo(n);n.Ia.delete(e),s.O_()&&Wb(n,e),n.Ia.size===0&&(s.O_()?s.L_():ma(n)&&n.Ra.set("Unknown"))}function tg(i,e){if(i.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Re.min())>0){const n=i.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Mo(i).Y_(e)}function Wb(i,e){i.Va.Ue(e),Mo(i).Z_(e)}function ng(i){i.Va=new P2({getRemoteKeysForTarget:e=>i.remoteSyncer.getRemoteKeysForTarget(e),At:e=>i.Ia.get(e)||null,ht:()=>i.datastore.serializer.databaseId}),Mo(i).start(),i.Ra.ua()}function rg(i){return ma(i)&&!Mo(i).x_()&&i.Ia.size>0}function ma(i){return Ie(i).Ea.size===0}function Jb(i){i.Va=void 0}async function HD(i){i.Ra.set("Online")}async function FD(i){i.Ia.forEach(((e,n)=>{tg(i,e)}))}async function GD(i,e){Jb(i),rg(i)?(i.Ra.ha(e),ng(i)):i.Ra.set("Unknown")}async function QD(i,e,n){if(i.Ra.set("Online"),e instanceof Pb&&e.state===2&&e.cause)try{await(async function(o,u){const f=u.cause;for(const m of u.targetIds)o.Ia.has(m)&&(await o.remoteSyncer.rejectListen(m,f),o.Ia.delete(m),o.Va.removeTarget(m))})(i,e)}catch(s){me(fa,"Failed to remove targets %s: %s ",e.targetIds.join(","),s),await Fh(i,s)}else if(e instanceof Ah?i.Va.Ze(e):e instanceof kb?i.Va.st(e):i.Va.tt(e),!n.isEqual(Re.min()))try{const s=await Kb(i.localStore);n.compareTo(s)>=0&&await(function(u,f){const m=u.Va.Tt(f);return m.targetChanges.forEach(((p,g)=>{if(p.resumeToken.approximateByteSize()>0){const E=u.Ia.get(g);E&&u.Ia.set(g,E.withResumeToken(p.resumeToken,f))}})),m.targetMismatches.forEach(((p,g)=>{const E=u.Ia.get(p);if(!E)return;u.Ia.set(p,E.withResumeToken(an.EMPTY_BYTE_STRING,E.snapshotVersion)),Wb(u,p);const T=new cs(E.target,p,g,E.sequenceNumber);tg(u,T)})),u.remoteSyncer.applyRemoteEvent(m)})(i,n)}catch(s){me(fa,"Failed to raise snapshot:",s),await Fh(i,s)}}async function Fh(i,e,n){if(!Oo(e))throw e;i.Ea.add(1),await Su(i),i.Ra.set("Offline"),n||(n=()=>Kb(i.localStore)),i.asyncQueue.enqueueRetryable((async()=>{me(fa,"Retrying IndexedDB access"),await n(),i.Ea.delete(1),await df(i)}))}function Zb(i,e){return e().catch((n=>Fh(i,n,e)))}async function mf(i){const e=Ie(i),n=Ts(e);let s=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:zp;for(;YD(e);)try{const o=await xD(e.localStore,s);if(o===null){e.Ta.length===0&&n.L_();break}s=o.batchId,KD(e,o)}catch(o){await Fh(e,o)}eS(e)&&tS(e)}function YD(i){return ma(i)&&i.Ta.length<10}function KD(i,e){i.Ta.push(e);const n=Ts(i);n.O_()&&n.X_&&n.ea(e.mutations)}function eS(i){return ma(i)&&!Ts(i).x_()&&i.Ta.length>0}function tS(i){Ts(i).start()}async function $D(i){Ts(i).ra()}async function XD(i){const e=Ts(i);for(const n of i.Ta)e.ea(n.mutations)}async function WD(i,e,n){const s=i.Ta.shift(),o=Qp.from(s,e,n);await Zb(i,(()=>i.remoteSyncer.applySuccessfulWrite(o))),await mf(i)}async function JD(i,e){e&&Ts(i).X_&&await(async function(s,o){if((function(f){return Mb(f)&&f!==ne.ABORTED})(o.code)){const u=s.Ta.shift();Ts(s).B_(),await Zb(s,(()=>s.remoteSyncer.rejectFailedWrite(u.batchId,o))),await mf(s)}})(i,e),eS(i)&&tS(i)}async function _E(i,e){const n=Ie(i);n.asyncQueue.verifyOperationInProgress(),me(fa,"RemoteStore received new credentials");const s=ma(n);n.Ea.add(3),await Su(n),s&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await df(n)}async function ZD(i,e){const n=Ie(i);e?(n.Ea.delete(2),await df(n)):e||(n.Ea.add(2),await Su(n),n.Ra.set("Unknown"))}function Mo(i){return i.ma||(i.ma=(function(n,s,o){const u=Ie(n);return u.sa(),new LD(s,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)})(i.datastore,i.asyncQueue,{Xo:HD.bind(null,i),t_:FD.bind(null,i),r_:GD.bind(null,i),H_:QD.bind(null,i)}),i.da.push((async e=>{e?(i.ma.B_(),rg(i)?ng(i):i.Ra.set("Unknown")):(await i.ma.stop(),Jb(i))}))),i.ma}function Ts(i){return i.fa||(i.fa=(function(n,s,o){const u=Ie(n);return u.sa(),new UD(s,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)})(i.datastore,i.asyncQueue,{Xo:()=>Promise.resolve(),t_:$D.bind(null,i),r_:JD.bind(null,i),ta:XD.bind(null,i),na:WD.bind(null,i)}),i.da.push((async e=>{e?(i.fa.B_(),await mf(i)):(await i.fa.stop(),i.Ta.length>0&&(me(fa,`Stopping write stream with ${i.Ta.length} pending writes`),i.Ta=[]))}))),i.fa}class ig{constructor(e,n,s,o,u){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=s,this.op=o,this.removalCallback=u,this.deferred=new qr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((f=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,n,s,o,u){const f=Date.now()+s,m=new ig(e,n,f,o,u);return m.start(s),m}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new fe(ne.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function sg(i,e){if(Ai("AsyncQueue",`${e}: ${i}`),Oo(i))return new fe(ne.UNAVAILABLE,`${e}: ${i}`);throw i}class fo{static emptySet(e){return new fo(e.comparator)}constructor(e){this.comparator=e?(n,s)=>e(n,s)||Te.comparator(n.key,s.key):(n,s)=>Te.comparator(n.key,s.key),this.keyedMap=Hl(),this.sortedSet=new gt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((n,s)=>(e(n),!1)))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof fo)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;n.hasNext();){const o=n.getNext().key,u=s.getNext().key;if(!o.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach((n=>{e.push(n.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const s=new fo;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=n,s}}class EE{constructor(){this.ga=new gt(Te.comparator)}track(e){const n=e.doc.key,s=this.ga.get(n);s?e.type!==0&&s.type===3?this.ga=this.ga.insert(n,e):e.type===3&&s.type!==1?this.ga=this.ga.insert(n,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.ga=this.ga.remove(n):e.type===1&&s.type===2?this.ga=this.ga.insert(n,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):Se(63341,{Rt:e,pa:s}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal(((n,s)=>{e.push(s)})),e}}class To{constructor(e,n,s,o,u,f,m,p,g){this.query=e,this.docs=n,this.oldDocs=s,this.docChanges=o,this.mutatedKeys=u,this.fromCache=f,this.syncStateChanged=m,this.excludesMetadataChanges=p,this.hasCachedResults=g}static fromInitialDocuments(e,n,s,o,u){const f=[];return n.forEach((m=>{f.push({type:0,doc:m})})),new To(e,n,fo.emptySet(n),f,s,o,!0,!1,u)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&af(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,s=e.docChanges;if(n.length!==s.length)return!1;for(let o=0;o<n.length;o++)if(n[o].type!==s[o].type||!n[o].doc.isEqual(s[o].doc))return!1;return!0}}class eN{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class tN{constructor(){this.queries=TE(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,s){const o=Ie(n),u=o.queries;o.queries=TE(),u.forEach(((f,m)=>{for(const p of m.Sa)p.onError(s)}))})(this,new fe(ne.ABORTED,"Firestore shutting down"))}}function TE(){return new da((i=>vb(i)),af)}async function ag(i,e){const n=Ie(i);let s=3;const o=e.query;let u=n.queries.get(o);u?!u.ba()&&e.Da()&&(s=2):(u=new eN,s=e.Da()?0:1);try{switch(s){case 0:u.wa=await n.onListen(o,!0);break;case 1:u.wa=await n.onListen(o,!1);break;case 2:await n.onFirstRemoteStoreListen(o)}}catch(f){const m=sg(f,`Initialization of query '${so(e.query)}' failed`);return void e.onError(m)}n.queries.set(o,u),u.Sa.push(e),e.va(n.onlineState),u.wa&&e.Fa(u.wa)&&lg(n)}async function og(i,e){const n=Ie(i),s=e.query;let o=3;const u=n.queries.get(s);if(u){const f=u.Sa.indexOf(e);f>=0&&(u.Sa.splice(f,1),u.Sa.length===0?o=e.Da()?0:1:!u.ba()&&e.Da()&&(o=2))}switch(o){case 0:return n.queries.delete(s),n.onUnlisten(s,!0);case 1:return n.queries.delete(s),n.onUnlisten(s,!1);case 2:return n.onLastRemoteStoreUnlisten(s);default:return}}function nN(i,e){const n=Ie(i);let s=!1;for(const o of e){const u=o.query,f=n.queries.get(u);if(f){for(const m of f.Sa)m.Fa(o)&&(s=!0);f.wa=o}}s&&lg(n)}function rN(i,e,n){const s=Ie(i),o=s.queries.get(e);if(o)for(const u of o.Sa)u.onError(n);s.queries.delete(e)}function lg(i){i.Ca.forEach((e=>{e.next()}))}var dp,bE;(bE=dp||(dp={})).Ma="default",bE.Cache="cache";class ug{constructor(e,n,s){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=s||{}}Fa(e){if(!this.options.includeMetadataChanges){const s=[];for(const o of e.docChanges)o.type!==3&&s.push(o);e=new To(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const s=n!=="Offline";return(!this.options.qa||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=To.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==dp.Cache}}class nS{constructor(e){this.key=e}}class rS{constructor(e){this.key=e}}class iN{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=qe(),this.mutatedKeys=qe(),this.eu=_b(e),this.tu=new fo(this.eu)}get nu(){return this.Ya}ru(e,n){const s=n?n.iu:new EE,o=n?n.tu:this.tu;let u=n?n.mutatedKeys:this.mutatedKeys,f=o,m=!1;const p=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,g=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal(((E,T)=>{const R=o.get(E),O=of(this.query,T)?T:null,j=!!R&&this.mutatedKeys.has(R.key),Q=!!O&&(O.hasLocalMutations||this.mutatedKeys.has(O.key)&&O.hasCommittedMutations);let q=!1;R&&O?R.data.isEqual(O.data)?j!==Q&&(s.track({type:3,doc:O}),q=!0):this.su(R,O)||(s.track({type:2,doc:O}),q=!0,(p&&this.eu(O,p)>0||g&&this.eu(O,g)<0)&&(m=!0)):!R&&O?(s.track({type:0,doc:O}),q=!0):R&&!O&&(s.track({type:1,doc:R}),q=!0,(p||g)&&(m=!0)),q&&(O?(f=f.add(O),u=Q?u.add(E):u.delete(E)):(f=f.delete(E),u=u.delete(E)))})),this.query.limit!==null)for(;f.size>this.query.limit;){const E=this.query.limitType==="F"?f.last():f.first();f=f.delete(E.key),u=u.delete(E.key),s.track({type:1,doc:E})}return{tu:f,iu:s,Cs:m,mutatedKeys:u}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,s,o){const u=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const f=e.iu.ya();f.sort(((E,T)=>(function(O,j){const Q=q=>{switch(q){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Se(20277,{Rt:q})}};return Q(O)-Q(j)})(E.type,T.type)||this.eu(E.doc,T.doc))),this.ou(s),o=o??!1;const m=n&&!o?this._u():[],p=this.Xa.size===0&&this.current&&!o?1:0,g=p!==this.Za;return this.Za=p,f.length!==0||g?{snapshot:new To(this.query,e.tu,u,f,e.mutatedKeys,p===0,g,!1,!!s&&s.resumeToken.approximateByteSize()>0),au:m}:{au:m}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new EE,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((n=>this.Ya=this.Ya.add(n))),e.modifiedDocuments.forEach((n=>{})),e.removedDocuments.forEach((n=>this.Ya=this.Ya.delete(n))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=qe(),this.tu.forEach((s=>{this.uu(s.key)&&(this.Xa=this.Xa.add(s.key))}));const n=[];return e.forEach((s=>{this.Xa.has(s)||n.push(new rS(s))})),this.Xa.forEach((s=>{e.has(s)||n.push(new nS(s))})),n}cu(e){this.Ya=e.Qs,this.Xa=qe();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return To.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const cg="SyncEngine";class sN{constructor(e,n,s){this.query=e,this.targetId=n,this.view=s}}class aN{constructor(e){this.key=e,this.hu=!1}}class oN{constructor(e,n,s,o,u,f){this.localStore=e,this.remoteStore=n,this.eventManager=s,this.sharedClientState=o,this.currentUser=u,this.maxConcurrentLimboResolutions=f,this.Pu={},this.Tu=new da((m=>vb(m)),af),this.Iu=new Map,this.Eu=new Set,this.du=new gt(Te.comparator),this.Au=new Map,this.Ru=new $p,this.Vu={},this.mu=new Map,this.fu=Eo.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function lN(i,e,n=!0){const s=uS(i);let o;const u=s.Tu.get(e);return u?(s.sharedClientState.addLocalQueryTarget(u.targetId),o=u.view.lu()):o=await iS(s,e,n,!0),o}async function uN(i,e){const n=uS(i);await iS(n,e,!0,!1)}async function iS(i,e,n,s){const o=await ID(i.localStore,Hr(e)),u=o.targetId,f=i.sharedClientState.addLocalQueryTarget(u,n);let m;return s&&(m=await cN(i,e,u,f==="current",o.resumeToken)),i.isPrimaryClient&&n&&Xb(i.remoteStore,o),m}async function cN(i,e,n,s,o){i.pu=(T,R,O)=>(async function(Q,q,$,X){let ee=q.view.ru($);ee.Cs&&(ee=await mE(Q.localStore,q.query,!1).then((({documents:x})=>q.view.ru(x,ee))));const de=X&&X.targetChanges.get(q.targetId),pe=X&&X.targetMismatches.get(q.targetId)!=null,Ee=q.view.applyChanges(ee,Q.isPrimaryClient,de,pe);return AE(Q,q.targetId,Ee.au),Ee.snapshot})(i,T,R,O);const u=await mE(i.localStore,e,!0),f=new iN(e,u.Qs),m=f.ru(u.documents),p=bu.createSynthesizedTargetChangeForCurrentChange(n,s&&i.onlineState!=="Offline",o),g=f.applyChanges(m,i.isPrimaryClient,p);AE(i,n,g.au);const E=new sN(e,n,f);return i.Tu.set(e,E),i.Iu.has(n)?i.Iu.get(n).push(e):i.Iu.set(n,[e]),g.snapshot}async function hN(i,e,n){const s=Ie(i),o=s.Tu.get(e),u=s.Iu.get(o.targetId);if(u.length>1)return s.Iu.set(o.targetId,u.filter((f=>!af(f,e)))),void s.Tu.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(o.targetId),s.sharedClientState.isActiveQueryTarget(o.targetId)||await hp(s.localStore,o.targetId,!1).then((()=>{s.sharedClientState.clearQueryState(o.targetId),n&&eg(s.remoteStore,o.targetId),mp(s,o.targetId)})).catch(No)):(mp(s,o.targetId),await hp(s.localStore,o.targetId,!0))}async function fN(i,e){const n=Ie(i),s=n.Tu.get(e),o=n.Iu.get(s.targetId);n.isPrimaryClient&&o.length===1&&(n.sharedClientState.removeLocalQueryTarget(s.targetId),eg(n.remoteStore,s.targetId))}async function dN(i,e,n){const s=EN(i);try{const o=await(function(f,m){const p=Ie(f),g=ht.now(),E=m.reduce(((O,j)=>O.add(j.key)),qe());let T,R;return p.persistence.runTransaction("Locally write mutations","readwrite",(O=>{let j=wi(),Q=qe();return p.Ns.getEntries(O,E).next((q=>{j=q,j.forEach((($,X)=>{X.isValidDocument()||(Q=Q.add($))}))})).next((()=>p.localDocuments.getOverlayedDocuments(O,j))).next((q=>{T=q;const $=[];for(const X of m){const ee=D2(X,T.get(X.key).overlayedDocument);ee!=null&&$.push(new ws(X.key,ee,cb(ee.value.mapValue),sn.exists(!0)))}return p.mutationQueue.addMutationBatch(O,g,$,m)})).next((q=>{R=q;const $=q.applyToLocalDocumentSet(T,Q);return p.documentOverlayCache.saveOverlays(O,q.batchId,$)}))})).then((()=>({batchId:R.batchId,changes:Tb(T)})))})(s.localStore,e);s.sharedClientState.addPendingMutation(o.batchId),(function(f,m,p){let g=f.Vu[f.currentUser.toKey()];g||(g=new gt(Be)),g=g.insert(m,p),f.Vu[f.currentUser.toKey()]=g})(s,o.batchId,n),await Au(s,o.changes),await mf(s.remoteStore)}catch(o){const u=sg(o,"Failed to persist write");n.reject(u)}}async function sS(i,e){const n=Ie(i);try{const s=await RD(n.localStore,e);e.targetChanges.forEach(((o,u)=>{const f=n.Au.get(u);f&&(Qe(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?f.hu=!0:o.modifiedDocuments.size>0?Qe(f.hu,14607):o.removedDocuments.size>0&&(Qe(f.hu,42227),f.hu=!1))})),await Au(n,s,e)}catch(s){await No(s)}}function SE(i,e,n){const s=Ie(i);if(s.isPrimaryClient&&n===0||!s.isPrimaryClient&&n===1){const o=[];s.Tu.forEach(((u,f)=>{const m=f.view.va(e);m.snapshot&&o.push(m.snapshot)})),(function(f,m){const p=Ie(f);p.onlineState=m;let g=!1;p.queries.forEach(((E,T)=>{for(const R of T.Sa)R.va(m)&&(g=!0)})),g&&lg(p)})(s.eventManager,e),o.length&&s.Pu.H_(o),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function mN(i,e,n){const s=Ie(i);s.sharedClientState.updateQueryState(e,"rejected",n);const o=s.Au.get(e),u=o&&o.key;if(u){let f=new gt(Te.comparator);f=f.insert(u,Kt.newNoDocument(u,Re.min()));const m=qe().add(u),p=new hf(Re.min(),new Map,new gt(Be),f,m);await sS(s,p),s.du=s.du.remove(u),s.Au.delete(e),hg(s)}else await hp(s.localStore,e,!1).then((()=>mp(s,e,n))).catch(No)}async function pN(i,e){const n=Ie(i),s=e.batch.batchId;try{const o=await wD(n.localStore,e);oS(n,s,null),aS(n,s),n.sharedClientState.updateMutationState(s,"acknowledged"),await Au(n,o)}catch(o){await No(o)}}async function gN(i,e,n){const s=Ie(i);try{const o=await(function(f,m){const p=Ie(f);return p.persistence.runTransaction("Reject batch","readwrite-primary",(g=>{let E;return p.mutationQueue.lookupMutationBatch(g,m).next((T=>(Qe(T!==null,37113),E=T.keys(),p.mutationQueue.removeMutationBatch(g,T)))).next((()=>p.mutationQueue.performConsistencyCheck(g))).next((()=>p.documentOverlayCache.removeOverlaysForBatchId(g,E,m))).next((()=>p.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(g,E))).next((()=>p.localDocuments.getDocuments(g,E)))}))})(s.localStore,e);oS(s,e,n),aS(s,e),s.sharedClientState.updateMutationState(e,"rejected",n),await Au(s,o)}catch(o){await No(o)}}function aS(i,e){(i.mu.get(e)||[]).forEach((n=>{n.resolve()})),i.mu.delete(e)}function oS(i,e,n){const s=Ie(i);let o=s.Vu[s.currentUser.toKey()];if(o){const u=o.get(e);u&&(n?u.reject(n):u.resolve(),o=o.remove(e)),s.Vu[s.currentUser.toKey()]=o}}function mp(i,e,n=null){i.sharedClientState.removeLocalQueryTarget(e);for(const s of i.Iu.get(e))i.Tu.delete(s),n&&i.Pu.yu(s,n);i.Iu.delete(e),i.isPrimaryClient&&i.Ru.jr(e).forEach((s=>{i.Ru.containsKey(s)||lS(i,s)}))}function lS(i,e){i.Eu.delete(e.path.canonicalString());const n=i.du.get(e);n!==null&&(eg(i.remoteStore,n),i.du=i.du.remove(e),i.Au.delete(n),hg(i))}function AE(i,e,n){for(const s of n)s instanceof nS?(i.Ru.addReference(s.key,e),yN(i,s)):s instanceof rS?(me(cg,"Document no longer in limbo: "+s.key),i.Ru.removeReference(s.key,e),i.Ru.containsKey(s.key)||lS(i,s.key)):Se(19791,{wu:s})}function yN(i,e){const n=e.key,s=n.path.canonicalString();i.du.get(n)||i.Eu.has(s)||(me(cg,"New document in limbo: "+n),i.Eu.add(s),hg(i))}function hg(i){for(;i.Eu.size>0&&i.du.size<i.maxConcurrentLimboResolutions;){const e=i.Eu.values().next().value;i.Eu.delete(e);const n=new Te(at.fromString(e)),s=i.fu.next();i.Au.set(s,new aN(n)),i.du=i.du.insert(n,s),Xb(i.remoteStore,new cs(Hr(sf(n.path)),s,"TargetPurposeLimboResolution",nf.ce))}}async function Au(i,e,n){const s=Ie(i),o=[],u=[],f=[];s.Tu.isEmpty()||(s.Tu.forEach(((m,p)=>{f.push(s.pu(p,e,n).then((g=>{if((g||n)&&s.isPrimaryClient){const E=g?!g.fromCache:n?.targetChanges.get(p.targetId)?.current;s.sharedClientState.updateQueryState(p.targetId,E?"current":"not-current")}if(g){o.push(g);const E=Wp.As(p.targetId,g);u.push(E)}})))})),await Promise.all(f),s.Pu.H_(o),await(async function(p,g){const E=Ie(p);try{await E.persistence.runTransaction("notifyLocalViewChanges","readwrite",(T=>se.forEach(g,(R=>se.forEach(R.Es,(O=>E.persistence.referenceDelegate.addReference(T,R.targetId,O))).next((()=>se.forEach(R.ds,(O=>E.persistence.referenceDelegate.removeReference(T,R.targetId,O)))))))))}catch(T){if(!Oo(T))throw T;me(Jp,"Failed to update sequence numbers: "+T)}for(const T of g){const R=T.targetId;if(!T.fromCache){const O=E.Ms.get(R),j=O.snapshotVersion,Q=O.withLastLimboFreeSnapshotVersion(j);E.Ms=E.Ms.insert(R,Q)}}})(s.localStore,u))}async function vN(i,e){const n=Ie(i);if(!n.currentUser.isEqual(e)){me(cg,"User change. New user:",e.toKey());const s=await Yb(n.localStore,e);n.currentUser=e,(function(u,f){u.mu.forEach((m=>{m.forEach((p=>{p.reject(new fe(ne.CANCELLED,f))}))})),u.mu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await Au(n,s.Ls)}}function _N(i,e){const n=Ie(i),s=n.Au.get(e);if(s&&s.hu)return qe().add(s.key);{let o=qe();const u=n.Iu.get(e);if(!u)return o;for(const f of u){const m=n.Tu.get(f);o=o.unionWith(m.view.nu)}return o}}function uS(i){const e=Ie(i);return e.remoteStore.remoteSyncer.applyRemoteEvent=sS.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=_N.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=mN.bind(null,e),e.Pu.H_=nN.bind(null,e.eventManager),e.Pu.yu=rN.bind(null,e.eventManager),e}function EN(i){const e=Ie(i);return e.remoteStore.remoteSyncer.applySuccessfulWrite=pN.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=gN.bind(null,e),e}class Gh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=ff(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return AD(this.persistence,new TD,e.initialUser,this.serializer)}Cu(e){return new Qb(Xp.mi,this.serializer)}Du(e){return new ND}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Gh.provider={build:()=>new Gh};class TN extends Gh{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){Qe(this.persistence.referenceDelegate instanceof Hh,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new aD(s,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?wn.withCacheSize(this.cacheSizeBytes):wn.DEFAULT;return new Qb((s=>Hh.mi(s,n)),this.serializer)}}class pp{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>SE(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=vN.bind(null,this.syncEngine),await ZD(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new tN})()}createDatastore(e){const n=ff(e.databaseInfo.databaseId),s=(function(u){return new PD(u)})(e.databaseInfo);return(function(u,f,m,p){return new zD(u,f,m,p)})(e.authCredentials,e.appCheckCredentials,s,n)}createRemoteStore(e){return(function(s,o,u,f,m){return new qD(s,o,u,f,m)})(this.localStore,this.datastore,e.asyncQueue,(n=>SE(this.syncEngine,n,0)),(function(){return yE.v()?new yE:new OD})())}createSyncEngine(e,n){return(function(o,u,f,m,p,g,E){const T=new oN(o,u,f,m,p,g);return E&&(T.gu=!0),T})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){await(async function(n){const s=Ie(n);me(fa,"RemoteStore shutting down."),s.Ea.add(5),await Su(s),s.Aa.shutdown(),s.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}pp.provider={build:()=>new pp};class fg{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Ai("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout((()=>{this.muted||e(n)}),0)}}class bN{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new fe(ne.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const n=await(async function(o,u){const f=Ie(o),m={documents:u.map((T=>qh(f.serializer,T)))},p=await f.Ho("BatchGetDocuments",f.serializer.databaseId,at.emptyPath(),m,u.length),g=new Map;p.forEach((T=>{const R=H2(f.serializer,T);g.set(R.key.toString(),R)}));const E=[];return u.forEach((T=>{const R=g.get(T.toString());Qe(!!R,55234,{key:T}),E.push(R)})),E})(this.datastore,e);return n.forEach((s=>this.recordVersion(s))),n}set(e,n){this.write(n.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,n){try{this.write(n.toMutation(e,this.preconditionForUpdate(e)))}catch(s){this.lastTransactionError=s}this.writtenDocs.add(e.toString())}delete(e){this.write(new cf(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach((n=>{e.delete(n.key.toString())})),e.forEach(((n,s)=>{const o=Te.fromPath(s);this.mutations.push(new Ob(o,this.precondition(o)))})),await(async function(s,o){const u=Ie(s),f={writes:o.map((m=>Bb(u.serializer,m)))};await u.Go("Commit",u.serializer.databaseId,at.emptyPath(),f)})(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let n;if(e.isFoundDocument())n=e.version;else{if(!e.isNoDocument())throw Se(50498,{Gu:e.constructor.name});n=Re.min()}const s=this.readVersions.get(e.key.toString());if(s){if(!n.isEqual(s))throw new fe(ne.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),n)}precondition(e){const n=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&n?n.isEqual(Re.min())?sn.exists(!1):sn.updateTime(n):sn.none()}preconditionForUpdate(e){const n=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&n){if(n.isEqual(Re.min()))throw new fe(ne.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return sn.updateTime(n)}return sn.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class SN{constructor(e,n,s,o,u){this.asyncQueue=e,this.datastore=n,this.options=s,this.updateFunction=o,this.deferred=u,this.zu=s.maxAttempts,this.M_=new Zp(this.asyncQueue,"transaction_retry")}ju(){this.zu-=1,this.Ju()}Ju(){this.M_.p_((async()=>{const e=new bN(this.datastore),n=this.Hu(e);n&&n.then((s=>{this.asyncQueue.enqueueAndForget((()=>e.commit().then((()=>{this.deferred.resolve(s)})).catch((o=>{this.Yu(o)}))))})).catch((s=>{this.Yu(s)}))}))}Hu(e){try{const n=this.updateFunction(e);return!_u(n)&&n.catch&&n.then?n:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(n){return this.deferred.reject(n),null}}Yu(e){this.zu>0&&this.Zu(e)?(this.zu-=1,this.asyncQueue.enqueueAndForget((()=>(this.Ju(),Promise.resolve())))):this.deferred.reject(e)}Zu(e){if(e?.name==="FirebaseError"){const n=e.code;return n==="aborted"||n==="failed-precondition"||n==="already-exists"||!Mb(n)}return!1}}const bs="FirestoreClient";class AN{constructor(e,n,s,o,u){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=s,this.databaseInfo=o,this.user=un.UNAUTHENTICATED,this.clientId=jp.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=u,this.authCredentials.start(s,(async f=>{me(bs,"Received user=",f.uid),await this.authCredentialListener(f),this.user=f})),this.appCheckCredentials.start(s,(f=>(me(bs,"Received new app check token=",f),this.appCheckCredentialListener(f,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new qr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const s=sg(n,"Failed to shutdown persistence");e.reject(s)}})),e.promise}}async function zm(i,e){i.asyncQueue.verifyOperationInProgress(),me(bs,"Initializing OfflineComponentProvider");const n=i.configuration;await e.initialize(n);let s=n.initialUser;i.setCredentialChangeListener((async o=>{s.isEqual(o)||(await Yb(e.localStore,o),s=o)})),e.persistence.setDatabaseDeletedListener((()=>i.terminate())),i._offlineComponents=e}async function wE(i,e){i.asyncQueue.verifyOperationInProgress();const n=await wN(i);me(bs,"Initializing OnlineComponentProvider"),await e.initialize(n,i.configuration),i.setCredentialChangeListener((s=>_E(e.remoteStore,s))),i.setAppCheckTokenChangeListener(((s,o)=>_E(e.remoteStore,o))),i._onlineComponents=e}async function wN(i){if(!i._offlineComponents)if(i._uninitializedComponentsProvider){me(bs,"Using user provided OfflineComponentProvider");try{await zm(i,i._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!(function(o){return o.name==="FirebaseError"?o.code===ne.FAILED_PRECONDITION||o.code===ne.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11})(n))throw n;go("Error using user provided cache. Falling back to memory cache: "+n),await zm(i,new Gh)}}else me(bs,"Using default OfflineComponentProvider"),await zm(i,new TN(void 0));return i._offlineComponents}async function dg(i){return i._onlineComponents||(i._uninitializedComponentsProvider?(me(bs,"Using user provided OnlineComponentProvider"),await wE(i,i._uninitializedComponentsProvider._online)):(me(bs,"Using default OnlineComponentProvider"),await wE(i,new pp))),i._onlineComponents}function RN(i){return dg(i).then((e=>e.syncEngine))}function CN(i){return dg(i).then((e=>e.datastore))}async function Qh(i){const e=await dg(i),n=e.eventManager;return n.onListen=lN.bind(null,e.syncEngine),n.onUnlisten=hN.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=uN.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=fN.bind(null,e.syncEngine),n}function xN(i,e,n={}){const s=new qr;return i.asyncQueue.enqueueAndForget((async()=>(function(u,f,m,p,g){const E=new fg({next:R=>{E.Nu(),f.enqueueAndForget((()=>og(u,T)));const O=R.docs.has(m);!O&&R.fromCache?g.reject(new fe(ne.UNAVAILABLE,"Failed to get document because the client is offline.")):O&&R.fromCache&&p&&p.source==="server"?g.reject(new fe(ne.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):g.resolve(R)},error:R=>g.reject(R)}),T=new ug(sf(m.path),E,{includeMetadataChanges:!0,qa:!0});return ag(u,T)})(await Qh(i),i.asyncQueue,e,n,s))),s.promise}function IN(i,e,n={}){const s=new qr;return i.asyncQueue.enqueueAndForget((async()=>(function(u,f,m,p,g){const E=new fg({next:R=>{E.Nu(),f.enqueueAndForget((()=>og(u,T))),R.fromCache&&p.source==="server"?g.reject(new fe(ne.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):g.resolve(R)},error:R=>g.reject(R)}),T=new ug(m,E,{includeMetadataChanges:!0,qa:!0});return ag(u,T)})(await Qh(i),i.asyncQueue,e,n,s))),s.promise}function cS(i){const e={};return i.timeoutSeconds!==void 0&&(e.timeoutSeconds=i.timeoutSeconds),e}const RE=new Map;const hS="firestore.googleapis.com",CE=!0;class xE{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new fe(ne.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=hS,this.ssl=CE}else this.host=e.host,this.ssl=e.ssl??CE;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=Gb;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<iD)throw new fe(ne.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}GI("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=cS(e.experimentalLongPollingOptions??{}),(function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new fe(ne.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new fe(ne.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new fe(ne.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(s,o){return s.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class pf{constructor(e,n,s,o){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=s,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new xE({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new fe(ne.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new fe(ne.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new xE(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(s){if(!s)return new kI;switch(s.type){case"firstParty":return new jI(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new fe(ne.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const s=RE.get(n);s&&(me("ComponentProvider","Removing Datastore"),RE.delete(n),s.terminate())})(this),Promise.resolve()}}function DN(i,e,n,s={}){i=gn(i,pf);const o=Co(e),u=i._getSettings(),f={...u,emulatorOptions:i._getEmulatorOptions()},m=`${e}:${n}`;o&&(oT(`https://${m}`),lT("Firestore",!0)),u.host!==hS&&u.host!==m&&go("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const p={...u,host:m,ssl:o,emulatorOptions:s};if(!la(p,f)&&(i._setSettings(p),s.mockUserToken)){let g,E;if(typeof s.mockUserToken=="string")g=s.mockUserToken,E=un.MOCK_USER;else{g=sR(s.mockUserToken,i._app?.options.projectId);const T=s.mockUserToken.sub||s.mockUserToken.user_id;if(!T)throw new fe(ne.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");E=new un(T)}i._authCredentials=new PI(new JT(g,E))}}class pa{constructor(e,n,s){this.converter=n,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new pa(this.firestore,e,this._query)}}class pt{constructor(e,n,s){this.converter=n,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ps(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new pt(this.firestore,e,this._key)}toJSON(){return{type:pt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,s){if(vu(n,pt._jsonSchema))return new pt(e,s||null,new Te(at.fromString(n.referencePath)))}}pt._jsonSchemaVersion="firestore/documentReference/1.0",pt._jsonSchema={type:jt("string",pt._jsonSchemaVersion),referencePath:jt("string")};class ps extends pa{constructor(e,n,s){super(e,n,sf(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new pt(this.firestore,null,new Te(e))}withConverter(e){return new ps(this.firestore,e,this._path)}}function Lt(i,e,...n){if(i=zt(i),ZT("collection","path",e),i instanceof pf){const s=at.fromString(e,...n);return B0(s),new ps(i,null,s)}{if(!(i instanceof pt||i instanceof ps))throw new fe(ne.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=i._path.child(at.fromString(e,...n));return B0(s),new ps(i.firestore,null,s)}}function pn(i,e,...n){if(i=zt(i),arguments.length===1&&(e=jp.newId()),ZT("doc","path",e),i instanceof pf){const s=at.fromString(e,...n);return z0(s),new pt(i,null,new Te(s))}{if(!(i instanceof pt||i instanceof ps))throw new fe(ne.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=i._path.child(at.fromString(e,...n));return z0(s),new pt(i.firestore,i instanceof ps?i.converter:null,new Te(s))}}const IE="AsyncQueue";class DE{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new Zp(this,"async_queue_retry"),this._c=()=>{const s=jm();s&&me(IE,"Visibility state changed to "+s.visibilityState),this.M_.w_()},this.ac=e;const n=jm();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=jm();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const n=new qr;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Oo(e))throw e;me(IE,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const n=this.ac.then((()=>(this.rc=!0,e().catch((s=>{throw this.nc=s,this.rc=!1,Ai("INTERNAL UNHANDLED ERROR: ",NE(s)),s})).then((s=>(this.rc=!1,s))))));return this.ac=n,n}enqueueAfterDelay(e,n,s){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const o=ig.createAndSchedule(this,e,n,s,(u=>this.hc(u)));return this.tc.push(o),o}uc(){this.nc&&Se(47125,{Pc:NE(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((n,s)=>n.targetTimeMs-s.targetTimeMs));for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function NE(i){let e=i.message||"";return i.stack&&(e=i.stack.includes(i.message)?i.stack:i.message+`
`+i.stack),e}function OE(i){return(function(n,s){if(typeof n!="object"||n===null)return!1;const o=n;for(const u of s)if(u in o&&typeof o[u]=="function")return!0;return!1})(i,["next","error","complete"])}class Kr extends pf{constructor(e,n,s,o){super(e,n,s,o),this.type="firestore",this._queue=new DE,this._persistenceKey=o?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new DE(e),this._firestoreClient=void 0,await e}}}function NN(i,e){const n=typeof i=="object"?i:fT(),s=typeof i=="string"?i:Lh,o=Cp(n,"firestore").getImmediate({identifier:s});if(!o._initialized){const u=rR("firestore");u&&DN(o,...u)}return o}function wu(i){if(i._terminated)throw new fe(ne.FAILED_PRECONDITION,"The client has already been terminated.");return i._firestoreClient||ON(i),i._firestoreClient}function ON(i){const e=i._freezeSettings(),n=(function(o,u,f,m){return new n2(o,u,f,m.host,m.ssl,m.experimentalForceLongPolling,m.experimentalAutoDetectLongPolling,cS(m.experimentalLongPollingOptions),m.useFetchStreams,m.isUsingEmulator)})(i._databaseId,i._app?.options.appId||"",i._persistenceKey,e);i._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(i._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),i._firestoreClient=new AN(i._authCredentials,i._appCheckCredentials,i._queue,n,i._componentsProvider&&(function(o){const u=o?._online.build();return{_offline:o?._offline.build(u),_online:u}})(i._componentsProvider))}class Pn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Pn(an.fromBase64String(e))}catch(n){throw new fe(ne.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Pn(an.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Pn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(vu(e,Pn._jsonSchema))return Pn.fromBase64String(e.bytes)}}Pn._jsonSchemaVersion="firestore/bytes/1.0",Pn._jsonSchema={type:jt("string",Pn._jsonSchemaVersion),bytes:jt("string")};class Ru{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new fe(ne.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new rn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Cu{constructor(e){this._methodName=e}}class Fr{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new fe(ne.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new fe(ne.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Be(this._lat,e._lat)||Be(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Fr._jsonSchemaVersion}}static fromJSON(e){if(vu(e,Fr._jsonSchema))return new Fr(e.latitude,e.longitude)}}Fr._jsonSchemaVersion="firestore/geoPoint/1.0",Fr._jsonSchema={type:jt("string",Fr._jsonSchemaVersion),latitude:jt("number"),longitude:jt("number")};class Gr{constructor(e){this._values=(e||[]).map((n=>n))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(s,o){if(s.length!==o.length)return!1;for(let u=0;u<s.length;++u)if(s[u]!==o[u])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Gr._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(vu(e,Gr._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((n=>typeof n=="number")))return new Gr(e.vectorValues);throw new fe(ne.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Gr._jsonSchemaVersion="firestore/vectorValue/1.0",Gr._jsonSchema={type:jt("string",Gr._jsonSchemaVersion),vectorValues:jt("object")};const MN=/^__.*__$/;class VN{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return this.fieldMask!==null?new ws(e,this.data,this.fieldMask,n,this.fieldTransforms):new Tu(e,this.data,n,this.fieldTransforms)}}class fS{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return new ws(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function dS(i){switch(i){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Se(40011,{Ac:i})}}class mg{constructor(e,n,s,o,u,f){this.settings=e,this.databaseId=n,this.serializer=s,this.ignoreUndefinedProperties=o,u===void 0&&this.Rc(),this.fieldTransforms=u||[],this.fieldMask=f||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new mg({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const n=this.path?.child(e),s=this.Vc({path:n,fc:!1});return s.gc(e),s}yc(e){const n=this.path?.child(e),s=this.Vc({path:n,fc:!1});return s.Rc(),s}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Yh(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((n=>e.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>e.isPrefixOf(n.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(dS(this.Ac)&&MN.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class kN{constructor(e,n,s){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=s||ff(e)}Cc(e,n,s,o=!1){return new mg({Ac:e,methodName:n,Dc:s,path:rn.emptyPath(),fc:!1,bc:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function xu(i){const e=i._freezeSettings(),n=ff(i._databaseId);return new kN(i._databaseId,!!e.ignoreUndefinedProperties,n)}function pg(i,e,n,s,o,u={}){const f=i.Cc(u.merge||u.mergeFields?2:0,e,n,o);vg("Data must be an object, but it was:",f,s);const m=gS(s,f);let p,g;if(u.merge)p=new Ln(f.fieldMask),g=f.fieldTransforms;else if(u.mergeFields){const E=[];for(const T of u.mergeFields){const R=gp(e,T,n);if(!f.contains(R))throw new fe(ne.INVALID_ARGUMENT,`Field '${R}' is specified in your field mask but missing from your input data.`);vS(E,R)||E.push(R)}p=new Ln(E),g=f.fieldTransforms.filter((T=>p.covers(T.field)))}else p=null,g=f.fieldTransforms;return new VN(new mn(m),p,g)}class gf extends Cu{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof gf}}class gg extends Cu{_toFieldTransform(e){return new Ib(e.path,new ou)}isEqual(e){return e instanceof gg}}class yg extends Cu{constructor(e,n){super(e),this.Fc=n}_toFieldTransform(e){const n=new cu(e.serializer,Ab(e.serializer,this.Fc));return new Ib(e.path,n)}isEqual(e){return e instanceof yg&&this.Fc===e.Fc}}function mS(i,e,n,s){const o=i.Cc(1,e,n);vg("Data must be an object, but it was:",o,s);const u=[],f=mn.empty();As(s,((p,g)=>{const E=_g(e,p,n);g=zt(g);const T=o.yc(E);if(g instanceof gf)u.push(E);else{const R=Iu(g,T);R!=null&&(u.push(E),f.set(E,R))}}));const m=new Ln(u);return new fS(f,m,o.fieldTransforms)}function pS(i,e,n,s,o,u){const f=i.Cc(1,e,n),m=[gp(e,s,n)],p=[o];if(u.length%2!=0)throw new fe(ne.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let R=0;R<u.length;R+=2)m.push(gp(e,u[R])),p.push(u[R+1]);const g=[],E=mn.empty();for(let R=m.length-1;R>=0;--R)if(!vS(g,m[R])){const O=m[R];let j=p[R];j=zt(j);const Q=f.yc(O);if(j instanceof gf)g.push(O);else{const q=Iu(j,Q);q!=null&&(g.push(O),E.set(O,q))}}const T=new Ln(g);return new fS(E,T,f.fieldTransforms)}function PN(i,e,n,s=!1){return Iu(n,i.Cc(s?4:3,e))}function Iu(i,e){if(yS(i=zt(i)))return vg("Unsupported field value:",e,i),gS(i,e);if(i instanceof Cu)return(function(s,o){if(!dS(o.Ac))throw o.Sc(`${s._methodName}() can only be used with update() and set()`);if(!o.path)throw o.Sc(`${s._methodName}() is not currently supported inside arrays`);const u=s._toFieldTransform(o);u&&o.fieldTransforms.push(u)})(i,e),null;if(i===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),i instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(s,o){const u=[];let f=0;for(const m of s){let p=Iu(m,o.wc(f));p==null&&(p={nullValue:"NULL_VALUE"}),u.push(p),f++}return{arrayValue:{values:u}}})(i,e)}return(function(s,o){if((s=zt(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return Ab(o.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const u=ht.fromDate(s);return{timestampValue:Bh(o.serializer,u)}}if(s instanceof ht){const u=new ht(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:Bh(o.serializer,u)}}if(s instanceof Fr)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof Pn)return{bytesValue:Lb(o.serializer,s._byteString)};if(s instanceof pt){const u=o.databaseId,f=s.firestore._databaseId;if(!f.isEqual(u))throw o.Sc(`Document reference is for database ${f.projectId}/${f.database} but should be for database ${u.projectId}/${u.database}`);return{referenceValue:Kp(s.firestore._databaseId||o.databaseId,s._key.path)}}if(s instanceof Gr)return(function(f,m){return{mapValue:{fields:{[lb]:{stringValue:ub},[Uh]:{arrayValue:{values:f.toArray().map((g=>{if(typeof g!="number")throw m.Sc("VectorValues must only contain numeric values.");return Gp(m.serializer,g)}))}}}}}})(s,o);throw o.Sc(`Unsupported field value: ${tf(s)}`)})(i,e)}function gS(i,e){const n={};return nb(i)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):As(i,((s,o)=>{const u=Iu(o,e.mc(s));u!=null&&(n[s]=u)})),{mapValue:{fields:n}}}function yS(i){return!(typeof i!="object"||i===null||i instanceof Array||i instanceof Date||i instanceof ht||i instanceof Fr||i instanceof Pn||i instanceof pt||i instanceof Cu||i instanceof Gr)}function vg(i,e,n){if(!yS(n)||!eb(n)){const s=tf(n);throw s==="an object"?e.Sc(i+" a custom object"):e.Sc(i+" "+s)}}function gp(i,e,n){if((e=zt(e))instanceof Ru)return e._internalPath;if(typeof e=="string")return _g(i,e);throw Yh("Field path arguments must be of type string or ",i,!1,void 0,n)}const LN=new RegExp("[~\\*/\\[\\]]");function _g(i,e,n){if(e.search(LN)>=0)throw Yh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,i,!1,void 0,n);try{return new Ru(...e.split("."))._internalPath}catch{throw Yh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,i,!1,void 0,n)}}function Yh(i,e,n,s,o){const u=s&&!s.isEmpty(),f=o!==void 0;let m=`Function ${e}() called with invalid data`;n&&(m+=" (via `toFirestore()`)"),m+=". ";let p="";return(u||f)&&(p+=" (found",u&&(p+=` in field ${s}`),f&&(p+=` in document ${o}`),p+=")"),new fe(ne.INVALID_ARGUMENT,m+i+p)}function vS(i,e){return i.some((n=>n.isEqual(e)))}class Kh{constructor(e,n,s,o,u){this._firestore=e,this._userDataWriter=n,this._key=s,this._document=o,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new pt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new UN(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Eg("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class UN extends Kh{data(){return super.data()}}function Eg(i,e){return typeof e=="string"?_g(i,e):e instanceof Ru?e._internalPath:e._delegate._internalPath}function _S(i){if(i.limitType==="L"&&i.explicitOrderBy.length===0)throw new fe(ne.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Tg{}class jN extends Tg{}function yf(i,e,...n){let s=[];e instanceof Tg&&s.push(e),s=s.concat(n),(function(u){const f=u.filter((p=>p instanceof bg)).length,m=u.filter((p=>p instanceof vf)).length;if(f>1||f>0&&m>0)throw new fe(ne.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(s);for(const o of s)i=o._apply(i);return i}class vf extends jN{constructor(e,n,s){super(),this._field=e,this._op=n,this._value=s,this.type="where"}static _create(e,n,s){return new vf(e,n,s)}_apply(e){const n=this._parse(e);return ES(e._query,n),new pa(e.firestore,e.converter,ap(e._query,n))}_parse(e){const n=xu(e.firestore);return(function(u,f,m,p,g,E,T){let R;if(g.isKeyField()){if(E==="array-contains"||E==="array-contains-any")throw new fe(ne.INVALID_ARGUMENT,`Invalid Query. You can't perform '${E}' queries on documentId().`);if(E==="in"||E==="not-in"){VE(T,E);const j=[];for(const Q of T)j.push(ME(p,u,Q));R={arrayValue:{values:j}}}else R=ME(p,u,T)}else E!=="in"&&E!=="not-in"&&E!=="array-contains-any"||VE(T,E),R=PN(m,f,T,E==="in"||E==="not-in");return Ut.create(g,E,R)})(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function bo(i,e,n){const s=e,o=Eg("where",i);return vf._create(o,s,n)}class bg extends Tg{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new bg(e,n)}_parse(e){const n=this._queryConstraints.map((s=>s._parse(e))).filter((s=>s.getFilters().length>0));return n.length===1?n[0]:yr.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:((function(o,u){let f=o;const m=u.getFlattenedFilters();for(const p of m)ES(f,p),f=ap(f,p)})(e._query,n),new pa(e.firestore,e.converter,ap(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function ME(i,e,n){if(typeof(n=zt(n))=="string"){if(n==="")throw new fe(ne.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!yb(e)&&n.indexOf("/")!==-1)throw new fe(ne.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const s=e.path.child(at.fromString(n));if(!Te.isDocumentKey(s))throw new fe(ne.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return $0(i,new Te(s))}if(n instanceof pt)return $0(i,n._key);throw new fe(ne.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${tf(n)}.`)}function VE(i,e){if(!Array.isArray(i)||i.length===0)throw new fe(ne.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function ES(i,e){const n=(function(o,u){for(const f of o)for(const m of f.getFlattenedFilters())if(u.indexOf(m.op)>=0)return m.op;return null})(i.filters,(function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(n!==null)throw n===e.op?new fe(ne.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new fe(ne.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class TS{convertValue(e,n="none"){switch(Es(e)){case 0:return null;case 1:return e.booleanValue;case 2:return At(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(_s(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Se(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const s={};return As(e,((o,u)=>{s[o]=this.convertValue(u,n)})),s}convertVectorValue(e){const n=e.fields?.[Uh].arrayValue?.values?.map((s=>At(s.doubleValue)));return new Gr(n)}convertGeoPoint(e){return new Fr(At(e.latitude),At(e.longitude))}convertArray(e,n){return(e.values||[]).map((s=>this.convertValue(s,n)))}convertServerTimestamp(e,n){switch(n){case"previous":const s=rf(e);return s==null?null:this.convertValue(s,n);case"estimate":return this.convertTimestamp(iu(e));default:return null}}convertTimestamp(e){const n=vs(e);return new ht(n.seconds,n.nanos)}convertDocumentKey(e,n){const s=at.fromString(e);Qe(Fb(s),9688,{name:e});const o=new su(s.get(1),s.get(3)),u=new Te(s.popFirst(5));return o.isEqual(n)||Ai(`Document ${u} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),u}}function Sg(i,e,n){let s;return s=i?n&&(n.merge||n.mergeFields)?i.toFirestore(e,n):i.toFirestore(e):e,s}class zN extends TS{constructor(e){super(),this.firestore=e}convertBytes(e){return new Pn(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new pt(this.firestore,null,n)}}class lo{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class gs extends Kh{constructor(e,n,s,o,u,f){super(e,n,s,o,f),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new wh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const s=this._document.data.field(Eg("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new fe(ne.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=gs._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}gs._jsonSchemaVersion="firestore/documentSnapshot/1.0",gs._jsonSchema={type:jt("string",gs._jsonSchemaVersion),bundleSource:jt("string","DocumentSnapshot"),bundleName:jt("string"),bundle:jt("string")};class wh extends gs{data(e={}){return super.data(e)}}class oa{constructor(e,n,s,o){this._firestore=e,this._userDataWriter=n,this._snapshot=o,this.metadata=new lo(o.hasPendingWrites,o.fromCache),this.query=s}get docs(){const e=[];return this.forEach((n=>e.push(n))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach((s=>{e.call(n,new wh(this._firestore,this._userDataWriter,s.key,s,new lo(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new fe(ne.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(o,u){if(o._snapshot.oldDocs.isEmpty()){let f=0;return o._snapshot.docChanges.map((m=>{const p=new wh(o._firestore,o._userDataWriter,m.doc.key,m.doc,new lo(o._snapshot.mutatedKeys.has(m.doc.key),o._snapshot.fromCache),o.query.converter);return m.doc,{type:"added",doc:p,oldIndex:-1,newIndex:f++}}))}{let f=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((m=>u||m.type!==3)).map((m=>{const p=new wh(o._firestore,o._userDataWriter,m.doc.key,m.doc,new lo(o._snapshot.mutatedKeys.has(m.doc.key),o._snapshot.fromCache),o.query.converter);let g=-1,E=-1;return m.type!==0&&(g=f.indexOf(m.doc.key),f=f.delete(m.doc.key)),m.type!==1&&(f=f.add(m.doc),E=f.indexOf(m.doc.key)),{type:BN(m.type),doc:p,oldIndex:g,newIndex:E}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new fe(ne.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=oa._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=jp.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],s=[],o=[];return this.docs.forEach((u=>{u._document!==null&&(n.push(u._document),s.push(this._userDataWriter.convertObjectMap(u._document.data.value.mapValue.fields,"previous")),o.push(u.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function BN(i){switch(i){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Se(61501,{type:i})}}function Ei(i){i=gn(i,pt);const e=gn(i.firestore,Kr);return xN(wu(e),i._key).then((n=>SS(e,i,n)))}oa._jsonSchemaVersion="firestore/querySnapshot/1.0",oa._jsonSchema={type:jt("string",oa._jsonSchemaVersion),bundleSource:jt("string","QuerySnapshot"),bundleName:jt("string"),bundle:jt("string")};class _f extends TS{constructor(e){super(),this.firestore=e}convertBytes(e){return new Pn(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new pt(this.firestore,null,n)}}function Rn(i){i=gn(i,pa);const e=gn(i.firestore,Kr),n=wu(e),s=new _f(e);return _S(i._query),IN(n,i._query).then((o=>new oa(e,s,i,o)))}function Ag(i,e,n){i=gn(i,pt);const s=gn(i.firestore,Kr),o=Sg(i.converter,e,n);return Ef(s,[pg(xu(s),"setDoc",i._key,o,i.converter!==null,n).toMutation(i._key,sn.none())])}function Gl(i,e,n,...s){i=gn(i,pt);const o=gn(i.firestore,Kr),u=xu(o);let f;return f=typeof(e=zt(e))=="string"||e instanceof Ru?pS(u,"updateDoc",i._key,e,n,s):mS(u,"updateDoc",i._key,e),Ef(o,[f.toMutation(i._key,sn.exists(!0))])}function fh(i){return Ef(gn(i.firestore,Kr),[new cf(i._key,sn.none())])}function bS(i,e){const n=gn(i.firestore,Kr),s=pn(i),o=Sg(i.converter,e);return Ef(n,[pg(xu(i.firestore),"addDoc",s._key,o,i.converter!==null,{}).toMutation(s._key,sn.exists(!1))]).then((()=>s))}function sa(i,...e){i=zt(i);let n={includeMetadataChanges:!1,source:"default"},s=0;typeof e[s]!="object"||OE(e[s])||(n=e[s++]);const o={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(OE(e[s])){const p=e[s];e[s]=p.next?.bind(p),e[s+1]=p.error?.bind(p),e[s+2]=p.complete?.bind(p)}let u,f,m;if(i instanceof pt)f=gn(i.firestore,Kr),m=sf(i._key.path),u={next:p=>{e[s]&&e[s](SS(f,i,p))},error:e[s+1],complete:e[s+2]};else{const p=gn(i,pa);f=gn(p.firestore,Kr),m=p._query;const g=new _f(f);u={next:E=>{e[s]&&e[s](new oa(f,g,p,E))},error:e[s+1],complete:e[s+2]},_S(i._query)}return(function(g,E,T,R){const O=new fg(R),j=new ug(E,O,T);return g.asyncQueue.enqueueAndForget((async()=>ag(await Qh(g),j))),()=>{O.Nu(),g.asyncQueue.enqueueAndForget((async()=>og(await Qh(g),j)))}})(wu(f),m,o,u)}function Ef(i,e){return(function(s,o){const u=new qr;return s.asyncQueue.enqueueAndForget((async()=>dN(await RN(s),o,u))),u.promise})(wu(i),e)}function SS(i,e,n){const s=n.docs.get(e._key),o=new _f(i);return new gs(i,o,e._key,s,new lo(n.hasPendingWrites,n.fromCache),e.converter)}const qN={maxAttempts:5};function Ql(i,e){if((i=zt(i)).firestore!==e)throw new fe(ne.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return i}class HN{constructor(e,n){this._firestore=e,this._transaction=n,this._dataReader=xu(e)}get(e){const n=Ql(e,this._firestore),s=new zN(this._firestore);return this._transaction.lookup([n._key]).then((o=>{if(!o||o.length!==1)return Se(24041);const u=o[0];if(u.isFoundDocument())return new Kh(this._firestore,s,u.key,u,n.converter);if(u.isNoDocument())return new Kh(this._firestore,s,n._key,null,n.converter);throw Se(18433,{doc:u})}))}set(e,n,s){const o=Ql(e,this._firestore),u=Sg(o.converter,n,s),f=pg(this._dataReader,"Transaction.set",o._key,u,o.converter!==null,s);return this._transaction.set(o._key,f),this}update(e,n,s,...o){const u=Ql(e,this._firestore);let f;return f=typeof(n=zt(n))=="string"||n instanceof Ru?pS(this._dataReader,"Transaction.update",u._key,n,s,o):mS(this._dataReader,"Transaction.update",u._key,n),this._transaction.update(u._key,f),this}delete(e){const n=Ql(e,this._firestore);return this._transaction.delete(n._key),this}}class FN extends HN{constructor(e,n){super(e,n),this._firestore=e}get(e){const n=Ql(e,this._firestore),s=new _f(this._firestore);return super.get(e).then((o=>new gs(this._firestore,s,n._key,o._document,new lo(!1,!1),n.converter)))}}function GN(i,e,n){i=gn(i,Kr);const s={...qN,...n};return(function(u){if(u.maxAttempts<1)throw new fe(ne.INVALID_ARGUMENT,"Max attempts must be at least 1")})(s),(function(u,f,m){const p=new qr;return u.asyncQueue.enqueueAndForget((async()=>{const g=await CN(u);new SN(u.asyncQueue,g,m,f,p).ju()})),p.promise})(wu(i),(o=>e(new FN(i,o))),s)}function pr(){return new gg("serverTimestamp")}function QN(i){return new yg("increment",i)}(function(e,n=!0){(function(o){Do=o})(xo),mo(new ua("firestore",((s,{instanceIdentifier:o,options:u})=>{const f=s.getProvider("app").getImmediate(),m=new Kr(new LI(s.getProvider("auth-internal")),new zI(f,s.getProvider("app-check-internal")),(function(g,E){if(!Object.prototype.hasOwnProperty.apply(g.options,["projectId"]))throw new fe(ne.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new su(g.options.projectId,E)})(f,o),f);return u={useFetchStreams:n,...u},m._setSettings(u),m}),"PUBLIC").setMultipleInstances(!0)),ds(P0,L0,e),ds(P0,L0,"esm2020")})();const YN={apiKey:"AIzaSyDYdiJjDRBA9nGPj8LGDxAE4O6o6Qlyx68",authDomain:"labyrinth-6dc4f.firebaseapp.com",projectId:"labyrinth-6dc4f",storageBucket:"labyrinth-6dc4f.firebasestorage.app",messagingSenderId:"912154260516",appId:"1:912154260516:web:e118702708fb452fde14b1"},AS=hT(YN),Bm=NI(AS),KN=new gi,Fe=NN(AS),wS=k.createContext(),Vo=()=>{const i=k.useContext(wS);if(!i)throw new Error("useAuth must be used within an AuthProvider");return i},$N=({children:i})=>{const[e,n]=k.useState(null),[s,o]=k.useState(!0);k.useEffect(()=>_x(Bm,g=>{n(g),o(!1)}),[]);const m={user:e,loading:s,loginWithGoogle:async()=>{try{return(await zx(Bm,KN)).user}catch(p){throw console.error("Google login error:",p),p}},logout:async()=>{try{await Ex(Bm)}catch(p){throw console.error("Logout error:",p),p}},isAuthenticated:!!e};return S.jsx(wS.Provider,{value:m,children:!s&&i})},RS=k.createContext(),Tf=()=>{const i=k.useContext(RS);if(!i)throw new Error("useMedia must be used within a MediaProvider");return i},XN=({children:i})=>{const[e,n]=k.useState(null),[s,o]=k.useState(!0),[u,f]=k.useState(!0),[m,p]=k.useState(!1),[g,E]=k.useState(null),[T,R]=k.useState([]),O=k.useRef(null),j=k.useRef(null),Q=k.useRef(null),q=k.useCallback(async()=>{try{const oe=await navigator.mediaDevices.enumerateDevices();return R(oe),console.log(" Available devices:",oe),oe}catch(oe){return console.error("Error enumerating devices:",oe),[]}},[]),$=k.useCallback(async(oe,he=null)=>{try{console.log(` Getting ${oe} track...`);const P=oe==="video"?{video:{width:{ideal:640},height:{ideal:480},frameRate:{ideal:30},facingMode:"user",...he&&{deviceId:{exact:he}}}}:{audio:{echoCancellation:!0,noiseSuppression:!0,autoGainControl:!0,...he&&{deviceId:{exact:he}}}};console.log("   Constraints:",P);const W=await navigator.mediaDevices.getUserMedia(P),Z=W.getTracks()[0];return console.log(` Got ${oe} track:`,{enabled:Z.enabled,readyState:Z.readyState,label:Z.label,settings:Z.getSettings?.()}),Z.enabled=!0,W.getTracks().forEach(we=>we.stop()),Z}catch(P){return console.error(` Error getting ${oe} track:`,P),oe==="video"?(console.log(" Creating fake video track for testing..."),X()):(console.log(" Creating fake audio track for testing..."),ee())}},[]),X=()=>{console.log(" Creating fake video track...");const oe=document.createElement("canvas");oe.width=320,oe.height=240;const he=oe.getContext("2d");let P=0;const Z=setInterval(()=>{const V=he.createLinearGradient(0,0,320,240);V.addColorStop(0,"#8b5cf6"),V.addColorStop(1,"#3b82f6"),he.fillStyle=V,he.fillRect(0,0,320,240);const te=160+Math.sin(P*.05)*100,le=120+Math.cos(P*.05)*80;he.fillStyle="white",he.beginPath(),he.arc(te,le,30,0,Math.PI*2),he.fill(),he.fillStyle="white",he.font="bold 16px Arial",he.textAlign="center",he.fillText("FAKE CAMERA",160,50),he.fillText("For Testing",160,200),he.font="12px Arial",he.fillText("Enable real camera in settings",160,220),P++},100),Ce=oe.captureStream(10).getVideoTracks()[0];return Ce.enabled=!0,Ce.addEventListener("ended",()=>{clearInterval(Z)}),console.log(" Fake video track created"),Ce},ee=()=>{console.log(" Creating fake audio track...");const oe=new(window.AudioContext||window.webkitAudioContext),he=oe.createOscillator(),P=oe.createGain();he.connect(P),P.connect(oe.destination),he.frequency.value=440,he.type="sine",P.gain.value=0,he.start();const W=oe.createMediaStreamDestination();he.connect(W);const Z=W.stream.getAudioTracks()[0];return Z.enabled=!0,console.log(" Fake audio track created"),Z},de=k.useCallback(async(oe={})=>{p(!0),E(null);try{console.log(" Initializing media...",oe),O.current&&(O.current.stop(),O.current=null),j.current&&(j.current.stop(),j.current=null);const he=new MediaStream;Q.current=he;let P=!1,W=!1;if(oe.video!==!1)try{O.current=await $("video"),O.current&&(he.addTrack(O.current),P=!0,o(!0),console.log(" Video added to stream"))}catch(Z){console.warn("Video init failed:",Z),o(!1)}if(oe.audio!==!1)try{j.current=await $("audio"),j.current&&(he.addTrack(j.current),W=!0,f(!0),console.log(" Audio added to stream"))}catch(Z){console.warn("Audio init failed:",Z),f(!1)}return!P&&!W&&E("Could not access camera or microphone. Please check permissions."),n(he),console.log(" Media initialized successfully!",{hasVideo:P,hasAudio:W,streamId:he.id}),await q(),he}catch(he){throw console.error(" Media initialization failed:",he),E(`Failed to initialize media: ${he.message}`),he}finally{p(!1)}},[$,q]),pe=k.useCallback((oe,he)=>{if(!Q.current)return console.log(" No stream to update"),null;console.log(` Replacing ${he} track in stream`);const P=new MediaStream;let W=!1;return Q.current.getTracks().forEach(Z=>{Z.kind!==he?(P.addTrack(Z),console.log(`   Keeping ${Z.kind} track:`,Z.id)):(Z.stop(),console.log(`   Stopped old ${Z.kind} track:`,Z.id))}),oe&&(P.addTrack(oe),W=!0,console.log(`   Added new ${he} track:`,oe.id)),Q.current=P,n(P),console.log(` ${he} track ${oe?"replaced":"removed"} successfully`),W},[]),Ee=k.useCallback(async()=>{if(!m){p(!0);try{if(s)console.log(" Turning camera OFF..."),O.current&&(O.current.enabled=!1,o(!1),console.log(" Camera disabled (track still in stream)"));else if(console.log(" Turning camera ON..."),O.current&&O.current.readyState==="live")O.current.enabled=!0,o(!0),console.log(" Existing camera track enabled");else{console.log(" Getting new video track...");const oe=await $("video");O.current=oe,pe(oe,"video"),o(!0),console.log(" New camera track added to stream")}}catch(oe){console.error("Error toggling camera:",oe),E(`Camera error: ${oe.message}`)}finally{p(!1)}}},[s,m,$,pe]),x=k.useCallback(async()=>{if(!m){p(!0);try{if(u)console.log(" Muting microphone..."),j.current&&(j.current.enabled=!1,f(!1),console.log(" Microphone muted (track still in stream)"));else if(console.log(" Unmuting microphone..."),j.current&&j.current.readyState==="live")j.current.enabled=!0,f(!0),console.log(" Existing microphone track enabled");else{console.log(" Getting new audio track...");const oe=await $("audio");j.current=oe,pe(oe,"audio"),f(!0),console.log(" New microphone track added to stream")}}catch(oe){console.error("Error toggling microphone:",oe),E(`Microphone error: ${oe.message}`)}finally{p(!1)}}},[u,m,$,pe]),C=k.useCallback(oe=>{console.log(` Stopping ${oe} track...`),oe==="video"&&O.current?(O.current.stop(),O.current=null,pe(null,"video"),o(!1),console.log(" Video track stopped and removed")):oe==="audio"&&j.current&&(j.current.stop(),j.current=null,pe(null,"audio"),f(!1),console.log(" Audio track stopped and removed"))},[pe]),w=k.useCallback(()=>{console.log(" Stopping all media..."),O.current&&(O.current.stop(),O.current=null),j.current&&(j.current.stop(),j.current=null),Q.current=null,n(null),o(!1),f(!1),console.log(" All media stopped")},[]),D=k.useCallback(async()=>{console.log(" Restarting media with permission request...");try{return(await navigator.mediaDevices.getUserMedia({video:!0,audio:!0})).getTracks().forEach(he=>he.stop()),await de({video:!0,audio:!0}),console.log(" Media restarted with permissions"),!0}catch(oe){return console.error(" Permission request failed:",oe),E(`Permission denied: ${oe.message}`),!1}},[de]),M=k.useCallback(async()=>{p(!0);try{console.log(" Switching camera...");const oe=O.current,P=oe?.getSettings()?.facingMode,W=P==="user"?"environment":"user";console.log(`Switching from ${P||"unknown"} to ${W}`);const Z=await $("video");oe&&oe.stop(),O.current=Z,pe(Z,"video"),console.log(` Camera switched to ${W}`)}catch(oe){console.error("Error switching camera:",oe),E(`Camera switch error: ${oe.message}`)}finally{p(!1)}},[$,pe]),U=k.useCallback(()=>({video:O.current?{enabled:O.current.enabled,readyState:O.current.readyState,muted:O.current.muted,label:O.current.label}:null,audio:j.current?{enabled:j.current.enabled,readyState:j.current.readyState,muted:j.current.muted,label:j.current.label}:null}),[]);Hm.useEffect(()=>{(async()=>{try{await de({video:!0,audio:!0})}catch{console.log("Auto-initialize failed, user will need to manually enable")}})()},[de]),Hm.useEffect(()=>()=>{w()},[w]);const I={localStream:e,isCameraOn:s,isMicOn:u,isLoading:m,error:g,devices:T,initializeMedia:de,toggleCamera:Ee,toggleMicrophone:x,stopMedia:w,restartMediaWithPermissions:D,getDevices:q,switchCamera:M,stopTrack:C,getTrackStates:U,getVideoTrack:()=>O.current,getAudioTrack:()=>j.current};return S.jsx(RS.Provider,{value:I,children:i})},WN=()=>Math.floor(1e5+Math.random()*9e5).toString(),JN=async i=>{const e=Lt(Fe,"rooms"),n=yf(e,bo("roomCode","==",i));return(await Rn(n)).empty},ZN=async(i,e)=>{try{let n,s=!1;for(let f=0;f<5&&(n=WN(),s=await JN(n),!s);f++);if(!s)throw new Error("Could not generate unique room code. Please try again.");const o={name:i.name||`${e.displayName}'s Room`,maxParticipants:Math.min(Math.max(i.maxParticipants,2),10),currentParticipants:1,hostId:e.uid,hostName:e.displayName,hostPhotoURL:e.photoURL||"",createdAt:pr(),lastActivity:pr(),isActive:!0,status:"waiting",roomCode:n},u=await bS(Lt(Fe,"rooms"),o);return await Ag(pn(Fe,"rooms",u.id,"participants",e.uid),{name:e.displayName,email:e.email,photoURL:e.photoURL||"",joinedAt:pr(),isHost:!0,isActive:!0}),{id:u.id,...o,roomCode:n}}catch(n){throw console.error("Error creating room:",n),n}},Rh=async i=>{try{const e=pn(Fe,"rooms",i),n=await Ei(e);return n.exists()?{id:n.id,...n.data()}:null}catch(e){throw console.error("Error getting room:",e),e}},eO=async i=>{try{const e=Lt(Fe,"rooms"),n=yf(e,bo("roomCode","==",i)),s=await Rn(n);if(!s.empty){const o=s.docs[0];return{id:o.id,...o.data()}}return null}catch(e){throw console.error("Error getting room by code:",e),e}},tO=async()=>{try{const i=Lt(Fe,"rooms"),e=yf(i,bo("isActive","==",!0),bo("status","in",["waiting","active"]));return(await Rn(e)).docs.map(s=>({id:s.id,...s.data()}))}catch(i){throw console.error("Error getting active rooms:",i),i}},dh=async i=>{try{const e=Lt(Fe,"rooms",i,"participants");return(await Rn(e)).docs.map(s=>({id:s.id,...s.data()}))}catch(e){throw console.error("Error getting participants:",e),e}},nO=async(i,e)=>{try{console.log("=== JOIN ROOM ATTEMPT ==="),console.log(`User: ${e.uid} (${e.displayName})`),console.log(`Room: ${i}`);const n=pn(Fe,"rooms",i,"participants",e.uid);if((await Ei(n)).exists())return console.log("User already a participant, skipping join"),{alreadyJoined:!0};const o=pn(Fe,"rooms",i),u=await Ei(o);if(!u.exists())throw new Error("Room not found");const f=u.data();if(console.log("Current room state:",f),f.currentParticipants>=f.maxParticipants)throw console.log("Room is full, cannot join"),new Error("Room is full");console.log("Starting transaction to join room...");try{const m=await GN(Fe,async p=>{const g=await p.get(o);if(!g.exists())throw new Error("Room not found");const E=g.data();if(console.log("Fresh room data in transaction:",E),E.currentParticipants>=E.maxParticipants)throw new Error("Room is now full");return(await p.get(n)).exists()?(console.log("User already joined (race condition detected)"),{alreadyJoined:!0}):(p.set(n,{name:e.displayName,email:e.email,photoURL:e.photoURL||"",joinedAt:pr(),isHost:!1,isActive:!0}),p.update(o,{currentParticipants:E.currentParticipants+1,lastActivity:pr()}),console.log("Transaction successful - user joined"),{success:!0,newCount:E.currentParticipants+1})});return console.log("Transaction result:",m),console.log("=== JOIN SUCCESSFUL ==="),m}catch(m){return console.error("Transaction error:",m),console.log("Trying non-transactional approach..."),await Ag(n,{name:e.displayName,email:e.email,photoURL:e.photoURL||"",joinedAt:pr(),isHost:!1,isActive:!0}),await Gl(o,{currentParticipants:QN(1),lastActivity:pr()}),console.log("Non-transactional join successful"),{success:!0,fallback:!0}}}catch(n){console.error("Join room error:",n);try{if((await Ei(pn(Fe,"rooms",i,"participants",e.uid))).exists())return console.log("User was added despite error (race condition)"),{alreadyJoined:!0}}catch(s){console.error("Final check error:",s)}throw n}},rO=async(i,e)=>{try{console.log("=== DEBUG ROOM STATE ===");const n=pn(Fe,"rooms",i),s=await Ei(n);if(s.exists()){const p=s.data();console.log("Room data:",p),console.log(`Participants: ${p.currentParticipants}/${p.maxParticipants}`)}else console.log("Room not found");const o=pn(Fe,"rooms",i,"participants",e),u=await Ei(o);console.log("Participant exists?",u.exists()),u.exists()&&console.log("Participant data:",u.data());const f=Lt(Fe,"rooms",i,"participants"),m=await Rn(f);console.log("All participants count:",m.docs.length),m.docs.forEach(p=>{console.log(`- ${p.id}: ${p.data().name}`)})}catch(n){console.error("Debug error:",n)}},iO=(i,e)=>{try{const n=pn(Fe,"rooms",i);return console.log(`Setting up room listener for: ${i}`),sa(n,o=>{if(console.log(`Room snapshot received for ${i}:`,o.exists()),o.exists()){const u={id:o.id,...o.data()};console.log("Room data:",u),e(u)}else console.log("Room does not exist"),e(null)},o=>{console.error("Error in room listener:",o),e(null,o)})}catch(n){throw console.error("Error setting up room listener:",n),n}},sO=(i,e)=>{try{const n=Lt(Fe,"rooms",i,"participants");return console.log(`Setting up participants listener for room: ${i}`),sa(n,o=>{const u=o.docs.map(f=>({id:f.id,...f.data()}));console.log(`Participants snapshot: ${u.length} participants`),e(u)},o=>{console.error("Error in participants listener:",o),e([],o)})}catch(n){throw console.error("Error setting up participants listener:",n),n}},aO=i=>{try{const e=Lt(Fe,"rooms"),n=yf(e,bo("isActive","==",!0),bo("status","in",["waiting","active"]));return sa(n,o=>{const u=o.docs.map(f=>({id:f.id,...f.data()}));i(u)},o=>{console.error("Error listening to active rooms:",o)})}catch(e){throw console.error("Error setting up active rooms listener:",e),e}},CS=k.createContext(),bf=()=>{const i=k.useContext(CS);if(!i)throw new Error("useRoom must be used within a RoomProvider");return i},oO=({children:i})=>{const{user:e}=Vo(),[n,s]=k.useState([]),[o,u]=k.useState(null),[f,m]=k.useState(!1),[p,g]=k.useState(null),E=async $=>{if(!e)throw new Error("User must be logged in");m(!0),g(null);try{const X=await ZN($,e);return s(ee=>[X,...ee]),u(X),X}catch(X){throw g(X.message),X}finally{m(!1)}},T=async()=>{m(!0);try{const $=await tO();return s($),$}catch($){throw g($.message),$}finally{m(!1)}},R=async $=>{m(!0);try{const X=await Rh($);if(!X||!X.isActive)throw new Error("Room not found or inactive");return u(X),X}catch(X){throw g(X.message),X}finally{m(!1)}},O=async $=>{m(!0);try{const X=await eO($);if(!X||!X.isActive)throw new Error("Room not found or inactive");return u(X),X}catch(X){throw g(X.message),X}finally{m(!1)}},j=()=>{u(null)},Q=()=>{g(null)};k.useEffect(()=>{e&&T()},[e]);const q={rooms:n,currentRoom:o,loading:f,error:p,createRoom:E,fetchActiveRooms:T,joinRoomById:R,joinRoomByCode:O,leaveRoom:j,clearError:Q,setCurrentRoom:u};return S.jsx(CS.Provider,{value:q,children:i})},xS=k.createContext(),IS=()=>{const i=k.useContext(xS);if(!i)throw new Error("usePeer must be used within a PeerProvider");return i},lO=({children:i})=>{const{user:e}=Vo(),{localStream:n}=Tf(),{currentRoom:s}=bf(),[o,u]=k.useState(null),[f,m]=k.useState(null),[p,g]=k.useState("disconnected"),E=k.useRef(null),T=k.useRef(null),R=k.useRef(!1),O=k.useRef(null),j={iceServers:[{urls:"stun:stun.l.google.com:19302"},{urls:"stun:stun1.l.google.com:19302"},{urls:"stun:stun2.l.google.com:19302"},{urls:"stun:stun3.l.google.com:19302"}]},Q=k.useCallback(()=>{console.log(" Creating new peer connection"),E.current&&E.current.close();const w=new RTCPeerConnection(j);E.current=w,T.current&&q(w,T.current);const D=new MediaStream;return u(D),w.ontrack=M=>{console.log(" Received remote track:",M.track.kind),D.addTrack(M.track),u(new MediaStream(D.getTracks()))},w.onicecandidate=M=>{M.candidate&&(console.log(" Generated ICE candidate"),ee(M.candidate))},w.oniceconnectionstatechange=()=>{console.log(" ICE connection state:",w.iceConnectionState),g(w.iceConnectionState)},w.onsignalingstatechange=()=>{console.log(" Signaling state:",w.signalingState)},w.onconnectionstatechange=()=>{console.log(" Connection state:",w.connectionState)},w},[]),q=k.useCallback((w,D)=>{console.log(" Adding local tracks to peer connection"),w.getSenders().forEach(U=>{w.removeTrack(U)}),D.getTracks().forEach(U=>{console.log(`  Adding ${U.kind} track:`,U.id),w.addTrack(U,D)})},[]),$=k.useCallback(w=>{if(!E.current){console.log(" No peer connection to update");return}console.log(" Updating local stream in peer connection"),console.log("New stream tracks:",w?.getTracks().map(D=>D.kind)),T.current=w,w&&(q(E.current,w),E.current.signalingState==="stable"&&(console.log(" Connection is stable, renegotiating..."),X()))},[]),X=k.useCallback(async()=>{const w=E.current;if(!w||w.signalingState!=="stable"){console.log(" Cannot renegotiate - connection not stable");return}try{if(R.current){console.log(" Creating new offer for renegotiation");const D=await w.createOffer({offerToReceiveAudio:!0,offerToReceiveVideo:!0});if(await w.setLocalDescription(D),O.current&&e){const M=pn(Fe,"rooms",O.current);await Gl(M,{offer:{sdp:D.sdp,type:D.type},renegotiatedAt:pr()}),console.log(" New offer saved for renegotiation")}}else console.log(" Waiting for new offer from caller...")}catch(D){console.error(" Error in renegotiation:",D)}},[e]),ee=k.useCallback(async w=>{if(!(!O.current||!e))try{const D=R.current?"offerCandidates":"answerCandidates",M=Lt(Fe,"rooms",O.current,D);await bS(M,{candidate:w.toJSON(),senderId:e.uid,senderName:e.displayName,timestamp:pr()}),console.log(" ICE candidate sent")}catch(D){console.error(" Error sending ICE candidate:",D)}},[e]),de=k.useCallback(async()=>{if(!s?.id||!e)return;console.log(" Creating offer as caller"),R.current=!0,O.current=s.id;const w=Q();g("creating-offer");try{const D=await w.createOffer({offerToReceiveAudio:!0,offerToReceiveVideo:!0});await w.setLocalDescription(D),console.log(" Offer created:",D.type);const M=pn(Fe,"rooms",s.id);await Ag(M,{offer:{sdp:D.sdp,type:D.type},callerId:e.uid,callerName:e.displayName,createdAt:pr(),renegotiationCount:0},{merge:!0}),console.log(" Offer saved to Firestore");const U=sa(M,async he=>{if(!he.exists())return;const P=he.data();if(P.answer&&!w.currentRemoteDescription){console.log(" Received answer from remote peer");const W=new RTCSessionDescription(P.answer);await w.setRemoteDescription(W),console.log(" Remote description set")}}),I=Lt(Fe,"rooms",s.id,"answerCandidates"),oe=sa(I,he=>{he.docChanges().forEach(async P=>{if(P.type==="added"){const W=P.doc.data();console.log(" Received answer candidate");try{await w.addIceCandidate(new RTCIceCandidate(W.candidate)),W.senderId!==e.uid&&m({id:W.senderId,name:W.senderName}),await fh(P.doc.ref)}catch(Z){console.error("Error adding answer candidate:",Z)}}})});return()=>{U(),oe()}}catch(D){console.error(" Error creating offer:",D),g("error")}},[s?.id,e,Q]),pe=k.useCallback(async()=>{if(!s?.id||!e)return;console.log(" Creating answer as callee"),R.current=!1,O.current=s.id;const w=Q();g("creating-answer");try{const D=pn(Fe,"rooms",s.id),M=await Ei(D);if(!M.exists())throw new Error("Room not found");const U=M.data();if(!U.offer)throw new Error("No offer found in room");console.log(" Received offer from caller:",U.callerName),m({id:U.callerId,name:U.callerName});const I=new RTCSessionDescription(U.offer);await w.setRemoteDescription(I),console.log(" Remote description set");const oe=await w.createAnswer();await w.setLocalDescription(oe),console.log(" Answer created"),await Gl(D,{answer:{sdp:oe.sdp,type:oe.type},calleeId:e.uid,calleeName:e.displayName,answeredAt:pr()}),console.log(" Answer saved to Firestore");const he=Lt(Fe,"rooms",s.id,"offerCandidates"),P=sa(he,Z=>{Z.docChanges().forEach(async we=>{if(we.type==="added"){const Ce=we.doc.data();console.log(" Received offer candidate");try{await w.addIceCandidate(new RTCIceCandidate(Ce.candidate)),await fh(we.doc.ref)}catch(V){console.error("Error adding offer candidate:",V)}}})}),W=sa(D,async Z=>{if(!Z.exists())return;const we=Z.data();if(we.offer&&w.signalingState==="stable"){console.log(" Received renegotiation offer"),await w.setRemoteDescription(new RTCSessionDescription(we.offer));const Ce=await w.createAnswer();await w.setLocalDescription(Ce),await Gl(D,{answer:{sdp:Ce.sdp,type:Ce.type}}),console.log(" Renegotiation handled")}});return()=>{P(),W()}}catch(D){console.error(" Error creating answer:",D),g("error")}},[s?.id,e,Q]),Ee=k.useCallback(()=>{console.log(" Cleaning up peer connection"),E.current&&(E.current.close(),E.current=null),u(null),m(null),g("disconnected"),R.current=!1,O.current=null,T.current=null},[]),x=k.useCallback(async()=>{if(Ee(),s?.id)try{const w=pn(Fe,"rooms",s.id),D=Lt(Fe,"rooms",s.id,"offerCandidates");(await Rn(D)).docs.forEach(async oe=>{await fh(oe.ref)});const U=Lt(Fe,"rooms",s.id,"answerCandidates");(await Rn(U)).docs.forEach(async oe=>{await fh(oe.ref)}),await Gl(w,{offer:null,answer:null,callerId:null,calleeId:null}),console.log(" Call data cleaned up")}catch(w){console.error("Error cleaning up call data:",w)}},[s?.id,Ee]);k.useEffect(()=>{if(!s?.id||!e||!n)return;console.log(" Initializing call for room:",s.id),console.log("User:",e.uid,e.displayName),console.log("Room host:",s.hostId),T.current=n;const w=s.hostId===e.uid;console.log(`User is ${w?"host (caller)":"joiner (callee)"}`);const D=setTimeout(()=>{w?(console.log(" Host will create offer"),de()):(console.log(" Joiner will create answer"),pe())},2e3);return()=>{clearTimeout(D),x()}},[s?.id,e,de,pe,x]),k.useEffect(()=>{n&&n!==T.current&&(console.log(" Local stream changed (mute/unmute/camera toggle)"),console.log("Old stream:",T.current?.id),console.log("New stream:",n.id),$(n))},[n,$]),k.useEffect(()=>()=>{Ee()},[Ee]);const C={remoteStream:o,remoteUser:f,connectionStatus:p,hangUp:x,cleanup:Ee,updateLocalStream:$,getPeerConnection:()=>E.current};return S.jsx(xS.Provider,{value:C,children:i})},kE=({children:i})=>{const{user:e,loading:n}=Vo();return n?S.jsx("div",{className:"flex-center",style:{minHeight:"100vh",backgroundColor:"var(--bg-dark)"},children:S.jsxs("div",{className:"text-center",children:[S.jsx("div",{className:"spinner"}),S.jsx("p",{style:{marginTop:"1rem",color:"var(--text-light)"},children:"Loading Labyrinth..."})]})}):e?i:S.jsx(dw,{to:"/",replace:!0})},qm=()=>{const{loginWithGoogle:i}=Vo(),e=Ro(),[n,s]=Hm.useState(!1),o=async()=>{s(!0);try{await i(),e("/dashboard")}catch(u){console.error("Login failed:",u),alert("Login failed. Please try again.")}finally{s(!1)}};return S.jsx("div",{style:{minHeight:"100vh",width:"100%",background:"linear-gradient(135deg, var(--primary-darker) 0%, var(--primary-dark) 100%)",display:"flex",alignItems:"center",justifyContent:"center",padding:"var(--space-md)"},children:S.jsxs("div",{style:{background:"var(--bg-card)",backdropFilter:"blur(20px)",borderRadius:"var(--radius-xl)",border:"1px solid var(--border-medium)",padding:"var(--space-xl)",width:"90%",maxWidth:"400px",boxShadow:"var(--shadow-xl)",margin:"0 auto"},children:[S.jsxs("div",{style:{textAlign:"center",marginBottom:"var(--space-xl)"},children:[S.jsx("h1",{style:{fontSize:"3rem",fontWeight:"700",background:"linear-gradient(135deg, var(--primary-purple), var(--accent-pink))",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",backgroundClip:"text",marginBottom:"var(--space-xs)",letterSpacing:"1px"},children:"Labyrinth"}),S.jsx("p",{style:{color:"var(--text-gray)",fontSize:"1.1rem",fontWeight:"300"},children:"Video Chat Maze"})]}),S.jsxs("div",{style:{textAlign:"center"},children:[S.jsx("h2",{style:{fontSize:"1.8rem",fontWeight:"600",marginBottom:"var(--space-sm)",color:"var(--text-light)"},children:"Welcome to Labyrinth"}),S.jsx("p",{style:{color:"var(--text-gray)",marginBottom:"var(--space-lg)",fontSize:"1rem",lineHeight:"1.5"},children:"Enter the maze of conversations. Connect, collaborate, and converse."}),S.jsx("button",{onClick:o,disabled:n,style:{width:"100%",background:"white",color:"#333",border:"none",padding:"var(--space-md)",borderRadius:"var(--radius-md)",fontSize:"1rem",fontWeight:"500",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"var(--space-sm)",transition:"all 0.2s ease",boxShadow:"var(--shadow-md)",opacity:n?.6:1},onMouseOver:u=>{n||(u.currentTarget.style.transform="translateY(-2px)",u.currentTarget.style.boxShadow="var(--shadow-lg)")},onMouseOut:u=>{n||(u.currentTarget.style.transform="translateY(0)",u.currentTarget.style.boxShadow="var(--shadow-md)")},children:n?S.jsxs(S.Fragment,{children:[S.jsx("div",{style:{width:"20px",height:"20px",border:"2px solid rgba(0, 0, 0, 0.1)",borderTopColor:"#333",borderRadius:"50%",animation:"spin 1s linear infinite"}}),S.jsx("span",{children:"Signing in..."})]}):S.jsxs(S.Fragment,{children:[S.jsxs("svg",{style:{width:"20px",height:"20px"},viewBox:"0 0 24 24",children:[S.jsx("path",{fill:"currentColor",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),S.jsx("path",{fill:"currentColor",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),S.jsx("path",{fill:"currentColor",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),S.jsx("path",{fill:"currentColor",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),S.jsx("span",{children:"Continue with Google"})]})}),S.jsx("div",{style:{marginTop:"var(--space-lg)",paddingTop:"var(--space-md)",borderTop:"1px solid var(--border-light)"},children:S.jsx("p",{style:{color:"var(--text-gray)",fontSize:"0.9rem",lineHeight:"1.4"},children:"By signing in, you agree to our Terms of Service and Privacy Policy"})})]})]})})},uO=({isOpen:i,onClose:e})=>{const{createRoom:n,loading:s}=bf(),o=Ro(),[u,f]=k.useState({name:"",maxParticipants:4}),[m,p]=k.useState("");if(!i)return null;const g=async T=>{if(T.preventDefault(),p(""),u.maxParticipants<2||u.maxParticipants>10){p("Participants must be between 2 and 10");return}try{const R=await n(u);e(),o(`/room/${R.id}`)}catch(R){p(R.message||"Failed to create room")}},E=T=>{const{name:R,value:O}=T.target;f(j=>({...j,[R]:R==="maxParticipants"?parseInt(O)||2:O}))};return S.jsx("div",{style:_t.overlay,children:S.jsxs("div",{style:_t.modal,children:[S.jsxs("div",{style:_t.header,children:[S.jsx("h2",{style:_t.title,children:"Create New Room"}),S.jsx("button",{onClick:e,style:_t.closeButton,children:""})]}),S.jsxs("form",{onSubmit:g,style:_t.form,children:[S.jsx("div",{style:_t.formGroup,children:S.jsxs("label",{style:_t.label,children:["Room Name (Optional)",S.jsx("input",{type:"text",name:"name",value:u.name,onChange:E,placeholder:"Enter room name",style:_t.input,maxLength:30})]})}),S.jsx("div",{style:_t.formGroup,children:S.jsxs("label",{style:_t.label,children:["Maximum Participants: ",u.maxParticipants,S.jsxs("div",{style:_t.sliderContainer,children:[S.jsx("input",{type:"range",name:"maxParticipants",min:"2",max:"10",value:u.maxParticipants,onChange:E,style:_t.slider}),S.jsxs("div",{style:_t.sliderLabels,children:[S.jsx("span",{children:"2"}),S.jsx("span",{children:"10"})]})]}),S.jsx("div",{style:_t.participantHint,children:u.maxParticipants===10?"Max capacity (10 participants)":`${u.maxParticipants} participants maximum`})]})}),m&&S.jsx("div",{style:_t.error,children:m}),S.jsxs("div",{style:_t.buttonGroup,children:[S.jsx("button",{type:"button",onClick:e,style:_t.cancelButton,disabled:s,children:"Cancel"}),S.jsx("button",{type:"submit",style:_t.createButton,disabled:s,children:s?S.jsxs(S.Fragment,{children:[S.jsx("div",{style:_t.spinner}),"Creating..."]}):"Create Room"})]})]}),S.jsx("div",{style:_t.note,children:S.jsxs("p",{style:_t.noteText,children:[S.jsx("strong",{children:"Note:"})," You'll become the host of this room. You can invite others using the room code that will be generated."]})})]})})},_t={overlay:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.7)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3,backdropFilter:"blur(4px)"},modal:{backgroundColor:"var(--bg-card)",borderRadius:"var(--radius-lg)",border:"1px solid var(--border-medium)",width:"90%",maxWidth:"500px",maxHeight:"90vh",overflow:"auto",boxShadow:"var(--shadow-xl)"},header:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"var(--space-lg)",borderBottom:"1px solid var(--border-light)"},title:{fontSize:"1.5rem",fontWeight:"600",color:"var(--text-light)",margin:0},closeButton:{background:"none",border:"none",fontSize:"2rem",color:"var(--text-gray)",cursor:"pointer",padding:"0",width:"40px",height:"40px",display:"flex",alignItems:"center",justifyContent:"center",borderRadius:"50%",transition:"all 0.2s ease"},form:{padding:"var(--space-lg)"},formGroup:{marginBottom:"var(--space-lg)"},label:{display:"block",color:"var(--text-light)",marginBottom:"var(--space-sm)",fontSize:"0.95rem",fontWeight:"500"},input:{width:"100%",padding:"var(--space-sm)",backgroundColor:"rgba(255, 255, 255, 0.1)",border:"1px solid var(--border-light)",borderRadius:"var(--radius-md)",color:"var(--text-light)",fontSize:"1rem",marginTop:"var(--space-xs)",transition:"all 0.2s ease"},sliderContainer:{marginTop:"var(--space-sm)"},slider:{width:"100%",height:"6px",borderRadius:"3px",backgroundColor:"rgba(255, 255, 255, 0.1)",outline:"none",opacity:"0.7",transition:"opacity 0.2s",WebkitAppearance:"none"},sliderLabels:{display:"flex",justifyContent:"space-between",marginTop:"var(--space-xs)",color:"var(--text-gray)",fontSize:"0.9rem"},participantHint:{marginTop:"var(--space-xs)",color:"var(--accent-blue)",fontSize:"0.9rem",fontStyle:"italic"},error:{backgroundColor:"rgba(239, 68, 68, 0.2)",color:"#f87171",padding:"var(--space-sm)",borderRadius:"var(--radius-md)",marginBottom:"var(--space-md)",fontSize:"0.9rem"},buttonGroup:{display:"flex",gap:"var(--space-md)",marginTop:"var(--space-xl)"},cancelButton:{flex:1,padding:"var(--space-md)",backgroundColor:"rgba(255, 255, 255, 0.1)",border:"1px solid var(--border-light)",borderRadius:"var(--radius-md)",color:"var(--text-light)",fontSize:"1rem",fontWeight:"500",cursor:"pointer",transition:"all 0.2s ease"},createButton:{flex:2,padding:"var(--space-md)",background:"linear-gradient(135deg, var(--primary-purple), var(--primary-indigo))",border:"none",borderRadius:"var(--radius-md)",color:"white",fontSize:"1rem",fontWeight:"600",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"var(--space-sm)",transition:"all 0.2s ease"},spinner:{width:"20px",height:"20px",border:"2px solid rgba(255, 255, 255, 0.3)",borderTopColor:"white",borderRadius:"50%",animation:"spin 1s linear infinite"},note:{padding:"var(--space-lg)",backgroundColor:"rgba(59, 130, 246, 0.1)",borderTop:"1px solid rgba(59, 130, 246, 0.3)",borderBottomLeftRadius:"var(--radius-lg)",borderBottomRightRadius:"var(--radius-lg)"},noteText:{margin:0,color:"#93c5fd",fontSize:"0.9rem",lineHeight:1.5}},cO=()=>{const{user:i,logout:e}=Vo(),{rooms:n,loading:s,error:o,fetchActiveRooms:u}=bf(),f=Ro(),[m,p]=k.useState(n),[g,E]=k.useState(!1),[T,R]=k.useState(!1),[O,j]=k.useState("");k.useEffect(()=>{if(!i)return;console.log("Setting up dashboard room listeners");const ee=aO(de=>{console.log("Dashboard rooms updated:",de.length,"rooms"),de.forEach(pe=>{console.log(`Room ${pe.id}: ${pe.currentParticipants}/${pe.maxParticipants}`)}),p(de)});return()=>{console.log("Cleaning up dashboard listeners"),ee()}},[i]),k.useEffect(()=>{p(n)},[n]);const Q=async()=>{try{await e(),f("/")}catch(ee){console.error("Logout failed:",ee)}},q=async ee=>{R(!0),j("");try{const de=m.find(pe=>pe.id===ee);if(!de){j("Room not found");return}if(de.currentParticipants>=de.maxParticipants){j("This room is now full");return}if(!de.isActive||de.status==="ended"){j("This room is no longer active");return}f(`/room/${ee}`)}catch(de){console.error("Error joining room:",de),j("Failed to join room. Please try again.")}finally{R(!1)}},$=ee=>{if(!ee)return"Just now";let de;if(ee.toDate)de=ee.toDate();else if(ee instanceof Date)de=ee;else if(ee.seconds)de=new Date(ee.seconds*1e3);else return"Just now";const Ee=new Date-de,x=Math.floor(Ee/6e4);if(x<1)return"Just now";if(x<60)return`${x}m ago`;const C=Math.floor(x/60);return C<24?`${C}h ago`:`${Math.floor(C/24)}d ago`},X=ee=>ee.currentParticipants>=ee.maxParticipants;return S.jsxs(S.Fragment,{children:[S.jsxs("div",{className:"dashboard-page",children:[S.jsx("nav",{className:"dashboard-nav",children:S.jsxs("div",{className:"container nav-container",children:[S.jsxs("div",{className:"nav-left",children:[S.jsx("div",{className:"nav-logo"}),S.jsx("h1",{className:"nav-title",children:"Labyrinth"})]}),S.jsxs("div",{className:"nav-right",children:[S.jsxs("div",{className:"user-info",children:[i?.photoURL&&S.jsx("img",{src:i.photoURL,alt:i.displayName,className:"user-avatar"}),S.jsx("span",{className:"user-name",children:i?.displayName})]}),S.jsx("button",{onClick:Q,className:"logout-btn",children:"Logout"})]})]})}),S.jsx("main",{className:"dashboard-main",children:S.jsx("div",{className:"container",children:S.jsxs("div",{className:"dashboard-content",children:[S.jsxs("div",{className:"dashboard-header",children:[S.jsx("h2",{className:"dashboard-title",children:"Labyrinth Dashboard"}),S.jsx("p",{className:"dashboard-subtitle",children:"Create or join video chat rooms. Host meetings, collaborate, and connect."})]}),S.jsxs("div",{style:Ne.quickActions,children:[S.jsxs("div",{style:Ne.actionCard,children:[S.jsx("div",{style:Ne.actionIcon,children:""}),S.jsx("h3",{style:Ne.actionTitle,children:"Create Room"}),S.jsx("p",{style:Ne.actionDescription,children:"Start a new video chat room. Set participant limits and invite others."}),S.jsx("button",{onClick:()=>E(!0),style:Ne.actionButton,children:"Create New Room"})]}),S.jsxs("div",{style:Ne.actionCard,children:[S.jsx("div",{style:Ne.actionIcon,children:""}),S.jsx("h3",{style:Ne.actionTitle,children:"Active Rooms"}),S.jsx("p",{style:Ne.actionDescription,children:m.length===0?"No active rooms. Be the first to create one!":`${m.length} room${m.length!==1?"s":""} available`}),S.jsx("button",{onClick:u,style:Ne.refreshButton,disabled:s,children:s?"Refreshing...":" Refresh List"})]})]}),S.jsxs("div",{style:Ne.roomsSection,children:[S.jsxs("div",{style:Ne.sectionHeader,children:[S.jsxs("h3",{style:Ne.sectionTitle,children:["Available Rooms ",m.length>0&&`(${m.length})`]}),O&&S.jsxs("div",{style:Ne.joinErrorBanner,children:[O,S.jsx("button",{onClick:()=>j(""),style:Ne.dismissError,children:""})]})]}),o&&S.jsxs("div",{style:Ne.errorMessage,children:["Error: ",o,S.jsx("button",{onClick:u,style:Ne.retryButton,children:"Retry"})]}),s&&m.length===0?S.jsxs("div",{style:Ne.loading,children:[S.jsx("div",{style:Ne.spinner}),S.jsx("p",{children:"Loading rooms..."})]}):m.length===0?S.jsxs("div",{style:Ne.emptyState,children:[S.jsx("div",{style:Ne.emptyIcon,children:""}),S.jsx("h4",{style:Ne.emptyTitle,children:"No Active Rooms"}),S.jsx("p",{style:Ne.emptyText,children:'Be the first to create a room! Click "Create New Room" above.'})]}):S.jsx("div",{style:Ne.roomsGrid,children:m.map(ee=>{const de=X(ee);return S.jsxs("div",{style:{...Ne.roomCard,...de?Ne.roomCardFull:{},...T?Ne.roomCardDisabled:{}},children:[S.jsxs("div",{style:Ne.roomHeader,children:[S.jsxs("div",{style:Ne.roomHost,children:[ee.hostPhotoURL?S.jsx("img",{src:ee.hostPhotoURL,alt:ee.hostName,style:Ne.hostAvatar}):S.jsx("div",{style:Ne.defaultAvatar,children:ee.hostName.charAt(0)}),S.jsx("span",{style:Ne.hostName,children:ee.hostName})]}),S.jsxs("div",{style:Ne.roomCode,children:["#",ee.roomCode]})]}),S.jsx("h4",{style:Ne.roomName,children:ee.name}),S.jsxs("div",{style:Ne.roomDetails,children:[S.jsxs("div",{style:Ne.participantInfo,children:[S.jsxs("span",{style:{...Ne.participantCount,...de?Ne.participantCountFull:{}},children:[ee.currentParticipants,"/",ee.maxParticipants]}),S.jsx("span",{style:Ne.participantLabel,children:de?"FULL":"participants"})]}),S.jsx("div",{style:Ne.roomTime,children:$(ee.createdAt)})]}),de?S.jsx("div",{style:Ne.fullRoomBadge,children:S.jsx("span",{style:Ne.fullRoomText,children:"Room Full"})}):S.jsx("button",{style:Ne.joinRoomButton,onClick:()=>q(ee.id),disabled:T,children:T?"Joining...":"Join Room"})]},ee.id)})})]})]})})})]}),S.jsx(uO,{isOpen:g,onClose:()=>E(!1)})]})},Ne={quickActions:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(300px, 1fr))",gap:"var(--space-lg)",marginBottom:"var(--space-xl)"},actionCard:{backgroundColor:"var(--bg-card-light)",border:"1px solid var(--border-light)",borderRadius:"var(--radius-lg)",padding:"var(--space-lg)",transition:"all 0.3s ease"},actionIcon:{fontSize:"2.5rem",marginBottom:"var(--space-md)"},actionTitle:{fontSize:"1.3rem",fontWeight:"600",marginBottom:"var(--space-sm)",color:"var(--text-light)"},actionDescription:{color:"var(--text-gray)",marginBottom:"var(--space-md)",lineHeight:1.5},actionButton:{width:"100%",padding:"var(--space-md)",background:"linear-gradient(135deg, var(--primary-purple), var(--primary-indigo))",border:"none",borderRadius:"var(--radius-md)",color:"white",fontSize:"1rem",fontWeight:"600",cursor:"pointer",transition:"all 0.2s ease"},refreshButton:{width:"100%",padding:"var(--space-md)",backgroundColor:"rgba(255, 255, 255, 0.1)",border:"1px solid var(--border-light)",borderRadius:"var(--radius-md)",color:"var(--text-light)",fontSize:"1rem",fontWeight:"500",cursor:"pointer",transition:"all 0.2s ease"},roomsSection:{marginTop:"var(--space-xl)"},sectionHeader:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"var(--space-lg)"},sectionTitle:{fontSize:"1.5rem",fontWeight:"600",color:"var(--text-light)",margin:0},joinErrorBanner:{backgroundColor:"rgba(239, 68, 68, 0.2)",color:"#f87171",padding:"8px 16px",borderRadius:"var(--radius-md)",display:"flex",alignItems:"center",gap:"10px"},dismissError:{background:"none",border:"none",color:"#f87171",fontSize:"1.2rem",cursor:"pointer",padding:"0",width:"24px",height:"24px",display:"flex",alignItems:"center",justifyContent:"center",borderRadius:"50%"},errorMessage:{backgroundColor:"rgba(239, 68, 68, 0.2)",color:"#f87171",padding:"var(--space-md)",borderRadius:"var(--radius-md)",marginBottom:"var(--space-md)"},retryButton:{marginLeft:"10px",padding:"4px 12px",backgroundColor:"rgba(59, 130, 246, 0.2)",border:"1px solid rgba(59, 130, 246, 0.3)",borderRadius:"4px",color:"#93c5fd",cursor:"pointer",fontSize:"0.9rem"},loading:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:"var(--space-xl)",color:"var(--text-gray)"},spinner:{width:"40px",height:"40px",border:"3px solid rgba(255, 255, 255, 0.1)",borderTopColor:"var(--primary-purple)",borderRadius:"50%",animation:"spin 1s linear infinite",marginBottom:"var(--space-md)"},emptyState:{textAlign:"center",padding:"var(--space-xl)",color:"var(--text-gray)"},emptyIcon:{fontSize:"4rem",marginBottom:"var(--space-md)",opacity:.5},emptyTitle:{fontSize:"1.5rem",marginBottom:"var(--space-sm)",color:"var(--text-light)"},emptyText:{fontSize:"1rem",lineHeight:1.5},roomsGrid:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(300px, 1fr))",gap:"var(--space-md)"},roomCard:{backgroundColor:"var(--bg-card-light)",border:"1px solid var(--border-light)",borderRadius:"var(--radius-lg)",padding:"var(--space-lg)",transition:"all 0.3s ease"},roomCardFull:{borderColor:"rgba(239, 68, 68, 0.3)",backgroundColor:"rgba(30, 41, 59, 0.5)"},roomCardDisabled:{pointerEvents:"none",opacity:.5},roomHeader:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"var(--space-md)"},roomHost:{display:"flex",alignItems:"center",gap:"var(--space-sm)"},hostAvatar:{width:"32px",height:"32px",borderRadius:"50%",border:"2px solid var(--border-light)"},defaultAvatar:{width:"32px",height:"32px",borderRadius:"50%",backgroundColor:"var(--primary-purple)",display:"flex",alignItems:"center",justifyContent:"center",color:"white",fontWeight:"600",fontSize:"0.9rem"},hostName:{fontSize:"0.9rem",color:"var(--text-light)",fontWeight:"500"},roomCode:{backgroundColor:"rgba(124, 58, 237, 0.2)",color:"#a78bfa",padding:"var(--space-xs) var(--space-sm)",borderRadius:"var(--radius-sm)",fontSize:"0.8rem",fontWeight:"600",fontFamily:"monospace"},roomName:{fontSize:"1.2rem",fontWeight:"600",color:"var(--text-light)",marginBottom:"var(--space-md)"},roomDetails:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"var(--space-lg)"},participantInfo:{display:"flex",alignItems:"baseline",gap:"var(--space-xs)"},participantCount:{fontSize:"1.5rem",fontWeight:"700",color:"var(--text-light)"},participantCountFull:{color:"#f87171"},participantLabel:{fontSize:"0.9rem",color:"var(--text-gray)"},roomTime:{fontSize:"0.9rem",color:"var(--text-gray)"},fullRoomBadge:{width:"100%",padding:"12px",backgroundColor:"rgba(239, 68, 68, 0.1)",border:"1px solid rgba(239, 68, 68, 0.2)",borderRadius:"var(--radius-md)",textAlign:"center"},fullRoomText:{color:"#f87171",fontWeight:"600",fontSize:"0.9rem"},joinRoomButton:{width:"100%",padding:"var(--space-sm)",backgroundColor:"rgba(59, 130, 246, 0.2)",border:"1px solid rgba(59, 130, 246, 0.3)",borderRadius:"var(--radius-md)",color:"#93c5fd",fontSize:"0.9rem",fontWeight:"600",cursor:"pointer",transition:"all 0.2s ease"}},hO=()=>{const{remoteStream:i,remoteUser:e,connectionStatus:n}=IS(),s=k.useRef(null);return k.useEffect(()=>{if(console.log(" RemoteVideo useEffect"),console.log("Remote stream:",i),console.log("Remote user:",e),console.log("Connection status:",n),s.current&&i){console.log(" Setting remote stream to video element"),console.log("Stream tracks:",i.getTracks().map(u=>({kind:u.kind,enabled:u.enabled,muted:u.muted,readyState:u.readyState}))),s.current.srcObject=i;const o=()=>{s.current&&s.current.paused&&s.current.play().then(()=>console.log(" Remote video playing")).catch(u=>console.error(" Remote video play error:",u))};o(),s.current.onloadedmetadata=()=>{console.log(" Remote video metadata loaded"),o()},s.current.oncanplay=()=>{console.log(" Remote video can play"),o()}}return()=>{s.current&&(s.current.srcObject=null)}},[i,e,n]),i?S.jsxs("div",{style:pi.container,children:[S.jsx("video",{ref:s,autoPlay:!0,playsInline:!0,muted:!1,style:pi.video}),S.jsxs("div",{style:pi.overlay,children:[S.jsx("div",{style:pi.nameBadge,children:e?.name||"Remote User"}),S.jsx("div",{style:{...pi.statusBadge,backgroundColor:n==="connected"?"#10b981":n==="checking"?"#f59e0b":"#ef4444"},children:n})]})]}):S.jsxs("div",{style:pi.placeholder,children:[S.jsx("div",{style:pi.avatar,children:e?.name?.charAt(0)||"?"}),S.jsx("p",{style:pi.placeholderText,children:n==="creating-offer"||n==="creating-answer"?"Connecting...":"Waiting for remote video..."}),S.jsxs("p",{style:pi.statusText,children:["Status: ",n]})]})},pi={container:{width:"100%",height:"100%",position:"relative",backgroundColor:"#000",borderRadius:"var(--radius-lg)",overflow:"hidden"},video:{width:"100%",height:"100%",objectFit:"cover",backgroundColor:"#000"},placeholder:{width:"100%",height:"100%",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",backgroundColor:"var(--bg-card)",color:"var(--text-gray)",textAlign:"center"},avatar:{width:"80px",height:"80px",borderRadius:"50%",backgroundColor:"var(--primary-purple)",display:"flex",alignItems:"center",justifyContent:"center",color:"white",fontSize:"2rem",fontWeight:"600",marginBottom:"15px"},placeholderText:{fontSize:"1rem",marginBottom:"10px"},statusText:{fontSize:"0.8rem",opacity:.7},overlay:{position:"absolute",top:"15px",left:"15px",right:"15px",display:"flex",justifyContent:"space-between",alignItems:"flex-start"},nameBadge:{padding:"6px 12px",backgroundColor:"rgba(0, 0, 0, 0.7)",color:"white",borderRadius:"var(--radius-md)",fontSize:"0.9rem",fontWeight:"500",backdropFilter:"blur(10px)"},statusBadge:{padding:"4px 8px",color:"white",borderRadius:"12px",fontSize:"0.7rem",fontWeight:"600",textTransform:"uppercase"}},fO=()=>{const{localStream:i,isMicOn:e}=Tf(),n=k.useRef(null),s=k.useRef(null),o=k.useRef(null),u=k.useRef(null),f=k.useRef(null),[m,p]=k.useState(!1),[g,E]=k.useState(0);k.useEffect(()=>{if(!i||!e){s.current&&(cancelAnimationFrame(s.current),s.current=null),o.current&&o.current.state!=="closed"&&o.current.close(),p(!1),E(0);return}const Q=i.getAudioTracks()[0];if(!Q||!Q.enabled){p(!1),E(0);return}return(async()=>{try{const $=window.AudioContext||window.webkitAudioContext;o.current||(o.current=new $),u.current=o.current.createAnalyser(),u.current.fftSize=256,u.current.minDecibels=-90,u.current.maxDecibels=-10,u.current.smoothingTimeConstant=.85,f.current=o.current.createMediaStreamSource(i),f.current.connect(u.current),p(!0),T()}catch($){console.error("Error setting up audio visualizer:",$),p(!1)}})(),()=>{s.current&&cancelAnimationFrame(s.current),f.current&&f.current.disconnect(),u.current&&u.current.disconnect()}},[i,e]);const T=()=>{if(!n.current||!u.current)return;const Q=n.current,q=Q.getContext("2d"),$=u.current.frequencyBinCount,X=new Uint8Array($),ee=()=>{s.current=requestAnimationFrame(ee),u.current.getByteFrequencyData(X);let de=0;for(let w=0;w<X.length;w++)de+=X[w];const pe=de/X.length;E(pe),q.clearRect(0,0,Q.width,Q.height),q.fillStyle="rgba(0, 0, 0, 0.3)",q.fillRect(0,0,Q.width,Q.height);const Ee=Q.width/$*2.5;let x,C=0;for(let w=0;w<$;w++){x=X[w]/2;const D=q.createLinearGradient(0,Q.height,0,Q.height-x);x<30?(D.addColorStop(0,"#10b981"),D.addColorStop(1,"#34d399")):x<60?(D.addColorStop(0,"#f59e0b"),D.addColorStop(1,"#fbbf24")):(D.addColorStop(0,"#ef4444"),D.addColorStop(1,"#f87171")),q.fillStyle=D,q.fillRect(C,Q.height-x,Ee,x),C+=Ee+1}};ee()},R=Math.min(Math.round(g/128*100),100);let O="low",j="#10b981";return R>30&&(O="medium",j="#f59e0b"),R>60&&(O="high",j="#ef4444"),S.jsxs("div",{style:kt.container,children:[S.jsxs("div",{style:kt.header,children:[S.jsxs("div",{style:kt.title,children:[S.jsx("span",{style:kt.icon,children:""}),"Microphone Activity"]}),S.jsxs("div",{style:kt.status,children:[S.jsx("div",{style:{...kt.statusDot,backgroundColor:e?"#10b981":"#ef4444"}}),S.jsx("span",{children:e?"Active":"Muted"})]})]}),S.jsxs("div",{style:kt.visualizerContainer,children:[S.jsx("canvas",{ref:n,width:300,height:80,style:kt.canvas}),S.jsxs("div",{style:kt.volumeInfo,children:[S.jsx("div",{style:kt.volumeBarContainer,children:S.jsx("div",{style:{...kt.volumeBar,width:`${R}%`,backgroundColor:j}})}),S.jsxs("div",{style:kt.volumeText,children:[S.jsx("span",{style:{color:j,fontWeight:"600"},children:O.toUpperCase()}),S.jsxs("span",{children:[R,"%"]})]})]})]}),S.jsx("div",{style:kt.instructions,children:!m&&e?S.jsxs("div",{style:kt.warning,children:[S.jsx("span",{style:kt.warningIcon,children:""}),'Speak to see audio activity. Try saying "Testing, 1, 2, 3"']}):e?S.jsxs("div",{style:kt.active,children:[S.jsx("span",{style:kt.activeIcon,children:""}),"Microphone is working! Volume: ",O]}):S.jsxs("div",{style:kt.muted,children:[S.jsx("span",{style:kt.mutedIcon,children:""}),"Microphone is muted"]})}),S.jsx("button",{onClick:()=>{if(e&&o.current){const Q=o.current.createOscillator(),q=o.current.createGain();Q.connect(q),q.connect(o.current.destination),Q.frequency.value=440,Q.type="sine",q.gain.setValueAtTime(0,o.current.currentTime),q.gain.linearRampToValueAtTime(.1,o.current.currentTime+.1),q.gain.linearRampToValueAtTime(0,o.current.currentTime+.5),Q.start(o.current.currentTime),Q.stop(o.current.currentTime+.5)}},style:kt.testButton,disabled:!e,children:" Test Sound"})]})},kt={container:{backgroundColor:"rgba(255, 255, 255, 0.05)",borderRadius:"var(--radius-lg)",padding:"15px",border:"1px solid var(--border-light)",marginTop:"20px"},header:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"15px"},title:{display:"flex",alignItems:"center",gap:"8px",fontWeight:"600",color:"var(--text-light)",fontSize:"1rem"},icon:{fontSize:"1.2rem"},status:{display:"flex",alignItems:"center",gap:"6px",fontSize:"0.85rem",color:"var(--text-gray)"},statusDot:{width:"8px",height:"8px",borderRadius:"50%"},visualizerContainer:{position:"relative",marginBottom:"15px"},canvas:{width:"100%",height:"80px",borderRadius:"var(--radius-md)",backgroundColor:"rgba(0, 0, 0, 0.5)"},volumeInfo:{marginTop:"10px"},volumeBarContainer:{width:"100%",height:"6px",backgroundColor:"rgba(255, 255, 255, 0.1)",borderRadius:"3px",overflow:"hidden",marginBottom:"5px"},volumeBar:{height:"100%",borderRadius:"3px",transition:"width 0.2s ease"},volumeText:{display:"flex",justifyContent:"space-between",fontSize:"0.8rem",color:"var(--text-gray)"},instructions:{fontSize:"0.85rem",textAlign:"center",marginBottom:"15px",padding:"10px",borderRadius:"var(--radius-md)"},warning:{color:"#f59e0b",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px"},warningIcon:{fontSize:"1rem"},muted:{color:"#ef4444",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px"},mutedIcon:{fontSize:"1rem"},active:{color:"#10b981",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px"},activeIcon:{fontSize:"1rem"},testButton:{width:"100%",padding:"10px",backgroundColor:"rgba(59, 130, 246, 0.2)",border:"1px solid rgba(59, 130, 246, 0.3)",borderRadius:"var(--radius-md)",color:"#93c5fd",fontSize:"0.9rem",fontWeight:"500",cursor:"pointer",transition:"all 0.2s ease"}},dO=()=>{const{localStream:i,isCameraOn:e,isMicOn:n,isLoading:s,error:o,initializeMedia:u,restartMediaWithPermissions:f}=Tf(),m=k.useRef(null);if(k.useEffect(()=>{if(m.current&&i){console.log(" Setting video srcObject for local preview"),m.current.srcObject=i;const E=i.getVideoTracks(),T=i.getAudioTracks();console.log(" Local stream tracks:",{video:E.length,audio:T.length,videoEnabled:E[0]?.enabled,audioEnabled:T[0]?.enabled})}},[i]),k.useEffect(()=>{(async()=>i||(console.log(" Initializing media on mount..."),await u()))()},[]),s)return S.jsxs("div",{style:$e.loadingContainer,children:[S.jsx("div",{style:$e.spinner}),S.jsx("p",{children:"Loading camera and microphone..."}),S.jsx("p",{style:$e.hint,children:"Please allow permissions if prompted"})]});if(o)return S.jsxs("div",{style:$e.errorContainer,children:[S.jsx("div",{style:$e.errorIcon,children:""}),S.jsx("h4",{children:"Camera/Microphone Error"}),S.jsx("p",{style:$e.errorText,children:o}),S.jsxs("div",{style:$e.errorButtons,children:[S.jsx("button",{onClick:f,style:$e.retryButton,children:"Request Permissions"}),S.jsx("button",{onClick:u,style:$e.secondaryButton,children:"Try Again"})]}),S.jsx("p",{style:$e.helpText,children:"If this persists, check browser settings for camera/microphone permissions."})]});const p=i?.getVideoTracks().length>0,g=i?.getAudioTracks().length>0;return S.jsxs("div",{style:$e.container,children:[S.jsxs("div",{style:$e.videoWrapper,children:[p?S.jsx("video",{ref:m,autoPlay:!0,playsInline:!0,muted:!0,style:$e.video,onLoadedMetadata:()=>console.log(" Local video metadata loaded"),onCanPlay:()=>console.log(" Local video can play")}):S.jsxs("div",{style:$e.cameraOffPlaceholder,children:[S.jsx("div",{style:$e.cameraOffIcon,children:""}),S.jsx("p",{children:"Camera not available"}),S.jsx("p",{style:$e.smallText,children:e?"Waiting for camera...":"Camera is off"}),S.jsx("button",{onClick:()=>u({video:!0,audio:n}),style:$e.enableButton,children:"Enable Camera"})]}),S.jsx("div",{style:$e.statusOverlay,children:S.jsxs("div",{style:$e.statusIcons,children:[S.jsxs("div",{style:{...$e.statusIcon,...e&&p?$e.statusOn:$e.statusOff},children:[e&&p?"":"",S.jsx("span",{style:$e.statusText,children:e&&p?"Camera On":"Camera Off"})]}),S.jsxs("div",{style:{...$e.statusIcon,...n&&g?$e.statusOn:$e.statusOff},children:[n&&g?"":"",S.jsx("span",{style:$e.statusText,children:n&&g?"Mic On":"Mic Muted"})]})]})}),S.jsx("div",{style:$e.debugInfo,children:S.jsxs("span",{children:["Tracks: V:",i?.getVideoTracks().length||0," A:",i?.getAudioTracks().length||0]})}),S.jsx("div",{style:$e.nameLabel,children:"You (Preview)"})]}),g&&S.jsx(fO,{}),S.jsxs("div",{style:$e.mediaControls,children:[S.jsx("button",{onClick:()=>u({video:!0,audio:!0}),style:$e.mediaButton,children:" Refresh Media"}),S.jsx("button",{onClick:f,style:$e.mediaButton,children:" Request Permissions"})]})]})},$e={container:{width:"100%",height:"100%",position:"relative",display:"flex",flexDirection:"column",gap:"15px"},loadingContainer:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:"100%",color:"var(--text-gray)",textAlign:"center"},spinner:{width:"40px",height:"40px",border:"3px solid rgba(255, 255, 255, 0.1)",borderTopColor:"var(--primary-purple)",borderRadius:"50%",animation:"spin 1s linear infinite",marginBottom:"15px"},hint:{fontSize:"0.9rem",opacity:.7,marginTop:"10px"},errorContainer:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:"100%",textAlign:"center",padding:"20px",color:"var(--text-light)"},errorIcon:{fontSize:"3rem",marginBottom:"15px",opacity:.7},errorText:{color:"var(--text-gray)",marginBottom:"20px",fontSize:"0.9rem"},errorButtons:{display:"flex",gap:"10px",marginBottom:"15px"},retryButton:{padding:"10px 20px",backgroundColor:"var(--primary-purple)",border:"none",borderRadius:"var(--radius-md)",color:"white",fontWeight:"500",cursor:"pointer",transition:"all 0.2s ease"},secondaryButton:{padding:"10px 20px",backgroundColor:"rgba(255, 255, 255, 0.1)",border:"1px solid var(--border-light)",borderRadius:"var(--radius-md)",color:"var(--text-light)",fontWeight:"500",cursor:"pointer",transition:"all 0.2s ease"},helpText:{fontSize:"0.8rem",color:"var(--text-gray)",maxWidth:"300px"},videoWrapper:{position:"relative",width:"100%",flex:1,backgroundColor:"#000",borderRadius:"var(--radius-lg)",overflow:"hidden",minHeight:"300px"},video:{width:"100%",height:"100%",objectFit:"cover",transform:"scaleX(-1)",backgroundColor:"#000"},cameraOffPlaceholder:{width:"100%",height:"100%",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",backgroundColor:"var(--bg-card)",color:"var(--text-gray)",textAlign:"center"},cameraOffIcon:{fontSize:"4rem",marginBottom:"15px",opacity:.5},smallText:{fontSize:"0.9rem",marginBottom:"15px",opacity:.7},enableButton:{padding:"8px 16px",backgroundColor:"var(--primary-purple)",border:"none",borderRadius:"var(--radius-md)",color:"white",fontWeight:"500",cursor:"pointer"},statusOverlay:{position:"absolute",top:"15px",left:"15px",right:"15px",zIndex:10},statusIcons:{display:"flex",gap:"10px",flexWrap:"wrap"},statusIcon:{display:"flex",alignItems:"center",gap:"6px",padding:"6px 12px",borderRadius:"20px",fontSize:"0.9rem",fontWeight:"500",backdropFilter:"blur(10px)",backgroundColor:"rgba(0, 0, 0, 0.5)",color:"white"},statusOn:{backgroundColor:"rgba(34, 197, 94, 0.7)"},statusOff:{backgroundColor:"rgba(239, 68, 68, 0.7)"},statusText:{fontSize:"0.8rem"},debugInfo:{position:"absolute",top:"15px",right:"15px",padding:"4px 8px",backgroundColor:"rgba(0, 0, 0, 0.7)",color:"white",borderRadius:"4px",fontSize:"0.7rem",fontFamily:"monospace"},nameLabel:{position:"absolute",bottom:"15px",left:"15px",padding:"6px 12px",backgroundColor:"rgba(0, 0, 0, 0.7)",color:"white",borderRadius:"var(--radius-md)",fontSize:"0.9rem",fontWeight:"500"},mediaControls:{display:"flex",gap:"10px",justifyContent:"center"},mediaButton:{padding:"8px 16px",backgroundColor:"rgba(59, 130, 246, 0.2)",border:"1px solid rgba(59, 130, 246, 0.3)",borderRadius:"var(--radius-md)",color:"#93c5fd",fontSize:"0.8rem",cursor:"pointer"}},mO=()=>{const{roomId:i}=ZA(),e=Ro(),{user:n}=Vo(),{setCurrentRoom:s}=bf(),{remoteStream:o,connectionStatus:u,hangUp:f}=IS(),[m,p]=k.useState(null),[g,E]=k.useState([]),[T,R]=k.useState(!0),[O,j]=k.useState(""),[Q,q]=k.useState(!1),{localStream:$,isCameraOn:X,isMicOn:ee,toggleCamera:de,toggleMicrophone:pe,isLoading:Ee,error:x}=Tf(),C=async()=>{console.clear(),console.log(" === COMPLETE FIRESTORE DEBUG === "),console.log("Timestamp:",new Date().toISOString()),console.log("Current user:",n?.uid),console.log("Room ID:",i);try{console.log(`
 === CURRENT ROOM DATA ===`);const P=pn(Fe,"rooms",i),W=await Ei(P);if(!W.exists()){console.log(" Room not found in Firestore");return}const Z=W.data();console.log(" Room Document:",{id:i,name:Z.name,hostId:Z.hostId,hostName:Z.hostName,roomCode:Z.roomCode,currentParticipants:Z.currentParticipants,maxParticipants:Z.maxParticipants,status:Z.status,isActive:Z.isActive,createdAt:Z.createdAt?.toDate?.()||Z.createdAt,lastActivity:Z.lastActivity?.toDate?.()||Z.lastActivity}),console.log(`
 === PARTICIPANTS ===`);const we=Lt(Fe,"rooms",i,"participants"),Ce=await Rn(we);console.log(`Total participants in DB: ${Ce.docs.length}`),console.log(`Room shows: ${Z.currentParticipants}/${Z.maxParticipants}`),Ce.docs.forEach(ce=>{const ye=ce.data();console.log(`- ${ye.name} (${ce.id})`,{isHost:ye.isHost,isActive:ye.isActive,joinedAt:ye.joinedAt?.toDate?.()||ye.joinedAt,email:ye.email,isCurrentUser:ce.id===n?.uid})});const V=Ce.docs.some(ce=>ce.id===n?.uid);console.log(`
 Current user in participants? ${V?"YES":"NO"}`),console.log(`
 === SIGNALING DATA ===`);const te=Lt(Fe,"rooms",i,"signaling"),le=await Rn(te);console.log(`Signaling users: ${le.docs.length}`);for(const ce of le.docs){const ye=ce.id,_e=ce.data();console.log(`
 User: ${ye} (${_e.userName||"No name"})`),console.log("   Signaling Document:",{isOnline:_e.isOnline,readyForConnection:_e.readyForConnection,status:_e.status,lastSeen:_e.lastSeen?.toDate?.()||_e.lastSeen});const Oe=Lt(Fe,"rooms",i,"signaling",ye,"offers"),ot=await Rn(Oe);console.log(`   Offers TO this user: ${ot.docs.length}`),ot.docs.forEach(yn=>{const wt=yn.data();console.log(`     From: ${wt.from} (${wt.fromName}) to: ${wt.to}`,{type:wt.type,timestamp:wt.timestamp?.toDate?.()||wt.timestamp,docId:yn.id})});const Xe=Lt(Fe,"rooms",i,"signaling",ye,"answers"),$t=await Rn(Xe);console.log(`   Answers TO this user: ${$t.docs.length}`),$t.docs.forEach(yn=>{const wt=yn.data();console.log(`     From: ${wt.from} to: ${wt.to}`)});const $r=Lt(Fe,"rooms",i,"signaling",ye,"candidates"),zn=await Rn($r);console.log(`   ICE Candidates TO this user: ${zn.docs.length}`)}console.log(`
 === SUMMARY ===`),console.log(`Room: ${Z.name} (${i})`),console.log(`Host: ${Z.hostName} (${Z.hostId})`),console.log(`Capacity: ${Z.currentParticipants}/${Z.maxParticipants}`),console.log(`Current user ${n?.uid} is ${V?"IN":"NOT IN"} room`),console.log(`UI shows error: "${O}"`),console.log(`UI loading state: ${T}`),console.log(`Connection status: ${u}`),console.log(`Has remote stream: ${!!o}`)}catch(P){console.error(" Debug error:",P)}};k.useEffect(()=>{if(!i||!n)return;console.log(" Setting up real-time listeners for room:",i);const P=iO(i,Z=>{console.log(" Room real-time update:",Z),Z?(p(Z),s(Z),O&&Z.isActive&&Z.currentParticipants<=Z.maxParticipants&&j("")):j("Room was deleted")}),W=sO(i,Z=>{console.log(" Participants real-time update:",Z),E(Z);const we=Z.some(Ce=>Ce.id===n.uid);console.log("Current user in room?",we),we&&O.includes("Room is full")&&(console.log(' User is in room, clearing "room is full" error'),j(""))});return()=>{console.log(" Cleaning up real-time listeners"),P(),W()}},[i,n,O,s]);const w=k.useCallback(async()=>{if(!(!n||!i||Q)){R(!0),j(""),q(!0),console.log("=== LOAD ROOM START ==="),console.log("User:",n.uid,n.displayName),console.log("Room ID:",i);try{const P=await Rh(i);if(console.log("Room data from service:",P),!P){j("Room not found"),R(!1);return}if(!P.isActive||P.status==="ended"){j("Room is no longer active"),R(!1);return}const W=await dh(i);console.log("Participants from service:",W),console.log("Participant IDs:",W.map(_e=>_e.id));const Z=W.some(_e=>_e.id===n.uid);if(console.log("Is user already in room?",Z),p(P),E(W),s(P),Z){console.log(" User already in room, loading complete"),R(!1);return}const we=W.length>=P.maxParticipants;console.log("Is room full?",we,`(${W.length}/${P.maxParticipants})`);const Ce=pn(Fe,"rooms",i),te=(await Ei(Ce)).data(),le=Lt(Fe,"rooms",i,"participants"),ce=await Rn(le),ye=ce.docs.length;if(console.log("Fresh check - Room capacity:",te?.currentParticipants,"/",te?.maxParticipants),console.log("Fresh check - Actual participants:",ye),console.log("Fresh check - User in fresh participants?",ce.docs.some(_e=>_e.id===n.uid)),ye>=P.maxParticipants){console.log(" Room is actually full, cannot join"),j(`Room is full (${ye}/${P.maxParticipants} participants)`),R(!1);return}console.log(" Attempting to join room...");try{const _e=await nO(i,n);console.log("Join result:",_e),await new Promise($t=>setTimeout($t,1e3));const Oe=await Rh(i),ot=await dh(i);console.log("After join - Room:",Oe),console.log("After join - Participants:",ot),p(Oe),E(ot),s(Oe);const Xe=ot.some($t=>$t.id===n.uid);if(console.log("User now in room?",Xe),!Xe){const $t=await Rn(Lt(Fe,"rooms",i,"participants"));if($t.docs.some(zn=>zn.id===n.uid)){console.log(" Race condition resolved - user IS in room");const zn=$t.docs.map(yn=>({id:yn.id,...yn.data()}));E(zn)}else console.log(" User still not in room after join attempt"),j("Failed to join room. Please try again.")}}catch(_e){console.error("Join error:",_e);const Oe=await dh(i);Oe.some(Xe=>Xe.id===n.uid)?(console.log(" User actually joined despite error (race condition)"),E(Oe),j("")):_e.message.includes("full")?j("Room is now full. Please try another room."):j(`Failed to join: ${_e.message}`)}}catch(P){console.error("Error in loadRoom:",P),j(`Failed to load room: ${P.message}`)}finally{R(!1),console.log("=== LOAD ROOM END ===")}}},[n,i,Q,s]);k.useEffect(()=>{if(!n){e("/");return}w()},[n,e,w]);const D=()=>{f(),e("/dashboard")},M=()=>{m?.roomCode&&(navigator.clipboard.writeText(m.roomCode),alert(`Room code ${m.roomCode} copied to clipboard!`))},U=()=>{const P=`${window.location.origin}/room/${i}`;navigator.clipboard.writeText(P),alert(`Invite link copied to clipboard!

${P}`)},I=async()=>{console.log(" Manually refreshing room data..."),R(!0);try{const P=await Rh(i),W=await dh(i);p(P),E(W),s(P),j(""),console.log(" Room data refreshed")}catch(P){console.error("Error refreshing room:",P)}finally{R(!1)}},oe=()=>{console.clear(),console.log(" === WEBRTC CONNECTION DEBUG ==="),console.log("Connection status:",u),console.log("Remote stream exists:",!!o),o&&(console.log("Remote stream id:",o.id),console.log("Remote stream active:",o.active),console.log("Remote tracks:",o.getTracks().map(W=>({kind:W.kind,enabled:W.enabled,muted:W.muted,readyState:W.readyState})))),console.log(`
 Video Elements:`),document.querySelectorAll("video").forEach((W,Z)=>{console.log(`   Video ${Z}:`,{srcObject:W.srcObject,readyState:W.readyState,error:W.error,paused:W.paused,muted:W.muted,isRemote:!W.muted})})};if(T)return S.jsxs("div",{style:ae.loadingContainer,children:[S.jsx("div",{style:ae.spinner}),S.jsx("p",{style:ae.loadingText,children:"Loading room..."}),S.jsx("button",{onClick:I,style:ae.refreshButton,children:"Force Refresh"})]});const he=g.some(P=>P.id===n?.uid);return O&&O.includes("full")&&!he?S.jsx("div",{style:ae.fullRoomContainer,children:S.jsxs("div",{style:ae.fullRoomContent,children:[S.jsx("div",{style:ae.fullRoomIcon,children:""}),S.jsx("h2",{style:ae.fullRoomTitle,children:"Room Full"}),S.jsxs("p",{style:ae.fullRoomMessage,children:["This room has reached its maximum capacity of ",m?.maxParticipants," participants."]}),S.jsxs("div",{style:ae.fullRoomDetails,children:[S.jsxs("p",{children:[S.jsx("strong",{children:"Room:"})," ",m?.name]}),S.jsxs("p",{children:[S.jsx("strong",{children:"Host:"})," ",m?.hostName]}),S.jsxs("p",{children:[S.jsx("strong",{children:"Current Participants:"})," ",m?.currentParticipants,"/",m?.maxParticipants]}),S.jsxs("p",{children:[S.jsx("strong",{children:"You are in room?"})," ",he?"YES":"NO"]})]}),S.jsxs("div",{style:ae.debugInfo,children:[S.jsx("button",{onClick:C,style:ae.debugButton,children:" Debug Firestore"}),S.jsx("button",{onClick:I,style:ae.debugButton,children:" Refresh Data"})]}),S.jsxs("div",{style:ae.fullRoomActions,children:[S.jsx("button",{onClick:()=>e("/dashboard"),style:ae.fullRoomButton,children:"Back to Dashboard"}),!he&&S.jsx("button",{onClick:async()=>{console.log(" Retrying join..."),q(!1),await w()},style:ae.fullRoomButtonSecondary,children:"Try Again"})]})]})}):O&&!O.includes("full")?S.jsxs("div",{style:ae.errorContainer,children:[S.jsx("div",{style:ae.errorIcon,children:""}),S.jsx("h2",{style:ae.errorTitle,children:"Room Unavailable"}),S.jsx("p",{style:ae.errorMessage,children:O}),S.jsxs("div",{style:ae.errorActions,children:[S.jsx("button",{onClick:()=>e("/dashboard"),style:ae.backButton,children:"Back to Dashboard"}),S.jsx("button",{onClick:I,style:ae.refreshButton,children:"Try Again"})]})]}):m?S.jsxs("div",{style:ae.container,children:[S.jsxs("header",{style:ae.header,children:[S.jsxs("div",{style:ae.headerLeft,children:[S.jsx("button",{onClick:()=>e("/dashboard"),style:ae.backButton,children:" Back"}),S.jsxs("div",{style:ae.roomInfo,children:[S.jsx("h1",{style:ae.roomName,children:m.name}),S.jsxs("div",{style:ae.roomMeta,children:[S.jsxs("span",{style:ae.roomCode,onClick:M,title:"Click to copy",children:["#",m.roomCode]}),S.jsxs("span",{style:ae.participantCount,children:[m.currentParticipants,"/",m.maxParticipants," participants"]}),S.jsx("span",{style:ae.roomStatus,"data-status":m.status,children:m.status}),S.jsx("span",{style:{...ae.connectionBadge,backgroundColor:u==="connected"?"#10b981":u==="checking"?"#f59e0b":"#ef4444"},children:u}),!he&&S.jsx("span",{style:ae.warningBadge,children:"Not in room"})]})]})]}),S.jsx("div",{style:ae.headerRight,children:S.jsx("button",{onClick:D,style:ae.leaveButton,children:"Leave Room"})})]}),S.jsxs("main",{style:ae.main,children:[S.jsxs("div",{style:ae.videoSection,children:[S.jsx("div",{style:ae.videoContainer,children:S.jsx(dO,{})}),S.jsx("div",{style:ae.videoContainer,children:S.jsx(hO,{})}),!o&&u!=="connected"&&S.jsxs("div",{style:ae.noConnectionsMessage,children:[S.jsx("div",{style:ae.noConnectionsIcon,children:""}),S.jsx("p",{style:ae.noConnectionsText,children:u==="checking"||u==="creating-offer"||u==="creating-answer"?"Establishing connection...":"Waiting for other participants..."}),S.jsxs("p",{style:ae.noConnectionsSubtext,children:["Share room code: ",S.jsxs("strong",{children:["#",m?.roomCode]})]}),S.jsxs("div",{style:ae.connectionHint,children:[S.jsxs("p",{children:["Status: ",S.jsx("strong",{children:u})]}),S.jsx("p",{children:"Make sure both users have allowed camera/microphone permissions"})]})]})]}),S.jsxs("aside",{style:ae.sidebar,children:[S.jsxs("div",{style:ae.sidebarHeader,children:[S.jsx("h3",{style:ae.sidebarTitle,children:"Participants"}),S.jsx("span",{style:ae.participantBadge,children:g.length}),S.jsx("button",{onClick:I,style:ae.refreshSmallButton,title:"Refresh participants",children:""})]}),S.jsx("div",{style:ae.participantsList,children:g.map(P=>S.jsxs("div",{style:{...ae.participantItem,...P.isHost?ae.hostItem:{},...P.id===n?.uid?ae.currentUserItem:{}},children:[S.jsxs("div",{style:ae.participantAvatar,children:[P.photoURL?S.jsx("img",{src:P.photoURL,alt:P.name,style:ae.avatarImage}):S.jsx("div",{style:ae.defaultAvatar,children:P.name.charAt(0)}),P.isHost&&S.jsx("div",{style:ae.hostBadge,title:"Host",children:""})]}),S.jsxs("div",{style:ae.participantInfo,children:[S.jsxs("div",{style:ae.participantName,children:[P.name,P.id===n?.uid&&S.jsx("span",{style:ae.youBadge,children:" (You)"})]}),S.jsxs("div",{style:ae.participantStatus,children:[S.jsx("span",{style:ae.statusDot}),P.isActive?"Online":"Offline"]})]}),m.hostId===n?.uid&&!P.isHost&&S.jsx("button",{style:ae.kickButton,title:"Kick participant",onClick:()=>alert(`Kick ${P.name} - Coming soon`),children:""})]},P.id))}),S.jsxs("div",{style:ae.controlsSection,children:[S.jsx("h4",{style:ae.controlsTitle,children:"Room Controls"}),S.jsxs("div",{style:ae.controlsGrid,children:[S.jsx("button",{style:{...ae.controlButton,...ee?ae.controlButtonActive:ae.controlButtonInactive},onClick:pe,disabled:Ee,children:ee?" Mic On":" Mic Muted"}),S.jsx("button",{style:{...ae.controlButton,...X?ae.controlButtonActive:ae.controlButtonInactive},onClick:de,disabled:Ee,children:X?" Camera On":" Camera Off"}),S.jsx("button",{style:ae.controlButton,onClick:U,children:" Invite"}),S.jsx("button",{style:ae.controlButton,onClick:()=>navigator.clipboard.writeText(`#${m.roomCode}`),children:" Copy Code"}),m.hostId===n?.uid&&S.jsx("button",{style:ae.controlButtonDanger,onClick:()=>alert("End Room - Coming soon"),children:" End Room"})]}),x&&S.jsxs("div",{style:ae.mediaError,children:[" ",x]}),S.jsxs("div",{style:ae.connectionInfo,children:[S.jsxs("div",{style:ae.connectionInfoHeader,children:[S.jsx("span",{children:"Connection Status:"}),S.jsx("span",{style:{color:u==="connected"?"#10b981":u==="checking"?"#f59e0b":"#ef4444",fontWeight:"600"},children:u})]}),S.jsxs("div",{style:ae.connectionDetails,children:[S.jsxs("div",{style:ae.connectionDetail,children:[S.jsx("span",{children:"Local Stream:"}),S.jsx("span",{style:{color:$?"#10b981":"#ef4444"},children:$?"Active":"Inactive"})]}),S.jsxs("div",{style:ae.connectionDetail,children:[S.jsx("span",{children:"Remote Stream:"}),S.jsx("span",{style:{color:o?"#10b981":"#ef4444"},children:o?"Active":"Inactive"})]}),o&&S.jsxs("div",{style:ae.trackInfo,children:[S.jsx("span",{children:"Tracks:"}),S.jsxs("span",{children:["Video: ",o.getVideoTracks().length,", Audio: ",o.getAudioTracks().length]})]})]})]})]})]})]}),S.jsxs("details",{style:ae.debugPanel,children:[S.jsx("summary",{style:ae.debugSummary,children:" Debug Panel"}),S.jsxs("div",{style:ae.debugActions,children:[S.jsx("button",{onClick:C,style:ae.debugButton,children:" Debug Firestore"}),S.jsx("button",{onClick:rO,style:ae.debugButton,children:"Check Room State"}),S.jsx("button",{onClick:oe,style:ae.debugButton,children:"Check WebRTC"}),S.jsx("button",{onClick:()=>console.log("Remote stream:",o),style:ae.debugButton,children:"Log Remote Stream"}),S.jsx("button",{onClick:I,style:ae.debugButton,children:"Refresh Data"})]})]}),S.jsx("footer",{style:ae.footer,children:S.jsxs("div",{style:ae.footerContent,children:[S.jsxs("div",{style:ae.footerInfo,children:[S.jsxs("span",{children:["Room created by ",m.hostName]}),S.jsx("span",{style:ae.footerSeparator,children:""}),S.jsxs("span",{children:["You are ",m.hostId===n?.uid?"the host":"a participant"]}),S.jsx("span",{style:ae.footerSeparator,children:""}),S.jsx("span",{style:{color:u==="connected"?"#10b981":u==="checking"?"#f59e0b":"#ef4444"},children:u.toUpperCase()}),!he&&S.jsxs(S.Fragment,{children:[S.jsx("span",{style:ae.footerSeparator,children:""}),S.jsx("span",{style:{color:"#ef4444"},children:"NOT IN ROOM"})]})]}),S.jsxs("div",{style:ae.footerActions,children:[S.jsx("button",{style:ae.footerButton,onClick:U,children:"Copy Invite Link"}),S.jsx("button",{style:ae.footerButton,onClick:()=>alert("Settings - Coming soon"),children:"Settings"})]})]})})]}):S.jsxs("div",{style:ae.errorContainer,children:[S.jsx("h2",{style:ae.errorTitle,children:"Room Not Found"}),S.jsx("button",{onClick:()=>e("/dashboard"),style:ae.backButton,children:"Back to Dashboard"})]})},ae={container:{minHeight:"100vh",backgroundColor:"var(--bg-dark)",color:"var(--text-light)",display:"flex",flexDirection:"column"},loadingContainer:{minHeight:"100vh",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",backgroundColor:"var(--bg-dark)",gap:"20px"},spinner:{width:"50px",height:"50px",border:"4px solid rgba(255, 255, 255, 0.1)",borderTopColor:"var(--primary-purple)",borderRadius:"50%",animation:"spin 1s linear infinite",marginBottom:"10px"},loadingText:{color:"var(--text-gray)",fontSize:"1.1rem"},refreshButton:{padding:"10px 20px",backgroundColor:"rgba(59, 130, 246, 0.2)",border:"1px solid rgba(59, 130, 246, 0.3)",borderRadius:"var(--radius-md)",color:"#93c5fd",cursor:"pointer",fontSize:"0.9rem"},errorContainer:{minHeight:"100vh",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",backgroundColor:"var(--bg-dark)",textAlign:"center",padding:"20px",gap:"20px"},errorIcon:{fontSize:"4rem",marginBottom:"20px"},errorTitle:{fontSize:"2rem",marginBottom:"10px",color:"var(--text-light)"},errorMessage:{color:"var(--text-gray)",marginBottom:"30px",fontSize:"1.1rem",maxWidth:"400px"},errorActions:{display:"flex",gap:"15px"},backButton:{padding:"10px 20px",backgroundColor:"var(--primary-purple)",border:"none",borderRadius:"var(--radius-md)",color:"white",cursor:"pointer",fontSize:"1rem",transition:"all 0.2s ease"},fullRoomContainer:{minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"var(--bg-dark)",padding:"20px"},fullRoomContent:{background:"var(--bg-card)",padding:"40px",borderRadius:"var(--radius-xl)",border:"1px solid var(--border-medium)",textAlign:"center",maxWidth:"500px"},fullRoomIcon:{fontSize:"4rem",marginBottom:"20px"},fullRoomTitle:{fontSize:"2rem",marginBottom:"15px",color:"var(--text-light)"},fullRoomMessage:{color:"var(--text-gray)",marginBottom:"25px",fontSize:"1.1rem"},fullRoomDetails:{textAlign:"left",marginBottom:"30px",padding:"20px",backgroundColor:"rgba(255, 255, 255, 0.05)",borderRadius:"var(--radius-md)",fontSize:"0.9rem"},debugInfo:{display:"flex",gap:"10px",justifyContent:"center",marginBottom:"20px"},debugButton:{padding:"8px 16px",backgroundColor:"rgba(255, 255, 255, 0.1)",border:"1px solid var(--border-light)",borderRadius:"var(--radius-md)",color:"var(--text-light)",cursor:"pointer",fontSize:"0.8rem"},fullRoomActions:{display:"flex",gap:"15px",justifyContent:"center"},fullRoomButton:{padding:"12px 24px",backgroundColor:"var(--primary-purple)",border:"none",borderRadius:"var(--radius-md)",color:"white",cursor:"pointer",fontSize:"1rem",fontWeight:"500"},fullRoomButtonSecondary:{padding:"12px 24px",backgroundColor:"transparent",border:"1px solid var(--border-light)",borderRadius:"var(--radius-md)",color:"var(--text-light)",cursor:"pointer",fontSize:"1rem"},header:{backgroundColor:"var(--bg-card)",borderBottom:"1px solid var(--border-light)",padding:"15px 20px",display:"flex",justifyContent:"space-between",alignItems:"center"},headerLeft:{display:"flex",alignItems:"center",gap:"20px"},roomInfo:{display:"flex",flexDirection:"column",gap:"5px"},roomName:{fontSize:"1.5rem",fontWeight:"600",margin:0,color:"var(--text-light)"},roomMeta:{display:"flex",alignItems:"center",gap:"15px",fontSize:"0.9rem",color:"var(--text-gray)",flexWrap:"wrap"},roomCode:{backgroundColor:"rgba(124, 58, 237, 0.2)",color:"#a78bfa",padding:"4px 8px",borderRadius:"4px",fontFamily:"monospace",fontWeight:"600",cursor:"pointer",transition:"all 0.2s ease"},participantCount:{padding:"4px 8px",backgroundColor:"rgba(59, 130, 246, 0.2)",borderRadius:"4px"},roomStatus:{padding:"4px 8px",borderRadius:"4px",fontWeight:"500",textTransform:"capitalize"},connectionBadge:{padding:"4px 8px",borderRadius:"4px",color:"white",fontWeight:"500",fontSize:"0.8rem",textTransform:"capitalize"},warningBadge:{padding:"4px 8px",backgroundColor:"rgba(239, 68, 68, 0.2)",color:"#f87171",borderRadius:"4px",fontWeight:"500"},headerRight:{display:"flex",alignItems:"center",gap:"10px"},leaveButton:{padding:"10px 20px",backgroundColor:"rgba(239, 68, 68, 0.2)",border:"1px solid rgba(239, 68, 68, 0.3)",borderRadius:"var(--radius-md)",color:"#f87171",cursor:"pointer",fontWeight:"500",transition:"all 0.2s ease"},main:{flex:1,display:"flex",padding:"20px",gap:"20px",overflow:"hidden"},videoSection:{flex:3,display:"flex",flexWrap:"wrap",gap:"15px",backgroundColor:"var(--bg-card-light)",borderRadius:"var(--radius-lg)",border:"1px solid var(--border-light)",padding:"15px",minHeight:"500px",overflowY:"auto",position:"relative",justifyContent:"center",alignItems:"center"},videoContainer:{position:"relative",backgroundColor:"#000",borderRadius:"var(--radius-md)",overflow:"hidden",width:"48%",minWidth:"300px",aspectRatio:"16/9",border:"2px solid var(--border-light)"},noConnectionsMessage:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",textAlign:"center",padding:"40px",backgroundColor:"rgba(0, 0, 0, 0.7)",borderRadius:"var(--radius-lg)",backdropFilter:"blur(10px)",border:"1px solid var(--border-light)",zIndex:10,maxWidth:"400px"},noConnectionsIcon:{fontSize:"3rem",marginBottom:"15px",opacity:.7},noConnectionsText:{fontSize:"1.5rem",marginBottom:"10px",color:"var(--text-light)"},noConnectionsSubtext:{color:"var(--text-gray)",marginBottom:"15px",fontSize:"1rem"},connectionHint:{marginTop:"20px",padding:"15px",backgroundColor:"rgba(59, 130, 246, 0.1)",borderRadius:"var(--radius-md)",fontSize:"0.9rem"},sidebar:{flex:1,backgroundColor:"var(--bg-card-light)",borderRadius:"var(--radius-lg)",border:"1px solid var(--border-light)",padding:"20px",minWidth:"300px",maxHeight:"600px",overflowY:"auto"},sidebarHeader:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px",paddingBottom:"15px",borderBottom:"1px solid var(--border-light)"},sidebarTitle:{fontSize:"1.2rem",fontWeight:"600",margin:0,color:"var(--text-light)"},participantBadge:{backgroundColor:"var(--primary-purple)",color:"white",padding:"4px 10px",borderRadius:"12px",fontSize:"0.8rem",fontWeight:"600"},refreshSmallButton:{background:"none",border:"none",color:"var(--text-gray)",cursor:"pointer",fontSize:"1rem",padding:"5px",borderRadius:"4px"},participantsList:{display:"flex",flexDirection:"column",gap:"10px",marginBottom:"30px"},participantItem:{display:"flex",alignItems:"center",gap:"12px",padding:"12px",backgroundColor:"rgba(255, 255, 255, 0.05)",borderRadius:"var(--radius-md)",transition:"all 0.2s ease"},hostItem:{backgroundColor:"rgba(124, 58, 237, 0.1)",borderLeft:"3px solid var(--primary-purple)"},currentUserItem:{backgroundColor:"rgba(59, 130, 246, 0.1)",borderLeft:"3px solid #3b82f6"},participantAvatar:{position:"relative",width:"40px",height:"40px"},avatarImage:{width:"100%",height:"100%",borderRadius:"50%",objectFit:"cover"},defaultAvatar:{width:"100%",height:"100%",borderRadius:"50%",backgroundColor:"var(--primary-purple)",display:"flex",alignItems:"center",justifyContent:"center",color:"white",fontWeight:"600",fontSize:"1.2rem"},hostBadge:{position:"absolute",bottom:"-5px",right:"-5px",backgroundColor:"var(--primary-purple)",borderRadius:"50%",width:"20px",height:"20px",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"0.8rem"},participantInfo:{flex:1,minWidth:0},participantName:{fontWeight:"500",color:"var(--text-light)",marginBottom:"4px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},youBadge:{color:"var(--accent-blue)",fontSize:"0.9rem"},participantStatus:{display:"flex",alignItems:"center",gap:"6px",fontSize:"0.8rem",color:"var(--text-gray)"},statusDot:{width:"8px",height:"8px",backgroundColor:"#10b981",borderRadius:"50%"},kickButton:{width:"28px",height:"28px",backgroundColor:"rgba(239, 68, 68, 0.1)",border:"1px solid rgba(239, 68, 68, 0.3)",borderRadius:"50%",color:"#f87171",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"1.2rem",transition:"all 0.2s ease"},controlsSection:{marginTop:"30px",paddingTop:"20px",borderTop:"1px solid var(--border-light)"},controlsTitle:{fontSize:"1rem",fontWeight:"600",marginBottom:"15px",color:"var(--text-light)"},controlsGrid:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"10px",marginBottom:"20px"},controlButton:{padding:"12px",backgroundColor:"rgba(255, 255, 255, 0.1)",border:"1px solid var(--border-light)",borderRadius:"var(--radius-md)",color:"var(--text-light)",cursor:"pointer",fontSize:"0.9rem",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",transition:"all 0.2s ease"},controlButtonActive:{backgroundColor:"rgba(34, 197, 94, 0.2)",borderColor:"rgba(34, 197, 94, 0.5)",color:"#4ade80"},controlButtonInactive:{backgroundColor:"rgba(239, 68, 68, 0.2)",borderColor:"rgba(239, 68, 68, 0.5)",color:"#f87171"},controlButtonDanger:{gridColumn:"1 / -1",padding:"12px",backgroundColor:"rgba(239, 68, 68, 0.2)",border:"1px solid rgba(239, 68, 68, 0.3)",borderRadius:"var(--radius-md)",color:"#f87171",cursor:"pointer",fontSize:"0.9rem",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",transition:"all 0.2s ease"},mediaError:{marginTop:"10px",padding:"8px 12px",backgroundColor:"rgba(245, 158, 11, 0.2)",border:"1px solid rgba(245, 158, 11, 0.3)",borderRadius:"var(--radius-md)",color:"#fbbf24",fontSize:"0.8rem"},connectionInfo:{marginTop:"20px",padding:"15px",backgroundColor:"rgba(0, 0, 0, 0.2)",borderRadius:"var(--radius-md)"},connectionInfoHeader:{display:"flex",justifyContent:"space-between",marginBottom:"10px",fontSize:"0.9rem"},connectionDetails:{display:"flex",flexDirection:"column",gap:"8px",fontSize:"0.8rem"},connectionDetail:{display:"flex",justifyContent:"space-between"},trackInfo:{display:"flex",justifyContent:"space-between",fontSize:"0.7rem",color:"var(--text-gray)",marginTop:"5px"},debugPanel:{margin:"20px",padding:"15px",backgroundColor:"rgba(0, 0, 0, 0.5)",borderRadius:"var(--radius-md)",border:"1px solid var(--border-light)"},debugSummary:{cursor:"pointer",padding:"10px",backgroundColor:"rgba(59, 130, 246, 0.2)",border:"1px solid rgba(59, 130, 246, 0.3)",borderRadius:"var(--radius-md)",color:"#93c5fd",fontWeight:"500",marginBottom:"15px"},debugActions:{display:"flex",gap:"10px",marginTop:"15px",flexWrap:"wrap"},footer:{backgroundColor:"var(--bg-card)",borderTop:"1px solid var(--border-light)",padding:"15px 20px",marginTop:"auto"},footerContent:{display:"flex",justifyContent:"space-between",alignItems:"center"},footerInfo:{display:"flex",alignItems:"center",gap:"10px",color:"var(--text-gray)",fontSize:"0.9rem",flexWrap:"wrap"},footerSeparator:{opacity:.5},footerActions:{display:"flex",gap:"10px"},footerButton:{padding:"8px 16px",backgroundColor:"rgba(255, 255, 255, 0.1)",border:"1px solid var(--border-light)",borderRadius:"var(--radius-md)",color:"var(--text-light)",cursor:"pointer",fontSize:"0.9rem",transition:"all 0.2s ease"}};function pO(){return S.jsx($N,{children:S.jsx(XN,{children:S.jsx(oO,{children:S.jsxs(lO,{children:["  ",S.jsxs(jw,{children:["  ",S.jsxs(pw,{children:[S.jsx(ro,{path:"/",element:S.jsx(qm,{})}),S.jsx(ro,{path:"/Labyrinth",element:S.jsx(qm,{})})," ",S.jsx(ro,{path:"/dashboard",element:S.jsx(kE,{children:S.jsx(cO,{})})}),S.jsx(ro,{path:"/room/:roomId",element:S.jsx(kE,{children:S.jsx(mO,{})})}),S.jsx(ro,{path:"*",element:S.jsx(qm,{})})]})]})]})})})})}gA.createRoot(document.getElementById("root")).render(S.jsx(k.StrictMode,{children:S.jsx(pO,{})}));
