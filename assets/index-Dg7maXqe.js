(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const u of o)if(u.type==="childList")for(const f of u.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&s(f)}).observe(document,{childList:!0,subtree:!0});function n(o){const u={};return o.integrity&&(u.integrity=o.integrity),o.referrerPolicy&&(u.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?u.credentials="include":o.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function s(o){if(o.ep)return;o.ep=!0;const u=n(o);fetch(o.href,u)}})();function sA(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var Em={exports:{}},zl={};var F_;function aA(){if(F_)return zl;F_=1;var r=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(s,o,u){var f=null;if(u!==void 0&&(f=""+u),o.key!==void 0&&(f=""+o.key),"key"in o){u={};for(var m in o)m!=="key"&&(u[m]=o[m])}else u=o;return o=u.ref,{$$typeof:r,type:s,key:f,ref:o!==void 0?o:null,props:u}}return zl.Fragment=e,zl.jsx=n,zl.jsxs=n,zl}var G_;function oA(){return G_||(G_=1,Em.exports=aA()),Em.exports}var b=oA(),Tm={exports:{}},Ne={};var Q_;function lA(){if(Q_)return Ne;Q_=1;var r=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),u=Symbol.for("react.consumer"),f=Symbol.for("react.context"),m=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),E=Symbol.for("react.lazy"),T=Symbol.for("react.activity"),C=Symbol.iterator;function O(P){return P===null||typeof P!="object"?null:(P=C&&P[C]||P["@@iterator"],typeof P=="function"?P:null)}var L={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},q=Object.assign,z={};function $(P,J,le){this.props=P,this.context=J,this.refs=z,this.updater=le||L}$.prototype.isReactComponent={},$.prototype.setState=function(P,J){if(typeof P!="object"&&typeof P!="function"&&P!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,P,J,"setState")},$.prototype.forceUpdate=function(P){this.updater.enqueueForceUpdate(this,P,"forceUpdate")};function X(){}X.prototype=$.prototype;function Z(P,J,le){this.props=P,this.context=J,this.refs=z,this.updater=le||L}var pe=Z.prototype=new X;pe.constructor=Z,q(pe,$.prototype),pe.isPureReactComponent=!0;var _e=Array.isArray;function Te(){}var D={H:null,A:null,T:null,S:null},I=Object.prototype.hasOwnProperty;function R(P,J,le){var fe=le.ref;return{$$typeof:r,type:P,key:J,ref:fe!==void 0?fe:null,props:le}}function N(P,J){return R(P.type,J,P.props)}function V(P){return typeof P=="object"&&P!==null&&P.$$typeof===r}function x(P){var J={"=":"=0",":":"=2"};return"$"+P.replace(/[=:]/g,function(le){return J[le]})}var A=/\/+/g;function se(P,J){return typeof P=="object"&&P!==null&&P.key!=null?x(""+P.key):J.toString(36)}function ce(P){switch(P.status){case"fulfilled":return P.value;case"rejected":throw P.reason;default:switch(typeof P.status=="string"?P.then(Te,Te):(P.status="pending",P.then(function(J){P.status==="pending"&&(P.status="fulfilled",P.value=J)},function(J){P.status==="pending"&&(P.status="rejected",P.reason=J)})),P.status){case"fulfilled":return P.value;case"rejected":throw P.reason}}throw P}function B(P,J,le,fe,we){var Se=typeof P;(Se==="undefined"||Se==="boolean")&&(P=null);var Ce=!1;if(P===null)Ce=!0;else switch(Se){case"bigint":case"string":case"number":Ce=!0;break;case"object":switch(P.$$typeof){case r:case e:Ce=!0;break;case E:return Ce=P._init,B(Ce(P._payload),J,le,fe,we)}}if(Ce)return we=we(P),Ce=fe===""?"."+se(P,0):fe,_e(we)?(le="",Ce!=null&&(le=Ce.replace(A,"$&/")+"/"),B(we,J,le,"",function(mn){return mn})):we!=null&&(V(we)&&(we=N(we,le+(we.key==null||P&&P.key===we.key?"":(""+we.key).replace(A,"$&/")+"/")+Ce)),J.push(we)),1;Ce=0;var Pe=fe===""?".":fe+":";if(_e(P))for(var Ye=0;Ye<P.length;Ye++)fe=P[Ye],Se=Pe+se(fe,Ye),Ce+=B(fe,J,le,Se,we);else if(Ye=O(P),typeof Ye=="function")for(P=Ye.call(P),Ye=0;!(fe=P.next()).done;)fe=fe.value,Se=Pe+se(fe,Ye++),Ce+=B(fe,J,le,Se,we);else if(Se==="object"){if(typeof P.then=="function")return B(ce(P),J,le,fe,we);throw J=String(P),Error("Objects are not valid as a React child (found: "+(J==="[object Object]"?"object with keys {"+Object.keys(P).join(", ")+"}":J)+"). If you meant to render a collection of children, use an array instead.")}return Ce}function W(P,J,le){if(P==null)return P;var fe=[],we=0;return B(P,fe,"","",function(Se){return J.call(le,Se,we++)}),fe}function te(P){if(P._status===-1){var J=P._result;J=J(),J.then(function(le){(P._status===0||P._status===-1)&&(P._status=1,P._result=le)},function(le){(P._status===0||P._status===-1)&&(P._status=2,P._result=le)}),P._status===-1&&(P._status=0,P._result=J)}if(P._status===1)return P._result.default;throw P._result}var de=typeof reportError=="function"?reportError:function(P){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var J=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof P=="object"&&P!==null&&typeof P.message=="string"?String(P.message):String(P),error:P});if(!window.dispatchEvent(J))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",P);return}console.error(P)},he={map:W,forEach:function(P,J,le){W(P,function(){J.apply(this,arguments)},le)},count:function(P){var J=0;return W(P,function(){J++}),J},toArray:function(P){return W(P,function(J){return J})||[]},only:function(P){if(!V(P))throw Error("React.Children.only expected to receive a single React element child.");return P}};return Ne.Activity=T,Ne.Children=he,Ne.Component=$,Ne.Fragment=n,Ne.Profiler=o,Ne.PureComponent=Z,Ne.StrictMode=s,Ne.Suspense=p,Ne.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=D,Ne.__COMPILER_RUNTIME={__proto__:null,c:function(P){return D.H.useMemoCache(P)}},Ne.cache=function(P){return function(){return P.apply(null,arguments)}},Ne.cacheSignal=function(){return null},Ne.cloneElement=function(P,J,le){if(P==null)throw Error("The argument must be a React element, but you passed "+P+".");var fe=q({},P.props),we=P.key;if(J!=null)for(Se in J.key!==void 0&&(we=""+J.key),J)!I.call(J,Se)||Se==="key"||Se==="__self"||Se==="__source"||Se==="ref"&&J.ref===void 0||(fe[Se]=J[Se]);var Se=arguments.length-2;if(Se===1)fe.children=le;else if(1<Se){for(var Ce=Array(Se),Pe=0;Pe<Se;Pe++)Ce[Pe]=arguments[Pe+2];fe.children=Ce}return R(P.type,we,fe)},Ne.createContext=function(P){return P={$$typeof:f,_currentValue:P,_currentValue2:P,_threadCount:0,Provider:null,Consumer:null},P.Provider=P,P.Consumer={$$typeof:u,_context:P},P},Ne.createElement=function(P,J,le){var fe,we={},Se=null;if(J!=null)for(fe in J.key!==void 0&&(Se=""+J.key),J)I.call(J,fe)&&fe!=="key"&&fe!=="__self"&&fe!=="__source"&&(we[fe]=J[fe]);var Ce=arguments.length-2;if(Ce===1)we.children=le;else if(1<Ce){for(var Pe=Array(Ce),Ye=0;Ye<Ce;Ye++)Pe[Ye]=arguments[Ye+2];we.children=Pe}if(P&&P.defaultProps)for(fe in Ce=P.defaultProps,Ce)we[fe]===void 0&&(we[fe]=Ce[fe]);return R(P,Se,we)},Ne.createRef=function(){return{current:null}},Ne.forwardRef=function(P){return{$$typeof:m,render:P}},Ne.isValidElement=V,Ne.lazy=function(P){return{$$typeof:E,_payload:{_status:-1,_result:P},_init:te}},Ne.memo=function(P,J){return{$$typeof:g,type:P,compare:J===void 0?null:J}},Ne.startTransition=function(P){var J=D.T,le={};D.T=le;try{var fe=P(),we=D.S;we!==null&&we(le,fe),typeof fe=="object"&&fe!==null&&typeof fe.then=="function"&&fe.then(Te,de)}catch(Se){de(Se)}finally{J!==null&&le.types!==null&&(J.types=le.types),D.T=J}},Ne.unstable_useCacheRefresh=function(){return D.H.useCacheRefresh()},Ne.use=function(P){return D.H.use(P)},Ne.useActionState=function(P,J,le){return D.H.useActionState(P,J,le)},Ne.useCallback=function(P,J){return D.H.useCallback(P,J)},Ne.useContext=function(P){return D.H.useContext(P)},Ne.useDebugValue=function(){},Ne.useDeferredValue=function(P,J){return D.H.useDeferredValue(P,J)},Ne.useEffect=function(P,J){return D.H.useEffect(P,J)},Ne.useEffectEvent=function(P){return D.H.useEffectEvent(P)},Ne.useId=function(){return D.H.useId()},Ne.useImperativeHandle=function(P,J,le){return D.H.useImperativeHandle(P,J,le)},Ne.useInsertionEffect=function(P,J){return D.H.useInsertionEffect(P,J)},Ne.useLayoutEffect=function(P,J){return D.H.useLayoutEffect(P,J)},Ne.useMemo=function(P,J){return D.H.useMemo(P,J)},Ne.useOptimistic=function(P,J){return D.H.useOptimistic(P,J)},Ne.useReducer=function(P,J,le){return D.H.useReducer(P,J,le)},Ne.useRef=function(P){return D.H.useRef(P)},Ne.useState=function(P){return D.H.useState(P)},Ne.useSyncExternalStore=function(P,J,le){return D.H.useSyncExternalStore(P,J,le)},Ne.useTransition=function(){return D.H.useTransition()},Ne.version="19.2.3",Ne}var $_;function yp(){return $_||($_=1,Tm.exports=lA()),Tm.exports}var k=yp();const Hm=sA(k);var bm={exports:{}},Bl={},Sm={exports:{}},Am={};var Y_;function uA(){return Y_||(Y_=1,(function(r){function e(B,W){var te=B.length;B.push(W);e:for(;0<te;){var de=te-1>>>1,he=B[de];if(0<o(he,W))B[de]=W,B[te]=he,te=de;else break e}}function n(B){return B.length===0?null:B[0]}function s(B){if(B.length===0)return null;var W=B[0],te=B.pop();if(te!==W){B[0]=te;e:for(var de=0,he=B.length,P=he>>>1;de<P;){var J=2*(de+1)-1,le=B[J],fe=J+1,we=B[fe];if(0>o(le,te))fe<he&&0>o(we,le)?(B[de]=we,B[fe]=te,de=fe):(B[de]=le,B[J]=te,de=J);else if(fe<he&&0>o(we,te))B[de]=we,B[fe]=te,de=fe;else break e}}return W}function o(B,W){var te=B.sortIndex-W.sortIndex;return te!==0?te:B.id-W.id}if(r.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var u=performance;r.unstable_now=function(){return u.now()}}else{var f=Date,m=f.now();r.unstable_now=function(){return f.now()-m}}var p=[],g=[],E=1,T=null,C=3,O=!1,L=!1,q=!1,z=!1,$=typeof setTimeout=="function"?setTimeout:null,X=typeof clearTimeout=="function"?clearTimeout:null,Z=typeof setImmediate<"u"?setImmediate:null;function pe(B){for(var W=n(g);W!==null;){if(W.callback===null)s(g);else if(W.startTime<=B)s(g),W.sortIndex=W.expirationTime,e(p,W);else break;W=n(g)}}function _e(B){if(q=!1,pe(B),!L)if(n(p)!==null)L=!0,Te||(Te=!0,x());else{var W=n(g);W!==null&&ce(_e,W.startTime-B)}}var Te=!1,D=-1,I=5,R=-1;function N(){return z?!0:!(r.unstable_now()-R<I)}function V(){if(z=!1,Te){var B=r.unstable_now();R=B;var W=!0;try{e:{L=!1,q&&(q=!1,X(D),D=-1),O=!0;var te=C;try{t:{for(pe(B),T=n(p);T!==null&&!(T.expirationTime>B&&N());){var de=T.callback;if(typeof de=="function"){T.callback=null,C=T.priorityLevel;var he=de(T.expirationTime<=B);if(B=r.unstable_now(),typeof he=="function"){T.callback=he,pe(B),W=!0;break t}T===n(p)&&s(p),pe(B)}else s(p);T=n(p)}if(T!==null)W=!0;else{var P=n(g);P!==null&&ce(_e,P.startTime-B),W=!1}}break e}finally{T=null,C=te,O=!1}W=void 0}}finally{W?x():Te=!1}}}var x;if(typeof Z=="function")x=function(){Z(V)};else if(typeof MessageChannel<"u"){var A=new MessageChannel,se=A.port2;A.port1.onmessage=V,x=function(){se.postMessage(null)}}else x=function(){$(V,0)};function ce(B,W){D=$(function(){B(r.unstable_now())},W)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(B){B.callback=null},r.unstable_forceFrameRate=function(B){0>B||125<B?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<B?Math.floor(1e3/B):5},r.unstable_getCurrentPriorityLevel=function(){return C},r.unstable_next=function(B){switch(C){case 1:case 2:case 3:var W=3;break;default:W=C}var te=C;C=W;try{return B()}finally{C=te}},r.unstable_requestPaint=function(){z=!0},r.unstable_runWithPriority=function(B,W){switch(B){case 1:case 2:case 3:case 4:case 5:break;default:B=3}var te=C;C=B;try{return W()}finally{C=te}},r.unstable_scheduleCallback=function(B,W,te){var de=r.unstable_now();switch(typeof te=="object"&&te!==null?(te=te.delay,te=typeof te=="number"&&0<te?de+te:de):te=de,B){case 1:var he=-1;break;case 2:he=250;break;case 5:he=1073741823;break;case 4:he=1e4;break;default:he=5e3}return he=te+he,B={id:E++,callback:W,priorityLevel:B,startTime:te,expirationTime:he,sortIndex:-1},te>de?(B.sortIndex=te,e(g,B),n(p)===null&&B===n(g)&&(q?(X(D),D=-1):q=!0,ce(_e,te-de))):(B.sortIndex=he,e(p,B),L||O||(L=!0,Te||(Te=!0,x()))),B},r.unstable_shouldYield=N,r.unstable_wrapCallback=function(B){var W=C;return function(){var te=C;C=W;try{return B.apply(this,arguments)}finally{C=te}}}})(Am)),Am}var K_;function cA(){return K_||(K_=1,Sm.exports=uA()),Sm.exports}var wm={exports:{}},un={};var X_;function hA(){if(X_)return un;X_=1;var r=yp();function e(p){var g="https://react.dev/errors/"+p;if(1<arguments.length){g+="?args[]="+encodeURIComponent(arguments[1]);for(var E=2;E<arguments.length;E++)g+="&args[]="+encodeURIComponent(arguments[E])}return"Minified React error #"+p+"; visit "+g+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var s={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},o=Symbol.for("react.portal");function u(p,g,E){var T=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:T==null?null:""+T,children:p,containerInfo:g,implementation:E}}var f=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function m(p,g){if(p==="font")return"";if(typeof g=="string")return g==="use-credentials"?g:""}return un.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,un.createPortal=function(p,g){var E=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!g||g.nodeType!==1&&g.nodeType!==9&&g.nodeType!==11)throw Error(e(299));return u(p,g,null,E)},un.flushSync=function(p){var g=f.T,E=s.p;try{if(f.T=null,s.p=2,p)return p()}finally{f.T=g,s.p=E,s.d.f()}},un.preconnect=function(p,g){typeof p=="string"&&(g?(g=g.crossOrigin,g=typeof g=="string"?g==="use-credentials"?g:"":void 0):g=null,s.d.C(p,g))},un.prefetchDNS=function(p){typeof p=="string"&&s.d.D(p)},un.preinit=function(p,g){if(typeof p=="string"&&g&&typeof g.as=="string"){var E=g.as,T=m(E,g.crossOrigin),C=typeof g.integrity=="string"?g.integrity:void 0,O=typeof g.fetchPriority=="string"?g.fetchPriority:void 0;E==="style"?s.d.S(p,typeof g.precedence=="string"?g.precedence:void 0,{crossOrigin:T,integrity:C,fetchPriority:O}):E==="script"&&s.d.X(p,{crossOrigin:T,integrity:C,fetchPriority:O,nonce:typeof g.nonce=="string"?g.nonce:void 0})}},un.preinitModule=function(p,g){if(typeof p=="string")if(typeof g=="object"&&g!==null){if(g.as==null||g.as==="script"){var E=m(g.as,g.crossOrigin);s.d.M(p,{crossOrigin:E,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0})}}else g==null&&s.d.M(p)},un.preload=function(p,g){if(typeof p=="string"&&typeof g=="object"&&g!==null&&typeof g.as=="string"){var E=g.as,T=m(E,g.crossOrigin);s.d.L(p,E,{crossOrigin:T,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0,type:typeof g.type=="string"?g.type:void 0,fetchPriority:typeof g.fetchPriority=="string"?g.fetchPriority:void 0,referrerPolicy:typeof g.referrerPolicy=="string"?g.referrerPolicy:void 0,imageSrcSet:typeof g.imageSrcSet=="string"?g.imageSrcSet:void 0,imageSizes:typeof g.imageSizes=="string"?g.imageSizes:void 0,media:typeof g.media=="string"?g.media:void 0})}},un.preloadModule=function(p,g){if(typeof p=="string")if(g){var E=m(g.as,g.crossOrigin);s.d.m(p,{as:typeof g.as=="string"&&g.as!=="script"?g.as:void 0,crossOrigin:E,integrity:typeof g.integrity=="string"?g.integrity:void 0})}else s.d.m(p)},un.requestFormReset=function(p){s.d.r(p)},un.unstable_batchedUpdates=function(p,g){return p(g)},un.useFormState=function(p,g,E){return f.H.useFormState(p,g,E)},un.useFormStatus=function(){return f.H.useHostTransitionStatus()},un.version="19.2.3",un}var W_;function fA(){if(W_)return wm.exports;W_=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),wm.exports=hA(),wm.exports}var J_;function dA(){if(J_)return Bl;J_=1;var r=cA(),e=yp(),n=fA();function s(t){var i="https://react.dev/errors/"+t;if(1<arguments.length){i+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)i+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+t+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function u(t){var i=t,a=t;if(t.alternate)for(;i.return;)i=i.return;else{t=i;do i=t,(i.flags&4098)!==0&&(a=i.return),t=i.return;while(t)}return i.tag===3?a:null}function f(t){if(t.tag===13){var i=t.memoizedState;if(i===null&&(t=t.alternate,t!==null&&(i=t.memoizedState)),i!==null)return i.dehydrated}return null}function m(t){if(t.tag===31){var i=t.memoizedState;if(i===null&&(t=t.alternate,t!==null&&(i=t.memoizedState)),i!==null)return i.dehydrated}return null}function p(t){if(u(t)!==t)throw Error(s(188))}function g(t){var i=t.alternate;if(!i){if(i=u(t),i===null)throw Error(s(188));return i!==t?null:t}for(var a=t,l=i;;){var h=a.return;if(h===null)break;var d=h.alternate;if(d===null){if(l=h.return,l!==null){a=l;continue}break}if(h.child===d.child){for(d=h.child;d;){if(d===a)return p(h),t;if(d===l)return p(h),i;d=d.sibling}throw Error(s(188))}if(a.return!==l.return)a=h,l=d;else{for(var v=!1,S=h.child;S;){if(S===a){v=!0,a=h,l=d;break}if(S===l){v=!0,l=h,a=d;break}S=S.sibling}if(!v){for(S=d.child;S;){if(S===a){v=!0,a=d,l=h;break}if(S===l){v=!0,l=d,a=h;break}S=S.sibling}if(!v)throw Error(s(189))}}if(a.alternate!==l)throw Error(s(190))}if(a.tag!==3)throw Error(s(188));return a.stateNode.current===a?t:i}function E(t){var i=t.tag;if(i===5||i===26||i===27||i===6)return t;for(t=t.child;t!==null;){if(i=E(t),i!==null)return i;t=t.sibling}return null}var T=Object.assign,C=Symbol.for("react.element"),O=Symbol.for("react.transitional.element"),L=Symbol.for("react.portal"),q=Symbol.for("react.fragment"),z=Symbol.for("react.strict_mode"),$=Symbol.for("react.profiler"),X=Symbol.for("react.consumer"),Z=Symbol.for("react.context"),pe=Symbol.for("react.forward_ref"),_e=Symbol.for("react.suspense"),Te=Symbol.for("react.suspense_list"),D=Symbol.for("react.memo"),I=Symbol.for("react.lazy"),R=Symbol.for("react.activity"),N=Symbol.for("react.memo_cache_sentinel"),V=Symbol.iterator;function x(t){return t===null||typeof t!="object"?null:(t=V&&t[V]||t["@@iterator"],typeof t=="function"?t:null)}var A=Symbol.for("react.client.reference");function se(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===A?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case q:return"Fragment";case $:return"Profiler";case z:return"StrictMode";case _e:return"Suspense";case Te:return"SuspenseList";case R:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case L:return"Portal";case Z:return t.displayName||"Context";case X:return(t._context.displayName||"Context")+".Consumer";case pe:var i=t.render;return t=t.displayName,t||(t=i.displayName||i.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case D:return i=t.displayName||null,i!==null?i:se(t.type)||"Memo";case I:i=t._payload,t=t._init;try{return se(t(i))}catch{}}return null}var ce=Array.isArray,B=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,W=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,te={pending:!1,data:null,method:null,action:null},de=[],he=-1;function P(t){return{current:t}}function J(t){0>he||(t.current=de[he],de[he]=null,he--)}function le(t,i){he++,de[he]=t.current,t.current=i}var fe=P(null),we=P(null),Se=P(null),Ce=P(null);function Pe(t,i){switch(le(Se,i),le(we,t),le(fe,null),i.nodeType){case 9:case 11:t=(t=i.documentElement)&&(t=t.namespaceURI)?d_(t):0;break;default:if(t=i.tagName,i=i.namespaceURI)i=d_(i),t=m_(i,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}J(fe),le(fe,t)}function Ye(){J(fe),J(we),J(Se)}function mn(t){t.memoizedState!==null&&le(Ce,t);var i=fe.current,a=m_(i,t.type);i!==a&&(le(we,t),le(fe,a))}function xn(t){we.current===t&&(J(fe),J(we)),Ce.current===t&&(J(Ce),Pl._currentValue=te)}var on,Ji;function ln(t){if(on===void 0)try{throw Error()}catch(a){var i=a.stack.trim().match(/\n( *(at )?)/);on=i&&i[1]||"",Ji=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+on+t+Ji}var In=!1;function Kt(t,i){if(!t||In)return"";In=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(i){var re=function(){throw Error()};if(Object.defineProperty(re.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(re,[])}catch(K){var Q=K}Reflect.construct(t,[],re)}else{try{re.call()}catch(K){Q=K}t.call(re.prototype)}}else{try{throw Error()}catch(K){Q=K}(re=t())&&typeof re.catch=="function"&&re.catch(function(){})}}catch(K){if(K&&Q&&typeof K.stack=="string")return[K.stack,Q.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var h=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");h&&h.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var d=l.DetermineComponentFrameRoot(),v=d[0],S=d[1];if(v&&S){var M=v.split(`
`),G=S.split(`
`);for(h=l=0;l<M.length&&!M[l].includes("DetermineComponentFrameRoot");)l++;for(;h<G.length&&!G[h].includes("DetermineComponentFrameRoot");)h++;if(l===M.length||h===G.length)for(l=M.length-1,h=G.length-1;1<=l&&0<=h&&M[l]!==G[h];)h--;for(;1<=l&&0<=h;l--,h--)if(M[l]!==G[h]){if(l!==1||h!==1)do if(l--,h--,0>h||M[l]!==G[h]){var ee=`
`+M[l].replace(" at new "," at ");return t.displayName&&ee.includes("<anonymous>")&&(ee=ee.replace("<anonymous>",t.displayName)),ee}while(1<=l&&0<=h);break}}}finally{In=!1,Error.prepareStackTrace=a}return(a=t?t.displayName||t.name:"")?ln(a):""}function Lo(t,i){switch(t.tag){case 26:case 27:case 5:return ln(t.type);case 16:return ln("Lazy");case 13:return t.child!==i&&i!==null?ln("Suspense Fallback"):ln("Suspense");case 19:return ln("SuspenseList");case 0:case 15:return Kt(t.type,!1);case 11:return Kt(t.type.render,!1);case 1:return Kt(t.type,!0);case 31:return ln("Activity");default:return""}}function jo(t){try{var i="",a=null;do i+=Lo(t,a),a=t,t=t.return;while(t);return i}catch(l){return`
Error generating stack: `+l.message+`
`+l.stack}}var Rt=Object.prototype.hasOwnProperty,Bt=r.unstable_scheduleCallback,xr=r.unstable_cancelCallback,bf=r.unstable_shouldYield,Nu=r.unstable_requestPaint,pn=r.unstable_now,xs=r.unstable_getCurrentPriorityLevel,Uo=r.unstable_ImmediatePriority,zo=r.unstable_UserBlockingPriority,Ir=r.unstable_NormalPriority,Sf=r.unstable_LowPriority,Ou=r.unstable_IdlePriority,Mu=r.log,Vu=r.unstable_setDisableYieldValue,si=null,Xt=null;function Fn(t){if(typeof Mu=="function"&&Vu(t),Xt&&typeof Xt.setStrictMode=="function")try{Xt.setStrictMode(si,t)}catch{}}var Et=Math.clz32?Math.clz32:Pu,ku=Math.log,va=Math.LN2;function Pu(t){return t>>>=0,t===0?32:31-(ku(t)/va|0)|0}var bi=256,Is=262144,Ct=4194304;function Si(t){var i=t&42;if(i!==0)return i;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return t&261888;case 262144:case 524288:case 1048576:case 2097152:return t&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function Ai(t,i,a){var l=t.pendingLanes;if(l===0)return 0;var h=0,d=t.suspendedLanes,v=t.pingedLanes;t=t.warmLanes;var S=l&134217727;return S!==0?(l=S&~d,l!==0?h=Si(l):(v&=S,v!==0?h=Si(v):a||(a=S&~t,a!==0&&(h=Si(a))))):(S=l&~d,S!==0?h=Si(S):v!==0?h=Si(v):a||(a=l&~t,a!==0&&(h=Si(a)))),h===0?0:i!==0&&i!==h&&(i&d)===0&&(d=h&-h,a=i&-i,d>=a||d===32&&(a&4194048)!==0)?i:h}function ai(t,i){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&i)===0}function Af(t,i){switch(t){case 1:case 2:case 4:case 8:case 64:return i+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Lu(){var t=Ct;return Ct<<=1,(Ct&62914560)===0&&(Ct=4194304),t}function wi(t){for(var i=[],a=0;31>a;a++)i.push(t);return i}function Ds(t,i){t.pendingLanes|=i,i!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function wf(t,i,a,l,h,d){var v=t.pendingLanes;t.pendingLanes=a,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=a,t.entangledLanes&=a,t.errorRecoveryDisabledLanes&=a,t.shellSuspendCounter=0;var S=t.entanglements,M=t.expirationTimes,G=t.hiddenUpdates;for(a=v&~a;0<a;){var ee=31-Et(a),re=1<<ee;S[ee]=0,M[ee]=-1;var Q=G[ee];if(Q!==null)for(G[ee]=null,ee=0;ee<Q.length;ee++){var K=Q[ee];K!==null&&(K.lane&=-536870913)}a&=~re}l!==0&&Ns(t,l,0),d!==0&&h===0&&t.tag!==0&&(t.suspendedLanes|=d&~(v&~i))}function Ns(t,i,a){t.pendingLanes|=i,t.suspendedLanes&=~i;var l=31-Et(i);t.entangledLanes|=i,t.entanglements[l]=t.entanglements[l]|1073741824|a&261930}function Bo(t,i){var a=t.entangledLanes|=i;for(t=t.entanglements;a;){var l=31-Et(a),h=1<<l;h&i|t[l]&i&&(t[l]|=i),a&=~h}}function qo(t,i){var a=i&-i;return a=(a&42)!==0?1:Os(a),(a&(t.suspendedLanes|i))!==0?0:a}function Os(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function Zi(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function ju(){var t=W.p;return t!==0?t:(t=window.event,t===void 0?32:L_(t.type))}function oi(t,i){var a=W.p;try{return W.p=t,i()}finally{W.p=a}}var li=Math.random().toString(36).slice(2),xt="__reactFiber$"+li,Ft="__reactProps$"+li,Ri="__reactContainer$"+li,_a="__reactEvents$"+li,Rf="__reactListeners$"+li,Uu="__reactHandles$"+li,zu="__reactResources$"+li,Ci="__reactMarker$"+li;function Ea(t){delete t[xt],delete t[Ft],delete t[_a],delete t[Rf],delete t[Uu]}function xi(t){var i=t[xt];if(i)return i;for(var a=t.parentNode;a;){if(i=a[Ri]||a[xt]){if(a=i.alternate,i.child!==null||a!==null&&a.child!==null)for(t=T_(t);t!==null;){if(a=t[xt])return a;t=T_(t)}return i}t=a,a=t.parentNode}return null}function Gn(t){if(t=t[xt]||t[Ri]){var i=t.tag;if(i===5||i===6||i===13||i===31||i===26||i===27||i===3)return t}return null}function Dn(t){var i=t.tag;if(i===5||i===26||i===27||i===6)return t.stateNode;throw Error(s(33))}function Ii(t){var i=t[zu];return i||(i=t[zu]={hoistableStyles:new Map,hoistableScripts:new Map}),i}function It(t){t[Ci]=!0}var Ho=new Set,Fo={};function Di(t,i){Ni(t,i),Ni(t+"Capture",i)}function Ni(t,i){for(Fo[t]=i,t=0;t<i.length;t++)Ho.add(i[t])}var Go=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Qo={},$o={};function Bu(t){return Rt.call($o,t)?!0:Rt.call(Qo,t)?!1:Go.test(t)?$o[t]=!0:(Qo[t]=!0,!1)}function Ta(t,i,a){if(Bu(i))if(a===null)t.removeAttribute(i);else{switch(typeof a){case"undefined":case"function":case"symbol":t.removeAttribute(i);return;case"boolean":var l=i.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){t.removeAttribute(i);return}}t.setAttribute(i,""+a)}}function Nn(t,i,a){if(a===null)t.removeAttribute(i);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(i);return}t.setAttribute(i,""+a)}}function Dt(t,i,a,l){if(l===null)t.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(a);return}t.setAttributeNS(i,a,""+l)}}function Gt(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Dr(t){var i=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function Yo(t,i,a){var l=Object.getOwnPropertyDescriptor(t.constructor.prototype,i);if(!t.hasOwnProperty(i)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var h=l.get,d=l.set;return Object.defineProperty(t,i,{configurable:!0,get:function(){return h.call(this)},set:function(v){a=""+v,d.call(this,v)}}),Object.defineProperty(t,i,{enumerable:l.enumerable}),{getValue:function(){return a},setValue:function(v){a=""+v},stopTracking:function(){t._valueTracker=null,delete t[i]}}}}function et(t){if(!t._valueTracker){var i=Dr(t)?"checked":"value";t._valueTracker=Yo(t,i,""+t[i])}}function Ms(t){if(!t)return!1;var i=t._valueTracker;if(!i)return!0;var a=i.getValue(),l="";return t&&(l=Dr(t)?t.checked?"true":"false":t.value),t=l,t!==a?(i.setValue(t),!0):!1}function Oi(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var Vs=/[\n"\\]/g;function En(t){return t.replace(Vs,function(i){return"\\"+i.charCodeAt(0).toString(16)+" "})}function ba(t,i,a,l,h,d,v,S){t.name="",v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"?t.type=v:t.removeAttribute("type"),i!=null?v==="number"?(i===0&&t.value===""||t.value!=i)&&(t.value=""+Gt(i)):t.value!==""+Gt(i)&&(t.value=""+Gt(i)):v!=="submit"&&v!=="reset"||t.removeAttribute("value"),i!=null?Ko(t,v,Gt(i)):a!=null?Ko(t,v,Gt(a)):l!=null&&t.removeAttribute("value"),h==null&&d!=null&&(t.defaultChecked=!!d),h!=null&&(t.checked=h&&typeof h!="function"&&typeof h!="symbol"),S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"?t.name=""+Gt(S):t.removeAttribute("name")}function qu(t,i,a,l,h,d,v,S){if(d!=null&&typeof d!="function"&&typeof d!="symbol"&&typeof d!="boolean"&&(t.type=d),i!=null||a!=null){if(!(d!=="submit"&&d!=="reset"||i!=null)){et(t);return}a=a!=null?""+Gt(a):"",i=i!=null?""+Gt(i):a,S||i===t.value||(t.value=i),t.defaultValue=i}l=l??h,l=typeof l!="function"&&typeof l!="symbol"&&!!l,t.checked=S?t.checked:!!l,t.defaultChecked=!!l,v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"&&(t.name=v),et(t)}function Ko(t,i,a){i==="number"&&Oi(t.ownerDocument)===t||t.defaultValue===""+a||(t.defaultValue=""+a)}function Nr(t,i,a,l){if(t=t.options,i){i={};for(var h=0;h<a.length;h++)i["$"+a[h]]=!0;for(a=0;a<t.length;a++)h=i.hasOwnProperty("$"+t[a].value),t[a].selected!==h&&(t[a].selected=h),h&&l&&(t[a].defaultSelected=!0)}else{for(a=""+Gt(a),i=null,h=0;h<t.length;h++){if(t[h].value===a){t[h].selected=!0,l&&(t[h].defaultSelected=!0);return}i!==null||t[h].disabled||(i=t[h])}i!==null&&(i.selected=!0)}}function Hu(t,i,a){if(i!=null&&(i=""+Gt(i),i!==t.value&&(t.value=i),a==null)){t.defaultValue!==i&&(t.defaultValue=i);return}t.defaultValue=a!=null?""+Gt(a):""}function Or(t,i,a,l){if(i==null){if(l!=null){if(a!=null)throw Error(s(92));if(ce(l)){if(1<l.length)throw Error(s(93));l=l[0]}a=l}a==null&&(a=""),i=a}a=Gt(i),t.defaultValue=a,l=t.textContent,l===a&&l!==""&&l!==null&&(t.value=l),et(t)}function Tn(t,i){if(i){var a=t.firstChild;if(a&&a===t.lastChild&&a.nodeType===3){a.nodeValue=i;return}}t.textContent=i}var Fu=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Xo(t,i,a){var l=i.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?l?t.setProperty(i,""):i==="float"?t.cssFloat="":t[i]="":l?t.setProperty(i,a):typeof a!="number"||a===0||Fu.has(i)?i==="float"?t.cssFloat=a:t[i]=(""+a).trim():t[i]=a+"px"}function Wo(t,i,a){if(i!=null&&typeof i!="object")throw Error(s(62));if(t=t.style,a!=null){for(var l in a)!a.hasOwnProperty(l)||i!=null&&i.hasOwnProperty(l)||(l.indexOf("--")===0?t.setProperty(l,""):l==="float"?t.cssFloat="":t[l]="");for(var h in i)l=i[h],i.hasOwnProperty(h)&&a[h]!==l&&Xo(t,h,l)}else for(var d in i)i.hasOwnProperty(d)&&Xo(t,d,i[d])}function Sa(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Gu=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Mr=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Aa(t){return Mr.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}function ui(){}var Jo=null;function Qn(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Vr=null,Mi=null;function ks(t){var i=Gn(t);if(i&&(t=i.stateNode)){var a=t[Ft]||null;e:switch(t=i.stateNode,i.type){case"input":if(ba(t,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),i=a.name,a.type==="radio"&&i!=null){for(a=t;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+En(""+i)+'"][type="radio"]'),i=0;i<a.length;i++){var l=a[i];if(l!==t&&l.form===t.form){var h=l[Ft]||null;if(!h)throw Error(s(90));ba(l,h.value,h.defaultValue,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name)}}for(i=0;i<a.length;i++)l=a[i],l.form===t.form&&Ms(l)}break e;case"textarea":Hu(t,a.value,a.defaultValue);break e;case"select":i=a.value,i!=null&&Nr(t,!!a.multiple,i,!1)}}}var wa=!1;function kr(t,i,a){if(wa)return t(i,a);wa=!0;try{var l=t(i);return l}finally{if(wa=!1,(Vr!==null||Mi!==null)&&(jc(),Vr&&(i=Vr,t=Mi,Mi=Vr=null,ks(i),t)))for(i=0;i<t.length;i++)ks(t[i])}}function ci(t,i){var a=t.stateNode;if(a===null)return null;var l=a[Ft]||null;if(l===null)return null;a=l[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(t=t.type,l=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!l;break e;default:t=!1}if(t)return null;if(a&&typeof a!="function")throw Error(s(231,i,typeof a));return a}var $n=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ps=!1;if($n)try{var it={};Object.defineProperty(it,"passive",{get:function(){Ps=!0}}),window.addEventListener("test",it,it),window.removeEventListener("test",it,it)}catch{Ps=!1}var Vi=null,Zo=null,Ls=null;function el(){if(Ls)return Ls;var t,i=Zo,a=i.length,l,h="value"in Vi?Vi.value:Vi.textContent,d=h.length;for(t=0;t<a&&i[t]===h[t];t++);var v=a-t;for(l=1;l<=v&&i[a-l]===h[d-l];l++);return Ls=h.slice(t,1<l?1-l:void 0)}function js(t){var i=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&i===13&&(t=13)):t=i,t===10&&(t=13),32<=t||t===13?t:0}function er(){return!0}function hi(){return!1}function Wt(t){function i(a,l,h,d,v){this._reactName=a,this._targetInst=h,this.type=l,this.nativeEvent=d,this.target=v,this.currentTarget=null;for(var S in t)t.hasOwnProperty(S)&&(a=t[S],this[S]=a?a(d):d[S]);return this.isDefaultPrevented=(d.defaultPrevented!=null?d.defaultPrevented:d.returnValue===!1)?er:hi,this.isPropagationStopped=hi,this}return T(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=er)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=er)},persist:function(){},isPersistent:er}),i}var tr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ki=Wt(tr),Pr=T({},tr,{view:0,detail:0}),tl=Wt(Pr),Lr,Ra,Pi,Ca=T({},Pr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:jr,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Pi&&(Pi&&t.type==="mousemove"?(Lr=t.screenX-Pi.screenX,Ra=t.screenY-Pi.screenY):Ra=Lr=0,Pi=t),Lr)},movementY:function(t){return"movementY"in t?t.movementY:Ra}}),nl=Wt(Ca),Us=T({},Ca,{dataTransfer:0}),Qu=Wt(Us),$u=T({},Pr,{relatedTarget:0}),zs=Wt($u),il=T({},tr,{animationName:0,elapsedTime:0,pseudoElement:0}),Yu=Wt(il),xa=T({},tr,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Ku=Wt(xa),Xu=T({},tr,{data:0}),Li=Wt(Xu),Wu={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Ju={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Zu={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ec(t){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(t):(t=Zu[t])?!!i[t]:!1}function jr(){return ec}var gn=T({},Pr,{key:function(t){if(t.key){var i=Wu[t.key]||t.key;if(i!=="Unidentified")return i}return t.type==="keypress"?(t=js(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Ju[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:jr,charCode:function(t){return t.type==="keypress"?js(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?js(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),tc=Wt(gn),nc=T({},Ca,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),nr=Wt(nc),c=T({},Pr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:jr}),y=Wt(c),_=T({},tr,{propertyName:0,elapsedTime:0,pseudoElement:0}),w=Wt(_),H=T({},Ca,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Y=Wt(H),ue=T({},tr,{newState:0,oldState:0}),Me=Wt(ue),Tt=[9,13,27,32],Je=$n&&"CompositionEvent"in window,ft=null;$n&&"documentMode"in document&&(ft=document.documentMode);var Yn=$n&&"TextEvent"in window&&!ft,ji=$n&&(!Je||ft&&8<ft&&11>=ft),fi=" ",di=!1;function Bs(t,i){switch(t){case"keyup":return Tt.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ia(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Da=!1;function IS(t,i){switch(t){case"compositionend":return Ia(i);case"keypress":return i.which!==32?null:(di=!0,fi);case"textInput":return t=i.data,t===fi&&di?null:t;default:return null}}function DS(t,i){if(Da)return t==="compositionend"||!Je&&Bs(t,i)?(t=el(),Ls=Zo=Vi=null,Da=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return ji&&i.locale!=="ko"?null:i.data;default:return null}}var NS={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ag(t){var i=t&&t.nodeName&&t.nodeName.toLowerCase();return i==="input"?!!NS[t.type]:i==="textarea"}function wg(t,i,a,l){Vr?Mi?Mi.push(l):Mi=[l]:Vr=l,i=Gc(i,"onChange"),0<i.length&&(a=new ki("onChange","change",null,a,l),t.push({event:a,listeners:i}))}var rl=null,sl=null;function OS(t){o_(t,0)}function ic(t){var i=Dn(t);if(Ms(i))return t}function Rg(t,i){if(t==="change")return i}var Cg=!1;if($n){var Cf;if($n){var xf="oninput"in document;if(!xf){var xg=document.createElement("div");xg.setAttribute("oninput","return;"),xf=typeof xg.oninput=="function"}Cf=xf}else Cf=!1;Cg=Cf&&(!document.documentMode||9<document.documentMode)}function Ig(){rl&&(rl.detachEvent("onpropertychange",Dg),sl=rl=null)}function Dg(t){if(t.propertyName==="value"&&ic(sl)){var i=[];wg(i,sl,t,Qn(t)),kr(OS,i)}}function MS(t,i,a){t==="focusin"?(Ig(),rl=i,sl=a,rl.attachEvent("onpropertychange",Dg)):t==="focusout"&&Ig()}function VS(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return ic(sl)}function kS(t,i){if(t==="click")return ic(i)}function PS(t,i){if(t==="input"||t==="change")return ic(i)}function LS(t,i){return t===i&&(t!==0||1/t===1/i)||t!==t&&i!==i}var On=typeof Object.is=="function"?Object.is:LS;function al(t,i){if(On(t,i))return!0;if(typeof t!="object"||t===null||typeof i!="object"||i===null)return!1;var a=Object.keys(t),l=Object.keys(i);if(a.length!==l.length)return!1;for(l=0;l<a.length;l++){var h=a[l];if(!Rt.call(i,h)||!On(t[h],i[h]))return!1}return!0}function Ng(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Og(t,i){var a=Ng(t);t=0;for(var l;a;){if(a.nodeType===3){if(l=t+a.textContent.length,t<=i&&l>=i)return{node:a,offset:i-t};t=l}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=Ng(a)}}function Mg(t,i){return t&&i?t===i?!0:t&&t.nodeType===3?!1:i&&i.nodeType===3?Mg(t,i.parentNode):"contains"in t?t.contains(i):t.compareDocumentPosition?!!(t.compareDocumentPosition(i)&16):!1:!1}function Vg(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var i=Oi(t.document);i instanceof t.HTMLIFrameElement;){try{var a=typeof i.contentWindow.location.href=="string"}catch{a=!1}if(a)t=i.contentWindow;else break;i=Oi(t.document)}return i}function If(t){var i=t&&t.nodeName&&t.nodeName.toLowerCase();return i&&(i==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||i==="textarea"||t.contentEditable==="true")}var jS=$n&&"documentMode"in document&&11>=document.documentMode,Na=null,Df=null,ol=null,Nf=!1;function kg(t,i,a){var l=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;Nf||Na==null||Na!==Oi(l)||(l=Na,"selectionStart"in l&&If(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),ol&&al(ol,l)||(ol=l,l=Gc(Df,"onSelect"),0<l.length&&(i=new ki("onSelect","select",null,i,a),t.push({event:i,listeners:l}),i.target=Na)))}function qs(t,i){var a={};return a[t.toLowerCase()]=i.toLowerCase(),a["Webkit"+t]="webkit"+i,a["Moz"+t]="moz"+i,a}var Oa={animationend:qs("Animation","AnimationEnd"),animationiteration:qs("Animation","AnimationIteration"),animationstart:qs("Animation","AnimationStart"),transitionrun:qs("Transition","TransitionRun"),transitionstart:qs("Transition","TransitionStart"),transitioncancel:qs("Transition","TransitionCancel"),transitionend:qs("Transition","TransitionEnd")},Of={},Pg={};$n&&(Pg=document.createElement("div").style,"AnimationEvent"in window||(delete Oa.animationend.animation,delete Oa.animationiteration.animation,delete Oa.animationstart.animation),"TransitionEvent"in window||delete Oa.transitionend.transition);function Hs(t){if(Of[t])return Of[t];if(!Oa[t])return t;var i=Oa[t],a;for(a in i)if(i.hasOwnProperty(a)&&a in Pg)return Of[t]=i[a];return t}var Lg=Hs("animationend"),jg=Hs("animationiteration"),Ug=Hs("animationstart"),US=Hs("transitionrun"),zS=Hs("transitionstart"),BS=Hs("transitioncancel"),zg=Hs("transitionend"),Bg=new Map,Mf="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Mf.push("scrollEnd");function mi(t,i){Bg.set(t,i),Di(i,[t])}var rc=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var i=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(i))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)},Kn=[],Ma=0,Vf=0;function sc(){for(var t=Ma,i=Vf=Ma=0;i<t;){var a=Kn[i];Kn[i++]=null;var l=Kn[i];Kn[i++]=null;var h=Kn[i];Kn[i++]=null;var d=Kn[i];if(Kn[i++]=null,l!==null&&h!==null){var v=l.pending;v===null?h.next=h:(h.next=v.next,v.next=h),l.pending=h}d!==0&&qg(a,h,d)}}function ac(t,i,a,l){Kn[Ma++]=t,Kn[Ma++]=i,Kn[Ma++]=a,Kn[Ma++]=l,Vf|=l,t.lanes|=l,t=t.alternate,t!==null&&(t.lanes|=l)}function kf(t,i,a,l){return ac(t,i,a,l),oc(t)}function Fs(t,i){return ac(t,null,null,i),oc(t)}function qg(t,i,a){t.lanes|=a;var l=t.alternate;l!==null&&(l.lanes|=a);for(var h=!1,d=t.return;d!==null;)d.childLanes|=a,l=d.alternate,l!==null&&(l.childLanes|=a),d.tag===22&&(t=d.stateNode,t===null||t._visibility&1||(h=!0)),t=d,d=d.return;return t.tag===3?(d=t.stateNode,h&&i!==null&&(h=31-Et(a),t=d.hiddenUpdates,l=t[h],l===null?t[h]=[i]:l.push(i),i.lane=a|536870912),d):null}function oc(t){if(50<Il)throw Il=0,Fd=null,Error(s(185));for(var i=t.return;i!==null;)t=i,i=t.return;return t.tag===3?t.stateNode:null}var Va={};function qS(t,i,a,l){this.tag=t,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Mn(t,i,a,l){return new qS(t,i,a,l)}function Pf(t){return t=t.prototype,!(!t||!t.isReactComponent)}function ir(t,i){var a=t.alternate;return a===null?(a=Mn(t.tag,i,t.key,t.mode),a.elementType=t.elementType,a.type=t.type,a.stateNode=t.stateNode,a.alternate=t,t.alternate=a):(a.pendingProps=i,a.type=t.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=t.flags&65011712,a.childLanes=t.childLanes,a.lanes=t.lanes,a.child=t.child,a.memoizedProps=t.memoizedProps,a.memoizedState=t.memoizedState,a.updateQueue=t.updateQueue,i=t.dependencies,a.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},a.sibling=t.sibling,a.index=t.index,a.ref=t.ref,a.refCleanup=t.refCleanup,a}function Hg(t,i){t.flags&=65011714;var a=t.alternate;return a===null?(t.childLanes=0,t.lanes=i,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=a.childLanes,t.lanes=a.lanes,t.child=a.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=a.memoizedProps,t.memoizedState=a.memoizedState,t.updateQueue=a.updateQueue,t.type=a.type,i=a.dependencies,t.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),t}function lc(t,i,a,l,h,d){var v=0;if(l=t,typeof t=="function")Pf(t)&&(v=1);else if(typeof t=="string")v=$1(t,a,fe.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case R:return t=Mn(31,a,i,h),t.elementType=R,t.lanes=d,t;case q:return Gs(a.children,h,d,i);case z:v=8,h|=24;break;case $:return t=Mn(12,a,i,h|2),t.elementType=$,t.lanes=d,t;case _e:return t=Mn(13,a,i,h),t.elementType=_e,t.lanes=d,t;case Te:return t=Mn(19,a,i,h),t.elementType=Te,t.lanes=d,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Z:v=10;break e;case X:v=9;break e;case pe:v=11;break e;case D:v=14;break e;case I:v=16,l=null;break e}v=29,a=Error(s(130,t===null?"null":typeof t,"")),l=null}return i=Mn(v,a,i,h),i.elementType=t,i.type=l,i.lanes=d,i}function Gs(t,i,a,l){return t=Mn(7,t,l,i),t.lanes=a,t}function Lf(t,i,a){return t=Mn(6,t,null,i),t.lanes=a,t}function Fg(t){var i=Mn(18,null,null,0);return i.stateNode=t,i}function jf(t,i,a){return i=Mn(4,t.children!==null?t.children:[],t.key,i),i.lanes=a,i.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},i}var Gg=new WeakMap;function Xn(t,i){if(typeof t=="object"&&t!==null){var a=Gg.get(t);return a!==void 0?a:(i={value:t,source:i,stack:jo(i)},Gg.set(t,i),i)}return{value:t,source:i,stack:jo(i)}}var ka=[],Pa=0,uc=null,ll=0,Wn=[],Jn=0,Ur=null,Ui=1,zi="";function rr(t,i){ka[Pa++]=ll,ka[Pa++]=uc,uc=t,ll=i}function Qg(t,i,a){Wn[Jn++]=Ui,Wn[Jn++]=zi,Wn[Jn++]=Ur,Ur=t;var l=Ui;t=zi;var h=32-Et(l)-1;l&=~(1<<h),a+=1;var d=32-Et(i)+h;if(30<d){var v=h-h%5;d=(l&(1<<v)-1).toString(32),l>>=v,h-=v,Ui=1<<32-Et(i)+h|a<<h|l,zi=d+t}else Ui=1<<d|a<<h|l,zi=t}function Uf(t){t.return!==null&&(rr(t,1),Qg(t,1,0))}function zf(t){for(;t===uc;)uc=ka[--Pa],ka[Pa]=null,ll=ka[--Pa],ka[Pa]=null;for(;t===Ur;)Ur=Wn[--Jn],Wn[Jn]=null,zi=Wn[--Jn],Wn[Jn]=null,Ui=Wn[--Jn],Wn[Jn]=null}function $g(t,i){Wn[Jn++]=Ui,Wn[Jn++]=zi,Wn[Jn++]=Ur,Ui=i.id,zi=i.overflow,Ur=t}var Jt=null,ut=null,Ge=!1,zr=null,Zn=!1,Bf=Error(s(519));function Br(t){var i=Error(s(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw ul(Xn(i,t)),Bf}function Yg(t){var i=t.stateNode,a=t.type,l=t.memoizedProps;switch(i[xt]=t,i[Ft]=l,a){case"dialog":je("cancel",i),je("close",i);break;case"iframe":case"object":case"embed":je("load",i);break;case"video":case"audio":for(a=0;a<Nl.length;a++)je(Nl[a],i);break;case"source":je("error",i);break;case"img":case"image":case"link":je("error",i),je("load",i);break;case"details":je("toggle",i);break;case"input":je("invalid",i),qu(i,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0);break;case"select":je("invalid",i);break;case"textarea":je("invalid",i),Or(i,l.value,l.defaultValue,l.children)}a=l.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||i.textContent===""+a||l.suppressHydrationWarning===!0||h_(i.textContent,a)?(l.popover!=null&&(je("beforetoggle",i),je("toggle",i)),l.onScroll!=null&&je("scroll",i),l.onScrollEnd!=null&&je("scrollend",i),l.onClick!=null&&(i.onclick=ui),i=!0):i=!1,i||Br(t,!0)}function Kg(t){for(Jt=t.return;Jt;)switch(Jt.tag){case 5:case 31:case 13:Zn=!1;return;case 27:case 3:Zn=!0;return;default:Jt=Jt.return}}function La(t){if(t!==Jt)return!1;if(!Ge)return Kg(t),Ge=!0,!1;var i=t.tag,a;if((a=i!==3&&i!==27)&&((a=i===5)&&(a=t.type,a=!(a!=="form"&&a!=="button")||sm(t.type,t.memoizedProps)),a=!a),a&&ut&&Br(t),Kg(t),i===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(s(317));ut=E_(t)}else if(i===31){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(s(317));ut=E_(t)}else i===27?(i=ut,ts(t.type)?(t=cm,cm=null,ut=t):ut=i):ut=Jt?ti(t.stateNode.nextSibling):null;return!0}function Qs(){ut=Jt=null,Ge=!1}function qf(){var t=zr;return t!==null&&(wn===null?wn=t:wn.push.apply(wn,t),zr=null),t}function ul(t){zr===null?zr=[t]:zr.push(t)}var Hf=P(null),$s=null,sr=null;function qr(t,i,a){le(Hf,i._currentValue),i._currentValue=a}function ar(t){t._currentValue=Hf.current,J(Hf)}function Ff(t,i,a){for(;t!==null;){var l=t.alternate;if((t.childLanes&i)!==i?(t.childLanes|=i,l!==null&&(l.childLanes|=i)):l!==null&&(l.childLanes&i)!==i&&(l.childLanes|=i),t===a)break;t=t.return}}function Gf(t,i,a,l){var h=t.child;for(h!==null&&(h.return=t);h!==null;){var d=h.dependencies;if(d!==null){var v=h.child;d=d.firstContext;e:for(;d!==null;){var S=d;d=h;for(var M=0;M<i.length;M++)if(S.context===i[M]){d.lanes|=a,S=d.alternate,S!==null&&(S.lanes|=a),Ff(d.return,a,t),l||(v=null);break e}d=S.next}}else if(h.tag===18){if(v=h.return,v===null)throw Error(s(341));v.lanes|=a,d=v.alternate,d!==null&&(d.lanes|=a),Ff(v,a,t),v=null}else v=h.child;if(v!==null)v.return=h;else for(v=h;v!==null;){if(v===t){v=null;break}if(h=v.sibling,h!==null){h.return=v.return,v=h;break}v=v.return}h=v}}function ja(t,i,a,l){t=null;for(var h=i,d=!1;h!==null;){if(!d){if((h.flags&524288)!==0)d=!0;else if((h.flags&262144)!==0)break}if(h.tag===10){var v=h.alternate;if(v===null)throw Error(s(387));if(v=v.memoizedProps,v!==null){var S=h.type;On(h.pendingProps.value,v.value)||(t!==null?t.push(S):t=[S])}}else if(h===Ce.current){if(v=h.alternate,v===null)throw Error(s(387));v.memoizedState.memoizedState!==h.memoizedState.memoizedState&&(t!==null?t.push(Pl):t=[Pl])}h=h.return}t!==null&&Gf(i,t,a,l),i.flags|=262144}function cc(t){for(t=t.firstContext;t!==null;){if(!On(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function Ys(t){$s=t,sr=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function Zt(t){return Xg($s,t)}function hc(t,i){return $s===null&&Ys(t),Xg(t,i)}function Xg(t,i){var a=i._currentValue;if(i={context:i,memoizedValue:a,next:null},sr===null){if(t===null)throw Error(s(308));sr=i,t.dependencies={lanes:0,firstContext:i},t.flags|=524288}else sr=sr.next=i;return a}var HS=typeof AbortController<"u"?AbortController:function(){var t=[],i=this.signal={aborted:!1,addEventListener:function(a,l){t.push(l)}};this.abort=function(){i.aborted=!0,t.forEach(function(a){return a()})}},FS=r.unstable_scheduleCallback,GS=r.unstable_NormalPriority,Nt={$$typeof:Z,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Qf(){return{controller:new HS,data:new Map,refCount:0}}function cl(t){t.refCount--,t.refCount===0&&FS(GS,function(){t.controller.abort()})}var hl=null,$f=0,Ua=0,za=null;function QS(t,i){if(hl===null){var a=hl=[];$f=0,Ua=Xd(),za={status:"pending",value:void 0,then:function(l){a.push(l)}}}return $f++,i.then(Wg,Wg),i}function Wg(){if(--$f===0&&hl!==null){za!==null&&(za.status="fulfilled");var t=hl;hl=null,Ua=0,za=null;for(var i=0;i<t.length;i++)(0,t[i])()}}function $S(t,i){var a=[],l={status:"pending",value:null,reason:null,then:function(h){a.push(h)}};return t.then(function(){l.status="fulfilled",l.value=i;for(var h=0;h<a.length;h++)(0,a[h])(i)},function(h){for(l.status="rejected",l.reason=h,h=0;h<a.length;h++)(0,a[h])(void 0)}),l}var Jg=B.S;B.S=function(t,i){kv=pn(),typeof i=="object"&&i!==null&&typeof i.then=="function"&&QS(t,i),Jg!==null&&Jg(t,i)};var Ks=P(null);function Yf(){var t=Ks.current;return t!==null?t:lt.pooledCache}function fc(t,i){i===null?le(Ks,Ks.current):le(Ks,i.pool)}function Zg(){var t=Yf();return t===null?null:{parent:Nt._currentValue,pool:t}}var Ba=Error(s(460)),Kf=Error(s(474)),dc=Error(s(542)),mc={then:function(){}};function ey(t){return t=t.status,t==="fulfilled"||t==="rejected"}function ty(t,i,a){switch(a=t[a],a===void 0?t.push(i):a!==i&&(i.then(ui,ui),i=a),i.status){case"fulfilled":return i.value;case"rejected":throw t=i.reason,iy(t),t;default:if(typeof i.status=="string")i.then(ui,ui);else{if(t=lt,t!==null&&100<t.shellSuspendCounter)throw Error(s(482));t=i,t.status="pending",t.then(function(l){if(i.status==="pending"){var h=i;h.status="fulfilled",h.value=l}},function(l){if(i.status==="pending"){var h=i;h.status="rejected",h.reason=l}})}switch(i.status){case"fulfilled":return i.value;case"rejected":throw t=i.reason,iy(t),t}throw Ws=i,Ba}}function Xs(t){try{var i=t._init;return i(t._payload)}catch(a){throw a!==null&&typeof a=="object"&&typeof a.then=="function"?(Ws=a,Ba):a}}var Ws=null;function ny(){if(Ws===null)throw Error(s(459));var t=Ws;return Ws=null,t}function iy(t){if(t===Ba||t===dc)throw Error(s(483))}var qa=null,fl=0;function pc(t){var i=fl;return fl+=1,qa===null&&(qa=[]),ty(qa,t,i)}function dl(t,i){i=i.props.ref,t.ref=i!==void 0?i:null}function gc(t,i){throw i.$$typeof===C?Error(s(525)):(t=Object.prototype.toString.call(i),Error(s(31,t==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":t)))}function ry(t){function i(U,j){if(t){var F=U.deletions;F===null?(U.deletions=[j],U.flags|=16):F.push(j)}}function a(U,j){if(!t)return null;for(;j!==null;)i(U,j),j=j.sibling;return null}function l(U){for(var j=new Map;U!==null;)U.key!==null?j.set(U.key,U):j.set(U.index,U),U=U.sibling;return j}function h(U,j){return U=ir(U,j),U.index=0,U.sibling=null,U}function d(U,j,F){return U.index=F,t?(F=U.alternate,F!==null?(F=F.index,F<j?(U.flags|=67108866,j):F):(U.flags|=67108866,j)):(U.flags|=1048576,j)}function v(U){return t&&U.alternate===null&&(U.flags|=67108866),U}function S(U,j,F,ie){return j===null||j.tag!==6?(j=Lf(F,U.mode,ie),j.return=U,j):(j=h(j,F),j.return=U,j)}function M(U,j,F,ie){var be=F.type;return be===q?ee(U,j,F.props.children,ie,F.key):j!==null&&(j.elementType===be||typeof be=="object"&&be!==null&&be.$$typeof===I&&Xs(be)===j.type)?(j=h(j,F.props),dl(j,F),j.return=U,j):(j=lc(F.type,F.key,F.props,null,U.mode,ie),dl(j,F),j.return=U,j)}function G(U,j,F,ie){return j===null||j.tag!==4||j.stateNode.containerInfo!==F.containerInfo||j.stateNode.implementation!==F.implementation?(j=jf(F,U.mode,ie),j.return=U,j):(j=h(j,F.children||[]),j.return=U,j)}function ee(U,j,F,ie,be){return j===null||j.tag!==7?(j=Gs(F,U.mode,ie,be),j.return=U,j):(j=h(j,F),j.return=U,j)}function re(U,j,F){if(typeof j=="string"&&j!==""||typeof j=="number"||typeof j=="bigint")return j=Lf(""+j,U.mode,F),j.return=U,j;if(typeof j=="object"&&j!==null){switch(j.$$typeof){case O:return F=lc(j.type,j.key,j.props,null,U.mode,F),dl(F,j),F.return=U,F;case L:return j=jf(j,U.mode,F),j.return=U,j;case I:return j=Xs(j),re(U,j,F)}if(ce(j)||x(j))return j=Gs(j,U.mode,F,null),j.return=U,j;if(typeof j.then=="function")return re(U,pc(j),F);if(j.$$typeof===Z)return re(U,hc(U,j),F);gc(U,j)}return null}function Q(U,j,F,ie){var be=j!==null?j.key:null;if(typeof F=="string"&&F!==""||typeof F=="number"||typeof F=="bigint")return be!==null?null:S(U,j,""+F,ie);if(typeof F=="object"&&F!==null){switch(F.$$typeof){case O:return F.key===be?M(U,j,F,ie):null;case L:return F.key===be?G(U,j,F,ie):null;case I:return F=Xs(F),Q(U,j,F,ie)}if(ce(F)||x(F))return be!==null?null:ee(U,j,F,ie,null);if(typeof F.then=="function")return Q(U,j,pc(F),ie);if(F.$$typeof===Z)return Q(U,j,hc(U,F),ie);gc(U,F)}return null}function K(U,j,F,ie,be){if(typeof ie=="string"&&ie!==""||typeof ie=="number"||typeof ie=="bigint")return U=U.get(F)||null,S(j,U,""+ie,be);if(typeof ie=="object"&&ie!==null){switch(ie.$$typeof){case O:return U=U.get(ie.key===null?F:ie.key)||null,M(j,U,ie,be);case L:return U=U.get(ie.key===null?F:ie.key)||null,G(j,U,ie,be);case I:return ie=Xs(ie),K(U,j,F,ie,be)}if(ce(ie)||x(ie))return U=U.get(F)||null,ee(j,U,ie,be,null);if(typeof ie.then=="function")return K(U,j,F,pc(ie),be);if(ie.$$typeof===Z)return K(U,j,F,hc(j,ie),be);gc(j,ie)}return null}function ye(U,j,F,ie){for(var be=null,Ke=null,ve=j,ke=j=0,ze=null;ve!==null&&ke<F.length;ke++){ve.index>ke?(ze=ve,ve=null):ze=ve.sibling;var Xe=Q(U,ve,F[ke],ie);if(Xe===null){ve===null&&(ve=ze);break}t&&ve&&Xe.alternate===null&&i(U,ve),j=d(Xe,j,ke),Ke===null?be=Xe:Ke.sibling=Xe,Ke=Xe,ve=ze}if(ke===F.length)return a(U,ve),Ge&&rr(U,ke),be;if(ve===null){for(;ke<F.length;ke++)ve=re(U,F[ke],ie),ve!==null&&(j=d(ve,j,ke),Ke===null?be=ve:Ke.sibling=ve,Ke=ve);return Ge&&rr(U,ke),be}for(ve=l(ve);ke<F.length;ke++)ze=K(ve,U,ke,F[ke],ie),ze!==null&&(t&&ze.alternate!==null&&ve.delete(ze.key===null?ke:ze.key),j=d(ze,j,ke),Ke===null?be=ze:Ke.sibling=ze,Ke=ze);return t&&ve.forEach(function(as){return i(U,as)}),Ge&&rr(U,ke),be}function Re(U,j,F,ie){if(F==null)throw Error(s(151));for(var be=null,Ke=null,ve=j,ke=j=0,ze=null,Xe=F.next();ve!==null&&!Xe.done;ke++,Xe=F.next()){ve.index>ke?(ze=ve,ve=null):ze=ve.sibling;var as=Q(U,ve,Xe.value,ie);if(as===null){ve===null&&(ve=ze);break}t&&ve&&as.alternate===null&&i(U,ve),j=d(as,j,ke),Ke===null?be=as:Ke.sibling=as,Ke=as,ve=ze}if(Xe.done)return a(U,ve),Ge&&rr(U,ke),be;if(ve===null){for(;!Xe.done;ke++,Xe=F.next())Xe=re(U,Xe.value,ie),Xe!==null&&(j=d(Xe,j,ke),Ke===null?be=Xe:Ke.sibling=Xe,Ke=Xe);return Ge&&rr(U,ke),be}for(ve=l(ve);!Xe.done;ke++,Xe=F.next())Xe=K(ve,U,ke,Xe.value,ie),Xe!==null&&(t&&Xe.alternate!==null&&ve.delete(Xe.key===null?ke:Xe.key),j=d(Xe,j,ke),Ke===null?be=Xe:Ke.sibling=Xe,Ke=Xe);return t&&ve.forEach(function(rA){return i(U,rA)}),Ge&&rr(U,ke),be}function at(U,j,F,ie){if(typeof F=="object"&&F!==null&&F.type===q&&F.key===null&&(F=F.props.children),typeof F=="object"&&F!==null){switch(F.$$typeof){case O:e:{for(var be=F.key;j!==null;){if(j.key===be){if(be=F.type,be===q){if(j.tag===7){a(U,j.sibling),ie=h(j,F.props.children),ie.return=U,U=ie;break e}}else if(j.elementType===be||typeof be=="object"&&be!==null&&be.$$typeof===I&&Xs(be)===j.type){a(U,j.sibling),ie=h(j,F.props),dl(ie,F),ie.return=U,U=ie;break e}a(U,j);break}else i(U,j);j=j.sibling}F.type===q?(ie=Gs(F.props.children,U.mode,ie,F.key),ie.return=U,U=ie):(ie=lc(F.type,F.key,F.props,null,U.mode,ie),dl(ie,F),ie.return=U,U=ie)}return v(U);case L:e:{for(be=F.key;j!==null;){if(j.key===be)if(j.tag===4&&j.stateNode.containerInfo===F.containerInfo&&j.stateNode.implementation===F.implementation){a(U,j.sibling),ie=h(j,F.children||[]),ie.return=U,U=ie;break e}else{a(U,j);break}else i(U,j);j=j.sibling}ie=jf(F,U.mode,ie),ie.return=U,U=ie}return v(U);case I:return F=Xs(F),at(U,j,F,ie)}if(ce(F))return ye(U,j,F,ie);if(x(F)){if(be=x(F),typeof be!="function")throw Error(s(150));return F=be.call(F),Re(U,j,F,ie)}if(typeof F.then=="function")return at(U,j,pc(F),ie);if(F.$$typeof===Z)return at(U,j,hc(U,F),ie);gc(U,F)}return typeof F=="string"&&F!==""||typeof F=="number"||typeof F=="bigint"?(F=""+F,j!==null&&j.tag===6?(a(U,j.sibling),ie=h(j,F),ie.return=U,U=ie):(a(U,j),ie=Lf(F,U.mode,ie),ie.return=U,U=ie),v(U)):a(U,j)}return function(U,j,F,ie){try{fl=0;var be=at(U,j,F,ie);return qa=null,be}catch(ve){if(ve===Ba||ve===dc)throw ve;var Ke=Mn(29,ve,null,U.mode);return Ke.lanes=ie,Ke.return=U,Ke}}}var Js=ry(!0),sy=ry(!1),Hr=!1;function Xf(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Wf(t,i){t=t.updateQueue,i.updateQueue===t&&(i.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function Fr(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function Gr(t,i,a){var l=t.updateQueue;if(l===null)return null;if(l=l.shared,(Ze&2)!==0){var h=l.pending;return h===null?i.next=i:(i.next=h.next,h.next=i),l.pending=i,i=oc(t),qg(t,null,a),i}return ac(t,l,i,a),oc(t)}function ml(t,i,a){if(i=i.updateQueue,i!==null&&(i=i.shared,(a&4194048)!==0)){var l=i.lanes;l&=t.pendingLanes,a|=l,i.lanes=a,Bo(t,a)}}function Jf(t,i){var a=t.updateQueue,l=t.alternate;if(l!==null&&(l=l.updateQueue,a===l)){var h=null,d=null;if(a=a.firstBaseUpdate,a!==null){do{var v={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};d===null?h=d=v:d=d.next=v,a=a.next}while(a!==null);d===null?h=d=i:d=d.next=i}else h=d=i;a={baseState:l.baseState,firstBaseUpdate:h,lastBaseUpdate:d,shared:l.shared,callbacks:l.callbacks},t.updateQueue=a;return}t=a.lastBaseUpdate,t===null?a.firstBaseUpdate=i:t.next=i,a.lastBaseUpdate=i}var Zf=!1;function pl(){if(Zf){var t=za;if(t!==null)throw t}}function gl(t,i,a,l){Zf=!1;var h=t.updateQueue;Hr=!1;var d=h.firstBaseUpdate,v=h.lastBaseUpdate,S=h.shared.pending;if(S!==null){h.shared.pending=null;var M=S,G=M.next;M.next=null,v===null?d=G:v.next=G,v=M;var ee=t.alternate;ee!==null&&(ee=ee.updateQueue,S=ee.lastBaseUpdate,S!==v&&(S===null?ee.firstBaseUpdate=G:S.next=G,ee.lastBaseUpdate=M))}if(d!==null){var re=h.baseState;v=0,ee=G=M=null,S=d;do{var Q=S.lane&-536870913,K=Q!==S.lane;if(K?(Ue&Q)===Q:(l&Q)===Q){Q!==0&&Q===Ua&&(Zf=!0),ee!==null&&(ee=ee.next={lane:0,tag:S.tag,payload:S.payload,callback:null,next:null});e:{var ye=t,Re=S;Q=i;var at=a;switch(Re.tag){case 1:if(ye=Re.payload,typeof ye=="function"){re=ye.call(at,re,Q);break e}re=ye;break e;case 3:ye.flags=ye.flags&-65537|128;case 0:if(ye=Re.payload,Q=typeof ye=="function"?ye.call(at,re,Q):ye,Q==null)break e;re=T({},re,Q);break e;case 2:Hr=!0}}Q=S.callback,Q!==null&&(t.flags|=64,K&&(t.flags|=8192),K=h.callbacks,K===null?h.callbacks=[Q]:K.push(Q))}else K={lane:Q,tag:S.tag,payload:S.payload,callback:S.callback,next:null},ee===null?(G=ee=K,M=re):ee=ee.next=K,v|=Q;if(S=S.next,S===null){if(S=h.shared.pending,S===null)break;K=S,S=K.next,K.next=null,h.lastBaseUpdate=K,h.shared.pending=null}}while(!0);ee===null&&(M=re),h.baseState=M,h.firstBaseUpdate=G,h.lastBaseUpdate=ee,d===null&&(h.shared.lanes=0),Xr|=v,t.lanes=v,t.memoizedState=re}}function ay(t,i){if(typeof t!="function")throw Error(s(191,t));t.call(i)}function oy(t,i){var a=t.callbacks;if(a!==null)for(t.callbacks=null,t=0;t<a.length;t++)ay(a[t],i)}var Ha=P(null),yc=P(0);function ly(t,i){t=pr,le(yc,t),le(Ha,i),pr=t|i.baseLanes}function ed(){le(yc,pr),le(Ha,Ha.current)}function td(){pr=yc.current,J(Ha),J(yc)}var Vn=P(null),ei=null;function Qr(t){var i=t.alternate;le(bt,bt.current&1),le(Vn,t),ei===null&&(i===null||Ha.current!==null||i.memoizedState!==null)&&(ei=t)}function nd(t){le(bt,bt.current),le(Vn,t),ei===null&&(ei=t)}function uy(t){t.tag===22?(le(bt,bt.current),le(Vn,t),ei===null&&(ei=t)):$r()}function $r(){le(bt,bt.current),le(Vn,Vn.current)}function kn(t){J(Vn),ei===t&&(ei=null),J(bt)}var bt=P(0);function vc(t){for(var i=t;i!==null;){if(i.tag===13){var a=i.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||lm(a)||um(a)))return i}else if(i.tag===19&&(i.memoizedProps.revealOrder==="forwards"||i.memoizedProps.revealOrder==="backwards"||i.memoizedProps.revealOrder==="unstable_legacy-backwards"||i.memoizedProps.revealOrder==="together")){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===t)break;for(;i.sibling===null;){if(i.return===null||i.return===t)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var or=0,Ve=null,rt=null,Ot=null,_c=!1,Fa=!1,Zs=!1,Ec=0,yl=0,Ga=null,YS=0;function yt(){throw Error(s(321))}function id(t,i){if(i===null)return!1;for(var a=0;a<i.length&&a<t.length;a++)if(!On(t[a],i[a]))return!1;return!0}function rd(t,i,a,l,h,d){return or=d,Ve=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,B.H=t===null||t.memoizedState===null?Qy:_d,Zs=!1,d=a(l,h),Zs=!1,Fa&&(d=hy(i,a,l,h)),cy(t),d}function cy(t){B.H=El;var i=rt!==null&&rt.next!==null;if(or=0,Ot=rt=Ve=null,_c=!1,yl=0,Ga=null,i)throw Error(s(300));t===null||Mt||(t=t.dependencies,t!==null&&cc(t)&&(Mt=!0))}function hy(t,i,a,l){Ve=t;var h=0;do{if(Fa&&(Ga=null),yl=0,Fa=!1,25<=h)throw Error(s(301));if(h+=1,Ot=rt=null,t.updateQueue!=null){var d=t.updateQueue;d.lastEffect=null,d.events=null,d.stores=null,d.memoCache!=null&&(d.memoCache.index=0)}B.H=$y,d=i(a,l)}while(Fa);return d}function KS(){var t=B.H,i=t.useState()[0];return i=typeof i.then=="function"?vl(i):i,t=t.useState()[0],(rt!==null?rt.memoizedState:null)!==t&&(Ve.flags|=1024),i}function sd(){var t=Ec!==0;return Ec=0,t}function ad(t,i,a){i.updateQueue=t.updateQueue,i.flags&=-2053,t.lanes&=~a}function od(t){if(_c){for(t=t.memoizedState;t!==null;){var i=t.queue;i!==null&&(i.pending=null),t=t.next}_c=!1}or=0,Ot=rt=Ve=null,Fa=!1,yl=Ec=0,Ga=null}function yn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ot===null?Ve.memoizedState=Ot=t:Ot=Ot.next=t,Ot}function St(){if(rt===null){var t=Ve.alternate;t=t!==null?t.memoizedState:null}else t=rt.next;var i=Ot===null?Ve.memoizedState:Ot.next;if(i!==null)Ot=i,rt=t;else{if(t===null)throw Ve.alternate===null?Error(s(467)):Error(s(310));rt=t,t={memoizedState:rt.memoizedState,baseState:rt.baseState,baseQueue:rt.baseQueue,queue:rt.queue,next:null},Ot===null?Ve.memoizedState=Ot=t:Ot=Ot.next=t}return Ot}function Tc(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function vl(t){var i=yl;return yl+=1,Ga===null&&(Ga=[]),t=ty(Ga,t,i),i=Ve,(Ot===null?i.memoizedState:Ot.next)===null&&(i=i.alternate,B.H=i===null||i.memoizedState===null?Qy:_d),t}function bc(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return vl(t);if(t.$$typeof===Z)return Zt(t)}throw Error(s(438,String(t)))}function ld(t){var i=null,a=Ve.updateQueue;if(a!==null&&(i=a.memoCache),i==null){var l=Ve.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(i={data:l.data.map(function(h){return h.slice()}),index:0})))}if(i==null&&(i={data:[],index:0}),a===null&&(a=Tc(),Ve.updateQueue=a),a.memoCache=i,a=i.data[i.index],a===void 0)for(a=i.data[i.index]=Array(t),l=0;l<t;l++)a[l]=N;return i.index++,a}function lr(t,i){return typeof i=="function"?i(t):i}function Sc(t){var i=St();return ud(i,rt,t)}function ud(t,i,a){var l=t.queue;if(l===null)throw Error(s(311));l.lastRenderedReducer=a;var h=t.baseQueue,d=l.pending;if(d!==null){if(h!==null){var v=h.next;h.next=d.next,d.next=v}i.baseQueue=h=d,l.pending=null}if(d=t.baseState,h===null)t.memoizedState=d;else{i=h.next;var S=v=null,M=null,G=i,ee=!1;do{var re=G.lane&-536870913;if(re!==G.lane?(Ue&re)===re:(or&re)===re){var Q=G.revertLane;if(Q===0)M!==null&&(M=M.next={lane:0,revertLane:0,gesture:null,action:G.action,hasEagerState:G.hasEagerState,eagerState:G.eagerState,next:null}),re===Ua&&(ee=!0);else if((or&Q)===Q){G=G.next,Q===Ua&&(ee=!0);continue}else re={lane:0,revertLane:G.revertLane,gesture:null,action:G.action,hasEagerState:G.hasEagerState,eagerState:G.eagerState,next:null},M===null?(S=M=re,v=d):M=M.next=re,Ve.lanes|=Q,Xr|=Q;re=G.action,Zs&&a(d,re),d=G.hasEagerState?G.eagerState:a(d,re)}else Q={lane:re,revertLane:G.revertLane,gesture:G.gesture,action:G.action,hasEagerState:G.hasEagerState,eagerState:G.eagerState,next:null},M===null?(S=M=Q,v=d):M=M.next=Q,Ve.lanes|=re,Xr|=re;G=G.next}while(G!==null&&G!==i);if(M===null?v=d:M.next=S,!On(d,t.memoizedState)&&(Mt=!0,ee&&(a=za,a!==null)))throw a;t.memoizedState=d,t.baseState=v,t.baseQueue=M,l.lastRenderedState=d}return h===null&&(l.lanes=0),[t.memoizedState,l.dispatch]}function cd(t){var i=St(),a=i.queue;if(a===null)throw Error(s(311));a.lastRenderedReducer=t;var l=a.dispatch,h=a.pending,d=i.memoizedState;if(h!==null){a.pending=null;var v=h=h.next;do d=t(d,v.action),v=v.next;while(v!==h);On(d,i.memoizedState)||(Mt=!0),i.memoizedState=d,i.baseQueue===null&&(i.baseState=d),a.lastRenderedState=d}return[d,l]}function fy(t,i,a){var l=Ve,h=St(),d=Ge;if(d){if(a===void 0)throw Error(s(407));a=a()}else a=i();var v=!On((rt||h).memoizedState,a);if(v&&(h.memoizedState=a,Mt=!0),h=h.queue,dd(py.bind(null,l,h,t),[t]),h.getSnapshot!==i||v||Ot!==null&&Ot.memoizedState.tag&1){if(l.flags|=2048,Qa(9,{destroy:void 0},my.bind(null,l,h,a,i),null),lt===null)throw Error(s(349));d||(or&127)!==0||dy(l,i,a)}return a}function dy(t,i,a){t.flags|=16384,t={getSnapshot:i,value:a},i=Ve.updateQueue,i===null?(i=Tc(),Ve.updateQueue=i,i.stores=[t]):(a=i.stores,a===null?i.stores=[t]:a.push(t))}function my(t,i,a,l){i.value=a,i.getSnapshot=l,gy(i)&&yy(t)}function py(t,i,a){return a(function(){gy(i)&&yy(t)})}function gy(t){var i=t.getSnapshot;t=t.value;try{var a=i();return!On(t,a)}catch{return!0}}function yy(t){var i=Fs(t,2);i!==null&&Rn(i,t,2)}function hd(t){var i=yn();if(typeof t=="function"){var a=t;if(t=a(),Zs){Fn(!0);try{a()}finally{Fn(!1)}}}return i.memoizedState=i.baseState=t,i.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:lr,lastRenderedState:t},i}function vy(t,i,a,l){return t.baseState=a,ud(t,rt,typeof l=="function"?l:lr)}function XS(t,i,a,l,h){if(Rc(t))throw Error(s(485));if(t=i.action,t!==null){var d={payload:h,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(v){d.listeners.push(v)}};B.T!==null?a(!0):d.isTransition=!1,l(d),a=i.pending,a===null?(d.next=i.pending=d,_y(i,d)):(d.next=a.next,i.pending=a.next=d)}}function _y(t,i){var a=i.action,l=i.payload,h=t.state;if(i.isTransition){var d=B.T,v={};B.T=v;try{var S=a(h,l),M=B.S;M!==null&&M(v,S),Ey(t,i,S)}catch(G){fd(t,i,G)}finally{d!==null&&v.types!==null&&(d.types=v.types),B.T=d}}else try{d=a(h,l),Ey(t,i,d)}catch(G){fd(t,i,G)}}function Ey(t,i,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(l){Ty(t,i,l)},function(l){return fd(t,i,l)}):Ty(t,i,a)}function Ty(t,i,a){i.status="fulfilled",i.value=a,by(i),t.state=a,i=t.pending,i!==null&&(a=i.next,a===i?t.pending=null:(a=a.next,i.next=a,_y(t,a)))}function fd(t,i,a){var l=t.pending;if(t.pending=null,l!==null){l=l.next;do i.status="rejected",i.reason=a,by(i),i=i.next;while(i!==l)}t.action=null}function by(t){t=t.listeners;for(var i=0;i<t.length;i++)(0,t[i])()}function Sy(t,i){return i}function Ay(t,i){if(Ge){var a=lt.formState;if(a!==null){e:{var l=Ve;if(Ge){if(ut){t:{for(var h=ut,d=Zn;h.nodeType!==8;){if(!d){h=null;break t}if(h=ti(h.nextSibling),h===null){h=null;break t}}d=h.data,h=d==="F!"||d==="F"?h:null}if(h){ut=ti(h.nextSibling),l=h.data==="F!";break e}}Br(l)}l=!1}l&&(i=a[0])}}return a=yn(),a.memoizedState=a.baseState=i,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Sy,lastRenderedState:i},a.queue=l,a=Hy.bind(null,Ve,l),l.dispatch=a,l=hd(!1),d=vd.bind(null,Ve,!1,l.queue),l=yn(),h={state:i,dispatch:null,action:t,pending:null},l.queue=h,a=XS.bind(null,Ve,h,d,a),h.dispatch=a,l.memoizedState=t,[i,a,!1]}function wy(t){var i=St();return Ry(i,rt,t)}function Ry(t,i,a){if(i=ud(t,i,Sy)[0],t=Sc(lr)[0],typeof i=="object"&&i!==null&&typeof i.then=="function")try{var l=vl(i)}catch(v){throw v===Ba?dc:v}else l=i;i=St();var h=i.queue,d=h.dispatch;return a!==i.memoizedState&&(Ve.flags|=2048,Qa(9,{destroy:void 0},WS.bind(null,h,a),null)),[l,d,t]}function WS(t,i){t.action=i}function Cy(t){var i=St(),a=rt;if(a!==null)return Ry(i,a,t);St(),i=i.memoizedState,a=St();var l=a.queue.dispatch;return a.memoizedState=t,[i,l,!1]}function Qa(t,i,a,l){return t={tag:t,create:a,deps:l,inst:i,next:null},i=Ve.updateQueue,i===null&&(i=Tc(),Ve.updateQueue=i),a=i.lastEffect,a===null?i.lastEffect=t.next=t:(l=a.next,a.next=t,t.next=l,i.lastEffect=t),t}function xy(){return St().memoizedState}function Ac(t,i,a,l){var h=yn();Ve.flags|=t,h.memoizedState=Qa(1|i,{destroy:void 0},a,l===void 0?null:l)}function wc(t,i,a,l){var h=St();l=l===void 0?null:l;var d=h.memoizedState.inst;rt!==null&&l!==null&&id(l,rt.memoizedState.deps)?h.memoizedState=Qa(i,d,a,l):(Ve.flags|=t,h.memoizedState=Qa(1|i,d,a,l))}function Iy(t,i){Ac(8390656,8,t,i)}function dd(t,i){wc(2048,8,t,i)}function JS(t){Ve.flags|=4;var i=Ve.updateQueue;if(i===null)i=Tc(),Ve.updateQueue=i,i.events=[t];else{var a=i.events;a===null?i.events=[t]:a.push(t)}}function Dy(t){var i=St().memoizedState;return JS({ref:i,nextImpl:t}),function(){if((Ze&2)!==0)throw Error(s(440));return i.impl.apply(void 0,arguments)}}function Ny(t,i){return wc(4,2,t,i)}function Oy(t,i){return wc(4,4,t,i)}function My(t,i){if(typeof i=="function"){t=t();var a=i(t);return function(){typeof a=="function"?a():i(null)}}if(i!=null)return t=t(),i.current=t,function(){i.current=null}}function Vy(t,i,a){a=a!=null?a.concat([t]):null,wc(4,4,My.bind(null,i,t),a)}function md(){}function ky(t,i){var a=St();i=i===void 0?null:i;var l=a.memoizedState;return i!==null&&id(i,l[1])?l[0]:(a.memoizedState=[t,i],t)}function Py(t,i){var a=St();i=i===void 0?null:i;var l=a.memoizedState;if(i!==null&&id(i,l[1]))return l[0];if(l=t(),Zs){Fn(!0);try{t()}finally{Fn(!1)}}return a.memoizedState=[l,i],l}function pd(t,i,a){return a===void 0||(or&1073741824)!==0&&(Ue&261930)===0?t.memoizedState=i:(t.memoizedState=a,t=Lv(),Ve.lanes|=t,Xr|=t,a)}function Ly(t,i,a,l){return On(a,i)?a:Ha.current!==null?(t=pd(t,a,l),On(t,i)||(Mt=!0),t):(or&42)===0||(or&1073741824)!==0&&(Ue&261930)===0?(Mt=!0,t.memoizedState=a):(t=Lv(),Ve.lanes|=t,Xr|=t,i)}function jy(t,i,a,l,h){var d=W.p;W.p=d!==0&&8>d?d:8;var v=B.T,S={};B.T=S,vd(t,!1,i,a);try{var M=h(),G=B.S;if(G!==null&&G(S,M),M!==null&&typeof M=="object"&&typeof M.then=="function"){var ee=$S(M,l);_l(t,i,ee,jn(t))}else _l(t,i,l,jn(t))}catch(re){_l(t,i,{then:function(){},status:"rejected",reason:re},jn())}finally{W.p=d,v!==null&&S.types!==null&&(v.types=S.types),B.T=v}}function ZS(){}function gd(t,i,a,l){if(t.tag!==5)throw Error(s(476));var h=Uy(t).queue;jy(t,h,i,te,a===null?ZS:function(){return zy(t),a(l)})}function Uy(t){var i=t.memoizedState;if(i!==null)return i;i={memoizedState:te,baseState:te,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:lr,lastRenderedState:te},next:null};var a={};return i.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:lr,lastRenderedState:a},next:null},t.memoizedState=i,t=t.alternate,t!==null&&(t.memoizedState=i),i}function zy(t){var i=Uy(t);i.next===null&&(i=t.alternate.memoizedState),_l(t,i.next.queue,{},jn())}function yd(){return Zt(Pl)}function By(){return St().memoizedState}function qy(){return St().memoizedState}function e1(t){for(var i=t.return;i!==null;){switch(i.tag){case 24:case 3:var a=jn();t=Fr(a);var l=Gr(i,t,a);l!==null&&(Rn(l,i,a),ml(l,i,a)),i={cache:Qf()},t.payload=i;return}i=i.return}}function t1(t,i,a){var l=jn();a={lane:l,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},Rc(t)?Fy(i,a):(a=kf(t,i,a,l),a!==null&&(Rn(a,t,l),Gy(a,i,l)))}function Hy(t,i,a){var l=jn();_l(t,i,a,l)}function _l(t,i,a,l){var h={lane:l,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null};if(Rc(t))Fy(i,h);else{var d=t.alternate;if(t.lanes===0&&(d===null||d.lanes===0)&&(d=i.lastRenderedReducer,d!==null))try{var v=i.lastRenderedState,S=d(v,a);if(h.hasEagerState=!0,h.eagerState=S,On(S,v))return ac(t,i,h,0),lt===null&&sc(),!1}catch{}if(a=kf(t,i,h,l),a!==null)return Rn(a,t,l),Gy(a,i,l),!0}return!1}function vd(t,i,a,l){if(l={lane:2,revertLane:Xd(),gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},Rc(t)){if(i)throw Error(s(479))}else i=kf(t,a,l,2),i!==null&&Rn(i,t,2)}function Rc(t){var i=t.alternate;return t===Ve||i!==null&&i===Ve}function Fy(t,i){Fa=_c=!0;var a=t.pending;a===null?i.next=i:(i.next=a.next,a.next=i),t.pending=i}function Gy(t,i,a){if((a&4194048)!==0){var l=i.lanes;l&=t.pendingLanes,a|=l,i.lanes=a,Bo(t,a)}}var El={readContext:Zt,use:bc,useCallback:yt,useContext:yt,useEffect:yt,useImperativeHandle:yt,useLayoutEffect:yt,useInsertionEffect:yt,useMemo:yt,useReducer:yt,useRef:yt,useState:yt,useDebugValue:yt,useDeferredValue:yt,useTransition:yt,useSyncExternalStore:yt,useId:yt,useHostTransitionStatus:yt,useFormState:yt,useActionState:yt,useOptimistic:yt,useMemoCache:yt,useCacheRefresh:yt};El.useEffectEvent=yt;var Qy={readContext:Zt,use:bc,useCallback:function(t,i){return yn().memoizedState=[t,i===void 0?null:i],t},useContext:Zt,useEffect:Iy,useImperativeHandle:function(t,i,a){a=a!=null?a.concat([t]):null,Ac(4194308,4,My.bind(null,i,t),a)},useLayoutEffect:function(t,i){return Ac(4194308,4,t,i)},useInsertionEffect:function(t,i){Ac(4,2,t,i)},useMemo:function(t,i){var a=yn();i=i===void 0?null:i;var l=t();if(Zs){Fn(!0);try{t()}finally{Fn(!1)}}return a.memoizedState=[l,i],l},useReducer:function(t,i,a){var l=yn();if(a!==void 0){var h=a(i);if(Zs){Fn(!0);try{a(i)}finally{Fn(!1)}}}else h=i;return l.memoizedState=l.baseState=h,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:h},l.queue=t,t=t.dispatch=t1.bind(null,Ve,t),[l.memoizedState,t]},useRef:function(t){var i=yn();return t={current:t},i.memoizedState=t},useState:function(t){t=hd(t);var i=t.queue,a=Hy.bind(null,Ve,i);return i.dispatch=a,[t.memoizedState,a]},useDebugValue:md,useDeferredValue:function(t,i){var a=yn();return pd(a,t,i)},useTransition:function(){var t=hd(!1);return t=jy.bind(null,Ve,t.queue,!0,!1),yn().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,i,a){var l=Ve,h=yn();if(Ge){if(a===void 0)throw Error(s(407));a=a()}else{if(a=i(),lt===null)throw Error(s(349));(Ue&127)!==0||dy(l,i,a)}h.memoizedState=a;var d={value:a,getSnapshot:i};return h.queue=d,Iy(py.bind(null,l,d,t),[t]),l.flags|=2048,Qa(9,{destroy:void 0},my.bind(null,l,d,a,i),null),a},useId:function(){var t=yn(),i=lt.identifierPrefix;if(Ge){var a=zi,l=Ui;a=(l&~(1<<32-Et(l)-1)).toString(32)+a,i="_"+i+"R_"+a,a=Ec++,0<a&&(i+="H"+a.toString(32)),i+="_"}else a=YS++,i="_"+i+"r_"+a.toString(32)+"_";return t.memoizedState=i},useHostTransitionStatus:yd,useFormState:Ay,useActionState:Ay,useOptimistic:function(t){var i=yn();i.memoizedState=i.baseState=t;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return i.queue=a,i=vd.bind(null,Ve,!0,a),a.dispatch=i,[t,i]},useMemoCache:ld,useCacheRefresh:function(){return yn().memoizedState=e1.bind(null,Ve)},useEffectEvent:function(t){var i=yn(),a={impl:t};return i.memoizedState=a,function(){if((Ze&2)!==0)throw Error(s(440));return a.impl.apply(void 0,arguments)}}},_d={readContext:Zt,use:bc,useCallback:ky,useContext:Zt,useEffect:dd,useImperativeHandle:Vy,useInsertionEffect:Ny,useLayoutEffect:Oy,useMemo:Py,useReducer:Sc,useRef:xy,useState:function(){return Sc(lr)},useDebugValue:md,useDeferredValue:function(t,i){var a=St();return Ly(a,rt.memoizedState,t,i)},useTransition:function(){var t=Sc(lr)[0],i=St().memoizedState;return[typeof t=="boolean"?t:vl(t),i]},useSyncExternalStore:fy,useId:By,useHostTransitionStatus:yd,useFormState:wy,useActionState:wy,useOptimistic:function(t,i){var a=St();return vy(a,rt,t,i)},useMemoCache:ld,useCacheRefresh:qy};_d.useEffectEvent=Dy;var $y={readContext:Zt,use:bc,useCallback:ky,useContext:Zt,useEffect:dd,useImperativeHandle:Vy,useInsertionEffect:Ny,useLayoutEffect:Oy,useMemo:Py,useReducer:cd,useRef:xy,useState:function(){return cd(lr)},useDebugValue:md,useDeferredValue:function(t,i){var a=St();return rt===null?pd(a,t,i):Ly(a,rt.memoizedState,t,i)},useTransition:function(){var t=cd(lr)[0],i=St().memoizedState;return[typeof t=="boolean"?t:vl(t),i]},useSyncExternalStore:fy,useId:By,useHostTransitionStatus:yd,useFormState:Cy,useActionState:Cy,useOptimistic:function(t,i){var a=St();return rt!==null?vy(a,rt,t,i):(a.baseState=t,[t,a.queue.dispatch])},useMemoCache:ld,useCacheRefresh:qy};$y.useEffectEvent=Dy;function Ed(t,i,a,l){i=t.memoizedState,a=a(l,i),a=a==null?i:T({},i,a),t.memoizedState=a,t.lanes===0&&(t.updateQueue.baseState=a)}var Td={enqueueSetState:function(t,i,a){t=t._reactInternals;var l=jn(),h=Fr(l);h.payload=i,a!=null&&(h.callback=a),i=Gr(t,h,l),i!==null&&(Rn(i,t,l),ml(i,t,l))},enqueueReplaceState:function(t,i,a){t=t._reactInternals;var l=jn(),h=Fr(l);h.tag=1,h.payload=i,a!=null&&(h.callback=a),i=Gr(t,h,l),i!==null&&(Rn(i,t,l),ml(i,t,l))},enqueueForceUpdate:function(t,i){t=t._reactInternals;var a=jn(),l=Fr(a);l.tag=2,i!=null&&(l.callback=i),i=Gr(t,l,a),i!==null&&(Rn(i,t,a),ml(i,t,a))}};function Yy(t,i,a,l,h,d,v){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(l,d,v):i.prototype&&i.prototype.isPureReactComponent?!al(a,l)||!al(h,d):!0}function Ky(t,i,a,l){t=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(a,l),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(a,l),i.state!==t&&Td.enqueueReplaceState(i,i.state,null)}function ea(t,i){var a=i;if("ref"in i){a={};for(var l in i)l!=="ref"&&(a[l]=i[l])}if(t=t.defaultProps){a===i&&(a=T({},a));for(var h in t)a[h]===void 0&&(a[h]=t[h])}return a}function Xy(t){rc(t)}function Wy(t){console.error(t)}function Jy(t){rc(t)}function Cc(t,i){try{var a=t.onUncaughtError;a(i.value,{componentStack:i.stack})}catch(l){setTimeout(function(){throw l})}}function Zy(t,i,a){try{var l=t.onCaughtError;l(a.value,{componentStack:a.stack,errorBoundary:i.tag===1?i.stateNode:null})}catch(h){setTimeout(function(){throw h})}}function bd(t,i,a){return a=Fr(a),a.tag=3,a.payload={element:null},a.callback=function(){Cc(t,i)},a}function ev(t){return t=Fr(t),t.tag=3,t}function tv(t,i,a,l){var h=a.type.getDerivedStateFromError;if(typeof h=="function"){var d=l.value;t.payload=function(){return h(d)},t.callback=function(){Zy(i,a,l)}}var v=a.stateNode;v!==null&&typeof v.componentDidCatch=="function"&&(t.callback=function(){Zy(i,a,l),typeof h!="function"&&(Wr===null?Wr=new Set([this]):Wr.add(this));var S=l.stack;this.componentDidCatch(l.value,{componentStack:S!==null?S:""})})}function n1(t,i,a,l,h){if(a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(i=a.alternate,i!==null&&ja(i,a,h,!0),a=Vn.current,a!==null){switch(a.tag){case 31:case 13:return ei===null?Uc():a.alternate===null&&vt===0&&(vt=3),a.flags&=-257,a.flags|=65536,a.lanes=h,l===mc?a.flags|=16384:(i=a.updateQueue,i===null?a.updateQueue=new Set([l]):i.add(l),$d(t,l,h)),!1;case 22:return a.flags|=65536,l===mc?a.flags|=16384:(i=a.updateQueue,i===null?(i={transitions:null,markerInstances:null,retryQueue:new Set([l])},a.updateQueue=i):(a=i.retryQueue,a===null?i.retryQueue=new Set([l]):a.add(l)),$d(t,l,h)),!1}throw Error(s(435,a.tag))}return $d(t,l,h),Uc(),!1}if(Ge)return i=Vn.current,i!==null?((i.flags&65536)===0&&(i.flags|=256),i.flags|=65536,i.lanes=h,l!==Bf&&(t=Error(s(422),{cause:l}),ul(Xn(t,a)))):(l!==Bf&&(i=Error(s(423),{cause:l}),ul(Xn(i,a))),t=t.current.alternate,t.flags|=65536,h&=-h,t.lanes|=h,l=Xn(l,a),h=bd(t.stateNode,l,h),Jf(t,h),vt!==4&&(vt=2)),!1;var d=Error(s(520),{cause:l});if(d=Xn(d,a),xl===null?xl=[d]:xl.push(d),vt!==4&&(vt=2),i===null)return!0;l=Xn(l,a),a=i;do{switch(a.tag){case 3:return a.flags|=65536,t=h&-h,a.lanes|=t,t=bd(a.stateNode,l,t),Jf(a,t),!1;case 1:if(i=a.type,d=a.stateNode,(a.flags&128)===0&&(typeof i.getDerivedStateFromError=="function"||d!==null&&typeof d.componentDidCatch=="function"&&(Wr===null||!Wr.has(d))))return a.flags|=65536,h&=-h,a.lanes|=h,h=ev(h),tv(h,t,a,l),Jf(a,h),!1}a=a.return}while(a!==null);return!1}var Sd=Error(s(461)),Mt=!1;function en(t,i,a,l){i.child=t===null?sy(i,null,a,l):Js(i,t.child,a,l)}function nv(t,i,a,l,h){a=a.render;var d=i.ref;if("ref"in l){var v={};for(var S in l)S!=="ref"&&(v[S]=l[S])}else v=l;return Ys(i),l=rd(t,i,a,v,d,h),S=sd(),t!==null&&!Mt?(ad(t,i,h),ur(t,i,h)):(Ge&&S&&Uf(i),i.flags|=1,en(t,i,l,h),i.child)}function iv(t,i,a,l,h){if(t===null){var d=a.type;return typeof d=="function"&&!Pf(d)&&d.defaultProps===void 0&&a.compare===null?(i.tag=15,i.type=d,rv(t,i,d,l,h)):(t=lc(a.type,null,l,i,i.mode,h),t.ref=i.ref,t.return=i,i.child=t)}if(d=t.child,!Nd(t,h)){var v=d.memoizedProps;if(a=a.compare,a=a!==null?a:al,a(v,l)&&t.ref===i.ref)return ur(t,i,h)}return i.flags|=1,t=ir(d,l),t.ref=i.ref,t.return=i,i.child=t}function rv(t,i,a,l,h){if(t!==null){var d=t.memoizedProps;if(al(d,l)&&t.ref===i.ref)if(Mt=!1,i.pendingProps=l=d,Nd(t,h))(t.flags&131072)!==0&&(Mt=!0);else return i.lanes=t.lanes,ur(t,i,h)}return Ad(t,i,a,l,h)}function sv(t,i,a,l){var h=l.children,d=t!==null?t.memoizedState:null;if(t===null&&i.stateNode===null&&(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),l.mode==="hidden"){if((i.flags&128)!==0){if(d=d!==null?d.baseLanes|a:a,t!==null){for(l=i.child=t.child,h=0;l!==null;)h=h|l.lanes|l.childLanes,l=l.sibling;l=h&~d}else l=0,i.child=null;return av(t,i,d,a,l)}if((a&536870912)!==0)i.memoizedState={baseLanes:0,cachePool:null},t!==null&&fc(i,d!==null?d.cachePool:null),d!==null?ly(i,d):ed(),uy(i);else return l=i.lanes=536870912,av(t,i,d!==null?d.baseLanes|a:a,a,l)}else d!==null?(fc(i,d.cachePool),ly(i,d),$r(),i.memoizedState=null):(t!==null&&fc(i,null),ed(),$r());return en(t,i,h,a),i.child}function Tl(t,i){return t!==null&&t.tag===22||i.stateNode!==null||(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),i.sibling}function av(t,i,a,l,h){var d=Yf();return d=d===null?null:{parent:Nt._currentValue,pool:d},i.memoizedState={baseLanes:a,cachePool:d},t!==null&&fc(i,null),ed(),uy(i),t!==null&&ja(t,i,l,!0),i.childLanes=h,null}function xc(t,i){return i=Dc({mode:i.mode,children:i.children},t.mode),i.ref=t.ref,t.child=i,i.return=t,i}function ov(t,i,a){return Js(i,t.child,null,a),t=xc(i,i.pendingProps),t.flags|=2,kn(i),i.memoizedState=null,t}function i1(t,i,a){var l=i.pendingProps,h=(i.flags&128)!==0;if(i.flags&=-129,t===null){if(Ge){if(l.mode==="hidden")return t=xc(i,l),i.lanes=536870912,Tl(null,t);if(nd(i),(t=ut)?(t=__(t,Zn),t=t!==null&&t.data==="&"?t:null,t!==null&&(i.memoizedState={dehydrated:t,treeContext:Ur!==null?{id:Ui,overflow:zi}:null,retryLane:536870912,hydrationErrors:null},a=Fg(t),a.return=i,i.child=a,Jt=i,ut=null)):t=null,t===null)throw Br(i);return i.lanes=536870912,null}return xc(i,l)}var d=t.memoizedState;if(d!==null){var v=d.dehydrated;if(nd(i),h)if(i.flags&256)i.flags&=-257,i=ov(t,i,a);else if(i.memoizedState!==null)i.child=t.child,i.flags|=128,i=null;else throw Error(s(558));else if(Mt||ja(t,i,a,!1),h=(a&t.childLanes)!==0,Mt||h){if(l=lt,l!==null&&(v=qo(l,a),v!==0&&v!==d.retryLane))throw d.retryLane=v,Fs(t,v),Rn(l,t,v),Sd;Uc(),i=ov(t,i,a)}else t=d.treeContext,ut=ti(v.nextSibling),Jt=i,Ge=!0,zr=null,Zn=!1,t!==null&&$g(i,t),i=xc(i,l),i.flags|=4096;return i}return t=ir(t.child,{mode:l.mode,children:l.children}),t.ref=i.ref,i.child=t,t.return=i,t}function Ic(t,i){var a=i.ref;if(a===null)t!==null&&t.ref!==null&&(i.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(s(284));(t===null||t.ref!==a)&&(i.flags|=4194816)}}function Ad(t,i,a,l,h){return Ys(i),a=rd(t,i,a,l,void 0,h),l=sd(),t!==null&&!Mt?(ad(t,i,h),ur(t,i,h)):(Ge&&l&&Uf(i),i.flags|=1,en(t,i,a,h),i.child)}function lv(t,i,a,l,h,d){return Ys(i),i.updateQueue=null,a=hy(i,l,a,h),cy(t),l=sd(),t!==null&&!Mt?(ad(t,i,d),ur(t,i,d)):(Ge&&l&&Uf(i),i.flags|=1,en(t,i,a,d),i.child)}function uv(t,i,a,l,h){if(Ys(i),i.stateNode===null){var d=Va,v=a.contextType;typeof v=="object"&&v!==null&&(d=Zt(v)),d=new a(l,d),i.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,d.updater=Td,i.stateNode=d,d._reactInternals=i,d=i.stateNode,d.props=l,d.state=i.memoizedState,d.refs={},Xf(i),v=a.contextType,d.context=typeof v=="object"&&v!==null?Zt(v):Va,d.state=i.memoizedState,v=a.getDerivedStateFromProps,typeof v=="function"&&(Ed(i,a,v,l),d.state=i.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof d.getSnapshotBeforeUpdate=="function"||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(v=d.state,typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount(),v!==d.state&&Td.enqueueReplaceState(d,d.state,null),gl(i,l,d,h),pl(),d.state=i.memoizedState),typeof d.componentDidMount=="function"&&(i.flags|=4194308),l=!0}else if(t===null){d=i.stateNode;var S=i.memoizedProps,M=ea(a,S);d.props=M;var G=d.context,ee=a.contextType;v=Va,typeof ee=="object"&&ee!==null&&(v=Zt(ee));var re=a.getDerivedStateFromProps;ee=typeof re=="function"||typeof d.getSnapshotBeforeUpdate=="function",S=i.pendingProps!==S,ee||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(S||G!==v)&&Ky(i,d,l,v),Hr=!1;var Q=i.memoizedState;d.state=Q,gl(i,l,d,h),pl(),G=i.memoizedState,S||Q!==G||Hr?(typeof re=="function"&&(Ed(i,a,re,l),G=i.memoizedState),(M=Hr||Yy(i,a,M,l,Q,G,v))?(ee||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount()),typeof d.componentDidMount=="function"&&(i.flags|=4194308)):(typeof d.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=l,i.memoizedState=G),d.props=l,d.state=G,d.context=v,l=M):(typeof d.componentDidMount=="function"&&(i.flags|=4194308),l=!1)}else{d=i.stateNode,Wf(t,i),v=i.memoizedProps,ee=ea(a,v),d.props=ee,re=i.pendingProps,Q=d.context,G=a.contextType,M=Va,typeof G=="object"&&G!==null&&(M=Zt(G)),S=a.getDerivedStateFromProps,(G=typeof S=="function"||typeof d.getSnapshotBeforeUpdate=="function")||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(v!==re||Q!==M)&&Ky(i,d,l,M),Hr=!1,Q=i.memoizedState,d.state=Q,gl(i,l,d,h),pl();var K=i.memoizedState;v!==re||Q!==K||Hr||t!==null&&t.dependencies!==null&&cc(t.dependencies)?(typeof S=="function"&&(Ed(i,a,S,l),K=i.memoizedState),(ee=Hr||Yy(i,a,ee,l,Q,K,M)||t!==null&&t.dependencies!==null&&cc(t.dependencies))?(G||typeof d.UNSAFE_componentWillUpdate!="function"&&typeof d.componentWillUpdate!="function"||(typeof d.componentWillUpdate=="function"&&d.componentWillUpdate(l,K,M),typeof d.UNSAFE_componentWillUpdate=="function"&&d.UNSAFE_componentWillUpdate(l,K,M)),typeof d.componentDidUpdate=="function"&&(i.flags|=4),typeof d.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof d.componentDidUpdate!="function"||v===t.memoizedProps&&Q===t.memoizedState||(i.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||v===t.memoizedProps&&Q===t.memoizedState||(i.flags|=1024),i.memoizedProps=l,i.memoizedState=K),d.props=l,d.state=K,d.context=M,l=ee):(typeof d.componentDidUpdate!="function"||v===t.memoizedProps&&Q===t.memoizedState||(i.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||v===t.memoizedProps&&Q===t.memoizedState||(i.flags|=1024),l=!1)}return d=l,Ic(t,i),l=(i.flags&128)!==0,d||l?(d=i.stateNode,a=l&&typeof a.getDerivedStateFromError!="function"?null:d.render(),i.flags|=1,t!==null&&l?(i.child=Js(i,t.child,null,h),i.child=Js(i,null,a,h)):en(t,i,a,h),i.memoizedState=d.state,t=i.child):t=ur(t,i,h),t}function cv(t,i,a,l){return Qs(),i.flags|=256,en(t,i,a,l),i.child}var wd={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Rd(t){return{baseLanes:t,cachePool:Zg()}}function Cd(t,i,a){return t=t!==null?t.childLanes&~a:0,i&&(t|=Ln),t}function hv(t,i,a){var l=i.pendingProps,h=!1,d=(i.flags&128)!==0,v;if((v=d)||(v=t!==null&&t.memoizedState===null?!1:(bt.current&2)!==0),v&&(h=!0,i.flags&=-129),v=(i.flags&32)!==0,i.flags&=-33,t===null){if(Ge){if(h?Qr(i):$r(),(t=ut)?(t=__(t,Zn),t=t!==null&&t.data!=="&"?t:null,t!==null&&(i.memoizedState={dehydrated:t,treeContext:Ur!==null?{id:Ui,overflow:zi}:null,retryLane:536870912,hydrationErrors:null},a=Fg(t),a.return=i,i.child=a,Jt=i,ut=null)):t=null,t===null)throw Br(i);return um(t)?i.lanes=32:i.lanes=536870912,null}var S=l.children;return l=l.fallback,h?($r(),h=i.mode,S=Dc({mode:"hidden",children:S},h),l=Gs(l,h,a,null),S.return=i,l.return=i,S.sibling=l,i.child=S,l=i.child,l.memoizedState=Rd(a),l.childLanes=Cd(t,v,a),i.memoizedState=wd,Tl(null,l)):(Qr(i),xd(i,S))}var M=t.memoizedState;if(M!==null&&(S=M.dehydrated,S!==null)){if(d)i.flags&256?(Qr(i),i.flags&=-257,i=Id(t,i,a)):i.memoizedState!==null?($r(),i.child=t.child,i.flags|=128,i=null):($r(),S=l.fallback,h=i.mode,l=Dc({mode:"visible",children:l.children},h),S=Gs(S,h,a,null),S.flags|=2,l.return=i,S.return=i,l.sibling=S,i.child=l,Js(i,t.child,null,a),l=i.child,l.memoizedState=Rd(a),l.childLanes=Cd(t,v,a),i.memoizedState=wd,i=Tl(null,l));else if(Qr(i),um(S)){if(v=S.nextSibling&&S.nextSibling.dataset,v)var G=v.dgst;v=G,l=Error(s(419)),l.stack="",l.digest=v,ul({value:l,source:null,stack:null}),i=Id(t,i,a)}else if(Mt||ja(t,i,a,!1),v=(a&t.childLanes)!==0,Mt||v){if(v=lt,v!==null&&(l=qo(v,a),l!==0&&l!==M.retryLane))throw M.retryLane=l,Fs(t,l),Rn(v,t,l),Sd;lm(S)||Uc(),i=Id(t,i,a)}else lm(S)?(i.flags|=192,i.child=t.child,i=null):(t=M.treeContext,ut=ti(S.nextSibling),Jt=i,Ge=!0,zr=null,Zn=!1,t!==null&&$g(i,t),i=xd(i,l.children),i.flags|=4096);return i}return h?($r(),S=l.fallback,h=i.mode,M=t.child,G=M.sibling,l=ir(M,{mode:"hidden",children:l.children}),l.subtreeFlags=M.subtreeFlags&65011712,G!==null?S=ir(G,S):(S=Gs(S,h,a,null),S.flags|=2),S.return=i,l.return=i,l.sibling=S,i.child=l,Tl(null,l),l=i.child,S=t.child.memoizedState,S===null?S=Rd(a):(h=S.cachePool,h!==null?(M=Nt._currentValue,h=h.parent!==M?{parent:M,pool:M}:h):h=Zg(),S={baseLanes:S.baseLanes|a,cachePool:h}),l.memoizedState=S,l.childLanes=Cd(t,v,a),i.memoizedState=wd,Tl(t.child,l)):(Qr(i),a=t.child,t=a.sibling,a=ir(a,{mode:"visible",children:l.children}),a.return=i,a.sibling=null,t!==null&&(v=i.deletions,v===null?(i.deletions=[t],i.flags|=16):v.push(t)),i.child=a,i.memoizedState=null,a)}function xd(t,i){return i=Dc({mode:"visible",children:i},t.mode),i.return=t,t.child=i}function Dc(t,i){return t=Mn(22,t,null,i),t.lanes=0,t}function Id(t,i,a){return Js(i,t.child,null,a),t=xd(i,i.pendingProps.children),t.flags|=2,i.memoizedState=null,t}function fv(t,i,a){t.lanes|=i;var l=t.alternate;l!==null&&(l.lanes|=i),Ff(t.return,i,a)}function Dd(t,i,a,l,h,d){var v=t.memoizedState;v===null?t.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:l,tail:a,tailMode:h,treeForkCount:d}:(v.isBackwards=i,v.rendering=null,v.renderingStartTime=0,v.last=l,v.tail=a,v.tailMode=h,v.treeForkCount=d)}function dv(t,i,a){var l=i.pendingProps,h=l.revealOrder,d=l.tail;l=l.children;var v=bt.current,S=(v&2)!==0;if(S?(v=v&1|2,i.flags|=128):v&=1,le(bt,v),en(t,i,l,a),l=Ge?ll:0,!S&&t!==null&&(t.flags&128)!==0)e:for(t=i.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&fv(t,a,i);else if(t.tag===19)fv(t,a,i);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===i)break e;for(;t.sibling===null;){if(t.return===null||t.return===i)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}switch(h){case"forwards":for(a=i.child,h=null;a!==null;)t=a.alternate,t!==null&&vc(t)===null&&(h=a),a=a.sibling;a=h,a===null?(h=i.child,i.child=null):(h=a.sibling,a.sibling=null),Dd(i,!1,h,a,d,l);break;case"backwards":case"unstable_legacy-backwards":for(a=null,h=i.child,i.child=null;h!==null;){if(t=h.alternate,t!==null&&vc(t)===null){i.child=h;break}t=h.sibling,h.sibling=a,a=h,h=t}Dd(i,!0,a,null,d,l);break;case"together":Dd(i,!1,null,null,void 0,l);break;default:i.memoizedState=null}return i.child}function ur(t,i,a){if(t!==null&&(i.dependencies=t.dependencies),Xr|=i.lanes,(a&i.childLanes)===0)if(t!==null){if(ja(t,i,a,!1),(a&i.childLanes)===0)return null}else return null;if(t!==null&&i.child!==t.child)throw Error(s(153));if(i.child!==null){for(t=i.child,a=ir(t,t.pendingProps),i.child=a,a.return=i;t.sibling!==null;)t=t.sibling,a=a.sibling=ir(t,t.pendingProps),a.return=i;a.sibling=null}return i.child}function Nd(t,i){return(t.lanes&i)!==0?!0:(t=t.dependencies,!!(t!==null&&cc(t)))}function r1(t,i,a){switch(i.tag){case 3:Pe(i,i.stateNode.containerInfo),qr(i,Nt,t.memoizedState.cache),Qs();break;case 27:case 5:mn(i);break;case 4:Pe(i,i.stateNode.containerInfo);break;case 10:qr(i,i.type,i.memoizedProps.value);break;case 31:if(i.memoizedState!==null)return i.flags|=128,nd(i),null;break;case 13:var l=i.memoizedState;if(l!==null)return l.dehydrated!==null?(Qr(i),i.flags|=128,null):(a&i.child.childLanes)!==0?hv(t,i,a):(Qr(i),t=ur(t,i,a),t!==null?t.sibling:null);Qr(i);break;case 19:var h=(t.flags&128)!==0;if(l=(a&i.childLanes)!==0,l||(ja(t,i,a,!1),l=(a&i.childLanes)!==0),h){if(l)return dv(t,i,a);i.flags|=128}if(h=i.memoizedState,h!==null&&(h.rendering=null,h.tail=null,h.lastEffect=null),le(bt,bt.current),l)break;return null;case 22:return i.lanes=0,sv(t,i,a,i.pendingProps);case 24:qr(i,Nt,t.memoizedState.cache)}return ur(t,i,a)}function mv(t,i,a){if(t!==null)if(t.memoizedProps!==i.pendingProps)Mt=!0;else{if(!Nd(t,a)&&(i.flags&128)===0)return Mt=!1,r1(t,i,a);Mt=(t.flags&131072)!==0}else Mt=!1,Ge&&(i.flags&1048576)!==0&&Qg(i,ll,i.index);switch(i.lanes=0,i.tag){case 16:e:{var l=i.pendingProps;if(t=Xs(i.elementType),i.type=t,typeof t=="function")Pf(t)?(l=ea(t,l),i.tag=1,i=uv(null,i,t,l,a)):(i.tag=0,i=Ad(null,i,t,l,a));else{if(t!=null){var h=t.$$typeof;if(h===pe){i.tag=11,i=nv(null,i,t,l,a);break e}else if(h===D){i.tag=14,i=iv(null,i,t,l,a);break e}}throw i=se(t)||t,Error(s(306,i,""))}}return i;case 0:return Ad(t,i,i.type,i.pendingProps,a);case 1:return l=i.type,h=ea(l,i.pendingProps),uv(t,i,l,h,a);case 3:e:{if(Pe(i,i.stateNode.containerInfo),t===null)throw Error(s(387));l=i.pendingProps;var d=i.memoizedState;h=d.element,Wf(t,i),gl(i,l,null,a);var v=i.memoizedState;if(l=v.cache,qr(i,Nt,l),l!==d.cache&&Gf(i,[Nt],a,!0),pl(),l=v.element,d.isDehydrated)if(d={element:l,isDehydrated:!1,cache:v.cache},i.updateQueue.baseState=d,i.memoizedState=d,i.flags&256){i=cv(t,i,l,a);break e}else if(l!==h){h=Xn(Error(s(424)),i),ul(h),i=cv(t,i,l,a);break e}else for(t=i.stateNode.containerInfo,t.nodeType===9?t=t.body:t=t.nodeName==="HTML"?t.ownerDocument.body:t,ut=ti(t.firstChild),Jt=i,Ge=!0,zr=null,Zn=!0,a=sy(i,null,l,a),i.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling;else{if(Qs(),l===h){i=ur(t,i,a);break e}en(t,i,l,a)}i=i.child}return i;case 26:return Ic(t,i),t===null?(a=w_(i.type,null,i.pendingProps,null))?i.memoizedState=a:Ge||(a=i.type,t=i.pendingProps,l=Qc(Se.current).createElement(a),l[xt]=i,l[Ft]=t,tn(l,a,t),It(l),i.stateNode=l):i.memoizedState=w_(i.type,t.memoizedProps,i.pendingProps,t.memoizedState),null;case 27:return mn(i),t===null&&Ge&&(l=i.stateNode=b_(i.type,i.pendingProps,Se.current),Jt=i,Zn=!0,h=ut,ts(i.type)?(cm=h,ut=ti(l.firstChild)):ut=h),en(t,i,i.pendingProps.children,a),Ic(t,i),t===null&&(i.flags|=4194304),i.child;case 5:return t===null&&Ge&&((h=l=ut)&&(l=V1(l,i.type,i.pendingProps,Zn),l!==null?(i.stateNode=l,Jt=i,ut=ti(l.firstChild),Zn=!1,h=!0):h=!1),h||Br(i)),mn(i),h=i.type,d=i.pendingProps,v=t!==null?t.memoizedProps:null,l=d.children,sm(h,d)?l=null:v!==null&&sm(h,v)&&(i.flags|=32),i.memoizedState!==null&&(h=rd(t,i,KS,null,null,a),Pl._currentValue=h),Ic(t,i),en(t,i,l,a),i.child;case 6:return t===null&&Ge&&((t=a=ut)&&(a=k1(a,i.pendingProps,Zn),a!==null?(i.stateNode=a,Jt=i,ut=null,t=!0):t=!1),t||Br(i)),null;case 13:return hv(t,i,a);case 4:return Pe(i,i.stateNode.containerInfo),l=i.pendingProps,t===null?i.child=Js(i,null,l,a):en(t,i,l,a),i.child;case 11:return nv(t,i,i.type,i.pendingProps,a);case 7:return en(t,i,i.pendingProps,a),i.child;case 8:return en(t,i,i.pendingProps.children,a),i.child;case 12:return en(t,i,i.pendingProps.children,a),i.child;case 10:return l=i.pendingProps,qr(i,i.type,l.value),en(t,i,l.children,a),i.child;case 9:return h=i.type._context,l=i.pendingProps.children,Ys(i),h=Zt(h),l=l(h),i.flags|=1,en(t,i,l,a),i.child;case 14:return iv(t,i,i.type,i.pendingProps,a);case 15:return rv(t,i,i.type,i.pendingProps,a);case 19:return dv(t,i,a);case 31:return i1(t,i,a);case 22:return sv(t,i,a,i.pendingProps);case 24:return Ys(i),l=Zt(Nt),t===null?(h=Yf(),h===null&&(h=lt,d=Qf(),h.pooledCache=d,d.refCount++,d!==null&&(h.pooledCacheLanes|=a),h=d),i.memoizedState={parent:l,cache:h},Xf(i),qr(i,Nt,h)):((t.lanes&a)!==0&&(Wf(t,i),gl(i,null,null,a),pl()),h=t.memoizedState,d=i.memoizedState,h.parent!==l?(h={parent:l,cache:l},i.memoizedState=h,i.lanes===0&&(i.memoizedState=i.updateQueue.baseState=h),qr(i,Nt,l)):(l=d.cache,qr(i,Nt,l),l!==h.cache&&Gf(i,[Nt],a,!0))),en(t,i,i.pendingProps.children,a),i.child;case 29:throw i.pendingProps}throw Error(s(156,i.tag))}function cr(t){t.flags|=4}function Od(t,i,a,l,h){if((i=(t.mode&32)!==0)&&(i=!1),i){if(t.flags|=16777216,(h&335544128)===h)if(t.stateNode.complete)t.flags|=8192;else if(Bv())t.flags|=8192;else throw Ws=mc,Kf}else t.flags&=-16777217}function pv(t,i){if(i.type!=="stylesheet"||(i.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!D_(i))if(Bv())t.flags|=8192;else throw Ws=mc,Kf}function Nc(t,i){i!==null&&(t.flags|=4),t.flags&16384&&(i=t.tag!==22?Lu():536870912,t.lanes|=i,Xa|=i)}function bl(t,i){if(!Ge)switch(t.tailMode){case"hidden":i=t.tail;for(var a=null;i!==null;)i.alternate!==null&&(a=i),i=i.sibling;a===null?t.tail=null:a.sibling=null;break;case"collapsed":a=t.tail;for(var l=null;a!==null;)a.alternate!==null&&(l=a),a=a.sibling;l===null?i||t.tail===null?t.tail=null:t.tail.sibling=null:l.sibling=null}}function ct(t){var i=t.alternate!==null&&t.alternate.child===t.child,a=0,l=0;if(i)for(var h=t.child;h!==null;)a|=h.lanes|h.childLanes,l|=h.subtreeFlags&65011712,l|=h.flags&65011712,h.return=t,h=h.sibling;else for(h=t.child;h!==null;)a|=h.lanes|h.childLanes,l|=h.subtreeFlags,l|=h.flags,h.return=t,h=h.sibling;return t.subtreeFlags|=l,t.childLanes=a,i}function s1(t,i,a){var l=i.pendingProps;switch(zf(i),i.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ct(i),null;case 1:return ct(i),null;case 3:return a=i.stateNode,l=null,t!==null&&(l=t.memoizedState.cache),i.memoizedState.cache!==l&&(i.flags|=2048),ar(Nt),Ye(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(t===null||t.child===null)&&(La(i)?cr(i):t===null||t.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,qf())),ct(i),null;case 26:var h=i.type,d=i.memoizedState;return t===null?(cr(i),d!==null?(ct(i),pv(i,d)):(ct(i),Od(i,h,null,l,a))):d?d!==t.memoizedState?(cr(i),ct(i),pv(i,d)):(ct(i),i.flags&=-16777217):(t=t.memoizedProps,t!==l&&cr(i),ct(i),Od(i,h,t,l,a)),null;case 27:if(xn(i),a=Se.current,h=i.type,t!==null&&i.stateNode!=null)t.memoizedProps!==l&&cr(i);else{if(!l){if(i.stateNode===null)throw Error(s(166));return ct(i),null}t=fe.current,La(i)?Yg(i):(t=b_(h,l,a),i.stateNode=t,cr(i))}return ct(i),null;case 5:if(xn(i),h=i.type,t!==null&&i.stateNode!=null)t.memoizedProps!==l&&cr(i);else{if(!l){if(i.stateNode===null)throw Error(s(166));return ct(i),null}if(d=fe.current,La(i))Yg(i);else{var v=Qc(Se.current);switch(d){case 1:d=v.createElementNS("http://www.w3.org/2000/svg",h);break;case 2:d=v.createElementNS("http://www.w3.org/1998/Math/MathML",h);break;default:switch(h){case"svg":d=v.createElementNS("http://www.w3.org/2000/svg",h);break;case"math":d=v.createElementNS("http://www.w3.org/1998/Math/MathML",h);break;case"script":d=v.createElement("div"),d.innerHTML="<script><\/script>",d=d.removeChild(d.firstChild);break;case"select":d=typeof l.is=="string"?v.createElement("select",{is:l.is}):v.createElement("select"),l.multiple?d.multiple=!0:l.size&&(d.size=l.size);break;default:d=typeof l.is=="string"?v.createElement(h,{is:l.is}):v.createElement(h)}}d[xt]=i,d[Ft]=l;e:for(v=i.child;v!==null;){if(v.tag===5||v.tag===6)d.appendChild(v.stateNode);else if(v.tag!==4&&v.tag!==27&&v.child!==null){v.child.return=v,v=v.child;continue}if(v===i)break e;for(;v.sibling===null;){if(v.return===null||v.return===i)break e;v=v.return}v.sibling.return=v.return,v=v.sibling}i.stateNode=d;e:switch(tn(d,h,l),h){case"button":case"input":case"select":case"textarea":l=!!l.autoFocus;break e;case"img":l=!0;break e;default:l=!1}l&&cr(i)}}return ct(i),Od(i,i.type,t===null?null:t.memoizedProps,i.pendingProps,a),null;case 6:if(t&&i.stateNode!=null)t.memoizedProps!==l&&cr(i);else{if(typeof l!="string"&&i.stateNode===null)throw Error(s(166));if(t=Se.current,La(i)){if(t=i.stateNode,a=i.memoizedProps,l=null,h=Jt,h!==null)switch(h.tag){case 27:case 5:l=h.memoizedProps}t[xt]=i,t=!!(t.nodeValue===a||l!==null&&l.suppressHydrationWarning===!0||h_(t.nodeValue,a)),t||Br(i,!0)}else t=Qc(t).createTextNode(l),t[xt]=i,i.stateNode=t}return ct(i),null;case 31:if(a=i.memoizedState,t===null||t.memoizedState!==null){if(l=La(i),a!==null){if(t===null){if(!l)throw Error(s(318));if(t=i.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(s(557));t[xt]=i}else Qs(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;ct(i),t=!1}else a=qf(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=a),t=!0;if(!t)return i.flags&256?(kn(i),i):(kn(i),null);if((i.flags&128)!==0)throw Error(s(558))}return ct(i),null;case 13:if(l=i.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(h=La(i),l!==null&&l.dehydrated!==null){if(t===null){if(!h)throw Error(s(318));if(h=i.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(s(317));h[xt]=i}else Qs(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;ct(i),h=!1}else h=qf(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=h),h=!0;if(!h)return i.flags&256?(kn(i),i):(kn(i),null)}return kn(i),(i.flags&128)!==0?(i.lanes=a,i):(a=l!==null,t=t!==null&&t.memoizedState!==null,a&&(l=i.child,h=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(h=l.alternate.memoizedState.cachePool.pool),d=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(d=l.memoizedState.cachePool.pool),d!==h&&(l.flags|=2048)),a!==t&&a&&(i.child.flags|=8192),Nc(i,i.updateQueue),ct(i),null);case 4:return Ye(),t===null&&em(i.stateNode.containerInfo),ct(i),null;case 10:return ar(i.type),ct(i),null;case 19:if(J(bt),l=i.memoizedState,l===null)return ct(i),null;if(h=(i.flags&128)!==0,d=l.rendering,d===null)if(h)bl(l,!1);else{if(vt!==0||t!==null&&(t.flags&128)!==0)for(t=i.child;t!==null;){if(d=vc(t),d!==null){for(i.flags|=128,bl(l,!1),t=d.updateQueue,i.updateQueue=t,Nc(i,t),i.subtreeFlags=0,t=a,a=i.child;a!==null;)Hg(a,t),a=a.sibling;return le(bt,bt.current&1|2),Ge&&rr(i,l.treeForkCount),i.child}t=t.sibling}l.tail!==null&&pn()>Pc&&(i.flags|=128,h=!0,bl(l,!1),i.lanes=4194304)}else{if(!h)if(t=vc(d),t!==null){if(i.flags|=128,h=!0,t=t.updateQueue,i.updateQueue=t,Nc(i,t),bl(l,!0),l.tail===null&&l.tailMode==="hidden"&&!d.alternate&&!Ge)return ct(i),null}else 2*pn()-l.renderingStartTime>Pc&&a!==536870912&&(i.flags|=128,h=!0,bl(l,!1),i.lanes=4194304);l.isBackwards?(d.sibling=i.child,i.child=d):(t=l.last,t!==null?t.sibling=d:i.child=d,l.last=d)}return l.tail!==null?(t=l.tail,l.rendering=t,l.tail=t.sibling,l.renderingStartTime=pn(),t.sibling=null,a=bt.current,le(bt,h?a&1|2:a&1),Ge&&rr(i,l.treeForkCount),t):(ct(i),null);case 22:case 23:return kn(i),td(),l=i.memoizedState!==null,t!==null?t.memoizedState!==null!==l&&(i.flags|=8192):l&&(i.flags|=8192),l?(a&536870912)!==0&&(i.flags&128)===0&&(ct(i),i.subtreeFlags&6&&(i.flags|=8192)):ct(i),a=i.updateQueue,a!==null&&Nc(i,a.retryQueue),a=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),l=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(l=i.memoizedState.cachePool.pool),l!==a&&(i.flags|=2048),t!==null&&J(Ks),null;case 24:return a=null,t!==null&&(a=t.memoizedState.cache),i.memoizedState.cache!==a&&(i.flags|=2048),ar(Nt),ct(i),null;case 25:return null;case 30:return null}throw Error(s(156,i.tag))}function a1(t,i){switch(zf(i),i.tag){case 1:return t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 3:return ar(Nt),Ye(),t=i.flags,(t&65536)!==0&&(t&128)===0?(i.flags=t&-65537|128,i):null;case 26:case 27:case 5:return xn(i),null;case 31:if(i.memoizedState!==null){if(kn(i),i.alternate===null)throw Error(s(340));Qs()}return t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 13:if(kn(i),t=i.memoizedState,t!==null&&t.dehydrated!==null){if(i.alternate===null)throw Error(s(340));Qs()}return t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 19:return J(bt),null;case 4:return Ye(),null;case 10:return ar(i.type),null;case 22:case 23:return kn(i),td(),t!==null&&J(Ks),t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 24:return ar(Nt),null;case 25:return null;default:return null}}function gv(t,i){switch(zf(i),i.tag){case 3:ar(Nt),Ye();break;case 26:case 27:case 5:xn(i);break;case 4:Ye();break;case 31:i.memoizedState!==null&&kn(i);break;case 13:kn(i);break;case 19:J(bt);break;case 10:ar(i.type);break;case 22:case 23:kn(i),td(),t!==null&&J(Ks);break;case 24:ar(Nt)}}function Sl(t,i){try{var a=i.updateQueue,l=a!==null?a.lastEffect:null;if(l!==null){var h=l.next;a=h;do{if((a.tag&t)===t){l=void 0;var d=a.create,v=a.inst;l=d(),v.destroy=l}a=a.next}while(a!==h)}}catch(S){nt(i,i.return,S)}}function Yr(t,i,a){try{var l=i.updateQueue,h=l!==null?l.lastEffect:null;if(h!==null){var d=h.next;l=d;do{if((l.tag&t)===t){var v=l.inst,S=v.destroy;if(S!==void 0){v.destroy=void 0,h=i;var M=a,G=S;try{G()}catch(ee){nt(h,M,ee)}}}l=l.next}while(l!==d)}}catch(ee){nt(i,i.return,ee)}}function yv(t){var i=t.updateQueue;if(i!==null){var a=t.stateNode;try{oy(i,a)}catch(l){nt(t,t.return,l)}}}function vv(t,i,a){a.props=ea(t.type,t.memoizedProps),a.state=t.memoizedState;try{a.componentWillUnmount()}catch(l){nt(t,i,l)}}function Al(t,i){try{var a=t.ref;if(a!==null){switch(t.tag){case 26:case 27:case 5:var l=t.stateNode;break;case 30:l=t.stateNode;break;default:l=t.stateNode}typeof a=="function"?t.refCleanup=a(l):a.current=l}}catch(h){nt(t,i,h)}}function Bi(t,i){var a=t.ref,l=t.refCleanup;if(a!==null)if(typeof l=="function")try{l()}catch(h){nt(t,i,h)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(h){nt(t,i,h)}else a.current=null}function _v(t){var i=t.type,a=t.memoizedProps,l=t.stateNode;try{e:switch(i){case"button":case"input":case"select":case"textarea":a.autoFocus&&l.focus();break e;case"img":a.src?l.src=a.src:a.srcSet&&(l.srcset=a.srcSet)}}catch(h){nt(t,t.return,h)}}function Md(t,i,a){try{var l=t.stateNode;x1(l,t.type,a,i),l[Ft]=i}catch(h){nt(t,t.return,h)}}function Ev(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&ts(t.type)||t.tag===4}function Vd(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Ev(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&ts(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function kd(t,i,a){var l=t.tag;if(l===5||l===6)t=t.stateNode,i?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(t,i):(i=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,i.appendChild(t),a=a._reactRootContainer,a!=null||i.onclick!==null||(i.onclick=ui));else if(l!==4&&(l===27&&ts(t.type)&&(a=t.stateNode,i=null),t=t.child,t!==null))for(kd(t,i,a),t=t.sibling;t!==null;)kd(t,i,a),t=t.sibling}function Oc(t,i,a){var l=t.tag;if(l===5||l===6)t=t.stateNode,i?a.insertBefore(t,i):a.appendChild(t);else if(l!==4&&(l===27&&ts(t.type)&&(a=t.stateNode),t=t.child,t!==null))for(Oc(t,i,a),t=t.sibling;t!==null;)Oc(t,i,a),t=t.sibling}function Tv(t){var i=t.stateNode,a=t.memoizedProps;try{for(var l=t.type,h=i.attributes;h.length;)i.removeAttributeNode(h[0]);tn(i,l,a),i[xt]=t,i[Ft]=a}catch(d){nt(t,t.return,d)}}var hr=!1,Vt=!1,Pd=!1,bv=typeof WeakSet=="function"?WeakSet:Set,Qt=null;function o1(t,i){if(t=t.containerInfo,im=Zc,t=Vg(t),If(t)){if("selectionStart"in t)var a={start:t.selectionStart,end:t.selectionEnd};else e:{a=(a=t.ownerDocument)&&a.defaultView||window;var l=a.getSelection&&a.getSelection();if(l&&l.rangeCount!==0){a=l.anchorNode;var h=l.anchorOffset,d=l.focusNode;l=l.focusOffset;try{a.nodeType,d.nodeType}catch{a=null;break e}var v=0,S=-1,M=-1,G=0,ee=0,re=t,Q=null;t:for(;;){for(var K;re!==a||h!==0&&re.nodeType!==3||(S=v+h),re!==d||l!==0&&re.nodeType!==3||(M=v+l),re.nodeType===3&&(v+=re.nodeValue.length),(K=re.firstChild)!==null;)Q=re,re=K;for(;;){if(re===t)break t;if(Q===a&&++G===h&&(S=v),Q===d&&++ee===l&&(M=v),(K=re.nextSibling)!==null)break;re=Q,Q=re.parentNode}re=K}a=S===-1||M===-1?null:{start:S,end:M}}else a=null}a=a||{start:0,end:0}}else a=null;for(rm={focusedElem:t,selectionRange:a},Zc=!1,Qt=i;Qt!==null;)if(i=Qt,t=i.child,(i.subtreeFlags&1028)!==0&&t!==null)t.return=i,Qt=t;else for(;Qt!==null;){switch(i=Qt,d=i.alternate,t=i.flags,i.tag){case 0:if((t&4)!==0&&(t=i.updateQueue,t=t!==null?t.events:null,t!==null))for(a=0;a<t.length;a++)h=t[a],h.ref.impl=h.nextImpl;break;case 11:case 15:break;case 1:if((t&1024)!==0&&d!==null){t=void 0,a=i,h=d.memoizedProps,d=d.memoizedState,l=a.stateNode;try{var ye=ea(a.type,h);t=l.getSnapshotBeforeUpdate(ye,d),l.__reactInternalSnapshotBeforeUpdate=t}catch(Re){nt(a,a.return,Re)}}break;case 3:if((t&1024)!==0){if(t=i.stateNode.containerInfo,a=t.nodeType,a===9)om(t);else if(a===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":om(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(s(163))}if(t=i.sibling,t!==null){t.return=i.return,Qt=t;break}Qt=i.return}}function Sv(t,i,a){var l=a.flags;switch(a.tag){case 0:case 11:case 15:dr(t,a),l&4&&Sl(5,a);break;case 1:if(dr(t,a),l&4)if(t=a.stateNode,i===null)try{t.componentDidMount()}catch(v){nt(a,a.return,v)}else{var h=ea(a.type,i.memoizedProps);i=i.memoizedState;try{t.componentDidUpdate(h,i,t.__reactInternalSnapshotBeforeUpdate)}catch(v){nt(a,a.return,v)}}l&64&&yv(a),l&512&&Al(a,a.return);break;case 3:if(dr(t,a),l&64&&(t=a.updateQueue,t!==null)){if(i=null,a.child!==null)switch(a.child.tag){case 27:case 5:i=a.child.stateNode;break;case 1:i=a.child.stateNode}try{oy(t,i)}catch(v){nt(a,a.return,v)}}break;case 27:i===null&&l&4&&Tv(a);case 26:case 5:dr(t,a),i===null&&l&4&&_v(a),l&512&&Al(a,a.return);break;case 12:dr(t,a);break;case 31:dr(t,a),l&4&&Rv(t,a);break;case 13:dr(t,a),l&4&&Cv(t,a),l&64&&(t=a.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(a=g1.bind(null,a),P1(t,a))));break;case 22:if(l=a.memoizedState!==null||hr,!l){i=i!==null&&i.memoizedState!==null||Vt,h=hr;var d=Vt;hr=l,(Vt=i)&&!d?mr(t,a,(a.subtreeFlags&8772)!==0):dr(t,a),hr=h,Vt=d}break;case 30:break;default:dr(t,a)}}function Av(t){var i=t.alternate;i!==null&&(t.alternate=null,Av(i)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(i=t.stateNode,i!==null&&Ea(i)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var dt=null,bn=!1;function fr(t,i,a){for(a=a.child;a!==null;)wv(t,i,a),a=a.sibling}function wv(t,i,a){if(Xt&&typeof Xt.onCommitFiberUnmount=="function")try{Xt.onCommitFiberUnmount(si,a)}catch{}switch(a.tag){case 26:Vt||Bi(a,i),fr(t,i,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:Vt||Bi(a,i);var l=dt,h=bn;ts(a.type)&&(dt=a.stateNode,bn=!1),fr(t,i,a),Ml(a.stateNode),dt=l,bn=h;break;case 5:Vt||Bi(a,i);case 6:if(l=dt,h=bn,dt=null,fr(t,i,a),dt=l,bn=h,dt!==null)if(bn)try{(dt.nodeType===9?dt.body:dt.nodeName==="HTML"?dt.ownerDocument.body:dt).removeChild(a.stateNode)}catch(d){nt(a,i,d)}else try{dt.removeChild(a.stateNode)}catch(d){nt(a,i,d)}break;case 18:dt!==null&&(bn?(t=dt,y_(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,a.stateNode),ro(t)):y_(dt,a.stateNode));break;case 4:l=dt,h=bn,dt=a.stateNode.containerInfo,bn=!0,fr(t,i,a),dt=l,bn=h;break;case 0:case 11:case 14:case 15:Yr(2,a,i),Vt||Yr(4,a,i),fr(t,i,a);break;case 1:Vt||(Bi(a,i),l=a.stateNode,typeof l.componentWillUnmount=="function"&&vv(a,i,l)),fr(t,i,a);break;case 21:fr(t,i,a);break;case 22:Vt=(l=Vt)||a.memoizedState!==null,fr(t,i,a),Vt=l;break;default:fr(t,i,a)}}function Rv(t,i){if(i.memoizedState===null&&(t=i.alternate,t!==null&&(t=t.memoizedState,t!==null))){t=t.dehydrated;try{ro(t)}catch(a){nt(i,i.return,a)}}}function Cv(t,i){if(i.memoizedState===null&&(t=i.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{ro(t)}catch(a){nt(i,i.return,a)}}function l1(t){switch(t.tag){case 31:case 13:case 19:var i=t.stateNode;return i===null&&(i=t.stateNode=new bv),i;case 22:return t=t.stateNode,i=t._retryCache,i===null&&(i=t._retryCache=new bv),i;default:throw Error(s(435,t.tag))}}function Mc(t,i){var a=l1(t);i.forEach(function(l){if(!a.has(l)){a.add(l);var h=y1.bind(null,t,l);l.then(h,h)}})}function Sn(t,i){var a=i.deletions;if(a!==null)for(var l=0;l<a.length;l++){var h=a[l],d=t,v=i,S=v;e:for(;S!==null;){switch(S.tag){case 27:if(ts(S.type)){dt=S.stateNode,bn=!1;break e}break;case 5:dt=S.stateNode,bn=!1;break e;case 3:case 4:dt=S.stateNode.containerInfo,bn=!0;break e}S=S.return}if(dt===null)throw Error(s(160));wv(d,v,h),dt=null,bn=!1,d=h.alternate,d!==null&&(d.return=null),h.return=null}if(i.subtreeFlags&13886)for(i=i.child;i!==null;)xv(i,t),i=i.sibling}var pi=null;function xv(t,i){var a=t.alternate,l=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:Sn(i,t),An(t),l&4&&(Yr(3,t,t.return),Sl(3,t),Yr(5,t,t.return));break;case 1:Sn(i,t),An(t),l&512&&(Vt||a===null||Bi(a,a.return)),l&64&&hr&&(t=t.updateQueue,t!==null&&(l=t.callbacks,l!==null&&(a=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=a===null?l:a.concat(l))));break;case 26:var h=pi;if(Sn(i,t),An(t),l&512&&(Vt||a===null||Bi(a,a.return)),l&4){var d=a!==null?a.memoizedState:null;if(l=t.memoizedState,a===null)if(l===null)if(t.stateNode===null){e:{l=t.type,a=t.memoizedProps,h=h.ownerDocument||h;t:switch(l){case"title":d=h.getElementsByTagName("title")[0],(!d||d[Ci]||d[xt]||d.namespaceURI==="http://www.w3.org/2000/svg"||d.hasAttribute("itemprop"))&&(d=h.createElement(l),h.head.insertBefore(d,h.querySelector("head > title"))),tn(d,l,a),d[xt]=t,It(d),l=d;break e;case"link":var v=x_("link","href",h).get(l+(a.href||""));if(v){for(var S=0;S<v.length;S++)if(d=v[S],d.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&d.getAttribute("rel")===(a.rel==null?null:a.rel)&&d.getAttribute("title")===(a.title==null?null:a.title)&&d.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){v.splice(S,1);break t}}d=h.createElement(l),tn(d,l,a),h.head.appendChild(d);break;case"meta":if(v=x_("meta","content",h).get(l+(a.content||""))){for(S=0;S<v.length;S++)if(d=v[S],d.getAttribute("content")===(a.content==null?null:""+a.content)&&d.getAttribute("name")===(a.name==null?null:a.name)&&d.getAttribute("property")===(a.property==null?null:a.property)&&d.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&d.getAttribute("charset")===(a.charSet==null?null:a.charSet)){v.splice(S,1);break t}}d=h.createElement(l),tn(d,l,a),h.head.appendChild(d);break;default:throw Error(s(468,l))}d[xt]=t,It(d),l=d}t.stateNode=l}else I_(h,t.type,t.stateNode);else t.stateNode=C_(h,l,t.memoizedProps);else d!==l?(d===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):d.count--,l===null?I_(h,t.type,t.stateNode):C_(h,l,t.memoizedProps)):l===null&&t.stateNode!==null&&Md(t,t.memoizedProps,a.memoizedProps)}break;case 27:Sn(i,t),An(t),l&512&&(Vt||a===null||Bi(a,a.return)),a!==null&&l&4&&Md(t,t.memoizedProps,a.memoizedProps);break;case 5:if(Sn(i,t),An(t),l&512&&(Vt||a===null||Bi(a,a.return)),t.flags&32){h=t.stateNode;try{Tn(h,"")}catch(ye){nt(t,t.return,ye)}}l&4&&t.stateNode!=null&&(h=t.memoizedProps,Md(t,h,a!==null?a.memoizedProps:h)),l&1024&&(Pd=!0);break;case 6:if(Sn(i,t),An(t),l&4){if(t.stateNode===null)throw Error(s(162));l=t.memoizedProps,a=t.stateNode;try{a.nodeValue=l}catch(ye){nt(t,t.return,ye)}}break;case 3:if(Kc=null,h=pi,pi=$c(i.containerInfo),Sn(i,t),pi=h,An(t),l&4&&a!==null&&a.memoizedState.isDehydrated)try{ro(i.containerInfo)}catch(ye){nt(t,t.return,ye)}Pd&&(Pd=!1,Iv(t));break;case 4:l=pi,pi=$c(t.stateNode.containerInfo),Sn(i,t),An(t),pi=l;break;case 12:Sn(i,t),An(t);break;case 31:Sn(i,t),An(t),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,Mc(t,l)));break;case 13:Sn(i,t),An(t),t.child.flags&8192&&t.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(kc=pn()),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,Mc(t,l)));break;case 22:h=t.memoizedState!==null;var M=a!==null&&a.memoizedState!==null,G=hr,ee=Vt;if(hr=G||h,Vt=ee||M,Sn(i,t),Vt=ee,hr=G,An(t),l&8192)e:for(i=t.stateNode,i._visibility=h?i._visibility&-2:i._visibility|1,h&&(a===null||M||hr||Vt||ta(t)),a=null,i=t;;){if(i.tag===5||i.tag===26){if(a===null){M=a=i;try{if(d=M.stateNode,h)v=d.style,typeof v.setProperty=="function"?v.setProperty("display","none","important"):v.display="none";else{S=M.stateNode;var re=M.memoizedProps.style,Q=re!=null&&re.hasOwnProperty("display")?re.display:null;S.style.display=Q==null||typeof Q=="boolean"?"":(""+Q).trim()}}catch(ye){nt(M,M.return,ye)}}}else if(i.tag===6){if(a===null){M=i;try{M.stateNode.nodeValue=h?"":M.memoizedProps}catch(ye){nt(M,M.return,ye)}}}else if(i.tag===18){if(a===null){M=i;try{var K=M.stateNode;h?v_(K,!0):v_(M.stateNode,!1)}catch(ye){nt(M,M.return,ye)}}}else if((i.tag!==22&&i.tag!==23||i.memoizedState===null||i===t)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===t)break e;for(;i.sibling===null;){if(i.return===null||i.return===t)break e;a===i&&(a=null),i=i.return}a===i&&(a=null),i.sibling.return=i.return,i=i.sibling}l&4&&(l=t.updateQueue,l!==null&&(a=l.retryQueue,a!==null&&(l.retryQueue=null,Mc(t,a))));break;case 19:Sn(i,t),An(t),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,Mc(t,l)));break;case 30:break;case 21:break;default:Sn(i,t),An(t)}}function An(t){var i=t.flags;if(i&2){try{for(var a,l=t.return;l!==null;){if(Ev(l)){a=l;break}l=l.return}if(a==null)throw Error(s(160));switch(a.tag){case 27:var h=a.stateNode,d=Vd(t);Oc(t,d,h);break;case 5:var v=a.stateNode;a.flags&32&&(Tn(v,""),a.flags&=-33);var S=Vd(t);Oc(t,S,v);break;case 3:case 4:var M=a.stateNode.containerInfo,G=Vd(t);kd(t,G,M);break;default:throw Error(s(161))}}catch(ee){nt(t,t.return,ee)}t.flags&=-3}i&4096&&(t.flags&=-4097)}function Iv(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var i=t;Iv(i),i.tag===5&&i.flags&1024&&i.stateNode.reset(),t=t.sibling}}function dr(t,i){if(i.subtreeFlags&8772)for(i=i.child;i!==null;)Sv(t,i.alternate,i),i=i.sibling}function ta(t){for(t=t.child;t!==null;){var i=t;switch(i.tag){case 0:case 11:case 14:case 15:Yr(4,i,i.return),ta(i);break;case 1:Bi(i,i.return);var a=i.stateNode;typeof a.componentWillUnmount=="function"&&vv(i,i.return,a),ta(i);break;case 27:Ml(i.stateNode);case 26:case 5:Bi(i,i.return),ta(i);break;case 22:i.memoizedState===null&&ta(i);break;case 30:ta(i);break;default:ta(i)}t=t.sibling}}function mr(t,i,a){for(a=a&&(i.subtreeFlags&8772)!==0,i=i.child;i!==null;){var l=i.alternate,h=t,d=i,v=d.flags;switch(d.tag){case 0:case 11:case 15:mr(h,d,a),Sl(4,d);break;case 1:if(mr(h,d,a),l=d,h=l.stateNode,typeof h.componentDidMount=="function")try{h.componentDidMount()}catch(G){nt(l,l.return,G)}if(l=d,h=l.updateQueue,h!==null){var S=l.stateNode;try{var M=h.shared.hiddenCallbacks;if(M!==null)for(h.shared.hiddenCallbacks=null,h=0;h<M.length;h++)ay(M[h],S)}catch(G){nt(l,l.return,G)}}a&&v&64&&yv(d),Al(d,d.return);break;case 27:Tv(d);case 26:case 5:mr(h,d,a),a&&l===null&&v&4&&_v(d),Al(d,d.return);break;case 12:mr(h,d,a);break;case 31:mr(h,d,a),a&&v&4&&Rv(h,d);break;case 13:mr(h,d,a),a&&v&4&&Cv(h,d);break;case 22:d.memoizedState===null&&mr(h,d,a),Al(d,d.return);break;case 30:break;default:mr(h,d,a)}i=i.sibling}}function Ld(t,i){var a=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),t=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(t=i.memoizedState.cachePool.pool),t!==a&&(t!=null&&t.refCount++,a!=null&&cl(a))}function jd(t,i){t=null,i.alternate!==null&&(t=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==t&&(i.refCount++,t!=null&&cl(t))}function gi(t,i,a,l){if(i.subtreeFlags&10256)for(i=i.child;i!==null;)Dv(t,i,a,l),i=i.sibling}function Dv(t,i,a,l){var h=i.flags;switch(i.tag){case 0:case 11:case 15:gi(t,i,a,l),h&2048&&Sl(9,i);break;case 1:gi(t,i,a,l);break;case 3:gi(t,i,a,l),h&2048&&(t=null,i.alternate!==null&&(t=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==t&&(i.refCount++,t!=null&&cl(t)));break;case 12:if(h&2048){gi(t,i,a,l),t=i.stateNode;try{var d=i.memoizedProps,v=d.id,S=d.onPostCommit;typeof S=="function"&&S(v,i.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(M){nt(i,i.return,M)}}else gi(t,i,a,l);break;case 31:gi(t,i,a,l);break;case 13:gi(t,i,a,l);break;case 23:break;case 22:d=i.stateNode,v=i.alternate,i.memoizedState!==null?d._visibility&2?gi(t,i,a,l):wl(t,i):d._visibility&2?gi(t,i,a,l):(d._visibility|=2,$a(t,i,a,l,(i.subtreeFlags&10256)!==0||!1)),h&2048&&Ld(v,i);break;case 24:gi(t,i,a,l),h&2048&&jd(i.alternate,i);break;default:gi(t,i,a,l)}}function $a(t,i,a,l,h){for(h=h&&((i.subtreeFlags&10256)!==0||!1),i=i.child;i!==null;){var d=t,v=i,S=a,M=l,G=v.flags;switch(v.tag){case 0:case 11:case 15:$a(d,v,S,M,h),Sl(8,v);break;case 23:break;case 22:var ee=v.stateNode;v.memoizedState!==null?ee._visibility&2?$a(d,v,S,M,h):wl(d,v):(ee._visibility|=2,$a(d,v,S,M,h)),h&&G&2048&&Ld(v.alternate,v);break;case 24:$a(d,v,S,M,h),h&&G&2048&&jd(v.alternate,v);break;default:$a(d,v,S,M,h)}i=i.sibling}}function wl(t,i){if(i.subtreeFlags&10256)for(i=i.child;i!==null;){var a=t,l=i,h=l.flags;switch(l.tag){case 22:wl(a,l),h&2048&&Ld(l.alternate,l);break;case 24:wl(a,l),h&2048&&jd(l.alternate,l);break;default:wl(a,l)}i=i.sibling}}var Rl=8192;function Ya(t,i,a){if(t.subtreeFlags&Rl)for(t=t.child;t!==null;)Nv(t,i,a),t=t.sibling}function Nv(t,i,a){switch(t.tag){case 26:Ya(t,i,a),t.flags&Rl&&t.memoizedState!==null&&Y1(a,pi,t.memoizedState,t.memoizedProps);break;case 5:Ya(t,i,a);break;case 3:case 4:var l=pi;pi=$c(t.stateNode.containerInfo),Ya(t,i,a),pi=l;break;case 22:t.memoizedState===null&&(l=t.alternate,l!==null&&l.memoizedState!==null?(l=Rl,Rl=16777216,Ya(t,i,a),Rl=l):Ya(t,i,a));break;default:Ya(t,i,a)}}function Ov(t){var i=t.alternate;if(i!==null&&(t=i.child,t!==null)){i.child=null;do i=t.sibling,t.sibling=null,t=i;while(t!==null)}}function Cl(t){var i=t.deletions;if((t.flags&16)!==0){if(i!==null)for(var a=0;a<i.length;a++){var l=i[a];Qt=l,Vv(l,t)}Ov(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)Mv(t),t=t.sibling}function Mv(t){switch(t.tag){case 0:case 11:case 15:Cl(t),t.flags&2048&&Yr(9,t,t.return);break;case 3:Cl(t);break;case 12:Cl(t);break;case 22:var i=t.stateNode;t.memoizedState!==null&&i._visibility&2&&(t.return===null||t.return.tag!==13)?(i._visibility&=-3,Vc(t)):Cl(t);break;default:Cl(t)}}function Vc(t){var i=t.deletions;if((t.flags&16)!==0){if(i!==null)for(var a=0;a<i.length;a++){var l=i[a];Qt=l,Vv(l,t)}Ov(t)}for(t=t.child;t!==null;){switch(i=t,i.tag){case 0:case 11:case 15:Yr(8,i,i.return),Vc(i);break;case 22:a=i.stateNode,a._visibility&2&&(a._visibility&=-3,Vc(i));break;default:Vc(i)}t=t.sibling}}function Vv(t,i){for(;Qt!==null;){var a=Qt;switch(a.tag){case 0:case 11:case 15:Yr(8,a,i);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var l=a.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:cl(a.memoizedState.cache)}if(l=a.child,l!==null)l.return=a,Qt=l;else e:for(a=t;Qt!==null;){l=Qt;var h=l.sibling,d=l.return;if(Av(l),l===a){Qt=null;break e}if(h!==null){h.return=d,Qt=h;break e}Qt=d}}}var u1={getCacheForType:function(t){var i=Zt(Nt),a=i.data.get(t);return a===void 0&&(a=t(),i.data.set(t,a)),a},cacheSignal:function(){return Zt(Nt).controller.signal}},c1=typeof WeakMap=="function"?WeakMap:Map,Ze=0,lt=null,Le=null,Ue=0,tt=0,Pn=null,Kr=!1,Ka=!1,Ud=!1,pr=0,vt=0,Xr=0,na=0,zd=0,Ln=0,Xa=0,xl=null,wn=null,Bd=!1,kc=0,kv=0,Pc=1/0,Lc=null,Wr=null,qt=0,Jr=null,Wa=null,gr=0,qd=0,Hd=null,Pv=null,Il=0,Fd=null;function jn(){return(Ze&2)!==0&&Ue!==0?Ue&-Ue:B.T!==null?Xd():ju()}function Lv(){if(Ln===0)if((Ue&536870912)===0||Ge){var t=Is;Is<<=1,(Is&3932160)===0&&(Is=262144),Ln=t}else Ln=536870912;return t=Vn.current,t!==null&&(t.flags|=32),Ln}function Rn(t,i,a){(t===lt&&(tt===2||tt===9)||t.cancelPendingCommit!==null)&&(Ja(t,0),Zr(t,Ue,Ln,!1)),Ds(t,a),((Ze&2)===0||t!==lt)&&(t===lt&&((Ze&2)===0&&(na|=a),vt===4&&Zr(t,Ue,Ln,!1)),qi(t))}function jv(t,i,a){if((Ze&6)!==0)throw Error(s(327));var l=!a&&(i&127)===0&&(i&t.expiredLanes)===0||ai(t,i),h=l?d1(t,i):Qd(t,i,!0),d=l;do{if(h===0){Ka&&!l&&Zr(t,i,0,!1);break}else{if(a=t.current.alternate,d&&!h1(a)){h=Qd(t,i,!1),d=!1;continue}if(h===2){if(d=i,t.errorRecoveryDisabledLanes&d)var v=0;else v=t.pendingLanes&-536870913,v=v!==0?v:v&536870912?536870912:0;if(v!==0){i=v;e:{var S=t;h=xl;var M=S.current.memoizedState.isDehydrated;if(M&&(Ja(S,v).flags|=256),v=Qd(S,v,!1),v!==2){if(Ud&&!M){S.errorRecoveryDisabledLanes|=d,na|=d,h=4;break e}d=wn,wn=h,d!==null&&(wn===null?wn=d:wn.push.apply(wn,d))}h=v}if(d=!1,h!==2)continue}}if(h===1){Ja(t,0),Zr(t,i,0,!0);break}e:{switch(l=t,d=h,d){case 0:case 1:throw Error(s(345));case 4:if((i&4194048)!==i)break;case 6:Zr(l,i,Ln,!Kr);break e;case 2:wn=null;break;case 3:case 5:break;default:throw Error(s(329))}if((i&62914560)===i&&(h=kc+300-pn(),10<h)){if(Zr(l,i,Ln,!Kr),Ai(l,0,!0)!==0)break e;gr=i,l.timeoutHandle=p_(Uv.bind(null,l,a,wn,Lc,Bd,i,Ln,na,Xa,Kr,d,"Throttled",-0,0),h);break e}Uv(l,a,wn,Lc,Bd,i,Ln,na,Xa,Kr,d,null,-0,0)}}break}while(!0);qi(t)}function Uv(t,i,a,l,h,d,v,S,M,G,ee,re,Q,K){if(t.timeoutHandle=-1,re=i.subtreeFlags,re&8192||(re&16785408)===16785408){re={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:ui},Nv(i,d,re);var ye=(d&62914560)===d?kc-pn():(d&4194048)===d?kv-pn():0;if(ye=K1(re,ye),ye!==null){gr=d,t.cancelPendingCommit=ye($v.bind(null,t,i,d,a,l,h,v,S,M,ee,re,null,Q,K)),Zr(t,d,v,!G);return}}$v(t,i,d,a,l,h,v,S,M)}function h1(t){for(var i=t;;){var a=i.tag;if((a===0||a===11||a===15)&&i.flags&16384&&(a=i.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var l=0;l<a.length;l++){var h=a[l],d=h.getSnapshot;h=h.value;try{if(!On(d(),h))return!1}catch{return!1}}if(a=i.child,i.subtreeFlags&16384&&a!==null)a.return=i,i=a;else{if(i===t)break;for(;i.sibling===null;){if(i.return===null||i.return===t)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function Zr(t,i,a,l){i&=~zd,i&=~na,t.suspendedLanes|=i,t.pingedLanes&=~i,l&&(t.warmLanes|=i),l=t.expirationTimes;for(var h=i;0<h;){var d=31-Et(h),v=1<<d;l[d]=-1,h&=~v}a!==0&&Ns(t,a,i)}function jc(){return(Ze&6)===0?(Dl(0),!1):!0}function Gd(){if(Le!==null){if(tt===0)var t=Le.return;else t=Le,sr=$s=null,od(t),qa=null,fl=0,t=Le;for(;t!==null;)gv(t.alternate,t),t=t.return;Le=null}}function Ja(t,i){var a=t.timeoutHandle;a!==-1&&(t.timeoutHandle=-1,N1(a)),a=t.cancelPendingCommit,a!==null&&(t.cancelPendingCommit=null,a()),gr=0,Gd(),lt=t,Le=a=ir(t.current,null),Ue=i,tt=0,Pn=null,Kr=!1,Ka=ai(t,i),Ud=!1,Xa=Ln=zd=na=Xr=vt=0,wn=xl=null,Bd=!1,(i&8)!==0&&(i|=i&32);var l=t.entangledLanes;if(l!==0)for(t=t.entanglements,l&=i;0<l;){var h=31-Et(l),d=1<<h;i|=t[h],l&=~d}return pr=i,sc(),a}function zv(t,i){Ve=null,B.H=El,i===Ba||i===dc?(i=ny(),tt=3):i===Kf?(i=ny(),tt=4):tt=i===Sd?8:i!==null&&typeof i=="object"&&typeof i.then=="function"?6:1,Pn=i,Le===null&&(vt=1,Cc(t,Xn(i,t.current)))}function Bv(){var t=Vn.current;return t===null?!0:(Ue&4194048)===Ue?ei===null:(Ue&62914560)===Ue||(Ue&536870912)!==0?t===ei:!1}function qv(){var t=B.H;return B.H=El,t===null?El:t}function Hv(){var t=B.A;return B.A=u1,t}function Uc(){vt=4,Kr||(Ue&4194048)!==Ue&&Vn.current!==null||(Ka=!0),(Xr&134217727)===0&&(na&134217727)===0||lt===null||Zr(lt,Ue,Ln,!1)}function Qd(t,i,a){var l=Ze;Ze|=2;var h=qv(),d=Hv();(lt!==t||Ue!==i)&&(Lc=null,Ja(t,i)),i=!1;var v=vt;e:do try{if(tt!==0&&Le!==null){var S=Le,M=Pn;switch(tt){case 8:Gd(),v=6;break e;case 3:case 2:case 9:case 6:Vn.current===null&&(i=!0);var G=tt;if(tt=0,Pn=null,Za(t,S,M,G),a&&Ka){v=0;break e}break;default:G=tt,tt=0,Pn=null,Za(t,S,M,G)}}f1(),v=vt;break}catch(ee){zv(t,ee)}while(!0);return i&&t.shellSuspendCounter++,sr=$s=null,Ze=l,B.H=h,B.A=d,Le===null&&(lt=null,Ue=0,sc()),v}function f1(){for(;Le!==null;)Fv(Le)}function d1(t,i){var a=Ze;Ze|=2;var l=qv(),h=Hv();lt!==t||Ue!==i?(Lc=null,Pc=pn()+500,Ja(t,i)):Ka=ai(t,i);e:do try{if(tt!==0&&Le!==null){i=Le;var d=Pn;t:switch(tt){case 1:tt=0,Pn=null,Za(t,i,d,1);break;case 2:case 9:if(ey(d)){tt=0,Pn=null,Gv(i);break}i=function(){tt!==2&&tt!==9||lt!==t||(tt=7),qi(t)},d.then(i,i);break e;case 3:tt=7;break e;case 4:tt=5;break e;case 7:ey(d)?(tt=0,Pn=null,Gv(i)):(tt=0,Pn=null,Za(t,i,d,7));break;case 5:var v=null;switch(Le.tag){case 26:v=Le.memoizedState;case 5:case 27:var S=Le;if(v?D_(v):S.stateNode.complete){tt=0,Pn=null;var M=S.sibling;if(M!==null)Le=M;else{var G=S.return;G!==null?(Le=G,zc(G)):Le=null}break t}}tt=0,Pn=null,Za(t,i,d,5);break;case 6:tt=0,Pn=null,Za(t,i,d,6);break;case 8:Gd(),vt=6;break e;default:throw Error(s(462))}}m1();break}catch(ee){zv(t,ee)}while(!0);return sr=$s=null,B.H=l,B.A=h,Ze=a,Le!==null?0:(lt=null,Ue=0,sc(),vt)}function m1(){for(;Le!==null&&!bf();)Fv(Le)}function Fv(t){var i=mv(t.alternate,t,pr);t.memoizedProps=t.pendingProps,i===null?zc(t):Le=i}function Gv(t){var i=t,a=i.alternate;switch(i.tag){case 15:case 0:i=lv(a,i,i.pendingProps,i.type,void 0,Ue);break;case 11:i=lv(a,i,i.pendingProps,i.type.render,i.ref,Ue);break;case 5:od(i);default:gv(a,i),i=Le=Hg(i,pr),i=mv(a,i,pr)}t.memoizedProps=t.pendingProps,i===null?zc(t):Le=i}function Za(t,i,a,l){sr=$s=null,od(i),qa=null,fl=0;var h=i.return;try{if(n1(t,h,i,a,Ue)){vt=1,Cc(t,Xn(a,t.current)),Le=null;return}}catch(d){if(h!==null)throw Le=h,d;vt=1,Cc(t,Xn(a,t.current)),Le=null;return}i.flags&32768?(Ge||l===1?t=!0:Ka||(Ue&536870912)!==0?t=!1:(Kr=t=!0,(l===2||l===9||l===3||l===6)&&(l=Vn.current,l!==null&&l.tag===13&&(l.flags|=16384))),Qv(i,t)):zc(i)}function zc(t){var i=t;do{if((i.flags&32768)!==0){Qv(i,Kr);return}t=i.return;var a=s1(i.alternate,i,pr);if(a!==null){Le=a;return}if(i=i.sibling,i!==null){Le=i;return}Le=i=t}while(i!==null);vt===0&&(vt=5)}function Qv(t,i){do{var a=a1(t.alternate,t);if(a!==null){a.flags&=32767,Le=a;return}if(a=t.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!i&&(t=t.sibling,t!==null)){Le=t;return}Le=t=a}while(t!==null);vt=6,Le=null}function $v(t,i,a,l,h,d,v,S,M){t.cancelPendingCommit=null;do Bc();while(qt!==0);if((Ze&6)!==0)throw Error(s(327));if(i!==null){if(i===t.current)throw Error(s(177));if(d=i.lanes|i.childLanes,d|=Vf,wf(t,a,d,v,S,M),t===lt&&(Le=lt=null,Ue=0),Wa=i,Jr=t,gr=a,qd=d,Hd=h,Pv=l,(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,v1(Ir,function(){return Jv(),null})):(t.callbackNode=null,t.callbackPriority=0),l=(i.flags&13878)!==0,(i.subtreeFlags&13878)!==0||l){l=B.T,B.T=null,h=W.p,W.p=2,v=Ze,Ze|=4;try{o1(t,i,a)}finally{Ze=v,W.p=h,B.T=l}}qt=1,Yv(),Kv(),Xv()}}function Yv(){if(qt===1){qt=0;var t=Jr,i=Wa,a=(i.flags&13878)!==0;if((i.subtreeFlags&13878)!==0||a){a=B.T,B.T=null;var l=W.p;W.p=2;var h=Ze;Ze|=4;try{xv(i,t);var d=rm,v=Vg(t.containerInfo),S=d.focusedElem,M=d.selectionRange;if(v!==S&&S&&S.ownerDocument&&Mg(S.ownerDocument.documentElement,S)){if(M!==null&&If(S)){var G=M.start,ee=M.end;if(ee===void 0&&(ee=G),"selectionStart"in S)S.selectionStart=G,S.selectionEnd=Math.min(ee,S.value.length);else{var re=S.ownerDocument||document,Q=re&&re.defaultView||window;if(Q.getSelection){var K=Q.getSelection(),ye=S.textContent.length,Re=Math.min(M.start,ye),at=M.end===void 0?Re:Math.min(M.end,ye);!K.extend&&Re>at&&(v=at,at=Re,Re=v);var U=Og(S,Re),j=Og(S,at);if(U&&j&&(K.rangeCount!==1||K.anchorNode!==U.node||K.anchorOffset!==U.offset||K.focusNode!==j.node||K.focusOffset!==j.offset)){var F=re.createRange();F.setStart(U.node,U.offset),K.removeAllRanges(),Re>at?(K.addRange(F),K.extend(j.node,j.offset)):(F.setEnd(j.node,j.offset),K.addRange(F))}}}}for(re=[],K=S;K=K.parentNode;)K.nodeType===1&&re.push({element:K,left:K.scrollLeft,top:K.scrollTop});for(typeof S.focus=="function"&&S.focus(),S=0;S<re.length;S++){var ie=re[S];ie.element.scrollLeft=ie.left,ie.element.scrollTop=ie.top}}Zc=!!im,rm=im=null}finally{Ze=h,W.p=l,B.T=a}}t.current=i,qt=2}}function Kv(){if(qt===2){qt=0;var t=Jr,i=Wa,a=(i.flags&8772)!==0;if((i.subtreeFlags&8772)!==0||a){a=B.T,B.T=null;var l=W.p;W.p=2;var h=Ze;Ze|=4;try{Sv(t,i.alternate,i)}finally{Ze=h,W.p=l,B.T=a}}qt=3}}function Xv(){if(qt===4||qt===3){qt=0,Nu();var t=Jr,i=Wa,a=gr,l=Pv;(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?qt=5:(qt=0,Wa=Jr=null,Wv(t,t.pendingLanes));var h=t.pendingLanes;if(h===0&&(Wr=null),Zi(a),i=i.stateNode,Xt&&typeof Xt.onCommitFiberRoot=="function")try{Xt.onCommitFiberRoot(si,i,void 0,(i.current.flags&128)===128)}catch{}if(l!==null){i=B.T,h=W.p,W.p=2,B.T=null;try{for(var d=t.onRecoverableError,v=0;v<l.length;v++){var S=l[v];d(S.value,{componentStack:S.stack})}}finally{B.T=i,W.p=h}}(gr&3)!==0&&Bc(),qi(t),h=t.pendingLanes,(a&261930)!==0&&(h&42)!==0?t===Fd?Il++:(Il=0,Fd=t):Il=0,Dl(0)}}function Wv(t,i){(t.pooledCacheLanes&=i)===0&&(i=t.pooledCache,i!=null&&(t.pooledCache=null,cl(i)))}function Bc(){return Yv(),Kv(),Xv(),Jv()}function Jv(){if(qt!==5)return!1;var t=Jr,i=qd;qd=0;var a=Zi(gr),l=B.T,h=W.p;try{W.p=32>a?32:a,B.T=null,a=Hd,Hd=null;var d=Jr,v=gr;if(qt=0,Wa=Jr=null,gr=0,(Ze&6)!==0)throw Error(s(331));var S=Ze;if(Ze|=4,Mv(d.current),Dv(d,d.current,v,a),Ze=S,Dl(0,!1),Xt&&typeof Xt.onPostCommitFiberRoot=="function")try{Xt.onPostCommitFiberRoot(si,d)}catch{}return!0}finally{W.p=h,B.T=l,Wv(t,i)}}function Zv(t,i,a){i=Xn(a,i),i=bd(t.stateNode,i,2),t=Gr(t,i,2),t!==null&&(Ds(t,2),qi(t))}function nt(t,i,a){if(t.tag===3)Zv(t,t,a);else for(;i!==null;){if(i.tag===3){Zv(i,t,a);break}else if(i.tag===1){var l=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(Wr===null||!Wr.has(l))){t=Xn(a,t),a=ev(2),l=Gr(i,a,2),l!==null&&(tv(a,l,i,t),Ds(l,2),qi(l));break}}i=i.return}}function $d(t,i,a){var l=t.pingCache;if(l===null){l=t.pingCache=new c1;var h=new Set;l.set(i,h)}else h=l.get(i),h===void 0&&(h=new Set,l.set(i,h));h.has(a)||(Ud=!0,h.add(a),t=p1.bind(null,t,i,a),i.then(t,t))}function p1(t,i,a){var l=t.pingCache;l!==null&&l.delete(i),t.pingedLanes|=t.suspendedLanes&a,t.warmLanes&=~a,lt===t&&(Ue&a)===a&&(vt===4||vt===3&&(Ue&62914560)===Ue&&300>pn()-kc?(Ze&2)===0&&Ja(t,0):zd|=a,Xa===Ue&&(Xa=0)),qi(t)}function e_(t,i){i===0&&(i=Lu()),t=Fs(t,i),t!==null&&(Ds(t,i),qi(t))}function g1(t){var i=t.memoizedState,a=0;i!==null&&(a=i.retryLane),e_(t,a)}function y1(t,i){var a=0;switch(t.tag){case 31:case 13:var l=t.stateNode,h=t.memoizedState;h!==null&&(a=h.retryLane);break;case 19:l=t.stateNode;break;case 22:l=t.stateNode._retryCache;break;default:throw Error(s(314))}l!==null&&l.delete(i),e_(t,a)}function v1(t,i){return Bt(t,i)}var qc=null,eo=null,Yd=!1,Hc=!1,Kd=!1,es=0;function qi(t){t!==eo&&t.next===null&&(eo===null?qc=eo=t:eo=eo.next=t),Hc=!0,Yd||(Yd=!0,E1())}function Dl(t,i){if(!Kd&&Hc){Kd=!0;do for(var a=!1,l=qc;l!==null;){if(t!==0){var h=l.pendingLanes;if(h===0)var d=0;else{var v=l.suspendedLanes,S=l.pingedLanes;d=(1<<31-Et(42|t)+1)-1,d&=h&~(v&~S),d=d&201326741?d&201326741|1:d?d|2:0}d!==0&&(a=!0,r_(l,d))}else d=Ue,d=Ai(l,l===lt?d:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(d&3)===0||ai(l,d)||(a=!0,r_(l,d));l=l.next}while(a);Kd=!1}}function _1(){t_()}function t_(){Hc=Yd=!1;var t=0;es!==0&&D1()&&(t=es);for(var i=pn(),a=null,l=qc;l!==null;){var h=l.next,d=n_(l,i);d===0?(l.next=null,a===null?qc=h:a.next=h,h===null&&(eo=a)):(a=l,(t!==0||(d&3)!==0)&&(Hc=!0)),l=h}qt!==0&&qt!==5||Dl(t),es!==0&&(es=0)}function n_(t,i){for(var a=t.suspendedLanes,l=t.pingedLanes,h=t.expirationTimes,d=t.pendingLanes&-62914561;0<d;){var v=31-Et(d),S=1<<v,M=h[v];M===-1?((S&a)===0||(S&l)!==0)&&(h[v]=Af(S,i)):M<=i&&(t.expiredLanes|=S),d&=~S}if(i=lt,a=Ue,a=Ai(t,t===i?a:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l=t.callbackNode,a===0||t===i&&(tt===2||tt===9)||t.cancelPendingCommit!==null)return l!==null&&l!==null&&xr(l),t.callbackNode=null,t.callbackPriority=0;if((a&3)===0||ai(t,a)){if(i=a&-a,i===t.callbackPriority)return i;switch(l!==null&&xr(l),Zi(a)){case 2:case 8:a=zo;break;case 32:a=Ir;break;case 268435456:a=Ou;break;default:a=Ir}return l=i_.bind(null,t),a=Bt(a,l),t.callbackPriority=i,t.callbackNode=a,i}return l!==null&&l!==null&&xr(l),t.callbackPriority=2,t.callbackNode=null,2}function i_(t,i){if(qt!==0&&qt!==5)return t.callbackNode=null,t.callbackPriority=0,null;var a=t.callbackNode;if(Bc()&&t.callbackNode!==a)return null;var l=Ue;return l=Ai(t,t===lt?l:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l===0?null:(jv(t,l,i),n_(t,pn()),t.callbackNode!=null&&t.callbackNode===a?i_.bind(null,t):null)}function r_(t,i){if(Bc())return null;jv(t,i,!0)}function E1(){O1(function(){(Ze&6)!==0?Bt(Uo,_1):t_()})}function Xd(){if(es===0){var t=Ua;t===0&&(t=bi,bi<<=1,(bi&261888)===0&&(bi=256)),es=t}return es}function s_(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:Aa(""+t)}function a_(t,i){var a=i.ownerDocument.createElement("input");return a.name=i.name,a.value=i.value,t.id&&a.setAttribute("form",t.id),i.parentNode.insertBefore(a,i),t=new FormData(t),a.parentNode.removeChild(a),t}function T1(t,i,a,l,h){if(i==="submit"&&a&&a.stateNode===h){var d=s_((h[Ft]||null).action),v=l.submitter;v&&(i=(i=v[Ft]||null)?s_(i.formAction):v.getAttribute("formAction"),i!==null&&(d=i,v=null));var S=new ki("action","action",null,l,h);t.push({event:S,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(es!==0){var M=v?a_(h,v):new FormData(h);gd(a,{pending:!0,data:M,method:h.method,action:d},null,M)}}else typeof d=="function"&&(S.preventDefault(),M=v?a_(h,v):new FormData(h),gd(a,{pending:!0,data:M,method:h.method,action:d},d,M))},currentTarget:h}]})}}for(var Wd=0;Wd<Mf.length;Wd++){var Jd=Mf[Wd],b1=Jd.toLowerCase(),S1=Jd[0].toUpperCase()+Jd.slice(1);mi(b1,"on"+S1)}mi(Lg,"onAnimationEnd"),mi(jg,"onAnimationIteration"),mi(Ug,"onAnimationStart"),mi("dblclick","onDoubleClick"),mi("focusin","onFocus"),mi("focusout","onBlur"),mi(US,"onTransitionRun"),mi(zS,"onTransitionStart"),mi(BS,"onTransitionCancel"),mi(zg,"onTransitionEnd"),Ni("onMouseEnter",["mouseout","mouseover"]),Ni("onMouseLeave",["mouseout","mouseover"]),Ni("onPointerEnter",["pointerout","pointerover"]),Ni("onPointerLeave",["pointerout","pointerover"]),Di("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Di("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Di("onBeforeInput",["compositionend","keypress","textInput","paste"]),Di("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Di("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Di("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Nl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),A1=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Nl));function o_(t,i){i=(i&4)!==0;for(var a=0;a<t.length;a++){var l=t[a],h=l.event;l=l.listeners;e:{var d=void 0;if(i)for(var v=l.length-1;0<=v;v--){var S=l[v],M=S.instance,G=S.currentTarget;if(S=S.listener,M!==d&&h.isPropagationStopped())break e;d=S,h.currentTarget=G;try{d(h)}catch(ee){rc(ee)}h.currentTarget=null,d=M}else for(v=0;v<l.length;v++){if(S=l[v],M=S.instance,G=S.currentTarget,S=S.listener,M!==d&&h.isPropagationStopped())break e;d=S,h.currentTarget=G;try{d(h)}catch(ee){rc(ee)}h.currentTarget=null,d=M}}}}function je(t,i){var a=i[_a];a===void 0&&(a=i[_a]=new Set);var l=t+"__bubble";a.has(l)||(l_(i,t,2,!1),a.add(l))}function Zd(t,i,a){var l=0;i&&(l|=4),l_(a,t,l,i)}var Fc="_reactListening"+Math.random().toString(36).slice(2);function em(t){if(!t[Fc]){t[Fc]=!0,Ho.forEach(function(a){a!=="selectionchange"&&(A1.has(a)||Zd(a,!1,t),Zd(a,!0,t))});var i=t.nodeType===9?t:t.ownerDocument;i===null||i[Fc]||(i[Fc]=!0,Zd("selectionchange",!1,i))}}function l_(t,i,a,l){switch(L_(i)){case 2:var h=J1;break;case 8:h=Z1;break;default:h=pm}a=h.bind(null,i,a,t),h=void 0,!Ps||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(h=!0),l?h!==void 0?t.addEventListener(i,a,{capture:!0,passive:h}):t.addEventListener(i,a,!0):h!==void 0?t.addEventListener(i,a,{passive:h}):t.addEventListener(i,a,!1)}function tm(t,i,a,l,h){var d=l;if((i&1)===0&&(i&2)===0&&l!==null)e:for(;;){if(l===null)return;var v=l.tag;if(v===3||v===4){var S=l.stateNode.containerInfo;if(S===h)break;if(v===4)for(v=l.return;v!==null;){var M=v.tag;if((M===3||M===4)&&v.stateNode.containerInfo===h)return;v=v.return}for(;S!==null;){if(v=xi(S),v===null)return;if(M=v.tag,M===5||M===6||M===26||M===27){l=d=v;continue e}S=S.parentNode}}l=l.return}kr(function(){var G=d,ee=Qn(a),re=[];e:{var Q=Bg.get(t);if(Q!==void 0){var K=ki,ye=t;switch(t){case"keypress":if(js(a)===0)break e;case"keydown":case"keyup":K=tc;break;case"focusin":ye="focus",K=zs;break;case"focusout":ye="blur",K=zs;break;case"beforeblur":case"afterblur":K=zs;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":K=nl;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":K=Qu;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":K=y;break;case Lg:case jg:case Ug:K=Yu;break;case zg:K=w;break;case"scroll":case"scrollend":K=tl;break;case"wheel":K=Y;break;case"copy":case"cut":case"paste":K=Ku;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":K=nr;break;case"toggle":case"beforetoggle":K=Me}var Re=(i&4)!==0,at=!Re&&(t==="scroll"||t==="scrollend"),U=Re?Q!==null?Q+"Capture":null:Q;Re=[];for(var j=G,F;j!==null;){var ie=j;if(F=ie.stateNode,ie=ie.tag,ie!==5&&ie!==26&&ie!==27||F===null||U===null||(ie=ci(j,U),ie!=null&&Re.push(Ol(j,ie,F))),at)break;j=j.return}0<Re.length&&(Q=new K(Q,ye,null,a,ee),re.push({event:Q,listeners:Re}))}}if((i&7)===0){e:{if(Q=t==="mouseover"||t==="pointerover",K=t==="mouseout"||t==="pointerout",Q&&a!==Jo&&(ye=a.relatedTarget||a.fromElement)&&(xi(ye)||ye[Ri]))break e;if((K||Q)&&(Q=ee.window===ee?ee:(Q=ee.ownerDocument)?Q.defaultView||Q.parentWindow:window,K?(ye=a.relatedTarget||a.toElement,K=G,ye=ye?xi(ye):null,ye!==null&&(at=u(ye),Re=ye.tag,ye!==at||Re!==5&&Re!==27&&Re!==6)&&(ye=null)):(K=null,ye=G),K!==ye)){if(Re=nl,ie="onMouseLeave",U="onMouseEnter",j="mouse",(t==="pointerout"||t==="pointerover")&&(Re=nr,ie="onPointerLeave",U="onPointerEnter",j="pointer"),at=K==null?Q:Dn(K),F=ye==null?Q:Dn(ye),Q=new Re(ie,j+"leave",K,a,ee),Q.target=at,Q.relatedTarget=F,ie=null,xi(ee)===G&&(Re=new Re(U,j+"enter",ye,a,ee),Re.target=F,Re.relatedTarget=at,ie=Re),at=ie,K&&ye)t:{for(Re=w1,U=K,j=ye,F=0,ie=U;ie;ie=Re(ie))F++;ie=0;for(var be=j;be;be=Re(be))ie++;for(;0<F-ie;)U=Re(U),F--;for(;0<ie-F;)j=Re(j),ie--;for(;F--;){if(U===j||j!==null&&U===j.alternate){Re=U;break t}U=Re(U),j=Re(j)}Re=null}else Re=null;K!==null&&u_(re,Q,K,Re,!1),ye!==null&&at!==null&&u_(re,at,ye,Re,!0)}}e:{if(Q=G?Dn(G):window,K=Q.nodeName&&Q.nodeName.toLowerCase(),K==="select"||K==="input"&&Q.type==="file")var Ke=Rg;else if(Ag(Q))if(Cg)Ke=PS;else{Ke=VS;var ve=MS}else K=Q.nodeName,!K||K.toLowerCase()!=="input"||Q.type!=="checkbox"&&Q.type!=="radio"?G&&Sa(G.elementType)&&(Ke=Rg):Ke=kS;if(Ke&&(Ke=Ke(t,G))){wg(re,Ke,a,ee);break e}ve&&ve(t,Q,G),t==="focusout"&&G&&Q.type==="number"&&G.memoizedProps.value!=null&&Ko(Q,"number",Q.value)}switch(ve=G?Dn(G):window,t){case"focusin":(Ag(ve)||ve.contentEditable==="true")&&(Na=ve,Df=G,ol=null);break;case"focusout":ol=Df=Na=null;break;case"mousedown":Nf=!0;break;case"contextmenu":case"mouseup":case"dragend":Nf=!1,kg(re,a,ee);break;case"selectionchange":if(jS)break;case"keydown":case"keyup":kg(re,a,ee)}var ke;if(Je)e:{switch(t){case"compositionstart":var ze="onCompositionStart";break e;case"compositionend":ze="onCompositionEnd";break e;case"compositionupdate":ze="onCompositionUpdate";break e}ze=void 0}else Da?Bs(t,a)&&(ze="onCompositionEnd"):t==="keydown"&&a.keyCode===229&&(ze="onCompositionStart");ze&&(ji&&a.locale!=="ko"&&(Da||ze!=="onCompositionStart"?ze==="onCompositionEnd"&&Da&&(ke=el()):(Vi=ee,Zo="value"in Vi?Vi.value:Vi.textContent,Da=!0)),ve=Gc(G,ze),0<ve.length&&(ze=new Li(ze,t,null,a,ee),re.push({event:ze,listeners:ve}),ke?ze.data=ke:(ke=Ia(a),ke!==null&&(ze.data=ke)))),(ke=Yn?IS(t,a):DS(t,a))&&(ze=Gc(G,"onBeforeInput"),0<ze.length&&(ve=new Li("onBeforeInput","beforeinput",null,a,ee),re.push({event:ve,listeners:ze}),ve.data=ke)),T1(re,t,G,a,ee)}o_(re,i)})}function Ol(t,i,a){return{instance:t,listener:i,currentTarget:a}}function Gc(t,i){for(var a=i+"Capture",l=[];t!==null;){var h=t,d=h.stateNode;if(h=h.tag,h!==5&&h!==26&&h!==27||d===null||(h=ci(t,a),h!=null&&l.unshift(Ol(t,h,d)),h=ci(t,i),h!=null&&l.push(Ol(t,h,d))),t.tag===3)return l;t=t.return}return[]}function w1(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function u_(t,i,a,l,h){for(var d=i._reactName,v=[];a!==null&&a!==l;){var S=a,M=S.alternate,G=S.stateNode;if(S=S.tag,M!==null&&M===l)break;S!==5&&S!==26&&S!==27||G===null||(M=G,h?(G=ci(a,d),G!=null&&v.unshift(Ol(a,G,M))):h||(G=ci(a,d),G!=null&&v.push(Ol(a,G,M)))),a=a.return}v.length!==0&&t.push({event:i,listeners:v})}var R1=/\r\n?/g,C1=/\u0000|\uFFFD/g;function c_(t){return(typeof t=="string"?t:""+t).replace(R1,`
`).replace(C1,"")}function h_(t,i){return i=c_(i),c_(t)===i}function st(t,i,a,l,h,d){switch(a){case"children":typeof l=="string"?i==="body"||i==="textarea"&&l===""||Tn(t,l):(typeof l=="number"||typeof l=="bigint")&&i!=="body"&&Tn(t,""+l);break;case"className":Nn(t,"class",l);break;case"tabIndex":Nn(t,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":Nn(t,a,l);break;case"style":Wo(t,l,d);break;case"data":if(i!=="object"){Nn(t,"data",l);break}case"src":case"href":if(l===""&&(i!=="a"||a!=="href")){t.removeAttribute(a);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(a);break}l=Aa(""+l),t.setAttribute(a,l);break;case"action":case"formAction":if(typeof l=="function"){t.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof d=="function"&&(a==="formAction"?(i!=="input"&&st(t,i,"name",h.name,h,null),st(t,i,"formEncType",h.formEncType,h,null),st(t,i,"formMethod",h.formMethod,h,null),st(t,i,"formTarget",h.formTarget,h,null)):(st(t,i,"encType",h.encType,h,null),st(t,i,"method",h.method,h,null),st(t,i,"target",h.target,h,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(a);break}l=Aa(""+l),t.setAttribute(a,l);break;case"onClick":l!=null&&(t.onclick=ui);break;case"onScroll":l!=null&&je("scroll",t);break;case"onScrollEnd":l!=null&&je("scrollend",t);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(s(61));if(a=l.__html,a!=null){if(h.children!=null)throw Error(s(60));t.innerHTML=a}}break;case"multiple":t.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":t.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){t.removeAttribute("xlink:href");break}a=Aa(""+l),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,""+l):t.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,""):t.removeAttribute(a);break;case"capture":case"download":l===!0?t.setAttribute(a,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,l):t.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?t.setAttribute(a,l):t.removeAttribute(a);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?t.removeAttribute(a):t.setAttribute(a,l);break;case"popover":je("beforetoggle",t),je("toggle",t),Ta(t,"popover",l);break;case"xlinkActuate":Dt(t,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":Dt(t,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":Dt(t,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":Dt(t,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":Dt(t,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":Dt(t,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":Dt(t,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":Dt(t,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":Dt(t,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":Ta(t,"is",l);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=Gu.get(a)||a,Ta(t,a,l))}}function nm(t,i,a,l,h,d){switch(a){case"style":Wo(t,l,d);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(s(61));if(a=l.__html,a!=null){if(h.children!=null)throw Error(s(60));t.innerHTML=a}}break;case"children":typeof l=="string"?Tn(t,l):(typeof l=="number"||typeof l=="bigint")&&Tn(t,""+l);break;case"onScroll":l!=null&&je("scroll",t);break;case"onScrollEnd":l!=null&&je("scrollend",t);break;case"onClick":l!=null&&(t.onclick=ui);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Fo.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(h=a.endsWith("Capture"),i=a.slice(2,h?a.length-7:void 0),d=t[Ft]||null,d=d!=null?d[a]:null,typeof d=="function"&&t.removeEventListener(i,d,h),typeof l=="function")){typeof d!="function"&&d!==null&&(a in t?t[a]=null:t.hasAttribute(a)&&t.removeAttribute(a)),t.addEventListener(i,l,h);break e}a in t?t[a]=l:l===!0?t.setAttribute(a,""):Ta(t,a,l)}}}function tn(t,i,a){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":je("error",t),je("load",t);var l=!1,h=!1,d;for(d in a)if(a.hasOwnProperty(d)){var v=a[d];if(v!=null)switch(d){case"src":l=!0;break;case"srcSet":h=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,i));default:st(t,i,d,v,a,null)}}h&&st(t,i,"srcSet",a.srcSet,a,null),l&&st(t,i,"src",a.src,a,null);return;case"input":je("invalid",t);var S=d=v=h=null,M=null,G=null;for(l in a)if(a.hasOwnProperty(l)){var ee=a[l];if(ee!=null)switch(l){case"name":h=ee;break;case"type":v=ee;break;case"checked":M=ee;break;case"defaultChecked":G=ee;break;case"value":d=ee;break;case"defaultValue":S=ee;break;case"children":case"dangerouslySetInnerHTML":if(ee!=null)throw Error(s(137,i));break;default:st(t,i,l,ee,a,null)}}qu(t,d,S,M,G,v,h,!1);return;case"select":je("invalid",t),l=v=d=null;for(h in a)if(a.hasOwnProperty(h)&&(S=a[h],S!=null))switch(h){case"value":d=S;break;case"defaultValue":v=S;break;case"multiple":l=S;default:st(t,i,h,S,a,null)}i=d,a=v,t.multiple=!!l,i!=null?Nr(t,!!l,i,!1):a!=null&&Nr(t,!!l,a,!0);return;case"textarea":je("invalid",t),d=h=l=null;for(v in a)if(a.hasOwnProperty(v)&&(S=a[v],S!=null))switch(v){case"value":l=S;break;case"defaultValue":h=S;break;case"children":d=S;break;case"dangerouslySetInnerHTML":if(S!=null)throw Error(s(91));break;default:st(t,i,v,S,a,null)}Or(t,l,h,d);return;case"option":for(M in a)a.hasOwnProperty(M)&&(l=a[M],l!=null)&&(M==="selected"?t.selected=l&&typeof l!="function"&&typeof l!="symbol":st(t,i,M,l,a,null));return;case"dialog":je("beforetoggle",t),je("toggle",t),je("cancel",t),je("close",t);break;case"iframe":case"object":je("load",t);break;case"video":case"audio":for(l=0;l<Nl.length;l++)je(Nl[l],t);break;case"image":je("error",t),je("load",t);break;case"details":je("toggle",t);break;case"embed":case"source":case"link":je("error",t),je("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(G in a)if(a.hasOwnProperty(G)&&(l=a[G],l!=null))switch(G){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,i));default:st(t,i,G,l,a,null)}return;default:if(Sa(i)){for(ee in a)a.hasOwnProperty(ee)&&(l=a[ee],l!==void 0&&nm(t,i,ee,l,a,void 0));return}}for(S in a)a.hasOwnProperty(S)&&(l=a[S],l!=null&&st(t,i,S,l,a,null))}function x1(t,i,a,l){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var h=null,d=null,v=null,S=null,M=null,G=null,ee=null;for(K in a){var re=a[K];if(a.hasOwnProperty(K)&&re!=null)switch(K){case"checked":break;case"value":break;case"defaultValue":M=re;default:l.hasOwnProperty(K)||st(t,i,K,null,l,re)}}for(var Q in l){var K=l[Q];if(re=a[Q],l.hasOwnProperty(Q)&&(K!=null||re!=null))switch(Q){case"type":d=K;break;case"name":h=K;break;case"checked":G=K;break;case"defaultChecked":ee=K;break;case"value":v=K;break;case"defaultValue":S=K;break;case"children":case"dangerouslySetInnerHTML":if(K!=null)throw Error(s(137,i));break;default:K!==re&&st(t,i,Q,K,l,re)}}ba(t,v,S,M,G,ee,d,h);return;case"select":K=v=S=Q=null;for(d in a)if(M=a[d],a.hasOwnProperty(d)&&M!=null)switch(d){case"value":break;case"multiple":K=M;default:l.hasOwnProperty(d)||st(t,i,d,null,l,M)}for(h in l)if(d=l[h],M=a[h],l.hasOwnProperty(h)&&(d!=null||M!=null))switch(h){case"value":Q=d;break;case"defaultValue":S=d;break;case"multiple":v=d;default:d!==M&&st(t,i,h,d,l,M)}i=S,a=v,l=K,Q!=null?Nr(t,!!a,Q,!1):!!l!=!!a&&(i!=null?Nr(t,!!a,i,!0):Nr(t,!!a,a?[]:"",!1));return;case"textarea":K=Q=null;for(S in a)if(h=a[S],a.hasOwnProperty(S)&&h!=null&&!l.hasOwnProperty(S))switch(S){case"value":break;case"children":break;default:st(t,i,S,null,l,h)}for(v in l)if(h=l[v],d=a[v],l.hasOwnProperty(v)&&(h!=null||d!=null))switch(v){case"value":Q=h;break;case"defaultValue":K=h;break;case"children":break;case"dangerouslySetInnerHTML":if(h!=null)throw Error(s(91));break;default:h!==d&&st(t,i,v,h,l,d)}Hu(t,Q,K);return;case"option":for(var ye in a)Q=a[ye],a.hasOwnProperty(ye)&&Q!=null&&!l.hasOwnProperty(ye)&&(ye==="selected"?t.selected=!1:st(t,i,ye,null,l,Q));for(M in l)Q=l[M],K=a[M],l.hasOwnProperty(M)&&Q!==K&&(Q!=null||K!=null)&&(M==="selected"?t.selected=Q&&typeof Q!="function"&&typeof Q!="symbol":st(t,i,M,Q,l,K));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Re in a)Q=a[Re],a.hasOwnProperty(Re)&&Q!=null&&!l.hasOwnProperty(Re)&&st(t,i,Re,null,l,Q);for(G in l)if(Q=l[G],K=a[G],l.hasOwnProperty(G)&&Q!==K&&(Q!=null||K!=null))switch(G){case"children":case"dangerouslySetInnerHTML":if(Q!=null)throw Error(s(137,i));break;default:st(t,i,G,Q,l,K)}return;default:if(Sa(i)){for(var at in a)Q=a[at],a.hasOwnProperty(at)&&Q!==void 0&&!l.hasOwnProperty(at)&&nm(t,i,at,void 0,l,Q);for(ee in l)Q=l[ee],K=a[ee],!l.hasOwnProperty(ee)||Q===K||Q===void 0&&K===void 0||nm(t,i,ee,Q,l,K);return}}for(var U in a)Q=a[U],a.hasOwnProperty(U)&&Q!=null&&!l.hasOwnProperty(U)&&st(t,i,U,null,l,Q);for(re in l)Q=l[re],K=a[re],!l.hasOwnProperty(re)||Q===K||Q==null&&K==null||st(t,i,re,Q,l,K)}function f_(t){switch(t){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function I1(){if(typeof performance.getEntriesByType=="function"){for(var t=0,i=0,a=performance.getEntriesByType("resource"),l=0;l<a.length;l++){var h=a[l],d=h.transferSize,v=h.initiatorType,S=h.duration;if(d&&S&&f_(v)){for(v=0,S=h.responseEnd,l+=1;l<a.length;l++){var M=a[l],G=M.startTime;if(G>S)break;var ee=M.transferSize,re=M.initiatorType;ee&&f_(re)&&(M=M.responseEnd,v+=ee*(M<S?1:(S-G)/(M-G)))}if(--l,i+=8*(d+v)/(h.duration/1e3),t++,10<t)break}}if(0<t)return i/t/1e6}return navigator.connection&&(t=navigator.connection.downlink,typeof t=="number")?t:5}var im=null,rm=null;function Qc(t){return t.nodeType===9?t:t.ownerDocument}function d_(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function m_(t,i){if(t===0)switch(i){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&i==="foreignObject"?0:t}function sm(t,i){return t==="textarea"||t==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.children=="bigint"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var am=null;function D1(){var t=window.event;return t&&t.type==="popstate"?t===am?!1:(am=t,!0):(am=null,!1)}var p_=typeof setTimeout=="function"?setTimeout:void 0,N1=typeof clearTimeout=="function"?clearTimeout:void 0,g_=typeof Promise=="function"?Promise:void 0,O1=typeof queueMicrotask=="function"?queueMicrotask:typeof g_<"u"?function(t){return g_.resolve(null).then(t).catch(M1)}:p_;function M1(t){setTimeout(function(){throw t})}function ts(t){return t==="head"}function y_(t,i){var a=i,l=0;do{var h=a.nextSibling;if(t.removeChild(a),h&&h.nodeType===8)if(a=h.data,a==="/$"||a==="/&"){if(l===0){t.removeChild(h),ro(i);return}l--}else if(a==="$"||a==="$?"||a==="$~"||a==="$!"||a==="&")l++;else if(a==="html")Ml(t.ownerDocument.documentElement);else if(a==="head"){a=t.ownerDocument.head,Ml(a);for(var d=a.firstChild;d;){var v=d.nextSibling,S=d.nodeName;d[Ci]||S==="SCRIPT"||S==="STYLE"||S==="LINK"&&d.rel.toLowerCase()==="stylesheet"||a.removeChild(d),d=v}}else a==="body"&&Ml(t.ownerDocument.body);a=h}while(a);ro(i)}function v_(t,i){var a=t;t=0;do{var l=a.nextSibling;if(a.nodeType===1?i?(a._stashedDisplay=a.style.display,a.style.display="none"):(a.style.display=a._stashedDisplay||"",a.getAttribute("style")===""&&a.removeAttribute("style")):a.nodeType===3&&(i?(a._stashedText=a.nodeValue,a.nodeValue=""):a.nodeValue=a._stashedText||""),l&&l.nodeType===8)if(a=l.data,a==="/$"){if(t===0)break;t--}else a!=="$"&&a!=="$?"&&a!=="$~"&&a!=="$!"||t++;a=l}while(a)}function om(t){var i=t.firstChild;for(i&&i.nodeType===10&&(i=i.nextSibling);i;){var a=i;switch(i=i.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":om(a),Ea(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}t.removeChild(a)}}function V1(t,i,a,l){for(;t.nodeType===1;){var h=a;if(t.nodeName.toLowerCase()!==i.toLowerCase()){if(!l&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(l){if(!t[Ci])switch(i){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(d=t.getAttribute("rel"),d==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(d!==h.rel||t.getAttribute("href")!==(h.href==null||h.href===""?null:h.href)||t.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin)||t.getAttribute("title")!==(h.title==null?null:h.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(d=t.getAttribute("src"),(d!==(h.src==null?null:h.src)||t.getAttribute("type")!==(h.type==null?null:h.type)||t.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin))&&d&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(i==="input"&&t.type==="hidden"){var d=h.name==null?null:""+h.name;if(h.type==="hidden"&&t.getAttribute("name")===d)return t}else return t;if(t=ti(t.nextSibling),t===null)break}return null}function k1(t,i,a){if(i==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!a||(t=ti(t.nextSibling),t===null))return null;return t}function __(t,i){for(;t.nodeType!==8;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!i||(t=ti(t.nextSibling),t===null))return null;return t}function lm(t){return t.data==="$?"||t.data==="$~"}function um(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState!=="loading"}function P1(t,i){var a=t.ownerDocument;if(t.data==="$~")t._reactRetry=i;else if(t.data!=="$?"||a.readyState!=="loading")i();else{var l=function(){i(),a.removeEventListener("DOMContentLoaded",l)};a.addEventListener("DOMContentLoaded",l),t._reactRetry=l}}function ti(t){for(;t!=null;t=t.nextSibling){var i=t.nodeType;if(i===1||i===3)break;if(i===8){if(i=t.data,i==="$"||i==="$!"||i==="$?"||i==="$~"||i==="&"||i==="F!"||i==="F")break;if(i==="/$"||i==="/&")return null}}return t}var cm=null;function E_(t){t=t.nextSibling;for(var i=0;t;){if(t.nodeType===8){var a=t.data;if(a==="/$"||a==="/&"){if(i===0)return ti(t.nextSibling);i--}else a!=="$"&&a!=="$!"&&a!=="$?"&&a!=="$~"&&a!=="&"||i++}t=t.nextSibling}return null}function T_(t){t=t.previousSibling;for(var i=0;t;){if(t.nodeType===8){var a=t.data;if(a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"){if(i===0)return t;i--}else a!=="/$"&&a!=="/&"||i++}t=t.previousSibling}return null}function b_(t,i,a){switch(i=Qc(a),t){case"html":if(t=i.documentElement,!t)throw Error(s(452));return t;case"head":if(t=i.head,!t)throw Error(s(453));return t;case"body":if(t=i.body,!t)throw Error(s(454));return t;default:throw Error(s(451))}}function Ml(t){for(var i=t.attributes;i.length;)t.removeAttributeNode(i[0]);Ea(t)}var ni=new Map,S_=new Set;function $c(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var yr=W.d;W.d={f:L1,r:j1,D:U1,C:z1,L:B1,m:q1,X:F1,S:H1,M:G1};function L1(){var t=yr.f(),i=jc();return t||i}function j1(t){var i=Gn(t);i!==null&&i.tag===5&&i.type==="form"?zy(i):yr.r(t)}var to=typeof document>"u"?null:document;function A_(t,i,a){var l=to;if(l&&typeof i=="string"&&i){var h=En(i);h='link[rel="'+t+'"][href="'+h+'"]',typeof a=="string"&&(h+='[crossorigin="'+a+'"]'),S_.has(h)||(S_.add(h),t={rel:t,crossOrigin:a,href:i},l.querySelector(h)===null&&(i=l.createElement("link"),tn(i,"link",t),It(i),l.head.appendChild(i)))}}function U1(t){yr.D(t),A_("dns-prefetch",t,null)}function z1(t,i){yr.C(t,i),A_("preconnect",t,i)}function B1(t,i,a){yr.L(t,i,a);var l=to;if(l&&t&&i){var h='link[rel="preload"][as="'+En(i)+'"]';i==="image"&&a&&a.imageSrcSet?(h+='[imagesrcset="'+En(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(h+='[imagesizes="'+En(a.imageSizes)+'"]')):h+='[href="'+En(t)+'"]';var d=h;switch(i){case"style":d=no(t);break;case"script":d=io(t)}ni.has(d)||(t=T({rel:"preload",href:i==="image"&&a&&a.imageSrcSet?void 0:t,as:i},a),ni.set(d,t),l.querySelector(h)!==null||i==="style"&&l.querySelector(Vl(d))||i==="script"&&l.querySelector(kl(d))||(i=l.createElement("link"),tn(i,"link",t),It(i),l.head.appendChild(i)))}}function q1(t,i){yr.m(t,i);var a=to;if(a&&t){var l=i&&typeof i.as=="string"?i.as:"script",h='link[rel="modulepreload"][as="'+En(l)+'"][href="'+En(t)+'"]',d=h;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":d=io(t)}if(!ni.has(d)&&(t=T({rel:"modulepreload",href:t},i),ni.set(d,t),a.querySelector(h)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(kl(d)))return}l=a.createElement("link"),tn(l,"link",t),It(l),a.head.appendChild(l)}}}function H1(t,i,a){yr.S(t,i,a);var l=to;if(l&&t){var h=Ii(l).hoistableStyles,d=no(t);i=i||"default";var v=h.get(d);if(!v){var S={loading:0,preload:null};if(v=l.querySelector(Vl(d)))S.loading=5;else{t=T({rel:"stylesheet",href:t,"data-precedence":i},a),(a=ni.get(d))&&hm(t,a);var M=v=l.createElement("link");It(M),tn(M,"link",t),M._p=new Promise(function(G,ee){M.onload=G,M.onerror=ee}),M.addEventListener("load",function(){S.loading|=1}),M.addEventListener("error",function(){S.loading|=2}),S.loading|=4,Yc(v,i,l)}v={type:"stylesheet",instance:v,count:1,state:S},h.set(d,v)}}}function F1(t,i){yr.X(t,i);var a=to;if(a&&t){var l=Ii(a).hoistableScripts,h=io(t),d=l.get(h);d||(d=a.querySelector(kl(h)),d||(t=T({src:t,async:!0},i),(i=ni.get(h))&&fm(t,i),d=a.createElement("script"),It(d),tn(d,"link",t),a.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},l.set(h,d))}}function G1(t,i){yr.M(t,i);var a=to;if(a&&t){var l=Ii(a).hoistableScripts,h=io(t),d=l.get(h);d||(d=a.querySelector(kl(h)),d||(t=T({src:t,async:!0,type:"module"},i),(i=ni.get(h))&&fm(t,i),d=a.createElement("script"),It(d),tn(d,"link",t),a.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},l.set(h,d))}}function w_(t,i,a,l){var h=(h=Se.current)?$c(h):null;if(!h)throw Error(s(446));switch(t){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(i=no(a.href),a=Ii(h).hoistableStyles,l=a.get(i),l||(l={type:"style",instance:null,count:0,state:null},a.set(i,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){t=no(a.href);var d=Ii(h).hoistableStyles,v=d.get(t);if(v||(h=h.ownerDocument||h,v={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},d.set(t,v),(d=h.querySelector(Vl(t)))&&!d._p&&(v.instance=d,v.state.loading=5),ni.has(t)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},ni.set(t,a),d||Q1(h,t,a,v.state))),i&&l===null)throw Error(s(528,""));return v}if(i&&l!==null)throw Error(s(529,""));return null;case"script":return i=a.async,a=a.src,typeof a=="string"&&i&&typeof i!="function"&&typeof i!="symbol"?(i=io(a),a=Ii(h).hoistableScripts,l=a.get(i),l||(l={type:"script",instance:null,count:0,state:null},a.set(i,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,t))}}function no(t){return'href="'+En(t)+'"'}function Vl(t){return'link[rel="stylesheet"]['+t+"]"}function R_(t){return T({},t,{"data-precedence":t.precedence,precedence:null})}function Q1(t,i,a,l){t.querySelector('link[rel="preload"][as="style"]['+i+"]")?l.loading=1:(i=t.createElement("link"),l.preload=i,i.addEventListener("load",function(){return l.loading|=1}),i.addEventListener("error",function(){return l.loading|=2}),tn(i,"link",a),It(i),t.head.appendChild(i))}function io(t){return'[src="'+En(t)+'"]'}function kl(t){return"script[async]"+t}function C_(t,i,a){if(i.count++,i.instance===null)switch(i.type){case"style":var l=t.querySelector('style[data-href~="'+En(a.href)+'"]');if(l)return i.instance=l,It(l),l;var h=T({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return l=(t.ownerDocument||t).createElement("style"),It(l),tn(l,"style",h),Yc(l,a.precedence,t),i.instance=l;case"stylesheet":h=no(a.href);var d=t.querySelector(Vl(h));if(d)return i.state.loading|=4,i.instance=d,It(d),d;l=R_(a),(h=ni.get(h))&&hm(l,h),d=(t.ownerDocument||t).createElement("link"),It(d);var v=d;return v._p=new Promise(function(S,M){v.onload=S,v.onerror=M}),tn(d,"link",l),i.state.loading|=4,Yc(d,a.precedence,t),i.instance=d;case"script":return d=io(a.src),(h=t.querySelector(kl(d)))?(i.instance=h,It(h),h):(l=a,(h=ni.get(d))&&(l=T({},a),fm(l,h)),t=t.ownerDocument||t,h=t.createElement("script"),It(h),tn(h,"link",l),t.head.appendChild(h),i.instance=h);case"void":return null;default:throw Error(s(443,i.type))}else i.type==="stylesheet"&&(i.state.loading&4)===0&&(l=i.instance,i.state.loading|=4,Yc(l,a.precedence,t));return i.instance}function Yc(t,i,a){for(var l=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),h=l.length?l[l.length-1]:null,d=h,v=0;v<l.length;v++){var S=l[v];if(S.dataset.precedence===i)d=S;else if(d!==h)break}d?d.parentNode.insertBefore(t,d.nextSibling):(i=a.nodeType===9?a.head:a,i.insertBefore(t,i.firstChild))}function hm(t,i){t.crossOrigin==null&&(t.crossOrigin=i.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=i.referrerPolicy),t.title==null&&(t.title=i.title)}function fm(t,i){t.crossOrigin==null&&(t.crossOrigin=i.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=i.referrerPolicy),t.integrity==null&&(t.integrity=i.integrity)}var Kc=null;function x_(t,i,a){if(Kc===null){var l=new Map,h=Kc=new Map;h.set(a,l)}else h=Kc,l=h.get(a),l||(l=new Map,h.set(a,l));if(l.has(t))return l;for(l.set(t,null),a=a.getElementsByTagName(t),h=0;h<a.length;h++){var d=a[h];if(!(d[Ci]||d[xt]||t==="link"&&d.getAttribute("rel")==="stylesheet")&&d.namespaceURI!=="http://www.w3.org/2000/svg"){var v=d.getAttribute(i)||"";v=t+v;var S=l.get(v);S?S.push(d):l.set(v,[d])}}return l}function I_(t,i,a){t=t.ownerDocument||t,t.head.insertBefore(a,i==="title"?t.querySelector("head > title"):null)}function $1(t,i,a){if(a===1||i.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof i.precedence!="string"||typeof i.href!="string"||i.href==="")break;return!0;case"link":if(typeof i.rel!="string"||typeof i.href!="string"||i.href===""||i.onLoad||i.onError)break;return i.rel==="stylesheet"?(t=i.disabled,typeof i.precedence=="string"&&t==null):!0;case"script":if(i.async&&typeof i.async!="function"&&typeof i.async!="symbol"&&!i.onLoad&&!i.onError&&i.src&&typeof i.src=="string")return!0}return!1}function D_(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}function Y1(t,i,a,l){if(a.type==="stylesheet"&&(typeof l.media!="string"||matchMedia(l.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var h=no(l.href),d=i.querySelector(Vl(h));if(d){i=d._p,i!==null&&typeof i=="object"&&typeof i.then=="function"&&(t.count++,t=Xc.bind(t),i.then(t,t)),a.state.loading|=4,a.instance=d,It(d);return}d=i.ownerDocument||i,l=R_(l),(h=ni.get(h))&&hm(l,h),d=d.createElement("link"),It(d);var v=d;v._p=new Promise(function(S,M){v.onload=S,v.onerror=M}),tn(d,"link",l),a.instance=d}t.stylesheets===null&&(t.stylesheets=new Map),t.stylesheets.set(a,i),(i=a.state.preload)&&(a.state.loading&3)===0&&(t.count++,a=Xc.bind(t),i.addEventListener("load",a),i.addEventListener("error",a))}}var dm=0;function K1(t,i){return t.stylesheets&&t.count===0&&Jc(t,t.stylesheets),0<t.count||0<t.imgCount?function(a){var l=setTimeout(function(){if(t.stylesheets&&Jc(t,t.stylesheets),t.unsuspend){var d=t.unsuspend;t.unsuspend=null,d()}},6e4+i);0<t.imgBytes&&dm===0&&(dm=62500*I1());var h=setTimeout(function(){if(t.waitingForImages=!1,t.count===0&&(t.stylesheets&&Jc(t,t.stylesheets),t.unsuspend)){var d=t.unsuspend;t.unsuspend=null,d()}},(t.imgBytes>dm?50:800)+i);return t.unsuspend=a,function(){t.unsuspend=null,clearTimeout(l),clearTimeout(h)}}:null}function Xc(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Jc(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var Wc=null;function Jc(t,i){t.stylesheets=null,t.unsuspend!==null&&(t.count++,Wc=new Map,i.forEach(X1,t),Wc=null,Xc.call(t))}function X1(t,i){if(!(i.state.loading&4)){var a=Wc.get(t);if(a)var l=a.get(null);else{a=new Map,Wc.set(t,a);for(var h=t.querySelectorAll("link[data-precedence],style[data-precedence]"),d=0;d<h.length;d++){var v=h[d];(v.nodeName==="LINK"||v.getAttribute("media")!=="not all")&&(a.set(v.dataset.precedence,v),l=v)}l&&a.set(null,l)}h=i.instance,v=h.getAttribute("data-precedence"),d=a.get(v)||l,d===l&&a.set(null,h),a.set(v,h),this.count++,l=Xc.bind(this),h.addEventListener("load",l),h.addEventListener("error",l),d?d.parentNode.insertBefore(h,d.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(h,t.firstChild)),i.state.loading|=4}}var Pl={$$typeof:Z,Provider:null,Consumer:null,_currentValue:te,_currentValue2:te,_threadCount:0};function W1(t,i,a,l,h,d,v,S,M){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=wi(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=wi(0),this.hiddenUpdates=wi(null),this.identifierPrefix=l,this.onUncaughtError=h,this.onCaughtError=d,this.onRecoverableError=v,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=M,this.incompleteTransitions=new Map}function N_(t,i,a,l,h,d,v,S,M,G,ee,re){return t=new W1(t,i,a,v,M,G,ee,re,S),i=1,d===!0&&(i|=24),d=Mn(3,null,null,i),t.current=d,d.stateNode=t,i=Qf(),i.refCount++,t.pooledCache=i,i.refCount++,d.memoizedState={element:l,isDehydrated:a,cache:i},Xf(d),t}function O_(t){return t?(t=Va,t):Va}function M_(t,i,a,l,h,d){h=O_(h),l.context===null?l.context=h:l.pendingContext=h,l=Fr(i),l.payload={element:a},d=d===void 0?null:d,d!==null&&(l.callback=d),a=Gr(t,l,i),a!==null&&(Rn(a,t,i),ml(a,t,i))}function V_(t,i){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var a=t.retryLane;t.retryLane=a!==0&&a<i?a:i}}function mm(t,i){V_(t,i),(t=t.alternate)&&V_(t,i)}function k_(t){if(t.tag===13||t.tag===31){var i=Fs(t,67108864);i!==null&&Rn(i,t,67108864),mm(t,67108864)}}function P_(t){if(t.tag===13||t.tag===31){var i=jn();i=Os(i);var a=Fs(t,i);a!==null&&Rn(a,t,i),mm(t,i)}}var Zc=!0;function J1(t,i,a,l){var h=B.T;B.T=null;var d=W.p;try{W.p=2,pm(t,i,a,l)}finally{W.p=d,B.T=h}}function Z1(t,i,a,l){var h=B.T;B.T=null;var d=W.p;try{W.p=8,pm(t,i,a,l)}finally{W.p=d,B.T=h}}function pm(t,i,a,l){if(Zc){var h=gm(l);if(h===null)tm(t,i,l,eh,a),j_(t,l);else if(tA(h,t,i,a,l))l.stopPropagation();else if(j_(t,l),i&4&&-1<eA.indexOf(t)){for(;h!==null;){var d=Gn(h);if(d!==null)switch(d.tag){case 3:if(d=d.stateNode,d.current.memoizedState.isDehydrated){var v=Si(d.pendingLanes);if(v!==0){var S=d;for(S.pendingLanes|=2,S.entangledLanes|=2;v;){var M=1<<31-Et(v);S.entanglements[1]|=M,v&=~M}qi(d),(Ze&6)===0&&(Pc=pn()+500,Dl(0))}}break;case 31:case 13:S=Fs(d,2),S!==null&&Rn(S,d,2),jc(),mm(d,2)}if(d=gm(l),d===null&&tm(t,i,l,eh,a),d===h)break;h=d}h!==null&&l.stopPropagation()}else tm(t,i,l,null,a)}}function gm(t){return t=Qn(t),ym(t)}var eh=null;function ym(t){if(eh=null,t=xi(t),t!==null){var i=u(t);if(i===null)t=null;else{var a=i.tag;if(a===13){if(t=f(i),t!==null)return t;t=null}else if(a===31){if(t=m(i),t!==null)return t;t=null}else if(a===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;t=null}else i!==t&&(t=null)}}return eh=t,null}function L_(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(xs()){case Uo:return 2;case zo:return 8;case Ir:case Sf:return 32;case Ou:return 268435456;default:return 32}default:return 32}}var vm=!1,ns=null,is=null,rs=null,Ll=new Map,jl=new Map,ss=[],eA="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function j_(t,i){switch(t){case"focusin":case"focusout":ns=null;break;case"dragenter":case"dragleave":is=null;break;case"mouseover":case"mouseout":rs=null;break;case"pointerover":case"pointerout":Ll.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":jl.delete(i.pointerId)}}function Ul(t,i,a,l,h,d){return t===null||t.nativeEvent!==d?(t={blockedOn:i,domEventName:a,eventSystemFlags:l,nativeEvent:d,targetContainers:[h]},i!==null&&(i=Gn(i),i!==null&&k_(i)),t):(t.eventSystemFlags|=l,i=t.targetContainers,h!==null&&i.indexOf(h)===-1&&i.push(h),t)}function tA(t,i,a,l,h){switch(i){case"focusin":return ns=Ul(ns,t,i,a,l,h),!0;case"dragenter":return is=Ul(is,t,i,a,l,h),!0;case"mouseover":return rs=Ul(rs,t,i,a,l,h),!0;case"pointerover":var d=h.pointerId;return Ll.set(d,Ul(Ll.get(d)||null,t,i,a,l,h)),!0;case"gotpointercapture":return d=h.pointerId,jl.set(d,Ul(jl.get(d)||null,t,i,a,l,h)),!0}return!1}function U_(t){var i=xi(t.target);if(i!==null){var a=u(i);if(a!==null){if(i=a.tag,i===13){if(i=f(a),i!==null){t.blockedOn=i,oi(t.priority,function(){P_(a)});return}}else if(i===31){if(i=m(a),i!==null){t.blockedOn=i,oi(t.priority,function(){P_(a)});return}}else if(i===3&&a.stateNode.current.memoizedState.isDehydrated){t.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}t.blockedOn=null}function th(t){if(t.blockedOn!==null)return!1;for(var i=t.targetContainers;0<i.length;){var a=gm(t.nativeEvent);if(a===null){a=t.nativeEvent;var l=new a.constructor(a.type,a);Jo=l,a.target.dispatchEvent(l),Jo=null}else return i=Gn(a),i!==null&&k_(i),t.blockedOn=a,!1;i.shift()}return!0}function z_(t,i,a){th(t)&&a.delete(i)}function nA(){vm=!1,ns!==null&&th(ns)&&(ns=null),is!==null&&th(is)&&(is=null),rs!==null&&th(rs)&&(rs=null),Ll.forEach(z_),jl.forEach(z_)}function nh(t,i){t.blockedOn===i&&(t.blockedOn=null,vm||(vm=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,nA)))}var ih=null;function B_(t){ih!==t&&(ih=t,r.unstable_scheduleCallback(r.unstable_NormalPriority,function(){ih===t&&(ih=null);for(var i=0;i<t.length;i+=3){var a=t[i],l=t[i+1],h=t[i+2];if(typeof l!="function"){if(ym(l||a)===null)continue;break}var d=Gn(a);d!==null&&(t.splice(i,3),i-=3,gd(d,{pending:!0,data:h,method:a.method,action:l},l,h))}}))}function ro(t){function i(M){return nh(M,t)}ns!==null&&nh(ns,t),is!==null&&nh(is,t),rs!==null&&nh(rs,t),Ll.forEach(i),jl.forEach(i);for(var a=0;a<ss.length;a++){var l=ss[a];l.blockedOn===t&&(l.blockedOn=null)}for(;0<ss.length&&(a=ss[0],a.blockedOn===null);)U_(a),a.blockedOn===null&&ss.shift();if(a=(t.ownerDocument||t).$$reactFormReplay,a!=null)for(l=0;l<a.length;l+=3){var h=a[l],d=a[l+1],v=h[Ft]||null;if(typeof d=="function")v||B_(a);else if(v){var S=null;if(d&&d.hasAttribute("formAction")){if(h=d,v=d[Ft]||null)S=v.formAction;else if(ym(h)!==null)continue}else S=v.action;typeof S=="function"?a[l+1]=S:(a.splice(l,3),l-=3),B_(a)}}}function q_(){function t(d){d.canIntercept&&d.info==="react-transition"&&d.intercept({handler:function(){return new Promise(function(v){return h=v})},focusReset:"manual",scroll:"manual"})}function i(){h!==null&&(h(),h=null),l||setTimeout(a,20)}function a(){if(!l&&!navigation.transition){var d=navigation.currentEntry;d&&d.url!=null&&navigation.navigate(d.url,{state:d.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var l=!1,h=null;return navigation.addEventListener("navigate",t),navigation.addEventListener("navigatesuccess",i),navigation.addEventListener("navigateerror",i),setTimeout(a,100),function(){l=!0,navigation.removeEventListener("navigate",t),navigation.removeEventListener("navigatesuccess",i),navigation.removeEventListener("navigateerror",i),h!==null&&(h(),h=null)}}}function _m(t){this._internalRoot=t}rh.prototype.render=_m.prototype.render=function(t){var i=this._internalRoot;if(i===null)throw Error(s(409));var a=i.current,l=jn();M_(a,l,t,i,null,null)},rh.prototype.unmount=_m.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var i=t.containerInfo;M_(t.current,2,null,t,null,null),jc(),i[Ri]=null}};function rh(t){this._internalRoot=t}rh.prototype.unstable_scheduleHydration=function(t){if(t){var i=ju();t={blockedOn:null,target:t,priority:i};for(var a=0;a<ss.length&&i!==0&&i<ss[a].priority;a++);ss.splice(a,0,t),a===0&&U_(t)}};var H_=e.version;if(H_!=="19.2.3")throw Error(s(527,H_,"19.2.3"));W.findDOMNode=function(t){var i=t._reactInternals;if(i===void 0)throw typeof t.render=="function"?Error(s(188)):(t=Object.keys(t).join(","),Error(s(268,t)));return t=g(i),t=t!==null?E(t):null,t=t===null?null:t.stateNode,t};var iA={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:B,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var sh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!sh.isDisabled&&sh.supportsFiber)try{si=sh.inject(iA),Xt=sh}catch{}}return Bl.createRoot=function(t,i){if(!o(t))throw Error(s(299));var a=!1,l="",h=Xy,d=Wy,v=Jy;return i!=null&&(i.unstable_strictMode===!0&&(a=!0),i.identifierPrefix!==void 0&&(l=i.identifierPrefix),i.onUncaughtError!==void 0&&(h=i.onUncaughtError),i.onCaughtError!==void 0&&(d=i.onCaughtError),i.onRecoverableError!==void 0&&(v=i.onRecoverableError)),i=N_(t,1,!1,null,null,a,l,null,h,d,v,q_),t[Ri]=i.current,em(t),new _m(i)},Bl.hydrateRoot=function(t,i,a){if(!o(t))throw Error(s(299));var l=!1,h="",d=Xy,v=Wy,S=Jy,M=null;return a!=null&&(a.unstable_strictMode===!0&&(l=!0),a.identifierPrefix!==void 0&&(h=a.identifierPrefix),a.onUncaughtError!==void 0&&(d=a.onUncaughtError),a.onCaughtError!==void 0&&(v=a.onCaughtError),a.onRecoverableError!==void 0&&(S=a.onRecoverableError),a.formState!==void 0&&(M=a.formState)),i=N_(t,1,!0,i,a??null,l,h,M,d,v,S,q_),i.context=O_(null),a=i.current,l=jn(),l=Os(l),h=Fr(l),h.callback=null,Gr(a,h,l),a=l,i.current.lanes=a,Ds(i,a),qi(i),t[Ri]=i.current,em(t),new rh(i)},Bl.version="19.2.3",Bl}var Z_;function mA(){if(Z_)return bm.exports;Z_=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),bm.exports=dA(),bm.exports}var pA=mA();var e0="popstate";function gA(r={}){function e(s,o){let{pathname:u,search:f,hash:m}=s.location;return Fm("",{pathname:u,search:f,hash:m},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function n(s,o){return typeof o=="string"?o:eu(o)}return vA(e,n,null,r)}function mt(r,e){if(r===!1||r===null||typeof r>"u")throw new Error(e)}function ri(r,e){if(!r){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function yA(){return Math.random().toString(36).substring(2,10)}function t0(r,e){return{usr:r.state,key:r.key,idx:e}}function Fm(r,e,n=null,s){return{pathname:typeof r=="string"?r:r.pathname,search:"",hash:"",...typeof e=="string"?Ro(e):e,state:n,key:e&&e.key||s||yA()}}function eu({pathname:r="/",search:e="",hash:n=""}){return e&&e!=="?"&&(r+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(r+=n.charAt(0)==="#"?n:"#"+n),r}function Ro(r){let e={};if(r){let n=r.indexOf("#");n>=0&&(e.hash=r.substring(n),r=r.substring(0,n));let s=r.indexOf("?");s>=0&&(e.search=r.substring(s),r=r.substring(0,s)),r&&(e.pathname=r)}return e}function vA(r,e,n,s={}){let{window:o=document.defaultView,v5Compat:u=!1}=s,f=o.history,m="POP",p=null,g=E();g==null&&(g=0,f.replaceState({...f.state,idx:g},""));function E(){return(f.state||{idx:null}).idx}function T(){m="POP";let z=E(),$=z==null?null:z-g;g=z,p&&p({action:m,location:q.location,delta:$})}function C(z,$){m="PUSH";let X=Fm(q.location,z,$);g=E()+1;let Z=t0(X,g),pe=q.createHref(X);try{f.pushState(Z,"",pe)}catch(_e){if(_e instanceof DOMException&&_e.name==="DataCloneError")throw _e;o.location.assign(pe)}u&&p&&p({action:m,location:q.location,delta:1})}function O(z,$){m="REPLACE";let X=Fm(q.location,z,$);g=E();let Z=t0(X,g),pe=q.createHref(X);f.replaceState(Z,"",pe),u&&p&&p({action:m,location:q.location,delta:0})}function L(z){return _A(z)}let q={get action(){return m},get location(){return r(o,f)},listen(z){if(p)throw new Error("A history only accepts one active listener");return o.addEventListener(e0,T),p=z,()=>{o.removeEventListener(e0,T),p=null}},createHref(z){return e(o,z)},createURL:L,encodeLocation(z){let $=L(z);return{pathname:$.pathname,search:$.search,hash:$.hash}},push:C,replace:O,go(z){return f.go(z)}};return q}function _A(r,e=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),mt(n,"No window.location.(origin|href) available to create URL");let s=typeof r=="string"?r:eu(r);return s=s.replace(/ $/,"%20"),!e&&s.startsWith("//")&&(s=n+s),new URL(s,n)}function kE(r,e,n="/"){return EA(r,e,n,!1)}function EA(r,e,n,s){let o=typeof e=="string"?Ro(e):e,u=br(o.pathname||"/",n);if(u==null)return null;let f=PE(r);TA(f);let m=null;for(let p=0;m==null&&p<f.length;++p){let g=OA(u);m=DA(f[p],g,s)}return m}function PE(r,e=[],n=[],s="",o=!1){let u=(f,m,p=o,g)=>{let E={relativePath:g===void 0?f.path||"":g,caseSensitive:f.caseSensitive===!0,childrenIndex:m,route:f};if(E.relativePath.startsWith("/")){if(!E.relativePath.startsWith(s)&&p)return;mt(E.relativePath.startsWith(s),`Absolute route path "${E.relativePath}" nested under path "${s}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),E.relativePath=E.relativePath.slice(s.length)}let T=Tr([s,E.relativePath]),C=n.concat(E);f.children&&f.children.length>0&&(mt(f.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${T}".`),PE(f.children,e,C,T,p)),!(f.path==null&&!f.index)&&e.push({path:T,score:xA(T,f.index),routesMeta:C})};return r.forEach((f,m)=>{if(f.path===""||!f.path?.includes("?"))u(f,m);else for(let p of LE(f.path))u(f,m,!0,p)}),e}function LE(r){let e=r.split("/");if(e.length===0)return[];let[n,...s]=e,o=n.endsWith("?"),u=n.replace(/\?$/,"");if(s.length===0)return o?[u,""]:[u];let f=LE(s.join("/")),m=[];return m.push(...f.map(p=>p===""?u:[u,p].join("/"))),o&&m.push(...f),m.map(p=>r.startsWith("/")&&p===""?"/":p)}function TA(r){r.sort((e,n)=>e.score!==n.score?n.score-e.score:IA(e.routesMeta.map(s=>s.childrenIndex),n.routesMeta.map(s=>s.childrenIndex)))}var bA=/^:[\w-]+$/,SA=3,AA=2,wA=1,RA=10,CA=-2,n0=r=>r==="*";function xA(r,e){let n=r.split("/"),s=n.length;return n.some(n0)&&(s+=CA),e&&(s+=AA),n.filter(o=>!n0(o)).reduce((o,u)=>o+(bA.test(u)?SA:u===""?wA:RA),s)}function IA(r,e){return r.length===e.length&&r.slice(0,-1).every((s,o)=>s===e[o])?r[r.length-1]-e[e.length-1]:0}function DA(r,e,n=!1){let{routesMeta:s}=r,o={},u="/",f=[];for(let m=0;m<s.length;++m){let p=s[m],g=m===s.length-1,E=u==="/"?e:e.slice(u.length)||"/",T=Ch({path:p.relativePath,caseSensitive:p.caseSensitive,end:g},E),C=p.route;if(!T&&g&&n&&!s[s.length-1].route.index&&(T=Ch({path:p.relativePath,caseSensitive:p.caseSensitive,end:!1},E)),!T)return null;Object.assign(o,T.params),f.push({params:o,pathname:Tr([u,T.pathname]),pathnameBase:PA(Tr([u,T.pathnameBase])),route:C}),T.pathnameBase!=="/"&&(u=Tr([u,T.pathnameBase]))}return f}function Ch(r,e){typeof r=="string"&&(r={path:r,caseSensitive:!1,end:!0});let[n,s]=NA(r.path,r.caseSensitive,r.end),o=e.match(n);if(!o)return null;let u=o[0],f=u.replace(/(.)\/+$/,"$1"),m=o.slice(1);return{params:s.reduce((g,{paramName:E,isOptional:T},C)=>{if(E==="*"){let L=m[C]||"";f=u.slice(0,u.length-L.length).replace(/(.)\/+$/,"$1")}const O=m[C];return T&&!O?g[E]=void 0:g[E]=(O||"").replace(/%2F/g,"/"),g},{}),pathname:u,pathnameBase:f,pattern:r}}function NA(r,e=!1,n=!0){ri(r==="*"||!r.endsWith("*")||r.endsWith("/*"),`Route path "${r}" will be treated as if it were "${r.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${r.replace(/\*$/,"/*")}".`);let s=[],o="^"+r.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(f,m,p)=>(s.push({paramName:m,isOptional:p!=null}),p?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return r.endsWith("*")?(s.push({paramName:"*"}),o+=r==="*"||r==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?o+="\\/*$":r!==""&&r!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,e?void 0:"i"),s]}function OA(r){try{return r.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return ri(!1,`The URL path "${r}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),r}}function br(r,e){if(e==="/")return r;if(!r.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,s=r.charAt(n);return s&&s!=="/"?null:r.slice(n)||"/"}var jE=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,MA=r=>jE.test(r);function VA(r,e="/"){let{pathname:n,search:s="",hash:o=""}=typeof r=="string"?Ro(r):r,u;if(n)if(MA(n))u=n;else{if(n.includes("//")){let f=n;n=n.replace(/\/\/+/g,"/"),ri(!1,`Pathnames cannot have embedded double slashes - normalizing ${f} -> ${n}`)}n.startsWith("/")?u=i0(n.substring(1),"/"):u=i0(n,e)}else u=e;return{pathname:u,search:LA(s),hash:jA(o)}}function i0(r,e){let n=e.replace(/\/+$/,"").split("/");return r.split("/").forEach(o=>{o===".."?n.length>1&&n.pop():o!=="."&&n.push(o)}),n.length>1?n.join("/"):"/"}function Rm(r,e,n,s){return`Cannot include a '${r}' character in a manually specified \`to.${e}\` field [${JSON.stringify(s)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function kA(r){return r.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function vp(r){let e=kA(r);return e.map((n,s)=>s===e.length-1?n.pathname:n.pathnameBase)}function _p(r,e,n,s=!1){let o;typeof r=="string"?o=Ro(r):(o={...r},mt(!o.pathname||!o.pathname.includes("?"),Rm("?","pathname","search",o)),mt(!o.pathname||!o.pathname.includes("#"),Rm("#","pathname","hash",o)),mt(!o.search||!o.search.includes("#"),Rm("#","search","hash",o)));let u=r===""||o.pathname==="",f=u?"/":o.pathname,m;if(f==null)m=n;else{let T=e.length-1;if(!s&&f.startsWith("..")){let C=f.split("/");for(;C[0]==="..";)C.shift(),T-=1;o.pathname=C.join("/")}m=T>=0?e[T]:"/"}let p=VA(o,m),g=f&&f!=="/"&&f.endsWith("/"),E=(u||f===".")&&n.endsWith("/");return!p.pathname.endsWith("/")&&(g||E)&&(p.pathname+="/"),p}var Tr=r=>r.join("/").replace(/\/\/+/g,"/"),PA=r=>r.replace(/\/+$/,"").replace(/^\/*/,"/"),LA=r=>!r||r==="?"?"":r.startsWith("?")?r:"?"+r,jA=r=>!r||r==="#"?"":r.startsWith("#")?r:"#"+r,UA=class{constructor(r,e,n,s=!1){this.status=r,this.statusText=e||"",this.internal=s,n instanceof Error?(this.data=n.toString(),this.error=n):this.data=n}};function zA(r){return r!=null&&typeof r.status=="number"&&typeof r.statusText=="string"&&typeof r.internal=="boolean"&&"data"in r}function BA(r){return r.map(e=>e.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var UE=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function zE(r,e){let n=r;if(typeof n!="string"||!jE.test(n))return{absoluteURL:void 0,isExternal:!1,to:n};let s=n,o=!1;if(UE)try{let u=new URL(window.location.href),f=n.startsWith("//")?new URL(u.protocol+n):new URL(n),m=br(f.pathname,e);f.origin===u.origin&&m!=null?n=m+f.search+f.hash:o=!0}catch{ri(!1,`<Link to="${n}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:s,isExternal:o,to:n}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var BE=["POST","PUT","PATCH","DELETE"];new Set(BE);var qA=["GET",...BE];new Set(qA);var Co=k.createContext(null);Co.displayName="DataRouter";var Kh=k.createContext(null);Kh.displayName="DataRouterState";var HA=k.createContext(!1),qE=k.createContext({isTransitioning:!1});qE.displayName="ViewTransition";var FA=k.createContext(new Map);FA.displayName="Fetchers";var GA=k.createContext(null);GA.displayName="Await";var Hn=k.createContext(null);Hn.displayName="Navigation";var hu=k.createContext(null);hu.displayName="Location";var Ti=k.createContext({outlet:null,matches:[],isDataRoute:!1});Ti.displayName="Route";var Ep=k.createContext(null);Ep.displayName="RouteError";var HE="REACT_ROUTER_ERROR",QA="REDIRECT",$A="ROUTE_ERROR_RESPONSE";function YA(r){if(r.startsWith(`${HE}:${QA}:{`))try{let e=JSON.parse(r.slice(28));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.location=="string"&&typeof e.reloadDocument=="boolean"&&typeof e.replace=="boolean")return e}catch{}}function KA(r){if(r.startsWith(`${HE}:${$A}:{`))try{let e=JSON.parse(r.slice(40));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string")return new UA(e.status,e.statusText,e.data)}catch{}}function XA(r,{relative:e}={}){mt(xo(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:s}=k.useContext(Hn),{hash:o,pathname:u,search:f}=fu(r,{relative:e}),m=u;return n!=="/"&&(m=u==="/"?n:Tr([n,u])),s.createHref({pathname:m,search:f,hash:o})}function xo(){return k.useContext(hu)!=null}function ws(){return mt(xo(),"useLocation() may be used only in the context of a <Router> component."),k.useContext(hu).location}var FE="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function GE(r){k.useContext(Hn).static||k.useLayoutEffect(r)}function Io(){let{isDataRoute:r}=k.useContext(Ti);return r?cw():WA()}function WA(){mt(xo(),"useNavigate() may be used only in the context of a <Router> component.");let r=k.useContext(Co),{basename:e,navigator:n}=k.useContext(Hn),{matches:s}=k.useContext(Ti),{pathname:o}=ws(),u=JSON.stringify(vp(s)),f=k.useRef(!1);return GE(()=>{f.current=!0}),k.useCallback((p,g={})=>{if(ri(f.current,FE),!f.current)return;if(typeof p=="number"){n.go(p);return}let E=_p(p,JSON.parse(u),o,g.relative==="path");r==null&&e!=="/"&&(E.pathname=E.pathname==="/"?e:Tr([e,E.pathname])),(g.replace?n.replace:n.push)(E,g.state,g)},[e,n,u,o,r])}k.createContext(null);function JA(){let{matches:r}=k.useContext(Ti),e=r[r.length-1];return e?e.params:{}}function fu(r,{relative:e}={}){let{matches:n}=k.useContext(Ti),{pathname:s}=ws(),o=JSON.stringify(vp(n));return k.useMemo(()=>_p(r,JSON.parse(o),s,e==="path"),[r,o,s,e])}function ZA(r,e){return QE(r,e)}function QE(r,e,n,s,o){mt(xo(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:u}=k.useContext(Hn),{matches:f}=k.useContext(Ti),m=f[f.length-1],p=m?m.params:{},g=m?m.pathname:"/",E=m?m.pathnameBase:"/",T=m&&m.route;{let X=T&&T.path||"";YE(g,!T||X.endsWith("*")||X.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${g}" (under <Route path="${X}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${X}"> to <Route path="${X==="/"?"*":`${X}/*`}">.`)}let C=ws(),O;if(e){let X=typeof e=="string"?Ro(e):e;mt(E==="/"||X.pathname?.startsWith(E),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${E}" but pathname "${X.pathname}" was given in the \`location\` prop.`),O=X}else O=C;let L=O.pathname||"/",q=L;if(E!=="/"){let X=E.replace(/^\//,"").split("/");q="/"+L.replace(/^\//,"").split("/").slice(X.length).join("/")}let z=kE(r,{pathname:q});ri(T||z!=null,`No routes matched location "${O.pathname}${O.search}${O.hash}" `),ri(z==null||z[z.length-1].route.element!==void 0||z[z.length-1].route.Component!==void 0||z[z.length-1].route.lazy!==void 0,`Matched leaf route at location "${O.pathname}${O.search}${O.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let $=rw(z&&z.map(X=>Object.assign({},X,{params:Object.assign({},p,X.params),pathname:Tr([E,u.encodeLocation?u.encodeLocation(X.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:X.pathname]),pathnameBase:X.pathnameBase==="/"?E:Tr([E,u.encodeLocation?u.encodeLocation(X.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:X.pathnameBase])})),f,n,s,o);return e&&$?k.createElement(hu.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...O},navigationType:"POP"}},$):$}function ew(){let r=uw(),e=zA(r)?`${r.status} ${r.statusText}`:r instanceof Error?r.message:JSON.stringify(r),n=r instanceof Error?r.stack:null,s="rgba(200,200,200, 0.5)",o={padding:"0.5rem",backgroundColor:s},u={padding:"2px 4px",backgroundColor:s},f=null;return console.error("Error handled by React Router default ErrorBoundary:",r),f=k.createElement(k.Fragment,null,k.createElement("p",null," Hey developer "),k.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",k.createElement("code",{style:u},"ErrorBoundary")," or"," ",k.createElement("code",{style:u},"errorElement")," prop on your route.")),k.createElement(k.Fragment,null,k.createElement("h2",null,"Unexpected Application Error!"),k.createElement("h3",{style:{fontStyle:"italic"}},e),n?k.createElement("pre",{style:o},n):null,f)}var tw=k.createElement(ew,null),$E=class extends k.Component{constructor(r){super(r),this.state={location:r.location,revalidation:r.revalidation,error:r.error}}static getDerivedStateFromError(r){return{error:r}}static getDerivedStateFromProps(r,e){return e.location!==r.location||e.revalidation!=="idle"&&r.revalidation==="idle"?{error:r.error,location:r.location,revalidation:r.revalidation}:{error:r.error!==void 0?r.error:e.error,location:e.location,revalidation:r.revalidation||e.revalidation}}componentDidCatch(r,e){this.props.onError?this.props.onError(r,e):console.error("React Router caught the following error during render",r)}render(){let r=this.state.error;if(this.context&&typeof r=="object"&&r&&"digest"in r&&typeof r.digest=="string"){const n=KA(r.digest);n&&(r=n)}let e=r!==void 0?k.createElement(Ti.Provider,{value:this.props.routeContext},k.createElement(Ep.Provider,{value:r,children:this.props.component})):this.props.children;return this.context?k.createElement(nw,{error:r},e):e}};$E.contextType=HA;var Cm=new WeakMap;function nw({children:r,error:e}){let{basename:n}=k.useContext(Hn);if(typeof e=="object"&&e&&"digest"in e&&typeof e.digest=="string"){let s=YA(e.digest);if(s){let o=Cm.get(e);if(o)throw o;let u=zE(s.location,n);if(UE&&!Cm.get(e))if(u.isExternal||s.reloadDocument)window.location.href=u.absoluteURL||u.to;else{const f=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(u.to,{replace:s.replace}));throw Cm.set(e,f),f}return k.createElement("meta",{httpEquiv:"refresh",content:`0;url=${u.absoluteURL||u.to}`})}}return r}function iw({routeContext:r,match:e,children:n}){let s=k.useContext(Co);return s&&s.static&&s.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=e.route.id),k.createElement(Ti.Provider,{value:r},n)}function rw(r,e=[],n=null,s=null,o=null){if(r==null){if(!n)return null;if(n.errors)r=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)r=n.matches;else return null}let u=r,f=n?.errors;if(f!=null){let E=u.findIndex(T=>T.route.id&&f?.[T.route.id]!==void 0);mt(E>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(f).join(",")}`),u=u.slice(0,Math.min(u.length,E+1))}let m=!1,p=-1;if(n)for(let E=0;E<u.length;E++){let T=u[E];if((T.route.HydrateFallback||T.route.hydrateFallbackElement)&&(p=E),T.route.id){let{loaderData:C,errors:O}=n,L=T.route.loader&&!C.hasOwnProperty(T.route.id)&&(!O||O[T.route.id]===void 0);if(T.route.lazy||L){m=!0,p>=0?u=u.slice(0,p+1):u=[u[0]];break}}}let g=n&&s?(E,T)=>{s(E,{location:n.location,params:n.matches?.[0]?.params??{},unstable_pattern:BA(n.matches),errorInfo:T})}:void 0;return u.reduceRight((E,T,C)=>{let O,L=!1,q=null,z=null;n&&(O=f&&T.route.id?f[T.route.id]:void 0,q=T.route.errorElement||tw,m&&(p<0&&C===0?(YE("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),L=!0,z=null):p===C&&(L=!0,z=T.route.hydrateFallbackElement||null)));let $=e.concat(u.slice(0,C+1)),X=()=>{let Z;return O?Z=q:L?Z=z:T.route.Component?Z=k.createElement(T.route.Component,null):T.route.element?Z=T.route.element:Z=E,k.createElement(iw,{match:T,routeContext:{outlet:E,matches:$,isDataRoute:n!=null},children:Z})};return n&&(T.route.ErrorBoundary||T.route.errorElement||C===0)?k.createElement($E,{location:n.location,revalidation:n.revalidation,component:q,error:O,children:X(),routeContext:{outlet:null,matches:$,isDataRoute:!0},onError:g}):X()},null)}function Tp(r){return`${r} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function sw(r){let e=k.useContext(Co);return mt(e,Tp(r)),e}function aw(r){let e=k.useContext(Kh);return mt(e,Tp(r)),e}function ow(r){let e=k.useContext(Ti);return mt(e,Tp(r)),e}function bp(r){let e=ow(r),n=e.matches[e.matches.length-1];return mt(n.route.id,`${r} can only be used on routes that contain a unique "id"`),n.route.id}function lw(){return bp("useRouteId")}function uw(){let r=k.useContext(Ep),e=aw("useRouteError"),n=bp("useRouteError");return r!==void 0?r:e.errors?.[n]}function cw(){let{router:r}=sw("useNavigate"),e=bp("useNavigate"),n=k.useRef(!1);return GE(()=>{n.current=!0}),k.useCallback(async(o,u={})=>{ri(n.current,FE),n.current&&(typeof o=="number"?await r.navigate(o):await r.navigate(o,{fromRouteId:e,...u}))},[r,e])}var r0={};function YE(r,e,n){!e&&!r0[r]&&(r0[r]=!0,ri(!1,n))}k.memo(hw);function hw({routes:r,future:e,state:n,onError:s}){return QE(r,void 0,n,s,e)}function fw({to:r,replace:e,state:n,relative:s}){mt(xo(),"<Navigate> may be used only in the context of a <Router> component.");let{static:o}=k.useContext(Hn);ri(!o,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:u}=k.useContext(Ti),{pathname:f}=ws(),m=Io(),p=_p(r,vp(u),f,s==="path"),g=JSON.stringify(p);return k.useEffect(()=>{m(JSON.parse(g),{replace:e,state:n,relative:s})},[m,g,s,e,n]),null}function so(r){mt(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function dw({basename:r="/",children:e=null,location:n,navigationType:s="POP",navigator:o,static:u=!1,unstable_useTransitions:f}){mt(!xo(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let m=r.replace(/^\/*/,"/"),p=k.useMemo(()=>({basename:m,navigator:o,static:u,unstable_useTransitions:f,future:{}}),[m,o,u,f]);typeof n=="string"&&(n=Ro(n));let{pathname:g="/",search:E="",hash:T="",state:C=null,key:O="default"}=n,L=k.useMemo(()=>{let q=br(g,m);return q==null?null:{location:{pathname:q,search:E,hash:T,state:C,key:O},navigationType:s}},[m,g,E,T,C,O,s]);return ri(L!=null,`<Router basename="${m}"> is not able to match the URL "${g}${E}${T}" because it does not start with the basename, so the <Router> won't render anything.`),L==null?null:k.createElement(Hn.Provider,{value:p},k.createElement(hu.Provider,{children:e,value:L}))}function mw({children:r,location:e}){return ZA(Gm(r),e)}function Gm(r,e=[]){let n=[];return k.Children.forEach(r,(s,o)=>{if(!k.isValidElement(s))return;let u=[...e,o];if(s.type===k.Fragment){n.push.apply(n,Gm(s.props.children,u));return}mt(s.type===so,`[${typeof s.type=="string"?s.type:s.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),mt(!s.props.index||!s.props.children,"An index route cannot have child routes.");let f={id:s.props.id||u.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,middleware:s.props.middleware,loader:s.props.loader,action:s.props.action,hydrateFallbackElement:s.props.hydrateFallbackElement,HydrateFallback:s.props.HydrateFallback,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.hasErrorBoundary===!0||s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(f.children=Gm(s.props.children,u)),n.push(f)}),n}var mh="get",ph="application/x-www-form-urlencoded";function Xh(r){return typeof HTMLElement<"u"&&r instanceof HTMLElement}function pw(r){return Xh(r)&&r.tagName.toLowerCase()==="button"}function gw(r){return Xh(r)&&r.tagName.toLowerCase()==="form"}function yw(r){return Xh(r)&&r.tagName.toLowerCase()==="input"}function vw(r){return!!(r.metaKey||r.altKey||r.ctrlKey||r.shiftKey)}function _w(r,e){return r.button===0&&(!e||e==="_self")&&!vw(r)}var ah=null;function Ew(){if(ah===null)try{new FormData(document.createElement("form"),0),ah=!1}catch{ah=!0}return ah}var Tw=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function xm(r){return r!=null&&!Tw.has(r)?(ri(!1,`"${r}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${ph}"`),null):r}function bw(r,e){let n,s,o,u,f;if(gw(r)){let m=r.getAttribute("action");s=m?br(m,e):null,n=r.getAttribute("method")||mh,o=xm(r.getAttribute("enctype"))||ph,u=new FormData(r)}else if(pw(r)||yw(r)&&(r.type==="submit"||r.type==="image")){let m=r.form;if(m==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let p=r.getAttribute("formaction")||m.getAttribute("action");if(s=p?br(p,e):null,n=r.getAttribute("formmethod")||m.getAttribute("method")||mh,o=xm(r.getAttribute("formenctype"))||xm(m.getAttribute("enctype"))||ph,u=new FormData(m,r),!Ew()){let{name:g,type:E,value:T}=r;if(E==="image"){let C=g?`${g}.`:"";u.append(`${C}x`,"0"),u.append(`${C}y`,"0")}else g&&u.append(g,T)}}else{if(Xh(r))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=mh,s=null,o=ph,f=r}return u&&o==="text/plain"&&(f=u,u=void 0),{action:s,method:n.toLowerCase(),encType:o,formData:u,body:f}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Sp(r,e){if(r===!1||r===null||typeof r>"u")throw new Error(e)}function Sw(r,e,n){let s=typeof r=="string"?new URL(r,typeof window>"u"?"server://singlefetch/":window.location.origin):r;return s.pathname==="/"?s.pathname=`_root.${n}`:e&&br(s.pathname,e)==="/"?s.pathname=`${e.replace(/\/$/,"")}/_root.${n}`:s.pathname=`${s.pathname.replace(/\/$/,"")}.${n}`,s}async function Aw(r,e){if(r.id in e)return e[r.id];try{let n=await import(r.module);return e[r.id]=n,n}catch(n){return console.error(`Error loading route module \`${r.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function ww(r){return r==null?!1:r.href==null?r.rel==="preload"&&typeof r.imageSrcSet=="string"&&typeof r.imageSizes=="string":typeof r.rel=="string"&&typeof r.href=="string"}async function Rw(r,e,n){let s=await Promise.all(r.map(async o=>{let u=e.routes[o.route.id];if(u){let f=await Aw(u,n);return f.links?f.links():[]}return[]}));return Dw(s.flat(1).filter(ww).filter(o=>o.rel==="stylesheet"||o.rel==="preload").map(o=>o.rel==="stylesheet"?{...o,rel:"prefetch",as:"style"}:{...o,rel:"prefetch"}))}function s0(r,e,n,s,o,u){let f=(p,g)=>n[g]?p.route.id!==n[g].route.id:!0,m=(p,g)=>n[g].pathname!==p.pathname||n[g].route.path?.endsWith("*")&&n[g].params["*"]!==p.params["*"];return u==="assets"?e.filter((p,g)=>f(p,g)||m(p,g)):u==="data"?e.filter((p,g)=>{let E=s.routes[p.route.id];if(!E||!E.hasLoader)return!1;if(f(p,g)||m(p,g))return!0;if(p.route.shouldRevalidate){let T=p.route.shouldRevalidate({currentUrl:new URL(o.pathname+o.search+o.hash,window.origin),currentParams:n[0]?.params||{},nextUrl:new URL(r,window.origin),nextParams:p.params,defaultShouldRevalidate:!0});if(typeof T=="boolean")return T}return!0}):[]}function Cw(r,e,{includeHydrateFallback:n}={}){return xw(r.map(s=>{let o=e.routes[s.route.id];if(!o)return[];let u=[o.module];return o.clientActionModule&&(u=u.concat(o.clientActionModule)),o.clientLoaderModule&&(u=u.concat(o.clientLoaderModule)),n&&o.hydrateFallbackModule&&(u=u.concat(o.hydrateFallbackModule)),o.imports&&(u=u.concat(o.imports)),u}).flat(1))}function xw(r){return[...new Set(r)]}function Iw(r){let e={},n=Object.keys(r).sort();for(let s of n)e[s]=r[s];return e}function Dw(r,e){let n=new Set;return new Set(e),r.reduce((s,o)=>{let u=JSON.stringify(Iw(o));return n.has(u)||(n.add(u),s.push({key:u,link:o})),s},[])}function KE(){let r=k.useContext(Co);return Sp(r,"You must render this element inside a <DataRouterContext.Provider> element"),r}function Nw(){let r=k.useContext(Kh);return Sp(r,"You must render this element inside a <DataRouterStateContext.Provider> element"),r}var Ap=k.createContext(void 0);Ap.displayName="FrameworkContext";function XE(){let r=k.useContext(Ap);return Sp(r,"You must render this element inside a <HydratedRouter> element"),r}function Ow(r,e){let n=k.useContext(Ap),[s,o]=k.useState(!1),[u,f]=k.useState(!1),{onFocus:m,onBlur:p,onMouseEnter:g,onMouseLeave:E,onTouchStart:T}=e,C=k.useRef(null);k.useEffect(()=>{if(r==="render"&&f(!0),r==="viewport"){let q=$=>{$.forEach(X=>{f(X.isIntersecting)})},z=new IntersectionObserver(q,{threshold:.5});return C.current&&z.observe(C.current),()=>{z.disconnect()}}},[r]),k.useEffect(()=>{if(s){let q=setTimeout(()=>{f(!0)},100);return()=>{clearTimeout(q)}}},[s]);let O=()=>{o(!0)},L=()=>{o(!1),f(!1)};return n?r!=="intent"?[u,C,{}]:[u,C,{onFocus:ql(m,O),onBlur:ql(p,L),onMouseEnter:ql(g,O),onMouseLeave:ql(E,L),onTouchStart:ql(T,O)}]:[!1,C,{}]}function ql(r,e){return n=>{r&&r(n),n.defaultPrevented||e(n)}}function Mw({page:r,...e}){let{router:n}=KE(),s=k.useMemo(()=>kE(n.routes,r,n.basename),[n.routes,r,n.basename]);return s?k.createElement(kw,{page:r,matches:s,...e}):null}function Vw(r){let{manifest:e,routeModules:n}=XE(),[s,o]=k.useState([]);return k.useEffect(()=>{let u=!1;return Rw(r,e,n).then(f=>{u||o(f)}),()=>{u=!0}},[r,e,n]),s}function kw({page:r,matches:e,...n}){let s=ws(),{manifest:o,routeModules:u}=XE(),{basename:f}=KE(),{loaderData:m,matches:p}=Nw(),g=k.useMemo(()=>s0(r,e,p,o,s,"data"),[r,e,p,o,s]),E=k.useMemo(()=>s0(r,e,p,o,s,"assets"),[r,e,p,o,s]),T=k.useMemo(()=>{if(r===s.pathname+s.search+s.hash)return[];let L=new Set,q=!1;if(e.forEach($=>{let X=o.routes[$.route.id];!X||!X.hasLoader||(!g.some(Z=>Z.route.id===$.route.id)&&$.route.id in m&&u[$.route.id]?.shouldRevalidate||X.hasClientLoader?q=!0:L.add($.route.id))}),L.size===0)return[];let z=Sw(r,f,"data");return q&&L.size>0&&z.searchParams.set("_routes",e.filter($=>L.has($.route.id)).map($=>$.route.id).join(",")),[z.pathname+z.search]},[f,m,s,o,g,e,r,u]),C=k.useMemo(()=>Cw(E,o),[E,o]),O=Vw(E);return k.createElement(k.Fragment,null,T.map(L=>k.createElement("link",{key:L,rel:"prefetch",as:"fetch",href:L,...n})),C.map(L=>k.createElement("link",{key:L,rel:"modulepreload",href:L,...n})),O.map(({key:L,link:q})=>k.createElement("link",{key:L,nonce:n.nonce,...q})))}function Pw(...r){return e=>{r.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var Lw=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{Lw&&(window.__reactRouterVersion="7.11.0")}catch{}function jw({basename:r,children:e,unstable_useTransitions:n,window:s}){let o=k.useRef();o.current==null&&(o.current=gA({window:s,v5Compat:!0}));let u=o.current,[f,m]=k.useState({action:u.action,location:u.location}),p=k.useCallback(g=>{n===!1?m(g):k.startTransition(()=>m(g))},[n]);return k.useLayoutEffect(()=>u.listen(p),[u,p]),k.createElement(dw,{basename:r,children:e,location:f.location,navigationType:f.action,navigator:u,unstable_useTransitions:n})}var WE=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,JE=k.forwardRef(function({onClick:e,discover:n="render",prefetch:s="none",relative:o,reloadDocument:u,replace:f,state:m,target:p,to:g,preventScrollReset:E,viewTransition:T,unstable_defaultShouldRevalidate:C,...O},L){let{basename:q,unstable_useTransitions:z}=k.useContext(Hn),$=typeof g=="string"&&WE.test(g),X=zE(g,q);g=X.to;let Z=XA(g,{relative:o}),[pe,_e,Te]=Ow(s,O),D=qw(g,{replace:f,state:m,target:p,preventScrollReset:E,relative:o,viewTransition:T,unstable_defaultShouldRevalidate:C,unstable_useTransitions:z});function I(N){e&&e(N),N.defaultPrevented||D(N)}let R=k.createElement("a",{...O,...Te,href:X.absoluteURL||Z,onClick:X.isExternal||u?e:I,ref:Pw(L,_e),target:p,"data-discover":!$&&n==="render"?"true":void 0});return pe&&!$?k.createElement(k.Fragment,null,R,k.createElement(Mw,{page:Z})):R});JE.displayName="Link";var Uw=k.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:s="",end:o=!1,style:u,to:f,viewTransition:m,children:p,...g},E){let T=fu(f,{relative:g.relative}),C=ws(),O=k.useContext(Kh),{navigator:L,basename:q}=k.useContext(Hn),z=O!=null&&$w(T)&&m===!0,$=L.encodeLocation?L.encodeLocation(T).pathname:T.pathname,X=C.pathname,Z=O&&O.navigation&&O.navigation.location?O.navigation.location.pathname:null;n||(X=X.toLowerCase(),Z=Z?Z.toLowerCase():null,$=$.toLowerCase()),Z&&q&&(Z=br(Z,q)||Z);const pe=$!=="/"&&$.endsWith("/")?$.length-1:$.length;let _e=X===$||!o&&X.startsWith($)&&X.charAt(pe)==="/",Te=Z!=null&&(Z===$||!o&&Z.startsWith($)&&Z.charAt($.length)==="/"),D={isActive:_e,isPending:Te,isTransitioning:z},I=_e?e:void 0,R;typeof s=="function"?R=s(D):R=[s,_e?"active":null,Te?"pending":null,z?"transitioning":null].filter(Boolean).join(" ");let N=typeof u=="function"?u(D):u;return k.createElement(JE,{...g,"aria-current":I,className:R,ref:E,style:N,to:f,viewTransition:m},typeof p=="function"?p(D):p)});Uw.displayName="NavLink";var zw=k.forwardRef(({discover:r="render",fetcherKey:e,navigate:n,reloadDocument:s,replace:o,state:u,method:f=mh,action:m,onSubmit:p,relative:g,preventScrollReset:E,viewTransition:T,unstable_defaultShouldRevalidate:C,...O},L)=>{let{unstable_useTransitions:q}=k.useContext(Hn),z=Gw(),$=Qw(m,{relative:g}),X=f.toLowerCase()==="get"?"get":"post",Z=typeof m=="string"&&WE.test(m),pe=_e=>{if(p&&p(_e),_e.defaultPrevented)return;_e.preventDefault();let Te=_e.nativeEvent.submitter,D=Te?.getAttribute("formmethod")||f,I=()=>z(Te||_e.currentTarget,{fetcherKey:e,method:D,navigate:n,replace:o,state:u,relative:g,preventScrollReset:E,viewTransition:T,unstable_defaultShouldRevalidate:C});q&&n!==!1?k.startTransition(()=>I()):I()};return k.createElement("form",{ref:L,method:X,action:$,onSubmit:s?p:pe,...O,"data-discover":!Z&&r==="render"?"true":void 0})});zw.displayName="Form";function Bw(r){return`${r} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function ZE(r){let e=k.useContext(Co);return mt(e,Bw(r)),e}function qw(r,{target:e,replace:n,state:s,preventScrollReset:o,relative:u,viewTransition:f,unstable_defaultShouldRevalidate:m,unstable_useTransitions:p}={}){let g=Io(),E=ws(),T=fu(r,{relative:u});return k.useCallback(C=>{if(_w(C,e)){C.preventDefault();let O=n!==void 0?n:eu(E)===eu(T),L=()=>g(r,{replace:O,state:s,preventScrollReset:o,relative:u,viewTransition:f,unstable_defaultShouldRevalidate:m});p?k.startTransition(()=>L()):L()}},[E,g,T,n,s,e,r,o,u,f,m,p])}var Hw=0,Fw=()=>`__${String(++Hw)}__`;function Gw(){let{router:r}=ZE("useSubmit"),{basename:e}=k.useContext(Hn),n=lw(),s=r.fetch,o=r.navigate;return k.useCallback(async(u,f={})=>{let{action:m,method:p,encType:g,formData:E,body:T}=bw(u,e);if(f.navigate===!1){let C=f.fetcherKey||Fw();await s(C,n,f.action||m,{unstable_defaultShouldRevalidate:f.unstable_defaultShouldRevalidate,preventScrollReset:f.preventScrollReset,formData:E,body:T,formMethod:f.method||p,formEncType:f.encType||g,flushSync:f.flushSync})}else await o(f.action||m,{unstable_defaultShouldRevalidate:f.unstable_defaultShouldRevalidate,preventScrollReset:f.preventScrollReset,formData:E,body:T,formMethod:f.method||p,formEncType:f.encType||g,replace:f.replace,state:f.state,fromRouteId:n,flushSync:f.flushSync,viewTransition:f.viewTransition})},[s,o,e,n])}function Qw(r,{relative:e}={}){let{basename:n}=k.useContext(Hn),s=k.useContext(Ti);mt(s,"useFormAction must be used inside a RouteContext");let[o]=s.matches.slice(-1),u={...fu(r||".",{relative:e})},f=ws();if(r==null){u.search=f.search;let m=new URLSearchParams(u.search),p=m.getAll("index");if(p.some(E=>E==="")){m.delete("index"),p.filter(T=>T).forEach(T=>m.append("index",T));let E=m.toString();u.search=E?`?${E}`:""}}return(!r||r===".")&&o.route.index&&(u.search=u.search?u.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(u.pathname=u.pathname==="/"?n:Tr([n,u.pathname])),eu(u)}function $w(r,{relative:e}={}){let n=k.useContext(qE);mt(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:s}=ZE("useViewTransitionState"),o=fu(r,{relative:e});if(!n.isTransitioning)return!1;let u=br(n.currentLocation.pathname,s)||n.currentLocation.pathname,f=br(n.nextLocation.pathname,s)||n.nextLocation.pathname;return Ch(o.pathname,f)!=null||Ch(o.pathname,u)!=null}const Yw=()=>{};var a0={};const eT=function(r){const e=[];let n=0;for(let s=0;s<r.length;s++){let o=r.charCodeAt(s);o<128?e[n++]=o:o<2048?(e[n++]=o>>6|192,e[n++]=o&63|128):(o&64512)===55296&&s+1<r.length&&(r.charCodeAt(s+1)&64512)===56320?(o=65536+((o&1023)<<10)+(r.charCodeAt(++s)&1023),e[n++]=o>>18|240,e[n++]=o>>12&63|128,e[n++]=o>>6&63|128,e[n++]=o&63|128):(e[n++]=o>>12|224,e[n++]=o>>6&63|128,e[n++]=o&63|128)}return e},Kw=function(r){const e=[];let n=0,s=0;for(;n<r.length;){const o=r[n++];if(o<128)e[s++]=String.fromCharCode(o);else if(o>191&&o<224){const u=r[n++];e[s++]=String.fromCharCode((o&31)<<6|u&63)}else if(o>239&&o<365){const u=r[n++],f=r[n++],m=r[n++],p=((o&7)<<18|(u&63)<<12|(f&63)<<6|m&63)-65536;e[s++]=String.fromCharCode(55296+(p>>10)),e[s++]=String.fromCharCode(56320+(p&1023))}else{const u=r[n++],f=r[n++];e[s++]=String.fromCharCode((o&15)<<12|(u&63)<<6|f&63)}}return e.join("")},tT={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(r,e){if(!Array.isArray(r))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let o=0;o<r.length;o+=3){const u=r[o],f=o+1<r.length,m=f?r[o+1]:0,p=o+2<r.length,g=p?r[o+2]:0,E=u>>2,T=(u&3)<<4|m>>4;let C=(m&15)<<2|g>>6,O=g&63;p||(O=64,f||(C=64)),s.push(n[E],n[T],n[C],n[O])}return s.join("")},encodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(r):this.encodeByteArray(eT(r),e)},decodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(r):Kw(this.decodeStringToByteArray(r,e))},decodeStringToByteArray(r,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let o=0;o<r.length;){const u=n[r.charAt(o++)],m=o<r.length?n[r.charAt(o)]:0;++o;const g=o<r.length?n[r.charAt(o)]:64;++o;const T=o<r.length?n[r.charAt(o)]:64;if(++o,u==null||m==null||g==null||T==null)throw new Xw;const C=u<<2|m>>4;if(s.push(C),g!==64){const O=m<<4&240|g>>2;if(s.push(O),T!==64){const L=g<<6&192|T;s.push(L)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let r=0;r<this.ENCODED_VALS.length;r++)this.byteToCharMap_[r]=this.ENCODED_VALS.charAt(r),this.charToByteMap_[this.byteToCharMap_[r]]=r,this.byteToCharMapWebSafe_[r]=this.ENCODED_VALS_WEBSAFE.charAt(r),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[r]]=r,r>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(r)]=r,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(r)]=r)}}};class Xw extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Ww=function(r){const e=eT(r);return tT.encodeByteArray(e,!0)},xh=function(r){return Ww(r).replace(/\./g,"")},nT=function(r){try{return tT.decodeString(r,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function Jw(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const Zw=()=>Jw().__FIREBASE_DEFAULTS__,eR=()=>{if(typeof process>"u"||typeof a0>"u")return;const r=a0.__FIREBASE_DEFAULTS__;if(r)return JSON.parse(r)},tR=()=>{if(typeof document>"u")return;let r;try{r=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=r&&nT(r[1]);return e&&JSON.parse(e)},Wh=()=>{try{return Yw()||Zw()||eR()||tR()}catch(r){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${r}`);return}},iT=r=>Wh()?.emulatorHosts?.[r],nR=r=>{const e=iT(r);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),s]:[e.substring(0,n),s]},rT=()=>Wh()?.config,sT=r=>Wh()?.[`_${r}`];class iR{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,s)=>{n?this.reject(n):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,s))}}}function Do(r){try{return(r.startsWith("http://")||r.startsWith("https://")?new URL(r).hostname:r).endsWith(".cloudworkstations.dev")}catch{return!1}}async function aT(r){return(await fetch(r,{credentials:"include"})).ok}function rR(r,e){if(r.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},s=e||"demo-project",o=r.iat||0,u=r.sub||r.user_id;if(!u)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const f={iss:`https://securetoken.google.com/${s}`,aud:s,iat:o,exp:o+3600,auth_time:o,sub:u,user_id:u,firebase:{sign_in_provider:"custom",identities:{}},...r};return[xh(JSON.stringify(n)),xh(JSON.stringify(f)),""].join(".")}const $l={};function sR(){const r={prod:[],emulator:[]};for(const e of Object.keys($l))$l[e]?r.emulator.push(e):r.prod.push(e);return r}function aR(r){let e=document.getElementById(r),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",r),n=!0),{created:n,element:e}}let o0=!1;function oT(r,e){if(typeof window>"u"||typeof document>"u"||!Do(window.location.host)||$l[r]===e||$l[r]||o0)return;$l[r]=e;function n(C){return`__firebase__banner__${C}`}const s="__firebase__banner",u=sR().prod.length>0;function f(){const C=document.getElementById(s);C&&C.remove()}function m(C){C.style.display="flex",C.style.background="#7faaf0",C.style.position="fixed",C.style.bottom="5px",C.style.left="5px",C.style.padding=".5em",C.style.borderRadius="5px",C.style.alignItems="center"}function p(C,O){C.setAttribute("width","24"),C.setAttribute("id",O),C.setAttribute("height","24"),C.setAttribute("viewBox","0 0 24 24"),C.setAttribute("fill","none"),C.style.marginLeft="-6px"}function g(){const C=document.createElement("span");return C.style.cursor="pointer",C.style.marginLeft="16px",C.style.fontSize="24px",C.innerHTML=" &times;",C.onclick=()=>{o0=!0,f()},C}function E(C,O){C.setAttribute("id",O),C.innerText="Learn more",C.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",C.setAttribute("target","__blank"),C.style.paddingLeft="5px",C.style.textDecoration="underline"}function T(){const C=aR(s),O=n("text"),L=document.getElementById(O)||document.createElement("span"),q=n("learnmore"),z=document.getElementById(q)||document.createElement("a"),$=n("preprendIcon"),X=document.getElementById($)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(C.created){const Z=C.element;m(Z),E(z,q);const pe=g();p(X,$),Z.append(X,L,z,pe),document.body.appendChild(Z)}u?(L.innerText="Preview backend disconnected.",X.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(X.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,L.innerText="Preview backend running in this workspace."),L.setAttribute("id",O)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",T):T()}function dn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function oR(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(dn())}function lR(){const r=Wh()?.forceEnvironment;if(r==="node")return!0;if(r==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function uR(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function cR(){const r=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof r=="object"&&r.id!==void 0}function hR(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function fR(){const r=dn();return r.indexOf("MSIE ")>=0||r.indexOf("Trident/")>=0}function dR(){return!lR()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function mR(){try{return typeof indexedDB=="object"}catch{return!1}}function pR(){return new Promise((r,e)=>{try{let n=!0;const s="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(s);o.onsuccess=()=>{o.result.close(),n||self.indexedDB.deleteDatabase(s),r(!0)},o.onupgradeneeded=()=>{n=!1},o.onerror=()=>{e(o.error?.message||"")}}catch(n){e(n)}})}const gR="FirebaseError";class Cr extends Error{constructor(e,n,s){super(n),this.code=e,this.customData=s,this.name=gR,Object.setPrototypeOf(this,Cr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,du.prototype.create)}}class du{constructor(e,n,s){this.service=e,this.serviceName=n,this.errors=s}create(e,...n){const s=n[0]||{},o=`${this.service}/${e}`,u=this.errors[e],f=u?yR(u,s):"Error",m=`${this.serviceName}: ${f} (${o}).`;return new Cr(o,m,s)}}function yR(r,e){return r.replace(vR,(n,s)=>{const o=e[s];return o!=null?String(o):`<${s}?>`})}const vR=/\{\$([^}]+)}/g;function _R(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}function ua(r,e){if(r===e)return!0;const n=Object.keys(r),s=Object.keys(e);for(const o of n){if(!s.includes(o))return!1;const u=r[o],f=e[o];if(l0(u)&&l0(f)){if(!ua(u,f))return!1}else if(u!==f)return!1}for(const o of s)if(!n.includes(o))return!1;return!0}function l0(r){return r!==null&&typeof r=="object"}function mu(r){const e=[];for(const[n,s]of Object.entries(r))Array.isArray(s)?s.forEach(o=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}function ER(r,e){const n=new TR(r,e);return n.subscribe.bind(n)}class TR{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(s=>{this.error(s)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,s){let o;if(e===void 0&&n===void 0&&s===void 0)throw new Error("Missing Observer.");bR(e,["next","error","complete"])?o=e:o={next:e,error:n,complete:s},o.next===void 0&&(o.next=Im),o.error===void 0&&(o.error=Im),o.complete===void 0&&(o.complete=Im);const u=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),u}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function bR(r,e){if(typeof r!="object"||r===null)return!1;for(const n of e)if(n in r&&typeof r[n]=="function")return!0;return!1}function Im(){}function zt(r){return r&&r._delegate?r._delegate:r}class ca{constructor(e,n,s){this.name=e,this.instanceFactory=n,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const ia="[DEFAULT]";class SR{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const s=new iR;if(this.instancesDeferred.set(n,s),this.isInitialized(n)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:n});o&&s.resolve(o)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e?.identifier),s=e?.optional??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(o){if(s)return null;throw o}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(wR(e))try{this.getOrInitializeService({instanceIdentifier:ia})}catch{}for(const[n,s]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(n);try{const u=this.getOrInitializeService({instanceIdentifier:o});s.resolve(u)}catch{}}}}clearInstance(e=ia){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ia){return this.instances.has(e)}getOptions(e=ia){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:s,options:n});for(const[u,f]of this.instancesDeferred.entries()){const m=this.normalizeInstanceIdentifier(u);s===m&&f.resolve(o)}return o}onInit(e,n){const s=this.normalizeInstanceIdentifier(n),o=this.onInitCallbacks.get(s)??new Set;o.add(e),this.onInitCallbacks.set(s,o);const u=this.instances.get(s);return u&&e(u,s),()=>{o.delete(e)}}invokeOnInitCallbacks(e,n){const s=this.onInitCallbacks.get(n);if(s)for(const o of s)try{o(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:AR(e),options:n}),this.instances.set(e,s),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=ia){return this.component?this.component.multipleInstances?e:ia:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function AR(r){return r===ia?void 0:r}function wR(r){return r.instantiationMode==="EAGER"}class RR{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new SR(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}var Be;(function(r){r[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT"})(Be||(Be={}));const CR={debug:Be.DEBUG,verbose:Be.VERBOSE,info:Be.INFO,warn:Be.WARN,error:Be.ERROR,silent:Be.SILENT},xR=Be.INFO,IR={[Be.DEBUG]:"log",[Be.VERBOSE]:"log",[Be.INFO]:"info",[Be.WARN]:"warn",[Be.ERROR]:"error"},DR=(r,e,...n)=>{if(e<r.logLevel)return;const s=new Date().toISOString(),o=IR[e];if(o)console[o](`[${s}]  ${r.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class wp{constructor(e){this.name=e,this._logLevel=xR,this._logHandler=DR,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Be))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?CR[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Be.DEBUG,...e),this._logHandler(this,Be.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Be.VERBOSE,...e),this._logHandler(this,Be.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Be.INFO,...e),this._logHandler(this,Be.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Be.WARN,...e),this._logHandler(this,Be.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Be.ERROR,...e),this._logHandler(this,Be.ERROR,...e)}}const NR=(r,e)=>e.some(n=>r instanceof n);let u0,c0;function OR(){return u0||(u0=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function MR(){return c0||(c0=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const lT=new WeakMap,Qm=new WeakMap,uT=new WeakMap,Dm=new WeakMap,Rp=new WeakMap;function VR(r){const e=new Promise((n,s)=>{const o=()=>{r.removeEventListener("success",u),r.removeEventListener("error",f)},u=()=>{n(fs(r.result)),o()},f=()=>{s(r.error),o()};r.addEventListener("success",u),r.addEventListener("error",f)});return e.then(n=>{n instanceof IDBCursor&&lT.set(n,r)}).catch(()=>{}),Rp.set(e,r),e}function kR(r){if(Qm.has(r))return;const e=new Promise((n,s)=>{const o=()=>{r.removeEventListener("complete",u),r.removeEventListener("error",f),r.removeEventListener("abort",f)},u=()=>{n(),o()},f=()=>{s(r.error||new DOMException("AbortError","AbortError")),o()};r.addEventListener("complete",u),r.addEventListener("error",f),r.addEventListener("abort",f)});Qm.set(r,e)}let $m={get(r,e,n){if(r instanceof IDBTransaction){if(e==="done")return Qm.get(r);if(e==="objectStoreNames")return r.objectStoreNames||uT.get(r);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return fs(r[e])},set(r,e,n){return r[e]=n,!0},has(r,e){return r instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in r}};function PR(r){$m=r($m)}function LR(r){return r===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const s=r.call(Nm(this),e,...n);return uT.set(s,e.sort?e.sort():[e]),fs(s)}:MR().includes(r)?function(...e){return r.apply(Nm(this),e),fs(lT.get(this))}:function(...e){return fs(r.apply(Nm(this),e))}}function jR(r){return typeof r=="function"?LR(r):(r instanceof IDBTransaction&&kR(r),NR(r,OR())?new Proxy(r,$m):r)}function fs(r){if(r instanceof IDBRequest)return VR(r);if(Dm.has(r))return Dm.get(r);const e=jR(r);return e!==r&&(Dm.set(r,e),Rp.set(e,r)),e}const Nm=r=>Rp.get(r);function UR(r,e,{blocked:n,upgrade:s,blocking:o,terminated:u}={}){const f=indexedDB.open(r,e),m=fs(f);return s&&f.addEventListener("upgradeneeded",p=>{s(fs(f.result),p.oldVersion,p.newVersion,fs(f.transaction),p)}),n&&f.addEventListener("blocked",p=>n(p.oldVersion,p.newVersion,p)),m.then(p=>{u&&p.addEventListener("close",()=>u()),o&&p.addEventListener("versionchange",g=>o(g.oldVersion,g.newVersion,g))}).catch(()=>{}),m}const zR=["get","getKey","getAll","getAllKeys","count"],BR=["put","add","delete","clear"],Om=new Map;function h0(r,e){if(!(r instanceof IDBDatabase&&!(e in r)&&typeof e=="string"))return;if(Om.get(e))return Om.get(e);const n=e.replace(/FromIndex$/,""),s=e!==n,o=BR.includes(n);if(!(n in(s?IDBIndex:IDBObjectStore).prototype)||!(o||zR.includes(n)))return;const u=async function(f,...m){const p=this.transaction(f,o?"readwrite":"readonly");let g=p.store;return s&&(g=g.index(m.shift())),(await Promise.all([g[n](...m),o&&p.done]))[0]};return Om.set(e,u),u}PR(r=>({...r,get:(e,n,s)=>h0(e,n)||r.get(e,n,s),has:(e,n)=>!!h0(e,n)||r.has(e,n)}));class qR{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(HR(n)){const s=n.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(n=>n).join(" ")}}function HR(r){return r.getComponent()?.type==="VERSION"}const Ym="@firebase/app",f0="0.14.6";const Sr=new wp("@firebase/app"),FR="@firebase/app-compat",GR="@firebase/analytics-compat",QR="@firebase/analytics",$R="@firebase/app-check-compat",YR="@firebase/app-check",KR="@firebase/auth",XR="@firebase/auth-compat",WR="@firebase/database",JR="@firebase/data-connect",ZR="@firebase/database-compat",eC="@firebase/functions",tC="@firebase/functions-compat",nC="@firebase/installations",iC="@firebase/installations-compat",rC="@firebase/messaging",sC="@firebase/messaging-compat",aC="@firebase/performance",oC="@firebase/performance-compat",lC="@firebase/remote-config",uC="@firebase/remote-config-compat",cC="@firebase/storage",hC="@firebase/storage-compat",fC="@firebase/firestore",dC="@firebase/ai",mC="@firebase/firestore-compat",pC="firebase",gC="12.6.0";const Km="[DEFAULT]",yC={[Ym]:"fire-core",[FR]:"fire-core-compat",[QR]:"fire-analytics",[GR]:"fire-analytics-compat",[YR]:"fire-app-check",[$R]:"fire-app-check-compat",[KR]:"fire-auth",[XR]:"fire-auth-compat",[WR]:"fire-rtdb",[JR]:"fire-data-connect",[ZR]:"fire-rtdb-compat",[eC]:"fire-fn",[tC]:"fire-fn-compat",[nC]:"fire-iid",[iC]:"fire-iid-compat",[rC]:"fire-fcm",[sC]:"fire-fcm-compat",[aC]:"fire-perf",[oC]:"fire-perf-compat",[lC]:"fire-rc",[uC]:"fire-rc-compat",[cC]:"fire-gcs",[hC]:"fire-gcs-compat",[fC]:"fire-fst",[mC]:"fire-fst-compat",[dC]:"fire-vertex","fire-js":"fire-js",[pC]:"fire-js-all"};const Ih=new Map,vC=new Map,Xm=new Map;function d0(r,e){try{r.container.addComponent(e)}catch(n){Sr.debug(`Component ${e.name} failed to register with FirebaseApp ${r.name}`,n)}}function yo(r){const e=r.name;if(Xm.has(e))return Sr.debug(`There were multiple attempts to register component ${e}.`),!1;Xm.set(e,r);for(const n of Ih.values())d0(n,r);for(const n of vC.values())d0(n,r);return!0}function Cp(r,e){const n=r.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),r.container.getProvider(e)}function yi(r){return r==null?!1:r.settings!==void 0}const _C={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ds=new du("app","Firebase",_C);class EC{constructor(e,n,s){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new ca("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ds.create("app-deleted",{appName:this._name})}}const No=gC;function cT(r,e={}){let n=r;typeof e!="object"&&(e={name:e});const s={name:Km,automaticDataCollectionEnabled:!0,...e},o=s.name;if(typeof o!="string"||!o)throw ds.create("bad-app-name",{appName:String(o)});if(n||(n=rT()),!n)throw ds.create("no-options");const u=Ih.get(o);if(u){if(ua(n,u.options)&&ua(s,u.config))return u;throw ds.create("duplicate-app",{appName:o})}const f=new RR(o);for(const p of Xm.values())f.addComponent(p);const m=new EC(n,s,f);return Ih.set(o,m),m}function hT(r=Km){const e=Ih.get(r);if(!e&&r===Km&&rT())return cT();if(!e)throw ds.create("no-app",{appName:r});return e}function ms(r,e,n){let s=yC[r]??r;n&&(s+=`-${n}`);const o=s.match(/\s|\//),u=e.match(/\s|\//);if(o||u){const f=[`Unable to register library "${s}" with version "${e}":`];o&&f.push(`library name "${s}" contains illegal characters (whitespace or "/")`),o&&u&&f.push("and"),u&&f.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Sr.warn(f.join(" "));return}yo(new ca(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}const TC="firebase-heartbeat-database",bC=1,tu="firebase-heartbeat-store";let Mm=null;function fT(){return Mm||(Mm=UR(TC,bC,{upgrade:(r,e)=>{switch(e){case 0:try{r.createObjectStore(tu)}catch(n){console.warn(n)}}}}).catch(r=>{throw ds.create("idb-open",{originalErrorMessage:r.message})})),Mm}async function SC(r){try{const n=(await fT()).transaction(tu),s=await n.objectStore(tu).get(dT(r));return await n.done,s}catch(e){if(e instanceof Cr)Sr.warn(e.message);else{const n=ds.create("idb-get",{originalErrorMessage:e?.message});Sr.warn(n.message)}}}async function m0(r,e){try{const s=(await fT()).transaction(tu,"readwrite");await s.objectStore(tu).put(e,dT(r)),await s.done}catch(n){if(n instanceof Cr)Sr.warn(n.message);else{const s=ds.create("idb-set",{originalErrorMessage:n?.message});Sr.warn(s.message)}}}function dT(r){return`${r.name}!${r.options.appId}`}const AC=1024,wC=30;class RC{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new xC(n),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=p0();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:n}),this._heartbeatsCache.heartbeats.length>wC){const o=IC(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){Sr.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=p0(),{heartbeatsToSend:n,unsentEntries:s}=CC(this._heartbeatsCache.heartbeats),o=xh(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(e){return Sr.warn(e),""}}}function p0(){return new Date().toISOString().substring(0,10)}function CC(r,e=AC){const n=[];let s=r.slice();for(const o of r){const u=n.find(f=>f.agent===o.agent);if(u){if(u.dates.push(o.date),g0(n)>e){u.dates.pop();break}}else if(n.push({agent:o.agent,dates:[o.date]}),g0(n)>e){n.pop();break}s=s.slice(1)}return{heartbeatsToSend:n,unsentEntries:s}}class xC{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return mR()?pR().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await SC(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return m0(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return m0(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function g0(r){return xh(JSON.stringify({version:2,heartbeats:r})).length}function IC(r){if(r.length===0)return-1;let e=0,n=r[0].date;for(let s=1;s<r.length;s++)r[s].date<n&&(n=r[s].date,e=s);return e}function DC(r){yo(new ca("platform-logger",e=>new qR(e),"PRIVATE")),yo(new ca("heartbeat",e=>new RC(e),"PRIVATE")),ms(Ym,f0,r),ms(Ym,f0,"esm2020"),ms("fire-js","")}DC("");function mT(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const NC=mT,pT=new du("auth","Firebase",mT());const Dh=new wp("@firebase/auth");function OC(r,...e){Dh.logLevel<=Be.WARN&&Dh.warn(`Auth (${No}): ${r}`,...e)}function gh(r,...e){Dh.logLevel<=Be.ERROR&&Dh.error(`Auth (${No}): ${r}`,...e)}function Ki(r,...e){throw Ip(r,...e)}function _i(r,...e){return Ip(r,...e)}function xp(r,e,n){const s={...NC(),[e]:n};return new du("auth","Firebase",s).create(e,{appName:r.name})}function oa(r){return xp(r,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function MC(r,e,n){const s=n;if(!(e instanceof s))throw s.name!==e.constructor.name&&Ki(r,"argument-error"),xp(r,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Ip(r,...e){if(typeof r!="string"){const n=e[0],s=[...e.slice(1)];return s[0]&&(s[0].appName=r.name),r._errorFactory.create(n,...s)}return pT.create(r,...e)}function Ie(r,e,...n){if(!r)throw Ip(e,...n)}function _r(r){const e="INTERNAL ASSERTION FAILED: "+r;throw gh(e),new Error(e)}function Ar(r,e){r||_r(e)}function Wm(){return typeof self<"u"&&self.location?.href||""}function VC(){return y0()==="http:"||y0()==="https:"}function y0(){return typeof self<"u"&&self.location?.protocol||null}function kC(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(VC()||cR()||"connection"in navigator)?navigator.onLine:!0}function PC(){if(typeof navigator>"u")return null;const r=navigator;return r.languages&&r.languages[0]||r.language||null}class pu{constructor(e,n){this.shortDelay=e,this.longDelay=n,Ar(n>e,"Short delay should be less than long delay!"),this.isMobile=oR()||hR()}get(){return kC()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Dp(r,e){Ar(r.emulator,"Emulator should always be set here");const{url:n}=r.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}class gT{static initialize(e,n,s){this.fetchImpl=e,n&&(this.headersImpl=n),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;_r("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;_r("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;_r("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const LC={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const jC=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],UC=new pu(3e4,6e4);function Np(r,e){return r.tenantId&&!e.tenantId?{...e,tenantId:r.tenantId}:e}async function Oo(r,e,n,s,o={}){return yT(r,o,async()=>{let u={},f={};s&&(e==="GET"?f=s:u={body:JSON.stringify(s)});const m=mu({key:r.config.apiKey,...f}).slice(1),p=await r._getAdditionalHeaders();p["Content-Type"]="application/json",r.languageCode&&(p["X-Firebase-Locale"]=r.languageCode);const g={method:e,headers:p,...u};return uR()||(g.referrerPolicy="no-referrer"),r.emulatorConfig&&Do(r.emulatorConfig.host)&&(g.credentials="include"),gT.fetch()(await vT(r,r.config.apiHost,n,m),g)})}async function yT(r,e,n){r._canInitEmulator=!1;const s={...LC,...e};try{const o=new BC(r),u=await Promise.race([n(),o.promise]);o.clearNetworkTimeout();const f=await u.json();if("needConfirmation"in f)throw oh(r,"account-exists-with-different-credential",f);if(u.ok&&!("errorMessage"in f))return f;{const m=u.ok?f.errorMessage:f.error.message,[p,g]=m.split(" : ");if(p==="FEDERATED_USER_ID_ALREADY_LINKED")throw oh(r,"credential-already-in-use",f);if(p==="EMAIL_EXISTS")throw oh(r,"email-already-in-use",f);if(p==="USER_DISABLED")throw oh(r,"user-disabled",f);const E=s[p]||p.toLowerCase().replace(/[_\s]+/g,"-");if(g)throw xp(r,E,g);Ki(r,E)}}catch(o){if(o instanceof Cr)throw o;Ki(r,"network-request-failed",{message:String(o)})}}async function zC(r,e,n,s,o={}){const u=await Oo(r,e,n,s,o);return"mfaPendingCredential"in u&&Ki(r,"multi-factor-auth-required",{_serverResponse:u}),u}async function vT(r,e,n,s){const o=`${e}${n}?${s}`,u=r,f=u.config.emulator?Dp(r.config,o):`${r.config.apiScheme}://${o}`;return jC.includes(n)&&(await u._persistenceManagerAvailable,u._getPersistenceType()==="COOKIE")?u._getPersistence()._getFinalTarget(f).toString():f}class BC{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,s)=>{this.timer=setTimeout(()=>s(_i(this.auth,"network-request-failed")),UC.get())})}}function oh(r,e,n){const s={appName:r.name};n.email&&(s.email=n.email),n.phoneNumber&&(s.phoneNumber=n.phoneNumber);const o=_i(r,e,s);return o.customData._tokenResponse=n,o}async function qC(r,e){return Oo(r,"POST","/v1/accounts:delete",e)}async function Nh(r,e){return Oo(r,"POST","/v1/accounts:lookup",e)}function Yl(r){if(r)try{const e=new Date(Number(r));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function HC(r,e=!1){const n=zt(r),s=await n.getIdToken(e),o=Op(s);Ie(o&&o.exp&&o.auth_time&&o.iat,n.auth,"internal-error");const u=typeof o.firebase=="object"?o.firebase:void 0,f=u?.sign_in_provider;return{claims:o,token:s,authTime:Yl(Vm(o.auth_time)),issuedAtTime:Yl(Vm(o.iat)),expirationTime:Yl(Vm(o.exp)),signInProvider:f||null,signInSecondFactor:u?.sign_in_second_factor||null}}function Vm(r){return Number(r)*1e3}function Op(r){const[e,n,s]=r.split(".");if(e===void 0||n===void 0||s===void 0)return gh("JWT malformed, contained fewer than 3 sections"),null;try{const o=nT(n);return o?JSON.parse(o):(gh("Failed to decode base64 JWT payload"),null)}catch(o){return gh("Caught error parsing JWT payload as JSON",o?.toString()),null}}function v0(r){const e=Op(r);return Ie(e,"internal-error"),Ie(typeof e.exp<"u","internal-error"),Ie(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function nu(r,e,n=!1){if(n)return e;try{return await e}catch(s){throw s instanceof Cr&&FC(s)&&r.auth.currentUser===r&&await r.auth.signOut(),s}}function FC({code:r}){return r==="auth/user-disabled"||r==="auth/user-token-expired"}class GC{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const s=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class Jm{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Yl(this.lastLoginAt),this.creationTime=Yl(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function Oh(r){const e=r.auth,n=await r.getIdToken(),s=await nu(r,Nh(e,{idToken:n}));Ie(s?.users.length,e,"internal-error");const o=s.users[0];r._notifyReloadListener(o);const u=o.providerUserInfo?.length?_T(o.providerUserInfo):[],f=$C(r.providerData,u),m=r.isAnonymous,p=!(r.email&&o.passwordHash)&&!f?.length,g=m?p:!1,E={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:f,metadata:new Jm(o.createdAt,o.lastLoginAt),isAnonymous:g};Object.assign(r,E)}async function QC(r){const e=zt(r);await Oh(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function $C(r,e){return[...r.filter(s=>!e.some(o=>o.providerId===s.providerId)),...e]}function _T(r){return r.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}async function YC(r,e){const n=await yT(r,{},async()=>{const s=mu({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:u}=r.config,f=await vT(r,o,"/v1/token",`key=${u}`),m=await r._getAdditionalHeaders();m["Content-Type"]="application/x-www-form-urlencoded";const p={method:"POST",headers:m,body:s};return r.emulatorConfig&&Do(r.emulatorConfig.host)&&(p.credentials="include"),gT.fetch()(f,p)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function KC(r,e){return Oo(r,"POST","/v2/accounts:revokeToken",Np(r,e))}class fo{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ie(e.idToken,"internal-error"),Ie(typeof e.idToken<"u","internal-error"),Ie(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):v0(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Ie(e.length!==0,"internal-error");const n=v0(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Ie(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:s,refreshToken:o,expiresIn:u}=await YC(e,n);this.updateTokensAndExpiration(s,o,Number(u))}updateTokensAndExpiration(e,n,s){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(e,n){const{refreshToken:s,accessToken:o,expirationTime:u}=n,f=new fo;return s&&(Ie(typeof s=="string","internal-error",{appName:e}),f.refreshToken=s),o&&(Ie(typeof o=="string","internal-error",{appName:e}),f.accessToken=o),u&&(Ie(typeof u=="number","internal-error",{appName:e}),f.expirationTime=u),f}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new fo,this.toJSON())}_performRefresh(){return _r("not implemented")}}function os(r,e){Ie(typeof r=="string"||typeof r>"u","internal-error",{appName:e})}class vi{constructor({uid:e,auth:n,stsTokenManager:s,...o}){this.providerId="firebase",this.proactiveRefresh=new GC(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new Jm(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const n=await nu(this,this.stsTokenManager.getToken(this.auth,e));return Ie(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return HC(this,e)}reload(){return QC(this)}_assign(e){this!==e&&(Ie(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new vi({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){Ie(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let s=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),s=!0),n&&await Oh(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(yi(this.auth.app))return Promise.reject(oa(this.auth));const e=await this.getIdToken();return await nu(this,qC(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const s=n.displayName??void 0,o=n.email??void 0,u=n.phoneNumber??void 0,f=n.photoURL??void 0,m=n.tenantId??void 0,p=n._redirectEventId??void 0,g=n.createdAt??void 0,E=n.lastLoginAt??void 0,{uid:T,emailVerified:C,isAnonymous:O,providerData:L,stsTokenManager:q}=n;Ie(T&&q,e,"internal-error");const z=fo.fromJSON(this.name,q);Ie(typeof T=="string",e,"internal-error"),os(s,e.name),os(o,e.name),Ie(typeof C=="boolean",e,"internal-error"),Ie(typeof O=="boolean",e,"internal-error"),os(u,e.name),os(f,e.name),os(m,e.name),os(p,e.name),os(g,e.name),os(E,e.name);const $=new vi({uid:T,auth:e,email:o,emailVerified:C,displayName:s,isAnonymous:O,photoURL:f,phoneNumber:u,tenantId:m,stsTokenManager:z,createdAt:g,lastLoginAt:E});return L&&Array.isArray(L)&&($.providerData=L.map(X=>({...X}))),p&&($._redirectEventId=p),$}static async _fromIdTokenResponse(e,n,s=!1){const o=new fo;o.updateFromServerResponse(n);const u=new vi({uid:n.localId,auth:e,stsTokenManager:o,isAnonymous:s});return await Oh(u),u}static async _fromGetAccountInfoResponse(e,n,s){const o=n.users[0];Ie(o.localId!==void 0,"internal-error");const u=o.providerUserInfo!==void 0?_T(o.providerUserInfo):[],f=!(o.email&&o.passwordHash)&&!u?.length,m=new fo;m.updateFromIdToken(s);const p=new vi({uid:o.localId,auth:e,stsTokenManager:m,isAnonymous:f}),g={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:u,metadata:new Jm(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!u?.length};return Object.assign(p,g),p}}const _0=new Map;function Er(r){Ar(r instanceof Function,"Expected a class definition");let e=_0.get(r);return e?(Ar(e instanceof r,"Instance stored in cache mismatched with class"),e):(e=new r,_0.set(r,e),e)}class ET{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}ET.type="NONE";const E0=ET;function yh(r,e,n){return`firebase:${r}:${e}:${n}`}class mo{constructor(e,n,s){this.persistence=e,this.auth=n,this.userKey=s;const{config:o,name:u}=this.auth;this.fullUserKey=yh(this.userKey,o.apiKey,u),this.fullPersistenceKey=yh("persistence",o.apiKey,u),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await Nh(this.auth,{idToken:e}).catch(()=>{});return n?vi._fromGetAccountInfoResponse(this.auth,n,e):null}return vi._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,s="authUser"){if(!n.length)return new mo(Er(E0),e,s);const o=(await Promise.all(n.map(async g=>{if(await g._isAvailable())return g}))).filter(g=>g);let u=o[0]||Er(E0);const f=yh(s,e.config.apiKey,e.name);let m=null;for(const g of n)try{const E=await g._get(f);if(E){let T;if(typeof E=="string"){const C=await Nh(e,{idToken:E}).catch(()=>{});if(!C)break;T=await vi._fromGetAccountInfoResponse(e,C,E)}else T=vi._fromJSON(e,E);g!==u&&(m=T),u=g;break}}catch{}const p=o.filter(g=>g._shouldAllowMigration);return!u._shouldAllowMigration||!p.length?new mo(u,e,s):(u=p[0],m&&await u._set(f,m.toJSON()),await Promise.all(n.map(async g=>{if(g!==u)try{await g._remove(f)}catch{}})),new mo(u,e,s))}}function T0(r){const e=r.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(AT(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(TT(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(RT(e))return"Blackberry";if(CT(e))return"Webos";if(bT(e))return"Safari";if((e.includes("chrome/")||ST(e))&&!e.includes("edge/"))return"Chrome";if(wT(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=r.match(n);if(s?.length===2)return s[1]}return"Other"}function TT(r=dn()){return/firefox\//i.test(r)}function bT(r=dn()){const e=r.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function ST(r=dn()){return/crios\//i.test(r)}function AT(r=dn()){return/iemobile/i.test(r)}function wT(r=dn()){return/android/i.test(r)}function RT(r=dn()){return/blackberry/i.test(r)}function CT(r=dn()){return/webos/i.test(r)}function Mp(r=dn()){return/iphone|ipad|ipod/i.test(r)||/macintosh/i.test(r)&&/mobile/i.test(r)}function XC(r=dn()){return Mp(r)&&!!window.navigator?.standalone}function WC(){return fR()&&document.documentMode===10}function xT(r=dn()){return Mp(r)||wT(r)||CT(r)||RT(r)||/windows phone/i.test(r)||AT(r)}function IT(r,e=[]){let n;switch(r){case"Browser":n=T0(dn());break;case"Worker":n=`${T0(dn())}-${r}`;break;default:n=r}const s=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${No}/${s}`}class JC{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const s=u=>new Promise((f,m)=>{try{const p=e(u);f(p)}catch(p){m(p)}});s.onAbort=n,this.queue.push(s);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const s of this.queue)await s(e),s.onAbort&&n.push(s.onAbort)}catch(s){n.reverse();for(const o of n)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s?.message})}}}async function ZC(r,e={}){return Oo(r,"GET","/v2/passwordPolicy",Np(r,e))}const ex=6;class tx{constructor(e){const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??ex,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const s=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;s&&(n.meetsMinPasswordLength=e.length>=s),o&&(n.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let s;for(let o=0;o<e.length;o++)s=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(n,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(e,n,s,o,u){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=u))}}class nx{constructor(e,n,s,o){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=s,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new b0(this),this.idTokenSubscription=new b0(this),this.beforeStateQueue=new JC(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=pT,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(u=>this._resolvePersistenceManagerAvailable=u)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Er(n)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await mo.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Nh(this,{idToken:e}),s=await vi._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(s)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(yi(this.app)){const u=this.app.settings.authIdToken;return u?new Promise(f=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(u).then(f,f))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let s=n,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const u=this.redirectUser?._redirectEventId,f=s?._redirectEventId,m=await this.tryRedirectSignIn(e);(!u||u===f)&&m?.user&&(s=m.user,o=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(s)}catch(u){s=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(u))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return Ie(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Oh(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=PC()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(yi(this.app))return Promise.reject(oa(this));const n=e?zt(e):null;return n&&Ie(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Ie(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return yi(this.app)?Promise.reject(oa(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return yi(this.app)?Promise.reject(oa(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Er(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await ZC(this),n=new tx(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new du("auth","Firebase",e())}onAuthStateChanged(e,n,s){return this.registerStateListener(this.authStateSubscription,e,n,s)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,s){return this.registerStateListener(this.idTokenSubscription,e,n,s)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const s=this.onAuthStateChanged(()=>{s(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(s.tenantId=this.tenantId),await KC(this,s)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,n){const s=await this.getOrInitRedirectPersistenceManager(n);return e===null?s.removeCurrentUser():s.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Er(e)||this._popupRedirectResolver;Ie(n,this,"argument-error"),this.redirectPersistenceManager=await mo.create(this,[Er(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,s,o){if(this._deleted)return()=>{};const u=typeof n=="function"?n:n.next.bind(n);let f=!1;const m=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ie(m,this,"internal-error"),m.then(()=>{f||u(this.currentUser)}),typeof n=="function"){const p=e.addObserver(n,s,o);return()=>{f=!0,p()}}else{const p=e.addObserver(n);return()=>{f=!0,p()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ie(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=IT(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();n&&(e["X-Firebase-Client"]=n);const s=await this._getAppCheckToken();return s&&(e["X-Firebase-AppCheck"]=s),e}async _getAppCheckToken(){if(yi(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&OC(`Error while retrieving App Check token: ${e.error}`),e?.token}}function Jh(r){return zt(r)}class b0{constructor(e){this.auth=e,this.observer=null,this.addObserver=ER(n=>this.observer=n)}get next(){return Ie(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let Vp={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function ix(r){Vp=r}function rx(r){return Vp.loadJS(r)}function sx(){return Vp.gapiScript}function ax(r){return`__${r}${Math.floor(Math.random()*1e6)}`}function ox(r,e){const n=Cp(r,"auth");if(n.isInitialized()){const o=n.getImmediate(),u=n.getOptions();if(ua(u,e??{}))return o;Ki(o,"already-initialized")}return n.initialize({options:e})}function lx(r,e){const n=e?.persistence||[],s=(Array.isArray(n)?n:[n]).map(Er);e?.errorMap&&r._updateErrorMap(e.errorMap),r._initializeWithPersistence(s,e?.popupRedirectResolver)}function ux(r,e,n){const s=Jh(r);Ie(/^https?:\/\//.test(e),s,"invalid-emulator-scheme");const o=!1,u=DT(e),{host:f,port:m}=cx(e),p=m===null?"":`:${m}`,g={url:`${u}//${f}${p}/`},E=Object.freeze({host:f,port:m,protocol:u.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!s._canInitEmulator){Ie(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),Ie(ua(g,s.config.emulator)&&ua(E,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=g,s.emulatorConfig=E,s.settings.appVerificationDisabledForTesting=!0,Do(f)?(aT(`${u}//${f}${p}`),oT("Auth",!0)):hx()}function DT(r){const e=r.indexOf(":");return e<0?"":r.substr(0,e+1)}function cx(r){const e=DT(r),n=/(\/\/)?([^?#/]+)/.exec(r.substr(e.length));if(!n)return{host:"",port:null};const s=n[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(s);if(o){const u=o[1];return{host:u,port:S0(s.substr(u.length+1))}}else{const[u,f]=s.split(":");return{host:u,port:S0(f)}}}function S0(r){if(!r)return null;const e=Number(r);return isNaN(e)?null:e}function hx(){function r(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",r):r())}class NT{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return _r("not implemented")}_getIdTokenResponse(e){return _r("not implemented")}_linkToIdToken(e,n){return _r("not implemented")}_getReauthenticationResolver(e){return _r("not implemented")}}async function po(r,e){return zC(r,"POST","/v1/accounts:signInWithIdp",Np(r,e))}const fx="http://localhost";class ha extends NT{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new ha(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Ki("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:s,signInMethod:o,...u}=n;if(!s||!o)return null;const f=new ha(s,o);return f.idToken=u.idToken||void 0,f.accessToken=u.accessToken||void 0,f.secret=u.secret,f.nonce=u.nonce,f.pendingToken=u.pendingToken||null,f}_getIdTokenResponse(e){const n=this.buildRequest();return po(e,n)}_linkToIdToken(e,n){const s=this.buildRequest();return s.idToken=n,po(e,s)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,po(e,n)}buildRequest(){const e={requestUri:fx,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=mu(n)}return e}}class kp{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class gu extends kp{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class ls extends gu{constructor(){super("facebook.com")}static credential(e){return ha._fromParams({providerId:ls.PROVIDER_ID,signInMethod:ls.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ls.credentialFromTaggedObject(e)}static credentialFromError(e){return ls.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ls.credential(e.oauthAccessToken)}catch{return null}}}ls.FACEBOOK_SIGN_IN_METHOD="facebook.com";ls.PROVIDER_ID="facebook.com";class vr extends gu{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return ha._fromParams({providerId:vr.PROVIDER_ID,signInMethod:vr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return vr.credentialFromTaggedObject(e)}static credentialFromError(e){return vr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:s}=e;if(!n&&!s)return null;try{return vr.credential(n,s)}catch{return null}}}vr.GOOGLE_SIGN_IN_METHOD="google.com";vr.PROVIDER_ID="google.com";class us extends gu{constructor(){super("github.com")}static credential(e){return ha._fromParams({providerId:us.PROVIDER_ID,signInMethod:us.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return us.credentialFromTaggedObject(e)}static credentialFromError(e){return us.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return us.credential(e.oauthAccessToken)}catch{return null}}}us.GITHUB_SIGN_IN_METHOD="github.com";us.PROVIDER_ID="github.com";class cs extends gu{constructor(){super("twitter.com")}static credential(e,n){return ha._fromParams({providerId:cs.PROVIDER_ID,signInMethod:cs.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return cs.credentialFromTaggedObject(e)}static credentialFromError(e){return cs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:s}=e;if(!n||!s)return null;try{return cs.credential(n,s)}catch{return null}}}cs.TWITTER_SIGN_IN_METHOD="twitter.com";cs.PROVIDER_ID="twitter.com";class vo{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,s,o=!1){const u=await vi._fromIdTokenResponse(e,s,o),f=A0(s);return new vo({user:u,providerId:f,_tokenResponse:s,operationType:n})}static async _forOperation(e,n,s){await e._updateTokensIfNecessary(s,!0);const o=A0(s);return new vo({user:e,providerId:o,_tokenResponse:s,operationType:n})}}function A0(r){return r.providerId?r.providerId:"phoneNumber"in r?"phone":null}class Mh extends Cr{constructor(e,n,s,o){super(n.code,n.message),this.operationType=s,this.user=o,Object.setPrototypeOf(this,Mh.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(e,n,s,o){return new Mh(e,n,s,o)}}function OT(r,e,n,s){return(e==="reauthenticate"?n._getReauthenticationResolver(r):n._getIdTokenResponse(r)).catch(u=>{throw u.code==="auth/multi-factor-auth-required"?Mh._fromErrorAndOperation(r,u,e,s):u})}async function dx(r,e,n=!1){const s=await nu(r,e._linkToIdToken(r.auth,await r.getIdToken()),n);return vo._forOperation(r,"link",s)}async function mx(r,e,n=!1){const{auth:s}=r;if(yi(s.app))return Promise.reject(oa(s));const o="reauthenticate";try{const u=await nu(r,OT(s,o,e,r),n);Ie(u.idToken,s,"internal-error");const f=Op(u.idToken);Ie(f,s,"internal-error");const{sub:m}=f;return Ie(r.uid===m,s,"user-mismatch"),vo._forOperation(r,o,u)}catch(u){throw u?.code==="auth/user-not-found"&&Ki(s,"user-mismatch"),u}}async function px(r,e,n=!1){if(yi(r.app))return Promise.reject(oa(r));const s="signIn",o=await OT(r,s,e),u=await vo._fromIdTokenResponse(r,s,o);return n||await r._updateCurrentUser(u.user),u}function gx(r,e,n,s){return zt(r).onIdTokenChanged(e,n,s)}function yx(r,e,n){return zt(r).beforeAuthStateChanged(e,n)}function vx(r,e,n,s){return zt(r).onAuthStateChanged(e,n,s)}function _x(r){return zt(r).signOut()}const Vh="__sak";class MT{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Vh,"1"),this.storage.removeItem(Vh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const Ex=1e3,Tx=10;class VT extends MT{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=xT(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const s=this.storage.getItem(n),o=this.localCache[n];s!==o&&e(n,o,s)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((f,m,p)=>{this.notifyListeners(f,p)});return}const s=e.key;n?this.detachListener():this.stopPolling();const o=()=>{const f=this.storage.getItem(s);!n&&this.localCache[s]===f||this.notifyListeners(s,f)},u=this.storage.getItem(s);WC()&&u!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,Tx):o()}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const o of Array.from(s))o(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:s}),!0)})},Ex)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}VT.type="LOCAL";const bx=VT;class kT extends MT{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}kT.type="SESSION";const PT=kT;function Sx(r){return Promise.all(r.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}class Zh{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(o=>o.isListeningto(e));if(n)return n;const s=new Zh(e);return this.receivers.push(s),s}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:s,eventType:o,data:u}=n.data,f=this.handlersMap[o];if(!f?.size)return;n.ports[0].postMessage({status:"ack",eventId:s,eventType:o});const m=Array.from(f).map(async g=>g(n.origin,u)),p=await Sx(m);n.ports[0].postMessage({status:"done",eventId:s,eventType:o,response:p})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Zh.receivers=[];function Pp(r="",e=10){let n="";for(let s=0;s<e;s++)n+=Math.floor(Math.random()*10);return r+n}class Ax{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,s=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let u,f;return new Promise((m,p)=>{const g=Pp("",20);o.port1.start();const E=setTimeout(()=>{p(new Error("unsupported_event"))},s);f={messageChannel:o,onMessage(T){const C=T;if(C.data.eventId===g)switch(C.data.status){case"ack":clearTimeout(E),u=setTimeout(()=>{p(new Error("timeout"))},3e3);break;case"done":clearTimeout(u),m(C.data.response);break;default:clearTimeout(E),clearTimeout(u),p(new Error("invalid_response"));break}}},this.handlers.add(f),o.port1.addEventListener("message",f.onMessage),this.target.postMessage({eventType:e,eventId:g,data:n},[o.port2])}).finally(()=>{f&&this.removeMessageHandler(f)})}}function Fi(){return window}function wx(r){Fi().location.href=r}function LT(){return typeof Fi().WorkerGlobalScope<"u"&&typeof Fi().importScripts=="function"}async function Rx(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function Cx(){return navigator?.serviceWorker?.controller||null}function xx(){return LT()?self:null}const jT="firebaseLocalStorageDb",Ix=1,kh="firebaseLocalStorage",UT="fbase_key";class yu{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function ef(r,e){return r.transaction([kh],e?"readwrite":"readonly").objectStore(kh)}function Dx(){const r=indexedDB.deleteDatabase(jT);return new yu(r).toPromise()}function Zm(){const r=indexedDB.open(jT,Ix);return new Promise((e,n)=>{r.addEventListener("error",()=>{n(r.error)}),r.addEventListener("upgradeneeded",()=>{const s=r.result;try{s.createObjectStore(kh,{keyPath:UT})}catch(o){n(o)}}),r.addEventListener("success",async()=>{const s=r.result;s.objectStoreNames.contains(kh)?e(s):(s.close(),await Dx(),e(await Zm()))})})}async function w0(r,e,n){const s=ef(r,!0).put({[UT]:e,value:n});return new yu(s).toPromise()}async function Nx(r,e){const n=ef(r,!1).get(e),s=await new yu(n).toPromise();return s===void 0?null:s.value}function R0(r,e){const n=ef(r,!0).delete(e);return new yu(n).toPromise()}const Ox=800,Mx=3;class zT{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Zm(),this.db)}async _withRetries(e){let n=0;for(;;)try{const s=await this._openDb();return await e(s)}catch(s){if(n++>Mx)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return LT()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Zh._getInstance(xx()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await Rx(),!this.activeServiceWorker)return;this.sender=new Ax(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||Cx()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Zm();return await w0(e,Vh,"1"),await R0(e,Vh),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(s=>w0(s,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(s=>Nx(s,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>R0(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const u=ef(o,!1).getAll();return new yu(u).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],s=new Set;if(e.length!==0)for(const{fbase_key:o,value:u}of e)s.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(u)&&(this.notifyListeners(o,u),n.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!s.has(o)&&(this.notifyListeners(o,null),n.push(o));return n}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const o of Array.from(s))o(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),Ox)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}zT.type="LOCAL";const Vx=zT;new pu(3e4,6e4);function BT(r,e){return e?Er(e):(Ie(r._popupRedirectResolver,r,"argument-error"),r._popupRedirectResolver)}class Lp extends NT{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return po(e,this._buildIdpRequest())}_linkToIdToken(e,n){return po(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return po(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function kx(r){return px(r.auth,new Lp(r),r.bypassAuthState)}function Px(r){const{auth:e,user:n}=r;return Ie(n,e,"internal-error"),mx(n,new Lp(r),r.bypassAuthState)}async function Lx(r){const{auth:e,user:n}=r;return Ie(n,e,"internal-error"),dx(n,new Lp(r),r.bypassAuthState)}class qT{constructor(e,n,s,o,u=!1){this.auth=e,this.resolver=s,this.user=o,this.bypassAuthState=u,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:s,postBody:o,tenantId:u,error:f,type:m}=e;if(f){this.reject(f);return}const p={auth:this.auth,requestUri:n,sessionId:s,tenantId:u||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(m)(p))}catch(g){this.reject(g)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return kx;case"linkViaPopup":case"linkViaRedirect":return Lx;case"reauthViaPopup":case"reauthViaRedirect":return Px;default:Ki(this.auth,"internal-error")}}resolve(e){Ar(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Ar(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const jx=new pu(2e3,1e4);async function Ux(r,e,n){if(yi(r.app))return Promise.reject(_i(r,"operation-not-supported-in-this-environment"));const s=Jh(r);MC(r,e,kp);const o=BT(s,n);return new ra(s,"signInViaPopup",e,o).executeNotNull()}class ra extends qT{constructor(e,n,s,o,u){super(e,n,o,u),this.provider=s,this.authWindow=null,this.pollId=null,ra.currentPopupAction&&ra.currentPopupAction.cancel(),ra.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ie(e,this.auth,"internal-error"),e}async onExecution(){Ar(this.filter.length===1,"Popup operations only handle one event");const e=Pp();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(_i(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(_i(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ra.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(_i(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,jx.get())};e()}}ra.currentPopupAction=null;const zx="pendingRedirect",vh=new Map;class Bx extends qT{constructor(e,n,s=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,s),this.eventId=null}async execute(){let e=vh.get(this.auth._key());if(!e){try{const s=await qx(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(s)}catch(n){e=()=>Promise.reject(n)}vh.set(this.auth._key(),e)}return this.bypassAuthState||vh.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function qx(r,e){const n=Gx(e),s=Fx(r);if(!await s._isAvailable())return!1;const o=await s._get(n)==="true";return await s._remove(n),o}function Hx(r,e){vh.set(r._key(),e)}function Fx(r){return Er(r._redirectPersistence)}function Gx(r){return yh(zx,r.config.apiKey,r.name)}async function Qx(r,e,n=!1){if(yi(r.app))return Promise.reject(oa(r));const s=Jh(r),o=BT(s,e),f=await new Bx(s,o,n).execute();return f&&!n&&(delete f.user._redirectEventId,await s._persistUserIfCurrent(f.user),await s._setRedirectUser(null,e)),f}const $x=600*1e3;class Yx{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(e,s)&&(n=!0,this.sendToConsumer(e,s),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!Kx(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){if(e.error&&!HT(e)){const s=e.error.code?.split("auth/")[1]||"internal-error";n.onError(_i(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const s=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&s}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=$x&&this.cachedEventUids.clear(),this.cachedEventUids.has(C0(e))}saveEventToCache(e){this.cachedEventUids.add(C0(e)),this.lastProcessedEventTime=Date.now()}}function C0(r){return[r.type,r.eventId,r.sessionId,r.tenantId].filter(e=>e).join("-")}function HT({type:r,error:e}){return r==="unknown"&&e?.code==="auth/no-auth-event"}function Kx(r){switch(r.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return HT(r);default:return!1}}async function Xx(r,e={}){return Oo(r,"GET","/v1/projects",e)}const Wx=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Jx=/^https?/;async function Zx(r){if(r.config.emulator)return;const{authorizedDomains:e}=await Xx(r);for(const n of e)try{if(e2(n))return}catch{}Ki(r,"unauthorized-domain")}function e2(r){const e=Wm(),{protocol:n,hostname:s}=new URL(e);if(r.startsWith("chrome-extension://")){const f=new URL(r);return f.hostname===""&&s===""?n==="chrome-extension:"&&r.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&f.hostname===s}if(!Jx.test(n))return!1;if(Wx.test(r))return s===r;const o=r.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(s)}const t2=new pu(3e4,6e4);function x0(){const r=Fi().___jsl;if(r?.H){for(const e of Object.keys(r.H))if(r.H[e].r=r.H[e].r||[],r.H[e].L=r.H[e].L||[],r.H[e].r=[...r.H[e].L],r.CP)for(let n=0;n<r.CP.length;n++)r.CP[n]=null}}function n2(r){return new Promise((e,n)=>{function s(){x0(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{x0(),n(_i(r,"network-request-failed"))},timeout:t2.get()})}if(Fi().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(Fi().gapi?.load)s();else{const o=ax("iframefcb");return Fi()[o]=()=>{gapi.load?s():n(_i(r,"network-request-failed"))},rx(`${sx()}?onload=${o}`).catch(u=>n(u))}}).catch(e=>{throw _h=null,e})}let _h=null;function i2(r){return _h=_h||n2(r),_h}const r2=new pu(5e3,15e3),s2="__/auth/iframe",a2="emulator/auth/iframe",o2={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},l2=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function u2(r){const e=r.config;Ie(e.authDomain,r,"auth-domain-config-required");const n=e.emulator?Dp(e,a2):`https://${r.config.authDomain}/${s2}`,s={apiKey:e.apiKey,appName:r.name,v:No},o=l2.get(r.config.apiHost);o&&(s.eid=o);const u=r._getFrameworks();return u.length&&(s.fw=u.join(",")),`${n}?${mu(s).slice(1)}`}async function c2(r){const e=await i2(r),n=Fi().gapi;return Ie(n,r,"internal-error"),e.open({where:document.body,url:u2(r),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:o2,dontclear:!0},s=>new Promise(async(o,u)=>{await s.restyle({setHideOnLeave:!1});const f=_i(r,"network-request-failed"),m=Fi().setTimeout(()=>{u(f)},r2.get());function p(){Fi().clearTimeout(m),o(s)}s.ping(p).then(p,()=>{u(f)})}))}const h2={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},f2=500,d2=600,m2="_blank",p2="http://localhost";class I0{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function g2(r,e,n,s=f2,o=d2){const u=Math.max((window.screen.availHeight-o)/2,0).toString(),f=Math.max((window.screen.availWidth-s)/2,0).toString();let m="";const p={...h2,width:s.toString(),height:o.toString(),top:u,left:f},g=dn().toLowerCase();n&&(m=ST(g)?m2:n),TT(g)&&(e=e||p2,p.scrollbars="yes");const E=Object.entries(p).reduce((C,[O,L])=>`${C}${O}=${L},`,"");if(XC(g)&&m!=="_self")return y2(e||"",m),new I0(null);const T=window.open(e||"",m,E);Ie(T,r,"popup-blocked");try{T.focus()}catch{}return new I0(T)}function y2(r,e){const n=document.createElement("a");n.href=r,n.target=e;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(s)}const v2="__/auth/handler",_2="emulator/auth/handler",E2=encodeURIComponent("fac");async function D0(r,e,n,s,o,u){Ie(r.config.authDomain,r,"auth-domain-config-required"),Ie(r.config.apiKey,r,"invalid-api-key");const f={apiKey:r.config.apiKey,appName:r.name,authType:n,redirectUrl:s,v:No,eventId:o};if(e instanceof kp){e.setDefaultLanguage(r.languageCode),f.providerId=e.providerId||"",_R(e.getCustomParameters())||(f.customParameters=JSON.stringify(e.getCustomParameters()));for(const[E,T]of Object.entries({}))f[E]=T}if(e instanceof gu){const E=e.getScopes().filter(T=>T!=="");E.length>0&&(f.scopes=E.join(","))}r.tenantId&&(f.tid=r.tenantId);const m=f;for(const E of Object.keys(m))m[E]===void 0&&delete m[E];const p=await r._getAppCheckToken(),g=p?`#${E2}=${encodeURIComponent(p)}`:"";return`${T2(r)}?${mu(m).slice(1)}${g}`}function T2({config:r}){return r.emulator?Dp(r,_2):`https://${r.authDomain}/${v2}`}const km="webStorageSupport";class b2{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=PT,this._completeRedirectFn=Qx,this._overrideRedirectResult=Hx}async _openPopup(e,n,s,o){Ar(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const u=await D0(e,n,s,Wm(),o);return g2(e,u,Pp())}async _openRedirect(e,n,s,o){await this._originValidation(e);const u=await D0(e,n,s,Wm(),o);return wx(u),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:o,promise:u}=this.eventManagers[n];return o?Promise.resolve(o):(Ar(u,"If manager is not set, promise should be"),u)}const s=this.initAndGetManager(e);return this.eventManagers[n]={promise:s},s.catch(()=>{delete this.eventManagers[n]}),s}async initAndGetManager(e){const n=await c2(e),s=new Yx(e);return n.register("authEvent",o=>(Ie(o?.authEvent,e,"invalid-auth-event"),{status:s.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:s},this.iframes[e._key()]=n,s}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(km,{type:km},o=>{const u=o?.[0]?.[km];u!==void 0&&n(!!u),Ki(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=Zx(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return xT()||bT()||Mp()}}const S2=b2;var N0="@firebase/auth",O0="1.12.0";class A2{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(s=>{e(s?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Ie(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function w2(r){switch(r){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function R2(r){yo(new ca("auth",(e,{options:n})=>{const s=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),u=e.getProvider("app-check-internal"),{apiKey:f,authDomain:m}=s.options;Ie(f&&!f.includes(":"),"invalid-api-key",{appName:s.name});const p={apiKey:f,authDomain:m,clientPlatform:r,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:IT(r)},g=new nx(s,o,u,p);return lx(g,n),g},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,s)=>{e.getProvider("auth-internal").initialize()})),yo(new ca("auth-internal",e=>{const n=Jh(e.getProvider("auth").getImmediate());return(s=>new A2(s))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),ms(N0,O0,w2(r)),ms(N0,O0,"esm2020")}const C2=300,x2=sT("authIdTokenMaxAge")||C2;let M0=null;const I2=r=>async e=>{const n=e&&await e.getIdTokenResult(),s=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(s&&s>x2)return;const o=n?.token;M0!==o&&(M0=o,await fetch(r,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function D2(r=hT()){const e=Cp(r,"auth");if(e.isInitialized())return e.getImmediate();const n=ox(r,{popupRedirectResolver:S2,persistence:[Vx,bx,PT]}),s=sT("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const u=new URL(s,location.origin);if(location.origin===u.origin){const f=I2(u.toString());yx(n,f,()=>f(n.currentUser)),gx(n,m=>f(m))}}const o=iT("auth");return o&&ux(n,`http://${o}`),n}function N2(){return document.getElementsByTagName("head")?.[0]??document}ix({loadJS(r){return new Promise((e,n)=>{const s=document.createElement("script");s.setAttribute("src",r),s.onload=e,s.onerror=o=>{const u=_i("internal-error");u.customData=o,n(u)},s.type="text/javascript",s.charset="UTF-8",N2().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});R2("Browser");var O2="firebase",M2="12.7.0";ms(O2,M2,"app");var V0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var ps,FT;(function(){var r;function e(D,I){function R(){}R.prototype=I.prototype,D.F=I.prototype,D.prototype=new R,D.prototype.constructor=D,D.D=function(N,V,x){for(var A=Array(arguments.length-2),se=2;se<arguments.length;se++)A[se-2]=arguments[se];return I.prototype[V].apply(N,A)}}function n(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(s,n),s.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(D,I,R){R||(R=0);const N=Array(16);if(typeof I=="string")for(var V=0;V<16;++V)N[V]=I.charCodeAt(R++)|I.charCodeAt(R++)<<8|I.charCodeAt(R++)<<16|I.charCodeAt(R++)<<24;else for(V=0;V<16;++V)N[V]=I[R++]|I[R++]<<8|I[R++]<<16|I[R++]<<24;I=D.g[0],R=D.g[1],V=D.g[2];let x=D.g[3],A;A=I+(x^R&(V^x))+N[0]+3614090360&4294967295,I=R+(A<<7&4294967295|A>>>25),A=x+(V^I&(R^V))+N[1]+3905402710&4294967295,x=I+(A<<12&4294967295|A>>>20),A=V+(R^x&(I^R))+N[2]+606105819&4294967295,V=x+(A<<17&4294967295|A>>>15),A=R+(I^V&(x^I))+N[3]+3250441966&4294967295,R=V+(A<<22&4294967295|A>>>10),A=I+(x^R&(V^x))+N[4]+4118548399&4294967295,I=R+(A<<7&4294967295|A>>>25),A=x+(V^I&(R^V))+N[5]+1200080426&4294967295,x=I+(A<<12&4294967295|A>>>20),A=V+(R^x&(I^R))+N[6]+2821735955&4294967295,V=x+(A<<17&4294967295|A>>>15),A=R+(I^V&(x^I))+N[7]+4249261313&4294967295,R=V+(A<<22&4294967295|A>>>10),A=I+(x^R&(V^x))+N[8]+1770035416&4294967295,I=R+(A<<7&4294967295|A>>>25),A=x+(V^I&(R^V))+N[9]+2336552879&4294967295,x=I+(A<<12&4294967295|A>>>20),A=V+(R^x&(I^R))+N[10]+4294925233&4294967295,V=x+(A<<17&4294967295|A>>>15),A=R+(I^V&(x^I))+N[11]+2304563134&4294967295,R=V+(A<<22&4294967295|A>>>10),A=I+(x^R&(V^x))+N[12]+1804603682&4294967295,I=R+(A<<7&4294967295|A>>>25),A=x+(V^I&(R^V))+N[13]+4254626195&4294967295,x=I+(A<<12&4294967295|A>>>20),A=V+(R^x&(I^R))+N[14]+2792965006&4294967295,V=x+(A<<17&4294967295|A>>>15),A=R+(I^V&(x^I))+N[15]+1236535329&4294967295,R=V+(A<<22&4294967295|A>>>10),A=I+(V^x&(R^V))+N[1]+4129170786&4294967295,I=R+(A<<5&4294967295|A>>>27),A=x+(R^V&(I^R))+N[6]+3225465664&4294967295,x=I+(A<<9&4294967295|A>>>23),A=V+(I^R&(x^I))+N[11]+643717713&4294967295,V=x+(A<<14&4294967295|A>>>18),A=R+(x^I&(V^x))+N[0]+3921069994&4294967295,R=V+(A<<20&4294967295|A>>>12),A=I+(V^x&(R^V))+N[5]+3593408605&4294967295,I=R+(A<<5&4294967295|A>>>27),A=x+(R^V&(I^R))+N[10]+38016083&4294967295,x=I+(A<<9&4294967295|A>>>23),A=V+(I^R&(x^I))+N[15]+3634488961&4294967295,V=x+(A<<14&4294967295|A>>>18),A=R+(x^I&(V^x))+N[4]+3889429448&4294967295,R=V+(A<<20&4294967295|A>>>12),A=I+(V^x&(R^V))+N[9]+568446438&4294967295,I=R+(A<<5&4294967295|A>>>27),A=x+(R^V&(I^R))+N[14]+3275163606&4294967295,x=I+(A<<9&4294967295|A>>>23),A=V+(I^R&(x^I))+N[3]+4107603335&4294967295,V=x+(A<<14&4294967295|A>>>18),A=R+(x^I&(V^x))+N[8]+1163531501&4294967295,R=V+(A<<20&4294967295|A>>>12),A=I+(V^x&(R^V))+N[13]+2850285829&4294967295,I=R+(A<<5&4294967295|A>>>27),A=x+(R^V&(I^R))+N[2]+4243563512&4294967295,x=I+(A<<9&4294967295|A>>>23),A=V+(I^R&(x^I))+N[7]+1735328473&4294967295,V=x+(A<<14&4294967295|A>>>18),A=R+(x^I&(V^x))+N[12]+2368359562&4294967295,R=V+(A<<20&4294967295|A>>>12),A=I+(R^V^x)+N[5]+4294588738&4294967295,I=R+(A<<4&4294967295|A>>>28),A=x+(I^R^V)+N[8]+2272392833&4294967295,x=I+(A<<11&4294967295|A>>>21),A=V+(x^I^R)+N[11]+1839030562&4294967295,V=x+(A<<16&4294967295|A>>>16),A=R+(V^x^I)+N[14]+4259657740&4294967295,R=V+(A<<23&4294967295|A>>>9),A=I+(R^V^x)+N[1]+2763975236&4294967295,I=R+(A<<4&4294967295|A>>>28),A=x+(I^R^V)+N[4]+1272893353&4294967295,x=I+(A<<11&4294967295|A>>>21),A=V+(x^I^R)+N[7]+4139469664&4294967295,V=x+(A<<16&4294967295|A>>>16),A=R+(V^x^I)+N[10]+3200236656&4294967295,R=V+(A<<23&4294967295|A>>>9),A=I+(R^V^x)+N[13]+681279174&4294967295,I=R+(A<<4&4294967295|A>>>28),A=x+(I^R^V)+N[0]+3936430074&4294967295,x=I+(A<<11&4294967295|A>>>21),A=V+(x^I^R)+N[3]+3572445317&4294967295,V=x+(A<<16&4294967295|A>>>16),A=R+(V^x^I)+N[6]+76029189&4294967295,R=V+(A<<23&4294967295|A>>>9),A=I+(R^V^x)+N[9]+3654602809&4294967295,I=R+(A<<4&4294967295|A>>>28),A=x+(I^R^V)+N[12]+3873151461&4294967295,x=I+(A<<11&4294967295|A>>>21),A=V+(x^I^R)+N[15]+530742520&4294967295,V=x+(A<<16&4294967295|A>>>16),A=R+(V^x^I)+N[2]+3299628645&4294967295,R=V+(A<<23&4294967295|A>>>9),A=I+(V^(R|~x))+N[0]+4096336452&4294967295,I=R+(A<<6&4294967295|A>>>26),A=x+(R^(I|~V))+N[7]+1126891415&4294967295,x=I+(A<<10&4294967295|A>>>22),A=V+(I^(x|~R))+N[14]+2878612391&4294967295,V=x+(A<<15&4294967295|A>>>17),A=R+(x^(V|~I))+N[5]+4237533241&4294967295,R=V+(A<<21&4294967295|A>>>11),A=I+(V^(R|~x))+N[12]+1700485571&4294967295,I=R+(A<<6&4294967295|A>>>26),A=x+(R^(I|~V))+N[3]+2399980690&4294967295,x=I+(A<<10&4294967295|A>>>22),A=V+(I^(x|~R))+N[10]+4293915773&4294967295,V=x+(A<<15&4294967295|A>>>17),A=R+(x^(V|~I))+N[1]+2240044497&4294967295,R=V+(A<<21&4294967295|A>>>11),A=I+(V^(R|~x))+N[8]+1873313359&4294967295,I=R+(A<<6&4294967295|A>>>26),A=x+(R^(I|~V))+N[15]+4264355552&4294967295,x=I+(A<<10&4294967295|A>>>22),A=V+(I^(x|~R))+N[6]+2734768916&4294967295,V=x+(A<<15&4294967295|A>>>17),A=R+(x^(V|~I))+N[13]+1309151649&4294967295,R=V+(A<<21&4294967295|A>>>11),A=I+(V^(R|~x))+N[4]+4149444226&4294967295,I=R+(A<<6&4294967295|A>>>26),A=x+(R^(I|~V))+N[11]+3174756917&4294967295,x=I+(A<<10&4294967295|A>>>22),A=V+(I^(x|~R))+N[2]+718787259&4294967295,V=x+(A<<15&4294967295|A>>>17),A=R+(x^(V|~I))+N[9]+3951481745&4294967295,D.g[0]=D.g[0]+I&4294967295,D.g[1]=D.g[1]+(V+(A<<21&4294967295|A>>>11))&4294967295,D.g[2]=D.g[2]+V&4294967295,D.g[3]=D.g[3]+x&4294967295}s.prototype.v=function(D,I){I===void 0&&(I=D.length);const R=I-this.blockSize,N=this.C;let V=this.h,x=0;for(;x<I;){if(V==0)for(;x<=R;)o(this,D,x),x+=this.blockSize;if(typeof D=="string"){for(;x<I;)if(N[V++]=D.charCodeAt(x++),V==this.blockSize){o(this,N),V=0;break}}else for(;x<I;)if(N[V++]=D[x++],V==this.blockSize){o(this,N),V=0;break}}this.h=V,this.o+=I},s.prototype.A=function(){var D=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);D[0]=128;for(var I=1;I<D.length-8;++I)D[I]=0;I=this.o*8;for(var R=D.length-8;R<D.length;++R)D[R]=I&255,I/=256;for(this.v(D),D=Array(16),I=0,R=0;R<4;++R)for(let N=0;N<32;N+=8)D[I++]=this.g[R]>>>N&255;return D};function u(D,I){var R=m;return Object.prototype.hasOwnProperty.call(R,D)?R[D]:R[D]=I(D)}function f(D,I){this.h=I;const R=[];let N=!0;for(let V=D.length-1;V>=0;V--){const x=D[V]|0;N&&x==I||(R[V]=x,N=!1)}this.g=R}var m={};function p(D){return-128<=D&&D<128?u(D,function(I){return new f([I|0],I<0?-1:0)}):new f([D|0],D<0?-1:0)}function g(D){if(isNaN(D)||!isFinite(D))return T;if(D<0)return z(g(-D));const I=[];let R=1;for(let N=0;D>=R;N++)I[N]=D/R|0,R*=4294967296;return new f(I,0)}function E(D,I){if(D.length==0)throw Error("number format error: empty string");if(I=I||10,I<2||36<I)throw Error("radix out of range: "+I);if(D.charAt(0)=="-")return z(E(D.substring(1),I));if(D.indexOf("-")>=0)throw Error('number format error: interior "-" character');const R=g(Math.pow(I,8));let N=T;for(let x=0;x<D.length;x+=8){var V=Math.min(8,D.length-x);const A=parseInt(D.substring(x,x+V),I);V<8?(V=g(Math.pow(I,V)),N=N.j(V).add(g(A))):(N=N.j(R),N=N.add(g(A)))}return N}var T=p(0),C=p(1),O=p(16777216);r=f.prototype,r.m=function(){if(q(this))return-z(this).m();let D=0,I=1;for(let R=0;R<this.g.length;R++){const N=this.i(R);D+=(N>=0?N:4294967296+N)*I,I*=4294967296}return D},r.toString=function(D){if(D=D||10,D<2||36<D)throw Error("radix out of range: "+D);if(L(this))return"0";if(q(this))return"-"+z(this).toString(D);const I=g(Math.pow(D,6));var R=this;let N="";for(;;){const V=pe(R,I).g;R=$(R,V.j(I));let x=((R.g.length>0?R.g[0]:R.h)>>>0).toString(D);if(R=V,L(R))return x+N;for(;x.length<6;)x="0"+x;N=x+N}},r.i=function(D){return D<0?0:D<this.g.length?this.g[D]:this.h};function L(D){if(D.h!=0)return!1;for(let I=0;I<D.g.length;I++)if(D.g[I]!=0)return!1;return!0}function q(D){return D.h==-1}r.l=function(D){return D=$(this,D),q(D)?-1:L(D)?0:1};function z(D){const I=D.g.length,R=[];for(let N=0;N<I;N++)R[N]=~D.g[N];return new f(R,~D.h).add(C)}r.abs=function(){return q(this)?z(this):this},r.add=function(D){const I=Math.max(this.g.length,D.g.length),R=[];let N=0;for(let V=0;V<=I;V++){let x=N+(this.i(V)&65535)+(D.i(V)&65535),A=(x>>>16)+(this.i(V)>>>16)+(D.i(V)>>>16);N=A>>>16,x&=65535,A&=65535,R[V]=A<<16|x}return new f(R,R[R.length-1]&-2147483648?-1:0)};function $(D,I){return D.add(z(I))}r.j=function(D){if(L(this)||L(D))return T;if(q(this))return q(D)?z(this).j(z(D)):z(z(this).j(D));if(q(D))return z(this.j(z(D)));if(this.l(O)<0&&D.l(O)<0)return g(this.m()*D.m());const I=this.g.length+D.g.length,R=[];for(var N=0;N<2*I;N++)R[N]=0;for(N=0;N<this.g.length;N++)for(let V=0;V<D.g.length;V++){const x=this.i(N)>>>16,A=this.i(N)&65535,se=D.i(V)>>>16,ce=D.i(V)&65535;R[2*N+2*V]+=A*ce,X(R,2*N+2*V),R[2*N+2*V+1]+=x*ce,X(R,2*N+2*V+1),R[2*N+2*V+1]+=A*se,X(R,2*N+2*V+1),R[2*N+2*V+2]+=x*se,X(R,2*N+2*V+2)}for(D=0;D<I;D++)R[D]=R[2*D+1]<<16|R[2*D];for(D=I;D<2*I;D++)R[D]=0;return new f(R,0)};function X(D,I){for(;(D[I]&65535)!=D[I];)D[I+1]+=D[I]>>>16,D[I]&=65535,I++}function Z(D,I){this.g=D,this.h=I}function pe(D,I){if(L(I))throw Error("division by zero");if(L(D))return new Z(T,T);if(q(D))return I=pe(z(D),I),new Z(z(I.g),z(I.h));if(q(I))return I=pe(D,z(I)),new Z(z(I.g),I.h);if(D.g.length>30){if(q(D)||q(I))throw Error("slowDivide_ only works with positive integers.");for(var R=C,N=I;N.l(D)<=0;)R=_e(R),N=_e(N);var V=Te(R,1),x=Te(N,1);for(N=Te(N,2),R=Te(R,2);!L(N);){var A=x.add(N);A.l(D)<=0&&(V=V.add(R),x=A),N=Te(N,1),R=Te(R,1)}return I=$(D,V.j(I)),new Z(V,I)}for(V=T;D.l(I)>=0;){for(R=Math.max(1,Math.floor(D.m()/I.m())),N=Math.ceil(Math.log(R)/Math.LN2),N=N<=48?1:Math.pow(2,N-48),x=g(R),A=x.j(I);q(A)||A.l(D)>0;)R-=N,x=g(R),A=x.j(I);L(x)&&(x=C),V=V.add(x),D=$(D,A)}return new Z(V,D)}r.B=function(D){return pe(this,D).h},r.and=function(D){const I=Math.max(this.g.length,D.g.length),R=[];for(let N=0;N<I;N++)R[N]=this.i(N)&D.i(N);return new f(R,this.h&D.h)},r.or=function(D){const I=Math.max(this.g.length,D.g.length),R=[];for(let N=0;N<I;N++)R[N]=this.i(N)|D.i(N);return new f(R,this.h|D.h)},r.xor=function(D){const I=Math.max(this.g.length,D.g.length),R=[];for(let N=0;N<I;N++)R[N]=this.i(N)^D.i(N);return new f(R,this.h^D.h)};function _e(D){const I=D.g.length+1,R=[];for(let N=0;N<I;N++)R[N]=D.i(N)<<1|D.i(N-1)>>>31;return new f(R,D.h)}function Te(D,I){const R=I>>5;I%=32;const N=D.g.length-R,V=[];for(let x=0;x<N;x++)V[x]=I>0?D.i(x+R)>>>I|D.i(x+R+1)<<32-I:D.i(x+R);return new f(V,D.h)}s.prototype.digest=s.prototype.A,s.prototype.reset=s.prototype.u,s.prototype.update=s.prototype.v,FT=s,f.prototype.add=f.prototype.add,f.prototype.multiply=f.prototype.j,f.prototype.modulo=f.prototype.B,f.prototype.compare=f.prototype.l,f.prototype.toNumber=f.prototype.m,f.prototype.toString=f.prototype.toString,f.prototype.getBits=f.prototype.i,f.fromNumber=g,f.fromString=E,ps=f}).apply(typeof V0<"u"?V0:typeof self<"u"?self:typeof window<"u"?window:{});var lh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var GT,Hl,QT,Eh,ep,$T,YT,KT;(function(){var r,e=Object.defineProperty;function n(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof lh=="object"&&lh];for(var y=0;y<c.length;++y){var _=c[y];if(_&&_.Math==Math)return _}throw Error("Cannot find global object")}var s=n(this);function o(c,y){if(y)e:{var _=s;c=c.split(".");for(var w=0;w<c.length-1;w++){var H=c[w];if(!(H in _))break e;_=_[H]}c=c[c.length-1],w=_[c],y=y(w),y!=w&&y!=null&&e(_,c,{configurable:!0,writable:!0,value:y})}}o("Symbol.dispose",function(c){return c||Symbol("Symbol.dispose")}),o("Array.prototype.values",function(c){return c||function(){return this[Symbol.iterator]()}}),o("Object.entries",function(c){return c||function(y){var _=[],w;for(w in y)Object.prototype.hasOwnProperty.call(y,w)&&_.push([w,y[w]]);return _}});var u=u||{},f=this||self;function m(c){var y=typeof c;return y=="object"&&c!=null||y=="function"}function p(c,y,_){return c.call.apply(c.bind,arguments)}function g(c,y,_){return g=p,g.apply(null,arguments)}function E(c,y){var _=Array.prototype.slice.call(arguments,1);return function(){var w=_.slice();return w.push.apply(w,arguments),c.apply(this,w)}}function T(c,y){function _(){}_.prototype=y.prototype,c.Z=y.prototype,c.prototype=new _,c.prototype.constructor=c,c.Ob=function(w,H,Y){for(var ue=Array(arguments.length-2),Me=2;Me<arguments.length;Me++)ue[Me-2]=arguments[Me];return y.prototype[H].apply(w,ue)}}var C=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?c=>c&&AsyncContext.Snapshot.wrap(c):c=>c;function O(c){const y=c.length;if(y>0){const _=Array(y);for(let w=0;w<y;w++)_[w]=c[w];return _}return[]}function L(c,y){for(let w=1;w<arguments.length;w++){const H=arguments[w];var _=typeof H;if(_=_!="object"?_:H?Array.isArray(H)?"array":_:"null",_=="array"||_=="object"&&typeof H.length=="number"){_=c.length||0;const Y=H.length||0;c.length=_+Y;for(let ue=0;ue<Y;ue++)c[_+ue]=H[ue]}else c.push(H)}}class q{constructor(y,_){this.i=y,this.j=_,this.h=0,this.g=null}get(){let y;return this.h>0?(this.h--,y=this.g,this.g=y.next,y.next=null):y=this.i(),y}}function z(c){f.setTimeout(()=>{throw c},0)}function $(){var c=D;let y=null;return c.g&&(y=c.g,c.g=c.g.next,c.g||(c.h=null),y.next=null),y}class X{constructor(){this.h=this.g=null}add(y,_){const w=Z.get();w.set(y,_),this.h?this.h.next=w:this.g=w,this.h=w}}var Z=new q(()=>new pe,c=>c.reset());class pe{constructor(){this.next=this.g=this.h=null}set(y,_){this.h=y,this.g=_,this.next=null}reset(){this.next=this.g=this.h=null}}let _e,Te=!1,D=new X,I=()=>{const c=Promise.resolve(void 0);_e=()=>{c.then(R)}};function R(){for(var c;c=$();){try{c.h.call(c.g)}catch(_){z(_)}var y=Z;y.j(c),y.h<100&&(y.h++,c.next=y.g,y.g=c)}Te=!1}function N(){this.u=this.u,this.C=this.C}N.prototype.u=!1,N.prototype.dispose=function(){this.u||(this.u=!0,this.N())},N.prototype[Symbol.dispose]=function(){this.dispose()},N.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function V(c,y){this.type=c,this.g=this.target=y,this.defaultPrevented=!1}V.prototype.h=function(){this.defaultPrevented=!0};var x=(function(){if(!f.addEventListener||!Object.defineProperty)return!1;var c=!1,y=Object.defineProperty({},"passive",{get:function(){c=!0}});try{const _=()=>{};f.addEventListener("test",_,y),f.removeEventListener("test",_,y)}catch{}return c})();function A(c){return/^[\s\xa0]*$/.test(c)}function se(c,y){V.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c&&this.init(c,y)}T(se,V),se.prototype.init=function(c,y){const _=this.type=c.type,w=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;this.target=c.target||c.srcElement,this.g=y,y=c.relatedTarget,y||(_=="mouseover"?y=c.fromElement:_=="mouseout"&&(y=c.toElement)),this.relatedTarget=y,w?(this.clientX=w.clientX!==void 0?w.clientX:w.pageX,this.clientY=w.clientY!==void 0?w.clientY:w.pageY,this.screenX=w.screenX||0,this.screenY=w.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=c.pointerType,this.state=c.state,this.i=c,c.defaultPrevented&&se.Z.h.call(this)},se.prototype.h=function(){se.Z.h.call(this);const c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var ce="closure_listenable_"+(Math.random()*1e6|0),B=0;function W(c,y,_,w,H){this.listener=c,this.proxy=null,this.src=y,this.type=_,this.capture=!!w,this.ha=H,this.key=++B,this.da=this.fa=!1}function te(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function de(c,y,_){for(const w in c)y.call(_,c[w],w,c)}function he(c,y){for(const _ in c)y.call(void 0,c[_],_,c)}function P(c){const y={};for(const _ in c)y[_]=c[_];return y}const J="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function le(c,y){let _,w;for(let H=1;H<arguments.length;H++){w=arguments[H];for(_ in w)c[_]=w[_];for(let Y=0;Y<J.length;Y++)_=J[Y],Object.prototype.hasOwnProperty.call(w,_)&&(c[_]=w[_])}}function fe(c){this.src=c,this.g={},this.h=0}fe.prototype.add=function(c,y,_,w,H){const Y=c.toString();c=this.g[Y],c||(c=this.g[Y]=[],this.h++);const ue=Se(c,y,w,H);return ue>-1?(y=c[ue],_||(y.fa=!1)):(y=new W(y,this.src,Y,!!w,H),y.fa=_,c.push(y)),y};function we(c,y){const _=y.type;if(_ in c.g){var w=c.g[_],H=Array.prototype.indexOf.call(w,y,void 0),Y;(Y=H>=0)&&Array.prototype.splice.call(w,H,1),Y&&(te(y),c.g[_].length==0&&(delete c.g[_],c.h--))}}function Se(c,y,_,w){for(let H=0;H<c.length;++H){const Y=c[H];if(!Y.da&&Y.listener==y&&Y.capture==!!_&&Y.ha==w)return H}return-1}var Ce="closure_lm_"+(Math.random()*1e6|0),Pe={};function Ye(c,y,_,w,H){if(Array.isArray(y)){for(let Y=0;Y<y.length;Y++)Ye(c,y[Y],_,w,H);return null}return _=jo(_),c&&c[ce]?c.J(y,_,m(w)?!!w.capture:!1,H):mn(c,y,_,!1,w,H)}function mn(c,y,_,w,H,Y){if(!y)throw Error("Invalid event type");const ue=m(H)?!!H.capture:!!H;let Me=Kt(c);if(Me||(c[Ce]=Me=new fe(c)),_=Me.add(y,_,w,ue,Y),_.proxy)return _;if(w=xn(),_.proxy=w,w.src=c,w.listener=_,c.addEventListener)x||(H=ue),H===void 0&&(H=!1),c.addEventListener(y.toString(),w,H);else if(c.attachEvent)c.attachEvent(ln(y.toString()),w);else if(c.addListener&&c.removeListener)c.addListener(w);else throw Error("addEventListener and attachEvent are unavailable.");return _}function xn(){function c(_){return y.call(c.src,c.listener,_)}const y=In;return c}function on(c,y,_,w,H){if(Array.isArray(y))for(var Y=0;Y<y.length;Y++)on(c,y[Y],_,w,H);else w=m(w)?!!w.capture:!!w,_=jo(_),c&&c[ce]?(c=c.i,Y=String(y).toString(),Y in c.g&&(y=c.g[Y],_=Se(y,_,w,H),_>-1&&(te(y[_]),Array.prototype.splice.call(y,_,1),y.length==0&&(delete c.g[Y],c.h--)))):c&&(c=Kt(c))&&(y=c.g[y.toString()],c=-1,y&&(c=Se(y,_,w,H)),(_=c>-1?y[c]:null)&&Ji(_))}function Ji(c){if(typeof c!="number"&&c&&!c.da){var y=c.src;if(y&&y[ce])we(y.i,c);else{var _=c.type,w=c.proxy;y.removeEventListener?y.removeEventListener(_,w,c.capture):y.detachEvent?y.detachEvent(ln(_),w):y.addListener&&y.removeListener&&y.removeListener(w),(_=Kt(y))?(we(_,c),_.h==0&&(_.src=null,y[Ce]=null)):te(c)}}}function ln(c){return c in Pe?Pe[c]:Pe[c]="on"+c}function In(c,y){if(c.da)c=!0;else{y=new se(y,this);const _=c.listener,w=c.ha||c.src;c.fa&&Ji(c),c=_.call(w,y)}return c}function Kt(c){return c=c[Ce],c instanceof fe?c:null}var Lo="__closure_events_fn_"+(Math.random()*1e9>>>0);function jo(c){return typeof c=="function"?c:(c[Lo]||(c[Lo]=function(y){return c.handleEvent(y)}),c[Lo])}function Rt(){N.call(this),this.i=new fe(this),this.M=this,this.G=null}T(Rt,N),Rt.prototype[ce]=!0,Rt.prototype.removeEventListener=function(c,y,_,w){on(this,c,y,_,w)};function Bt(c,y){var _,w=c.G;if(w)for(_=[];w;w=w.G)_.push(w);if(c=c.M,w=y.type||y,typeof y=="string")y=new V(y,c);else if(y instanceof V)y.target=y.target||c;else{var H=y;y=new V(w,c),le(y,H)}H=!0;let Y,ue;if(_)for(ue=_.length-1;ue>=0;ue--)Y=y.g=_[ue],H=xr(Y,w,!0,y)&&H;if(Y=y.g=c,H=xr(Y,w,!0,y)&&H,H=xr(Y,w,!1,y)&&H,_)for(ue=0;ue<_.length;ue++)Y=y.g=_[ue],H=xr(Y,w,!1,y)&&H}Rt.prototype.N=function(){if(Rt.Z.N.call(this),this.i){var c=this.i;for(const y in c.g){const _=c.g[y];for(let w=0;w<_.length;w++)te(_[w]);delete c.g[y],c.h--}}this.G=null},Rt.prototype.J=function(c,y,_,w){return this.i.add(String(c),y,!1,_,w)},Rt.prototype.K=function(c,y,_,w){return this.i.add(String(c),y,!0,_,w)};function xr(c,y,_,w){if(y=c.i.g[String(y)],!y)return!0;y=y.concat();let H=!0;for(let Y=0;Y<y.length;++Y){const ue=y[Y];if(ue&&!ue.da&&ue.capture==_){const Me=ue.listener,Tt=ue.ha||ue.src;ue.fa&&we(c.i,ue),H=Me.call(Tt,w)!==!1&&H}}return H&&!w.defaultPrevented}function bf(c,y){if(typeof c!="function")if(c&&typeof c.handleEvent=="function")c=g(c.handleEvent,c);else throw Error("Invalid listener argument");return Number(y)>2147483647?-1:f.setTimeout(c,y||0)}function Nu(c){c.g=bf(()=>{c.g=null,c.i&&(c.i=!1,Nu(c))},c.l);const y=c.h;c.h=null,c.m.apply(null,y)}class pn extends N{constructor(y,_){super(),this.m=y,this.l=_,this.h=null,this.i=!1,this.g=null}j(y){this.h=arguments,this.g?this.i=!0:Nu(this)}N(){super.N(),this.g&&(f.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function xs(c){N.call(this),this.h=c,this.g={}}T(xs,N);var Uo=[];function zo(c){de(c.g,function(y,_){this.g.hasOwnProperty(_)&&Ji(y)},c),c.g={}}xs.prototype.N=function(){xs.Z.N.call(this),zo(this)},xs.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Ir=f.JSON.stringify,Sf=f.JSON.parse,Ou=class{stringify(c){return f.JSON.stringify(c,void 0)}parse(c){return f.JSON.parse(c,void 0)}};function Mu(){}function Vu(){}var si={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Xt(){V.call(this,"d")}T(Xt,V);function Fn(){V.call(this,"c")}T(Fn,V);var Et={},ku=null;function va(){return ku=ku||new Rt}Et.Ia="serverreachability";function Pu(c){V.call(this,Et.Ia,c)}T(Pu,V);function bi(c){const y=va();Bt(y,new Pu(y))}Et.STAT_EVENT="statevent";function Is(c,y){V.call(this,Et.STAT_EVENT,c),this.stat=y}T(Is,V);function Ct(c){const y=va();Bt(y,new Is(y,c))}Et.Ja="timingevent";function Si(c,y){V.call(this,Et.Ja,c),this.size=y}T(Si,V);function Ai(c,y){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return f.setTimeout(function(){c()},y)}function ai(){this.g=!0}ai.prototype.ua=function(){this.g=!1};function Af(c,y,_,w,H,Y){c.info(function(){if(c.g)if(Y){var ue="",Me=Y.split("&");for(let Je=0;Je<Me.length;Je++){var Tt=Me[Je].split("=");if(Tt.length>1){const ft=Tt[0];Tt=Tt[1];const Yn=ft.split("_");ue=Yn.length>=2&&Yn[1]=="type"?ue+(ft+"="+Tt+"&"):ue+(ft+"=redacted&")}}}else ue=null;else ue=Y;return"XMLHTTP REQ ("+w+") [attempt "+H+"]: "+y+`
`+_+`
`+ue})}function Lu(c,y,_,w,H,Y,ue){c.info(function(){return"XMLHTTP RESP ("+w+") [ attempt "+H+"]: "+y+`
`+_+`
`+Y+" "+ue})}function wi(c,y,_,w){c.info(function(){return"XMLHTTP TEXT ("+y+"): "+wf(c,_)+(w?" "+w:"")})}function Ds(c,y){c.info(function(){return"TIMEOUT: "+y})}ai.prototype.info=function(){};function wf(c,y){if(!c.g)return y;if(!y)return null;try{const Y=JSON.parse(y);if(Y){for(c=0;c<Y.length;c++)if(Array.isArray(Y[c])){var _=Y[c];if(!(_.length<2)){var w=_[1];if(Array.isArray(w)&&!(w.length<1)){var H=w[0];if(H!="noop"&&H!="stop"&&H!="close")for(let ue=1;ue<w.length;ue++)w[ue]=""}}}}return Ir(Y)}catch{return y}}var Ns={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Bo={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},qo;function Os(){}T(Os,Mu),Os.prototype.g=function(){return new XMLHttpRequest},qo=new Os;function Zi(c){return encodeURIComponent(String(c))}function ju(c){var y=1;c=c.split(":");const _=[];for(;y>0&&c.length;)_.push(c.shift()),y--;return c.length&&_.push(c.join(":")),_}function oi(c,y,_,w){this.j=c,this.i=y,this.l=_,this.S=w||1,this.V=new xs(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new li}function li(){this.i=null,this.g="",this.h=!1}var xt={},Ft={};function Ri(c,y,_){c.M=1,c.A=Ms(Dt(y)),c.u=_,c.R=!0,_a(c,null)}function _a(c,y){c.F=Date.now(),Ci(c),c.B=Dt(c.A);var _=c.B,w=c.S;Array.isArray(w)||(w=[String(w)]),Sa(_.i,"t",w),c.C=0,_=c.j.L,c.h=new li,c.g=Zu(c.j,_?y:null,!c.u),c.P>0&&(c.O=new pn(g(c.Y,c,c.g),c.P)),y=c.V,_=c.g,w=c.ba;var H="readystatechange";Array.isArray(H)||(H&&(Uo[0]=H.toString()),H=Uo);for(let Y=0;Y<H.length;Y++){const ue=Ye(_,H[Y],w||y.handleEvent,!1,y.h||y);if(!ue)break;y.g[ue.key]=ue}y=c.J?P(c.J):{},c.u?(c.v||(c.v="POST"),y["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.B,c.v,c.u,y)):(c.v="GET",c.g.ea(c.B,c.v,null,y)),bi(),Af(c.i,c.v,c.B,c.l,c.S,c.u)}oi.prototype.ba=function(c){c=c.target;const y=this.O;y&&hi(c)==3?y.j():this.Y(c)},oi.prototype.Y=function(c){try{if(c==this.g)e:{const Me=hi(this.g),Tt=this.g.ya(),Je=this.g.ca();if(!(Me<3)&&(Me!=3||this.g&&(this.h.h||this.g.la()||Wt(this.g)))){this.K||Me!=4||Tt==7||(Tt==8||Je<=0?bi(3):bi(2)),xi(this);var y=this.g.ca();this.X=y;var _=Rf(this);if(this.o=y==200,Lu(this.i,this.v,this.B,this.l,this.S,Me,y),this.o){if(this.U&&!this.L){t:{if(this.g){var w,H=this.g;if((w=H.g?H.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!A(w)){var Y=w;break t}}Y=null}if(c=Y)wi(this.i,this.l,c,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Ii(this,c);else{this.o=!1,this.m=3,Ct(12),Dn(this),Gn(this);break e}}if(this.R){c=!0;let ft;for(;!this.K&&this.C<_.length;)if(ft=zu(this,_),ft==Ft){Me==4&&(this.m=4,Ct(14),c=!1),wi(this.i,this.l,null,"[Incomplete Response]");break}else if(ft==xt){this.m=4,Ct(15),wi(this.i,this.l,_,"[Invalid Chunk]"),c=!1;break}else wi(this.i,this.l,ft,null),Ii(this,ft);if(Uu(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Me!=4||_.length!=0||this.h.h||(this.m=1,Ct(16),c=!1),this.o=this.o&&c,!c)wi(this.i,this.l,_,"[Invalid Chunked Response]"),Dn(this),Gn(this);else if(_.length>0&&!this.W){this.W=!0;var ue=this.j;ue.g==this&&ue.aa&&!ue.P&&(ue.j.info("Great, no buffering proxy detected. Bytes received: "+_.length),il(ue),ue.P=!0,Ct(11))}}else wi(this.i,this.l,_,null),Ii(this,_);Me==4&&Dn(this),this.o&&!this.K&&(Me==4?Ku(this.j,this):(this.o=!1,Ci(this)))}else tr(this.g),y==400&&_.indexOf("Unknown SID")>0?(this.m=3,Ct(12)):(this.m=0,Ct(13)),Dn(this),Gn(this)}}}catch{}};function Rf(c){if(!Uu(c))return c.g.la();const y=Wt(c.g);if(y==="")return"";let _="";const w=y.length,H=hi(c.g)==4;if(!c.h.i){if(typeof TextDecoder>"u")return Dn(c),Gn(c),"";c.h.i=new f.TextDecoder}for(let Y=0;Y<w;Y++)c.h.h=!0,_+=c.h.i.decode(y[Y],{stream:!(H&&Y==w-1)});return y.length=0,c.h.g+=_,c.C=0,c.h.g}function Uu(c){return c.g?c.v=="GET"&&c.M!=2&&c.j.Aa:!1}function zu(c,y){var _=c.C,w=y.indexOf(`
`,_);return w==-1?Ft:(_=Number(y.substring(_,w)),isNaN(_)?xt:(w+=1,w+_>y.length?Ft:(y=y.slice(w,w+_),c.C=w+_,y)))}oi.prototype.cancel=function(){this.K=!0,Dn(this)};function Ci(c){c.T=Date.now()+c.H,Ea(c,c.H)}function Ea(c,y){if(c.D!=null)throw Error("WatchDog timer not null");c.D=Ai(g(c.aa,c),y)}function xi(c){c.D&&(f.clearTimeout(c.D),c.D=null)}oi.prototype.aa=function(){this.D=null;const c=Date.now();c-this.T>=0?(Ds(this.i,this.B),this.M!=2&&(bi(),Ct(17)),Dn(this),this.m=2,Gn(this)):Ea(this,this.T-c)};function Gn(c){c.j.I==0||c.K||Ku(c.j,c)}function Dn(c){xi(c);var y=c.O;y&&typeof y.dispose=="function"&&y.dispose(),c.O=null,zo(c.V),c.g&&(y=c.g,c.g=null,y.abort(),y.dispose())}function Ii(c,y){try{var _=c.j;if(_.I!=0&&(_.g==c||Ni(_.h,c))){if(!c.L&&Ni(_.h,c)&&_.I==3){try{var w=_.Ba.g.parse(y)}catch{w=null}if(Array.isArray(w)&&w.length==3){var H=w;if(H[0]==0){e:if(!_.v){if(_.g)if(_.g.F+3e3<c.F)xa(_),Lr(_);else break e;zs(_),Ct(18)}}else _.xa=H[1],0<_.xa-_.K&&H[2]<37500&&_.F&&_.A==0&&!_.C&&(_.C=Ai(g(_.Va,_),6e3));Di(_.h)<=1&&_.ta&&(_.ta=void 0)}else Li(_,11)}else if((c.L||_.g==c)&&xa(_),!A(y))for(H=_.Ba.g.parse(y),y=0;y<H.length;y++){let Je=H[y];const ft=Je[0];if(!(ft<=_.K))if(_.K=ft,Je=Je[1],_.I==2)if(Je[0]=="c"){_.M=Je[1],_.ba=Je[2];const Yn=Je[3];Yn!=null&&(_.ka=Yn,_.j.info("VER="+_.ka));const ji=Je[4];ji!=null&&(_.za=ji,_.j.info("SVER="+_.za));const fi=Je[5];fi!=null&&typeof fi=="number"&&fi>0&&(w=1.5*fi,_.O=w,_.j.info("backChannelRequestTimeoutMs_="+w)),w=_;const di=c.g;if(di){const Bs=di.g?di.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Bs){var Y=w.h;Y.g||Bs.indexOf("spdy")==-1&&Bs.indexOf("quic")==-1&&Bs.indexOf("h2")==-1||(Y.j=Y.l,Y.g=new Set,Y.h&&(Go(Y,Y.h),Y.h=null))}if(w.G){const Ia=di.g?di.g.getResponseHeader("X-HTTP-Session-Id"):null;Ia&&(w.wa=Ia,et(w.J,w.G,Ia))}}_.I=3,_.l&&_.l.ra(),_.aa&&(_.T=Date.now()-c.F,_.j.info("Handshake RTT: "+_.T+"ms")),w=_;var ue=c;if(w.na=Ju(w,w.L?w.ba:null,w.W),ue.L){Qo(w.h,ue);var Me=ue,Tt=w.O;Tt&&(Me.H=Tt),Me.D&&(xi(Me),Ci(Me)),w.g=ue}else $u(w);_.i.length>0&&Pi(_)}else Je[0]!="stop"&&Je[0]!="close"||Li(_,7);else _.I==3&&(Je[0]=="stop"||Je[0]=="close"?Je[0]=="stop"?Li(_,7):tl(_):Je[0]!="noop"&&_.l&&_.l.qa(Je),_.A=0)}}bi(4)}catch{}}var It=class{constructor(c,y){this.g=c,this.map=y}};function Ho(c){this.l=c||10,f.PerformanceNavigationTiming?(c=f.performance.getEntriesByType("navigation"),c=c.length>0&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(f.chrome&&f.chrome.loadTimes&&f.chrome.loadTimes()&&f.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Fo(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function Di(c){return c.h?1:c.g?c.g.size:0}function Ni(c,y){return c.h?c.h==y:c.g?c.g.has(y):!1}function Go(c,y){c.g?c.g.add(y):c.h=y}function Qo(c,y){c.h&&c.h==y?c.h=null:c.g&&c.g.has(y)&&c.g.delete(y)}Ho.prototype.cancel=function(){if(this.i=$o(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const c of this.g.values())c.cancel();this.g.clear()}};function $o(c){if(c.h!=null)return c.i.concat(c.h.G);if(c.g!=null&&c.g.size!==0){let y=c.i;for(const _ of c.g.values())y=y.concat(_.G);return y}return O(c.i)}var Bu=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ta(c,y){if(c){c=c.split("&");for(let _=0;_<c.length;_++){const w=c[_].indexOf("=");let H,Y=null;w>=0?(H=c[_].substring(0,w),Y=c[_].substring(w+1)):H=c[_],y(H,Y?decodeURIComponent(Y.replace(/\+/g," ")):"")}}}function Nn(c){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let y;c instanceof Nn?(this.l=c.l,Gt(this,c.j),this.o=c.o,this.g=c.g,Dr(this,c.u),this.h=c.h,Yo(this,Gu(c.i)),this.m=c.m):c&&(y=String(c).match(Bu))?(this.l=!1,Gt(this,y[1]||"",!0),this.o=Oi(y[2]||""),this.g=Oi(y[3]||"",!0),Dr(this,y[4]),this.h=Oi(y[5]||"",!0),Yo(this,y[6]||"",!0),this.m=Oi(y[7]||"")):(this.l=!1,this.i=new Or(null,this.l))}Nn.prototype.toString=function(){const c=[];var y=this.j;y&&c.push(Vs(y,ba,!0),":");var _=this.g;return(_||y=="file")&&(c.push("//"),(y=this.o)&&c.push(Vs(y,ba,!0),"@"),c.push(Zi(_).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),_=this.u,_!=null&&c.push(":",String(_))),(_=this.h)&&(this.g&&_.charAt(0)!="/"&&c.push("/"),c.push(Vs(_,_.charAt(0)=="/"?Ko:qu,!0))),(_=this.i.toString())&&c.push("?",_),(_=this.m)&&c.push("#",Vs(_,Hu)),c.join("")},Nn.prototype.resolve=function(c){const y=Dt(this);let _=!!c.j;_?Gt(y,c.j):_=!!c.o,_?y.o=c.o:_=!!c.g,_?y.g=c.g:_=c.u!=null;var w=c.h;if(_)Dr(y,c.u);else if(_=!!c.h){if(w.charAt(0)!="/")if(this.g&&!this.h)w="/"+w;else{var H=y.h.lastIndexOf("/");H!=-1&&(w=y.h.slice(0,H+1)+w)}if(H=w,H==".."||H==".")w="";else if(H.indexOf("./")!=-1||H.indexOf("/.")!=-1){w=H.lastIndexOf("/",0)==0,H=H.split("/");const Y=[];for(let ue=0;ue<H.length;){const Me=H[ue++];Me=="."?w&&ue==H.length&&Y.push(""):Me==".."?((Y.length>1||Y.length==1&&Y[0]!="")&&Y.pop(),w&&ue==H.length&&Y.push("")):(Y.push(Me),w=!0)}w=Y.join("/")}else w=H}return _?y.h=w:_=c.i.toString()!=="",_?Yo(y,Gu(c.i)):_=!!c.m,_&&(y.m=c.m),y};function Dt(c){return new Nn(c)}function Gt(c,y,_){c.j=_?Oi(y,!0):y,c.j&&(c.j=c.j.replace(/:$/,""))}function Dr(c,y){if(y){if(y=Number(y),isNaN(y)||y<0)throw Error("Bad port number "+y);c.u=y}else c.u=null}function Yo(c,y,_){y instanceof Or?(c.i=y,Aa(c.i,c.l)):(_||(y=Vs(y,Nr)),c.i=new Or(y,c.l))}function et(c,y,_){c.i.set(y,_)}function Ms(c){return et(c,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),c}function Oi(c,y){return c?y?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function Vs(c,y,_){return typeof c=="string"?(c=encodeURI(c).replace(y,En),_&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function En(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var ba=/[#\/\?@]/g,qu=/[#\?:]/g,Ko=/[#\?]/g,Nr=/[#\?@]/g,Hu=/#/g;function Or(c,y){this.h=this.g=null,this.i=c||null,this.j=!!y}function Tn(c){c.g||(c.g=new Map,c.h=0,c.i&&Ta(c.i,function(y,_){c.add(decodeURIComponent(y.replace(/\+/g," ")),_)}))}r=Or.prototype,r.add=function(c,y){Tn(this),this.i=null,c=Mr(this,c);let _=this.g.get(c);return _||this.g.set(c,_=[]),_.push(y),this.h+=1,this};function Fu(c,y){Tn(c),y=Mr(c,y),c.g.has(y)&&(c.i=null,c.h-=c.g.get(y).length,c.g.delete(y))}function Xo(c,y){return Tn(c),y=Mr(c,y),c.g.has(y)}r.forEach=function(c,y){Tn(this),this.g.forEach(function(_,w){_.forEach(function(H){c.call(y,H,w,this)},this)},this)};function Wo(c,y){Tn(c);let _=[];if(typeof y=="string")Xo(c,y)&&(_=_.concat(c.g.get(Mr(c,y))));else for(c=Array.from(c.g.values()),y=0;y<c.length;y++)_=_.concat(c[y]);return _}r.set=function(c,y){return Tn(this),this.i=null,c=Mr(this,c),Xo(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[y]),this.h+=1,this},r.get=function(c,y){return c?(c=Wo(this,c),c.length>0?String(c[0]):y):y};function Sa(c,y,_){Fu(c,y),_.length>0&&(c.i=null,c.g.set(Mr(c,y),O(_)),c.h+=_.length)}r.toString=function(){if(this.i)return this.i;if(!this.g)return"";const c=[],y=Array.from(this.g.keys());for(let w=0;w<y.length;w++){var _=y[w];const H=Zi(_);_=Wo(this,_);for(let Y=0;Y<_.length;Y++){let ue=H;_[Y]!==""&&(ue+="="+Zi(_[Y])),c.push(ue)}}return this.i=c.join("&")};function Gu(c){const y=new Or;return y.i=c.i,c.g&&(y.g=new Map(c.g),y.h=c.h),y}function Mr(c,y){return y=String(y),c.j&&(y=y.toLowerCase()),y}function Aa(c,y){y&&!c.j&&(Tn(c),c.i=null,c.g.forEach(function(_,w){const H=w.toLowerCase();w!=H&&(Fu(this,w),Sa(this,H,_))},c)),c.j=y}function ui(c,y){const _=new ai;if(f.Image){const w=new Image;w.onload=E(Qn,_,"TestLoadImage: loaded",!0,y,w),w.onerror=E(Qn,_,"TestLoadImage: error",!1,y,w),w.onabort=E(Qn,_,"TestLoadImage: abort",!1,y,w),w.ontimeout=E(Qn,_,"TestLoadImage: timeout",!1,y,w),f.setTimeout(function(){w.ontimeout&&w.ontimeout()},1e4),w.src=c}else y(!1)}function Jo(c,y){const _=new ai,w=new AbortController,H=setTimeout(()=>{w.abort(),Qn(_,"TestPingServer: timeout",!1,y)},1e4);fetch(c,{signal:w.signal}).then(Y=>{clearTimeout(H),Y.ok?Qn(_,"TestPingServer: ok",!0,y):Qn(_,"TestPingServer: server error",!1,y)}).catch(()=>{clearTimeout(H),Qn(_,"TestPingServer: error",!1,y)})}function Qn(c,y,_,w,H){try{H&&(H.onload=null,H.onerror=null,H.onabort=null,H.ontimeout=null),w(_)}catch{}}function Vr(){this.g=new Ou}function Mi(c){this.i=c.Sb||null,this.h=c.ab||!1}T(Mi,Mu),Mi.prototype.g=function(){return new ks(this.i,this.h)};function ks(c,y){Rt.call(this),this.H=c,this.o=y,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}T(ks,Rt),r=ks.prototype,r.open=function(c,y){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=c,this.D=y,this.readyState=1,ci(this)},r.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const y={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};c&&(y.body=c),(this.H||f).fetch(new Request(this.D,y)).then(this.Pa.bind(this),this.ga.bind(this))},r.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,kr(this)),this.readyState=0},r.Pa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,ci(this)),this.g&&(this.readyState=3,ci(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof f.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;wa(this)}else c.text().then(this.Oa.bind(this),this.ga.bind(this))};function wa(c){c.j.read().then(c.Ma.bind(c)).catch(c.ga.bind(c))}r.Ma=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var y=c.value?c.value:new Uint8Array(0);(y=this.B.decode(y,{stream:!c.done}))&&(this.response=this.responseText+=y)}c.done?kr(this):ci(this),this.readyState==3&&wa(this)}},r.Oa=function(c){this.g&&(this.response=this.responseText=c,kr(this))},r.Na=function(c){this.g&&(this.response=c,kr(this))},r.ga=function(){this.g&&kr(this)};function kr(c){c.readyState=4,c.l=null,c.j=null,c.B=null,ci(c)}r.setRequestHeader=function(c,y){this.A.append(c,y)},r.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},r.getAllResponseHeaders=function(){if(!this.h)return"";const c=[],y=this.h.entries();for(var _=y.next();!_.done;)_=_.value,c.push(_[0]+": "+_[1]),_=y.next();return c.join(`\r
`)};function ci(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(ks.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function $n(c){let y="";return de(c,function(_,w){y+=w,y+=":",y+=_,y+=`\r
`}),y}function Ps(c,y,_){e:{for(w in _){var w=!1;break e}w=!0}w||(_=$n(_),typeof c=="string"?_!=null&&Zi(_):et(c,y,_))}function it(c){Rt.call(this),this.headers=new Map,this.L=c||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}T(it,Rt);var Vi=/^https?$/i,Zo=["POST","PUT"];r=it.prototype,r.Fa=function(c){this.H=c},r.ea=function(c,y,_,w){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);y=y?y.toUpperCase():"GET",this.D=c,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():qo.g(),this.g.onreadystatechange=C(g(this.Ca,this));try{this.B=!0,this.g.open(y,String(c),!0),this.B=!1}catch(Y){Ls(this,Y);return}if(c=_||"",_=new Map(this.headers),w)if(Object.getPrototypeOf(w)===Object.prototype)for(var H in w)_.set(H,w[H]);else if(typeof w.keys=="function"&&typeof w.get=="function")for(const Y of w.keys())_.set(Y,w.get(Y));else throw Error("Unknown input type for opt_headers: "+String(w));w=Array.from(_.keys()).find(Y=>Y.toLowerCase()=="content-type"),H=f.FormData&&c instanceof f.FormData,!(Array.prototype.indexOf.call(Zo,y,void 0)>=0)||w||H||_.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Y,ue]of _)this.g.setRequestHeader(Y,ue);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(c),this.v=!1}catch(Y){Ls(this,Y)}};function Ls(c,y){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=y,c.o=5,el(c),er(c)}function el(c){c.A||(c.A=!0,Bt(c,"complete"),Bt(c,"error"))}r.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=c||7,Bt(this,"complete"),Bt(this,"abort"),er(this))},r.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),er(this,!0)),it.Z.N.call(this)},r.Ca=function(){this.u||(this.B||this.v||this.j?js(this):this.Xa())},r.Xa=function(){js(this)};function js(c){if(c.h&&typeof u<"u"){if(c.v&&hi(c)==4)setTimeout(c.Ca.bind(c),0);else if(Bt(c,"readystatechange"),hi(c)==4){c.h=!1;try{const Y=c.ca();e:switch(Y){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var y=!0;break e;default:y=!1}var _;if(!(_=y)){var w;if(w=Y===0){let ue=String(c.D).match(Bu)[1]||null;!ue&&f.self&&f.self.location&&(ue=f.self.location.protocol.slice(0,-1)),w=!Vi.test(ue?ue.toLowerCase():"")}_=w}if(_)Bt(c,"complete"),Bt(c,"success");else{c.o=6;try{var H=hi(c)>2?c.g.statusText:""}catch{H=""}c.l=H+" ["+c.ca()+"]",el(c)}}finally{er(c)}}}}function er(c,y){if(c.g){c.m&&(clearTimeout(c.m),c.m=null);const _=c.g;c.g=null,y||Bt(c,"ready");try{_.onreadystatechange=null}catch{}}}r.isActive=function(){return!!this.g};function hi(c){return c.g?c.g.readyState:0}r.ca=function(){try{return hi(this)>2?this.g.status:-1}catch{return-1}},r.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},r.La=function(c){if(this.g){var y=this.g.responseText;return c&&y.indexOf(c)==0&&(y=y.substring(c.length)),Sf(y)}};function Wt(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.F){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function tr(c){const y={};c=(c.g&&hi(c)>=2&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let w=0;w<c.length;w++){if(A(c[w]))continue;var _=ju(c[w]);const H=_[0];if(_=_[1],typeof _!="string")continue;_=_.trim();const Y=y[H]||[];y[H]=Y,Y.push(_)}he(y,function(w){return w.join(", ")})}r.ya=function(){return this.o},r.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function ki(c,y,_){return _&&_.internalChannelParams&&_.internalChannelParams[c]||y}function Pr(c){this.za=0,this.i=[],this.j=new ai,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=ki("failFast",!1,c),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=ki("baseRetryDelayMs",5e3,c),this.Za=ki("retryDelaySeedMs",1e4,c),this.Ta=ki("forwardChannelMaxRetries",2,c),this.va=ki("forwardChannelRequestTimeoutMs",2e4,c),this.ma=c&&c.xmlHttpFactory||void 0,this.Ua=c&&c.Rb||void 0,this.Aa=c&&c.useFetchStreams||!1,this.O=void 0,this.L=c&&c.supportsCrossDomainXhr||!1,this.M="",this.h=new Ho(c&&c.concurrentRequestLimit),this.Ba=new Vr,this.S=c&&c.fastHandshake||!1,this.R=c&&c.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=c&&c.Pb||!1,c&&c.ua&&this.j.ua(),c&&c.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&c&&c.detectBufferingProxy||!1,this.ia=void 0,c&&c.longPollingTimeout&&c.longPollingTimeout>0&&(this.ia=c.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}r=Pr.prototype,r.ka=8,r.I=1,r.connect=function(c,y,_,w){Ct(0),this.W=c,this.H=y||{},_&&w!==void 0&&(this.H.OSID=_,this.H.OAID=w),this.F=this.X,this.J=Ju(this,null,this.W),Pi(this)};function tl(c){if(Ra(c),c.I==3){var y=c.V++,_=Dt(c.J);if(et(_,"SID",c.M),et(_,"RID",y),et(_,"TYPE","terminate"),Us(c,_),y=new oi(c,c.j,y),y.M=2,y.A=Ms(Dt(_)),_=!1,f.navigator&&f.navigator.sendBeacon)try{_=f.navigator.sendBeacon(y.A.toString(),"")}catch{}!_&&f.Image&&(new Image().src=y.A,_=!0),_||(y.g=Zu(y.j,null),y.g.ea(y.A)),y.F=Date.now(),Ci(y)}Wu(c)}function Lr(c){c.g&&(il(c),c.g.cancel(),c.g=null)}function Ra(c){Lr(c),c.v&&(f.clearTimeout(c.v),c.v=null),xa(c),c.h.cancel(),c.m&&(typeof c.m=="number"&&f.clearTimeout(c.m),c.m=null)}function Pi(c){if(!Fo(c.h)&&!c.m){c.m=!0;var y=c.Ea;_e||I(),Te||(_e(),Te=!0),D.add(y,c),c.D=0}}function Ca(c,y){return Di(c.h)>=c.h.j-(c.m?1:0)?!1:c.m?(c.i=y.G.concat(c.i),!0):c.I==1||c.I==2||c.D>=(c.Sa?0:c.Ta)?!1:(c.m=Ai(g(c.Ea,c,y),Xu(c,c.D)),c.D++,!0)}r.Ea=function(c){if(this.m)if(this.m=null,this.I==1){if(!c){this.V=Math.floor(Math.random()*1e5),c=this.V++;const H=new oi(this,this.j,c);let Y=this.o;if(this.U&&(Y?(Y=P(Y),le(Y,this.U)):Y=this.U),this.u!==null||this.R||(H.J=Y,Y=null),this.S)e:{for(var y=0,_=0;_<this.i.length;_++){t:{var w=this.i[_];if("__data__"in w.map&&(w=w.map.__data__,typeof w=="string")){w=w.length;break t}w=void 0}if(w===void 0)break;if(y+=w,y>4096){y=_;break e}if(y===4096||_===this.i.length-1){y=_+1;break e}}y=1e3}else y=1e3;y=Qu(this,H,y),_=Dt(this.J),et(_,"RID",c),et(_,"CVER",22),this.G&&et(_,"X-HTTP-Session-Id",this.G),Us(this,_),Y&&(this.R?y="headers="+Zi($n(Y))+"&"+y:this.u&&Ps(_,this.u,Y)),Go(this.h,H),this.Ra&&et(_,"TYPE","init"),this.S?(et(_,"$req",y),et(_,"SID","null"),H.U=!0,Ri(H,_,null)):Ri(H,_,y),this.I=2}}else this.I==3&&(c?nl(this,c):this.i.length==0||Fo(this.h)||nl(this))};function nl(c,y){var _;y?_=y.l:_=c.V++;const w=Dt(c.J);et(w,"SID",c.M),et(w,"RID",_),et(w,"AID",c.K),Us(c,w),c.u&&c.o&&Ps(w,c.u,c.o),_=new oi(c,c.j,_,c.D+1),c.u===null&&(_.J=c.o),y&&(c.i=y.G.concat(c.i)),y=Qu(c,_,1e3),_.H=Math.round(c.va*.5)+Math.round(c.va*.5*Math.random()),Go(c.h,_),Ri(_,w,y)}function Us(c,y){c.H&&de(c.H,function(_,w){et(y,w,_)}),c.l&&de({},function(_,w){et(y,w,_)})}function Qu(c,y,_){_=Math.min(c.i.length,_);const w=c.l?g(c.l.Ka,c.l,c):null;e:{var H=c.i;let Me=-1;for(;;){const Tt=["count="+_];Me==-1?_>0?(Me=H[0].g,Tt.push("ofs="+Me)):Me=0:Tt.push("ofs="+Me);let Je=!0;for(let ft=0;ft<_;ft++){var Y=H[ft].g;const Yn=H[ft].map;if(Y-=Me,Y<0)Me=Math.max(0,H[ft].g-100),Je=!1;else try{Y="req"+Y+"_"||"";try{var ue=Yn instanceof Map?Yn:Object.entries(Yn);for(const[ji,fi]of ue){let di=fi;m(fi)&&(di=Ir(fi)),Tt.push(Y+ji+"="+encodeURIComponent(di))}}catch(ji){throw Tt.push(Y+"type="+encodeURIComponent("_badmap")),ji}}catch{w&&w(Yn)}}if(Je){ue=Tt.join("&");break e}}ue=void 0}return c=c.i.splice(0,_),y.G=c,ue}function $u(c){if(!c.g&&!c.v){c.Y=1;var y=c.Da;_e||I(),Te||(_e(),Te=!0),D.add(y,c),c.A=0}}function zs(c){return c.g||c.v||c.A>=3?!1:(c.Y++,c.v=Ai(g(c.Da,c),Xu(c,c.A)),c.A++,!0)}r.Da=function(){if(this.v=null,Yu(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var c=4*this.T;this.j.info("BP detection timer enabled: "+c),this.B=Ai(g(this.Wa,this),c)}},r.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Ct(10),Lr(this),Yu(this))};function il(c){c.B!=null&&(f.clearTimeout(c.B),c.B=null)}function Yu(c){c.g=new oi(c,c.j,"rpc",c.Y),c.u===null&&(c.g.J=c.o),c.g.P=0;var y=Dt(c.na);et(y,"RID","rpc"),et(y,"SID",c.M),et(y,"AID",c.K),et(y,"CI",c.F?"0":"1"),!c.F&&c.ia&&et(y,"TO",c.ia),et(y,"TYPE","xmlhttp"),Us(c,y),c.u&&c.o&&Ps(y,c.u,c.o),c.O&&(c.g.H=c.O);var _=c.g;c=c.ba,_.M=1,_.A=Ms(Dt(y)),_.u=null,_.R=!0,_a(_,c)}r.Va=function(){this.C!=null&&(this.C=null,Lr(this),zs(this),Ct(19))};function xa(c){c.C!=null&&(f.clearTimeout(c.C),c.C=null)}function Ku(c,y){var _=null;if(c.g==y){xa(c),il(c),c.g=null;var w=2}else if(Ni(c.h,y))_=y.G,Qo(c.h,y),w=1;else return;if(c.I!=0){if(y.o)if(w==1){_=y.u?y.u.length:0,y=Date.now()-y.F;var H=c.D;w=va(),Bt(w,new Si(w,_)),Pi(c)}else $u(c);else if(H=y.m,H==3||H==0&&y.X>0||!(w==1&&Ca(c,y)||w==2&&zs(c)))switch(_&&_.length>0&&(y=c.h,y.i=y.i.concat(_)),H){case 1:Li(c,5);break;case 4:Li(c,10);break;case 3:Li(c,6);break;default:Li(c,2)}}}function Xu(c,y){let _=c.Qa+Math.floor(Math.random()*c.Za);return c.isActive()||(_*=2),_*y}function Li(c,y){if(c.j.info("Error code "+y),y==2){var _=g(c.bb,c),w=c.Ua;const H=!w;w=new Nn(w||"//www.google.com/images/cleardot.gif"),f.location&&f.location.protocol=="http"||Gt(w,"https"),Ms(w),H?ui(w.toString(),_):Jo(w.toString(),_)}else Ct(2);c.I=0,c.l&&c.l.pa(y),Wu(c),Ra(c)}r.bb=function(c){c?(this.j.info("Successfully pinged google.com"),Ct(2)):(this.j.info("Failed to ping google.com"),Ct(1))};function Wu(c){if(c.I=0,c.ja=[],c.l){const y=$o(c.h);(y.length!=0||c.i.length!=0)&&(L(c.ja,y),L(c.ja,c.i),c.h.i.length=0,O(c.i),c.i.length=0),c.l.oa()}}function Ju(c,y,_){var w=_ instanceof Nn?Dt(_):new Nn(_);if(w.g!="")y&&(w.g=y+"."+w.g),Dr(w,w.u);else{var H=f.location;w=H.protocol,y=y?y+"."+H.hostname:H.hostname,H=+H.port;const Y=new Nn(null);w&&Gt(Y,w),y&&(Y.g=y),H&&Dr(Y,H),_&&(Y.h=_),w=Y}return _=c.G,y=c.wa,_&&y&&et(w,_,y),et(w,"VER",c.ka),Us(c,w),w}function Zu(c,y,_){if(y&&!c.L)throw Error("Can't create secondary domain capable XhrIo object.");return y=c.Aa&&!c.ma?new it(new Mi({ab:_})):new it(c.ma),y.Fa(c.L),y}r.isActive=function(){return!!this.l&&this.l.isActive(this)};function ec(){}r=ec.prototype,r.ra=function(){},r.qa=function(){},r.pa=function(){},r.oa=function(){},r.isActive=function(){return!0},r.Ka=function(){};function jr(){}jr.prototype.g=function(c,y){return new gn(c,y)};function gn(c,y){Rt.call(this),this.g=new Pr(y),this.l=c,this.h=y&&y.messageUrlParams||null,c=y&&y.messageHeaders||null,y&&y.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=y&&y.initMessageHeaders||null,y&&y.messageContentType&&(c?c["X-WebChannel-Content-Type"]=y.messageContentType:c={"X-WebChannel-Content-Type":y.messageContentType}),y&&y.sa&&(c?c["X-WebChannel-Client-Profile"]=y.sa:c={"X-WebChannel-Client-Profile":y.sa}),this.g.U=c,(c=y&&y.Qb)&&!A(c)&&(this.g.u=c),this.A=y&&y.supportsCrossDomainXhr||!1,this.v=y&&y.sendRawJson||!1,(y=y&&y.httpSessionIdParam)&&!A(y)&&(this.g.G=y,c=this.h,c!==null&&y in c&&(c=this.h,y in c&&delete c[y])),this.j=new nr(this)}T(gn,Rt),gn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},gn.prototype.close=function(){tl(this.g)},gn.prototype.o=function(c){var y=this.g;if(typeof c=="string"){var _={};_.__data__=c,c=_}else this.v&&(_={},_.__data__=Ir(c),c=_);y.i.push(new It(y.Ya++,c)),y.I==3&&Pi(y)},gn.prototype.N=function(){this.g.l=null,delete this.j,tl(this.g),delete this.g,gn.Z.N.call(this)};function tc(c){Xt.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var y=c.__sm__;if(y){e:{for(const _ in y){c=_;break e}c=void 0}(this.i=c)&&(c=this.i,y=y!==null&&c in y?y[c]:void 0),this.data=y}else this.data=c}T(tc,Xt);function nc(){Fn.call(this),this.status=1}T(nc,Fn);function nr(c){this.g=c}T(nr,ec),nr.prototype.ra=function(){Bt(this.g,"a")},nr.prototype.qa=function(c){Bt(this.g,new tc(c))},nr.prototype.pa=function(c){Bt(this.g,new nc)},nr.prototype.oa=function(){Bt(this.g,"b")},jr.prototype.createWebChannel=jr.prototype.g,gn.prototype.send=gn.prototype.o,gn.prototype.open=gn.prototype.m,gn.prototype.close=gn.prototype.close,KT=function(){return new jr},YT=function(){return va()},$T=Et,ep={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Ns.NO_ERROR=0,Ns.TIMEOUT=8,Ns.HTTP_ERROR=6,Eh=Ns,Bo.COMPLETE="complete",QT=Bo,Vu.EventType=si,si.OPEN="a",si.CLOSE="b",si.ERROR="c",si.MESSAGE="d",Rt.prototype.listen=Rt.prototype.J,Hl=Vu,it.prototype.listenOnce=it.prototype.K,it.prototype.getLastError=it.prototype.Ha,it.prototype.getLastErrorCode=it.prototype.ya,it.prototype.getStatus=it.prototype.ca,it.prototype.getResponseJson=it.prototype.La,it.prototype.getResponseText=it.prototype.la,it.prototype.send=it.prototype.ea,it.prototype.setWithCredentials=it.prototype.Fa,GT=it}).apply(typeof lh<"u"?lh:typeof self<"u"?self:typeof window<"u"?window:{});const k0="@firebase/firestore",P0="4.9.3";class hn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}hn.UNAUTHENTICATED=new hn(null),hn.GOOGLE_CREDENTIALS=new hn("google-credentials-uid"),hn.FIRST_PARTY=new hn("first-party-uid"),hn.MOCK_USER=new hn("mock-user");let Mo="12.7.0";const fa=new wp("@firebase/firestore");function ao(){return fa.logLevel}function ge(r,...e){if(fa.logLevel<=Be.DEBUG){const n=e.map(jp);fa.debug(`Firestore (${Mo}): ${r}`,...n)}}function wr(r,...e){if(fa.logLevel<=Be.ERROR){const n=e.map(jp);fa.error(`Firestore (${Mo}): ${r}`,...n)}}function _o(r,...e){if(fa.logLevel<=Be.WARN){const n=e.map(jp);fa.warn(`Firestore (${Mo}): ${r}`,...n)}}function jp(r){if(typeof r=="string")return r;try{return(function(n){return JSON.stringify(n)})(r)}catch{return r}}function Ae(r,e,n){let s="Unexpected state";typeof e=="string"?s=e:n=e,XT(r,s,n)}function XT(r,e,n){let s=`FIRESTORE (${Mo}) INTERNAL ASSERTION FAILED: ${e} (ID: ${r.toString(16)})`;if(n!==void 0)try{s+=" CONTEXT: "+JSON.stringify(n)}catch{s+=" CONTEXT: "+n}throw wr(s),new Error(s)}function $e(r,e,n,s){let o="Unexpected state";typeof n=="string"?o=n:s=n,r||XT(e,o,s)}function De(r,e){return r}const ne={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class me extends Cr{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Gi{constructor(){this.promise=new Promise(((e,n)=>{this.resolve=e,this.reject=n}))}}class WT{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class V2{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable((()=>n(hn.UNAUTHENTICATED)))}shutdown(){}}class k2{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class P2{constructor(e){this.t=e,this.currentUser=hn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){$e(this.o===void 0,42304);let s=this.i;const o=p=>this.i!==s?(s=this.i,n(p)):Promise.resolve();let u=new Gi;this.o=()=>{this.i++,this.currentUser=this.u(),u.resolve(),u=new Gi,e.enqueueRetryable((()=>o(this.currentUser)))};const f=()=>{const p=u;e.enqueueRetryable((async()=>{await p.promise,await o(this.currentUser)}))},m=p=>{ge("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=p,this.o&&(this.auth.addAuthTokenListener(this.o),f())};this.t.onInit((p=>m(p))),setTimeout((()=>{if(!this.auth){const p=this.t.getImmediate({optional:!0});p?m(p):(ge("FirebaseAuthCredentialsProvider","Auth not yet detected"),u.resolve(),u=new Gi)}}),0),f()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((s=>this.i!==e?(ge("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?($e(typeof s.accessToken=="string",31837,{l:s}),new WT(s.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return $e(e===null||typeof e=="string",2055,{h:e}),new hn(e)}}class L2{constructor(e,n,s){this.P=e,this.T=n,this.I=s,this.type="FirstParty",this.user=hn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class j2{constructor(e,n,s){this.P=e,this.T=n,this.I=s}getToken(){return Promise.resolve(new L2(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable((()=>n(hn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class L0{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class U2{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,yi(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){$e(this.o===void 0,3512);const s=u=>{u.error!=null&&ge("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const f=u.token!==this.m;return this.m=u.token,ge("FirebaseAppCheckTokenProvider",`Received ${f?"new":"existing"} token.`),f?n(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable((()=>s(u)))};const o=u=>{ge("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((u=>o(u))),setTimeout((()=>{if(!this.appCheck){const u=this.V.getImmediate({optional:!0});u?o(u):ge("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new L0(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((n=>n?($e(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new L0(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function z2(r){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(r);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let s=0;s<r;s++)n[s]=Math.floor(256*Math.random());return n}class Up{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const o=z2(40);for(let u=0;u<o.length;++u)s.length<20&&o[u]<n&&(s+=e.charAt(o[u]%62))}return s}}function He(r,e){return r<e?-1:r>e?1:0}function tp(r,e){const n=Math.min(r.length,e.length);for(let s=0;s<n;s++){const o=r.charAt(s),u=e.charAt(s);if(o!==u)return Pm(o)===Pm(u)?He(o,u):Pm(o)?1:-1}return He(r.length,e.length)}const B2=55296,q2=57343;function Pm(r){const e=r.charCodeAt(0);return e>=B2&&e<=q2}function Eo(r,e,n){return r.length===e.length&&r.every(((s,o)=>n(s,e[o])))}const j0="__name__";class Hi{constructor(e,n,s){n===void 0?n=0:n>e.length&&Ae(637,{offset:n,range:e.length}),s===void 0?s=e.length-n:s>e.length-n&&Ae(1746,{length:s,range:e.length-n}),this.segments=e,this.offset=n,this.len=s}get length(){return this.len}isEqual(e){return Hi.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Hi?e.forEach((s=>{n.push(s)})):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,s=this.limit();n<s;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const s=Math.min(e.length,n.length);for(let o=0;o<s;o++){const u=Hi.compareSegments(e.get(o),n.get(o));if(u!==0)return u}return He(e.length,n.length)}static compareSegments(e,n){const s=Hi.isNumericId(e),o=Hi.isNumericId(n);return s&&!o?-1:!s&&o?1:s&&o?Hi.extractNumericId(e).compare(Hi.extractNumericId(n)):tp(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return ps.fromString(e.substring(4,e.length-2))}}class ot extends Hi{construct(e,n,s){return new ot(e,n,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const s of e){if(s.indexOf("//")>=0)throw new me(ne.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);n.push(...s.split("/").filter((o=>o.length>0)))}return new ot(n)}static emptyPath(){return new ot([])}}const H2=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class rn extends Hi{construct(e,n,s){return new rn(e,n,s)}static isValidIdentifier(e){return H2.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),rn.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===j0}static keyField(){return new rn([j0])}static fromServerFormat(e){const n=[];let s="",o=0;const u=()=>{if(s.length===0)throw new me(ne.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(s),s=""};let f=!1;for(;o<e.length;){const m=e[o];if(m==="\\"){if(o+1===e.length)throw new me(ne.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const p=e[o+1];if(p!=="\\"&&p!=="."&&p!=="`")throw new me(ne.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=p,o+=2}else m==="`"?(f=!f,o++):m!=="."||f?(s+=m,o++):(u(),o++)}if(u(),f)throw new me(ne.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new rn(n)}static emptyPath(){return new rn([])}}class Ee{constructor(e){this.path=e}static fromPath(e){return new Ee(ot.fromString(e))}static fromName(e){return new Ee(ot.fromString(e).popFirst(5))}static empty(){return new Ee(ot.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ot.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return ot.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ee(new ot(e.slice()))}}function JT(r,e,n){if(!n)throw new me(ne.INVALID_ARGUMENT,`Function ${r}() cannot be called with an empty ${e}.`)}function F2(r,e,n,s){if(e===!0&&s===!0)throw new me(ne.INVALID_ARGUMENT,`${r} and ${n} cannot be used together.`)}function U0(r){if(!Ee.isDocumentKey(r))throw new me(ne.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${r} has ${r.length}.`)}function z0(r){if(Ee.isDocumentKey(r))throw new me(ne.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${r} has ${r.length}.`)}function ZT(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}function tf(r){if(r===void 0)return"undefined";if(r===null)return"null";if(typeof r=="string")return r.length>20&&(r=`${r.substring(0,20)}...`),JSON.stringify(r);if(typeof r=="number"||typeof r=="boolean")return""+r;if(typeof r=="object"){if(r instanceof Array)return"an array";{const e=(function(s){return s.constructor?s.constructor.name:null})(r);return e?`a custom ${e} object`:"an object"}}return typeof r=="function"?"a function":Ae(12329,{type:typeof r})}function _n(r,e){if("_delegate"in r&&(r=r._delegate),!(r instanceof e)){if(e.name===r.constructor.name)throw new me(ne.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=tf(r);throw new me(ne.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return r}function Ut(r,e){const n={typeString:r};return e&&(n.value=e),n}function vu(r,e){if(!ZT(r))throw new me(ne.INVALID_ARGUMENT,"JSON must be an object");let n;for(const s in e)if(e[s]){const o=e[s].typeString,u="value"in e[s]?{value:e[s].value}:void 0;if(!(s in r)){n=`JSON missing required field: '${s}'`;break}const f=r[s];if(o&&typeof f!==o){n=`JSON field '${s}' must be a ${o}.`;break}if(u!==void 0&&f!==u.value){n=`Expected '${s}' field to equal '${u.value}'`;break}}if(n)throw new me(ne.INVALID_ARGUMENT,n);return!0}const B0=-62135596800,q0=1e6;class ht{static now(){return ht.fromMillis(Date.now())}static fromDate(e){return ht.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),s=Math.floor((e-1e3*n)*q0);return new ht(n,s)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new me(ne.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new me(ne.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<B0)throw new me(ne.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new me(ne.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/q0}_compareTo(e){return this.seconds===e.seconds?He(this.nanoseconds,e.nanoseconds):He(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:ht._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(vu(e,ht._jsonSchema))return new ht(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-B0;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}ht._jsonSchemaVersion="firestore/timestamp/1.0",ht._jsonSchema={type:Ut("string",ht._jsonSchemaVersion),seconds:Ut("number"),nanoseconds:Ut("number")};class xe{static fromTimestamp(e){return new xe(e)}static min(){return new xe(new ht(0,0))}static max(){return new xe(new ht(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const iu=-1;function G2(r,e){const n=r.toTimestamp().seconds,s=r.toTimestamp().nanoseconds+1,o=xe.fromTimestamp(s===1e9?new ht(n+1,0):new ht(n,s));return new _s(o,Ee.empty(),e)}function Q2(r){return new _s(r.readTime,r.key,iu)}class _s{constructor(e,n,s){this.readTime=e,this.documentKey=n,this.largestBatchId=s}static min(){return new _s(xe.min(),Ee.empty(),iu)}static max(){return new _s(xe.max(),Ee.empty(),iu)}}function $2(r,e){let n=r.readTime.compareTo(e.readTime);return n!==0?n:(n=Ee.comparator(r.documentKey,e.documentKey),n!==0?n:He(r.largestBatchId,e.largestBatchId))}const Y2="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class K2{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function Vo(r){if(r.code!==ne.FAILED_PRECONDITION||r.message!==Y2)throw r;ge("LocalStore","Unexpectedly lost primary lease")}class ae{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Ae(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new ae(((s,o)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(s,o)},this.catchCallback=u=>{this.wrapFailure(n,u).next(s,o)}}))}toPromise(){return new Promise(((e,n)=>{this.next(e,n)}))}wrapUserFunction(e){try{const n=e();return n instanceof ae?n:ae.resolve(n)}catch(n){return ae.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction((()=>e(n))):ae.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction((()=>e(n))):ae.reject(n)}static resolve(e){return new ae(((n,s)=>{n(e)}))}static reject(e){return new ae(((n,s)=>{s(e)}))}static waitFor(e){return new ae(((n,s)=>{let o=0,u=0,f=!1;e.forEach((m=>{++o,m.next((()=>{++u,f&&u===o&&n()}),(p=>s(p)))})),f=!0,u===o&&n()}))}static or(e){let n=ae.resolve(!1);for(const s of e)n=n.next((o=>o?ae.resolve(o):s()));return n}static forEach(e,n){const s=[];return e.forEach(((o,u)=>{s.push(n.call(this,o,u))})),this.waitFor(s)}static mapArray(e,n){return new ae(((s,o)=>{const u=e.length,f=new Array(u);let m=0;for(let p=0;p<u;p++){const g=p;n(e[g]).next((E=>{f[g]=E,++m,m===u&&s(f)}),(E=>o(E)))}}))}static doWhile(e,n){return new ae(((s,o)=>{const u=()=>{e()===!0?n().next((()=>{u()}),o):s()};u()}))}}function X2(r){const e=r.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function ko(r){return r.name==="IndexedDbTransactionError"}class nf{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=s=>this.ae(s),this.ue=s=>n.writeSequenceNumber(s))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}nf.ce=-1;const zp=-1;function _u(r){return r==null}function Ph(r){return r===0&&1/r==-1/0}function W2(r){return typeof r=="number"&&Number.isInteger(r)&&!Ph(r)&&r<=Number.MAX_SAFE_INTEGER&&r>=Number.MIN_SAFE_INTEGER}const eb="";function J2(r){let e="";for(let n=0;n<r.length;n++)e.length>0&&(e=H0(e)),e=Z2(r.get(n),e);return H0(e)}function Z2(r,e){let n=e;const s=r.length;for(let o=0;o<s;o++){const u=r.charAt(o);switch(u){case"\0":n+="";break;case eb:n+="";break;default:n+=u}}return n}function H0(r){return r+eb+""}function F0(r){let e=0;for(const n in r)Object.prototype.hasOwnProperty.call(r,n)&&e++;return e}function Rs(r,e){for(const n in r)Object.prototype.hasOwnProperty.call(r,n)&&e(n,r[n])}function tb(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}class gt{constructor(e,n){this.comparator=e,this.root=n||nn.EMPTY}insert(e,n){return new gt(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,nn.BLACK,null,null))}remove(e){return new gt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,nn.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const s=this.comparator(e,n.key);if(s===0)return n.value;s<0?n=n.left:s>0&&(n=n.right)}return null}indexOf(e){let n=0,s=this.root;for(;!s.isEmpty();){const o=this.comparator(e,s.key);if(o===0)return n+s.left.size;o<0?s=s.left:(n+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((n,s)=>(e(n,s),!1)))}toString(){const e=[];return this.inorderTraversal(((n,s)=>(e.push(`${n}:${s}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new uh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new uh(this.root,e,this.comparator,!1)}getReverseIterator(){return new uh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new uh(this.root,e,this.comparator,!0)}}class uh{constructor(e,n,s,o){this.isReverse=o,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=n?s(e.key,n):1,n&&o&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(u===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class nn{constructor(e,n,s,o,u){this.key=e,this.value=n,this.color=s??nn.RED,this.left=o??nn.EMPTY,this.right=u??nn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,s,o,u){return new nn(e??this.key,n??this.value,s??this.color,o??this.left,u??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,s){let o=this;const u=s(e,o.key);return o=u<0?o.copy(null,null,null,o.left.insert(e,n,s),null):u===0?o.copy(null,n,null,null,null):o.copy(null,null,null,null,o.right.insert(e,n,s)),o.fixUp()}removeMin(){if(this.left.isEmpty())return nn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let s,o=this;if(n(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,n),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),n(e,o.key)===0){if(o.right.isEmpty())return nn.EMPTY;s=o.right.min(),o=o.copy(s.key,s.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,n))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,nn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,nn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ae(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Ae(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Ae(27949);return e+(this.isRed()?0:1)}}nn.EMPTY=null,nn.RED=!0,nn.BLACK=!1;nn.EMPTY=new class{constructor(){this.size=0}get key(){throw Ae(57766)}get value(){throw Ae(16141)}get color(){throw Ae(16727)}get left(){throw Ae(29726)}get right(){throw Ae(36894)}copy(e,n,s,o,u){return this}insert(e,n,s){return new nn(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Ht{constructor(e){this.comparator=e,this.data=new gt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((n,s)=>(e(n),!1)))}forEachInRange(e,n){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const o=s.getNext();if(this.comparator(o.key,e[1])>=0)return;n(o.key)}}forEachWhile(e,n){let s;for(s=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new G0(this.data.getIterator())}getIteratorFrom(e){return new G0(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach((s=>{n=n.add(s)})),n}isEqual(e){if(!(e instanceof Ht)||this.size!==e.size)return!1;const n=this.data.getIterator(),s=e.data.getIterator();for(;n.hasNext();){const o=n.getNext().key,u=s.getNext().key;if(this.comparator(o,u)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((n=>{e.push(n)})),e}toString(){const e=[];return this.forEach((n=>e.push(n))),"SortedSet("+e.toString()+")"}copy(e){const n=new Ht(this.comparator);return n.data=e,n}}class G0{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class Bn{constructor(e){this.fields=e,e.sort(rn.comparator)}static empty(){return new Bn([])}unionWith(e){let n=new Ht(rn.comparator);for(const s of this.fields)n=n.add(s);for(const s of e)n=n.add(s);return new Bn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Eo(this.fields,e.fields,((n,s)=>n.isEqual(s)))}}class nb extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class an{constructor(e){this.binaryString=e}static fromBase64String(e){const n=(function(o){try{return atob(o)}catch(u){throw typeof DOMException<"u"&&u instanceof DOMException?new nb("Invalid base64 string: "+u):u}})(e);return new an(n)}static fromUint8Array(e){const n=(function(o){let u="";for(let f=0;f<o.length;++f)u+=String.fromCharCode(o[f]);return u})(e);return new an(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const s=new Uint8Array(n.length);for(let o=0;o<n.length;o++)s[o]=n.charCodeAt(o);return s})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return He(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}an.EMPTY_BYTE_STRING=new an("");const eI=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Es(r){if($e(!!r,39018),typeof r=="string"){let e=0;const n=eI.exec(r);if($e(!!n,46558,{timestamp:r}),n[1]){let o=n[1];o=(o+"000000000").substr(0,9),e=Number(o)}const s=new Date(r);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:wt(r.seconds),nanos:wt(r.nanos)}}function wt(r){return typeof r=="number"?r:typeof r=="string"?Number(r):0}function Ts(r){return typeof r=="string"?an.fromBase64String(r):an.fromUint8Array(r)}const ib="server_timestamp",rb="__type__",sb="__previous_value__",ab="__local_write_time__";function Bp(r){return(r?.mapValue?.fields||{})[rb]?.stringValue===ib}function rf(r){const e=r.mapValue.fields[sb];return Bp(e)?rf(e):e}function ru(r){const e=Es(r.mapValue.fields[ab].timestampValue);return new ht(e.seconds,e.nanos)}class tI{constructor(e,n,s,o,u,f,m,p,g,E){this.databaseId=e,this.appId=n,this.persistenceKey=s,this.host=o,this.ssl=u,this.forceLongPolling=f,this.autoDetectLongPolling=m,this.longPollingOptions=p,this.useFetchStreams=g,this.isUsingEmulator=E}}const Lh="(default)";class su{constructor(e,n){this.projectId=e,this.database=n||Lh}static empty(){return new su("","")}get isDefaultDatabase(){return this.database===Lh}isEqual(e){return e instanceof su&&e.projectId===this.projectId&&e.database===this.database}}const ob="__type__",nI="__max__",ch={mapValue:{}},lb="__vector__",jh="value";function bs(r){return"nullValue"in r?0:"booleanValue"in r?1:"integerValue"in r||"doubleValue"in r?2:"timestampValue"in r?3:"stringValue"in r?5:"bytesValue"in r?6:"referenceValue"in r?7:"geoPointValue"in r?8:"arrayValue"in r?9:"mapValue"in r?Bp(r)?4:rI(r)?9007199254740991:iI(r)?10:11:Ae(28295,{value:r})}function Xi(r,e){if(r===e)return!0;const n=bs(r);if(n!==bs(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return r.booleanValue===e.booleanValue;case 4:return ru(r).isEqual(ru(e));case 3:return(function(o,u){if(typeof o.timestampValue=="string"&&typeof u.timestampValue=="string"&&o.timestampValue.length===u.timestampValue.length)return o.timestampValue===u.timestampValue;const f=Es(o.timestampValue),m=Es(u.timestampValue);return f.seconds===m.seconds&&f.nanos===m.nanos})(r,e);case 5:return r.stringValue===e.stringValue;case 6:return(function(o,u){return Ts(o.bytesValue).isEqual(Ts(u.bytesValue))})(r,e);case 7:return r.referenceValue===e.referenceValue;case 8:return(function(o,u){return wt(o.geoPointValue.latitude)===wt(u.geoPointValue.latitude)&&wt(o.geoPointValue.longitude)===wt(u.geoPointValue.longitude)})(r,e);case 2:return(function(o,u){if("integerValue"in o&&"integerValue"in u)return wt(o.integerValue)===wt(u.integerValue);if("doubleValue"in o&&"doubleValue"in u){const f=wt(o.doubleValue),m=wt(u.doubleValue);return f===m?Ph(f)===Ph(m):isNaN(f)&&isNaN(m)}return!1})(r,e);case 9:return Eo(r.arrayValue.values||[],e.arrayValue.values||[],Xi);case 10:case 11:return(function(o,u){const f=o.mapValue.fields||{},m=u.mapValue.fields||{};if(F0(f)!==F0(m))return!1;for(const p in f)if(f.hasOwnProperty(p)&&(m[p]===void 0||!Xi(f[p],m[p])))return!1;return!0})(r,e);default:return Ae(52216,{left:r})}}function au(r,e){return(r.values||[]).find((n=>Xi(n,e)))!==void 0}function To(r,e){if(r===e)return 0;const n=bs(r),s=bs(e);if(n!==s)return He(n,s);switch(n){case 0:case 9007199254740991:return 0;case 1:return He(r.booleanValue,e.booleanValue);case 2:return(function(u,f){const m=wt(u.integerValue||u.doubleValue),p=wt(f.integerValue||f.doubleValue);return m<p?-1:m>p?1:m===p?0:isNaN(m)?isNaN(p)?0:-1:1})(r,e);case 3:return Q0(r.timestampValue,e.timestampValue);case 4:return Q0(ru(r),ru(e));case 5:return tp(r.stringValue,e.stringValue);case 6:return(function(u,f){const m=Ts(u),p=Ts(f);return m.compareTo(p)})(r.bytesValue,e.bytesValue);case 7:return(function(u,f){const m=u.split("/"),p=f.split("/");for(let g=0;g<m.length&&g<p.length;g++){const E=He(m[g],p[g]);if(E!==0)return E}return He(m.length,p.length)})(r.referenceValue,e.referenceValue);case 8:return(function(u,f){const m=He(wt(u.latitude),wt(f.latitude));return m!==0?m:He(wt(u.longitude),wt(f.longitude))})(r.geoPointValue,e.geoPointValue);case 9:return $0(r.arrayValue,e.arrayValue);case 10:return(function(u,f){const m=u.fields||{},p=f.fields||{},g=m[jh]?.arrayValue,E=p[jh]?.arrayValue,T=He(g?.values?.length||0,E?.values?.length||0);return T!==0?T:$0(g,E)})(r.mapValue,e.mapValue);case 11:return(function(u,f){if(u===ch.mapValue&&f===ch.mapValue)return 0;if(u===ch.mapValue)return 1;if(f===ch.mapValue)return-1;const m=u.fields||{},p=Object.keys(m),g=f.fields||{},E=Object.keys(g);p.sort(),E.sort();for(let T=0;T<p.length&&T<E.length;++T){const C=tp(p[T],E[T]);if(C!==0)return C;const O=To(m[p[T]],g[E[T]]);if(O!==0)return O}return He(p.length,E.length)})(r.mapValue,e.mapValue);default:throw Ae(23264,{he:n})}}function Q0(r,e){if(typeof r=="string"&&typeof e=="string"&&r.length===e.length)return He(r,e);const n=Es(r),s=Es(e),o=He(n.seconds,s.seconds);return o!==0?o:He(n.nanos,s.nanos)}function $0(r,e){const n=r.values||[],s=e.values||[];for(let o=0;o<n.length&&o<s.length;++o){const u=To(n[o],s[o]);if(u)return u}return He(n.length,s.length)}function bo(r){return np(r)}function np(r){return"nullValue"in r?"null":"booleanValue"in r?""+r.booleanValue:"integerValue"in r?""+r.integerValue:"doubleValue"in r?""+r.doubleValue:"timestampValue"in r?(function(n){const s=Es(n);return`time(${s.seconds},${s.nanos})`})(r.timestampValue):"stringValue"in r?r.stringValue:"bytesValue"in r?(function(n){return Ts(n).toBase64()})(r.bytesValue):"referenceValue"in r?(function(n){return Ee.fromName(n).toString()})(r.referenceValue):"geoPointValue"in r?(function(n){return`geo(${n.latitude},${n.longitude})`})(r.geoPointValue):"arrayValue"in r?(function(n){let s="[",o=!0;for(const u of n.values||[])o?o=!1:s+=",",s+=np(u);return s+"]"})(r.arrayValue):"mapValue"in r?(function(n){const s=Object.keys(n.fields||{}).sort();let o="{",u=!0;for(const f of s)u?u=!1:o+=",",o+=`${f}:${np(n.fields[f])}`;return o+"}"})(r.mapValue):Ae(61005,{value:r})}function Th(r){switch(bs(r)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=rf(r);return e?16+Th(e):16;case 5:return 2*r.stringValue.length;case 6:return Ts(r.bytesValue).approximateByteSize();case 7:return r.referenceValue.length;case 9:return(function(s){return(s.values||[]).reduce(((o,u)=>o+Th(u)),0)})(r.arrayValue);case 10:case 11:return(function(s){let o=0;return Rs(s.fields,((u,f)=>{o+=u.length+Th(f)})),o})(r.mapValue);default:throw Ae(13486,{value:r})}}function Y0(r,e){return{referenceValue:`projects/${r.projectId}/databases/${r.database}/documents/${e.path.canonicalString()}`}}function ip(r){return!!r&&"integerValue"in r}function qp(r){return!!r&&"arrayValue"in r}function K0(r){return!!r&&"nullValue"in r}function X0(r){return!!r&&"doubleValue"in r&&isNaN(Number(r.doubleValue))}function bh(r){return!!r&&"mapValue"in r}function iI(r){return(r?.mapValue?.fields||{})[ob]?.stringValue===lb}function Kl(r){if(r.geoPointValue)return{geoPointValue:{...r.geoPointValue}};if(r.timestampValue&&typeof r.timestampValue=="object")return{timestampValue:{...r.timestampValue}};if(r.mapValue){const e={mapValue:{fields:{}}};return Rs(r.mapValue.fields,((n,s)=>e.mapValue.fields[n]=Kl(s))),e}if(r.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(r.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Kl(r.arrayValue.values[n]);return e}return{...r}}function rI(r){return(((r.mapValue||{}).fields||{}).__type__||{}).stringValue===nI}class vn{constructor(e){this.value=e}static empty(){return new vn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let s=0;s<e.length-1;++s)if(n=(n.mapValue.fields||{})[e.get(s)],!bh(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Kl(n)}setAll(e){let n=rn.emptyPath(),s={},o=[];e.forEach(((f,m)=>{if(!n.isImmediateParentOf(m)){const p=this.getFieldsMap(n);this.applyChanges(p,s,o),s={},o=[],n=m.popLast()}f?s[m.lastSegment()]=Kl(f):o.push(m.lastSegment())}));const u=this.getFieldsMap(n);this.applyChanges(u,s,o)}delete(e){const n=this.field(e.popLast());bh(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Xi(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let s=0;s<e.length;++s){let o=n.mapValue.fields[e.get(s)];bh(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},n.mapValue.fields[e.get(s)]=o),n=o}return n.mapValue.fields}applyChanges(e,n,s){Rs(n,((o,u)=>e[o]=u));for(const o of s)delete e[o]}clone(){return new vn(Kl(this.value))}}function ub(r){const e=[];return Rs(r.fields,((n,s)=>{const o=new rn([n]);if(bh(s)){const u=ub(s.mapValue).fields;if(u.length===0)e.push(o);else for(const f of u)e.push(o.child(f))}else e.push(o)})),new Bn(e)}class Yt{constructor(e,n,s,o,u,f,m){this.key=e,this.documentType=n,this.version=s,this.readTime=o,this.createTime=u,this.data=f,this.documentState=m}static newInvalidDocument(e){return new Yt(e,0,xe.min(),xe.min(),xe.min(),vn.empty(),0)}static newFoundDocument(e,n,s,o){return new Yt(e,1,n,xe.min(),s,o,0)}static newNoDocument(e,n){return new Yt(e,2,n,xe.min(),xe.min(),vn.empty(),0)}static newUnknownDocument(e,n){return new Yt(e,3,n,xe.min(),xe.min(),vn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(xe.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=vn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=vn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=xe.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Yt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Yt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Uh{constructor(e,n){this.position=e,this.inclusive=n}}function W0(r,e,n){let s=0;for(let o=0;o<r.position.length;o++){const u=e[o],f=r.position[o];if(u.field.isKeyField()?s=Ee.comparator(Ee.fromName(f.referenceValue),n.key):s=To(f,n.data.field(u.field)),u.dir==="desc"&&(s*=-1),s!==0)break}return s}function J0(r,e){if(r===null)return e===null;if(e===null||r.inclusive!==e.inclusive||r.position.length!==e.position.length)return!1;for(let n=0;n<r.position.length;n++)if(!Xi(r.position[n],e.position[n]))return!1;return!0}class zh{constructor(e,n="asc"){this.field=e,this.dir=n}}function sI(r,e){return r.dir===e.dir&&r.field.isEqual(e.field)}class cb{}class jt extends cb{constructor(e,n,s){super(),this.field=e,this.op=n,this.value=s}static create(e,n,s){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,s):new oI(e,n,s):n==="array-contains"?new cI(e,s):n==="in"?new hI(e,s):n==="not-in"?new fI(e,s):n==="array-contains-any"?new dI(e,s):new jt(e,n,s)}static createKeyFieldInFilter(e,n,s){return n==="in"?new lI(e,s):new uI(e,s)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(To(n,this.value)):n!==null&&bs(this.value)===bs(n)&&this.matchesComparison(To(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ae(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Ei extends cb{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new Ei(e,n)}matches(e){return hb(this)?this.filters.find((n=>!n.matches(e)))===void 0:this.filters.find((n=>n.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,n)=>e.concat(n.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function hb(r){return r.op==="and"}function fb(r){return aI(r)&&hb(r)}function aI(r){for(const e of r.filters)if(e instanceof Ei)return!1;return!0}function rp(r){if(r instanceof jt)return r.field.canonicalString()+r.op.toString()+bo(r.value);if(fb(r))return r.filters.map((e=>rp(e))).join(",");{const e=r.filters.map((n=>rp(n))).join(",");return`${r.op}(${e})`}}function db(r,e){return r instanceof jt?(function(s,o){return o instanceof jt&&s.op===o.op&&s.field.isEqual(o.field)&&Xi(s.value,o.value)})(r,e):r instanceof Ei?(function(s,o){return o instanceof Ei&&s.op===o.op&&s.filters.length===o.filters.length?s.filters.reduce(((u,f,m)=>u&&db(f,o.filters[m])),!0):!1})(r,e):void Ae(19439)}function mb(r){return r instanceof jt?(function(n){return`${n.field.canonicalString()} ${n.op} ${bo(n.value)}`})(r):r instanceof Ei?(function(n){return n.op.toString()+" {"+n.getFilters().map(mb).join(" ,")+"}"})(r):"Filter"}class oI extends jt{constructor(e,n,s){super(e,n,s),this.key=Ee.fromName(s.referenceValue)}matches(e){const n=Ee.comparator(e.key,this.key);return this.matchesComparison(n)}}class lI extends jt{constructor(e,n){super(e,"in",n),this.keys=pb("in",n)}matches(e){return this.keys.some((n=>n.isEqual(e.key)))}}class uI extends jt{constructor(e,n){super(e,"not-in",n),this.keys=pb("not-in",n)}matches(e){return!this.keys.some((n=>n.isEqual(e.key)))}}function pb(r,e){return(e.arrayValue?.values||[]).map((n=>Ee.fromName(n.referenceValue)))}class cI extends jt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return qp(n)&&au(n.arrayValue,this.value)}}class hI extends jt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&au(this.value.arrayValue,n)}}class fI extends jt{constructor(e,n){super(e,"not-in",n)}matches(e){if(au(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!au(this.value.arrayValue,n)}}class dI extends jt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!qp(n)||!n.arrayValue.values)&&n.arrayValue.values.some((s=>au(this.value.arrayValue,s)))}}class mI{constructor(e,n=null,s=[],o=[],u=null,f=null,m=null){this.path=e,this.collectionGroup=n,this.orderBy=s,this.filters=o,this.limit=u,this.startAt=f,this.endAt=m,this.Te=null}}function Z0(r,e=null,n=[],s=[],o=null,u=null,f=null){return new mI(r,e,n,s,o,u,f)}function Hp(r){const e=De(r);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((s=>rp(s))).join(","),n+="|ob:",n+=e.orderBy.map((s=>(function(u){return u.field.canonicalString()+u.dir})(s))).join(","),_u(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((s=>bo(s))).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((s=>bo(s))).join(",")),e.Te=n}return e.Te}function Fp(r,e){if(r.limit!==e.limit||r.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<r.orderBy.length;n++)if(!sI(r.orderBy[n],e.orderBy[n]))return!1;if(r.filters.length!==e.filters.length)return!1;for(let n=0;n<r.filters.length;n++)if(!db(r.filters[n],e.filters[n]))return!1;return r.collectionGroup===e.collectionGroup&&!!r.path.isEqual(e.path)&&!!J0(r.startAt,e.startAt)&&J0(r.endAt,e.endAt)}function sp(r){return Ee.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}class Eu{constructor(e,n=null,s=[],o=[],u=null,f="F",m=null,p=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=s,this.filters=o,this.limit=u,this.limitType=f,this.startAt=m,this.endAt=p,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function pI(r,e,n,s,o,u,f,m){return new Eu(r,e,n,s,o,u,f,m)}function sf(r){return new Eu(r)}function eE(r){return r.filters.length===0&&r.limit===null&&r.startAt==null&&r.endAt==null&&(r.explicitOrderBy.length===0||r.explicitOrderBy.length===1&&r.explicitOrderBy[0].field.isKeyField())}function gb(r){return r.collectionGroup!==null}function Xl(r){const e=De(r);if(e.Ie===null){e.Ie=[];const n=new Set;for(const u of e.explicitOrderBy)e.Ie.push(u),n.add(u.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(f){let m=new Ht(rn.comparator);return f.filters.forEach((p=>{p.getFlattenedFilters().forEach((g=>{g.isInequality()&&(m=m.add(g.field))}))})),m})(e).forEach((u=>{n.has(u.canonicalString())||u.isKeyField()||e.Ie.push(new zh(u,s))})),n.has(rn.keyField().canonicalString())||e.Ie.push(new zh(rn.keyField(),s))}return e.Ie}function Qi(r){const e=De(r);return e.Ee||(e.Ee=gI(e,Xl(r))),e.Ee}function gI(r,e){if(r.limitType==="F")return Z0(r.path,r.collectionGroup,e,r.filters,r.limit,r.startAt,r.endAt);{e=e.map((o=>{const u=o.dir==="desc"?"asc":"desc";return new zh(o.field,u)}));const n=r.endAt?new Uh(r.endAt.position,r.endAt.inclusive):null,s=r.startAt?new Uh(r.startAt.position,r.startAt.inclusive):null;return Z0(r.path,r.collectionGroup,e,r.filters,r.limit,n,s)}}function ap(r,e){const n=r.filters.concat([e]);return new Eu(r.path,r.collectionGroup,r.explicitOrderBy.slice(),n,r.limit,r.limitType,r.startAt,r.endAt)}function op(r,e,n){return new Eu(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),e,n,r.startAt,r.endAt)}function af(r,e){return Fp(Qi(r),Qi(e))&&r.limitType===e.limitType}function yb(r){return`${Hp(Qi(r))}|lt:${r.limitType}`}function oo(r){return`Query(target=${(function(n){let s=n.path.canonicalString();return n.collectionGroup!==null&&(s+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(s+=`, filters: [${n.filters.map((o=>mb(o))).join(", ")}]`),_u(n.limit)||(s+=", limit: "+n.limit),n.orderBy.length>0&&(s+=`, orderBy: [${n.orderBy.map((o=>(function(f){return`${f.field.canonicalString()} (${f.dir})`})(o))).join(", ")}]`),n.startAt&&(s+=", startAt: ",s+=n.startAt.inclusive?"b:":"a:",s+=n.startAt.position.map((o=>bo(o))).join(",")),n.endAt&&(s+=", endAt: ",s+=n.endAt.inclusive?"a:":"b:",s+=n.endAt.position.map((o=>bo(o))).join(",")),`Target(${s})`})(Qi(r))}; limitType=${r.limitType})`}function of(r,e){return e.isFoundDocument()&&(function(s,o){const u=o.key.path;return s.collectionGroup!==null?o.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(u):Ee.isDocumentKey(s.path)?s.path.isEqual(u):s.path.isImmediateParentOf(u)})(r,e)&&(function(s,o){for(const u of Xl(s))if(!u.field.isKeyField()&&o.data.field(u.field)===null)return!1;return!0})(r,e)&&(function(s,o){for(const u of s.filters)if(!u.matches(o))return!1;return!0})(r,e)&&(function(s,o){return!(s.startAt&&!(function(f,m,p){const g=W0(f,m,p);return f.inclusive?g<=0:g<0})(s.startAt,Xl(s),o)||s.endAt&&!(function(f,m,p){const g=W0(f,m,p);return f.inclusive?g>=0:g>0})(s.endAt,Xl(s),o))})(r,e)}function yI(r){return r.collectionGroup||(r.path.length%2==1?r.path.lastSegment():r.path.get(r.path.length-2))}function vb(r){return(e,n)=>{let s=!1;for(const o of Xl(r)){const u=vI(o,e,n);if(u!==0)return u;s=s||o.field.isKeyField()}return 0}}function vI(r,e,n){const s=r.field.isKeyField()?Ee.comparator(e.key,n.key):(function(u,f,m){const p=f.data.field(u),g=m.data.field(u);return p!==null&&g!==null?To(p,g):Ae(42886)})(r.field,e,n);switch(r.dir){case"asc":return s;case"desc":return-1*s;default:return Ae(19790,{direction:r.dir})}}class ma{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s!==void 0){for(const[o,u]of s)if(this.equalsFn(o,e))return u}}has(e){return this.get(e)!==void 0}set(e,n){const s=this.mapKeyFn(e),o=this.inner[s];if(o===void 0)return this.inner[s]=[[e,n]],void this.innerSize++;for(let u=0;u<o.length;u++)if(this.equalsFn(o[u][0],e))return void(o[u]=[e,n]);o.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s===void 0)return!1;for(let o=0;o<s.length;o++)if(this.equalsFn(s[o][0],e))return s.length===1?delete this.inner[n]:s.splice(o,1),this.innerSize--,!0;return!1}forEach(e){Rs(this.inner,((n,s)=>{for(const[o,u]of s)e(o,u)}))}isEmpty(){return tb(this.inner)}size(){return this.innerSize}}const _I=new gt(Ee.comparator);function Rr(){return _I}const _b=new gt(Ee.comparator);function Fl(...r){let e=_b;for(const n of r)e=e.insert(n.key,n);return e}function Eb(r){let e=_b;return r.forEach(((n,s)=>e=e.insert(n,s.overlayedDocument))),e}function sa(){return Wl()}function Tb(){return Wl()}function Wl(){return new ma((r=>r.toString()),((r,e)=>r.isEqual(e)))}const EI=new gt(Ee.comparator),TI=new Ht(Ee.comparator);function Fe(...r){let e=TI;for(const n of r)e=e.add(n);return e}const bI=new Ht(He);function SI(){return bI}function Gp(r,e){if(r.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ph(e)?"-0":e}}function bb(r){return{integerValue:""+r}}function Sb(r,e){return W2(e)?bb(e):Gp(r,e)}class lf{constructor(){this._=void 0}}function AI(r,e,n){return r instanceof ou?(function(o,u){const f={fields:{[rb]:{stringValue:ib},[ab]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return u&&Bp(u)&&(u=rf(u)),u&&(f.fields[sb]=u),{mapValue:f}})(n,e):r instanceof lu?wb(r,e):r instanceof uu?Rb(r,e):(function(o,u){const f=Ab(o,u),m=tE(f)+tE(o.Ae);return ip(f)&&ip(o.Ae)?bb(m):Gp(o.serializer,m)})(r,e)}function wI(r,e,n){return r instanceof lu?wb(r,e):r instanceof uu?Rb(r,e):n}function Ab(r,e){return r instanceof cu?(function(s){return ip(s)||(function(u){return!!u&&"doubleValue"in u})(s)})(e)?e:{integerValue:0}:null}class ou extends lf{}class lu extends lf{constructor(e){super(),this.elements=e}}function wb(r,e){const n=Cb(e);for(const s of r.elements)n.some((o=>Xi(o,s)))||n.push(s);return{arrayValue:{values:n}}}class uu extends lf{constructor(e){super(),this.elements=e}}function Rb(r,e){let n=Cb(e);for(const s of r.elements)n=n.filter((o=>!Xi(o,s)));return{arrayValue:{values:n}}}class cu extends lf{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function tE(r){return wt(r.integerValue||r.doubleValue)}function Cb(r){return qp(r)&&r.arrayValue.values?r.arrayValue.values.slice():[]}class xb{constructor(e,n){this.field=e,this.transform=n}}function RI(r,e){return r.field.isEqual(e.field)&&(function(s,o){return s instanceof lu&&o instanceof lu||s instanceof uu&&o instanceof uu?Eo(s.elements,o.elements,Xi):s instanceof cu&&o instanceof cu?Xi(s.Ae,o.Ae):s instanceof ou&&o instanceof ou})(r.transform,e.transform)}class CI{constructor(e,n){this.version=e,this.transformResults=n}}class sn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new sn}static exists(e){return new sn(void 0,e)}static updateTime(e){return new sn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Sh(r,e){return r.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(r.updateTime):r.exists===void 0||r.exists===e.isFoundDocument()}class uf{}function Ib(r,e){if(!r.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return r.isNoDocument()?new cf(r.key,sn.none()):new Tu(r.key,r.data,sn.none());{const n=r.data,s=vn.empty();let o=new Ht(rn.comparator);for(let u of e.fields)if(!o.has(u)){let f=n.field(u);f===null&&u.length>1&&(u=u.popLast(),f=n.field(u)),f===null?s.delete(u):s.set(u,f),o=o.add(u)}return new Cs(r.key,s,new Bn(o.toArray()),sn.none())}}function xI(r,e,n){r instanceof Tu?(function(o,u,f){const m=o.value.clone(),p=iE(o.fieldTransforms,u,f.transformResults);m.setAll(p),u.convertToFoundDocument(f.version,m).setHasCommittedMutations()})(r,e,n):r instanceof Cs?(function(o,u,f){if(!Sh(o.precondition,u))return void u.convertToUnknownDocument(f.version);const m=iE(o.fieldTransforms,u,f.transformResults),p=u.data;p.setAll(Db(o)),p.setAll(m),u.convertToFoundDocument(f.version,p).setHasCommittedMutations()})(r,e,n):(function(o,u,f){u.convertToNoDocument(f.version).setHasCommittedMutations()})(0,e,n)}function Jl(r,e,n,s){return r instanceof Tu?(function(u,f,m,p){if(!Sh(u.precondition,f))return m;const g=u.value.clone(),E=rE(u.fieldTransforms,p,f);return g.setAll(E),f.convertToFoundDocument(f.version,g).setHasLocalMutations(),null})(r,e,n,s):r instanceof Cs?(function(u,f,m,p){if(!Sh(u.precondition,f))return m;const g=rE(u.fieldTransforms,p,f),E=f.data;return E.setAll(Db(u)),E.setAll(g),f.convertToFoundDocument(f.version,E).setHasLocalMutations(),m===null?null:m.unionWith(u.fieldMask.fields).unionWith(u.fieldTransforms.map((T=>T.field)))})(r,e,n,s):(function(u,f,m){return Sh(u.precondition,f)?(f.convertToNoDocument(f.version).setHasLocalMutations(),null):m})(r,e,n)}function II(r,e){let n=null;for(const s of r.fieldTransforms){const o=e.data.field(s.field),u=Ab(s.transform,o||null);u!=null&&(n===null&&(n=vn.empty()),n.set(s.field,u))}return n||null}function nE(r,e){return r.type===e.type&&!!r.key.isEqual(e.key)&&!!r.precondition.isEqual(e.precondition)&&!!(function(s,o){return s===void 0&&o===void 0||!(!s||!o)&&Eo(s,o,((u,f)=>RI(u,f)))})(r.fieldTransforms,e.fieldTransforms)&&(r.type===0?r.value.isEqual(e.value):r.type!==1||r.data.isEqual(e.data)&&r.fieldMask.isEqual(e.fieldMask))}class Tu extends uf{constructor(e,n,s,o=[]){super(),this.key=e,this.value=n,this.precondition=s,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class Cs extends uf{constructor(e,n,s,o,u=[]){super(),this.key=e,this.data=n,this.fieldMask=s,this.precondition=o,this.fieldTransforms=u,this.type=1}getFieldMask(){return this.fieldMask}}function Db(r){const e=new Map;return r.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const s=r.data.field(n);e.set(n,s)}})),e}function iE(r,e,n){const s=new Map;$e(r.length===n.length,32656,{Re:n.length,Ve:r.length});for(let o=0;o<n.length;o++){const u=r[o],f=u.transform,m=e.data.field(u.field);s.set(u.field,wI(f,m,n[o]))}return s}function rE(r,e,n){const s=new Map;for(const o of r){const u=o.transform,f=n.data.field(o.field);s.set(o.field,AI(u,f,e))}return s}class cf extends uf{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Nb extends uf{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class DI{constructor(e,n,s,o){this.batchId=e,this.localWriteTime=n,this.baseMutations=s,this.mutations=o}applyToRemoteDocument(e,n){const s=n.mutationResults;for(let o=0;o<this.mutations.length;o++){const u=this.mutations[o];u.key.isEqual(e.key)&&xI(u,e,s[o])}}applyToLocalView(e,n){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(n=Jl(s,e,n,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(n=Jl(s,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const s=Tb();return this.mutations.forEach((o=>{const u=e.get(o.key),f=u.overlayedDocument;let m=this.applyToLocalView(f,u.mutatedFields);m=n.has(o.key)?null:m;const p=Ib(f,m);p!==null&&s.set(o.key,p),f.isValidDocument()||f.convertToNoDocument(xe.min())})),s}keys(){return this.mutations.reduce(((e,n)=>e.add(n.key)),Fe())}isEqual(e){return this.batchId===e.batchId&&Eo(this.mutations,e.mutations,((n,s)=>nE(n,s)))&&Eo(this.baseMutations,e.baseMutations,((n,s)=>nE(n,s)))}}class Qp{constructor(e,n,s,o){this.batch=e,this.commitVersion=n,this.mutationResults=s,this.docVersions=o}static from(e,n,s){$e(e.mutations.length===s.length,58842,{me:e.mutations.length,fe:s.length});let o=(function(){return EI})();const u=e.mutations;for(let f=0;f<u.length;f++)o=o.insert(u[f].key,s[f].version);return new Qp(e,n,s,o)}}class NI{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class OI{constructor(e,n){this.count=e,this.unchangedNames=n}}var Pt,Qe;function Ob(r){switch(r){case ne.OK:return Ae(64938);case ne.CANCELLED:case ne.UNKNOWN:case ne.DEADLINE_EXCEEDED:case ne.RESOURCE_EXHAUSTED:case ne.INTERNAL:case ne.UNAVAILABLE:case ne.UNAUTHENTICATED:return!1;case ne.INVALID_ARGUMENT:case ne.NOT_FOUND:case ne.ALREADY_EXISTS:case ne.PERMISSION_DENIED:case ne.FAILED_PRECONDITION:case ne.ABORTED:case ne.OUT_OF_RANGE:case ne.UNIMPLEMENTED:case ne.DATA_LOSS:return!0;default:return Ae(15467,{code:r})}}function Mb(r){if(r===void 0)return wr("GRPC error has no .code"),ne.UNKNOWN;switch(r){case Pt.OK:return ne.OK;case Pt.CANCELLED:return ne.CANCELLED;case Pt.UNKNOWN:return ne.UNKNOWN;case Pt.DEADLINE_EXCEEDED:return ne.DEADLINE_EXCEEDED;case Pt.RESOURCE_EXHAUSTED:return ne.RESOURCE_EXHAUSTED;case Pt.INTERNAL:return ne.INTERNAL;case Pt.UNAVAILABLE:return ne.UNAVAILABLE;case Pt.UNAUTHENTICATED:return ne.UNAUTHENTICATED;case Pt.INVALID_ARGUMENT:return ne.INVALID_ARGUMENT;case Pt.NOT_FOUND:return ne.NOT_FOUND;case Pt.ALREADY_EXISTS:return ne.ALREADY_EXISTS;case Pt.PERMISSION_DENIED:return ne.PERMISSION_DENIED;case Pt.FAILED_PRECONDITION:return ne.FAILED_PRECONDITION;case Pt.ABORTED:return ne.ABORTED;case Pt.OUT_OF_RANGE:return ne.OUT_OF_RANGE;case Pt.UNIMPLEMENTED:return ne.UNIMPLEMENTED;case Pt.DATA_LOSS:return ne.DATA_LOSS;default:return Ae(39323,{code:r})}}(Qe=Pt||(Pt={}))[Qe.OK=0]="OK",Qe[Qe.CANCELLED=1]="CANCELLED",Qe[Qe.UNKNOWN=2]="UNKNOWN",Qe[Qe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Qe[Qe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Qe[Qe.NOT_FOUND=5]="NOT_FOUND",Qe[Qe.ALREADY_EXISTS=6]="ALREADY_EXISTS",Qe[Qe.PERMISSION_DENIED=7]="PERMISSION_DENIED",Qe[Qe.UNAUTHENTICATED=16]="UNAUTHENTICATED",Qe[Qe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Qe[Qe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Qe[Qe.ABORTED=10]="ABORTED",Qe[Qe.OUT_OF_RANGE=11]="OUT_OF_RANGE",Qe[Qe.UNIMPLEMENTED=12]="UNIMPLEMENTED",Qe[Qe.INTERNAL=13]="INTERNAL",Qe[Qe.UNAVAILABLE=14]="UNAVAILABLE",Qe[Qe.DATA_LOSS=15]="DATA_LOSS";function MI(){return new TextEncoder}const VI=new ps([4294967295,4294967295],0);function sE(r){const e=MI().encode(r),n=new FT;return n.update(e),new Uint8Array(n.digest())}function aE(r){const e=new DataView(r.buffer),n=e.getUint32(0,!0),s=e.getUint32(4,!0),o=e.getUint32(8,!0),u=e.getUint32(12,!0);return[new ps([n,s],0),new ps([o,u],0)]}class $p{constructor(e,n,s){if(this.bitmap=e,this.padding=n,this.hashCount=s,n<0||n>=8)throw new Gl(`Invalid padding: ${n}`);if(s<0)throw new Gl(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new Gl(`Invalid hash count: ${s}`);if(e.length===0&&n!==0)throw new Gl(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=ps.fromNumber(this.ge)}ye(e,n,s){let o=e.add(n.multiply(ps.fromNumber(s)));return o.compare(VI)===1&&(o=new ps([o.getBits(0),o.getBits(1)],0)),o.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=sE(e),[s,o]=aE(n);for(let u=0;u<this.hashCount;u++){const f=this.ye(s,o,u);if(!this.we(f))return!1}return!0}static create(e,n,s){const o=e%8==0?0:8-e%8,u=new Uint8Array(Math.ceil(e/8)),f=new $p(u,o,n);return s.forEach((m=>f.insert(m))),f}insert(e){if(this.ge===0)return;const n=sE(e),[s,o]=aE(n);for(let u=0;u<this.hashCount;u++){const f=this.ye(s,o,u);this.Se(f)}}Se(e){const n=Math.floor(e/8),s=e%8;this.bitmap[n]|=1<<s}}class Gl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class hf{constructor(e,n,s,o,u){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=s,this.documentUpdates=o,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,n,s){const o=new Map;return o.set(e,bu.createSynthesizedTargetChangeForCurrentChange(e,n,s)),new hf(xe.min(),o,new gt(He),Rr(),Fe())}}class bu{constructor(e,n,s,o,u){this.resumeToken=e,this.current=n,this.addedDocuments=s,this.modifiedDocuments=o,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,n,s){return new bu(s,n,Fe(),Fe(),Fe())}}class Ah{constructor(e,n,s,o){this.be=e,this.removedTargetIds=n,this.key=s,this.De=o}}class Vb{constructor(e,n){this.targetId=e,this.Ce=n}}class kb{constructor(e,n,s=an.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=n,this.resumeToken=s,this.cause=o}}class oE{constructor(){this.ve=0,this.Fe=lE(),this.Me=an.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Fe(),n=Fe(),s=Fe();return this.Fe.forEach(((o,u)=>{switch(u){case 0:e=e.add(o);break;case 2:n=n.add(o);break;case 1:s=s.add(o);break;default:Ae(38017,{changeType:u})}})),new bu(this.Me,this.xe,e,n,s)}qe(){this.Oe=!1,this.Fe=lE()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,$e(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class kI{constructor(e){this.Ge=e,this.ze=new Map,this.je=Rr(),this.Je=hh(),this.He=hh(),this.Ye=new gt(He)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,(n=>{const s=this.nt(n);switch(e.state){case 0:this.rt(n)&&s.Le(e.resumeToken);break;case 1:s.Ke(),s.Ne||s.qe(),s.Le(e.resumeToken);break;case 2:s.Ke(),s.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(s.We(),s.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),s.Le(e.resumeToken));break;default:Ae(56790,{state:e.state})}}))}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach(((s,o)=>{this.rt(o)&&n(o)}))}st(e){const n=e.targetId,s=e.Ce.count,o=this.ot(n);if(o){const u=o.target;if(sp(u))if(s===0){const f=new Ee(u.path);this.et(n,f,Yt.newNoDocument(f,xe.min()))}else $e(s===1,20013,{expectedCount:s});else{const f=this._t(n);if(f!==s){const m=this.ut(e),p=m?this.ct(m,e,f):1;if(p!==0){this.it(n);const g=p===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,g)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:s="",padding:o=0},hashCount:u=0}=n;let f,m;try{f=Ts(s).toUint8Array()}catch(p){if(p instanceof nb)return _o("Decoding the base64 bloom filter in existence filter failed ("+p.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw p}try{m=new $p(f,o,u)}catch(p){return _o(p instanceof Gl?"BloomFilter error: ":"Applying bloom filter failed: ",p),null}return m.ge===0?null:m}ct(e,n,s){return n.Ce.count===s-this.Pt(e,n.targetId)?0:2}Pt(e,n){const s=this.Ge.getRemoteKeysForTarget(n);let o=0;return s.forEach((u=>{const f=this.Ge.ht(),m=`projects/${f.projectId}/databases/${f.database}/documents/${u.path.canonicalString()}`;e.mightContain(m)||(this.et(n,u,null),o++)})),o}Tt(e){const n=new Map;this.ze.forEach(((u,f)=>{const m=this.ot(f);if(m){if(u.current&&sp(m.target)){const p=new Ee(m.target.path);this.It(p).has(f)||this.Et(f,p)||this.et(f,p,Yt.newNoDocument(p,e))}u.Be&&(n.set(f,u.ke()),u.qe())}}));let s=Fe();this.He.forEach(((u,f)=>{let m=!0;f.forEachWhile((p=>{const g=this.ot(p);return!g||g.purpose==="TargetPurposeLimboResolution"||(m=!1,!1)})),m&&(s=s.add(u))})),this.je.forEach(((u,f)=>f.setReadTime(e)));const o=new hf(e,n,this.Ye,this.je,s);return this.je=Rr(),this.Je=hh(),this.He=hh(),this.Ye=new gt(He),o}Xe(e,n){if(!this.rt(e))return;const s=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,s),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,s){if(!this.rt(e))return;const o=this.nt(e);this.Et(e,n)?o.Qe(n,1):o.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),s&&(this.je=this.je.insert(n,s))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new oE,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new Ht(He),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new Ht(He),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||ge("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new oE),this.Ge.getRemoteKeysForTarget(e).forEach((n=>{this.et(e,n,null)}))}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function hh(){return new gt(Ee.comparator)}function lE(){return new gt(Ee.comparator)}const PI={asc:"ASCENDING",desc:"DESCENDING"},LI={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},jI={and:"AND",or:"OR"};class UI{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function lp(r,e){return r.useProto3Json||_u(e)?e:{value:e}}function Bh(r,e){return r.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Pb(r,e){return r.useProto3Json?e.toBase64():e.toUint8Array()}function zI(r,e){return Bh(r,e.toTimestamp())}function qn(r){return $e(!!r,49232),xe.fromTimestamp((function(n){const s=Es(n);return new ht(s.seconds,s.nanos)})(r))}function Yp(r,e){return up(r,e).canonicalString()}function up(r,e){const n=(function(o){return new ot(["projects",o.projectId,"databases",o.database])})(r).child("documents");return e===void 0?n:n.child(e)}function Lb(r){const e=ot.fromString(r);return $e(Hb(e),10190,{key:e.toString()}),e}function qh(r,e){return Yp(r.databaseId,e.path)}function Zl(r,e){const n=Lb(e);if(n.get(1)!==r.databaseId.projectId)throw new me(ne.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+r.databaseId.projectId);if(n.get(3)!==r.databaseId.database)throw new me(ne.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+r.databaseId.database);return new Ee(Ub(n))}function jb(r,e){return Yp(r.databaseId,e)}function BI(r){const e=Lb(r);return e.length===4?ot.emptyPath():Ub(e)}function cp(r){return new ot(["projects",r.databaseId.projectId,"databases",r.databaseId.database]).canonicalString()}function Ub(r){return $e(r.length>4&&r.get(4)==="documents",29091,{key:r.toString()}),r.popFirst(5)}function uE(r,e,n){return{name:qh(r,e),fields:n.value.mapValue.fields}}function qI(r,e){return"found"in e?(function(s,o){$e(!!o.found,43571),o.found.name,o.found.updateTime;const u=Zl(s,o.found.name),f=qn(o.found.updateTime),m=o.found.createTime?qn(o.found.createTime):xe.min(),p=new vn({mapValue:{fields:o.found.fields}});return Yt.newFoundDocument(u,f,m,p)})(r,e):"missing"in e?(function(s,o){$e(!!o.missing,3894),$e(!!o.readTime,22933);const u=Zl(s,o.missing),f=qn(o.readTime);return Yt.newNoDocument(u,f)})(r,e):Ae(7234,{result:e})}function HI(r,e){let n;if("targetChange"in e){e.targetChange;const s=(function(g){return g==="NO_CHANGE"?0:g==="ADD"?1:g==="REMOVE"?2:g==="CURRENT"?3:g==="RESET"?4:Ae(39313,{state:g})})(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],u=(function(g,E){return g.useProto3Json?($e(E===void 0||typeof E=="string",58123),an.fromBase64String(E||"")):($e(E===void 0||E instanceof Buffer||E instanceof Uint8Array,16193),an.fromUint8Array(E||new Uint8Array))})(r,e.targetChange.resumeToken),f=e.targetChange.cause,m=f&&(function(g){const E=g.code===void 0?ne.UNKNOWN:Mb(g.code);return new me(E,g.message||"")})(f);n=new kb(s,o,u,m||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const o=Zl(r,s.document.name),u=qn(s.document.updateTime),f=s.document.createTime?qn(s.document.createTime):xe.min(),m=new vn({mapValue:{fields:s.document.fields}}),p=Yt.newFoundDocument(o,u,f,m),g=s.targetIds||[],E=s.removedTargetIds||[];n=new Ah(g,E,p.key,p)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const o=Zl(r,s.document),u=s.readTime?qn(s.readTime):xe.min(),f=Yt.newNoDocument(o,u),m=s.removedTargetIds||[];n=new Ah([],m,f.key,f)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const o=Zl(r,s.document),u=s.removedTargetIds||[];n=new Ah([],u,o,null)}else{if(!("filter"in e))return Ae(11601,{Rt:e});{e.filter;const s=e.filter;s.targetId;const{count:o=0,unchangedNames:u}=s,f=new OI(o,u),m=s.targetId;n=new Vb(m,f)}}return n}function zb(r,e){let n;if(e instanceof Tu)n={update:uE(r,e.key,e.value)};else if(e instanceof cf)n={delete:qh(r,e.key)};else if(e instanceof Cs)n={update:uE(r,e.key,e.data),updateMask:JI(e.fieldMask)};else{if(!(e instanceof Nb))return Ae(16599,{Vt:e.type});n={verify:qh(r,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((s=>(function(u,f){const m=f.transform;if(m instanceof ou)return{fieldPath:f.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(m instanceof lu)return{fieldPath:f.field.canonicalString(),appendMissingElements:{values:m.elements}};if(m instanceof uu)return{fieldPath:f.field.canonicalString(),removeAllFromArray:{values:m.elements}};if(m instanceof cu)return{fieldPath:f.field.canonicalString(),increment:m.Ae};throw Ae(20930,{transform:f.transform})})(0,s)))),e.precondition.isNone||(n.currentDocument=(function(o,u){return u.updateTime!==void 0?{updateTime:zI(o,u.updateTime)}:u.exists!==void 0?{exists:u.exists}:Ae(27497)})(r,e.precondition)),n}function FI(r,e){return r&&r.length>0?($e(e!==void 0,14353),r.map((n=>(function(o,u){let f=o.updateTime?qn(o.updateTime):qn(u);return f.isEqual(xe.min())&&(f=qn(u)),new CI(f,o.transformResults||[])})(n,e)))):[]}function GI(r,e){return{documents:[jb(r,e.path)]}}function QI(r,e){const n={structuredQuery:{}},s=e.path;let o;e.collectionGroup!==null?(o=s,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=s.popLast(),n.structuredQuery.from=[{collectionId:s.lastSegment()}]),n.parent=jb(r,o);const u=(function(g){if(g.length!==0)return qb(Ei.create(g,"and"))})(e.filters);u&&(n.structuredQuery.where=u);const f=(function(g){if(g.length!==0)return g.map((E=>(function(C){return{field:lo(C.field),direction:KI(C.dir)}})(E)))})(e.orderBy);f&&(n.structuredQuery.orderBy=f);const m=lp(r,e.limit);return m!==null&&(n.structuredQuery.limit=m),e.startAt&&(n.structuredQuery.startAt=(function(g){return{before:g.inclusive,values:g.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(g){return{before:!g.inclusive,values:g.position}})(e.endAt)),{ft:n,parent:o}}function $I(r){let e=BI(r.parent);const n=r.structuredQuery,s=n.from?n.from.length:0;let o=null;if(s>0){$e(s===1,65062);const E=n.from[0];E.allDescendants?o=E.collectionId:e=e.child(E.collectionId)}let u=[];n.where&&(u=(function(T){const C=Bb(T);return C instanceof Ei&&fb(C)?C.getFilters():[C]})(n.where));let f=[];n.orderBy&&(f=(function(T){return T.map((C=>(function(L){return new zh(uo(L.field),(function(z){switch(z){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(L.direction))})(C)))})(n.orderBy));let m=null;n.limit&&(m=(function(T){let C;return C=typeof T=="object"?T.value:T,_u(C)?null:C})(n.limit));let p=null;n.startAt&&(p=(function(T){const C=!!T.before,O=T.values||[];return new Uh(O,C)})(n.startAt));let g=null;return n.endAt&&(g=(function(T){const C=!T.before,O=T.values||[];return new Uh(O,C)})(n.endAt)),pI(e,o,f,u,m,"F",p,g)}function YI(r,e){const n=(function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ae(28987,{purpose:o})}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function Bb(r){return r.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const s=uo(n.unaryFilter.field);return jt.create(s,"==",{doubleValue:NaN});case"IS_NULL":const o=uo(n.unaryFilter.field);return jt.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const u=uo(n.unaryFilter.field);return jt.create(u,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const f=uo(n.unaryFilter.field);return jt.create(f,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Ae(61313);default:return Ae(60726)}})(r):r.fieldFilter!==void 0?(function(n){return jt.create(uo(n.fieldFilter.field),(function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Ae(58110);default:return Ae(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(r):r.compositeFilter!==void 0?(function(n){return Ei.create(n.compositeFilter.filters.map((s=>Bb(s))),(function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return Ae(1026)}})(n.compositeFilter.op))})(r):Ae(30097,{filter:r})}function KI(r){return PI[r]}function XI(r){return LI[r]}function WI(r){return jI[r]}function lo(r){return{fieldPath:r.canonicalString()}}function uo(r){return rn.fromServerFormat(r.fieldPath)}function qb(r){return r instanceof jt?(function(n){if(n.op==="=="){if(X0(n.value))return{unaryFilter:{field:lo(n.field),op:"IS_NAN"}};if(K0(n.value))return{unaryFilter:{field:lo(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(X0(n.value))return{unaryFilter:{field:lo(n.field),op:"IS_NOT_NAN"}};if(K0(n.value))return{unaryFilter:{field:lo(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:lo(n.field),op:XI(n.op),value:n.value}}})(r):r instanceof Ei?(function(n){const s=n.getFilters().map((o=>qb(o)));return s.length===1?s[0]:{compositeFilter:{op:WI(n.op),filters:s}}})(r):Ae(54877,{filter:r})}function JI(r){const e=[];return r.fields.forEach((n=>e.push(n.canonicalString()))),{fieldPaths:e}}function Hb(r){return r.length>=4&&r.get(0)==="projects"&&r.get(2)==="databases"}class hs{constructor(e,n,s,o,u=xe.min(),f=xe.min(),m=an.EMPTY_BYTE_STRING,p=null){this.target=e,this.targetId=n,this.purpose=s,this.sequenceNumber=o,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=f,this.resumeToken=m,this.expectedCount=p}withSequenceNumber(e){return new hs(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new hs(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new hs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new hs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class ZI{constructor(e){this.yt=e}}function eD(r){const e=$I({parent:r.parent,structuredQuery:r.structuredQuery});return r.limitType==="LAST"?op(e,e.limit,"L"):e}class tD{constructor(){this.Cn=new nD}addToCollectionParentIndex(e,n){return this.Cn.add(n),ae.resolve()}getCollectionParents(e,n){return ae.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return ae.resolve()}deleteFieldIndex(e,n){return ae.resolve()}deleteAllFieldIndexes(e){return ae.resolve()}createTargetIndexes(e,n){return ae.resolve()}getDocumentsMatchingTarget(e,n){return ae.resolve(null)}getIndexType(e,n){return ae.resolve(0)}getFieldIndexes(e,n){return ae.resolve([])}getNextCollectionGroupToUpdate(e){return ae.resolve(null)}getMinOffset(e,n){return ae.resolve(_s.min())}getMinOffsetFromCollectionGroup(e,n){return ae.resolve(_s.min())}updateCollectionGroup(e,n,s){return ae.resolve()}updateIndexEntries(e,n){return ae.resolve()}}class nD{constructor(){this.index={}}add(e){const n=e.lastSegment(),s=e.popLast(),o=this.index[n]||new Ht(ot.comparator),u=!o.has(s);return this.index[n]=o.add(s),u}has(e){const n=e.lastSegment(),s=e.popLast(),o=this.index[n];return o&&o.has(s)}getEntries(e){return(this.index[e]||new Ht(ot.comparator)).toArray()}}const cE={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Fb=41943040;class Cn{static withCacheSize(e){return new Cn(e,Cn.DEFAULT_COLLECTION_PERCENTILE,Cn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=s}}Cn.DEFAULT_COLLECTION_PERCENTILE=10,Cn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Cn.DEFAULT=new Cn(Fb,Cn.DEFAULT_COLLECTION_PERCENTILE,Cn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Cn.DISABLED=new Cn(-1,0,0);class So{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new So(0)}static cr(){return new So(-1)}}const hE="LruGarbageCollector",iD=1048576;function fE([r,e],[n,s]){const o=He(r,n);return o===0?He(e,s):o}class rD{constructor(e){this.Ir=e,this.buffer=new Ht(fE),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const s=this.buffer.last();fE(n,s)<0&&(this.buffer=this.buffer.delete(s).add(n))}}get maxValue(){return this.buffer.last()[0]}}class sD{constructor(e,n,s){this.garbageCollector=e,this.asyncQueue=n,this.localStore=s,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){ge(hE,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){ko(n)?ge(hE,"Ignoring IndexedDB error during garbage collection: ",n):await Vo(n)}await this.Vr(3e5)}))}}class aD{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next((s=>Math.floor(n/100*s)))}nthSequenceNumber(e,n){if(n===0)return ae.resolve(nf.ce);const s=new rD(n);return this.mr.forEachTarget(e,(o=>s.Ar(o.sequenceNumber))).next((()=>this.mr.pr(e,(o=>s.Ar(o))))).next((()=>s.maxValue))}removeTargets(e,n,s){return this.mr.removeTargets(e,n,s)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(ge("LruGarbageCollector","Garbage collection skipped; disabled"),ae.resolve(cE)):this.getCacheSize(e).next((s=>s<this.params.cacheSizeCollectionThreshold?(ge("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),cE):this.yr(e,n)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let s,o,u,f,m,p,g;const E=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((T=>(T>this.params.maximumSequenceNumbersToCollect?(ge("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${T}`),o=this.params.maximumSequenceNumbersToCollect):o=T,f=Date.now(),this.nthSequenceNumber(e,o)))).next((T=>(s=T,m=Date.now(),this.removeTargets(e,s,n)))).next((T=>(u=T,p=Date.now(),this.removeOrphanedDocuments(e,s)))).next((T=>(g=Date.now(),ao()<=Be.DEBUG&&ge("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${f-E}ms
	Determined least recently used ${o} in `+(m-f)+`ms
	Removed ${u} targets in `+(p-m)+`ms
	Removed ${T} documents in `+(g-p)+`ms
Total Duration: ${g-E}ms`),ae.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:u,documentsRemoved:T}))))}}function oD(r,e){return new aD(r,e)}class lD{constructor(){this.changes=new ma((e=>e.toString()),((e,n)=>e.isEqual(n))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Yt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const s=this.changes.get(n);return s!==void 0?ae.resolve(s):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class uD{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}class cD{constructor(e,n,s,o){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=s,this.indexManager=o}getDocument(e,n){let s=null;return this.documentOverlayCache.getOverlay(e,n).next((o=>(s=o,this.remoteDocumentCache.getEntry(e,n)))).next((o=>(s!==null&&Jl(s.mutation,o,Bn.empty(),ht.now()),o)))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next((s=>this.getLocalViewOfDocuments(e,s,Fe()).next((()=>s))))}getLocalViewOfDocuments(e,n,s=Fe()){const o=sa();return this.populateOverlays(e,o,n).next((()=>this.computeViews(e,n,o,s).next((u=>{let f=Fl();return u.forEach(((m,p)=>{f=f.insert(m,p.overlayedDocument)})),f}))))}getOverlayedDocuments(e,n){const s=sa();return this.populateOverlays(e,s,n).next((()=>this.computeViews(e,n,s,Fe())))}populateOverlays(e,n,s){const o=[];return s.forEach((u=>{n.has(u)||o.push(u)})),this.documentOverlayCache.getOverlays(e,o).next((u=>{u.forEach(((f,m)=>{n.set(f,m)}))}))}computeViews(e,n,s,o){let u=Rr();const f=Wl(),m=(function(){return Wl()})();return n.forEach(((p,g)=>{const E=s.get(g.key);o.has(g.key)&&(E===void 0||E.mutation instanceof Cs)?u=u.insert(g.key,g):E!==void 0?(f.set(g.key,E.mutation.getFieldMask()),Jl(E.mutation,g,E.mutation.getFieldMask(),ht.now())):f.set(g.key,Bn.empty())})),this.recalculateAndSaveOverlays(e,u).next((p=>(p.forEach(((g,E)=>f.set(g,E))),n.forEach(((g,E)=>m.set(g,new uD(E,f.get(g)??null)))),m)))}recalculateAndSaveOverlays(e,n){const s=Wl();let o=new gt(((f,m)=>f-m)),u=Fe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next((f=>{for(const m of f)m.keys().forEach((p=>{const g=n.get(p);if(g===null)return;let E=s.get(p)||Bn.empty();E=m.applyToLocalView(g,E),s.set(p,E);const T=(o.get(m.batchId)||Fe()).add(p);o=o.insert(m.batchId,T)}))})).next((()=>{const f=[],m=o.getReverseIterator();for(;m.hasNext();){const p=m.getNext(),g=p.key,E=p.value,T=Tb();E.forEach((C=>{if(!u.has(C)){const O=Ib(n.get(C),s.get(C));O!==null&&T.set(C,O),u=u.add(C)}})),f.push(this.documentOverlayCache.saveOverlays(e,g,T))}return ae.waitFor(f)})).next((()=>s))}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next((s=>this.recalculateAndSaveOverlays(e,s)))}getDocumentsMatchingQuery(e,n,s,o){return(function(f){return Ee.isDocumentKey(f.path)&&f.collectionGroup===null&&f.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):gb(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,s,o):this.getDocumentsMatchingCollectionQuery(e,n,s,o)}getNextDocuments(e,n,s,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,s,o).next((u=>{const f=o-u.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,s.largestBatchId,o-u.size):ae.resolve(sa());let m=iu,p=u;return f.next((g=>ae.forEach(g,((E,T)=>(m<T.largestBatchId&&(m=T.largestBatchId),u.get(E)?ae.resolve():this.remoteDocumentCache.getEntry(e,E).next((C=>{p=p.insert(E,C)}))))).next((()=>this.populateOverlays(e,g,u))).next((()=>this.computeViews(e,p,g,Fe()))).next((E=>({batchId:m,changes:Eb(E)})))))}))}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Ee(n)).next((s=>{let o=Fl();return s.isFoundDocument()&&(o=o.insert(s.key,s)),o}))}getDocumentsMatchingCollectionGroupQuery(e,n,s,o){const u=n.collectionGroup;let f=Fl();return this.indexManager.getCollectionParents(e,u).next((m=>ae.forEach(m,(p=>{const g=(function(T,C){return new Eu(C,null,T.explicitOrderBy.slice(),T.filters.slice(),T.limit,T.limitType,T.startAt,T.endAt)})(n,p.child(u));return this.getDocumentsMatchingCollectionQuery(e,g,s,o).next((E=>{E.forEach(((T,C)=>{f=f.insert(T,C)}))}))})).next((()=>f))))}getDocumentsMatchingCollectionQuery(e,n,s,o){let u;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,s.largestBatchId).next((f=>(u=f,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,s,u,o)))).next((f=>{u.forEach(((p,g)=>{const E=g.getKey();f.get(E)===null&&(f=f.insert(E,Yt.newInvalidDocument(E)))}));let m=Fl();return f.forEach(((p,g)=>{const E=u.get(p);E!==void 0&&Jl(E.mutation,g,Bn.empty(),ht.now()),of(n,g)&&(m=m.insert(p,g))})),m}))}}class hD{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return ae.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,(function(o){return{id:o.id,version:o.version,createTime:qn(o.createTime)}})(n)),ae.resolve()}getNamedQuery(e,n){return ae.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,(function(o){return{name:o.name,query:eD(o.bundledQuery),readTime:qn(o.readTime)}})(n)),ae.resolve()}}class fD{constructor(){this.overlays=new gt(Ee.comparator),this.qr=new Map}getOverlay(e,n){return ae.resolve(this.overlays.get(n))}getOverlays(e,n){const s=sa();return ae.forEach(n,(o=>this.getOverlay(e,o).next((u=>{u!==null&&s.set(o,u)})))).next((()=>s))}saveOverlays(e,n,s){return s.forEach(((o,u)=>{this.St(e,n,u)})),ae.resolve()}removeOverlaysForBatchId(e,n,s){const o=this.qr.get(s);return o!==void 0&&(o.forEach((u=>this.overlays=this.overlays.remove(u))),this.qr.delete(s)),ae.resolve()}getOverlaysForCollection(e,n,s){const o=sa(),u=n.length+1,f=new Ee(n.child("")),m=this.overlays.getIteratorFrom(f);for(;m.hasNext();){const p=m.getNext().value,g=p.getKey();if(!n.isPrefixOf(g.path))break;g.path.length===u&&p.largestBatchId>s&&o.set(p.getKey(),p)}return ae.resolve(o)}getOverlaysForCollectionGroup(e,n,s,o){let u=new gt(((g,E)=>g-E));const f=this.overlays.getIterator();for(;f.hasNext();){const g=f.getNext().value;if(g.getKey().getCollectionGroup()===n&&g.largestBatchId>s){let E=u.get(g.largestBatchId);E===null&&(E=sa(),u=u.insert(g.largestBatchId,E)),E.set(g.getKey(),g)}}const m=sa(),p=u.getIterator();for(;p.hasNext()&&(p.getNext().value.forEach(((g,E)=>m.set(g,E))),!(m.size()>=o)););return ae.resolve(m)}St(e,n,s){const o=this.overlays.get(s.key);if(o!==null){const f=this.qr.get(o.largestBatchId).delete(s.key);this.qr.set(o.largestBatchId,f)}this.overlays=this.overlays.insert(s.key,new NI(n,s));let u=this.qr.get(n);u===void 0&&(u=Fe(),this.qr.set(n,u)),this.qr.set(n,u.add(s.key))}}class dD{constructor(){this.sessionToken=an.EMPTY_BYTE_STRING}getSessionToken(e){return ae.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,ae.resolve()}}class Kp{constructor(){this.Qr=new Ht($t.$r),this.Ur=new Ht($t.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const s=new $t(e,n);this.Qr=this.Qr.add(s),this.Ur=this.Ur.add(s)}Wr(e,n){e.forEach((s=>this.addReference(s,n)))}removeReference(e,n){this.Gr(new $t(e,n))}zr(e,n){e.forEach((s=>this.removeReference(s,n)))}jr(e){const n=new Ee(new ot([])),s=new $t(n,e),o=new $t(n,e+1),u=[];return this.Ur.forEachInRange([s,o],(f=>{this.Gr(f),u.push(f.key)})),u}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new Ee(new ot([])),s=new $t(n,e),o=new $t(n,e+1);let u=Fe();return this.Ur.forEachInRange([s,o],(f=>{u=u.add(f.key)})),u}containsKey(e){const n=new $t(e,0),s=this.Qr.firstAfterOrEqual(n);return s!==null&&e.isEqual(s.key)}}class $t{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return Ee.comparator(e.key,n.key)||He(e.Yr,n.Yr)}static Kr(e,n){return He(e.Yr,n.Yr)||Ee.comparator(e.key,n.key)}}class mD{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new Ht($t.$r)}checkEmpty(e){return ae.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,s,o){const u=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const f=new DI(u,n,s,o);this.mutationQueue.push(f);for(const m of o)this.Zr=this.Zr.add(new $t(m.key,u)),this.indexManager.addToCollectionParentIndex(e,m.key.path.popLast());return ae.resolve(f)}lookupMutationBatch(e,n){return ae.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const s=n+1,o=this.ei(s),u=o<0?0:o;return ae.resolve(this.mutationQueue.length>u?this.mutationQueue[u]:null)}getHighestUnacknowledgedBatchId(){return ae.resolve(this.mutationQueue.length===0?zp:this.tr-1)}getAllMutationBatches(e){return ae.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const s=new $t(n,0),o=new $t(n,Number.POSITIVE_INFINITY),u=[];return this.Zr.forEachInRange([s,o],(f=>{const m=this.Xr(f.Yr);u.push(m)})),ae.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,n){let s=new Ht(He);return n.forEach((o=>{const u=new $t(o,0),f=new $t(o,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([u,f],(m=>{s=s.add(m.Yr)}))})),ae.resolve(this.ti(s))}getAllMutationBatchesAffectingQuery(e,n){const s=n.path,o=s.length+1;let u=s;Ee.isDocumentKey(u)||(u=u.child(""));const f=new $t(new Ee(u),0);let m=new Ht(He);return this.Zr.forEachWhile((p=>{const g=p.key.path;return!!s.isPrefixOf(g)&&(g.length===o&&(m=m.add(p.Yr)),!0)}),f),ae.resolve(this.ti(m))}ti(e){const n=[];return e.forEach((s=>{const o=this.Xr(s);o!==null&&n.push(o)})),n}removeMutationBatch(e,n){$e(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Zr;return ae.forEach(n.mutations,(o=>{const u=new $t(o.key,n.batchId);return s=s.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)})).next((()=>{this.Zr=s}))}ir(e){}containsKey(e,n){const s=new $t(n,0),o=this.Zr.firstAfterOrEqual(s);return ae.resolve(n.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,ae.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}class pD{constructor(e){this.ri=e,this.docs=(function(){return new gt(Ee.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const s=n.key,o=this.docs.get(s),u=o?o.size:0,f=this.ri(n);return this.docs=this.docs.insert(s,{document:n.mutableCopy(),size:f}),this.size+=f-u,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const s=this.docs.get(n);return ae.resolve(s?s.document.mutableCopy():Yt.newInvalidDocument(n))}getEntries(e,n){let s=Rr();return n.forEach((o=>{const u=this.docs.get(o);s=s.insert(o,u?u.document.mutableCopy():Yt.newInvalidDocument(o))})),ae.resolve(s)}getDocumentsMatchingQuery(e,n,s,o){let u=Rr();const f=n.path,m=new Ee(f.child("__id-9223372036854775808__")),p=this.docs.getIteratorFrom(m);for(;p.hasNext();){const{key:g,value:{document:E}}=p.getNext();if(!f.isPrefixOf(g.path))break;g.path.length>f.length+1||$2(Q2(E),s)<=0||(o.has(E.key)||of(n,E))&&(u=u.insert(E.key,E.mutableCopy()))}return ae.resolve(u)}getAllFromCollectionGroup(e,n,s,o){Ae(9500)}ii(e,n){return ae.forEach(this.docs,(s=>n(s)))}newChangeBuffer(e){return new gD(this)}getSize(e){return ae.resolve(this.size)}}class gD extends lD{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach(((s,o)=>{o.isValidDocument()?n.push(this.Nr.addEntry(e,o)):this.Nr.removeEntry(s)})),ae.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}class yD{constructor(e){this.persistence=e,this.si=new ma((n=>Hp(n)),Fp),this.lastRemoteSnapshotVersion=xe.min(),this.highestTargetId=0,this.oi=0,this._i=new Kp,this.targetCount=0,this.ai=So.ur()}forEachTarget(e,n){return this.si.forEach(((s,o)=>n(o))),ae.resolve()}getLastRemoteSnapshotVersion(e){return ae.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ae.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),ae.resolve(this.highestTargetId)}setTargetsMetadata(e,n,s){return s&&(this.lastRemoteSnapshotVersion=s),n>this.oi&&(this.oi=n),ae.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new So(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,ae.resolve()}updateTargetData(e,n){return this.Pr(n),ae.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,ae.resolve()}removeTargets(e,n,s){let o=0;const u=[];return this.si.forEach(((f,m)=>{m.sequenceNumber<=n&&s.get(m.targetId)===null&&(this.si.delete(f),u.push(this.removeMatchingKeysForTargetId(e,m.targetId)),o++)})),ae.waitFor(u).next((()=>o))}getTargetCount(e){return ae.resolve(this.targetCount)}getTargetData(e,n){const s=this.si.get(n)||null;return ae.resolve(s)}addMatchingKeys(e,n,s){return this._i.Wr(n,s),ae.resolve()}removeMatchingKeys(e,n,s){this._i.zr(n,s);const o=this.persistence.referenceDelegate,u=[];return o&&n.forEach((f=>{u.push(o.markPotentiallyOrphaned(e,f))})),ae.waitFor(u)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),ae.resolve()}getMatchingKeysForTargetId(e,n){const s=this._i.Hr(n);return ae.resolve(s)}containsKey(e,n){return ae.resolve(this._i.containsKey(n))}}class Gb{constructor(e,n){this.ui={},this.overlays={},this.ci=new nf(0),this.li=!1,this.li=!0,this.hi=new dD,this.referenceDelegate=e(this),this.Pi=new yD(this),this.indexManager=new tD,this.remoteDocumentCache=(function(o){return new pD(o)})((s=>this.referenceDelegate.Ti(s))),this.serializer=new ZI(n),this.Ii=new hD(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new fD,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let s=this.ui[e.toKey()];return s||(s=new mD(n,this.referenceDelegate),this.ui[e.toKey()]=s),s}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,s){ge("MemoryPersistence","Starting transaction:",e);const o=new vD(this.ci.next());return this.referenceDelegate.Ei(),s(o).next((u=>this.referenceDelegate.di(o).next((()=>u)))).toPromise().then((u=>(o.raiseOnCommittedEvent(),u)))}Ai(e,n){return ae.or(Object.values(this.ui).map((s=>()=>s.containsKey(e,n))))}}class vD extends K2{constructor(e){super(),this.currentSequenceNumber=e}}class Xp{constructor(e){this.persistence=e,this.Ri=new Kp,this.Vi=null}static mi(e){return new Xp(e)}get fi(){if(this.Vi)return this.Vi;throw Ae(60996)}addReference(e,n,s){return this.Ri.addReference(s,n),this.fi.delete(s.toString()),ae.resolve()}removeReference(e,n,s){return this.Ri.removeReference(s,n),this.fi.add(s.toString()),ae.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),ae.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach((o=>this.fi.add(o.toString())));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,n.targetId).next((o=>{o.forEach((u=>this.fi.add(u.toString())))})).next((()=>s.removeTargetData(e,n)))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ae.forEach(this.fi,(s=>{const o=Ee.fromPath(s);return this.gi(e,o).next((u=>{u||n.removeEntry(o,xe.min())}))})).next((()=>(this.Vi=null,n.apply(e))))}updateLimboDocument(e,n){return this.gi(e,n).next((s=>{s?this.fi.delete(n.toString()):this.fi.add(n.toString())}))}Ti(e){return 0}gi(e,n){return ae.or([()=>ae.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class Hh{constructor(e,n){this.persistence=e,this.pi=new ma((s=>J2(s.path)),((s,o)=>s.isEqual(o))),this.garbageCollector=oD(this,n)}static mi(e,n){return new Hh(e,n)}Ei(){}di(e){return ae.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((s=>n.next((o=>s+o))))}wr(e){let n=0;return this.pr(e,(s=>{n++})).next((()=>n))}pr(e,n){return ae.forEach(this.pi,((s,o)=>this.br(e,s,o).next((u=>u?ae.resolve():n(o)))))}removeTargets(e,n,s){return this.persistence.getTargetCache().removeTargets(e,n,s)}removeOrphanedDocuments(e,n){let s=0;const o=this.persistence.getRemoteDocumentCache(),u=o.newChangeBuffer();return o.ii(e,(f=>this.br(e,f,n).next((m=>{m||(s++,u.removeEntry(f,xe.min()))})))).next((()=>u.apply(e))).next((()=>s))}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),ae.resolve()}removeTarget(e,n){const s=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,s)}addReference(e,n,s){return this.pi.set(s,e.currentSequenceNumber),ae.resolve()}removeReference(e,n,s){return this.pi.set(s,e.currentSequenceNumber),ae.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),ae.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Th(e.data.value)),n}br(e,n,s){return ae.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const o=this.pi.get(n);return ae.resolve(o!==void 0&&o>s)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class Wp{constructor(e,n,s,o){this.targetId=e,this.fromCache=n,this.Es=s,this.ds=o}static As(e,n){let s=Fe(),o=Fe();for(const u of n.docChanges)switch(u.type){case 0:s=s.add(u.doc.key);break;case 1:o=o.add(u.doc.key)}return new Wp(e,n.fromCache,s,o)}}class _D{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class ED{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return dR()?8:X2(dn())>0?6:4})()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,s,o){const u={result:null};return this.ys(e,n).next((f=>{u.result=f})).next((()=>{if(!u.result)return this.ws(e,n,o,s).next((f=>{u.result=f}))})).next((()=>{if(u.result)return;const f=new _D;return this.Ss(e,n,f).next((m=>{if(u.result=m,this.Vs)return this.bs(e,n,f,m.size)}))})).next((()=>u.result))}bs(e,n,s,o){return s.documentReadCount<this.fs?(ao()<=Be.DEBUG&&ge("QueryEngine","SDK will not create cache indexes for query:",oo(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),ae.resolve()):(ao()<=Be.DEBUG&&ge("QueryEngine","Query:",oo(n),"scans",s.documentReadCount,"local documents and returns",o,"documents as results."),s.documentReadCount>this.gs*o?(ao()<=Be.DEBUG&&ge("QueryEngine","The SDK decides to create cache indexes for query:",oo(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Qi(n))):ae.resolve())}ys(e,n){if(eE(n))return ae.resolve(null);let s=Qi(n);return this.indexManager.getIndexType(e,s).next((o=>o===0?null:(n.limit!==null&&o===1&&(n=op(n,null,"F"),s=Qi(n)),this.indexManager.getDocumentsMatchingTarget(e,s).next((u=>{const f=Fe(...u);return this.ps.getDocuments(e,f).next((m=>this.indexManager.getMinOffset(e,s).next((p=>{const g=this.Ds(n,m);return this.Cs(n,g,f,p.readTime)?this.ys(e,op(n,null,"F")):this.vs(e,g,n,p)}))))})))))}ws(e,n,s,o){return eE(n)||o.isEqual(xe.min())?ae.resolve(null):this.ps.getDocuments(e,s).next((u=>{const f=this.Ds(n,u);return this.Cs(n,f,s,o)?ae.resolve(null):(ao()<=Be.DEBUG&&ge("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),oo(n)),this.vs(e,f,n,G2(o,iu)).next((m=>m)))}))}Ds(e,n){let s=new Ht(vb(e));return n.forEach(((o,u)=>{of(e,u)&&(s=s.add(u))})),s}Cs(e,n,s,o){if(e.limit===null)return!1;if(s.size!==n.size)return!0;const u=e.limitType==="F"?n.last():n.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(o)>0)}Ss(e,n,s){return ao()<=Be.DEBUG&&ge("QueryEngine","Using full collection scan to execute query:",oo(n)),this.ps.getDocumentsMatchingQuery(e,n,_s.min(),s)}vs(e,n,s,o){return this.ps.getDocumentsMatchingQuery(e,s,o).next((u=>(n.forEach((f=>{u=u.insert(f.key,f)})),u)))}}const Jp="LocalStore",TD=3e8;class bD{constructor(e,n,s,o){this.persistence=e,this.Fs=n,this.serializer=o,this.Ms=new gt(He),this.xs=new ma((u=>Hp(u)),Fp),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(s)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new cD(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>e.collect(n,this.Ms)))}}function SD(r,e,n,s){return new bD(r,e,n,s)}async function Qb(r,e){const n=De(r);return await n.persistence.runTransaction("Handle user change","readonly",(s=>{let o;return n.mutationQueue.getAllMutationBatches(s).next((u=>(o=u,n.Bs(e),n.mutationQueue.getAllMutationBatches(s)))).next((u=>{const f=[],m=[];let p=Fe();for(const g of o){f.push(g.batchId);for(const E of g.mutations)p=p.add(E.key)}for(const g of u){m.push(g.batchId);for(const E of g.mutations)p=p.add(E.key)}return n.localDocuments.getDocuments(s,p).next((g=>({Ls:g,removedBatchIds:f,addedBatchIds:m})))}))}))}function AD(r,e){const n=De(r);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(s=>{const o=e.batch.keys(),u=n.Ns.newChangeBuffer({trackRemovals:!0});return(function(m,p,g,E){const T=g.batch,C=T.keys();let O=ae.resolve();return C.forEach((L=>{O=O.next((()=>E.getEntry(p,L))).next((q=>{const z=g.docVersions.get(L);$e(z!==null,48541),q.version.compareTo(z)<0&&(T.applyToRemoteDocument(q,g),q.isValidDocument()&&(q.setReadTime(g.commitVersion),E.addEntry(q)))}))})),O.next((()=>m.mutationQueue.removeMutationBatch(p,T)))})(n,s,e,u).next((()=>u.apply(s))).next((()=>n.mutationQueue.performConsistencyCheck(s))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(s,o,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,(function(m){let p=Fe();for(let g=0;g<m.mutationResults.length;++g)m.mutationResults[g].transformResults.length>0&&(p=p.add(m.batch.mutations[g].key));return p})(e)))).next((()=>n.localDocuments.getDocuments(s,o)))}))}function $b(r){const e=De(r);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>e.Pi.getLastRemoteSnapshotVersion(n)))}function wD(r,e){const n=De(r),s=e.snapshotVersion;let o=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(u=>{const f=n.Ns.newChangeBuffer({trackRemovals:!0});o=n.Ms;const m=[];e.targetChanges.forEach(((E,T)=>{const C=o.get(T);if(!C)return;m.push(n.Pi.removeMatchingKeys(u,E.removedDocuments,T).next((()=>n.Pi.addMatchingKeys(u,E.addedDocuments,T))));let O=C.withSequenceNumber(u.currentSequenceNumber);e.targetMismatches.get(T)!==null?O=O.withResumeToken(an.EMPTY_BYTE_STRING,xe.min()).withLastLimboFreeSnapshotVersion(xe.min()):E.resumeToken.approximateByteSize()>0&&(O=O.withResumeToken(E.resumeToken,s)),o=o.insert(T,O),(function(q,z,$){return q.resumeToken.approximateByteSize()===0||z.snapshotVersion.toMicroseconds()-q.snapshotVersion.toMicroseconds()>=TD?!0:$.addedDocuments.size+$.modifiedDocuments.size+$.removedDocuments.size>0})(C,O,E)&&m.push(n.Pi.updateTargetData(u,O))}));let p=Rr(),g=Fe();if(e.documentUpdates.forEach((E=>{e.resolvedLimboDocuments.has(E)&&m.push(n.persistence.referenceDelegate.updateLimboDocument(u,E))})),m.push(RD(u,f,e.documentUpdates).next((E=>{p=E.ks,g=E.qs}))),!s.isEqual(xe.min())){const E=n.Pi.getLastRemoteSnapshotVersion(u).next((T=>n.Pi.setTargetsMetadata(u,u.currentSequenceNumber,s)));m.push(E)}return ae.waitFor(m).next((()=>f.apply(u))).next((()=>n.localDocuments.getLocalViewOfDocuments(u,p,g))).next((()=>p))})).then((u=>(n.Ms=o,u)))}function RD(r,e,n){let s=Fe(),o=Fe();return n.forEach((u=>s=s.add(u))),e.getEntries(r,s).next((u=>{let f=Rr();return n.forEach(((m,p)=>{const g=u.get(m);p.isFoundDocument()!==g.isFoundDocument()&&(o=o.add(m)),p.isNoDocument()&&p.version.isEqual(xe.min())?(e.removeEntry(m,p.readTime),f=f.insert(m,p)):!g.isValidDocument()||p.version.compareTo(g.version)>0||p.version.compareTo(g.version)===0&&g.hasPendingWrites?(e.addEntry(p),f=f.insert(m,p)):ge(Jp,"Ignoring outdated watch update for ",m,". Current version:",g.version," Watch version:",p.version)})),{ks:f,qs:o}}))}function CD(r,e){const n=De(r);return n.persistence.runTransaction("Get next mutation batch","readonly",(s=>(e===void 0&&(e=zp),n.mutationQueue.getNextMutationBatchAfterBatchId(s,e))))}function xD(r,e){const n=De(r);return n.persistence.runTransaction("Allocate target","readwrite",(s=>{let o;return n.Pi.getTargetData(s,e).next((u=>u?(o=u,ae.resolve(o)):n.Pi.allocateTargetId(s).next((f=>(o=new hs(e,f,"TargetPurposeListen",s.currentSequenceNumber),n.Pi.addTargetData(s,o).next((()=>o)))))))})).then((s=>{const o=n.Ms.get(s.targetId);return(o===null||s.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(s.targetId,s),n.xs.set(e,s.targetId)),s}))}async function hp(r,e,n){const s=De(r),o=s.Ms.get(e),u=n?"readwrite":"readwrite-primary";try{n||await s.persistence.runTransaction("Release target",u,(f=>s.persistence.referenceDelegate.removeTarget(f,o)))}catch(f){if(!ko(f))throw f;ge(Jp,`Failed to update sequence numbers for target ${e}: ${f}`)}s.Ms=s.Ms.remove(e),s.xs.delete(o.target)}function dE(r,e,n){const s=De(r);let o=xe.min(),u=Fe();return s.persistence.runTransaction("Execute query","readwrite",(f=>(function(p,g,E){const T=De(p),C=T.xs.get(E);return C!==void 0?ae.resolve(T.Ms.get(C)):T.Pi.getTargetData(g,E)})(s,f,Qi(e)).next((m=>{if(m)return o=m.lastLimboFreeSnapshotVersion,s.Pi.getMatchingKeysForTargetId(f,m.targetId).next((p=>{u=p}))})).next((()=>s.Fs.getDocumentsMatchingQuery(f,e,n?o:xe.min(),n?u:Fe()))).next((m=>(ID(s,yI(e),m),{documents:m,Qs:u})))))}function ID(r,e,n){let s=r.Os.get(e)||xe.min();n.forEach(((o,u)=>{u.readTime.compareTo(s)>0&&(s=u.readTime)})),r.Os.set(e,s)}class mE{constructor(){this.activeTargetIds=SI()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class DD{constructor(){this.Mo=new mE,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,s){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,s){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new mE,Promise.resolve()}handleUserChange(e,n,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class ND{Oo(e){}shutdown(){}}const pE="ConnectivityMonitor";class gE{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){ge(pE,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){ge(pE,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let fh=null;function fp(){return fh===null?fh=(function(){return 268435456+Math.round(2147483648*Math.random())})():fh++,"0x"+fh.toString(16)}const Lm="RestConnection",OD={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class MD{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${s}/databases/${o}`,this.Wo=this.databaseId.database===Lh?`project_id=${s}`:`project_id=${s}&database_id=${o}`}Go(e,n,s,o,u){const f=fp(),m=this.zo(e,n.toUriEncodedString());ge(Lm,`Sending RPC '${e}' ${f}:`,m,s);const p={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(p,o,u);const{host:g}=new URL(m),E=Do(g);return this.Jo(e,m,p,s,E).then((T=>(ge(Lm,`Received RPC '${e}' ${f}: `,T),T)),(T=>{throw _o(Lm,`RPC '${e}' ${f} failed with error: `,T,"url: ",m,"request:",s),T}))}Ho(e,n,s,o,u,f){return this.Go(e,n,s,o,u)}jo(e,n,s){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Mo})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((o,u)=>e[u]=o)),s&&s.headers.forEach(((o,u)=>e[u]=o))}zo(e,n){const s=OD[e];return`${this.Uo}/v1/${n}:${s}`}terminate(){}}class VD{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}const cn="WebChannelConnection";class kD extends MD{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,s,o,u){const f=fp();return new Promise(((m,p)=>{const g=new GT;g.setWithCredentials(!0),g.listenOnce(QT.COMPLETE,(()=>{try{switch(g.getLastErrorCode()){case Eh.NO_ERROR:const T=g.getResponseJson();ge(cn,`XHR for RPC '${e}' ${f} received:`,JSON.stringify(T)),m(T);break;case Eh.TIMEOUT:ge(cn,`RPC '${e}' ${f} timed out`),p(new me(ne.DEADLINE_EXCEEDED,"Request time out"));break;case Eh.HTTP_ERROR:const C=g.getStatus();if(ge(cn,`RPC '${e}' ${f} failed with status:`,C,"response text:",g.getResponseText()),C>0){let O=g.getResponseJson();Array.isArray(O)&&(O=O[0]);const L=O?.error;if(L&&L.status&&L.message){const q=(function($){const X=$.toLowerCase().replace(/_/g,"-");return Object.values(ne).indexOf(X)>=0?X:ne.UNKNOWN})(L.status);p(new me(q,L.message))}else p(new me(ne.UNKNOWN,"Server responded with status "+g.getStatus()))}else p(new me(ne.UNAVAILABLE,"Connection failed."));break;default:Ae(9055,{l_:e,streamId:f,h_:g.getLastErrorCode(),P_:g.getLastError()})}}finally{ge(cn,`RPC '${e}' ${f} completed.`)}}));const E=JSON.stringify(o);ge(cn,`RPC '${e}' ${f} sending request:`,o),g.send(n,"POST",E,s,15)}))}T_(e,n,s){const o=fp(),u=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],f=KT(),m=YT(),p={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},g=this.longPollingOptions.timeoutSeconds;g!==void 0&&(p.longPollingTimeout=Math.round(1e3*g)),this.useFetchStreams&&(p.useFetchStreams=!0),this.jo(p.initMessageHeaders,n,s),p.encodeInitMessageHeaders=!0;const E=u.join("");ge(cn,`Creating RPC '${e}' stream ${o}: ${E}`,p);const T=f.createWebChannel(E,p);this.I_(T);let C=!1,O=!1;const L=new VD({Yo:z=>{O?ge(cn,`Not sending because RPC '${e}' stream ${o} is closed:`,z):(C||(ge(cn,`Opening RPC '${e}' stream ${o} transport.`),T.open(),C=!0),ge(cn,`RPC '${e}' stream ${o} sending:`,z),T.send(z))},Zo:()=>T.close()}),q=(z,$,X)=>{z.listen($,(Z=>{try{X(Z)}catch(pe){setTimeout((()=>{throw pe}),0)}}))};return q(T,Hl.EventType.OPEN,(()=>{O||(ge(cn,`RPC '${e}' stream ${o} transport opened.`),L.o_())})),q(T,Hl.EventType.CLOSE,(()=>{O||(O=!0,ge(cn,`RPC '${e}' stream ${o} transport closed`),L.a_(),this.E_(T))})),q(T,Hl.EventType.ERROR,(z=>{O||(O=!0,_o(cn,`RPC '${e}' stream ${o} transport errored. Name:`,z.name,"Message:",z.message),L.a_(new me(ne.UNAVAILABLE,"The operation could not be completed")))})),q(T,Hl.EventType.MESSAGE,(z=>{if(!O){const $=z.data[0];$e(!!$,16349);const X=$,Z=X?.error||X[0]?.error;if(Z){ge(cn,`RPC '${e}' stream ${o} received error:`,Z);const pe=Z.status;let _e=(function(I){const R=Pt[I];if(R!==void 0)return Mb(R)})(pe),Te=Z.message;_e===void 0&&(_e=ne.INTERNAL,Te="Unknown error status: "+pe+" with message "+Z.message),O=!0,L.a_(new me(_e,Te)),T.close()}else ge(cn,`RPC '${e}' stream ${o} received:`,$),L.u_($)}})),q(m,$T.STAT_EVENT,(z=>{z.stat===ep.PROXY?ge(cn,`RPC '${e}' stream ${o} detected buffering proxy`):z.stat===ep.NOPROXY&&ge(cn,`RPC '${e}' stream ${o} detected no buffering proxy`)})),setTimeout((()=>{L.__()}),0),L}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((n=>n===e))}}function jm(){return typeof document<"u"?document:null}function ff(r){return new UI(r,!0)}class Zp{constructor(e,n,s=1e3,o=1.5,u=6e4){this.Mi=e,this.timerId=n,this.d_=s,this.A_=o,this.R_=u,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),s=Math.max(0,Date.now()-this.f_),o=Math.max(0,n-s);o>0&&ge("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${s} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,o,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}const yE="PersistentStream";class Yb{constructor(e,n,s,o,u,f,m,p){this.Mi=e,this.S_=s,this.b_=o,this.connection=u,this.authCredentialsProvider=f,this.appCheckCredentialsProvider=m,this.listener=p,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new Zp(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===ne.RESOURCE_EXHAUSTED?(wr(n.toString()),wr("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===ne.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([s,o])=>{this.D_===n&&this.G_(s,o)}),(s=>{e((()=>{const o=new me(ne.UNKNOWN,"Fetching auth token failed: "+s.message);return this.z_(o)}))}))}G_(e,n){const s=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo((()=>{s((()=>this.listener.Xo()))})),this.stream.t_((()=>{s((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((o=>{s((()=>this.z_(o)))})),this.stream.onMessage((o=>{s((()=>++this.F_==1?this.J_(o):this.onNext(o)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return ge(yE,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget((()=>this.D_===e?n():(ge(yE,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class PD extends Yb{constructor(e,n,s,o,u,f){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,s,o,f),this.serializer=u}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=HI(this.serializer,e),s=(function(u){if(!("targetChange"in u))return xe.min();const f=u.targetChange;return f.targetIds&&f.targetIds.length?xe.min():f.readTime?qn(f.readTime):xe.min()})(e);return this.listener.H_(n,s)}Y_(e){const n={};n.database=cp(this.serializer),n.addTarget=(function(u,f){let m;const p=f.target;if(m=sp(p)?{documents:GI(u,p)}:{query:QI(u,p).ft},m.targetId=f.targetId,f.resumeToken.approximateByteSize()>0){m.resumeToken=Pb(u,f.resumeToken);const g=lp(u,f.expectedCount);g!==null&&(m.expectedCount=g)}else if(f.snapshotVersion.compareTo(xe.min())>0){m.readTime=Bh(u,f.snapshotVersion.toTimestamp());const g=lp(u,f.expectedCount);g!==null&&(m.expectedCount=g)}return m})(this.serializer,e);const s=YI(this.serializer,e);s&&(n.labels=s),this.q_(n)}Z_(e){const n={};n.database=cp(this.serializer),n.removeTarget=e,this.q_(n)}}class LD extends Yb{constructor(e,n,s,o,u,f){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,s,o,f),this.serializer=u}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return $e(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,$e(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){$e(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=FI(e.writeResults,e.commitTime),s=qn(e.commitTime);return this.listener.na(s,n)}ra(){const e={};e.database=cp(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map((s=>zb(this.serializer,s)))};this.q_(n)}}class jD{}class UD extends jD{constructor(e,n,s,o){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=s,this.serializer=o,this.ia=!1}sa(){if(this.ia)throw new me(ne.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,s,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([u,f])=>this.connection.Go(e,up(n,s),o,u,f))).catch((u=>{throw u.name==="FirebaseError"?(u.code===ne.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new me(ne.UNKNOWN,u.toString())}))}Ho(e,n,s,o,u){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([f,m])=>this.connection.Ho(e,up(n,s),o,f,m,u))).catch((f=>{throw f.name==="FirebaseError"?(f.code===ne.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),f):new me(ne.UNKNOWN,f.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class zD{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(wr(n),this.aa=!1):ge("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const da="RemoteStore";class BD{constructor(e,n,s,o,u){this.localStore=e,this.datastore=n,this.asyncQueue=s,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=u,this.Aa.Oo((f=>{s.enqueueAndForget((async()=>{pa(this)&&(ge(da,"Restarting streams for network reachability change."),await(async function(p){const g=De(p);g.Ea.add(4),await Su(g),g.Ra.set("Unknown"),g.Ea.delete(4),await df(g)})(this))}))})),this.Ra=new zD(s,o)}}async function df(r){if(pa(r))for(const e of r.da)await e(!0)}async function Su(r){for(const e of r.da)await e(!1)}function Kb(r,e){const n=De(r);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),ig(n)?ng(n):Po(n).O_()&&tg(n,e))}function eg(r,e){const n=De(r),s=Po(n);n.Ia.delete(e),s.O_()&&Xb(n,e),n.Ia.size===0&&(s.O_()?s.L_():pa(n)&&n.Ra.set("Unknown"))}function tg(r,e){if(r.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(xe.min())>0){const n=r.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Po(r).Y_(e)}function Xb(r,e){r.Va.Ue(e),Po(r).Z_(e)}function ng(r){r.Va=new kI({getRemoteKeysForTarget:e=>r.remoteSyncer.getRemoteKeysForTarget(e),At:e=>r.Ia.get(e)||null,ht:()=>r.datastore.serializer.databaseId}),Po(r).start(),r.Ra.ua()}function ig(r){return pa(r)&&!Po(r).x_()&&r.Ia.size>0}function pa(r){return De(r).Ea.size===0}function Wb(r){r.Va=void 0}async function qD(r){r.Ra.set("Online")}async function HD(r){r.Ia.forEach(((e,n)=>{tg(r,e)}))}async function FD(r,e){Wb(r),ig(r)?(r.Ra.ha(e),ng(r)):r.Ra.set("Unknown")}async function GD(r,e,n){if(r.Ra.set("Online"),e instanceof kb&&e.state===2&&e.cause)try{await(async function(o,u){const f=u.cause;for(const m of u.targetIds)o.Ia.has(m)&&(await o.remoteSyncer.rejectListen(m,f),o.Ia.delete(m),o.Va.removeTarget(m))})(r,e)}catch(s){ge(da,"Failed to remove targets %s: %s ",e.targetIds.join(","),s),await Fh(r,s)}else if(e instanceof Ah?r.Va.Ze(e):e instanceof Vb?r.Va.st(e):r.Va.tt(e),!n.isEqual(xe.min()))try{const s=await $b(r.localStore);n.compareTo(s)>=0&&await(function(u,f){const m=u.Va.Tt(f);return m.targetChanges.forEach(((p,g)=>{if(p.resumeToken.approximateByteSize()>0){const E=u.Ia.get(g);E&&u.Ia.set(g,E.withResumeToken(p.resumeToken,f))}})),m.targetMismatches.forEach(((p,g)=>{const E=u.Ia.get(p);if(!E)return;u.Ia.set(p,E.withResumeToken(an.EMPTY_BYTE_STRING,E.snapshotVersion)),Xb(u,p);const T=new hs(E.target,p,g,E.sequenceNumber);tg(u,T)})),u.remoteSyncer.applyRemoteEvent(m)})(r,n)}catch(s){ge(da,"Failed to raise snapshot:",s),await Fh(r,s)}}async function Fh(r,e,n){if(!ko(e))throw e;r.Ea.add(1),await Su(r),r.Ra.set("Offline"),n||(n=()=>$b(r.localStore)),r.asyncQueue.enqueueRetryable((async()=>{ge(da,"Retrying IndexedDB access"),await n(),r.Ea.delete(1),await df(r)}))}function Jb(r,e){return e().catch((n=>Fh(r,n,e)))}async function mf(r){const e=De(r),n=Ss(e);let s=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:zp;for(;QD(e);)try{const o=await CD(e.localStore,s);if(o===null){e.Ta.length===0&&n.L_();break}s=o.batchId,$D(e,o)}catch(o){await Fh(e,o)}Zb(e)&&eS(e)}function QD(r){return pa(r)&&r.Ta.length<10}function $D(r,e){r.Ta.push(e);const n=Ss(r);n.O_()&&n.X_&&n.ea(e.mutations)}function Zb(r){return pa(r)&&!Ss(r).x_()&&r.Ta.length>0}function eS(r){Ss(r).start()}async function YD(r){Ss(r).ra()}async function KD(r){const e=Ss(r);for(const n of r.Ta)e.ea(n.mutations)}async function XD(r,e,n){const s=r.Ta.shift(),o=Qp.from(s,e,n);await Jb(r,(()=>r.remoteSyncer.applySuccessfulWrite(o))),await mf(r)}async function WD(r,e){e&&Ss(r).X_&&await(async function(s,o){if((function(f){return Ob(f)&&f!==ne.ABORTED})(o.code)){const u=s.Ta.shift();Ss(s).B_(),await Jb(s,(()=>s.remoteSyncer.rejectFailedWrite(u.batchId,o))),await mf(s)}})(r,e),Zb(r)&&eS(r)}async function vE(r,e){const n=De(r);n.asyncQueue.verifyOperationInProgress(),ge(da,"RemoteStore received new credentials");const s=pa(n);n.Ea.add(3),await Su(n),s&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await df(n)}async function JD(r,e){const n=De(r);e?(n.Ea.delete(2),await df(n)):e||(n.Ea.add(2),await Su(n),n.Ra.set("Unknown"))}function Po(r){return r.ma||(r.ma=(function(n,s,o){const u=De(n);return u.sa(),new PD(s,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)})(r.datastore,r.asyncQueue,{Xo:qD.bind(null,r),t_:HD.bind(null,r),r_:FD.bind(null,r),H_:GD.bind(null,r)}),r.da.push((async e=>{e?(r.ma.B_(),ig(r)?ng(r):r.Ra.set("Unknown")):(await r.ma.stop(),Wb(r))}))),r.ma}function Ss(r){return r.fa||(r.fa=(function(n,s,o){const u=De(n);return u.sa(),new LD(s,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)})(r.datastore,r.asyncQueue,{Xo:()=>Promise.resolve(),t_:YD.bind(null,r),r_:WD.bind(null,r),ta:KD.bind(null,r),na:XD.bind(null,r)}),r.da.push((async e=>{e?(r.fa.B_(),await mf(r)):(await r.fa.stop(),r.Ta.length>0&&(ge(da,`Stopping write stream with ${r.Ta.length} pending writes`),r.Ta=[]))}))),r.fa}class rg{constructor(e,n,s,o,u){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=s,this.op=o,this.removalCallback=u,this.deferred=new Gi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((f=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,n,s,o,u){const f=Date.now()+s,m=new rg(e,n,f,o,u);return m.start(s),m}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new me(ne.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function sg(r,e){if(wr("AsyncQueue",`${e}: ${r}`),ko(r))return new me(ne.UNAVAILABLE,`${e}: ${r}`);throw r}class go{static emptySet(e){return new go(e.comparator)}constructor(e){this.comparator=e?(n,s)=>e(n,s)||Ee.comparator(n.key,s.key):(n,s)=>Ee.comparator(n.key,s.key),this.keyedMap=Fl(),this.sortedSet=new gt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((n,s)=>(e(n),!1)))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof go)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;n.hasNext();){const o=n.getNext().key,u=s.getNext().key;if(!o.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach((n=>{e.push(n.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const s=new go;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=n,s}}class _E{constructor(){this.ga=new gt(Ee.comparator)}track(e){const n=e.doc.key,s=this.ga.get(n);s?e.type!==0&&s.type===3?this.ga=this.ga.insert(n,e):e.type===3&&s.type!==1?this.ga=this.ga.insert(n,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.ga=this.ga.remove(n):e.type===1&&s.type===2?this.ga=this.ga.insert(n,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):Ae(63341,{Rt:e,pa:s}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal(((n,s)=>{e.push(s)})),e}}class Ao{constructor(e,n,s,o,u,f,m,p,g){this.query=e,this.docs=n,this.oldDocs=s,this.docChanges=o,this.mutatedKeys=u,this.fromCache=f,this.syncStateChanged=m,this.excludesMetadataChanges=p,this.hasCachedResults=g}static fromInitialDocuments(e,n,s,o,u){const f=[];return n.forEach((m=>{f.push({type:0,doc:m})})),new Ao(e,n,go.emptySet(n),f,s,o,!0,!1,u)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&af(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,s=e.docChanges;if(n.length!==s.length)return!1;for(let o=0;o<n.length;o++)if(n[o].type!==s[o].type||!n[o].doc.isEqual(s[o].doc))return!1;return!0}}class ZD{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class eN{constructor(){this.queries=EE(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,s){const o=De(n),u=o.queries;o.queries=EE(),u.forEach(((f,m)=>{for(const p of m.Sa)p.onError(s)}))})(this,new me(ne.ABORTED,"Firestore shutting down"))}}function EE(){return new ma((r=>yb(r)),af)}async function ag(r,e){const n=De(r);let s=3;const o=e.query;let u=n.queries.get(o);u?!u.ba()&&e.Da()&&(s=2):(u=new ZD,s=e.Da()?0:1);try{switch(s){case 0:u.wa=await n.onListen(o,!0);break;case 1:u.wa=await n.onListen(o,!1);break;case 2:await n.onFirstRemoteStoreListen(o)}}catch(f){const m=sg(f,`Initialization of query '${oo(e.query)}' failed`);return void e.onError(m)}n.queries.set(o,u),u.Sa.push(e),e.va(n.onlineState),u.wa&&e.Fa(u.wa)&&lg(n)}async function og(r,e){const n=De(r),s=e.query;let o=3;const u=n.queries.get(s);if(u){const f=u.Sa.indexOf(e);f>=0&&(u.Sa.splice(f,1),u.Sa.length===0?o=e.Da()?0:1:!u.ba()&&e.Da()&&(o=2))}switch(o){case 0:return n.queries.delete(s),n.onUnlisten(s,!0);case 1:return n.queries.delete(s),n.onUnlisten(s,!1);case 2:return n.onLastRemoteStoreUnlisten(s);default:return}}function tN(r,e){const n=De(r);let s=!1;for(const o of e){const u=o.query,f=n.queries.get(u);if(f){for(const m of f.Sa)m.Fa(o)&&(s=!0);f.wa=o}}s&&lg(n)}function nN(r,e,n){const s=De(r),o=s.queries.get(e);if(o)for(const u of o.Sa)u.onError(n);s.queries.delete(e)}function lg(r){r.Ca.forEach((e=>{e.next()}))}var dp,TE;(TE=dp||(dp={})).Ma="default",TE.Cache="cache";class ug{constructor(e,n,s){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=s||{}}Fa(e){if(!this.options.includeMetadataChanges){const s=[];for(const o of e.docChanges)o.type!==3&&s.push(o);e=new Ao(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const s=n!=="Offline";return(!this.options.qa||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=Ao.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==dp.Cache}}class tS{constructor(e){this.key=e}}class nS{constructor(e){this.key=e}}class iN{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Fe(),this.mutatedKeys=Fe(),this.eu=vb(e),this.tu=new go(this.eu)}get nu(){return this.Ya}ru(e,n){const s=n?n.iu:new _E,o=n?n.tu:this.tu;let u=n?n.mutatedKeys:this.mutatedKeys,f=o,m=!1;const p=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,g=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal(((E,T)=>{const C=o.get(E),O=of(this.query,T)?T:null,L=!!C&&this.mutatedKeys.has(C.key),q=!!O&&(O.hasLocalMutations||this.mutatedKeys.has(O.key)&&O.hasCommittedMutations);let z=!1;C&&O?C.data.isEqual(O.data)?L!==q&&(s.track({type:3,doc:O}),z=!0):this.su(C,O)||(s.track({type:2,doc:O}),z=!0,(p&&this.eu(O,p)>0||g&&this.eu(O,g)<0)&&(m=!0)):!C&&O?(s.track({type:0,doc:O}),z=!0):C&&!O&&(s.track({type:1,doc:C}),z=!0,(p||g)&&(m=!0)),z&&(O?(f=f.add(O),u=q?u.add(E):u.delete(E)):(f=f.delete(E),u=u.delete(E)))})),this.query.limit!==null)for(;f.size>this.query.limit;){const E=this.query.limitType==="F"?f.last():f.first();f=f.delete(E.key),u=u.delete(E.key),s.track({type:1,doc:E})}return{tu:f,iu:s,Cs:m,mutatedKeys:u}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,s,o){const u=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const f=e.iu.ya();f.sort(((E,T)=>(function(O,L){const q=z=>{switch(z){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ae(20277,{Rt:z})}};return q(O)-q(L)})(E.type,T.type)||this.eu(E.doc,T.doc))),this.ou(s),o=o??!1;const m=n&&!o?this._u():[],p=this.Xa.size===0&&this.current&&!o?1:0,g=p!==this.Za;return this.Za=p,f.length!==0||g?{snapshot:new Ao(this.query,e.tu,u,f,e.mutatedKeys,p===0,g,!1,!!s&&s.resumeToken.approximateByteSize()>0),au:m}:{au:m}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new _E,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((n=>this.Ya=this.Ya.add(n))),e.modifiedDocuments.forEach((n=>{})),e.removedDocuments.forEach((n=>this.Ya=this.Ya.delete(n))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Fe(),this.tu.forEach((s=>{this.uu(s.key)&&(this.Xa=this.Xa.add(s.key))}));const n=[];return e.forEach((s=>{this.Xa.has(s)||n.push(new nS(s))})),this.Xa.forEach((s=>{e.has(s)||n.push(new tS(s))})),n}cu(e){this.Ya=e.Qs,this.Xa=Fe();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return Ao.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const cg="SyncEngine";class rN{constructor(e,n,s){this.query=e,this.targetId=n,this.view=s}}class sN{constructor(e){this.key=e,this.hu=!1}}class aN{constructor(e,n,s,o,u,f){this.localStore=e,this.remoteStore=n,this.eventManager=s,this.sharedClientState=o,this.currentUser=u,this.maxConcurrentLimboResolutions=f,this.Pu={},this.Tu=new ma((m=>yb(m)),af),this.Iu=new Map,this.Eu=new Set,this.du=new gt(Ee.comparator),this.Au=new Map,this.Ru=new Kp,this.Vu={},this.mu=new Map,this.fu=So.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function oN(r,e,n=!0){const s=lS(r);let o;const u=s.Tu.get(e);return u?(s.sharedClientState.addLocalQueryTarget(u.targetId),o=u.view.lu()):o=await iS(s,e,n,!0),o}async function lN(r,e){const n=lS(r);await iS(n,e,!0,!1)}async function iS(r,e,n,s){const o=await xD(r.localStore,Qi(e)),u=o.targetId,f=r.sharedClientState.addLocalQueryTarget(u,n);let m;return s&&(m=await uN(r,e,u,f==="current",o.resumeToken)),r.isPrimaryClient&&n&&Kb(r.remoteStore,o),m}async function uN(r,e,n,s,o){r.pu=(T,C,O)=>(async function(q,z,$,X){let Z=z.view.ru($);Z.Cs&&(Z=await dE(q.localStore,z.query,!1).then((({documents:D})=>z.view.ru(D,Z))));const pe=X&&X.targetChanges.get(z.targetId),_e=X&&X.targetMismatches.get(z.targetId)!=null,Te=z.view.applyChanges(Z,q.isPrimaryClient,pe,_e);return SE(q,z.targetId,Te.au),Te.snapshot})(r,T,C,O);const u=await dE(r.localStore,e,!0),f=new iN(e,u.Qs),m=f.ru(u.documents),p=bu.createSynthesizedTargetChangeForCurrentChange(n,s&&r.onlineState!=="Offline",o),g=f.applyChanges(m,r.isPrimaryClient,p);SE(r,n,g.au);const E=new rN(e,n,f);return r.Tu.set(e,E),r.Iu.has(n)?r.Iu.get(n).push(e):r.Iu.set(n,[e]),g.snapshot}async function cN(r,e,n){const s=De(r),o=s.Tu.get(e),u=s.Iu.get(o.targetId);if(u.length>1)return s.Iu.set(o.targetId,u.filter((f=>!af(f,e)))),void s.Tu.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(o.targetId),s.sharedClientState.isActiveQueryTarget(o.targetId)||await hp(s.localStore,o.targetId,!1).then((()=>{s.sharedClientState.clearQueryState(o.targetId),n&&eg(s.remoteStore,o.targetId),mp(s,o.targetId)})).catch(Vo)):(mp(s,o.targetId),await hp(s.localStore,o.targetId,!0))}async function hN(r,e){const n=De(r),s=n.Tu.get(e),o=n.Iu.get(s.targetId);n.isPrimaryClient&&o.length===1&&(n.sharedClientState.removeLocalQueryTarget(s.targetId),eg(n.remoteStore,s.targetId))}async function fN(r,e,n){const s=_N(r);try{const o=await(function(f,m){const p=De(f),g=ht.now(),E=m.reduce(((O,L)=>O.add(L.key)),Fe());let T,C;return p.persistence.runTransaction("Locally write mutations","readwrite",(O=>{let L=Rr(),q=Fe();return p.Ns.getEntries(O,E).next((z=>{L=z,L.forEach((($,X)=>{X.isValidDocument()||(q=q.add($))}))})).next((()=>p.localDocuments.getOverlayedDocuments(O,L))).next((z=>{T=z;const $=[];for(const X of m){const Z=II(X,T.get(X.key).overlayedDocument);Z!=null&&$.push(new Cs(X.key,Z,ub(Z.value.mapValue),sn.exists(!0)))}return p.mutationQueue.addMutationBatch(O,g,$,m)})).next((z=>{C=z;const $=z.applyToLocalDocumentSet(T,q);return p.documentOverlayCache.saveOverlays(O,z.batchId,$)}))})).then((()=>({batchId:C.batchId,changes:Eb(T)})))})(s.localStore,e);s.sharedClientState.addPendingMutation(o.batchId),(function(f,m,p){let g=f.Vu[f.currentUser.toKey()];g||(g=new gt(He)),g=g.insert(m,p),f.Vu[f.currentUser.toKey()]=g})(s,o.batchId,n),await Au(s,o.changes),await mf(s.remoteStore)}catch(o){const u=sg(o,"Failed to persist write");n.reject(u)}}async function rS(r,e){const n=De(r);try{const s=await wD(n.localStore,e);e.targetChanges.forEach(((o,u)=>{const f=n.Au.get(u);f&&($e(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?f.hu=!0:o.modifiedDocuments.size>0?$e(f.hu,14607):o.removedDocuments.size>0&&($e(f.hu,42227),f.hu=!1))})),await Au(n,s,e)}catch(s){await Vo(s)}}function bE(r,e,n){const s=De(r);if(s.isPrimaryClient&&n===0||!s.isPrimaryClient&&n===1){const o=[];s.Tu.forEach(((u,f)=>{const m=f.view.va(e);m.snapshot&&o.push(m.snapshot)})),(function(f,m){const p=De(f);p.onlineState=m;let g=!1;p.queries.forEach(((E,T)=>{for(const C of T.Sa)C.va(m)&&(g=!0)})),g&&lg(p)})(s.eventManager,e),o.length&&s.Pu.H_(o),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function dN(r,e,n){const s=De(r);s.sharedClientState.updateQueryState(e,"rejected",n);const o=s.Au.get(e),u=o&&o.key;if(u){let f=new gt(Ee.comparator);f=f.insert(u,Yt.newNoDocument(u,xe.min()));const m=Fe().add(u),p=new hf(xe.min(),new Map,new gt(He),f,m);await rS(s,p),s.du=s.du.remove(u),s.Au.delete(e),hg(s)}else await hp(s.localStore,e,!1).then((()=>mp(s,e,n))).catch(Vo)}async function mN(r,e){const n=De(r),s=e.batch.batchId;try{const o=await AD(n.localStore,e);aS(n,s,null),sS(n,s),n.sharedClientState.updateMutationState(s,"acknowledged"),await Au(n,o)}catch(o){await Vo(o)}}async function pN(r,e,n){const s=De(r);try{const o=await(function(f,m){const p=De(f);return p.persistence.runTransaction("Reject batch","readwrite-primary",(g=>{let E;return p.mutationQueue.lookupMutationBatch(g,m).next((T=>($e(T!==null,37113),E=T.keys(),p.mutationQueue.removeMutationBatch(g,T)))).next((()=>p.mutationQueue.performConsistencyCheck(g))).next((()=>p.documentOverlayCache.removeOverlaysForBatchId(g,E,m))).next((()=>p.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(g,E))).next((()=>p.localDocuments.getDocuments(g,E)))}))})(s.localStore,e);aS(s,e,n),sS(s,e),s.sharedClientState.updateMutationState(e,"rejected",n),await Au(s,o)}catch(o){await Vo(o)}}function sS(r,e){(r.mu.get(e)||[]).forEach((n=>{n.resolve()})),r.mu.delete(e)}function aS(r,e,n){const s=De(r);let o=s.Vu[s.currentUser.toKey()];if(o){const u=o.get(e);u&&(n?u.reject(n):u.resolve(),o=o.remove(e)),s.Vu[s.currentUser.toKey()]=o}}function mp(r,e,n=null){r.sharedClientState.removeLocalQueryTarget(e);for(const s of r.Iu.get(e))r.Tu.delete(s),n&&r.Pu.yu(s,n);r.Iu.delete(e),r.isPrimaryClient&&r.Ru.jr(e).forEach((s=>{r.Ru.containsKey(s)||oS(r,s)}))}function oS(r,e){r.Eu.delete(e.path.canonicalString());const n=r.du.get(e);n!==null&&(eg(r.remoteStore,n),r.du=r.du.remove(e),r.Au.delete(n),hg(r))}function SE(r,e,n){for(const s of n)s instanceof tS?(r.Ru.addReference(s.key,e),gN(r,s)):s instanceof nS?(ge(cg,"Document no longer in limbo: "+s.key),r.Ru.removeReference(s.key,e),r.Ru.containsKey(s.key)||oS(r,s.key)):Ae(19791,{wu:s})}function gN(r,e){const n=e.key,s=n.path.canonicalString();r.du.get(n)||r.Eu.has(s)||(ge(cg,"New document in limbo: "+n),r.Eu.add(s),hg(r))}function hg(r){for(;r.Eu.size>0&&r.du.size<r.maxConcurrentLimboResolutions;){const e=r.Eu.values().next().value;r.Eu.delete(e);const n=new Ee(ot.fromString(e)),s=r.fu.next();r.Au.set(s,new sN(n)),r.du=r.du.insert(n,s),Kb(r.remoteStore,new hs(Qi(sf(n.path)),s,"TargetPurposeLimboResolution",nf.ce))}}async function Au(r,e,n){const s=De(r),o=[],u=[],f=[];s.Tu.isEmpty()||(s.Tu.forEach(((m,p)=>{f.push(s.pu(p,e,n).then((g=>{if((g||n)&&s.isPrimaryClient){const E=g?!g.fromCache:n?.targetChanges.get(p.targetId)?.current;s.sharedClientState.updateQueryState(p.targetId,E?"current":"not-current")}if(g){o.push(g);const E=Wp.As(p.targetId,g);u.push(E)}})))})),await Promise.all(f),s.Pu.H_(o),await(async function(p,g){const E=De(p);try{await E.persistence.runTransaction("notifyLocalViewChanges","readwrite",(T=>ae.forEach(g,(C=>ae.forEach(C.Es,(O=>E.persistence.referenceDelegate.addReference(T,C.targetId,O))).next((()=>ae.forEach(C.ds,(O=>E.persistence.referenceDelegate.removeReference(T,C.targetId,O)))))))))}catch(T){if(!ko(T))throw T;ge(Jp,"Failed to update sequence numbers: "+T)}for(const T of g){const C=T.targetId;if(!T.fromCache){const O=E.Ms.get(C),L=O.snapshotVersion,q=O.withLastLimboFreeSnapshotVersion(L);E.Ms=E.Ms.insert(C,q)}}})(s.localStore,u))}async function yN(r,e){const n=De(r);if(!n.currentUser.isEqual(e)){ge(cg,"User change. New user:",e.toKey());const s=await Qb(n.localStore,e);n.currentUser=e,(function(u,f){u.mu.forEach((m=>{m.forEach((p=>{p.reject(new me(ne.CANCELLED,f))}))})),u.mu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await Au(n,s.Ls)}}function vN(r,e){const n=De(r),s=n.Au.get(e);if(s&&s.hu)return Fe().add(s.key);{let o=Fe();const u=n.Iu.get(e);if(!u)return o;for(const f of u){const m=n.Tu.get(f);o=o.unionWith(m.view.nu)}return o}}function lS(r){const e=De(r);return e.remoteStore.remoteSyncer.applyRemoteEvent=rS.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=vN.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=dN.bind(null,e),e.Pu.H_=tN.bind(null,e.eventManager),e.Pu.yu=nN.bind(null,e.eventManager),e}function _N(r){const e=De(r);return e.remoteStore.remoteSyncer.applySuccessfulWrite=mN.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=pN.bind(null,e),e}class Gh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=ff(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return SD(this.persistence,new ED,e.initialUser,this.serializer)}Cu(e){return new Gb(Xp.mi,this.serializer)}Du(e){return new DD}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Gh.provider={build:()=>new Gh};class EN extends Gh{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){$e(this.persistence.referenceDelegate instanceof Hh,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new sD(s,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?Cn.withCacheSize(this.cacheSizeBytes):Cn.DEFAULT;return new Gb((s=>Hh.mi(s,n)),this.serializer)}}class pp{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>bE(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=yN.bind(null,this.syncEngine),await JD(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new eN})()}createDatastore(e){const n=ff(e.databaseInfo.databaseId),s=(function(u){return new kD(u)})(e.databaseInfo);return(function(u,f,m,p){return new UD(u,f,m,p)})(e.authCredentials,e.appCheckCredentials,s,n)}createRemoteStore(e){return(function(s,o,u,f,m){return new BD(s,o,u,f,m)})(this.localStore,this.datastore,e.asyncQueue,(n=>bE(this.syncEngine,n,0)),(function(){return gE.v()?new gE:new ND})())}createSyncEngine(e,n){return(function(o,u,f,m,p,g,E){const T=new aN(o,u,f,m,p,g);return E&&(T.gu=!0),T})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){await(async function(n){const s=De(n);ge(da,"RemoteStore shutting down."),s.Ea.add(5),await Su(s),s.Aa.shutdown(),s.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}pp.provider={build:()=>new pp};class fg{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):wr("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout((()=>{this.muted||e(n)}),0)}}class TN{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new me(ne.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const n=await(async function(o,u){const f=De(o),m={documents:u.map((T=>qh(f.serializer,T)))},p=await f.Ho("BatchGetDocuments",f.serializer.databaseId,ot.emptyPath(),m,u.length),g=new Map;p.forEach((T=>{const C=qI(f.serializer,T);g.set(C.key.toString(),C)}));const E=[];return u.forEach((T=>{const C=g.get(T.toString());$e(!!C,55234,{key:T}),E.push(C)})),E})(this.datastore,e);return n.forEach((s=>this.recordVersion(s))),n}set(e,n){this.write(n.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,n){try{this.write(n.toMutation(e,this.preconditionForUpdate(e)))}catch(s){this.lastTransactionError=s}this.writtenDocs.add(e.toString())}delete(e){this.write(new cf(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach((n=>{e.delete(n.key.toString())})),e.forEach(((n,s)=>{const o=Ee.fromPath(s);this.mutations.push(new Nb(o,this.precondition(o)))})),await(async function(s,o){const u=De(s),f={writes:o.map((m=>zb(u.serializer,m)))};await u.Go("Commit",u.serializer.databaseId,ot.emptyPath(),f)})(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let n;if(e.isFoundDocument())n=e.version;else{if(!e.isNoDocument())throw Ae(50498,{Gu:e.constructor.name});n=xe.min()}const s=this.readVersions.get(e.key.toString());if(s){if(!n.isEqual(s))throw new me(ne.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),n)}precondition(e){const n=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&n?n.isEqual(xe.min())?sn.exists(!1):sn.updateTime(n):sn.none()}preconditionForUpdate(e){const n=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&n){if(n.isEqual(xe.min()))throw new me(ne.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return sn.updateTime(n)}return sn.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class bN{constructor(e,n,s,o,u){this.asyncQueue=e,this.datastore=n,this.options=s,this.updateFunction=o,this.deferred=u,this.zu=s.maxAttempts,this.M_=new Zp(this.asyncQueue,"transaction_retry")}ju(){this.zu-=1,this.Ju()}Ju(){this.M_.p_((async()=>{const e=new TN(this.datastore),n=this.Hu(e);n&&n.then((s=>{this.asyncQueue.enqueueAndForget((()=>e.commit().then((()=>{this.deferred.resolve(s)})).catch((o=>{this.Yu(o)}))))})).catch((s=>{this.Yu(s)}))}))}Hu(e){try{const n=this.updateFunction(e);return!_u(n)&&n.catch&&n.then?n:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(n){return this.deferred.reject(n),null}}Yu(e){this.zu>0&&this.Zu(e)?(this.zu-=1,this.asyncQueue.enqueueAndForget((()=>(this.Ju(),Promise.resolve())))):this.deferred.reject(e)}Zu(e){if(e?.name==="FirebaseError"){const n=e.code;return n==="aborted"||n==="failed-precondition"||n==="already-exists"||!Ob(n)}return!1}}const As="FirestoreClient";class SN{constructor(e,n,s,o,u){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=s,this.databaseInfo=o,this.user=hn.UNAUTHENTICATED,this.clientId=Up.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=u,this.authCredentials.start(s,(async f=>{ge(As,"Received user=",f.uid),await this.authCredentialListener(f),this.user=f})),this.appCheckCredentials.start(s,(f=>(ge(As,"Received new app check token=",f),this.appCheckCredentialListener(f,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Gi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const s=sg(n,"Failed to shutdown persistence");e.reject(s)}})),e.promise}}async function Um(r,e){r.asyncQueue.verifyOperationInProgress(),ge(As,"Initializing OfflineComponentProvider");const n=r.configuration;await e.initialize(n);let s=n.initialUser;r.setCredentialChangeListener((async o=>{s.isEqual(o)||(await Qb(e.localStore,o),s=o)})),e.persistence.setDatabaseDeletedListener((()=>r.terminate())),r._offlineComponents=e}async function AE(r,e){r.asyncQueue.verifyOperationInProgress();const n=await AN(r);ge(As,"Initializing OnlineComponentProvider"),await e.initialize(n,r.configuration),r.setCredentialChangeListener((s=>vE(e.remoteStore,s))),r.setAppCheckTokenChangeListener(((s,o)=>vE(e.remoteStore,o))),r._onlineComponents=e}async function AN(r){if(!r._offlineComponents)if(r._uninitializedComponentsProvider){ge(As,"Using user provided OfflineComponentProvider");try{await Um(r,r._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!(function(o){return o.name==="FirebaseError"?o.code===ne.FAILED_PRECONDITION||o.code===ne.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11})(n))throw n;_o("Error using user provided cache. Falling back to memory cache: "+n),await Um(r,new Gh)}}else ge(As,"Using default OfflineComponentProvider"),await Um(r,new EN(void 0));return r._offlineComponents}async function dg(r){return r._onlineComponents||(r._uninitializedComponentsProvider?(ge(As,"Using user provided OnlineComponentProvider"),await AE(r,r._uninitializedComponentsProvider._online)):(ge(As,"Using default OnlineComponentProvider"),await AE(r,new pp))),r._onlineComponents}function wN(r){return dg(r).then((e=>e.syncEngine))}function RN(r){return dg(r).then((e=>e.datastore))}async function Qh(r){const e=await dg(r),n=e.eventManager;return n.onListen=oN.bind(null,e.syncEngine),n.onUnlisten=cN.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=lN.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=hN.bind(null,e.syncEngine),n}function CN(r,e,n={}){const s=new Gi;return r.asyncQueue.enqueueAndForget((async()=>(function(u,f,m,p,g){const E=new fg({next:C=>{E.Nu(),f.enqueueAndForget((()=>og(u,T)));const O=C.docs.has(m);!O&&C.fromCache?g.reject(new me(ne.UNAVAILABLE,"Failed to get document because the client is offline.")):O&&C.fromCache&&p&&p.source==="server"?g.reject(new me(ne.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):g.resolve(C)},error:C=>g.reject(C)}),T=new ug(sf(m.path),E,{includeMetadataChanges:!0,qa:!0});return ag(u,T)})(await Qh(r),r.asyncQueue,e,n,s))),s.promise}function xN(r,e,n={}){const s=new Gi;return r.asyncQueue.enqueueAndForget((async()=>(function(u,f,m,p,g){const E=new fg({next:C=>{E.Nu(),f.enqueueAndForget((()=>og(u,T))),C.fromCache&&p.source==="server"?g.reject(new me(ne.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):g.resolve(C)},error:C=>g.reject(C)}),T=new ug(m,E,{includeMetadataChanges:!0,qa:!0});return ag(u,T)})(await Qh(r),r.asyncQueue,e,n,s))),s.promise}function uS(r){const e={};return r.timeoutSeconds!==void 0&&(e.timeoutSeconds=r.timeoutSeconds),e}const wE=new Map;const cS="firestore.googleapis.com",RE=!0;class CE{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new me(ne.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=cS,this.ssl=RE}else this.host=e.host,this.ssl=e.ssl??RE;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=Fb;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<iD)throw new me(ne.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}F2("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=uS(e.experimentalLongPollingOptions??{}),(function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new me(ne.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new me(ne.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new me(ne.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(s,o){return s.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class pf{constructor(e,n,s,o){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=s,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new CE({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new me(ne.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new me(ne.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new CE(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(s){if(!s)return new V2;switch(s.type){case"firstParty":return new j2(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new me(ne.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const s=wE.get(n);s&&(ge("ComponentProvider","Removing Datastore"),wE.delete(n),s.terminate())})(this),Promise.resolve()}}function IN(r,e,n,s={}){r=_n(r,pf);const o=Do(e),u=r._getSettings(),f={...u,emulatorOptions:r._getEmulatorOptions()},m=`${e}:${n}`;o&&(aT(`https://${m}`),oT("Firestore",!0)),u.host!==cS&&u.host!==m&&_o("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const p={...u,host:m,ssl:o,emulatorOptions:s};if(!ua(p,f)&&(r._setSettings(p),s.mockUserToken)){let g,E;if(typeof s.mockUserToken=="string")g=s.mockUserToken,E=hn.MOCK_USER;else{g=rR(s.mockUserToken,r._app?.options.projectId);const T=s.mockUserToken.sub||s.mockUserToken.user_id;if(!T)throw new me(ne.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");E=new hn(T)}r._authCredentials=new k2(new WT(g,E))}}class ga{constructor(e,n,s){this.converter=n,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new ga(this.firestore,e,this._query)}}class pt{constructor(e,n,s){this.converter=n,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new gs(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new pt(this.firestore,e,this._key)}toJSON(){return{type:pt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,s){if(vu(n,pt._jsonSchema))return new pt(e,s||null,new Ee(ot.fromString(n.referencePath)))}}pt._jsonSchemaVersion="firestore/documentReference/1.0",pt._jsonSchema={type:Ut("string",pt._jsonSchemaVersion),referencePath:Ut("string")};class gs extends ga{constructor(e,n,s){super(e,n,sf(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new pt(this.firestore,null,new Ee(e))}withConverter(e){return new gs(this.firestore,e,this._path)}}function Lt(r,e,...n){if(r=zt(r),JT("collection","path",e),r instanceof pf){const s=ot.fromString(e,...n);return z0(s),new gs(r,null,s)}{if(!(r instanceof pt||r instanceof gs))throw new me(ne.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=r._path.child(ot.fromString(e,...n));return z0(s),new gs(r.firestore,null,s)}}function fn(r,e,...n){if(r=zt(r),arguments.length===1&&(e=Up.newId()),JT("doc","path",e),r instanceof pf){const s=ot.fromString(e,...n);return U0(s),new pt(r,null,new Ee(s))}{if(!(r instanceof pt||r instanceof gs))throw new me(ne.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=r._path.child(ot.fromString(e,...n));return U0(s),new pt(r.firestore,r instanceof gs?r.converter:null,new Ee(s))}}const xE="AsyncQueue";class IE{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new Zp(this,"async_queue_retry"),this._c=()=>{const s=jm();s&&ge(xE,"Visibility state changed to "+s.visibilityState),this.M_.w_()},this.ac=e;const n=jm();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=jm();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const n=new Gi;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!ko(e))throw e;ge(xE,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const n=this.ac.then((()=>(this.rc=!0,e().catch((s=>{throw this.nc=s,this.rc=!1,wr("INTERNAL UNHANDLED ERROR: ",DE(s)),s})).then((s=>(this.rc=!1,s))))));return this.ac=n,n}enqueueAfterDelay(e,n,s){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const o=rg.createAndSchedule(this,e,n,s,(u=>this.hc(u)));return this.tc.push(o),o}uc(){this.nc&&Ae(47125,{Pc:DE(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((n,s)=>n.targetTimeMs-s.targetTimeMs));for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function DE(r){let e=r.message||"";return r.stack&&(e=r.stack.includes(r.message)?r.stack:r.message+`
`+r.stack),e}function NE(r){return(function(n,s){if(typeof n!="object"||n===null)return!1;const o=n;for(const u of s)if(u in o&&typeof o[u]=="function")return!0;return!1})(r,["next","error","complete"])}class Wi extends pf{constructor(e,n,s,o){super(e,n,s,o),this.type="firestore",this._queue=new IE,this._persistenceKey=o?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new IE(e),this._firestoreClient=void 0,await e}}}function DN(r,e){const n=typeof r=="object"?r:hT(),s=typeof r=="string"?r:Lh,o=Cp(n,"firestore").getImmediate({identifier:s});if(!o._initialized){const u=nR("firestore");u&&IN(o,...u)}return o}function wu(r){if(r._terminated)throw new me(ne.FAILED_PRECONDITION,"The client has already been terminated.");return r._firestoreClient||NN(r),r._firestoreClient}function NN(r){const e=r._freezeSettings(),n=(function(o,u,f,m){return new tI(o,u,f,m.host,m.ssl,m.experimentalForceLongPolling,m.experimentalAutoDetectLongPolling,uS(m.experimentalLongPollingOptions),m.useFetchStreams,m.isUsingEmulator)})(r._databaseId,r._app?.options.appId||"",r._persistenceKey,e);r._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(r._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),r._firestoreClient=new SN(r._authCredentials,r._appCheckCredentials,r._queue,n,r._componentsProvider&&(function(o){const u=o?._online.build();return{_offline:o?._offline.build(u),_online:u}})(r._componentsProvider))}class zn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new zn(an.fromBase64String(e))}catch(n){throw new me(ne.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new zn(an.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:zn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(vu(e,zn._jsonSchema))return zn.fromBase64String(e.bytes)}}zn._jsonSchemaVersion="firestore/bytes/1.0",zn._jsonSchema={type:Ut("string",zn._jsonSchemaVersion),bytes:Ut("string")};class Ru{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new me(ne.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new rn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Cu{constructor(e){this._methodName=e}}class $i{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new me(ne.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new me(ne.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return He(this._lat,e._lat)||He(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:$i._jsonSchemaVersion}}static fromJSON(e){if(vu(e,$i._jsonSchema))return new $i(e.latitude,e.longitude)}}$i._jsonSchemaVersion="firestore/geoPoint/1.0",$i._jsonSchema={type:Ut("string",$i._jsonSchemaVersion),latitude:Ut("number"),longitude:Ut("number")};class Yi{constructor(e){this._values=(e||[]).map((n=>n))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(s,o){if(s.length!==o.length)return!1;for(let u=0;u<s.length;++u)if(s[u]!==o[u])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Yi._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(vu(e,Yi._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((n=>typeof n=="number")))return new Yi(e.vectorValues);throw new me(ne.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Yi._jsonSchemaVersion="firestore/vectorValue/1.0",Yi._jsonSchema={type:Ut("string",Yi._jsonSchemaVersion),vectorValues:Ut("object")};const ON=/^__.*__$/;class MN{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return this.fieldMask!==null?new Cs(e,this.data,this.fieldMask,n,this.fieldTransforms):new Tu(e,this.data,n,this.fieldTransforms)}}class hS{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return new Cs(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function fS(r){switch(r){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ae(40011,{Ac:r})}}class mg{constructor(e,n,s,o,u,f){this.settings=e,this.databaseId=n,this.serializer=s,this.ignoreUndefinedProperties=o,u===void 0&&this.Rc(),this.fieldTransforms=u||[],this.fieldMask=f||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new mg({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const n=this.path?.child(e),s=this.Vc({path:n,fc:!1});return s.gc(e),s}yc(e){const n=this.path?.child(e),s=this.Vc({path:n,fc:!1});return s.Rc(),s}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return $h(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((n=>e.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>e.isPrefixOf(n.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(fS(this.Ac)&&ON.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class VN{constructor(e,n,s){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=s||ff(e)}Cc(e,n,s,o=!1){return new mg({Ac:e,methodName:n,Dc:s,path:rn.emptyPath(),fc:!1,bc:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function xu(r){const e=r._freezeSettings(),n=ff(r._databaseId);return new VN(r._databaseId,!!e.ignoreUndefinedProperties,n)}function pg(r,e,n,s,o,u={}){const f=r.Cc(u.merge||u.mergeFields?2:0,e,n,o);vg("Data must be an object, but it was:",f,s);const m=pS(s,f);let p,g;if(u.merge)p=new Bn(f.fieldMask),g=f.fieldTransforms;else if(u.mergeFields){const E=[];for(const T of u.mergeFields){const C=gp(e,T,n);if(!f.contains(C))throw new me(ne.INVALID_ARGUMENT,`Field '${C}' is specified in your field mask but missing from your input data.`);yS(E,C)||E.push(C)}p=new Bn(E),g=f.fieldTransforms.filter((T=>p.covers(T.field)))}else p=null,g=f.fieldTransforms;return new MN(new vn(m),p,g)}class gf extends Cu{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof gf}}class gg extends Cu{_toFieldTransform(e){return new xb(e.path,new ou)}isEqual(e){return e instanceof gg}}class yg extends Cu{constructor(e,n){super(e),this.Fc=n}_toFieldTransform(e){const n=new cu(e.serializer,Sb(e.serializer,this.Fc));return new xb(e.path,n)}isEqual(e){return e instanceof yg&&this.Fc===e.Fc}}function dS(r,e,n,s){const o=r.Cc(1,e,n);vg("Data must be an object, but it was:",o,s);const u=[],f=vn.empty();Rs(s,((p,g)=>{const E=_g(e,p,n);g=zt(g);const T=o.yc(E);if(g instanceof gf)u.push(E);else{const C=Iu(g,T);C!=null&&(u.push(E),f.set(E,C))}}));const m=new Bn(u);return new hS(f,m,o.fieldTransforms)}function mS(r,e,n,s,o,u){const f=r.Cc(1,e,n),m=[gp(e,s,n)],p=[o];if(u.length%2!=0)throw new me(ne.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let C=0;C<u.length;C+=2)m.push(gp(e,u[C])),p.push(u[C+1]);const g=[],E=vn.empty();for(let C=m.length-1;C>=0;--C)if(!yS(g,m[C])){const O=m[C];let L=p[C];L=zt(L);const q=f.yc(O);if(L instanceof gf)g.push(O);else{const z=Iu(L,q);z!=null&&(g.push(O),E.set(O,z))}}const T=new Bn(g);return new hS(E,T,f.fieldTransforms)}function kN(r,e,n,s=!1){return Iu(n,r.Cc(s?4:3,e))}function Iu(r,e){if(gS(r=zt(r)))return vg("Unsupported field value:",e,r),pS(r,e);if(r instanceof Cu)return(function(s,o){if(!fS(o.Ac))throw o.Sc(`${s._methodName}() can only be used with update() and set()`);if(!o.path)throw o.Sc(`${s._methodName}() is not currently supported inside arrays`);const u=s._toFieldTransform(o);u&&o.fieldTransforms.push(u)})(r,e),null;if(r===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),r instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(s,o){const u=[];let f=0;for(const m of s){let p=Iu(m,o.wc(f));p==null&&(p={nullValue:"NULL_VALUE"}),u.push(p),f++}return{arrayValue:{values:u}}})(r,e)}return(function(s,o){if((s=zt(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return Sb(o.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const u=ht.fromDate(s);return{timestampValue:Bh(o.serializer,u)}}if(s instanceof ht){const u=new ht(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:Bh(o.serializer,u)}}if(s instanceof $i)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof zn)return{bytesValue:Pb(o.serializer,s._byteString)};if(s instanceof pt){const u=o.databaseId,f=s.firestore._databaseId;if(!f.isEqual(u))throw o.Sc(`Document reference is for database ${f.projectId}/${f.database} but should be for database ${u.projectId}/${u.database}`);return{referenceValue:Yp(s.firestore._databaseId||o.databaseId,s._key.path)}}if(s instanceof Yi)return(function(f,m){return{mapValue:{fields:{[ob]:{stringValue:lb},[jh]:{arrayValue:{values:f.toArray().map((g=>{if(typeof g!="number")throw m.Sc("VectorValues must only contain numeric values.");return Gp(m.serializer,g)}))}}}}}})(s,o);throw o.Sc(`Unsupported field value: ${tf(s)}`)})(r,e)}function pS(r,e){const n={};return tb(r)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Rs(r,((s,o)=>{const u=Iu(o,e.mc(s));u!=null&&(n[s]=u)})),{mapValue:{fields:n}}}function gS(r){return!(typeof r!="object"||r===null||r instanceof Array||r instanceof Date||r instanceof ht||r instanceof $i||r instanceof zn||r instanceof pt||r instanceof Cu||r instanceof Yi)}function vg(r,e,n){if(!gS(n)||!ZT(n)){const s=tf(n);throw s==="an object"?e.Sc(r+" a custom object"):e.Sc(r+" "+s)}}function gp(r,e,n){if((e=zt(e))instanceof Ru)return e._internalPath;if(typeof e=="string")return _g(r,e);throw $h("Field path arguments must be of type string or ",r,!1,void 0,n)}const PN=new RegExp("[~\\*/\\[\\]]");function _g(r,e,n){if(e.search(PN)>=0)throw $h(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,r,!1,void 0,n);try{return new Ru(...e.split("."))._internalPath}catch{throw $h(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,r,!1,void 0,n)}}function $h(r,e,n,s,o){const u=s&&!s.isEmpty(),f=o!==void 0;let m=`Function ${e}() called with invalid data`;n&&(m+=" (via `toFirestore()`)"),m+=". ";let p="";return(u||f)&&(p+=" (found",u&&(p+=` in field ${s}`),f&&(p+=` in document ${o}`),p+=")"),new me(ne.INVALID_ARGUMENT,m+r+p)}function yS(r,e){return r.some((n=>n.isEqual(e)))}class Yh{constructor(e,n,s,o,u){this._firestore=e,this._userDataWriter=n,this._key=s,this._document=o,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new pt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new LN(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Eg("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class LN extends Yh{data(){return super.data()}}function Eg(r,e){return typeof e=="string"?_g(r,e):e instanceof Ru?e._internalPath:e._delegate._internalPath}function vS(r){if(r.limitType==="L"&&r.explicitOrderBy.length===0)throw new me(ne.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Tg{}class jN extends Tg{}function yf(r,e,...n){let s=[];e instanceof Tg&&s.push(e),s=s.concat(n),(function(u){const f=u.filter((p=>p instanceof bg)).length,m=u.filter((p=>p instanceof vf)).length;if(f>1||f>0&&m>0)throw new me(ne.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(s);for(const o of s)r=o._apply(r);return r}class vf extends jN{constructor(e,n,s){super(),this._field=e,this._op=n,this._value=s,this.type="where"}static _create(e,n,s){return new vf(e,n,s)}_apply(e){const n=this._parse(e);return _S(e._query,n),new ga(e.firestore,e.converter,ap(e._query,n))}_parse(e){const n=xu(e.firestore);return(function(u,f,m,p,g,E,T){let C;if(g.isKeyField()){if(E==="array-contains"||E==="array-contains-any")throw new me(ne.INVALID_ARGUMENT,`Invalid Query. You can't perform '${E}' queries on documentId().`);if(E==="in"||E==="not-in"){ME(T,E);const L=[];for(const q of T)L.push(OE(p,u,q));C={arrayValue:{values:L}}}else C=OE(p,u,T)}else E!=="in"&&E!=="not-in"&&E!=="array-contains-any"||ME(T,E),C=kN(m,f,T,E==="in"||E==="not-in");return jt.create(g,E,C)})(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function wo(r,e,n){const s=e,o=Eg("where",r);return vf._create(o,s,n)}class bg extends Tg{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new bg(e,n)}_parse(e){const n=this._queryConstraints.map((s=>s._parse(e))).filter((s=>s.getFilters().length>0));return n.length===1?n[0]:Ei.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:((function(o,u){let f=o;const m=u.getFlattenedFilters();for(const p of m)_S(f,p),f=ap(f,p)})(e._query,n),new ga(e.firestore,e.converter,ap(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function OE(r,e,n){if(typeof(n=zt(n))=="string"){if(n==="")throw new me(ne.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!gb(e)&&n.indexOf("/")!==-1)throw new me(ne.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const s=e.path.child(ot.fromString(n));if(!Ee.isDocumentKey(s))throw new me(ne.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return Y0(r,new Ee(s))}if(n instanceof pt)return Y0(r,n._key);throw new me(ne.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${tf(n)}.`)}function ME(r,e){if(!Array.isArray(r)||r.length===0)throw new me(ne.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function _S(r,e){const n=(function(o,u){for(const f of o)for(const m of f.getFlattenedFilters())if(u.indexOf(m.op)>=0)return m.op;return null})(r.filters,(function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(n!==null)throw n===e.op?new me(ne.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new me(ne.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class ES{convertValue(e,n="none"){switch(bs(e)){case 0:return null;case 1:return e.booleanValue;case 2:return wt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Ts(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Ae(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const s={};return Rs(e,((o,u)=>{s[o]=this.convertValue(u,n)})),s}convertVectorValue(e){const n=e.fields?.[jh].arrayValue?.values?.map((s=>wt(s.doubleValue)));return new Yi(n)}convertGeoPoint(e){return new $i(wt(e.latitude),wt(e.longitude))}convertArray(e,n){return(e.values||[]).map((s=>this.convertValue(s,n)))}convertServerTimestamp(e,n){switch(n){case"previous":const s=rf(e);return s==null?null:this.convertValue(s,n);case"estimate":return this.convertTimestamp(ru(e));default:return null}}convertTimestamp(e){const n=Es(e);return new ht(n.seconds,n.nanos)}convertDocumentKey(e,n){const s=ot.fromString(e);$e(Hb(s),9688,{name:e});const o=new su(s.get(1),s.get(3)),u=new Ee(s.popFirst(5));return o.isEqual(n)||wr(`Document ${u} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),u}}function Sg(r,e,n){let s;return s=r?n&&(n.merge||n.mergeFields)?r.toFirestore(e,n):r.toFirestore(e):e,s}class UN extends ES{constructor(e){super(),this.firestore=e}convertBytes(e){return new zn(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new pt(this.firestore,null,n)}}class co{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class ys extends Yh{constructor(e,n,s,o,u,f){super(e,n,s,o,f),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new wh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const s=this._document.data.field(Eg("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new me(ne.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=ys._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}ys._jsonSchemaVersion="firestore/documentSnapshot/1.0",ys._jsonSchema={type:Ut("string",ys._jsonSchemaVersion),bundleSource:Ut("string","DocumentSnapshot"),bundleName:Ut("string"),bundle:Ut("string")};class wh extends ys{data(e={}){return super.data(e)}}class la{constructor(e,n,s,o){this._firestore=e,this._userDataWriter=n,this._snapshot=o,this.metadata=new co(o.hasPendingWrites,o.fromCache),this.query=s}get docs(){const e=[];return this.forEach((n=>e.push(n))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach((s=>{e.call(n,new wh(this._firestore,this._userDataWriter,s.key,s,new co(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new me(ne.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(o,u){if(o._snapshot.oldDocs.isEmpty()){let f=0;return o._snapshot.docChanges.map((m=>{const p=new wh(o._firestore,o._userDataWriter,m.doc.key,m.doc,new co(o._snapshot.mutatedKeys.has(m.doc.key),o._snapshot.fromCache),o.query.converter);return m.doc,{type:"added",doc:p,oldIndex:-1,newIndex:f++}}))}{let f=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((m=>u||m.type!==3)).map((m=>{const p=new wh(o._firestore,o._userDataWriter,m.doc.key,m.doc,new co(o._snapshot.mutatedKeys.has(m.doc.key),o._snapshot.fromCache),o.query.converter);let g=-1,E=-1;return m.type!==0&&(g=f.indexOf(m.doc.key),f=f.delete(m.doc.key)),m.type!==1&&(f=f.add(m.doc),E=f.indexOf(m.doc.key)),{type:zN(m.type),doc:p,oldIndex:g,newIndex:E}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new me(ne.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=la._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Up.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],s=[],o=[];return this.docs.forEach((u=>{u._document!==null&&(n.push(u._document),s.push(this._userDataWriter.convertObjectMap(u._document.data.value.mapValue.fields,"previous")),o.push(u.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function zN(r){switch(r){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ae(61501,{type:r})}}function vs(r){r=_n(r,pt);const e=_n(r.firestore,Wi);return CN(wu(e),r._key).then((n=>bS(e,r,n)))}la._jsonSchemaVersion="firestore/querySnapshot/1.0",la._jsonSchema={type:Ut("string",la._jsonSchemaVersion),bundleSource:Ut("string","QuerySnapshot"),bundleName:Ut("string"),bundle:Ut("string")};class _f extends ES{constructor(e){super(),this.firestore=e}convertBytes(e){return new zn(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new pt(this.firestore,null,n)}}function Un(r){r=_n(r,ga);const e=_n(r.firestore,Wi),n=wu(e),s=new _f(e);return vS(r._query),xN(n,r._query).then((o=>new la(e,s,r,o)))}function ho(r,e,n){r=_n(r,pt);const s=_n(r.firestore,Wi),o=Sg(r.converter,e,n);return Ef(s,[pg(xu(s),"setDoc",r._key,o,r.converter!==null,n).toMutation(r._key,sn.none())])}function TS(r,e,n,...s){r=_n(r,pt);const o=_n(r.firestore,Wi),u=xu(o);let f;return f=typeof(e=zt(e))=="string"||e instanceof Ru?mS(u,"updateDoc",r._key,e,n,s):dS(u,"updateDoc",r._key,e),Ef(o,[f.toMutation(r._key,sn.exists(!0))])}function zm(r){return Ef(_n(r.firestore,Wi),[new cf(r._key,sn.none())])}function BN(r,e){const n=_n(r.firestore,Wi),s=fn(r),o=Sg(r.converter,e);return Ef(n,[pg(xu(r.firestore),"addDoc",s._key,o,r.converter!==null,{}).toMutation(s._key,sn.exists(!1))]).then((()=>s))}function aa(r,...e){r=zt(r);let n={includeMetadataChanges:!1,source:"default"},s=0;typeof e[s]!="object"||NE(e[s])||(n=e[s++]);const o={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(NE(e[s])){const p=e[s];e[s]=p.next?.bind(p),e[s+1]=p.error?.bind(p),e[s+2]=p.complete?.bind(p)}let u,f,m;if(r instanceof pt)f=_n(r.firestore,Wi),m=sf(r._key.path),u={next:p=>{e[s]&&e[s](bS(f,r,p))},error:e[s+1],complete:e[s+2]};else{const p=_n(r,ga);f=_n(p.firestore,Wi),m=p._query;const g=new _f(f);u={next:E=>{e[s]&&e[s](new la(f,g,p,E))},error:e[s+1],complete:e[s+2]},vS(r._query)}return(function(g,E,T,C){const O=new fg(C),L=new ug(E,O,T);return g.asyncQueue.enqueueAndForget((async()=>ag(await Qh(g),L))),()=>{O.Nu(),g.asyncQueue.enqueueAndForget((async()=>og(await Qh(g),L)))}})(wu(f),m,o,u)}function Ef(r,e){return(function(s,o){const u=new Gi;return s.asyncQueue.enqueueAndForget((async()=>fN(await wN(s),o,u))),u.promise})(wu(r),e)}function bS(r,e,n){const s=n.docs.get(e._key),o=new _f(r);return new ys(r,o,e._key,s,new co(n.hasPendingWrites,n.fromCache),e.converter)}const qN={maxAttempts:5};function Ql(r,e){if((r=zt(r)).firestore!==e)throw new me(ne.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return r}class HN{constructor(e,n){this._firestore=e,this._transaction=n,this._dataReader=xu(e)}get(e){const n=Ql(e,this._firestore),s=new UN(this._firestore);return this._transaction.lookup([n._key]).then((o=>{if(!o||o.length!==1)return Ae(24041);const u=o[0];if(u.isFoundDocument())return new Yh(this._firestore,s,u.key,u,n.converter);if(u.isNoDocument())return new Yh(this._firestore,s,n._key,null,n.converter);throw Ae(18433,{doc:u})}))}set(e,n,s){const o=Ql(e,this._firestore),u=Sg(o.converter,n,s),f=pg(this._dataReader,"Transaction.set",o._key,u,o.converter!==null,s);return this._transaction.set(o._key,f),this}update(e,n,s,...o){const u=Ql(e,this._firestore);let f;return f=typeof(n=zt(n))=="string"||n instanceof Ru?mS(this._dataReader,"Transaction.update",u._key,n,s,o):dS(this._dataReader,"Transaction.update",u._key,n),this._transaction.update(u._key,f),this}delete(e){const n=Ql(e,this._firestore);return this._transaction.delete(n._key),this}}class FN extends HN{constructor(e,n){super(e,n),this._firestore=e}get(e){const n=Ql(e,this._firestore),s=new _f(this._firestore);return super.get(e).then((o=>new ys(this._firestore,s,n._key,o._document,new co(!1,!1),n.converter)))}}function GN(r,e,n){r=_n(r,Wi);const s={...qN,...n};return(function(u){if(u.maxAttempts<1)throw new me(ne.INVALID_ARGUMENT,"Max attempts must be at least 1")})(s),(function(u,f,m){const p=new Gi;return u.asyncQueue.enqueueAndForget((async()=>{const g=await RN(u);new bN(u.asyncQueue,g,m,f,p).ju()})),p.promise})(wu(r),(o=>e(new FN(r,o))),s)}function ii(){return new gg("serverTimestamp")}function QN(r){return new yg("increment",r)}(function(e,n=!0){(function(o){Mo=o})(No),yo(new ca("firestore",((s,{instanceIdentifier:o,options:u})=>{const f=s.getProvider("app").getImmediate(),m=new Wi(new P2(s.getProvider("auth-internal")),new U2(f,s.getProvider("app-check-internal")),(function(g,E){if(!Object.prototype.hasOwnProperty.apply(g.options,["projectId"]))throw new me(ne.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new su(g.options.projectId,E)})(f,o),f);return u={useFetchStreams:n,...u},m._setSettings(u),m}),"PUBLIC").setMultipleInstances(!0)),ms(k0,P0,e),ms(k0,P0,"esm2020")})();const $N={apiKey:"AIzaSyDYdiJjDRBA9nGPj8LGDxAE4O6o6Qlyx68",authDomain:"labyrinth-6dc4f.firebaseapp.com",projectId:"labyrinth-6dc4f",storageBucket:"labyrinth-6dc4f.firebasestorage.app",messagingSenderId:"912154260516",appId:"1:912154260516:web:e118702708fb452fde14b1"},SS=cT($N),Bm=D2(SS),YN=new vr,qe=DN(SS),AS=k.createContext(),ya=()=>{const r=k.useContext(AS);if(!r)throw new Error("useAuth must be used within an AuthProvider");return r},KN=({children:r})=>{const[e,n]=k.useState(null),[s,o]=k.useState(!0);k.useEffect(()=>vx(Bm,g=>{n(g),o(!1)}),[]);const m={user:e,loading:s,loginWithGoogle:async()=>{try{return(await Ux(Bm,YN)).user}catch(p){throw console.error("Google login error:",p),p}},logout:async()=>{try{await _x(Bm)}catch(p){throw console.error("Logout error:",p),p}},isAuthenticated:!!e};return b.jsx(AS.Provider,{value:m,children:!s&&r})},wS=k.createContext(),Tf=()=>{const r=k.useContext(wS);if(!r)throw new Error("useMedia must be used within a MediaProvider");return r},XN=({children:r})=>{const[e,n]=k.useState(null),[s,o]=k.useState(!0),[u,f]=k.useState(!0),[m,p]=k.useState(!1),[g,E]=k.useState(null),[T,C]=k.useState([]),O=k.useRef(null),L=k.useRef(null),q=k.useCallback(async()=>{try{const R=await navigator.mediaDevices.enumerateDevices();return C(R),console.log(" Available devices:",R),R}catch(R){return console.error("Error enumerating devices:",R),[]}},[]),z=k.useCallback(async(R,N=null)=>{try{console.log(` Getting ${R} track...`);const V=R==="video"?{video:{width:{ideal:320},height:{ideal:240},frameRate:{ideal:15},facingMode:"user",...N&&{deviceId:{exact:N}}}}:{audio:{echoCancellation:!0,noiseSuppression:!0,autoGainControl:!0,...N&&{deviceId:{exact:N}}}};console.log("   Constraints:",V);const A=(await navigator.mediaDevices.getUserMedia(V)).getTracks()[0];return console.log(` Got ${R} track:`,{enabled:A.enabled,readyState:A.readyState,label:A.label,settings:A.getSettings?.()}),A.enabled=!0,A}catch(V){return console.error(` Error getting ${R} track:`,V),R==="video"?(console.log(" Creating fake video track for testing..."),$()):(console.log(" Creating fake audio track for testing..."),X())}},[]),$=()=>{console.log(" Creating fake video track...");const R=document.createElement("canvas");R.width=320,R.height=240;const N=R.getContext("2d");let V=0;setInterval(()=>{const ce=N.createLinearGradient(0,0,320,240);ce.addColorStop(0,"#8b5cf6"),ce.addColorStop(1,"#3b82f6"),N.fillStyle=ce,N.fillRect(0,0,320,240);const B=160+Math.sin(V*.05)*100,W=120+Math.cos(V*.05)*80;N.fillStyle="white",N.beginPath(),N.arc(B,W,30,0,Math.PI*2),N.fill(),N.fillStyle="white",N.font="bold 16px Arial",N.textAlign="center",N.fillText("FAKE CAMERA",160,50),N.fillText("For Testing",160,200),N.font="12px Arial",N.fillText("Enable real camera in settings",160,220),V++},100);const se=R.captureStream(10).getVideoTracks()[0];return se.enabled=!0,console.log(" Fake video track created"),se},X=()=>{console.log(" Creating fake audio track...");const R=new(window.AudioContext||window.webkitAudioContext),N=R.createOscillator(),V=R.createGain();N.connect(V),V.connect(R.destination),N.frequency.value=440,N.type="sine",V.gain.value=0,N.start();const x=R.createMediaStreamDestination();N.connect(x);const A=x.stream.getAudioTracks()[0];return A.enabled=!0,console.log(" Fake audio track created"),A},Z=k.useCallback(async(R={})=>{p(!0),E(null);try{console.log(" Initializing media...",R),O.current&&(O.current.stop(),O.current=null),L.current&&(L.current.stop(),L.current=null);const N=new MediaStream;let V=!1,x=!1;if(R.video!==!1)try{O.current=await z("video"),O.current&&(N.addTrack(O.current),V=!0,o(!0),console.log(" Video added to stream"))}catch(A){console.warn("Video init failed:",A),o(!1)}if(R.audio!==!1)try{L.current=await z("audio"),L.current&&(N.addTrack(L.current),x=!0,f(!0),console.log(" Audio added to stream"))}catch(A){console.warn("Audio init failed:",A),f(!1)}return!V&&!x&&E("Could not access camera or microphone. Please check permissions."),n(N),console.log(" Media initialized successfully!",{hasVideo:V,hasAudio:x,streamId:N.id}),await q(),N}catch(N){throw console.error(" Media initialization failed:",N),E(`Failed to initialize media: ${N.message}`),N}finally{p(!1)}},[z,q]),pe=k.useCallback(async()=>{p(!0);try{if(s){console.log(" Turning camera OFF..."),O.current&&(O.current.stop(),O.current=null);const R=new MediaStream;L.current&&R.addTrack(L.current),n(R),o(!1),console.log(" Camera OFF")}else{console.log(" Turning camera ON..."),O.current=await z("video");const R=new MediaStream;L.current&&R.addTrack(L.current),R.addTrack(O.current),n(R),o(!0),console.log(" Camera ON")}}catch(R){console.error("Error toggling camera:",R),E(`Camera error: ${R.message}`)}finally{p(!1)}},[s,z]),_e=k.useCallback(async()=>{p(!0);try{if(u){console.log(" Muting microphone..."),L.current&&(L.current.stop(),L.current=null);const R=new MediaStream;O.current&&R.addTrack(O.current),n(R),f(!1),console.log(" Microphone MUTED")}else{console.log(" Unmuting microphone..."),L.current=await z("audio");const R=new MediaStream;O.current&&R.addTrack(O.current),R.addTrack(L.current),n(R),f(!0),console.log(" Microphone UNMUTED")}}catch(R){console.error("Error toggling microphone:",R),E(`Microphone error: ${R.message}`)}finally{p(!1)}},[u,z]),Te=k.useCallback(()=>{O.current&&(O.current.stop(),O.current=null),L.current&&(L.current.stop(),L.current=null),n(null),o(!1),f(!1)},[]),D=k.useCallback(async()=>{console.log(" Restarting media with permission request...");try{return(await navigator.mediaDevices.getUserMedia({video:!0,audio:!0})).getTracks().forEach(N=>N.stop()),await Z({video:!0,audio:!0}),console.log(" Media restarted with permissions"),!0}catch(R){return console.error(" Permission request failed:",R),E(`Permission denied: ${R.message}`),!1}},[Z]);Hm.useEffect(()=>{(async()=>{try{await Z({video:!0,audio:!0})}catch{console.log("Auto-initialize failed, user will need to manually enable")}})()},[Z]),Hm.useEffect(()=>()=>{Te()},[Te]);const I={localStream:e,isCameraOn:s,isMicOn:u,isLoading:m,error:g,devices:T,initializeMedia:Z,toggleCamera:pe,toggleMicrophone:_e,stopMedia:Te,restartMediaWithPermissions:D,getDevices:q};return b.jsx(wS.Provider,{value:I,children:r})},WN=()=>Math.floor(1e5+Math.random()*9e5).toString(),JN=async r=>{const e=Lt(qe,"rooms"),n=yf(e,wo("roomCode","==",r));return(await Un(n)).empty},ZN=async(r,e)=>{try{let n,s=!1;for(let f=0;f<5&&(n=WN(),s=await JN(n),!s);f++);if(!s)throw new Error("Could not generate unique room code. Please try again.");const o={name:r.name||`${e.displayName}'s Room`,maxParticipants:Math.min(Math.max(r.maxParticipants,2),10),currentParticipants:1,hostId:e.uid,hostName:e.displayName,hostPhotoURL:e.photoURL||"",createdAt:ii(),lastActivity:ii(),isActive:!0,status:"waiting",roomCode:n},u=await BN(Lt(qe,"rooms"),o);return await ho(fn(qe,"rooms",u.id,"participants",e.uid),{name:e.displayName,email:e.email,photoURL:e.photoURL||"",joinedAt:ii(),isHost:!0,isActive:!0}),{id:u.id,...o,roomCode:n}}catch(n){throw console.error("Error creating room:",n),n}},Rh=async r=>{try{const e=fn(qe,"rooms",r),n=await vs(e);return n.exists()?{id:n.id,...n.data()}:null}catch(e){throw console.error("Error getting room:",e),e}},eO=async r=>{try{const e=Lt(qe,"rooms"),n=yf(e,wo("roomCode","==",r)),s=await Un(n);if(!s.empty){const o=s.docs[0];return{id:o.id,...o.data()}}return null}catch(e){throw console.error("Error getting room by code:",e),e}},tO=async()=>{try{const r=Lt(qe,"rooms"),e=yf(r,wo("isActive","==",!0),wo("status","in",["waiting","active"]));return(await Un(e)).docs.map(s=>({id:s.id,...s.data()}))}catch(r){throw console.error("Error getting active rooms:",r),r}},dh=async r=>{try{const e=Lt(qe,"rooms",r,"participants");return(await Un(e)).docs.map(s=>({id:s.id,...s.data()}))}catch(e){throw console.error("Error getting participants:",e),e}},nO=async(r,e)=>{try{console.log("=== JOIN ROOM ATTEMPT ==="),console.log(`User: ${e.uid} (${e.displayName})`),console.log(`Room: ${r}`);const n=fn(qe,"rooms",r,"participants",e.uid);if((await vs(n)).exists())return console.log("User already a participant, skipping join"),{alreadyJoined:!0};const o=fn(qe,"rooms",r),u=await vs(o);if(!u.exists())throw new Error("Room not found");const f=u.data();if(console.log("Current room state:",f),f.currentParticipants>=f.maxParticipants)throw console.log("Room is full, cannot join"),new Error("Room is full");console.log("Starting transaction to join room...");try{const m=await GN(qe,async p=>{const g=await p.get(o);if(!g.exists())throw new Error("Room not found");const E=g.data();if(console.log("Fresh room data in transaction:",E),E.currentParticipants>=E.maxParticipants)throw new Error("Room is now full");return(await p.get(n)).exists()?(console.log("User already joined (race condition detected)"),{alreadyJoined:!0}):(p.set(n,{name:e.displayName,email:e.email,photoURL:e.photoURL||"",joinedAt:ii(),isHost:!1,isActive:!0}),p.update(o,{currentParticipants:E.currentParticipants+1,lastActivity:ii()}),console.log("Transaction successful - user joined"),{success:!0,newCount:E.currentParticipants+1})});return console.log("Transaction result:",m),console.log("=== JOIN SUCCESSFUL ==="),m}catch(m){return console.error("Transaction error:",m),console.log("Trying non-transactional approach..."),await ho(n,{name:e.displayName,email:e.email,photoURL:e.photoURL||"",joinedAt:ii(),isHost:!1,isActive:!0}),await TS(o,{currentParticipants:QN(1),lastActivity:ii()}),console.log("Non-transactional join successful"),{success:!0,fallback:!0}}}catch(n){console.error("Join room error:",n);try{if((await vs(fn(qe,"rooms",r,"participants",e.uid))).exists())return console.log("User was added despite error (race condition)"),{alreadyJoined:!0}}catch(s){console.error("Final check error:",s)}throw n}},iO=async(r,e)=>{try{console.log("=== DEBUG ROOM STATE ===");const n=fn(qe,"rooms",r),s=await vs(n);if(s.exists()){const p=s.data();console.log("Room data:",p),console.log(`Participants: ${p.currentParticipants}/${p.maxParticipants}`)}else console.log("Room not found");const o=fn(qe,"rooms",r,"participants",e),u=await vs(o);console.log("Participant exists?",u.exists()),u.exists()&&console.log("Participant data:",u.data());const f=Lt(qe,"rooms",r,"participants"),m=await Un(f);console.log("All participants count:",m.docs.length),m.docs.forEach(p=>{console.log(`- ${p.id}: ${p.data().name}`)})}catch(n){console.error("Debug error:",n)}},rO=(r,e)=>{try{const n=fn(qe,"rooms",r);return console.log(`Setting up room listener for: ${r}`),aa(n,o=>{if(console.log(`Room snapshot received for ${r}:`,o.exists()),o.exists()){const u={id:o.id,...o.data()};console.log("Room data:",u),e(u)}else console.log("Room does not exist"),e(null)},o=>{console.error("Error in room listener:",o),e(null,o)})}catch(n){throw console.error("Error setting up room listener:",n),n}},sO=(r,e)=>{try{const n=Lt(qe,"rooms",r,"participants");return console.log(`Setting up participants listener for room: ${r}`),aa(n,o=>{const u=o.docs.map(f=>({id:f.id,...f.data()}));console.log(`Participants snapshot: ${u.length} participants`),e(u)},o=>{console.error("Error in participants listener:",o),e([],o)})}catch(n){throw console.error("Error setting up participants listener:",n),n}},aO=r=>{try{const e=Lt(qe,"rooms"),n=yf(e,wo("isActive","==",!0),wo("status","in",["waiting","active"]));return aa(n,o=>{const u=o.docs.map(f=>({id:f.id,...f.data()}));r(u)},o=>{console.error("Error listening to active rooms:",o)})}catch(e){throw console.error("Error setting up active rooms listener:",e),e}},RS=k.createContext(),Du=()=>{const r=k.useContext(RS);if(!r)throw new Error("useRoom must be used within a RoomProvider");return r},oO=({children:r})=>{const{user:e}=ya(),[n,s]=k.useState([]),[o,u]=k.useState(null),[f,m]=k.useState(!1),[p,g]=k.useState(null),E=async $=>{if(!e)throw new Error("User must be logged in");m(!0),g(null);try{const X=await ZN($,e);return s(Z=>[X,...Z]),u(X),X}catch(X){throw g(X.message),X}finally{m(!1)}},T=async()=>{m(!0);try{const $=await tO();return s($),$}catch($){throw g($.message),$}finally{m(!1)}},C=async $=>{m(!0);try{const X=await Rh($);if(!X||!X.isActive)throw new Error("Room not found or inactive");return u(X),X}catch(X){throw g(X.message),X}finally{m(!1)}},O=async $=>{m(!0);try{const X=await eO($);if(!X||!X.isActive)throw new Error("Room not found or inactive");return u(X),X}catch(X){throw g(X.message),X}finally{m(!1)}},L=()=>{u(null)},q=()=>{g(null)};k.useEffect(()=>{e&&T()},[e]);const z={rooms:n,currentRoom:o,loading:f,error:p,createRoom:E,fetchActiveRooms:T,joinRoomById:C,joinRoomByCode:O,leaveRoom:L,clearError:q,setCurrentRoom:u};return b.jsx(RS.Provider,{value:z,children:r})},CS=k.createContext(),xS=()=>{const r=k.useContext(CS);if(!r)throw new Error("usePeer must be used within a PeerProvider");return r},lO=({children:r})=>{const{user:e}=ya(),{localStream:n}=Tf(),{currentRoom:s}=Du(),[o,u]=k.useState({}),[f,m]=k.useState("idle"),[p,g]=k.useState(0),E=k.useRef({}),T=k.useRef(null),C=k.useRef([]),O={iceServers:[{urls:"stun:stun.l.google.com:19302"},{urls:"stun:stun1.l.google.com:19302"},{urls:"stun:stun2.l.google.com:19302"},{urls:"stun:stun3.l.google.com:19302"},{urls:"stun:stun4.l.google.com:19302"},{urls:"turn:openrelay.metered.ca:80",username:"openrelayproject",credential:"openrelayproject"},{urls:"turn:openrelay.metered.ca:443",username:"openrelayproject",credential:"openrelayproject"},{urls:"turn:openrelay.metered.ca:443?transport=tcp",username:"openrelayproject",credential:"openrelayproject"}],iceCandidatePoolSize:10,bundlePolicy:"max-bundle",rtcpMuxPolicy:"require"},L=k.useCallback(()=>{console.log(" Cleaning up peer connections"),Object.values(E.current).forEach(x=>{x&&x.signalingState!=="closed"&&x.close()}),E.current={},C.current.forEach(x=>x()),C.current=[],u({}),m("idle"),g(0),console.log(" Peer cleanup complete")},[]);k.useEffect(()=>{T.current=n,console.log(" Local stream updated:",n?.id)},[n]);const q=k.useCallback(async x=>{if(!(!e||!x)){console.log(" Initializing signaling for room:",x);try{const A=fn(qe,"rooms",x,"signaling",e.uid);await ho(A,{userId:e.uid,userName:e.displayName,isOnline:!0,lastSeen:ii(),status:"online",readyForConnection:!0},{merge:!0}),console.log(" Signaling document created/updated for user:",e.uid)}catch(A){console.error(" Error creating signaling document:",A)}}},[e]),z=k.useCallback((x,A)=>{console.log(" Creating peer connection to:",x);try{const se=new RTCPeerConnection(O);return E.current[x]=se,T.current?(console.log(" Adding local tracks to peer connection"),T.current.getTracks().forEach(ce=>{console.log(`Adding ${ce.kind} track:`,ce.enabled);try{se.addTrack(ce,T.current)}catch(B){console.error(`Error adding ${ce.kind} track:`,B)}})):console.warn(" No local stream available to add tracks"),se.ontrack=ce=>{if(console.log(" Received remote track from:",x),console.log("Event streams:",ce.streams),console.log("Event track:",ce.track),ce.streams&&ce.streams.length>0){const B=ce.streams[0];console.log(" Remote stream received:",B.id),B.getTracks().forEach(W=>{W.enabled=!0,console.log(`Enabled ${W.kind} track from remote`)}),u(W=>({...W,[x]:{...W[x],stream:B,connectionState:se.connectionState||"connected",userData:A,lastUpdated:Date.now()}}))}else if(ce.track){console.log(" Received individual track, creating stream");const B=new MediaStream([ce.track]);u(W=>({...W,[x]:{...W[x],stream:B,connectionState:se.connectionState||"connected",userData:A,lastUpdated:Date.now()}}))}},se.onicecandidate=ce=>{ce.candidate?(console.log(" New ICE candidate for:",x),X(x,ce.candidate)):console.log(" ICE candidate gathering complete for:",x)},se.onicegatheringstatechange=()=>{console.log(` ICE gathering state for ${x}:`,se.iceGatheringState)},se.onconnectionstatechange=()=>{const ce=se.connectionState;console.log(` Connection state with ${x}:`,ce),u(B=>({...B,[x]:{...B[x],connectionState:ce}})),ce==="connected"?(console.log(` Connected to ${x}`),m("connected"),s?.id&&e&&$("connected")):(ce==="disconnected"||ce==="failed")&&(console.log(` Connection ${ce} with ${x}, attempting restart...`),setTimeout(()=>{(E.current[x]?.connectionState==="disconnected"||E.current[x]?.connectionState==="failed")&&console.log(` Attempting to restart connection with ${x}`)},2e3))},se.oniceconnectionstatechange=()=>{console.log(` ICE connection state with ${x}:`,se.iceConnectionState),se.iceConnectionState==="failed"&&(console.log(` ICE connection failed for ${x}`),setTimeout(()=>{se.iceConnectionState==="failed"&&(console.log(` Restarting ICE for ${x}`),se.restartIce())},1e3))},se.onsignalingstatechange=()=>{console.log(` Signaling state with ${x}:`,se.signalingState)},console.log(" Peer connection created for:",x),se}catch(se){return console.error(" Error creating peer connection:",se),null}},[s?.id,e]),$=k.useCallback(async x=>{if(!(!s?.id||!e))try{const A=fn(qe,"rooms",s.id,"signaling",e.uid);await TS(A,{status:x,lastSeen:ii()})}catch(A){console.error("Error updating user status:",A)}},[s?.id,e]),X=k.useCallback(async(x,A)=>{if(!(!s?.id||!e))try{const se=fn(qe,"rooms",s.id,"signaling",x,"candidates",`${Date.now()}_${e.uid}`);await ho(se,{to:x,from:e.uid,candidate:JSON.stringify(A.toJSON()),timestamp:ii(),type:"candidate"}),console.log(" ICE candidate sent to:",x)}catch(se){console.error(" Error sending ICE candidate:",se)}},[s?.id,e]),Z=k.useCallback(async(x,A)=>{if(!(!s?.id||!e)){console.log(" Sending offer to user:",x);try{const se=fn(qe,"rooms",s.id,"signaling",x,"offers",`${Date.now()}_${e.uid}`);await ho(se,{sdp:JSON.stringify(A),from:e.uid,fromName:e.displayName,to:x,timestamp:ii(),type:"offer"}),console.log(" Offer saved to Firestore at path:",se.path)}catch(se){console.error(" Error sending offer:",se)}}},[s?.id,e]),pe=k.useCallback(async(x,A)=>{if(!(!s?.id||!e)){console.log(" Sending answer to user:",x);try{const se=fn(qe,"rooms",s.id,"signaling",x,"answers",`${Date.now()}_${e.uid}`);await ho(se,{sdp:JSON.stringify(A),from:e.uid,fromName:e.displayName,to:x,timestamp:ii(),type:"answer"}),console.log(" Answer saved to Firestore at path:",se.path)}catch(se){console.error(" Error sending answer:",se)}}},[s?.id,e]),_e=k.useCallback(async(x,A)=>{console.log(" handleIncomingOffer called for:",x),console.log("   Offer type:",A?.type);try{let se=E.current[x];if(!se){console.log("   Creating new peer connection...");const B={id:x,name:A.fromName||"Remote User"};if(se=z(x,B),!se){console.error("    Failed to create peer connection");return}}console.log("   Setting remote description..."),await se.setRemoteDescription(new RTCSessionDescription(A)),console.log("    Remote description set"),console.log("   Creating answer...");const ce=await se.createAnswer({offerToReceiveAudio:!0,offerToReceiveVideo:!0});console.log("   Answer created:",ce.type),console.log("   Setting local description..."),await se.setLocalDescription(ce),console.log("    Local description set"),console.log("   Sending answer to:",x),await pe(x,ce),console.log("    Answer sent"),u(B=>({...B,[x]:{...B[x],connectionState:se.connectionState,userData:{id:x,name:A.fromName||"Remote User"},stream:null}}))}catch(se){console.error(" Error in handleIncomingOffer:",se)}},[z,pe]),Te=k.useCallback(async(x,A)=>{console.log(" Handling incoming answer from:",x);const se=E.current[x];if(!se){console.error(" No peer connection found for:",x);return}try{const ce=new RTCSessionDescription(A);await se.setRemoteDescription(ce),console.log(" Remote description set for:",x)}catch(ce){console.error(" Error setting remote description:",ce)}},[]),D=k.useCallback(async(x,A)=>{console.log(" Handling incoming ICE candidate from:",x);const se=E.current[x];if(!se){console.error(" No peer connection found for ICE candidate:",x);return}try{await se.addIceCandidate(new RTCIceCandidate(A)),console.log(" ICE candidate added for:",x)}catch(ce){console.error(" Error adding ICE candidate:",ce)}},[]),I=k.useCallback(async(x,A)=>{if(!(!e||e.uid===x)){if(console.log(" Connecting to user:",x),console.log("   User data:",A),m("connecting"),E.current[x]){const se=E.current[x];if(console.log(` Already connected to ${x}: ${se.connectionState}`),se.connectionState==="connected")return}try{const se=z(x,A);if(!se)throw new Error("Failed to create peer connection");const ce={offerToReceiveAudio:!0,offerToReceiveVideo:!0,voiceActivityDetection:!0,iceRestart:!1},B=await se.createOffer(ce);try{B.sdp&&(B.sdp=B.sdp.replace(/a=rtpmap:(\d+) H264\/\d+/g,`a=rtpmap:$1 H264/90000\r
a=fmtp:$1 packetization-mode=1`))}catch(W){console.warn("Could not modify SDP:",W)}await se.setLocalDescription(B),await Z(x,B),console.log(" Offer created and sent to:",x),u(W=>({...W,[x]:{connectionState:"connecting",userData:A,stream:null,lastUpdated:Date.now()}}))}catch(se){console.error(" Error connecting to user:",se),m("error")}}},[e,z,Z]),R=k.useCallback(async x=>{console.log(` Refreshing connection with: ${x}`);const A=E.current[x];if(A)try{const se=await A.createOffer({offerToReceiveAudio:!0,offerToReceiveVideo:!0,iceRestart:!0});await A.setLocalDescription(se),await Z(x,se),console.log(" Refresh offer sent")}catch(se){console.error("Error refreshing connection:",se)}},[Z]);k.useEffect(()=>{s?.id&&e&&(console.log(" Initializing signaling for room:",s.id),q(s.id),$("ready"))},[s?.id,e,q,$]),k.useEffect(()=>()=>{L()},[L]),k.useEffect(()=>{if(!s?.id||!e)return;console.log(" Setting up offer listener for user:",e.uid);const x=Lt(qe,"rooms",s.id,"signaling",e.uid,"offers"),A=aa(x,se=>{se.docChanges().forEach(async ce=>{if(ce.type==="added"){const B=ce.doc.data();console.log(" NEW OFFER RECEIVED from:",B.from),console.log("   Offer data:",B);try{const W=JSON.parse(B.sdp);await _e(B.from,W),setTimeout(async()=>{try{await zm(ce.doc.ref),console.log(" Offer document cleaned up")}catch(te){console.error("Error deleting offer:",te)}},1e3)}catch(W){console.error(" Error processing offer:",W),console.error("   Raw offer data:",B)}}})},se=>{console.error(" Error in offer listener:",se)});return C.current.push(A),()=>{A()}},[s?.id,e,_e]),k.useEffect(()=>{if(!s?.id||!e)return;console.log(" Setting up answer listener");const x=Lt(qe,"rooms",s.id,"signaling",e.uid,"answers"),A=aa(x,se=>{se.docChanges().forEach(async ce=>{if(ce.type==="added"){const B=ce.doc.data();console.log(" Received answer from:",B.from);try{const W=JSON.parse(B.sdp);await Te(B.from,W),setTimeout(async()=>{try{await zm(ce.doc.ref)}catch(te){console.error("Error deleting answer:",te)}},1e3)}catch(W){console.error(" Error processing answer:",W)}}})});return C.current.push(A),()=>{A()}},[s?.id,e,Te]),k.useEffect(()=>{if(!s?.id||!e)return;console.log(" Setting up ICE candidate listener");const x=Lt(qe,"rooms",s.id,"signaling",e.uid,"candidates"),A=aa(x,se=>{se.docChanges().forEach(async ce=>{if(ce.type==="added"){const B=ce.doc.data();console.log(" Received ICE candidate from:",B.from);try{const W=JSON.parse(B.candidate);await D(B.from,W),setTimeout(async()=>{try{await zm(ce.doc.ref)}catch(te){console.error("Error deleting candidate:",te)}},1e3)}catch(W){console.error(" Error processing ICE candidate:",W)}}})});return C.current.push(A),()=>{A()}},[s?.id,e,D]),k.useEffect(()=>{if(!s?.id||!e)return;console.log(" Setting up participants listener"),console.log("   My ID:",e.uid),console.log("   Am I host?",s.hostId===e.uid);const x=Lt(qe,"rooms",s.id,"participants"),A=aa(x,se=>{const ce=se.docs.map(W=>({id:W.id,...W.data()}));console.log(" Participants update:",ce.length,"participants");const B=ce.filter(W=>W.id!==e.uid);if(console.log("   Other participants:",B.map(W=>W.name)),s.hostId===e.uid)console.log(` I AM THE HOST - should connect to ${B.length} others`),B.forEach((W,te)=>{E.current[W.id]||(console.log(`   [${te+1}] Connecting to ${W.name} (${W.id})`),setTimeout(()=>{I(W.id,{name:W.name,photoURL:W.photoURL})},1e3+te*500))});else{console.log(" I AM A JOINER - should connect to host only");const W=ce.find(te=>te.isHost);W&&W.id!==e.uid&&(E.current[W.id]||(console.log(`    Connecting to host: ${W.name}`),setTimeout(()=>{I(W.id,{name:W.name,photoURL:W.photoURL})},1e3)))}});return C.current.push(A),()=>{A()}},[s,e,I]),k.useEffect(()=>{const x=Object.values(o).filter(A=>A.connectionState==="connected").length;g(x),x>0?m("connected"):Object.keys(o).length>0?m("connecting"):m("idle"),console.log(" Peer connections update:",{totalPeers:Object.keys(o).length,connectedPeers:x,connectionStatus:f})},[o]),k.useEffect(()=>{const x=setInterval(()=>{Object.entries(E.current).forEach(([A,se])=>{se&&(se.connectionState==="disconnected"||se.connectionState==="failed"||se.connectionState==="closed")&&(console.log(` Cleaning up stale connection to ${A} (${se.connectionState})`),E.current[A]&&(E.current[A].close(),delete E.current[A]),u(ce=>{const B={...ce};return delete B[A],B}))})},15e3);return()=>clearInterval(x)},[]);const N=k.useCallback(()=>{console.clear(),console.log(" === PEER CONNECTIONS DEBUG ==="),console.log("Local user:",e?.uid),console.log("Room ID:",s?.id),console.log("Local stream:",T.current?.id),console.log(`
 Peer Connections Ref:`),Object.entries(E.current).forEach(([x,A])=>{console.log(` ${x}:`,{connectionState:A.connectionState,iceConnectionState:A.iceConnectionState,iceGatheringState:A.iceGatheringState,signalingState:A.signalingState})}),console.log(`
 Peers State:`),Object.entries(o).forEach(([x,A])=>{console.log(` ${x}:`,{name:A.userData?.name,connectionState:A.connectionState,hasStream:!!A.stream,streamId:A.stream?.id,streamActive:A.stream?.active,videoTracks:A.stream?.getVideoTracks().length,audioTracks:A.stream?.getAudioTracks().length})}),console.log(`
 WebRTC Support:`),console.log("RTCPeerConnection:",typeof RTCPeerContext<"u"?"":""),console.log("getUserMedia:",typeof navigator.mediaDevices?.getUserMedia<"u"?"":""),console.log("MediaStream:",typeof MediaStream<"u"?"":"")},[e,s,o]),V={peers:o,connectionStatus:f,activeConnections:p,connectToUser:I,refreshConnection:R,debugPeerConnections:N,cleanup:L};return b.jsx(CS.Provider,{value:V,children:r})},VE=({children:r})=>{const{user:e,loading:n}=ya();return n?b.jsx("div",{className:"flex-center",style:{minHeight:"100vh",backgroundColor:"var(--bg-dark)"},children:b.jsxs("div",{className:"text-center",children:[b.jsx("div",{className:"spinner"}),b.jsx("p",{style:{marginTop:"1rem",color:"var(--text-light)"},children:"Loading Labyrinth..."})]})}):e?r:b.jsx(fw,{to:"/",replace:!0})},qm=()=>{const{loginWithGoogle:r}=ya(),e=Io(),[n,s]=Hm.useState(!1),o=async()=>{s(!0);try{await r(),e("/dashboard")}catch(u){console.error("Login failed:",u),alert("Login failed. Please try again.")}finally{s(!1)}};return b.jsx("div",{style:{minHeight:"100vh",width:"100%",background:"linear-gradient(135deg, var(--primary-darker) 0%, var(--primary-dark) 100%)",display:"flex",alignItems:"center",justifyContent:"center",padding:"var(--space-md)"},children:b.jsxs("div",{style:{background:"var(--bg-card)",backdropFilter:"blur(20px)",borderRadius:"var(--radius-xl)",border:"1px solid var(--border-medium)",padding:"var(--space-xl)",width:"90%",maxWidth:"400px",boxShadow:"var(--shadow-xl)",margin:"0 auto"},children:[b.jsxs("div",{style:{textAlign:"center",marginBottom:"var(--space-xl)"},children:[b.jsx("h1",{style:{fontSize:"3rem",fontWeight:"700",background:"linear-gradient(135deg, var(--primary-purple), var(--accent-pink))",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",backgroundClip:"text",marginBottom:"var(--space-xs)",letterSpacing:"1px"},children:"Labyrinth"}),b.jsx("p",{style:{color:"var(--text-gray)",fontSize:"1.1rem",fontWeight:"300"},children:"Video Chat Maze"})]}),b.jsxs("div",{style:{textAlign:"center"},children:[b.jsx("h2",{style:{fontSize:"1.8rem",fontWeight:"600",marginBottom:"var(--space-sm)",color:"var(--text-light)"},children:"Welcome to Labyrinth"}),b.jsx("p",{style:{color:"var(--text-gray)",marginBottom:"var(--space-lg)",fontSize:"1rem",lineHeight:"1.5"},children:"Enter the maze of conversations. Connect, collaborate, and converse."}),b.jsx("button",{onClick:o,disabled:n,style:{width:"100%",background:"white",color:"#333",border:"none",padding:"var(--space-md)",borderRadius:"var(--radius-md)",fontSize:"1rem",fontWeight:"500",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"var(--space-sm)",transition:"all 0.2s ease",boxShadow:"var(--shadow-md)",opacity:n?.6:1},onMouseOver:u=>{n||(u.currentTarget.style.transform="translateY(-2px)",u.currentTarget.style.boxShadow="var(--shadow-lg)")},onMouseOut:u=>{n||(u.currentTarget.style.transform="translateY(0)",u.currentTarget.style.boxShadow="var(--shadow-md)")},children:n?b.jsxs(b.Fragment,{children:[b.jsx("div",{style:{width:"20px",height:"20px",border:"2px solid rgba(0, 0, 0, 0.1)",borderTopColor:"#333",borderRadius:"50%",animation:"spin 1s linear infinite"}}),b.jsx("span",{children:"Signing in..."})]}):b.jsxs(b.Fragment,{children:[b.jsxs("svg",{style:{width:"20px",height:"20px"},viewBox:"0 0 24 24",children:[b.jsx("path",{fill:"currentColor",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),b.jsx("path",{fill:"currentColor",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),b.jsx("path",{fill:"currentColor",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),b.jsx("path",{fill:"currentColor",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),b.jsx("span",{children:"Continue with Google"})]})}),b.jsx("div",{style:{marginTop:"var(--space-lg)",paddingTop:"var(--space-md)",borderTop:"1px solid var(--border-light)"},children:b.jsx("p",{style:{color:"var(--text-gray)",fontSize:"0.9rem",lineHeight:"1.4"},children:"By signing in, you agree to our Terms of Service and Privacy Policy"})})]})]})})},uO=({isOpen:r,onClose:e})=>{const{createRoom:n,loading:s}=Du(),o=Io(),[u,f]=k.useState({name:"",maxParticipants:4}),[m,p]=k.useState("");if(!r)return null;const g=async T=>{if(T.preventDefault(),p(""),u.maxParticipants<2||u.maxParticipants>10){p("Participants must be between 2 and 10");return}try{const C=await n(u);e(),o(`/room/${C.id}`)}catch(C){p(C.message||"Failed to create room")}},E=T=>{const{name:C,value:O}=T.target;f(L=>({...L,[C]:C==="maxParticipants"?parseInt(O)||2:O}))};return b.jsx("div",{style:_t.overlay,children:b.jsxs("div",{style:_t.modal,children:[b.jsxs("div",{style:_t.header,children:[b.jsx("h2",{style:_t.title,children:"Create New Room"}),b.jsx("button",{onClick:e,style:_t.closeButton,children:""})]}),b.jsxs("form",{onSubmit:g,style:_t.form,children:[b.jsx("div",{style:_t.formGroup,children:b.jsxs("label",{style:_t.label,children:["Room Name (Optional)",b.jsx("input",{type:"text",name:"name",value:u.name,onChange:E,placeholder:"Enter room name",style:_t.input,maxLength:30})]})}),b.jsx("div",{style:_t.formGroup,children:b.jsxs("label",{style:_t.label,children:["Maximum Participants: ",u.maxParticipants,b.jsxs("div",{style:_t.sliderContainer,children:[b.jsx("input",{type:"range",name:"maxParticipants",min:"2",max:"10",value:u.maxParticipants,onChange:E,style:_t.slider}),b.jsxs("div",{style:_t.sliderLabels,children:[b.jsx("span",{children:"2"}),b.jsx("span",{children:"10"})]})]}),b.jsx("div",{style:_t.participantHint,children:u.maxParticipants===10?"Max capacity (10 participants)":`${u.maxParticipants} participants maximum`})]})}),m&&b.jsx("div",{style:_t.error,children:m}),b.jsxs("div",{style:_t.buttonGroup,children:[b.jsx("button",{type:"button",onClick:e,style:_t.cancelButton,disabled:s,children:"Cancel"}),b.jsx("button",{type:"submit",style:_t.createButton,disabled:s,children:s?b.jsxs(b.Fragment,{children:[b.jsx("div",{style:_t.spinner}),"Creating..."]}):"Create Room"})]})]}),b.jsx("div",{style:_t.note,children:b.jsxs("p",{style:_t.noteText,children:[b.jsx("strong",{children:"Note:"})," You'll become the host of this room. You can invite others using the room code that will be generated."]})})]})})},_t={overlay:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.7)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3,backdropFilter:"blur(4px)"},modal:{backgroundColor:"var(--bg-card)",borderRadius:"var(--radius-lg)",border:"1px solid var(--border-medium)",width:"90%",maxWidth:"500px",maxHeight:"90vh",overflow:"auto",boxShadow:"var(--shadow-xl)"},header:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"var(--space-lg)",borderBottom:"1px solid var(--border-light)"},title:{fontSize:"1.5rem",fontWeight:"600",color:"var(--text-light)",margin:0},closeButton:{background:"none",border:"none",fontSize:"2rem",color:"var(--text-gray)",cursor:"pointer",padding:"0",width:"40px",height:"40px",display:"flex",alignItems:"center",justifyContent:"center",borderRadius:"50%",transition:"all 0.2s ease"},form:{padding:"var(--space-lg)"},formGroup:{marginBottom:"var(--space-lg)"},label:{display:"block",color:"var(--text-light)",marginBottom:"var(--space-sm)",fontSize:"0.95rem",fontWeight:"500"},input:{width:"100%",padding:"var(--space-sm)",backgroundColor:"rgba(255, 255, 255, 0.1)",border:"1px solid var(--border-light)",borderRadius:"var(--radius-md)",color:"var(--text-light)",fontSize:"1rem",marginTop:"var(--space-xs)",transition:"all 0.2s ease"},sliderContainer:{marginTop:"var(--space-sm)"},slider:{width:"100%",height:"6px",borderRadius:"3px",backgroundColor:"rgba(255, 255, 255, 0.1)",outline:"none",opacity:"0.7",transition:"opacity 0.2s",WebkitAppearance:"none"},sliderLabels:{display:"flex",justifyContent:"space-between",marginTop:"var(--space-xs)",color:"var(--text-gray)",fontSize:"0.9rem"},participantHint:{marginTop:"var(--space-xs)",color:"var(--accent-blue)",fontSize:"0.9rem",fontStyle:"italic"},error:{backgroundColor:"rgba(239, 68, 68, 0.2)",color:"#f87171",padding:"var(--space-sm)",borderRadius:"var(--radius-md)",marginBottom:"var(--space-md)",fontSize:"0.9rem"},buttonGroup:{display:"flex",gap:"var(--space-md)",marginTop:"var(--space-xl)"},cancelButton:{flex:1,padding:"var(--space-md)",backgroundColor:"rgba(255, 255, 255, 0.1)",border:"1px solid var(--border-light)",borderRadius:"var(--radius-md)",color:"var(--text-light)",fontSize:"1rem",fontWeight:"500",cursor:"pointer",transition:"all 0.2s ease"},createButton:{flex:2,padding:"var(--space-md)",background:"linear-gradient(135deg, var(--primary-purple), var(--primary-indigo))",border:"none",borderRadius:"var(--radius-md)",color:"white",fontSize:"1rem",fontWeight:"600",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"var(--space-sm)",transition:"all 0.2s ease"},spinner:{width:"20px",height:"20px",border:"2px solid rgba(255, 255, 255, 0.3)",borderTopColor:"white",borderRadius:"50%",animation:"spin 1s linear infinite"},note:{padding:"var(--space-lg)",backgroundColor:"rgba(59, 130, 246, 0.1)",borderTop:"1px solid rgba(59, 130, 246, 0.3)",borderBottomLeftRadius:"var(--radius-lg)",borderBottomRightRadius:"var(--radius-lg)"},noteText:{margin:0,color:"#93c5fd",fontSize:"0.9rem",lineHeight:1.5}},cO=()=>{const{user:r,logout:e}=ya(),{rooms:n,loading:s,error:o,fetchActiveRooms:u}=Du(),f=Io(),[m,p]=k.useState(n),[g,E]=k.useState(!1),[T,C]=k.useState(!1),[O,L]=k.useState("");k.useEffect(()=>{if(!r)return;console.log("Setting up dashboard room listeners");const Z=aO(pe=>{console.log("Dashboard rooms updated:",pe.length,"rooms"),pe.forEach(_e=>{console.log(`Room ${_e.id}: ${_e.currentParticipants}/${_e.maxParticipants}`)}),p(pe)});return()=>{console.log("Cleaning up dashboard listeners"),Z()}},[r]),k.useEffect(()=>{p(n)},[n]);const q=async()=>{try{await e(),f("/")}catch(Z){console.error("Logout failed:",Z)}},z=async Z=>{C(!0),L("");try{const pe=m.find(_e=>_e.id===Z);if(!pe){L("Room not found");return}if(pe.currentParticipants>=pe.maxParticipants){L("This room is now full");return}if(!pe.isActive||pe.status==="ended"){L("This room is no longer active");return}f(`/room/${Z}`)}catch(pe){console.error("Error joining room:",pe),L("Failed to join room. Please try again.")}finally{C(!1)}},$=Z=>{if(!Z)return"Just now";let pe;if(Z.toDate)pe=Z.toDate();else if(Z instanceof Date)pe=Z;else if(Z.seconds)pe=new Date(Z.seconds*1e3);else return"Just now";const Te=new Date-pe,D=Math.floor(Te/6e4);if(D<1)return"Just now";if(D<60)return`${D}m ago`;const I=Math.floor(D/60);return I<24?`${I}h ago`:`${Math.floor(I/24)}d ago`},X=Z=>Z.currentParticipants>=Z.maxParticipants;return b.jsxs(b.Fragment,{children:[b.jsxs("div",{className:"dashboard-page",children:[b.jsx("nav",{className:"dashboard-nav",children:b.jsxs("div",{className:"container nav-container",children:[b.jsxs("div",{className:"nav-left",children:[b.jsx("div",{className:"nav-logo"}),b.jsx("h1",{className:"nav-title",children:"Labyrinth"})]}),b.jsxs("div",{className:"nav-right",children:[b.jsxs("div",{className:"user-info",children:[r?.photoURL&&b.jsx("img",{src:r.photoURL,alt:r.displayName,className:"user-avatar"}),b.jsx("span",{className:"user-name",children:r?.displayName})]}),b.jsx("button",{onClick:q,className:"logout-btn",children:"Logout"})]})]})}),b.jsx("main",{className:"dashboard-main",children:b.jsx("div",{className:"container",children:b.jsxs("div",{className:"dashboard-content",children:[b.jsxs("div",{className:"dashboard-header",children:[b.jsx("h2",{className:"dashboard-title",children:"Labyrinth Dashboard"}),b.jsx("p",{className:"dashboard-subtitle",children:"Create or join video chat rooms. Host meetings, collaborate, and connect."})]}),b.jsxs("div",{style:Oe.quickActions,children:[b.jsxs("div",{style:Oe.actionCard,children:[b.jsx("div",{style:Oe.actionIcon,children:""}),b.jsx("h3",{style:Oe.actionTitle,children:"Create Room"}),b.jsx("p",{style:Oe.actionDescription,children:"Start a new video chat room. Set participant limits and invite others."}),b.jsx("button",{onClick:()=>E(!0),style:Oe.actionButton,children:"Create New Room"})]}),b.jsxs("div",{style:Oe.actionCard,children:[b.jsx("div",{style:Oe.actionIcon,children:""}),b.jsx("h3",{style:Oe.actionTitle,children:"Active Rooms"}),b.jsx("p",{style:Oe.actionDescription,children:m.length===0?"No active rooms. Be the first to create one!":`${m.length} room${m.length!==1?"s":""} available`}),b.jsx("button",{onClick:u,style:Oe.refreshButton,disabled:s,children:s?"Refreshing...":" Refresh List"})]})]}),b.jsxs("div",{style:Oe.roomsSection,children:[b.jsxs("div",{style:Oe.sectionHeader,children:[b.jsxs("h3",{style:Oe.sectionTitle,children:["Available Rooms ",m.length>0&&`(${m.length})`]}),O&&b.jsxs("div",{style:Oe.joinErrorBanner,children:[O,b.jsx("button",{onClick:()=>L(""),style:Oe.dismissError,children:""})]})]}),o&&b.jsxs("div",{style:Oe.errorMessage,children:["Error: ",o,b.jsx("button",{onClick:u,style:Oe.retryButton,children:"Retry"})]}),s&&m.length===0?b.jsxs("div",{style:Oe.loading,children:[b.jsx("div",{style:Oe.spinner}),b.jsx("p",{children:"Loading rooms..."})]}):m.length===0?b.jsxs("div",{style:Oe.emptyState,children:[b.jsx("div",{style:Oe.emptyIcon,children:""}),b.jsx("h4",{style:Oe.emptyTitle,children:"No Active Rooms"}),b.jsx("p",{style:Oe.emptyText,children:'Be the first to create a room! Click "Create New Room" above.'})]}):b.jsx("div",{style:Oe.roomsGrid,children:m.map(Z=>{const pe=X(Z);return b.jsxs("div",{style:{...Oe.roomCard,...pe?Oe.roomCardFull:{},...T?Oe.roomCardDisabled:{}},children:[b.jsxs("div",{style:Oe.roomHeader,children:[b.jsxs("div",{style:Oe.roomHost,children:[Z.hostPhotoURL?b.jsx("img",{src:Z.hostPhotoURL,alt:Z.hostName,style:Oe.hostAvatar}):b.jsx("div",{style:Oe.defaultAvatar,children:Z.hostName.charAt(0)}),b.jsx("span",{style:Oe.hostName,children:Z.hostName})]}),b.jsxs("div",{style:Oe.roomCode,children:["#",Z.roomCode]})]}),b.jsx("h4",{style:Oe.roomName,children:Z.name}),b.jsxs("div",{style:Oe.roomDetails,children:[b.jsxs("div",{style:Oe.participantInfo,children:[b.jsxs("span",{style:{...Oe.participantCount,...pe?Oe.participantCountFull:{}},children:[Z.currentParticipants,"/",Z.maxParticipants]}),b.jsx("span",{style:Oe.participantLabel,children:pe?"FULL":"participants"})]}),b.jsx("div",{style:Oe.roomTime,children:$(Z.createdAt)})]}),pe?b.jsx("div",{style:Oe.fullRoomBadge,children:b.jsx("span",{style:Oe.fullRoomText,children:"Room Full"})}):b.jsx("button",{style:Oe.joinRoomButton,onClick:()=>z(Z.id),disabled:T,children:T?"Joining...":"Join Room"})]},Z.id)})})]})]})})})]}),b.jsx(uO,{isOpen:g,onClose:()=>E(!1)})]})},Oe={quickActions:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(300px, 1fr))",gap:"var(--space-lg)",marginBottom:"var(--space-xl)"},actionCard:{backgroundColor:"var(--bg-card-light)",border:"1px solid var(--border-light)",borderRadius:"var(--radius-lg)",padding:"var(--space-lg)",transition:"all 0.3s ease"},actionIcon:{fontSize:"2.5rem",marginBottom:"var(--space-md)"},actionTitle:{fontSize:"1.3rem",fontWeight:"600",marginBottom:"var(--space-sm)",color:"var(--text-light)"},actionDescription:{color:"var(--text-gray)",marginBottom:"var(--space-md)",lineHeight:1.5},actionButton:{width:"100%",padding:"var(--space-md)",background:"linear-gradient(135deg, var(--primary-purple), var(--primary-indigo))",border:"none",borderRadius:"var(--radius-md)",color:"white",fontSize:"1rem",fontWeight:"600",cursor:"pointer",transition:"all 0.2s ease"},refreshButton:{width:"100%",padding:"var(--space-md)",backgroundColor:"rgba(255, 255, 255, 0.1)",border:"1px solid var(--border-light)",borderRadius:"var(--radius-md)",color:"var(--text-light)",fontSize:"1rem",fontWeight:"500",cursor:"pointer",transition:"all 0.2s ease"},roomsSection:{marginTop:"var(--space-xl)"},sectionHeader:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"var(--space-lg)"},sectionTitle:{fontSize:"1.5rem",fontWeight:"600",color:"var(--text-light)",margin:0},joinErrorBanner:{backgroundColor:"rgba(239, 68, 68, 0.2)",color:"#f87171",padding:"8px 16px",borderRadius:"var(--radius-md)",display:"flex",alignItems:"center",gap:"10px"},dismissError:{background:"none",border:"none",color:"#f87171",fontSize:"1.2rem",cursor:"pointer",padding:"0",width:"24px",height:"24px",display:"flex",alignItems:"center",justifyContent:"center",borderRadius:"50%"},errorMessage:{backgroundColor:"rgba(239, 68, 68, 0.2)",color:"#f87171",padding:"var(--space-md)",borderRadius:"var(--radius-md)",marginBottom:"var(--space-md)"},retryButton:{marginLeft:"10px",padding:"4px 12px",backgroundColor:"rgba(59, 130, 246, 0.2)",border:"1px solid rgba(59, 130, 246, 0.3)",borderRadius:"4px",color:"#93c5fd",cursor:"pointer",fontSize:"0.9rem"},loading:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:"var(--space-xl)",color:"var(--text-gray)"},spinner:{width:"40px",height:"40px",border:"3px solid rgba(255, 255, 255, 0.1)",borderTopColor:"var(--primary-purple)",borderRadius:"50%",animation:"spin 1s linear infinite",marginBottom:"var(--space-md)"},emptyState:{textAlign:"center",padding:"var(--space-xl)",color:"var(--text-gray)"},emptyIcon:{fontSize:"4rem",marginBottom:"var(--space-md)",opacity:.5},emptyTitle:{fontSize:"1.5rem",marginBottom:"var(--space-sm)",color:"var(--text-light)"},emptyText:{fontSize:"1rem",lineHeight:1.5},roomsGrid:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(300px, 1fr))",gap:"var(--space-md)"},roomCard:{backgroundColor:"var(--bg-card-light)",border:"1px solid var(--border-light)",borderRadius:"var(--radius-lg)",padding:"var(--space-lg)",transition:"all 0.3s ease"},roomCardFull:{borderColor:"rgba(239, 68, 68, 0.3)",backgroundColor:"rgba(30, 41, 59, 0.5)"},roomCardDisabled:{pointerEvents:"none",opacity:.5},roomHeader:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"var(--space-md)"},roomHost:{display:"flex",alignItems:"center",gap:"var(--space-sm)"},hostAvatar:{width:"32px",height:"32px",borderRadius:"50%",border:"2px solid var(--border-light)"},defaultAvatar:{width:"32px",height:"32px",borderRadius:"50%",backgroundColor:"var(--primary-purple)",display:"flex",alignItems:"center",justifyContent:"center",color:"white",fontWeight:"600",fontSize:"0.9rem"},hostName:{fontSize:"0.9rem",color:"var(--text-light)",fontWeight:"500"},roomCode:{backgroundColor:"rgba(124, 58, 237, 0.2)",color:"#a78bfa",padding:"var(--space-xs) var(--space-sm)",borderRadius:"var(--radius-sm)",fontSize:"0.8rem",fontWeight:"600",fontFamily:"monospace"},roomName:{fontSize:"1.2rem",fontWeight:"600",color:"var(--text-light)",marginBottom:"var(--space-md)"},roomDetails:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"var(--space-lg)"},participantInfo:{display:"flex",alignItems:"baseline",gap:"var(--space-xs)"},participantCount:{fontSize:"1.5rem",fontWeight:"700",color:"var(--text-light)"},participantCountFull:{color:"#f87171"},participantLabel:{fontSize:"0.9rem",color:"var(--text-gray)"},roomTime:{fontSize:"0.9rem",color:"var(--text-gray)"},fullRoomBadge:{width:"100%",padding:"12px",backgroundColor:"rgba(239, 68, 68, 0.1)",border:"1px solid rgba(239, 68, 68, 0.2)",borderRadius:"var(--radius-md)",textAlign:"center"},fullRoomText:{color:"#f87171",fontWeight:"600",fontSize:"0.9rem"},joinRoomButton:{width:"100%",padding:"var(--space-sm)",backgroundColor:"rgba(59, 130, 246, 0.2)",border:"1px solid rgba(59, 130, 246, 0.3)",borderRadius:"var(--radius-md)",color:"#93c5fd",fontSize:"0.9rem",fontWeight:"600",cursor:"pointer",transition:"all 0.2s ease"}},hO=()=>{const{user:r}=ya(),{currentRoom:e}=Du(),{peers:n,connectionStatus:s,activeConnections:o}=xS(),[u,f]=k.useState(null),[m,p]=k.useState(!1),g=async()=>{p(!0),f(null),console.log("=== CONNECTION DEBUG ===");const E={timestamp:new Date().toISOString(),user:{id:r?.uid,name:r?.displayName},room:{id:e?.id,name:e?.name},peers:Object.keys(n).length,connectionStatus:s,activeConnections:o};if(console.log("Basic Info:",E),e?.id&&r?.uid)try{const T=Lt(qe,"rooms",e.id,"signaling",r.uid,"offers"),C=await Un(T);E.offersCount=C.docs.length,E.offers=C.docs.map(O=>({id:O.id,from:O.data().from,timestamp:O.data().timestamp})),console.log("Offers found:",E.offersCount),console.log("Offers details:",E.offers)}catch(T){console.error("Error checking offers:",T),E.offersError=T.message}f(E),p(!1)};return b.jsxs("div",{style:{background:"rgba(0,0,0,0.9)",color:"white",padding:"15px",borderRadius:"8px",marginTop:"15px",fontSize:"12px",maxWidth:"400px"},children:[b.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"10px"},children:[b.jsx("strong",{style:{fontSize:"14px"},children:" Connection Debug"}),b.jsx("button",{onClick:g,disabled:m,style:{padding:"5px 10px",background:m?"#6b7280":"#8b5cf6",color:"white",border:"none",borderRadius:"4px",cursor:m?"not-allowed":"pointer",fontSize:"11px"},children:m?"Checking...":"Run Test"})]}),b.jsxs("div",{style:{marginBottom:"8px"},children:[b.jsx("span",{style:{color:"#93c5fd"},children:"Status:"})," ",s]}),b.jsxs("div",{style:{marginBottom:"8px"},children:[b.jsx("span",{style:{color:"#93c5fd"},children:"Active Peers:"})," ",o]}),b.jsxs("div",{style:{marginBottom:"8px"},children:[b.jsx("span",{style:{color:"#93c5fd"},children:"Room ID:"})," ",e?.id?.substring(0,10),"..."]}),b.jsxs("div",{style:{marginBottom:"8px"},children:[b.jsx("span",{style:{color:"#93c5fd"},children:"User ID:"})," ",r?.uid?.substring(0,10),"..."]}),u&&b.jsxs("div",{style:{marginTop:"10px",padding:"10px",background:"rgba(255,255,255,0.1)",borderRadius:"4px",fontSize:"11px"},children:[b.jsx("div",{style:{marginBottom:"5px"},children:b.jsx("strong",{children:" Debug Results:"})}),b.jsxs("div",{style:{marginBottom:"3px"},children:[b.jsx("span",{style:{color:"#86efac"},children:"Offers in my collection:"})," ",u.offersCount||0]}),u.offers&&u.offers.length>0&&b.jsxs("div",{style:{marginTop:"5px"},children:[b.jsx("div",{style:{color:"#fbbf24",marginBottom:"3px"},children:" Offers found:"}),u.offers.map((E,T)=>b.jsxs("div",{style:{marginLeft:"10px",marginBottom:"2px"},children:["From: ",E.from?.substring(0,10),"..."]},T))]}),u.offersError&&b.jsxs("div",{style:{color:"#f87171",marginTop:"5px"},children:["Error: ",u.offersError]}),b.jsxs("div",{style:{marginTop:"5px",fontSize:"10px",opacity:.7},children:["Last checked: ",new Date(u.timestamp).toLocaleTimeString()]})]}),b.jsxs("div",{style:{marginTop:"10px",fontSize:"10px",opacity:.7},children:[b.jsx("div",{children:"User A (Chad): iMKGFzfEF1esEzNogBHreM89MzH2"}),b.jsx("div",{children:"User B (Gautam): GuUKvuO8E0goWwF89MK46MLiImt1"})]})]})},fO=({stream:r,userData:e,connectionState:n})=>{const s=k.useRef(null),[o,u]=k.useState(!1),[f,m]=k.useState(!1),[p,g]=k.useState({video:[],audio:[]}),[E,T]=k.useState(null);k.useEffect(()=>{if(console.log(" RemoteVideo useEffect called for user:",e?.name),console.log("   Stream exists:",!!r),console.log("   Stream active:",r?.active),console.log("   Stream id:",r?.id),!r){console.log(" No stream provided");return}const O=r.getVideoTracks(),L=r.getAudioTracks();if(console.log(" Initial track check:",{videoTracks:O.length,audioTracks:L.length,videoEnabled:O[0]?.enabled,audioEnabled:L[0]?.enabled}),g({video:O.map(q=>({enabled:q.enabled,kind:q.kind,label:q.label||"No label"})),audio:L.map(q=>({enabled:q.enabled,kind:q.kind,label:q.label||"No label"}))}),u(O.length>0&&O[0].enabled),m(L.length>0&&L[0].enabled),s.current){console.log(" Setting video srcObject..."),s.current.srcObject=r,O.forEach($=>{$.enabled||(console.log(" Enabling video track..."),$.enabled=!0)}),L.forEach($=>{$.enabled||(console.log(" Enabling audio track..."),$.enabled=!0)});const q=()=>{s.current&&s.current.paused&&(console.log(" Attempting to play video..."),s.current.play().then(()=>{console.log(" Video play succeeded"),T(null)}).catch($=>{console.error(" Video play failed:",$),T($.message),setTimeout(()=>{s.current&&s.current.paused&&s.current.play().catch(X=>{console.log("Second play attempt failed:",X)})},1e3)}))};q(),s.current.onloadedmetadata=()=>{console.log(" Video metadata loaded"),q()},s.current.oncanplay=()=>{console.log(" Video can play"),q()};const z=()=>{const $=r.getVideoTracks(),X=r.getAudioTracks();u($.length>0&&$[0]?.enabled),m(X.length>0&&X[0]?.enabled),console.log(" Track change detected:",{video:$.length>0&&$[0]?.enabled,audio:X.length>0&&X[0]?.enabled})};return r.getTracks().forEach($=>{$.addEventListener("ended",z),$.addEventListener("mute",z),$.addEventListener("unmute",z)}),()=>{r.getTracks().forEach($=>{$.removeEventListener("ended",z),$.removeEventListener("mute",z),$.removeEventListener("unmute",z)})}}},[r,e]),k.useEffect(()=>{if(r){r.getTracks().forEach(L=>{L.enabled||(console.log(`Enabling ${L.kind} track`),L.enabled=!0)});const O=()=>{const L=r.getVideoTracks(),q=r.getAudioTracks();console.log("Track change detected:",{video:L.length>0&&L[0]?.enabled,audio:q.length>0&&q[0]?.enabled}),u(L.length>0&&L[0]?.enabled),m(q.length>0&&q[0]?.enabled)};return r.getTracks().forEach(L=>{L.addEventListener("ended",O),L.addEventListener("mute",O),L.addEventListener("unmute",O)}),()=>{r.getTracks().forEach(L=>{L.removeEventListener("ended",O),L.removeEventListener("mute",O),L.removeEventListener("unmute",O)})}}},[r]),k.useEffect(()=>{const O=setTimeout(()=>{s.current&&s.current.paused&&o&&(console.log(" Force playing video after timeout..."),s.current.play().catch(L=>{console.error("Force play error:",L)}))},2e3);return()=>clearTimeout(O)},[o]);const C=()=>{switch(n){case"connected":return"#10b981";case"connecting":return"#f59e0b";case"disconnected":return"#ef4444";case"failed":return"#dc2626";default:return"#6b7280"}};return b.jsxs("div",{style:At.container,children:[b.jsxs("div",{style:At.videoWrapper,children:[o?b.jsxs(b.Fragment,{children:[b.jsx("video",{ref:s,autoPlay:!0,playsInline:!0,style:At.video,muted:!1,onLoadedMetadata:()=>console.log(" onLoadedMetadata fired"),onCanPlay:()=>console.log(" onCanPlay fired"),onPlay:()=>console.log(" onPlay fired"),onError:O=>{console.error(" Video error event:",O),T(s.current?.error?.message||"Unknown error")}}),b.jsxs("div",{style:At.debugOverlay,children:[b.jsxs("div",{style:At.debugRow,children:[b.jsxs("span",{children:[": ",p.video.length]}),b.jsxs("span",{children:[": ",p.audio.length]})]}),b.jsxs("div",{style:At.debugRow,children:[b.jsx("span",{style:{color:o?"#10b981":"#ef4444"},children:o?"VIDEO ON":"VIDEO OFF"}),b.jsx("span",{style:{color:f?"#10b981":"#ef4444"},children:f?"AUDIO ON":"AUDIO OFF"})]})]}),E&&b.jsxs("div",{style:At.errorOverlay,children:[b.jsxs("div",{style:At.errorText,children:[" ",E]}),b.jsx("button",{style:At.retryButton,onClick:()=>s.current?.play(),children:"Retry Play"})]})]}):b.jsxs("div",{style:At.noVideoPlaceholder,children:[b.jsx("div",{style:At.avatar,children:e?.name?.charAt(0)||"U"}),b.jsx("p",{style:At.noVideoText,children:"Waiting for video..."}),b.jsxs("div",{style:At.trackInfo,children:[b.jsxs("div",{children:["Video tracks: ",p.video.length]}),b.jsxs("div",{children:["Audio tracks: ",p.audio.length]}),p.video.length>0&&b.jsx("div",{style:{fontSize:"0.7rem",color:"#f59e0b"},children:"Track exists but not enabled"})]})]}),b.jsxs("div",{style:At.statusOverlay,children:[b.jsxs("div",{style:At.statusIcons,children:[b.jsx("div",{style:{...At.statusIcon,backgroundColor:o?"rgba(34, 197, 94, 0.7)":"rgba(239, 68, 68, 0.7)"},children:o?"":""}),b.jsx("div",{style:{...At.statusIcon,backgroundColor:f?"rgba(34, 197, 94, 0.7)":"rgba(239, 68, 68, 0.7)"},children:f?"":""})]}),b.jsx("div",{style:{...At.connectionStatus,backgroundColor:C()},children:n||"unknown"})]}),b.jsx("div",{style:At.nameLabel,children:e?.name||"Remote User"})]}),b.jsx("div",{style:At.debugPanel,children:b.jsx("button",{style:At.debugButton,onClick:()=>{console.log(" Remote stream debug:",{stream:r,tracks:r?.getTracks(),videoTracks:r?.getVideoTracks(),audioTracks:r?.getAudioTracks(),videoElement:s.current,videoElementState:s.current?{srcObject:s.current.srcObject,readyState:s.current.readyState,error:s.current.error,paused:s.current.paused,currentTime:s.current.currentTime,videoWidth:s.current.videoWidth,videoHeight:s.current.videoHeight}:null}),r&&(r.getVideoTracks().forEach(O=>{O.enabled=!0,console.log(" Enabled video track")}),r.getAudioTracks().forEach(O=>{O.enabled=!0,console.log(" Enabled audio track")})),s.current&&s.current.paused&&s.current.play().then(()=>{console.log(" Manual play succeeded")}).catch(O=>{console.error(" Manual play failed:",O)})},children:"Debug Stream"})})]})},At={container:{width:"100%",height:"100%",position:"relative",backgroundColor:"#000",borderRadius:"var(--radius-lg)",overflow:"hidden",border:"3px solid #3b82f6"},videoWrapper:{width:"100%",height:"100%",position:"relative"},video:{width:"100%",height:"100%",objectFit:"cover",backgroundColor:"#000",transform:"scaleX(-1)",display:"block"},debugOverlay:{position:"absolute",top:"5px",right:"5px",backgroundColor:"rgba(0, 0, 0, 0.8)",padding:"5px 10px",borderRadius:"4px",fontSize:"0.7rem",color:"white",fontFamily:"monospace"},debugRow:{display:"flex",gap:"10px",justifyContent:"space-between"},errorOverlay:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",backgroundColor:"rgba(239, 68, 68, 0.8)",padding:"10px",borderRadius:"8px",color:"white",textAlign:"center",zIndex:20},errorText:{marginBottom:"10px",fontSize:"0.8rem"},retryButton:{padding:"5px 10px",backgroundColor:"white",color:"#ef4444",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"0.7rem"},noVideoPlaceholder:{width:"100%",height:"100%",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",backgroundColor:"#1e293b",color:"#94a3b8"},avatar:{width:"80px",height:"80px",borderRadius:"50%",backgroundColor:"#8b5cf6",display:"flex",alignItems:"center",justifyContent:"center",color:"white",fontSize:"2rem",fontWeight:"600",marginBottom:"10px"},noVideoText:{fontSize:"0.9rem",marginBottom:"10px"},trackInfo:{fontSize:"0.8rem",display:"flex",flexDirection:"column",gap:"5px",alignItems:"center",backgroundColor:"rgba(0, 0, 0, 0.3)",padding:"10px",borderRadius:"8px"},statusOverlay:{position:"absolute",top:"10px",left:"10px",right:"10px",display:"flex",justifyContent:"space-between",alignItems:"flex-start",zIndex:10},statusIcons:{display:"flex",gap:"5px"},statusIcon:{padding:"4px 8px",borderRadius:"12px",fontSize:"0.8rem",color:"white",backdropFilter:"blur(10px)",minWidth:"40px",textAlign:"center"},connectionStatus:{padding:"4px 8px",borderRadius:"12px",fontSize:"0.7rem",color:"white",fontWeight:"600",textTransform:"uppercase",backdropFilter:"blur(10px)",backgroundColor:"rgba(0, 0, 0, 0.5)"},nameLabel:{position:"absolute",bottom:"10px",left:"10px",padding:"6px 12px",backgroundColor:"rgba(0, 0, 0, 0.7)",color:"white",borderRadius:"var(--radius-md)",fontSize:"0.9rem",fontWeight:"500"},debugPanel:{position:"absolute",bottom:"10px",right:"10px",zIndex:20},debugButton:{padding:"6px 12px",backgroundColor:"rgba(59, 130, 246, 0.7)",border:"1px solid rgba(59, 130, 246, 0.9)",borderRadius:"4px",color:"white",fontSize:"0.8rem",cursor:"pointer",fontWeight:"500"}},dO=()=>{const{localStream:r,isMicOn:e}=Tf(),n=k.useRef(null),s=k.useRef(null),o=k.useRef(null),u=k.useRef(null),f=k.useRef(null),[m,p]=k.useState(!1),[g,E]=k.useState(0);k.useEffect(()=>{if(!r||!e){s.current&&(cancelAnimationFrame(s.current),s.current=null),o.current&&o.current.state!=="closed"&&o.current.close(),p(!1),E(0);return}const q=r.getAudioTracks()[0];if(!q||!q.enabled){p(!1),E(0);return}return(async()=>{try{const $=window.AudioContext||window.webkitAudioContext;o.current||(o.current=new $),u.current=o.current.createAnalyser(),u.current.fftSize=256,u.current.minDecibels=-90,u.current.maxDecibels=-10,u.current.smoothingTimeConstant=.85,f.current=o.current.createMediaStreamSource(r),f.current.connect(u.current),p(!0),T()}catch($){console.error("Error setting up audio visualizer:",$),p(!1)}})(),()=>{s.current&&cancelAnimationFrame(s.current),f.current&&f.current.disconnect(),u.current&&u.current.disconnect()}},[r,e]);const T=()=>{if(!n.current||!u.current)return;const q=n.current,z=q.getContext("2d"),$=u.current.frequencyBinCount,X=new Uint8Array($),Z=()=>{s.current=requestAnimationFrame(Z),u.current.getByteFrequencyData(X);let pe=0;for(let R=0;R<X.length;R++)pe+=X[R];const _e=pe/X.length;E(_e),z.clearRect(0,0,q.width,q.height),z.fillStyle="rgba(0, 0, 0, 0.3)",z.fillRect(0,0,q.width,q.height);const Te=q.width/$*2.5;let D,I=0;for(let R=0;R<$;R++){D=X[R]/2;const N=z.createLinearGradient(0,q.height,0,q.height-D);D<30?(N.addColorStop(0,"#10b981"),N.addColorStop(1,"#34d399")):D<60?(N.addColorStop(0,"#f59e0b"),N.addColorStop(1,"#fbbf24")):(N.addColorStop(0,"#ef4444"),N.addColorStop(1,"#f87171")),z.fillStyle=N,z.fillRect(I,q.height-D,Te,D),I+=Te+1}};Z()},C=Math.min(Math.round(g/128*100),100);let O="low",L="#10b981";return C>30&&(O="medium",L="#f59e0b"),C>60&&(O="high",L="#ef4444"),b.jsxs("div",{style:kt.container,children:[b.jsxs("div",{style:kt.header,children:[b.jsxs("div",{style:kt.title,children:[b.jsx("span",{style:kt.icon,children:""}),"Microphone Activity"]}),b.jsxs("div",{style:kt.status,children:[b.jsx("div",{style:{...kt.statusDot,backgroundColor:e?"#10b981":"#ef4444"}}),b.jsx("span",{children:e?"Active":"Muted"})]})]}),b.jsxs("div",{style:kt.visualizerContainer,children:[b.jsx("canvas",{ref:n,width:300,height:80,style:kt.canvas}),b.jsxs("div",{style:kt.volumeInfo,children:[b.jsx("div",{style:kt.volumeBarContainer,children:b.jsx("div",{style:{...kt.volumeBar,width:`${C}%`,backgroundColor:L}})}),b.jsxs("div",{style:kt.volumeText,children:[b.jsx("span",{style:{color:L,fontWeight:"600"},children:O.toUpperCase()}),b.jsxs("span",{children:[C,"%"]})]})]})]}),b.jsx("div",{style:kt.instructions,children:!m&&e?b.jsxs("div",{style:kt.warning,children:[b.jsx("span",{style:kt.warningIcon,children:""}),'Speak to see audio activity. Try saying "Testing, 1, 2, 3"']}):e?b.jsxs("div",{style:kt.active,children:[b.jsx("span",{style:kt.activeIcon,children:""}),"Microphone is working! Volume: ",O]}):b.jsxs("div",{style:kt.muted,children:[b.jsx("span",{style:kt.mutedIcon,children:""}),"Microphone is muted"]})}),b.jsx("button",{onClick:()=>{if(e&&o.current){const q=o.current.createOscillator(),z=o.current.createGain();q.connect(z),z.connect(o.current.destination),q.frequency.value=440,q.type="sine",z.gain.setValueAtTime(0,o.current.currentTime),z.gain.linearRampToValueAtTime(.1,o.current.currentTime+.1),z.gain.linearRampToValueAtTime(0,o.current.currentTime+.5),q.start(o.current.currentTime),q.stop(o.current.currentTime+.5)}},style:kt.testButton,disabled:!e,children:" Test Sound"})]})},kt={container:{backgroundColor:"rgba(255, 255, 255, 0.05)",borderRadius:"var(--radius-lg)",padding:"15px",border:"1px solid var(--border-light)",marginTop:"20px"},header:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"15px"},title:{display:"flex",alignItems:"center",gap:"8px",fontWeight:"600",color:"var(--text-light)",fontSize:"1rem"},icon:{fontSize:"1.2rem"},status:{display:"flex",alignItems:"center",gap:"6px",fontSize:"0.85rem",color:"var(--text-gray)"},statusDot:{width:"8px",height:"8px",borderRadius:"50%"},visualizerContainer:{position:"relative",marginBottom:"15px"},canvas:{width:"100%",height:"80px",borderRadius:"var(--radius-md)",backgroundColor:"rgba(0, 0, 0, 0.5)"},volumeInfo:{marginTop:"10px"},volumeBarContainer:{width:"100%",height:"6px",backgroundColor:"rgba(255, 255, 255, 0.1)",borderRadius:"3px",overflow:"hidden",marginBottom:"5px"},volumeBar:{height:"100%",borderRadius:"3px",transition:"width 0.2s ease"},volumeText:{display:"flex",justifyContent:"space-between",fontSize:"0.8rem",color:"var(--text-gray)"},instructions:{fontSize:"0.85rem",textAlign:"center",marginBottom:"15px",padding:"10px",borderRadius:"var(--radius-md)"},warning:{color:"#f59e0b",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px"},warningIcon:{fontSize:"1rem"},muted:{color:"#ef4444",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px"},mutedIcon:{fontSize:"1rem"},active:{color:"#10b981",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px"},activeIcon:{fontSize:"1rem"},testButton:{width:"100%",padding:"10px",backgroundColor:"rgba(59, 130, 246, 0.2)",border:"1px solid rgba(59, 130, 246, 0.3)",borderRadius:"var(--radius-md)",color:"#93c5fd",fontSize:"0.9rem",fontWeight:"500",cursor:"pointer",transition:"all 0.2s ease"}},mO=()=>{const{localStream:r,isCameraOn:e,isMicOn:n,isLoading:s,error:o,initializeMedia:u,restartMediaWithPermissions:f}=Tf(),m=k.useRef(null);if(k.useEffect(()=>{if(m.current&&r){console.log(" Setting video srcObject for local preview"),m.current.srcObject=r;const E=r.getVideoTracks(),T=r.getAudioTracks();console.log(" Local stream tracks:",{video:E.length,audio:T.length,videoEnabled:E[0]?.enabled,audioEnabled:T[0]?.enabled})}},[r]),k.useEffect(()=>{(async()=>r||(console.log(" Initializing media on mount..."),await u()))()},[]),s)return b.jsxs("div",{style:We.loadingContainer,children:[b.jsx("div",{style:We.spinner}),b.jsx("p",{children:"Loading camera and microphone..."}),b.jsx("p",{style:We.hint,children:"Please allow permissions if prompted"})]});if(o)return b.jsxs("div",{style:We.errorContainer,children:[b.jsx("div",{style:We.errorIcon,children:""}),b.jsx("h4",{children:"Camera/Microphone Error"}),b.jsx("p",{style:We.errorText,children:o}),b.jsxs("div",{style:We.errorButtons,children:[b.jsx("button",{onClick:f,style:We.retryButton,children:"Request Permissions"}),b.jsx("button",{onClick:u,style:We.secondaryButton,children:"Try Again"})]}),b.jsx("p",{style:We.helpText,children:"If this persists, check browser settings for camera/microphone permissions."})]});const p=r?.getVideoTracks().length>0,g=r?.getAudioTracks().length>0;return b.jsxs("div",{style:We.container,children:[b.jsxs("div",{style:We.videoWrapper,children:[p?b.jsx("video",{ref:m,autoPlay:!0,playsInline:!0,muted:!0,style:We.video,onLoadedMetadata:()=>console.log(" Local video metadata loaded"),onCanPlay:()=>console.log(" Local video can play")}):b.jsxs("div",{style:We.cameraOffPlaceholder,children:[b.jsx("div",{style:We.cameraOffIcon,children:""}),b.jsx("p",{children:"Camera not available"}),b.jsx("p",{style:We.smallText,children:e?"Waiting for camera...":"Camera is off"}),b.jsx("button",{onClick:()=>u({video:!0,audio:n}),style:We.enableButton,children:"Enable Camera"})]}),b.jsx("div",{style:We.statusOverlay,children:b.jsxs("div",{style:We.statusIcons,children:[b.jsxs("div",{style:{...We.statusIcon,...e&&p?We.statusOn:We.statusOff},children:[e&&p?"":"",b.jsx("span",{style:We.statusText,children:e&&p?"Camera On":"Camera Off"})]}),b.jsxs("div",{style:{...We.statusIcon,...n&&g?We.statusOn:We.statusOff},children:[n&&g?"":"",b.jsx("span",{style:We.statusText,children:n&&g?"Mic On":"Mic Muted"})]})]})}),b.jsx("div",{style:We.debugInfo,children:b.jsxs("span",{children:["Tracks: V:",r?.getVideoTracks().length||0," A:",r?.getAudioTracks().length||0]})}),b.jsx("div",{style:We.nameLabel,children:"You (Preview)"})]}),g&&b.jsx(dO,{}),b.jsxs("div",{style:We.mediaControls,children:[b.jsx("button",{onClick:()=>u({video:!0,audio:!0}),style:We.mediaButton,children:" Refresh Media"}),b.jsx("button",{onClick:f,style:We.mediaButton,children:" Request Permissions"})]})]})},We={container:{width:"100%",height:"100%",position:"relative",display:"flex",flexDirection:"column",gap:"15px"},loadingContainer:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:"100%",color:"var(--text-gray)",textAlign:"center"},spinner:{width:"40px",height:"40px",border:"3px solid rgba(255, 255, 255, 0.1)",borderTopColor:"var(--primary-purple)",borderRadius:"50%",animation:"spin 1s linear infinite",marginBottom:"15px"},hint:{fontSize:"0.9rem",opacity:.7,marginTop:"10px"},errorContainer:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:"100%",textAlign:"center",padding:"20px",color:"var(--text-light)"},errorIcon:{fontSize:"3rem",marginBottom:"15px",opacity:.7},errorText:{color:"var(--text-gray)",marginBottom:"20px",fontSize:"0.9rem"},errorButtons:{display:"flex",gap:"10px",marginBottom:"15px"},retryButton:{padding:"10px 20px",backgroundColor:"var(--primary-purple)",border:"none",borderRadius:"var(--radius-md)",color:"white",fontWeight:"500",cursor:"pointer",transition:"all 0.2s ease"},secondaryButton:{padding:"10px 20px",backgroundColor:"rgba(255, 255, 255, 0.1)",border:"1px solid var(--border-light)",borderRadius:"var(--radius-md)",color:"var(--text-light)",fontWeight:"500",cursor:"pointer",transition:"all 0.2s ease"},helpText:{fontSize:"0.8rem",color:"var(--text-gray)",maxWidth:"300px"},videoWrapper:{position:"relative",width:"100%",flex:1,backgroundColor:"#000",borderRadius:"var(--radius-lg)",overflow:"hidden",minHeight:"300px"},video:{width:"100%",height:"100%",objectFit:"cover",transform:"scaleX(-1)",backgroundColor:"#000"},cameraOffPlaceholder:{width:"100%",height:"100%",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",backgroundColor:"var(--bg-card)",color:"var(--text-gray)",textAlign:"center"},cameraOffIcon:{fontSize:"4rem",marginBottom:"15px",opacity:.5},smallText:{fontSize:"0.9rem",marginBottom:"15px",opacity:.7},enableButton:{padding:"8px 16px",backgroundColor:"var(--primary-purple)",border:"none",borderRadius:"var(--radius-md)",color:"white",fontWeight:"500",cursor:"pointer"},statusOverlay:{position:"absolute",top:"15px",left:"15px",right:"15px",zIndex:10},statusIcons:{display:"flex",gap:"10px",flexWrap:"wrap"},statusIcon:{display:"flex",alignItems:"center",gap:"6px",padding:"6px 12px",borderRadius:"20px",fontSize:"0.9rem",fontWeight:"500",backdropFilter:"blur(10px)",backgroundColor:"rgba(0, 0, 0, 0.5)",color:"white"},statusOn:{backgroundColor:"rgba(34, 197, 94, 0.7)"},statusOff:{backgroundColor:"rgba(239, 68, 68, 0.7)"},statusText:{fontSize:"0.8rem"},debugInfo:{position:"absolute",top:"15px",right:"15px",padding:"4px 8px",backgroundColor:"rgba(0, 0, 0, 0.7)",color:"white",borderRadius:"4px",fontSize:"0.7rem",fontFamily:"monospace"},nameLabel:{position:"absolute",bottom:"15px",left:"15px",padding:"6px 12px",backgroundColor:"rgba(0, 0, 0, 0.7)",color:"white",borderRadius:"var(--radius-md)",fontSize:"0.9rem",fontWeight:"500"},mediaControls:{display:"flex",gap:"10px",justifyContent:"center"},mediaButton:{padding:"8px 16px",backgroundColor:"rgba(59, 130, 246, 0.2)",border:"1px solid rgba(59, 130, 246, 0.3)",borderRadius:"var(--radius-md)",color:"#93c5fd",fontSize:"0.8rem",cursor:"pointer"}},pO=()=>{const{roomId:r}=JA(),e=Io(),{user:n}=ya(),{setCurrentRoom:s}=Du(),[o,u]=k.useState(null),[f,m]=k.useState([]),[p,g]=k.useState(!0),[E,T]=k.useState(""),[C,O]=k.useState(!1),{peers:L,connectionStatus:q,activeConnections:z,initializeUserSignaling:$,connectToUser:X}=xS(),{localStream:Z,isCameraOn:pe,isMicOn:_e,toggleCamera:Te,toggleMicrophone:D,isLoading:I,error:R}=Tf(),N=async()=>{console.clear(),console.log(" === COMPLETE FIRESTORE DEBUG === "),console.log("Timestamp:",new Date().toISOString()),console.log("Current user:",n?.uid),console.log("Room ID:",r);try{console.log(`
 === CURRENT ROOM DATA ===`);const te=fn(qe,"rooms",r),de=await vs(te);if(!de.exists()){console.log(" Room not found in Firestore");return}const he=de.data();console.log(" Room Document:",{id:r,name:he.name,hostId:he.hostId,hostName:he.hostName,roomCode:he.roomCode,currentParticipants:he.currentParticipants,maxParticipants:he.maxParticipants,status:he.status,isActive:he.isActive,createdAt:he.createdAt?.toDate?.()||he.createdAt,lastActivity:he.lastActivity?.toDate?.()||he.lastActivity}),console.log(`
 === PARTICIPANTS ===`);const P=Lt(qe,"rooms",r,"participants"),J=await Un(P);console.log(`Total participants in DB: ${J.docs.length}`),console.log(`Room shows: ${he.currentParticipants}/${he.maxParticipants}`),J.docs.forEach(Se=>{const Ce=Se.data();console.log(`- ${Ce.name} (${Se.id})`,{isHost:Ce.isHost,isActive:Ce.isActive,joinedAt:Ce.joinedAt?.toDate?.()||Ce.joinedAt,email:Ce.email,isCurrentUser:Se.id===n?.uid})});const le=J.docs.some(Se=>Se.id===n?.uid);console.log(`
 Current user in participants? ${le?"YES":"NO"}`),console.log(`
 === SIGNALING DATA ===`);const fe=Lt(qe,"rooms",r,"signaling"),we=await Un(fe);console.log(`Signaling users: ${we.docs.length}`);for(const Se of we.docs){const Ce=Se.id,Pe=Se.data();console.log(`
 User: ${Ce} (${Pe.userName||"No name"})`),console.log("   Signaling Document:",{isOnline:Pe.isOnline,readyForConnection:Pe.readyForConnection,status:Pe.status,lastSeen:Pe.lastSeen?.toDate?.()||Pe.lastSeen});const Ye=Lt(qe,"rooms",r,"signaling",Ce,"offers"),mn=await Un(Ye);console.log(`   Offers TO this user: ${mn.docs.length}`),mn.docs.forEach(In=>{const Kt=In.data();console.log(`     From: ${Kt.from} (${Kt.fromName}) to: ${Kt.to}`,{type:Kt.type,timestamp:Kt.timestamp?.toDate?.()||Kt.timestamp,docId:In.id})});const xn=Lt(qe,"rooms",r,"signaling",Ce,"answers"),on=await Un(xn);console.log(`   Answers TO this user: ${on.docs.length}`),on.docs.forEach(In=>{const Kt=In.data();console.log(`     From: ${Kt.from} to: ${Kt.to}`)});const Ji=Lt(qe,"rooms",r,"signaling",Ce,"candidates"),ln=await Un(Ji);console.log(`   ICE Candidates TO this user: ${ln.docs.length}`)}console.log(`
 === SUMMARY ===`),console.log(`Room: ${he.name} (${r})`),console.log(`Host: ${he.hostName} (${he.hostId})`),console.log(`Capacity: ${he.currentParticipants}/${he.maxParticipants}`),console.log(`Current user ${n?.uid} is ${le?"IN":"NOT IN"} room`),console.log(`UI shows error: "${E}"`),console.log(`UI loading state: ${p}`)}catch(te){console.error(" Debug error:",te)}};k.useEffect(()=>{if(!r||!n)return;console.log(" Setting up real-time listeners for room:",r);const te=rO(r,he=>{console.log(" Room real-time update:",he),he?(u(he),s(he),E&&he.isActive&&he.currentParticipants<=he.maxParticipants&&T("")):T("Room was deleted")}),de=sO(r,he=>{console.log(" Participants real-time update:",he),m(he);const P=he.some(J=>J.id===n.uid);console.log("Current user in room?",P),P&&E.includes("Room is full")&&(console.log(' User is in room, clearing "room is full" error'),T(""))});return()=>{console.log(" Cleaning up real-time listeners"),te(),de()}},[r,n,E,s]);const V=k.useCallback(async()=>{if(!(!n||!r||C)){g(!0),T(""),O(!0),console.log("=== LOAD ROOM START ==="),console.log("User:",n.uid,n.displayName),console.log("Room ID:",r);try{const te=await Rh(r);if(console.log("Room data from service:",te),!te){T("Room not found"),g(!1);return}if(!te.isActive||te.status==="ended"){T("Room is no longer active"),g(!1);return}const de=await dh(r);console.log("Participants from service:",de),console.log("Participant IDs:",de.map(Pe=>Pe.id));const he=de.some(Pe=>Pe.id===n.uid);if(console.log("Is user already in room?",he),u(te),m(de),s(te),he){console.log(" User already in room, loading complete"),g(!1),setTimeout(()=>{$?.()},1e3);return}const P=de.length>=te.maxParticipants;console.log("Is room full?",P,`(${de.length}/${te.maxParticipants})`);const J=fn(qe,"rooms",r),fe=(await vs(J)).data(),we=Lt(qe,"rooms",r,"participants"),Se=await Un(we),Ce=Se.docs.length;if(console.log("Fresh check - Room capacity:",fe?.currentParticipants,"/",fe?.maxParticipants),console.log("Fresh check - Actual participants:",Ce),console.log("Fresh check - User in fresh participants?",Se.docs.some(Pe=>Pe.id===n.uid)),Ce>=te.maxParticipants){console.log(" Room is actually full, cannot join"),T(`Room is full (${Ce}/${te.maxParticipants} participants)`),g(!1);return}console.log(" Attempting to join room...");try{const Pe=await nO(r,n);console.log("Join result:",Pe),await new Promise(on=>setTimeout(on,1e3));const Ye=await Rh(r),mn=await dh(r);console.log("After join - Room:",Ye),console.log("After join - Participants:",mn),u(Ye),m(mn),s(Ye);const xn=mn.some(on=>on.id===n.uid);if(console.log("User now in room?",xn),xn)console.log(" Successfully joined room, initializing signaling..."),setTimeout(()=>{$?.()},1500);else{const on=await Un(Lt(qe,"rooms",r,"participants"));if(on.docs.some(ln=>ln.id===n.uid)){console.log(" Race condition resolved - user IS in room");const ln=on.docs.map(In=>({id:In.id,...In.data()}));m(ln)}else console.log(" User still not in room after join attempt"),T("Failed to join room. Please try again.")}}catch(Pe){console.error("Join error:",Pe);const Ye=await dh(r);Ye.some(xn=>xn.id===n.uid)?(console.log(" User actually joined despite error (race condition)"),m(Ye),T(""),setTimeout(()=>{$?.()},1500)):Pe.message.includes("full")?T("Room is now full. Please try another room."):T(`Failed to join: ${Pe.message}`)}}catch(te){console.error("Error in loadRoom:",te),T(`Failed to load room: ${te.message}`)}finally{g(!1),console.log("=== LOAD ROOM END ===")}}},[n,r,C,s,$]);k.useEffect(()=>{if(!n){e("/");return}V()},[n,e,V]);const x=()=>{e("/dashboard")},A=()=>{o?.roomCode&&(navigator.clipboard.writeText(o.roomCode),alert(`Room code ${o.roomCode} copied to clipboard!`))},se=()=>{const te=`${window.location.origin}/room/${r}`;navigator.clipboard.writeText(te),alert(`Invite link copied to clipboard!

${te}`)},ce=async()=>{console.log(" Manually refreshing room data..."),g(!0);try{const te=await Rh(r),de=await dh(r);u(te),m(de),s(te),T(""),console.log(" Room data refreshed")}catch(te){console.error("Error refreshing room:",te)}finally{g(!1)}},B=()=>{console.clear(),console.log(" === WEBRTC CONNECTION DEBUG ==="),console.log("Peers object:",L),Object.entries(L).forEach(([de,he])=>{if(console.log(`
 Peer: ${de} (${he.userData?.name})`),console.log("   Connection state:",he.connectionState),he.stream){console.log("   Stream exists:",!!he.stream),console.log("   Stream active:",he.stream.active),console.log("   Stream id:",he.stream.id);const P=he.stream.getVideoTracks(),J=he.stream.getAudioTracks();console.log("   Video tracks:",P.length),console.log("   Audio tracks:",J.length),P.forEach((le,fe)=>{console.log(`   Video track ${fe}:`,{enabled:le.enabled,readyState:le.readyState,muted:le.muted,kind:le.kind,label:le.label})}),J.forEach((le,fe)=>{console.log(`   Audio track ${fe}:`,{enabled:le.enabled,readyState:le.readyState,muted:le.muted,kind:le.kind,label:le.label})})}else console.log("    No stream available")}),console.log(`
 WebRTC Support:`),console.log("   RTCPeerConnection:",typeof RTCPeerConnection<"u"?" Available":" Not available"),console.log("   getUserMedia:",typeof navigator.mediaDevices?.getUserMedia<"u"?" Available":" Not available"),console.log(`
 Video Elements:`),document.querySelectorAll("video").forEach((de,he)=>{console.log(`   Video ${he}:`,{srcObject:de.srcObject,readyState:de.readyState,error:de.error,paused:de.paused,muted:de.muted,isRemote:!de.muted})})};if(p)return b.jsxs("div",{style:oe.loadingContainer,children:[b.jsx("div",{style:oe.spinner}),b.jsx("p",{style:oe.loadingText,children:"Loading room..."}),b.jsx("button",{onClick:ce,style:oe.refreshButton,children:"Force Refresh"})]});const W=f.some(te=>te.id===n?.uid);return E&&E.includes("full")&&!W?b.jsx("div",{style:oe.fullRoomContainer,children:b.jsxs("div",{style:oe.fullRoomContent,children:[b.jsx("div",{style:oe.fullRoomIcon,children:""}),b.jsx("h2",{style:oe.fullRoomTitle,children:"Room Full"}),b.jsxs("p",{style:oe.fullRoomMessage,children:["This room has reached its maximum capacity of ",o?.maxParticipants," participants."]}),b.jsxs("div",{style:oe.fullRoomDetails,children:[b.jsxs("p",{children:[b.jsx("strong",{children:"Room:"})," ",o?.name]}),b.jsxs("p",{children:[b.jsx("strong",{children:"Host:"})," ",o?.hostName]}),b.jsxs("p",{children:[b.jsx("strong",{children:"Current Participants:"})," ",o?.currentParticipants,"/",o?.maxParticipants]}),b.jsxs("p",{children:[b.jsx("strong",{children:"You are in room?"})," ",W?"YES":"NO"]})]}),b.jsxs("div",{style:oe.debugInfo,children:[b.jsx("button",{onClick:N,style:oe.debugButton,children:" Debug Firestore"}),b.jsx("button",{onClick:ce,style:oe.debugButton,children:" Refresh Data"})]}),b.jsxs("div",{style:oe.fullRoomActions,children:[b.jsx("button",{onClick:()=>e("/dashboard"),style:oe.fullRoomButton,children:"Back to Dashboard"}),!W&&b.jsx("button",{onClick:async()=>{console.log(" Retrying join..."),O(!1),await V()},style:oe.fullRoomButtonSecondary,children:"Try Again"})]})]})}):E&&!E.includes("full")?b.jsxs("div",{style:oe.errorContainer,children:[b.jsx("div",{style:oe.errorIcon,children:""}),b.jsx("h2",{style:oe.errorTitle,children:"Room Unavailable"}),b.jsx("p",{style:oe.errorMessage,children:E}),b.jsxs("div",{style:oe.errorActions,children:[b.jsx("button",{onClick:()=>e("/dashboard"),style:oe.backButton,children:"Back to Dashboard"}),b.jsx("button",{onClick:ce,style:oe.refreshButton,children:"Try Again"})]})]}):o?b.jsxs("div",{style:oe.container,children:[b.jsxs("header",{style:oe.header,children:[b.jsxs("div",{style:oe.headerLeft,children:[b.jsx("button",{onClick:()=>e("/dashboard"),style:oe.backButton,children:" Back"}),b.jsxs("div",{style:oe.roomInfo,children:[b.jsx("h1",{style:oe.roomName,children:o.name}),b.jsxs("div",{style:oe.roomMeta,children:[b.jsxs("span",{style:oe.roomCode,onClick:A,title:"Click to copy",children:["#",o.roomCode]}),b.jsxs("span",{style:oe.participantCount,children:[o.currentParticipants,"/",o.maxParticipants," participants"]}),b.jsx("span",{style:oe.roomStatus,"data-status":o.status,children:o.status}),!W&&b.jsx("span",{style:oe.warningBadge,children:"Not in room"})]})]})]}),b.jsx("div",{style:oe.headerRight,children:b.jsx("button",{onClick:x,style:oe.leaveButton,children:"Leave Room"})})]}),b.jsxs("main",{style:oe.main,children:[b.jsxs("div",{style:oe.videoSection,children:[b.jsx("div",{style:oe.videoContainer,children:b.jsx(mO,{})}),Object.entries(L).map(([te,de])=>b.jsx("div",{style:oe.videoContainer,children:b.jsx(fO,{stream:de.stream,userData:de.userData,connectionState:de.connectionState})},te)),Object.keys(L).length===0&&q==="connected"&&b.jsxs("div",{style:oe.noConnectionsMessage,children:[b.jsx("div",{style:oe.noConnectionsIcon,children:""}),b.jsx("p",{style:oe.noConnectionsText,children:"Connected to room"}),b.jsx("p",{style:oe.noConnectionsSubtext,children:"Waiting for other participants to join..."}),b.jsxs("p",{style:oe.inviteHint,children:["Share room code: ",b.jsxs("strong",{children:["#",o?.roomCode]})]})]}),b.jsxs("div",{style:oe.connectionStatus,children:[b.jsx("div",{style:{...oe.statusIndicator,backgroundColor:q==="connected"?"#10b981":q==="connecting"?"#f59e0b":"#ef4444"},children:q.toUpperCase()}),b.jsxs("div",{style:oe.statusText,children:[z," connection",z!==1?"s":""," active"]})]})]}),b.jsxs("aside",{style:oe.sidebar,children:[b.jsxs("div",{style:oe.sidebarHeader,children:[b.jsx("h3",{style:oe.sidebarTitle,children:"Participants"}),b.jsx("span",{style:oe.participantBadge,children:f.length}),b.jsx("button",{onClick:ce,style:oe.refreshSmallButton,title:"Refresh participants",children:""})]}),b.jsx("div",{style:oe.participantsList,children:f.map(te=>b.jsxs("div",{style:{...oe.participantItem,...te.isHost?oe.hostItem:{},...te.id===n?.uid?oe.currentUserItem:{}},children:[b.jsxs("div",{style:oe.participantAvatar,children:[te.photoURL?b.jsx("img",{src:te.photoURL,alt:te.name,style:oe.avatarImage}):b.jsx("div",{style:oe.defaultAvatar,children:te.name.charAt(0)}),te.isHost&&b.jsx("div",{style:oe.hostBadge,title:"Host",children:""})]}),b.jsxs("div",{style:oe.participantInfo,children:[b.jsxs("div",{style:oe.participantName,children:[te.name,te.id===n?.uid&&b.jsx("span",{style:oe.youBadge,children:" (You)"})]}),b.jsxs("div",{style:oe.participantStatus,children:[b.jsx("span",{style:oe.statusDot}),te.isActive?"Online":"Offline"]})]}),o.hostId===n?.uid&&!te.isHost&&b.jsx("button",{style:oe.kickButton,title:"Kick participant",onClick:()=>alert(`Kick ${te.name} - Coming soon`),children:""})]},te.id))}),b.jsxs("div",{style:oe.controlsSection,children:[b.jsx("h4",{style:oe.controlsTitle,children:"Room Controls"}),b.jsxs("div",{style:oe.controlsGrid,children:[b.jsx("button",{style:{...oe.controlButton,..._e?oe.controlButtonActive:oe.controlButtonInactive},onClick:D,disabled:I,children:_e?" Mic On":" Mic Muted"}),b.jsx("button",{style:{...oe.controlButton,...pe?oe.controlButtonActive:oe.controlButtonInactive},onClick:Te,disabled:I,children:pe?" Camera On":" Camera Off"}),b.jsx("button",{style:oe.controlButton,onClick:se,children:" Invite"}),b.jsx("button",{style:oe.controlButton,onClick:()=>navigator.clipboard.writeText(`#${o.roomCode}`),children:" Copy Code"}),o.hostId===n?.uid&&b.jsx("button",{style:oe.controlButtonDanger,onClick:()=>alert("End Room - Coming soon"),children:" End Room"})]}),R&&b.jsxs("div",{style:oe.mediaError,children:[" ",R]}),b.jsxs("div",{style:oe.peersStatus,children:[b.jsxs("div",{style:oe.peersStatusHeader,children:[b.jsx("span",{children:"Active Connections:"}),b.jsx("span",{style:{color:z>0?"#10b981":"#f59e0b",fontWeight:"600"},children:z})]}),Object.entries(L).map(([te,de])=>b.jsxs("div",{style:oe.peerItem,children:[b.jsx("span",{style:oe.peerName,children:de.userData?.name||"Peer"}),b.jsx("span",{style:{...oe.peerStatus,color:de.connectionState==="connected"?"#10b981":de.connectionState==="connecting"?"#f59e0b":"#ef4444"},children:de.connectionState||"unknown"})]},te))]})]})]})]}),b.jsxs("details",{style:oe.debugPanel,children:[b.jsx("summary",{style:oe.debugSummary,children:" Debug Panel"}),b.jsx(hO,{}),b.jsxs("div",{style:oe.debugActions,children:[b.jsx("button",{onClick:N,style:oe.debugButton,children:" Debug Firestore"}),b.jsx("button",{onClick:iO,style:oe.debugButton,children:"Check Room State"}),b.jsx("button",{onClick:()=>console.log("Peers:",L),style:oe.debugButton,children:"Log Peers"}),b.jsx("button",{onClick:ce,style:oe.debugButton,children:"Refresh Data"}),o?.hostId===n?.uid&&f.length>1&&b.jsx("button",{onClick:()=>{const te=f.find(de=>de.id!==n?.uid);te&&(console.log("Manual connect to:",te),X(te.id,{name:te.name,photoURL:te.photoURL}))},style:oe.debugButton,children:" Manual Connect"})]})]}),b.jsx("button",{style:oe.controlButton,onClick:B,children:" Debug WebRTC"}),b.jsx("button",{style:oe.controlButton,onClick:()=>{const te=document.createElement("canvas");te.width=640,te.height=480;const de=te.getContext("2d"),he=de.createLinearGradient(0,0,640,480);he.addColorStop(0,"#8b5cf6"),he.addColorStop(1,"#3b82f6"),de.fillStyle=he,de.fillRect(0,0,640,480),de.fillStyle="white",de.font="bold 30px Arial",de.textAlign="center",de.fillText("TEST VIDEO",320,200),de.font="20px Arial",de.fillText("Remote Stream Test",320,240),de.fillText(new Date().toLocaleTimeString(),320,280);const P=te.captureStream(30),J=P.getVideoTracks()[0];if(J.enabled=!0,console.log(" Created test stream:",P),console.log("   Video track:",J),Object.keys(L).length>0){const le=Object.keys(L)[0];console.log(`Adding test stream to peer: ${le}`),setPeers(fe=>({...fe,[le]:{...fe[le],stream:P}}))}},children:" Test Video"}),b.jsx("footer",{style:oe.footer,children:b.jsxs("div",{style:oe.footerContent,children:[b.jsxs("div",{style:oe.footerInfo,children:[b.jsxs("span",{children:["Room created by ",o.hostName]}),b.jsx("span",{style:oe.footerSeparator,children:""}),b.jsxs("span",{children:["You are ",o.hostId===n?.uid?"the host":"a participant"]}),b.jsx("span",{style:oe.footerSeparator,children:""}),b.jsx("span",{style:{color:q==="connected"?"#10b981":q==="connecting"?"#f59e0b":"#ef4444"},children:q.toUpperCase()}),!W&&b.jsxs(b.Fragment,{children:[b.jsx("span",{style:oe.footerSeparator,children:""}),b.jsx("span",{style:{color:"#ef4444"},children:"NOT IN ROOM"})]})]}),b.jsxs("div",{style:oe.footerActions,children:[b.jsx("button",{style:oe.footerButton,onClick:se,children:"Copy Invite Link"}),b.jsx("button",{style:oe.footerButton,onClick:()=>alert("Settings - Coming soon"),children:"Settings"})]})]})})]}):b.jsxs("div",{style:oe.errorContainer,children:[b.jsx("h2",{style:oe.errorTitle,children:"Room Not Found"}),b.jsx("button",{onClick:()=>e("/dashboard"),style:oe.backButton,children:"Back to Dashboard"})]})},oe={container:{minHeight:"100vh",backgroundColor:"var(--bg-dark)",color:"var(--text-light)",display:"flex",flexDirection:"column"},loadingContainer:{minHeight:"100vh",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",backgroundColor:"var(--bg-dark)",gap:"20px"},spinner:{width:"50px",height:"50px",border:"4px solid rgba(255, 255, 255, 0.1)",borderTopColor:"var(--primary-purple)",borderRadius:"50%",animation:"spin 1s linear infinite",marginBottom:"10px"},loadingText:{color:"var(--text-gray)",fontSize:"1.1rem"},refreshButton:{padding:"10px 20px",backgroundColor:"rgba(59, 130, 246, 0.2)",border:"1px solid rgba(59, 130, 246, 0.3)",borderRadius:"var(--radius-md)",color:"#93c5fd",cursor:"pointer",fontSize:"0.9rem"},errorContainer:{minHeight:"100vh",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",backgroundColor:"var(--bg-dark)",textAlign:"center",padding:"20px",gap:"20px"},errorIcon:{fontSize:"4rem",marginBottom:"20px"},errorTitle:{fontSize:"2rem",marginBottom:"10px",color:"var(--text-light)"},errorMessage:{color:"var(--text-gray)",marginBottom:"30px",fontSize:"1.1rem",maxWidth:"400px"},errorActions:{display:"flex",gap:"15px"},backButton:{padding:"10px 20px",backgroundColor:"var(--primary-purple)",border:"none",borderRadius:"var(--radius-md)",color:"white",cursor:"pointer",fontSize:"1rem",transition:"all 0.2s ease"},fullRoomContainer:{minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"var(--bg-dark)",padding:"20px"},fullRoomContent:{background:"var(--bg-card)",padding:"40px",borderRadius:"var(--radius-xl)",border:"1px solid var(--border-medium)",textAlign:"center",maxWidth:"500px"},fullRoomIcon:{fontSize:"4rem",marginBottom:"20px"},fullRoomTitle:{fontSize:"2rem",marginBottom:"15px",color:"var(--text-light)"},fullRoomMessage:{color:"var(--text-gray)",marginBottom:"25px",fontSize:"1.1rem"},fullRoomDetails:{textAlign:"left",marginBottom:"30px",padding:"20px",backgroundColor:"rgba(255, 255, 255, 0.05)",borderRadius:"var(--radius-md)",fontSize:"0.9rem"},debugInfo:{display:"flex",gap:"10px",justifyContent:"center",marginBottom:"20px"},debugButton:{padding:"8px 16px",backgroundColor:"rgba(255, 255, 255, 0.1)",border:"1px solid var(--border-light)",borderRadius:"var(--radius-md)",color:"var(--text-light)",cursor:"pointer",fontSize:"0.8rem"},fullRoomActions:{display:"flex",gap:"15px",justifyContent:"center"},fullRoomButton:{padding:"12px 24px",backgroundColor:"var(--primary-purple)",border:"none",borderRadius:"var(--radius-md)",color:"white",cursor:"pointer",fontSize:"1rem",fontWeight:"500"},fullRoomButtonSecondary:{padding:"12px 24px",backgroundColor:"transparent",border:"1px solid var(--border-light)",borderRadius:"var(--radius-md)",color:"var(--text-light)",cursor:"pointer",fontSize:"1rem"},header:{backgroundColor:"var(--bg-card)",borderBottom:"1px solid var(--border-light)",padding:"15px 20px",display:"flex",justifyContent:"space-between",alignItems:"center"},headerLeft:{display:"flex",alignItems:"center",gap:"20px"},roomInfo:{display:"flex",flexDirection:"column",gap:"5px"},roomName:{fontSize:"1.5rem",fontWeight:"600",margin:0,color:"var(--text-light)"},roomMeta:{display:"flex",alignItems:"center",gap:"15px",fontSize:"0.9rem",color:"var(--text-gray)",flexWrap:"wrap"},roomCode:{backgroundColor:"rgba(124, 58, 237, 0.2)",color:"#a78bfa",padding:"4px 8px",borderRadius:"4px",fontFamily:"monospace",fontWeight:"600",cursor:"pointer",transition:"all 0.2s ease"},participantCount:{padding:"4px 8px",backgroundColor:"rgba(59, 130, 246, 0.2)",borderRadius:"4px"},roomStatus:{padding:"4px 8px",borderRadius:"4px",fontWeight:"500",textTransform:"capitalize"},warningBadge:{padding:"4px 8px",backgroundColor:"rgba(239, 68, 68, 0.2)",color:"#f87171",borderRadius:"4px",fontWeight:"500"},headerRight:{display:"flex",alignItems:"center",gap:"10px"},leaveButton:{padding:"10px 20px",backgroundColor:"rgba(239, 68, 68, 0.2)",border:"1px solid rgba(239, 68, 68, 0.3)",borderRadius:"var(--radius-md)",color:"#f87171",cursor:"pointer",fontWeight:"500",transition:"all 0.2s ease"},main:{flex:1,display:"flex",padding:"20px",gap:"20px",overflow:"hidden"},videoSection:{flex:3,display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(300px, 1fr))",gap:"15px",backgroundColor:"var(--bg-card-light)",borderRadius:"var(--radius-lg)",border:"1px solid var(--border-light)",padding:"15px",minHeight:"500px",overflowY:"auto",position:"relative"},videoContainer:{position:"relative",backgroundColor:"#000",borderRadius:"var(--radius-md)",overflow:"hidden",aspectRatio:"16/9",minHeight:"250px",border:"2px solid var(--border-light)"},noConnectionsMessage:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",textAlign:"center",padding:"40px",backgroundColor:"rgba(0, 0, 0, 0.7)",borderRadius:"var(--radius-lg)",backdropFilter:"blur(10px)",border:"1px solid var(--border-light)",zIndex:10},noConnectionsIcon:{fontSize:"3rem",marginBottom:"15px",opacity:.7},noConnectionsText:{fontSize:"1.5rem",marginBottom:"10px",color:"var(--text-light)"},noConnectionsSubtext:{color:"var(--text-gray)",marginBottom:"15px",fontSize:"1rem"},inviteHint:{color:"#a78bfa",fontSize:"0.9rem",backgroundColor:"rgba(124, 58, 237, 0.1)",padding:"8px 12px",borderRadius:"var(--radius-md)",display:"inline-block"},connectionStatus:{position:"absolute",bottom:"20px",right:"20px",backgroundColor:"rgba(0, 0, 0, 0.8)",color:"white",padding:"8px 12px",borderRadius:"var(--radius-md)",fontSize:"0.9rem",zIndex:100,display:"flex",alignItems:"center",gap:"10px",backdropFilter:"blur(10px)"},statusIndicator:{padding:"4px 8px",borderRadius:"12px",color:"white",fontWeight:"600",fontSize:"0.8rem",textTransform:"uppercase"},statusText:{fontSize:"0.8rem",opacity:.9},sidebar:{flex:1,backgroundColor:"var(--bg-card-light)",borderRadius:"var(--radius-lg)",border:"1px solid var(--border-light)",padding:"20px",minWidth:"300px",maxHeight:"600px",overflowY:"auto"},sidebarHeader:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px",paddingBottom:"15px",borderBottom:"1px solid var(--border-light)"},sidebarTitle:{fontSize:"1.2rem",fontWeight:"600",margin:0,color:"var(--text-light)"},participantBadge:{backgroundColor:"var(--primary-purple)",color:"white",padding:"4px 10px",borderRadius:"12px",fontSize:"0.8rem",fontWeight:"600"},refreshSmallButton:{background:"none",border:"none",color:"var(--text-gray)",cursor:"pointer",fontSize:"1rem",padding:"5px",borderRadius:"4px"},participantsList:{display:"flex",flexDirection:"column",gap:"10px",marginBottom:"30px"},participantItem:{display:"flex",alignItems:"center",gap:"12px",padding:"12px",backgroundColor:"rgba(255, 255, 255, 0.05)",borderRadius:"var(--radius-md)",transition:"all 0.2s ease"},hostItem:{backgroundColor:"rgba(124, 58, 237, 0.1)",borderLeft:"3px solid var(--primary-purple)"},currentUserItem:{backgroundColor:"rgba(59, 130, 246, 0.1)",borderLeft:"3px solid #3b82f6"},participantAvatar:{position:"relative",width:"40px",height:"40px"},avatarImage:{width:"100%",height:"100%",borderRadius:"50%",objectFit:"cover"},defaultAvatar:{width:"100%",height:"100%",borderRadius:"50%",backgroundColor:"var(--primary-purple)",display:"flex",alignItems:"center",justifyContent:"center",color:"white",fontWeight:"600",fontSize:"1.2rem"},hostBadge:{position:"absolute",bottom:"-5px",right:"-5px",backgroundColor:"var(--primary-purple)",borderRadius:"50%",width:"20px",height:"20px",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"0.8rem"},participantInfo:{flex:1,minWidth:0},participantName:{fontWeight:"500",color:"var(--text-light)",marginBottom:"4px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},youBadge:{color:"var(--accent-blue)",fontSize:"0.9rem"},participantStatus:{display:"flex",alignItems:"center",gap:"6px",fontSize:"0.8rem",color:"var(--text-gray)"},statusDot:{width:"8px",height:"8px",backgroundColor:"#10b981",borderRadius:"50%"},kickButton:{width:"28px",height:"28px",backgroundColor:"rgba(239, 68, 68, 0.1)",border:"1px solid rgba(239, 68, 68, 0.3)",borderRadius:"50%",color:"#f87171",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"1.2rem",transition:"all 0.2s ease"},controlsSection:{marginTop:"30px",paddingTop:"20px",borderTop:"1px solid var(--border-light)"},controlsTitle:{fontSize:"1rem",fontWeight:"600",marginBottom:"15px",color:"var(--text-light)"},controlsGrid:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"10px",marginBottom:"20px"},controlButton:{padding:"12px",backgroundColor:"rgba(255, 255, 255, 0.1)",border:"1px solid var(--border-light)",borderRadius:"var(--radius-md)",color:"var(--text-light)",cursor:"pointer",fontSize:"0.9rem",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",transition:"all 0.2s ease"},controlButtonActive:{backgroundColor:"rgba(34, 197, 94, 0.2)",borderColor:"rgba(34, 197, 94, 0.5)",color:"#4ade80"},controlButtonInactive:{backgroundColor:"rgba(239, 68, 68, 0.2)",borderColor:"rgba(239, 68, 68, 0.5)",color:"#f87171"},controlButtonDanger:{gridColumn:"1 / -1",padding:"12px",backgroundColor:"rgba(239, 68, 68, 0.2)",border:"1px solid rgba(239, 68, 68, 0.3)",borderRadius:"var(--radius-md)",color:"#f87171",cursor:"pointer",fontSize:"0.9rem",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",transition:"all 0.2s ease"},mediaError:{marginTop:"10px",padding:"8px 12px",backgroundColor:"rgba(245, 158, 11, 0.2)",border:"1px solid rgba(245, 158, 11, 0.3)",borderRadius:"var(--radius-md)",color:"#fbbf24",fontSize:"0.8rem"},peersStatus:{marginTop:"20px",padding:"15px",backgroundColor:"rgba(0, 0, 0, 0.2)",borderRadius:"var(--radius-md)"},peersStatusHeader:{display:"flex",justifyContent:"space-between",marginBottom:"10px",fontSize:"0.9rem"},peerItem:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"6px 0",fontSize:"0.8rem"},peerName:{color:"var(--text-gray)"},peerStatus:{fontWeight:"500",fontSize:"0.75rem",textTransform:"uppercase"},debugPanel:{margin:"20px",padding:"15px",backgroundColor:"rgba(0, 0, 0, 0.5)",borderRadius:"var(--radius-md)",border:"1px solid var(--border-light)"},debugSummary:{cursor:"pointer",padding:"10px",backgroundColor:"rgba(59, 130, 246, 0.2)",border:"1px solid rgba(59, 130, 246, 0.3)",borderRadius:"var(--radius-md)",color:"#93c5fd",fontWeight:"500",marginBottom:"15px"},debugActions:{display:"flex",gap:"10px",marginTop:"15px",flexWrap:"wrap"},footer:{backgroundColor:"var(--bg-card)",borderTop:"1px solid var(--border-light)",padding:"15px 20px",marginTop:"auto"},footerContent:{display:"flex",justifyContent:"space-between",alignItems:"center"},footerInfo:{display:"flex",alignItems:"center",gap:"10px",color:"var(--text-gray)",fontSize:"0.9rem",flexWrap:"wrap"},footerSeparator:{opacity:.5},footerActions:{display:"flex",gap:"10px"},footerButton:{padding:"8px 16px",backgroundColor:"rgba(255, 255, 255, 0.1)",border:"1px solid var(--border-light)",borderRadius:"var(--radius-md)",color:"var(--text-light)",cursor:"pointer",fontSize:"0.9rem",transition:"all 0.2s ease"}};function gO(){return b.jsx(KN,{children:b.jsx(XN,{children:b.jsx(oO,{children:b.jsxs(lO,{children:["  ",b.jsxs(jw,{children:["  ",b.jsxs(mw,{children:[b.jsx(so,{path:"/",element:b.jsx(qm,{})}),b.jsx(so,{path:"/Labyrinth",element:b.jsx(qm,{})})," ",b.jsx(so,{path:"/dashboard",element:b.jsx(VE,{children:b.jsx(cO,{})})}),b.jsx(so,{path:"/room/:roomId",element:b.jsx(VE,{children:b.jsx(pO,{})})}),b.jsx(so,{path:"*",element:b.jsx(qm,{})})]})]})]})})})})}pA.createRoot(document.getElementById("root")).render(b.jsx(k.StrictMode,{children:b.jsx(gO,{})}));
