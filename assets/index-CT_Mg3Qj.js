(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const u of o)if(u.type==="childList")for(const f of u.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&s(f)}).observe(document,{childList:!0,subtree:!0});function n(o){const u={};return o.integrity&&(u.integrity=o.integrity),o.referrerPolicy&&(u.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?u.credentials="include":o.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function s(o){if(o.ep)return;o.ep=!0;const u=n(o);fetch(o.href,u)}})();function rA(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var Em={exports:{}},zl={};var F_;function sA(){if(F_)return zl;F_=1;var r=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(s,o,u){var f=null;if(u!==void 0&&(f=""+u),o.key!==void 0&&(f=""+o.key),"key"in o){u={};for(var m in o)m!=="key"&&(u[m]=o[m])}else u=o;return o=u.ref,{$$typeof:r,type:s,key:f,ref:o!==void 0?o:null,props:u}}return zl.Fragment=e,zl.jsx=n,zl.jsxs=n,zl}var G_;function aA(){return G_||(G_=1,Em.exports=sA()),Em.exports}var S=aA(),Tm={exports:{}},Ie={};var Q_;function oA(){if(Q_)return Ie;Q_=1;var r=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),u=Symbol.for("react.consumer"),f=Symbol.for("react.context"),m=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),E=Symbol.for("react.lazy"),T=Symbol.for("react.activity"),R=Symbol.iterator;function L(k){return k===null||typeof k!="object"?null:(k=R&&k[R]||k["@@iterator"],typeof k=="function"?k:null)}var H={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},G=Object.assign,z={};function W(k,ne,ue){this.props=k,this.context=ne,this.refs=z,this.updater=ue||H}W.prototype.isReactComponent={},W.prototype.setState=function(k,ne){if(typeof k!="object"&&typeof k!="function"&&k!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,k,ne,"setState")},W.prototype.forceUpdate=function(k){this.updater.enqueueForceUpdate(this,k,"forceUpdate")};function K(){}K.prototype=W.prototype;function Z(k,ne,ue){this.props=k,this.context=ne,this.refs=z,this.updater=ue||H}var se=Z.prototype=new K;se.constructor=Z,G(se,W.prototype),se.isPureReactComponent=!0;var le=Array.isArray;function pe(){}var D={H:null,A:null,T:null,S:null},x=Object.prototype.hasOwnProperty;function A(k,ne,ue){var fe=ue.ref;return{$$typeof:r,type:k,key:ne,ref:fe!==void 0?fe:null,props:ue}}function N(k,ne){return A(k.type,ne,k.props)}function C(k){return typeof k=="object"&&k!==null&&k.$$typeof===r}function M(k){var ne={"=":"=0",":":"=2"};return"$"+k.replace(/[=:]/g,function(ue){return ne[ue]})}var I=/\/+/g;function Ee(k,ne){return typeof k=="object"&&k!==null&&k.key!=null?M(""+k.key):ne.toString(36)}function at(k){switch(k.status){case"fulfilled":return k.value;case"rejected":throw k.reason;default:switch(typeof k.status=="string"?k.then(pe,pe):(k.status="pending",k.then(function(ne){k.status==="pending"&&(k.status="fulfilled",k.value=ne)},function(ne){k.status==="pending"&&(k.status="rejected",k.reason=ne)})),k.status){case"fulfilled":return k.value;case"rejected":throw k.reason}}throw k}function $(k,ne,ue,fe,ve){var _e=typeof k;(_e==="undefined"||_e==="boolean")&&(k=null);var Se=!1;if(k===null)Se=!0;else switch(_e){case"bigint":case"string":case"number":Se=!0;break;case"object":switch(k.$$typeof){case r:case e:Se=!0;break;case E:return Se=k._init,$(Se(k._payload),ne,ue,fe,ve)}}if(Se)return ve=ve(k),Se=fe===""?"."+Ee(k,0):fe,le(ve)?(ue="",Se!=null&&(ue=Se.replace(I,"$&/")+"/"),$(ve,ne,ue,"",function(vn){return vn})):ve!=null&&(C(ve)&&(ve=N(ve,ue+(ve.key==null||k&&k.key===ve.key?"":(""+ve.key).replace(I,"$&/")+"/")+Se)),ne.push(ve)),1;Se=0;var et=fe===""?".":fe+":";if(le(k))for(var Qe=0;Qe<k.length;Qe++)fe=k[Qe],_e=et+Ee(fe,Qe),Se+=$(fe,ne,ue,_e,ve);else if(Qe=L(k),typeof Qe=="function")for(k=Qe.call(k),Qe=0;!(fe=k.next()).done;)fe=fe.value,_e=et+Ee(fe,Qe++),Se+=$(fe,ne,ue,_e,ve);else if(_e==="object"){if(typeof k.then=="function")return $(at(k),ne,ue,fe,ve);throw ne=String(k),Error("Objects are not valid as a React child (found: "+(ne==="[object Object]"?"object with keys {"+Object.keys(k).join(", ")+"}":ne)+"). If you meant to render a collection of children, use an array instead.")}return Se}function X(k,ne,ue){if(k==null)return k;var fe=[],ve=0;return $(k,fe,"","",function(_e){return ne.call(ue,_e,ve++)}),fe}function ce(k){if(k._status===-1){var ne=k._result;ne=ne(),ne.then(function(ue){(k._status===0||k._status===-1)&&(k._status=1,k._result=ue)},function(ue){(k._status===0||k._status===-1)&&(k._status=2,k._result=ue)}),k._status===-1&&(k._status=0,k._result=ne)}if(k._status===1)return k._result.default;throw k._result}var de=typeof reportError=="function"?reportError:function(k){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var ne=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof k=="object"&&k!==null&&typeof k.message=="string"?String(k.message):String(k),error:k});if(!window.dispatchEvent(ne))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",k);return}console.error(k)},Pe={map:X,forEach:function(k,ne,ue){X(k,function(){ne.apply(this,arguments)},ue)},count:function(k){var ne=0;return X(k,function(){ne++}),ne},toArray:function(k){return X(k,function(ne){return ne})||[]},only:function(k){if(!C(k))throw Error("React.Children.only expected to receive a single React element child.");return k}};return Ie.Activity=T,Ie.Children=Pe,Ie.Component=W,Ie.Fragment=n,Ie.Profiler=o,Ie.PureComponent=Z,Ie.StrictMode=s,Ie.Suspense=p,Ie.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=D,Ie.__COMPILER_RUNTIME={__proto__:null,c:function(k){return D.H.useMemoCache(k)}},Ie.cache=function(k){return function(){return k.apply(null,arguments)}},Ie.cacheSignal=function(){return null},Ie.cloneElement=function(k,ne,ue){if(k==null)throw Error("The argument must be a React element, but you passed "+k+".");var fe=G({},k.props),ve=k.key;if(ne!=null)for(_e in ne.key!==void 0&&(ve=""+ne.key),ne)!x.call(ne,_e)||_e==="key"||_e==="__self"||_e==="__source"||_e==="ref"&&ne.ref===void 0||(fe[_e]=ne[_e]);var _e=arguments.length-2;if(_e===1)fe.children=ue;else if(1<_e){for(var Se=Array(_e),et=0;et<_e;et++)Se[et]=arguments[et+2];fe.children=Se}return A(k.type,ve,fe)},Ie.createContext=function(k){return k={$$typeof:f,_currentValue:k,_currentValue2:k,_threadCount:0,Provider:null,Consumer:null},k.Provider=k,k.Consumer={$$typeof:u,_context:k},k},Ie.createElement=function(k,ne,ue){var fe,ve={},_e=null;if(ne!=null)for(fe in ne.key!==void 0&&(_e=""+ne.key),ne)x.call(ne,fe)&&fe!=="key"&&fe!=="__self"&&fe!=="__source"&&(ve[fe]=ne[fe]);var Se=arguments.length-2;if(Se===1)ve.children=ue;else if(1<Se){for(var et=Array(Se),Qe=0;Qe<Se;Qe++)et[Qe]=arguments[Qe+2];ve.children=et}if(k&&k.defaultProps)for(fe in Se=k.defaultProps,Se)ve[fe]===void 0&&(ve[fe]=Se[fe]);return A(k,_e,ve)},Ie.createRef=function(){return{current:null}},Ie.forwardRef=function(k){return{$$typeof:m,render:k}},Ie.isValidElement=C,Ie.lazy=function(k){return{$$typeof:E,_payload:{_status:-1,_result:k},_init:ce}},Ie.memo=function(k,ne){return{$$typeof:g,type:k,compare:ne===void 0?null:ne}},Ie.startTransition=function(k){var ne=D.T,ue={};D.T=ue;try{var fe=k(),ve=D.S;ve!==null&&ve(ue,fe),typeof fe=="object"&&fe!==null&&typeof fe.then=="function"&&fe.then(pe,de)}catch(_e){de(_e)}finally{ne!==null&&ue.types!==null&&(ne.types=ue.types),D.T=ne}},Ie.unstable_useCacheRefresh=function(){return D.H.useCacheRefresh()},Ie.use=function(k){return D.H.use(k)},Ie.useActionState=function(k,ne,ue){return D.H.useActionState(k,ne,ue)},Ie.useCallback=function(k,ne){return D.H.useCallback(k,ne)},Ie.useContext=function(k){return D.H.useContext(k)},Ie.useDebugValue=function(){},Ie.useDeferredValue=function(k,ne){return D.H.useDeferredValue(k,ne)},Ie.useEffect=function(k,ne){return D.H.useEffect(k,ne)},Ie.useEffectEvent=function(k){return D.H.useEffectEvent(k)},Ie.useId=function(){return D.H.useId()},Ie.useImperativeHandle=function(k,ne,ue){return D.H.useImperativeHandle(k,ne,ue)},Ie.useInsertionEffect=function(k,ne){return D.H.useInsertionEffect(k,ne)},Ie.useLayoutEffect=function(k,ne){return D.H.useLayoutEffect(k,ne)},Ie.useMemo=function(k,ne){return D.H.useMemo(k,ne)},Ie.useOptimistic=function(k,ne){return D.H.useOptimistic(k,ne)},Ie.useReducer=function(k,ne,ue){return D.H.useReducer(k,ne,ue)},Ie.useRef=function(k){return D.H.useRef(k)},Ie.useState=function(k){return D.H.useState(k)},Ie.useSyncExternalStore=function(k,ne,ue){return D.H.useSyncExternalStore(k,ne,ue)},Ie.useTransition=function(){return D.H.useTransition()},Ie.version="19.2.3",Ie}var Y_;function yp(){return Y_||(Y_=1,Tm.exports=oA()),Tm.exports}var V=yp();const Hm=rA(V);var bm={exports:{}},Bl={},Sm={exports:{}},Am={};var K_;function lA(){return K_||(K_=1,(function(r){function e($,X){var ce=$.length;$.push(X);e:for(;0<ce;){var de=ce-1>>>1,Pe=$[de];if(0<o(Pe,X))$[de]=X,$[ce]=Pe,ce=de;else break e}}function n($){return $.length===0?null:$[0]}function s($){if($.length===0)return null;var X=$[0],ce=$.pop();if(ce!==X){$[0]=ce;e:for(var de=0,Pe=$.length,k=Pe>>>1;de<k;){var ne=2*(de+1)-1,ue=$[ne],fe=ne+1,ve=$[fe];if(0>o(ue,ce))fe<Pe&&0>o(ve,ue)?($[de]=ve,$[fe]=ce,de=fe):($[de]=ue,$[ne]=ce,de=ne);else if(fe<Pe&&0>o(ve,ce))$[de]=ve,$[fe]=ce,de=fe;else break e}}return X}function o($,X){var ce=$.sortIndex-X.sortIndex;return ce!==0?ce:$.id-X.id}if(r.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var u=performance;r.unstable_now=function(){return u.now()}}else{var f=Date,m=f.now();r.unstable_now=function(){return f.now()-m}}var p=[],g=[],E=1,T=null,R=3,L=!1,H=!1,G=!1,z=!1,W=typeof setTimeout=="function"?setTimeout:null,K=typeof clearTimeout=="function"?clearTimeout:null,Z=typeof setImmediate<"u"?setImmediate:null;function se($){for(var X=n(g);X!==null;){if(X.callback===null)s(g);else if(X.startTime<=$)s(g),X.sortIndex=X.expirationTime,e(p,X);else break;X=n(g)}}function le($){if(G=!1,se($),!H)if(n(p)!==null)H=!0,pe||(pe=!0,M());else{var X=n(g);X!==null&&at(le,X.startTime-$)}}var pe=!1,D=-1,x=5,A=-1;function N(){return z?!0:!(r.unstable_now()-A<x)}function C(){if(z=!1,pe){var $=r.unstable_now();A=$;var X=!0;try{e:{H=!1,G&&(G=!1,K(D),D=-1),L=!0;var ce=R;try{t:{for(se($),T=n(p);T!==null&&!(T.expirationTime>$&&N());){var de=T.callback;if(typeof de=="function"){T.callback=null,R=T.priorityLevel;var Pe=de(T.expirationTime<=$);if($=r.unstable_now(),typeof Pe=="function"){T.callback=Pe,se($),X=!0;break t}T===n(p)&&s(p),se($)}else s(p);T=n(p)}if(T!==null)X=!0;else{var k=n(g);k!==null&&at(le,k.startTime-$),X=!1}}break e}finally{T=null,R=ce,L=!1}X=void 0}}finally{X?M():pe=!1}}}var M;if(typeof Z=="function")M=function(){Z(C)};else if(typeof MessageChannel<"u"){var I=new MessageChannel,Ee=I.port2;I.port1.onmessage=C,M=function(){Ee.postMessage(null)}}else M=function(){W(C,0)};function at($,X){D=W(function(){$(r.unstable_now())},X)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function($){$.callback=null},r.unstable_forceFrameRate=function($){0>$||125<$?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):x=0<$?Math.floor(1e3/$):5},r.unstable_getCurrentPriorityLevel=function(){return R},r.unstable_next=function($){switch(R){case 1:case 2:case 3:var X=3;break;default:X=R}var ce=R;R=X;try{return $()}finally{R=ce}},r.unstable_requestPaint=function(){z=!0},r.unstable_runWithPriority=function($,X){switch($){case 1:case 2:case 3:case 4:case 5:break;default:$=3}var ce=R;R=$;try{return X()}finally{R=ce}},r.unstable_scheduleCallback=function($,X,ce){var de=r.unstable_now();switch(typeof ce=="object"&&ce!==null?(ce=ce.delay,ce=typeof ce=="number"&&0<ce?de+ce:de):ce=de,$){case 1:var Pe=-1;break;case 2:Pe=250;break;case 5:Pe=1073741823;break;case 4:Pe=1e4;break;default:Pe=5e3}return Pe=ce+Pe,$={id:E++,callback:X,priorityLevel:$,startTime:ce,expirationTime:Pe,sortIndex:-1},ce>de?($.sortIndex=ce,e(g,$),n(p)===null&&$===n(g)&&(G?(K(D),D=-1):G=!0,at(le,ce-de))):($.sortIndex=Pe,e(p,$),H||L||(H=!0,pe||(pe=!0,M()))),$},r.unstable_shouldYield=N,r.unstable_wrapCallback=function($){var X=R;return function(){var ce=R;R=X;try{return $.apply(this,arguments)}finally{R=ce}}}})(Am)),Am}var $_;function uA(){return $_||($_=1,Sm.exports=lA()),Sm.exports}var wm={exports:{}},on={};var X_;function cA(){if(X_)return on;X_=1;var r=yp();function e(p){var g="https://react.dev/errors/"+p;if(1<arguments.length){g+="?args[]="+encodeURIComponent(arguments[1]);for(var E=2;E<arguments.length;E++)g+="&args[]="+encodeURIComponent(arguments[E])}return"Minified React error #"+p+"; visit "+g+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var s={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},o=Symbol.for("react.portal");function u(p,g,E){var T=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:T==null?null:""+T,children:p,containerInfo:g,implementation:E}}var f=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function m(p,g){if(p==="font")return"";if(typeof g=="string")return g==="use-credentials"?g:""}return on.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,on.createPortal=function(p,g){var E=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!g||g.nodeType!==1&&g.nodeType!==9&&g.nodeType!==11)throw Error(e(299));return u(p,g,null,E)},on.flushSync=function(p){var g=f.T,E=s.p;try{if(f.T=null,s.p=2,p)return p()}finally{f.T=g,s.p=E,s.d.f()}},on.preconnect=function(p,g){typeof p=="string"&&(g?(g=g.crossOrigin,g=typeof g=="string"?g==="use-credentials"?g:"":void 0):g=null,s.d.C(p,g))},on.prefetchDNS=function(p){typeof p=="string"&&s.d.D(p)},on.preinit=function(p,g){if(typeof p=="string"&&g&&typeof g.as=="string"){var E=g.as,T=m(E,g.crossOrigin),R=typeof g.integrity=="string"?g.integrity:void 0,L=typeof g.fetchPriority=="string"?g.fetchPriority:void 0;E==="style"?s.d.S(p,typeof g.precedence=="string"?g.precedence:void 0,{crossOrigin:T,integrity:R,fetchPriority:L}):E==="script"&&s.d.X(p,{crossOrigin:T,integrity:R,fetchPriority:L,nonce:typeof g.nonce=="string"?g.nonce:void 0})}},on.preinitModule=function(p,g){if(typeof p=="string")if(typeof g=="object"&&g!==null){if(g.as==null||g.as==="script"){var E=m(g.as,g.crossOrigin);s.d.M(p,{crossOrigin:E,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0})}}else g==null&&s.d.M(p)},on.preload=function(p,g){if(typeof p=="string"&&typeof g=="object"&&g!==null&&typeof g.as=="string"){var E=g.as,T=m(E,g.crossOrigin);s.d.L(p,E,{crossOrigin:T,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0,type:typeof g.type=="string"?g.type:void 0,fetchPriority:typeof g.fetchPriority=="string"?g.fetchPriority:void 0,referrerPolicy:typeof g.referrerPolicy=="string"?g.referrerPolicy:void 0,imageSrcSet:typeof g.imageSrcSet=="string"?g.imageSrcSet:void 0,imageSizes:typeof g.imageSizes=="string"?g.imageSizes:void 0,media:typeof g.media=="string"?g.media:void 0})}},on.preloadModule=function(p,g){if(typeof p=="string")if(g){var E=m(g.as,g.crossOrigin);s.d.m(p,{as:typeof g.as=="string"&&g.as!=="script"?g.as:void 0,crossOrigin:E,integrity:typeof g.integrity=="string"?g.integrity:void 0})}else s.d.m(p)},on.requestFormReset=function(p){s.d.r(p)},on.unstable_batchedUpdates=function(p,g){return p(g)},on.useFormState=function(p,g,E){return f.H.useFormState(p,g,E)},on.useFormStatus=function(){return f.H.useHostTransitionStatus()},on.version="19.2.3",on}var W_;function hA(){if(W_)return wm.exports;W_=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),wm.exports=cA(),wm.exports}var J_;function fA(){if(J_)return Bl;J_=1;var r=uA(),e=yp(),n=hA();function s(t){var i="https://react.dev/errors/"+t;if(1<arguments.length){i+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)i+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+t+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function u(t){var i=t,a=t;if(t.alternate)for(;i.return;)i=i.return;else{t=i;do i=t,(i.flags&4098)!==0&&(a=i.return),t=i.return;while(t)}return i.tag===3?a:null}function f(t){if(t.tag===13){var i=t.memoizedState;if(i===null&&(t=t.alternate,t!==null&&(i=t.memoizedState)),i!==null)return i.dehydrated}return null}function m(t){if(t.tag===31){var i=t.memoizedState;if(i===null&&(t=t.alternate,t!==null&&(i=t.memoizedState)),i!==null)return i.dehydrated}return null}function p(t){if(u(t)!==t)throw Error(s(188))}function g(t){var i=t.alternate;if(!i){if(i=u(t),i===null)throw Error(s(188));return i!==t?null:t}for(var a=t,l=i;;){var h=a.return;if(h===null)break;var d=h.alternate;if(d===null){if(l=h.return,l!==null){a=l;continue}break}if(h.child===d.child){for(d=h.child;d;){if(d===a)return p(h),t;if(d===l)return p(h),i;d=d.sibling}throw Error(s(188))}if(a.return!==l.return)a=h,l=d;else{for(var v=!1,b=h.child;b;){if(b===a){v=!0,a=h,l=d;break}if(b===l){v=!0,l=h,a=d;break}b=b.sibling}if(!v){for(b=d.child;b;){if(b===a){v=!0,a=d,l=h;break}if(b===l){v=!0,l=d,a=h;break}b=b.sibling}if(!v)throw Error(s(189))}}if(a.alternate!==l)throw Error(s(190))}if(a.tag!==3)throw Error(s(188));return a.stateNode.current===a?t:i}function E(t){var i=t.tag;if(i===5||i===26||i===27||i===6)return t;for(t=t.child;t!==null;){if(i=E(t),i!==null)return i;t=t.sibling}return null}var T=Object.assign,R=Symbol.for("react.element"),L=Symbol.for("react.transitional.element"),H=Symbol.for("react.portal"),G=Symbol.for("react.fragment"),z=Symbol.for("react.strict_mode"),W=Symbol.for("react.profiler"),K=Symbol.for("react.consumer"),Z=Symbol.for("react.context"),se=Symbol.for("react.forward_ref"),le=Symbol.for("react.suspense"),pe=Symbol.for("react.suspense_list"),D=Symbol.for("react.memo"),x=Symbol.for("react.lazy"),A=Symbol.for("react.activity"),N=Symbol.for("react.memo_cache_sentinel"),C=Symbol.iterator;function M(t){return t===null||typeof t!="object"?null:(t=C&&t[C]||t["@@iterator"],typeof t=="function"?t:null)}var I=Symbol.for("react.client.reference");function Ee(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===I?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case G:return"Fragment";case W:return"Profiler";case z:return"StrictMode";case le:return"Suspense";case pe:return"SuspenseList";case A:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case H:return"Portal";case Z:return t.displayName||"Context";case K:return(t._context.displayName||"Context")+".Consumer";case se:var i=t.render;return t=t.displayName,t||(t=i.displayName||i.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case D:return i=t.displayName||null,i!==null?i:Ee(t.type)||"Memo";case x:i=t._payload,t=t._init;try{return Ee(t(i))}catch{}}return null}var at=Array.isArray,$=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,X=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ce={pending:!1,data:null,method:null,action:null},de=[],Pe=-1;function k(t){return{current:t}}function ne(t){0>Pe||(t.current=de[Pe],de[Pe]=null,Pe--)}function ue(t,i){Pe++,de[Pe]=t.current,t.current=i}var fe=k(null),ve=k(null),_e=k(null),Se=k(null);function et(t,i){switch(ue(_e,i),ue(ve,t),ue(fe,null),i.nodeType){case 9:case 11:t=(t=i.documentElement)&&(t=t.namespaceURI)?d_(t):0;break;default:if(t=i.tagName,i=i.namespaceURI)i=d_(i),t=m_(i,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}ne(fe),ue(fe,t)}function Qe(){ne(fe),ne(ve),ne(_e)}function vn(t){t.memoizedState!==null&&ue(Se,t);var i=fe.current,a=m_(i,t.type);i!==a&&(ue(ve,t),ue(fe,a))}function an(t){ve.current===t&&(ne(fe),ne(ve)),Se.current===t&&(ne(Se),Pl._currentValue=ce)}var Wi,qn;function Ht(t){if(Wi===void 0)try{throw Error()}catch(a){var i=a.stack.trim().match(/\n( *(at )?)/);Wi=i&&i[1]||"",qn=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Wi+t+qn}var hn=!1;function Cs(t,i){if(!t||hn)return"";hn=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(i){var ie=function(){throw Error()};if(Object.defineProperty(ie.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ie,[])}catch(Y){var F=Y}Reflect.construct(t,[],ie)}else{try{ie.call()}catch(Y){F=Y}t.call(ie.prototype)}}else{try{throw Error()}catch(Y){F=Y}(ie=t())&&typeof ie.catch=="function"&&ie.catch(function(){})}}catch(Y){if(Y&&F&&typeof Y.stack=="string")return[Y.stack,F.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var h=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");h&&h.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var d=l.DetermineComponentFrameRoot(),v=d[0],b=d[1];if(v&&b){var O=v.split(`
`),q=b.split(`
`);for(h=l=0;l<O.length&&!O[l].includes("DetermineComponentFrameRoot");)l++;for(;h<q.length&&!q[h].includes("DetermineComponentFrameRoot");)h++;if(l===O.length||h===q.length)for(l=O.length-1,h=q.length-1;1<=l&&0<=h&&O[l]!==q[h];)h--;for(;1<=l&&0<=h;l--,h--)if(O[l]!==q[h]){if(l!==1||h!==1)do if(l--,h--,0>h||O[l]!==q[h]){var J=`
`+O[l].replace(" at new "," at ");return t.displayName&&J.includes("<anonymous>")&&(J=J.replace("<anonymous>",t.displayName)),J}while(1<=l&&0<=h);break}}}finally{hn=!1,Error.prepareStackTrace=a}return(a=t?t.displayName||t.name:"")?Ht(a):""}function Lo(t,i){switch(t.tag){case 26:case 27:case 5:return Ht(t.type);case 16:return Ht("Lazy");case 13:return t.child!==i&&i!==null?Ht("Suspense Fallback"):Ht("Suspense");case 19:return Ht("SuspenseList");case 0:case 15:return Cs(t.type,!1);case 11:return Cs(t.type.render,!1);case 1:return Cs(t.type,!0);case 31:return Ht("Activity");default:return""}}function Uo(t){try{var i="",a=null;do i+=Lo(t,a),a=t,t=t.return;while(t);return i}catch(l){return`
Error generating stack: `+l.message+`
`+l.stack}}var wt=Object.prototype.hasOwnProperty,zt=r.unstable_scheduleCallback,Cr=r.unstable_cancelCallback,bf=r.unstable_shouldYield,Nu=r.unstable_requestPaint,fn=r.unstable_now,xs=r.unstable_getCurrentPriorityLevel,jo=r.unstable_ImmediatePriority,zo=r.unstable_UserBlockingPriority,xr=r.unstable_NormalPriority,Sf=r.unstable_LowPriority,Ou=r.unstable_IdlePriority,Mu=r.log,Vu=r.unstable_setDisableYieldValue,ii=null,$t=null;function Hn(t){if(typeof Mu=="function"&&Vu(t),$t&&typeof $t.setStrictMode=="function")try{$t.setStrictMode(ii,t)}catch{}}var Et=Math.clz32?Math.clz32:Pu,ku=Math.log,va=Math.LN2;function Pu(t){return t>>>=0,t===0?32:31-(ku(t)/va|0)|0}var Ti=256,Is=262144,Rt=4194304;function bi(t){var i=t&42;if(i!==0)return i;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return t&261888;case 262144:case 524288:case 1048576:case 2097152:return t&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function Si(t,i,a){var l=t.pendingLanes;if(l===0)return 0;var h=0,d=t.suspendedLanes,v=t.pingedLanes;t=t.warmLanes;var b=l&134217727;return b!==0?(l=b&~d,l!==0?h=bi(l):(v&=b,v!==0?h=bi(v):a||(a=b&~t,a!==0&&(h=bi(a))))):(b=l&~d,b!==0?h=bi(b):v!==0?h=bi(v):a||(a=l&~t,a!==0&&(h=bi(a)))),h===0?0:i!==0&&i!==h&&(i&d)===0&&(d=h&-h,a=i&-i,d>=a||d===32&&(a&4194048)!==0)?i:h}function ri(t,i){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&i)===0}function Af(t,i){switch(t){case 1:case 2:case 4:case 8:case 64:return i+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Lu(){var t=Rt;return Rt<<=1,(Rt&62914560)===0&&(Rt=4194304),t}function Ai(t){for(var i=[],a=0;31>a;a++)i.push(t);return i}function Ds(t,i){t.pendingLanes|=i,i!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function wf(t,i,a,l,h,d){var v=t.pendingLanes;t.pendingLanes=a,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=a,t.entangledLanes&=a,t.errorRecoveryDisabledLanes&=a,t.shellSuspendCounter=0;var b=t.entanglements,O=t.expirationTimes,q=t.hiddenUpdates;for(a=v&~a;0<a;){var J=31-Et(a),ie=1<<J;b[J]=0,O[J]=-1;var F=q[J];if(F!==null)for(q[J]=null,J=0;J<F.length;J++){var Y=F[J];Y!==null&&(Y.lane&=-536870913)}a&=~ie}l!==0&&Ns(t,l,0),d!==0&&h===0&&t.tag!==0&&(t.suspendedLanes|=d&~(v&~i))}function Ns(t,i,a){t.pendingLanes|=i,t.suspendedLanes&=~i;var l=31-Et(i);t.entangledLanes|=i,t.entanglements[l]=t.entanglements[l]|1073741824|a&261930}function Bo(t,i){var a=t.entangledLanes|=i;for(t=t.entanglements;a;){var l=31-Et(a),h=1<<l;h&i|t[l]&i&&(t[l]|=i),a&=~h}}function qo(t,i){var a=i&-i;return a=(a&42)!==0?1:Os(a),(a&(t.suspendedLanes|i))!==0?0:a}function Os(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function Ji(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function Uu(){var t=X.p;return t!==0?t:(t=window.event,t===void 0?32:L_(t.type))}function si(t,i){var a=X.p;try{return X.p=t,i()}finally{X.p=a}}var ai=Math.random().toString(36).slice(2),Ct="__reactFiber$"+ai,Ft="__reactProps$"+ai,wi="__reactContainer$"+ai,_a="__reactEvents$"+ai,Rf="__reactListeners$"+ai,ju="__reactHandles$"+ai,zu="__reactResources$"+ai,Ri="__reactMarker$"+ai;function Ea(t){delete t[Ct],delete t[Ft],delete t[_a],delete t[Rf],delete t[ju]}function Ci(t){var i=t[Ct];if(i)return i;for(var a=t.parentNode;a;){if(i=a[wi]||a[Ct]){if(a=i.alternate,i.child!==null||a!==null&&a.child!==null)for(t=T_(t);t!==null;){if(a=t[Ct])return a;t=T_(t)}return i}t=a,a=t.parentNode}return null}function Fn(t){if(t=t[Ct]||t[wi]){var i=t.tag;if(i===5||i===6||i===13||i===31||i===26||i===27||i===3)return t}return null}function Cn(t){var i=t.tag;if(i===5||i===26||i===27||i===6)return t.stateNode;throw Error(s(33))}function xi(t){var i=t[zu];return i||(i=t[zu]={hoistableStyles:new Map,hoistableScripts:new Map}),i}function xt(t){t[Ri]=!0}var Ho=new Set,Fo={};function Ii(t,i){Di(t,i),Di(t+"Capture",i)}function Di(t,i){for(Fo[t]=i,t=0;t<i.length;t++)Ho.add(i[t])}var Go=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Qo={},Yo={};function Bu(t){return wt.call(Yo,t)?!0:wt.call(Qo,t)?!1:Go.test(t)?Yo[t]=!0:(Qo[t]=!0,!1)}function Ta(t,i,a){if(Bu(i))if(a===null)t.removeAttribute(i);else{switch(typeof a){case"undefined":case"function":case"symbol":t.removeAttribute(i);return;case"boolean":var l=i.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){t.removeAttribute(i);return}}t.setAttribute(i,""+a)}}function xn(t,i,a){if(a===null)t.removeAttribute(i);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(i);return}t.setAttribute(i,""+a)}}function It(t,i,a,l){if(l===null)t.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(a);return}t.setAttributeNS(i,a,""+l)}}function Gt(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Ir(t){var i=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function Ko(t,i,a){var l=Object.getOwnPropertyDescriptor(t.constructor.prototype,i);if(!t.hasOwnProperty(i)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var h=l.get,d=l.set;return Object.defineProperty(t,i,{configurable:!0,get:function(){return h.call(this)},set:function(v){a=""+v,d.call(this,v)}}),Object.defineProperty(t,i,{enumerable:l.enumerable}),{getValue:function(){return a},setValue:function(v){a=""+v},stopTracking:function(){t._valueTracker=null,delete t[i]}}}}function We(t){if(!t._valueTracker){var i=Ir(t)?"checked":"value";t._valueTracker=Ko(t,i,""+t[i])}}function Ms(t){if(!t)return!1;var i=t._valueTracker;if(!i)return!0;var a=i.getValue(),l="";return t&&(l=Ir(t)?t.checked?"true":"false":t.value),t=l,t!==a?(i.setValue(t),!0):!1}function Ni(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var Vs=/[\n"\\]/g;function _n(t){return t.replace(Vs,function(i){return"\\"+i.charCodeAt(0).toString(16)+" "})}function ba(t,i,a,l,h,d,v,b){t.name="",v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"?t.type=v:t.removeAttribute("type"),i!=null?v==="number"?(i===0&&t.value===""||t.value!=i)&&(t.value=""+Gt(i)):t.value!==""+Gt(i)&&(t.value=""+Gt(i)):v!=="submit"&&v!=="reset"||t.removeAttribute("value"),i!=null?$o(t,v,Gt(i)):a!=null?$o(t,v,Gt(a)):l!=null&&t.removeAttribute("value"),h==null&&d!=null&&(t.defaultChecked=!!d),h!=null&&(t.checked=h&&typeof h!="function"&&typeof h!="symbol"),b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"?t.name=""+Gt(b):t.removeAttribute("name")}function qu(t,i,a,l,h,d,v,b){if(d!=null&&typeof d!="function"&&typeof d!="symbol"&&typeof d!="boolean"&&(t.type=d),i!=null||a!=null){if(!(d!=="submit"&&d!=="reset"||i!=null)){We(t);return}a=a!=null?""+Gt(a):"",i=i!=null?""+Gt(i):a,b||i===t.value||(t.value=i),t.defaultValue=i}l=l??h,l=typeof l!="function"&&typeof l!="symbol"&&!!l,t.checked=b?t.checked:!!l,t.defaultChecked=!!l,v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"&&(t.name=v),We(t)}function $o(t,i,a){i==="number"&&Ni(t.ownerDocument)===t||t.defaultValue===""+a||(t.defaultValue=""+a)}function Dr(t,i,a,l){if(t=t.options,i){i={};for(var h=0;h<a.length;h++)i["$"+a[h]]=!0;for(a=0;a<t.length;a++)h=i.hasOwnProperty("$"+t[a].value),t[a].selected!==h&&(t[a].selected=h),h&&l&&(t[a].defaultSelected=!0)}else{for(a=""+Gt(a),i=null,h=0;h<t.length;h++){if(t[h].value===a){t[h].selected=!0,l&&(t[h].defaultSelected=!0);return}i!==null||t[h].disabled||(i=t[h])}i!==null&&(i.selected=!0)}}function Hu(t,i,a){if(i!=null&&(i=""+Gt(i),i!==t.value&&(t.value=i),a==null)){t.defaultValue!==i&&(t.defaultValue=i);return}t.defaultValue=a!=null?""+Gt(a):""}function Nr(t,i,a,l){if(i==null){if(l!=null){if(a!=null)throw Error(s(92));if(at(l)){if(1<l.length)throw Error(s(93));l=l[0]}a=l}a==null&&(a=""),i=a}a=Gt(i),t.defaultValue=a,l=t.textContent,l===a&&l!==""&&l!==null&&(t.value=l),We(t)}function En(t,i){if(i){var a=t.firstChild;if(a&&a===t.lastChild&&a.nodeType===3){a.nodeValue=i;return}}t.textContent=i}var Fu=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Xo(t,i,a){var l=i.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?l?t.setProperty(i,""):i==="float"?t.cssFloat="":t[i]="":l?t.setProperty(i,a):typeof a!="number"||a===0||Fu.has(i)?i==="float"?t.cssFloat=a:t[i]=(""+a).trim():t[i]=a+"px"}function Wo(t,i,a){if(i!=null&&typeof i!="object")throw Error(s(62));if(t=t.style,a!=null){for(var l in a)!a.hasOwnProperty(l)||i!=null&&i.hasOwnProperty(l)||(l.indexOf("--")===0?t.setProperty(l,""):l==="float"?t.cssFloat="":t[l]="");for(var h in i)l=i[h],i.hasOwnProperty(h)&&a[h]!==l&&Xo(t,h,l)}else for(var d in i)i.hasOwnProperty(d)&&Xo(t,d,i[d])}function Sa(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Gu=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Or=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Aa(t){return Or.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}function oi(){}var Jo=null;function Gn(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Mr=null,Oi=null;function ks(t){var i=Fn(t);if(i&&(t=i.stateNode)){var a=t[Ft]||null;e:switch(t=i.stateNode,i.type){case"input":if(ba(t,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),i=a.name,a.type==="radio"&&i!=null){for(a=t;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+_n(""+i)+'"][type="radio"]'),i=0;i<a.length;i++){var l=a[i];if(l!==t&&l.form===t.form){var h=l[Ft]||null;if(!h)throw Error(s(90));ba(l,h.value,h.defaultValue,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name)}}for(i=0;i<a.length;i++)l=a[i],l.form===t.form&&Ms(l)}break e;case"textarea":Hu(t,a.value,a.defaultValue);break e;case"select":i=a.value,i!=null&&Dr(t,!!a.multiple,i,!1)}}}var wa=!1;function Vr(t,i,a){if(wa)return t(i,a);wa=!0;try{var l=t(i);return l}finally{if(wa=!1,(Mr!==null||Oi!==null)&&(Uc(),Mr&&(i=Mr,t=Oi,Oi=Mr=null,ks(i),t)))for(i=0;i<t.length;i++)ks(t[i])}}function li(t,i){var a=t.stateNode;if(a===null)return null;var l=a[Ft]||null;if(l===null)return null;a=l[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(t=t.type,l=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!l;break e;default:t=!1}if(t)return null;if(a&&typeof a!="function")throw Error(s(231,i,typeof a));return a}var Qn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ps=!1;if(Qn)try{var tt={};Object.defineProperty(tt,"passive",{get:function(){Ps=!0}}),window.addEventListener("test",tt,tt),window.removeEventListener("test",tt,tt)}catch{Ps=!1}var Mi=null,Zo=null,Ls=null;function el(){if(Ls)return Ls;var t,i=Zo,a=i.length,l,h="value"in Mi?Mi.value:Mi.textContent,d=h.length;for(t=0;t<a&&i[t]===h[t];t++);var v=a-t;for(l=1;l<=v&&i[a-l]===h[d-l];l++);return Ls=h.slice(t,1<l?1-l:void 0)}function Us(t){var i=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&i===13&&(t=13)):t=i,t===10&&(t=13),32<=t||t===13?t:0}function Zi(){return!0}function ui(){return!1}function Xt(t){function i(a,l,h,d,v){this._reactName=a,this._targetInst=h,this.type=l,this.nativeEvent=d,this.target=v,this.currentTarget=null;for(var b in t)t.hasOwnProperty(b)&&(a=t[b],this[b]=a?a(d):d[b]);return this.isDefaultPrevented=(d.defaultPrevented!=null?d.defaultPrevented:d.returnValue===!1)?Zi:ui,this.isPropagationStopped=ui,this}return T(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Zi)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Zi)},persist:function(){},isPersistent:Zi}),i}var er={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Vi=Xt(er),kr=T({},er,{view:0,detail:0}),tl=Xt(kr),Pr,Ra,ki,Ca=T({},kr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Lr,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==ki&&(ki&&t.type==="mousemove"?(Pr=t.screenX-ki.screenX,Ra=t.screenY-ki.screenY):Ra=Pr=0,ki=t),Pr)},movementY:function(t){return"movementY"in t?t.movementY:Ra}}),nl=Xt(Ca),js=T({},Ca,{dataTransfer:0}),Qu=Xt(js),Yu=T({},kr,{relatedTarget:0}),zs=Xt(Yu),il=T({},er,{animationName:0,elapsedTime:0,pseudoElement:0}),Ku=Xt(il),xa=T({},er,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),$u=Xt(xa),Xu=T({},er,{data:0}),Pi=Xt(Xu),Wu={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Ju={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Zu={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ec(t){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(t):(t=Zu[t])?!!i[t]:!1}function Lr(){return ec}var dn=T({},kr,{key:function(t){if(t.key){var i=Wu[t.key]||t.key;if(i!=="Unidentified")return i}return t.type==="keypress"?(t=Us(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Ju[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Lr,charCode:function(t){return t.type==="keypress"?Us(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Us(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),tc=Xt(dn),nc=T({},Ca,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),tr=Xt(nc),c=T({},kr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Lr}),y=Xt(c),_=T({},er,{propertyName:0,elapsedTime:0,pseudoElement:0}),w=Xt(_),j=T({},Ca,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Q=Xt(j),oe=T({},er,{newState:0,oldState:0}),Ne=Xt(oe),Tt=[9,13,27,32],$e=Qn&&"CompositionEvent"in window,ht=null;Qn&&"documentMode"in document&&(ht=document.documentMode);var Yn=Qn&&"TextEvent"in window&&!ht,Li=Qn&&(!$e||ht&&8<ht&&11>=ht),ci=" ",hi=!1;function Bs(t,i){switch(t){case"keyup":return Tt.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ia(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Da=!1;function xS(t,i){switch(t){case"compositionend":return Ia(i);case"keypress":return i.which!==32?null:(hi=!0,ci);case"textInput":return t=i.data,t===ci&&hi?null:t;default:return null}}function IS(t,i){if(Da)return t==="compositionend"||!$e&&Bs(t,i)?(t=el(),Ls=Zo=Mi=null,Da=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return Li&&i.locale!=="ko"?null:i.data;default:return null}}var DS={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ag(t){var i=t&&t.nodeName&&t.nodeName.toLowerCase();return i==="input"?!!DS[t.type]:i==="textarea"}function wg(t,i,a,l){Mr?Oi?Oi.push(l):Oi=[l]:Mr=l,i=Gc(i,"onChange"),0<i.length&&(a=new Vi("onChange","change",null,a,l),t.push({event:a,listeners:i}))}var rl=null,sl=null;function NS(t){o_(t,0)}function ic(t){var i=Cn(t);if(Ms(i))return t}function Rg(t,i){if(t==="change")return i}var Cg=!1;if(Qn){var Cf;if(Qn){var xf="oninput"in document;if(!xf){var xg=document.createElement("div");xg.setAttribute("oninput","return;"),xf=typeof xg.oninput=="function"}Cf=xf}else Cf=!1;Cg=Cf&&(!document.documentMode||9<document.documentMode)}function Ig(){rl&&(rl.detachEvent("onpropertychange",Dg),sl=rl=null)}function Dg(t){if(t.propertyName==="value"&&ic(sl)){var i=[];wg(i,sl,t,Gn(t)),Vr(NS,i)}}function OS(t,i,a){t==="focusin"?(Ig(),rl=i,sl=a,rl.attachEvent("onpropertychange",Dg)):t==="focusout"&&Ig()}function MS(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return ic(sl)}function VS(t,i){if(t==="click")return ic(i)}function kS(t,i){if(t==="input"||t==="change")return ic(i)}function PS(t,i){return t===i&&(t!==0||1/t===1/i)||t!==t&&i!==i}var In=typeof Object.is=="function"?Object.is:PS;function al(t,i){if(In(t,i))return!0;if(typeof t!="object"||t===null||typeof i!="object"||i===null)return!1;var a=Object.keys(t),l=Object.keys(i);if(a.length!==l.length)return!1;for(l=0;l<a.length;l++){var h=a[l];if(!wt.call(i,h)||!In(t[h],i[h]))return!1}return!0}function Ng(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Og(t,i){var a=Ng(t);t=0;for(var l;a;){if(a.nodeType===3){if(l=t+a.textContent.length,t<=i&&l>=i)return{node:a,offset:i-t};t=l}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=Ng(a)}}function Mg(t,i){return t&&i?t===i?!0:t&&t.nodeType===3?!1:i&&i.nodeType===3?Mg(t,i.parentNode):"contains"in t?t.contains(i):t.compareDocumentPosition?!!(t.compareDocumentPosition(i)&16):!1:!1}function Vg(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var i=Ni(t.document);i instanceof t.HTMLIFrameElement;){try{var a=typeof i.contentWindow.location.href=="string"}catch{a=!1}if(a)t=i.contentWindow;else break;i=Ni(t.document)}return i}function If(t){var i=t&&t.nodeName&&t.nodeName.toLowerCase();return i&&(i==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||i==="textarea"||t.contentEditable==="true")}var LS=Qn&&"documentMode"in document&&11>=document.documentMode,Na=null,Df=null,ol=null,Nf=!1;function kg(t,i,a){var l=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;Nf||Na==null||Na!==Ni(l)||(l=Na,"selectionStart"in l&&If(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),ol&&al(ol,l)||(ol=l,l=Gc(Df,"onSelect"),0<l.length&&(i=new Vi("onSelect","select",null,i,a),t.push({event:i,listeners:l}),i.target=Na)))}function qs(t,i){var a={};return a[t.toLowerCase()]=i.toLowerCase(),a["Webkit"+t]="webkit"+i,a["Moz"+t]="moz"+i,a}var Oa={animationend:qs("Animation","AnimationEnd"),animationiteration:qs("Animation","AnimationIteration"),animationstart:qs("Animation","AnimationStart"),transitionrun:qs("Transition","TransitionRun"),transitionstart:qs("Transition","TransitionStart"),transitioncancel:qs("Transition","TransitionCancel"),transitionend:qs("Transition","TransitionEnd")},Of={},Pg={};Qn&&(Pg=document.createElement("div").style,"AnimationEvent"in window||(delete Oa.animationend.animation,delete Oa.animationiteration.animation,delete Oa.animationstart.animation),"TransitionEvent"in window||delete Oa.transitionend.transition);function Hs(t){if(Of[t])return Of[t];if(!Oa[t])return t;var i=Oa[t],a;for(a in i)if(i.hasOwnProperty(a)&&a in Pg)return Of[t]=i[a];return t}var Lg=Hs("animationend"),Ug=Hs("animationiteration"),jg=Hs("animationstart"),US=Hs("transitionrun"),jS=Hs("transitionstart"),zS=Hs("transitioncancel"),zg=Hs("transitionend"),Bg=new Map,Mf="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Mf.push("scrollEnd");function fi(t,i){Bg.set(t,i),Ii(i,[t])}var rc=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var i=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(i))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)},Kn=[],Ma=0,Vf=0;function sc(){for(var t=Ma,i=Vf=Ma=0;i<t;){var a=Kn[i];Kn[i++]=null;var l=Kn[i];Kn[i++]=null;var h=Kn[i];Kn[i++]=null;var d=Kn[i];if(Kn[i++]=null,l!==null&&h!==null){var v=l.pending;v===null?h.next=h:(h.next=v.next,v.next=h),l.pending=h}d!==0&&qg(a,h,d)}}function ac(t,i,a,l){Kn[Ma++]=t,Kn[Ma++]=i,Kn[Ma++]=a,Kn[Ma++]=l,Vf|=l,t.lanes|=l,t=t.alternate,t!==null&&(t.lanes|=l)}function kf(t,i,a,l){return ac(t,i,a,l),oc(t)}function Fs(t,i){return ac(t,null,null,i),oc(t)}function qg(t,i,a){t.lanes|=a;var l=t.alternate;l!==null&&(l.lanes|=a);for(var h=!1,d=t.return;d!==null;)d.childLanes|=a,l=d.alternate,l!==null&&(l.childLanes|=a),d.tag===22&&(t=d.stateNode,t===null||t._visibility&1||(h=!0)),t=d,d=d.return;return t.tag===3?(d=t.stateNode,h&&i!==null&&(h=31-Et(a),t=d.hiddenUpdates,l=t[h],l===null?t[h]=[i]:l.push(i),i.lane=a|536870912),d):null}function oc(t){if(50<Il)throw Il=0,Fd=null,Error(s(185));for(var i=t.return;i!==null;)t=i,i=t.return;return t.tag===3?t.stateNode:null}var Va={};function BS(t,i,a,l){this.tag=t,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Dn(t,i,a,l){return new BS(t,i,a,l)}function Pf(t){return t=t.prototype,!(!t||!t.isReactComponent)}function nr(t,i){var a=t.alternate;return a===null?(a=Dn(t.tag,i,t.key,t.mode),a.elementType=t.elementType,a.type=t.type,a.stateNode=t.stateNode,a.alternate=t,t.alternate=a):(a.pendingProps=i,a.type=t.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=t.flags&65011712,a.childLanes=t.childLanes,a.lanes=t.lanes,a.child=t.child,a.memoizedProps=t.memoizedProps,a.memoizedState=t.memoizedState,a.updateQueue=t.updateQueue,i=t.dependencies,a.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},a.sibling=t.sibling,a.index=t.index,a.ref=t.ref,a.refCleanup=t.refCleanup,a}function Hg(t,i){t.flags&=65011714;var a=t.alternate;return a===null?(t.childLanes=0,t.lanes=i,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=a.childLanes,t.lanes=a.lanes,t.child=a.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=a.memoizedProps,t.memoizedState=a.memoizedState,t.updateQueue=a.updateQueue,t.type=a.type,i=a.dependencies,t.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),t}function lc(t,i,a,l,h,d){var v=0;if(l=t,typeof t=="function")Pf(t)&&(v=1);else if(typeof t=="string")v=Q1(t,a,fe.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case A:return t=Dn(31,a,i,h),t.elementType=A,t.lanes=d,t;case G:return Gs(a.children,h,d,i);case z:v=8,h|=24;break;case W:return t=Dn(12,a,i,h|2),t.elementType=W,t.lanes=d,t;case le:return t=Dn(13,a,i,h),t.elementType=le,t.lanes=d,t;case pe:return t=Dn(19,a,i,h),t.elementType=pe,t.lanes=d,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Z:v=10;break e;case K:v=9;break e;case se:v=11;break e;case D:v=14;break e;case x:v=16,l=null;break e}v=29,a=Error(s(130,t===null?"null":typeof t,"")),l=null}return i=Dn(v,a,i,h),i.elementType=t,i.type=l,i.lanes=d,i}function Gs(t,i,a,l){return t=Dn(7,t,l,i),t.lanes=a,t}function Lf(t,i,a){return t=Dn(6,t,null,i),t.lanes=a,t}function Fg(t){var i=Dn(18,null,null,0);return i.stateNode=t,i}function Uf(t,i,a){return i=Dn(4,t.children!==null?t.children:[],t.key,i),i.lanes=a,i.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},i}var Gg=new WeakMap;function $n(t,i){if(typeof t=="object"&&t!==null){var a=Gg.get(t);return a!==void 0?a:(i={value:t,source:i,stack:Uo(i)},Gg.set(t,i),i)}return{value:t,source:i,stack:Uo(i)}}var ka=[],Pa=0,uc=null,ll=0,Xn=[],Wn=0,Ur=null,Ui=1,ji="";function ir(t,i){ka[Pa++]=ll,ka[Pa++]=uc,uc=t,ll=i}function Qg(t,i,a){Xn[Wn++]=Ui,Xn[Wn++]=ji,Xn[Wn++]=Ur,Ur=t;var l=Ui;t=ji;var h=32-Et(l)-1;l&=~(1<<h),a+=1;var d=32-Et(i)+h;if(30<d){var v=h-h%5;d=(l&(1<<v)-1).toString(32),l>>=v,h-=v,Ui=1<<32-Et(i)+h|a<<h|l,ji=d+t}else Ui=1<<d|a<<h|l,ji=t}function jf(t){t.return!==null&&(ir(t,1),Qg(t,1,0))}function zf(t){for(;t===uc;)uc=ka[--Pa],ka[Pa]=null,ll=ka[--Pa],ka[Pa]=null;for(;t===Ur;)Ur=Xn[--Wn],Xn[Wn]=null,ji=Xn[--Wn],Xn[Wn]=null,Ui=Xn[--Wn],Xn[Wn]=null}function Yg(t,i){Xn[Wn++]=Ui,Xn[Wn++]=ji,Xn[Wn++]=Ur,Ui=i.id,ji=i.overflow,Ur=t}var Wt=null,lt=null,qe=!1,jr=null,Jn=!1,Bf=Error(s(519));function zr(t){var i=Error(s(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw ul($n(i,t)),Bf}function Kg(t){var i=t.stateNode,a=t.type,l=t.memoizedProps;switch(i[Ct]=t,i[Ft]=l,a){case"dialog":ke("cancel",i),ke("close",i);break;case"iframe":case"object":case"embed":ke("load",i);break;case"video":case"audio":for(a=0;a<Nl.length;a++)ke(Nl[a],i);break;case"source":ke("error",i);break;case"img":case"image":case"link":ke("error",i),ke("load",i);break;case"details":ke("toggle",i);break;case"input":ke("invalid",i),qu(i,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0);break;case"select":ke("invalid",i);break;case"textarea":ke("invalid",i),Nr(i,l.value,l.defaultValue,l.children)}a=l.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||i.textContent===""+a||l.suppressHydrationWarning===!0||h_(i.textContent,a)?(l.popover!=null&&(ke("beforetoggle",i),ke("toggle",i)),l.onScroll!=null&&ke("scroll",i),l.onScrollEnd!=null&&ke("scrollend",i),l.onClick!=null&&(i.onclick=oi),i=!0):i=!1,i||zr(t,!0)}function $g(t){for(Wt=t.return;Wt;)switch(Wt.tag){case 5:case 31:case 13:Jn=!1;return;case 27:case 3:Jn=!0;return;default:Wt=Wt.return}}function La(t){if(t!==Wt)return!1;if(!qe)return $g(t),qe=!0,!1;var i=t.tag,a;if((a=i!==3&&i!==27)&&((a=i===5)&&(a=t.type,a=!(a!=="form"&&a!=="button")||sm(t.type,t.memoizedProps)),a=!a),a&&lt&&zr(t),$g(t),i===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(s(317));lt=E_(t)}else if(i===31){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(s(317));lt=E_(t)}else i===27?(i=lt,es(t.type)?(t=cm,cm=null,lt=t):lt=i):lt=Wt?ei(t.stateNode.nextSibling):null;return!0}function Qs(){lt=Wt=null,qe=!1}function qf(){var t=jr;return t!==null&&(An===null?An=t:An.push.apply(An,t),jr=null),t}function ul(t){jr===null?jr=[t]:jr.push(t)}var Hf=k(null),Ys=null,rr=null;function Br(t,i,a){ue(Hf,i._currentValue),i._currentValue=a}function sr(t){t._currentValue=Hf.current,ne(Hf)}function Ff(t,i,a){for(;t!==null;){var l=t.alternate;if((t.childLanes&i)!==i?(t.childLanes|=i,l!==null&&(l.childLanes|=i)):l!==null&&(l.childLanes&i)!==i&&(l.childLanes|=i),t===a)break;t=t.return}}function Gf(t,i,a,l){var h=t.child;for(h!==null&&(h.return=t);h!==null;){var d=h.dependencies;if(d!==null){var v=h.child;d=d.firstContext;e:for(;d!==null;){var b=d;d=h;for(var O=0;O<i.length;O++)if(b.context===i[O]){d.lanes|=a,b=d.alternate,b!==null&&(b.lanes|=a),Ff(d.return,a,t),l||(v=null);break e}d=b.next}}else if(h.tag===18){if(v=h.return,v===null)throw Error(s(341));v.lanes|=a,d=v.alternate,d!==null&&(d.lanes|=a),Ff(v,a,t),v=null}else v=h.child;if(v!==null)v.return=h;else for(v=h;v!==null;){if(v===t){v=null;break}if(h=v.sibling,h!==null){h.return=v.return,v=h;break}v=v.return}h=v}}function Ua(t,i,a,l){t=null;for(var h=i,d=!1;h!==null;){if(!d){if((h.flags&524288)!==0)d=!0;else if((h.flags&262144)!==0)break}if(h.tag===10){var v=h.alternate;if(v===null)throw Error(s(387));if(v=v.memoizedProps,v!==null){var b=h.type;In(h.pendingProps.value,v.value)||(t!==null?t.push(b):t=[b])}}else if(h===Se.current){if(v=h.alternate,v===null)throw Error(s(387));v.memoizedState.memoizedState!==h.memoizedState.memoizedState&&(t!==null?t.push(Pl):t=[Pl])}h=h.return}t!==null&&Gf(i,t,a,l),i.flags|=262144}function cc(t){for(t=t.firstContext;t!==null;){if(!In(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function Ks(t){Ys=t,rr=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function Jt(t){return Xg(Ys,t)}function hc(t,i){return Ys===null&&Ks(t),Xg(t,i)}function Xg(t,i){var a=i._currentValue;if(i={context:i,memoizedValue:a,next:null},rr===null){if(t===null)throw Error(s(308));rr=i,t.dependencies={lanes:0,firstContext:i},t.flags|=524288}else rr=rr.next=i;return a}var qS=typeof AbortController<"u"?AbortController:function(){var t=[],i=this.signal={aborted:!1,addEventListener:function(a,l){t.push(l)}};this.abort=function(){i.aborted=!0,t.forEach(function(a){return a()})}},HS=r.unstable_scheduleCallback,FS=r.unstable_NormalPriority,Dt={$$typeof:Z,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Qf(){return{controller:new qS,data:new Map,refCount:0}}function cl(t){t.refCount--,t.refCount===0&&HS(FS,function(){t.controller.abort()})}var hl=null,Yf=0,ja=0,za=null;function GS(t,i){if(hl===null){var a=hl=[];Yf=0,ja=Xd(),za={status:"pending",value:void 0,then:function(l){a.push(l)}}}return Yf++,i.then(Wg,Wg),i}function Wg(){if(--Yf===0&&hl!==null){za!==null&&(za.status="fulfilled");var t=hl;hl=null,ja=0,za=null;for(var i=0;i<t.length;i++)(0,t[i])()}}function QS(t,i){var a=[],l={status:"pending",value:null,reason:null,then:function(h){a.push(h)}};return t.then(function(){l.status="fulfilled",l.value=i;for(var h=0;h<a.length;h++)(0,a[h])(i)},function(h){for(l.status="rejected",l.reason=h,h=0;h<a.length;h++)(0,a[h])(void 0)}),l}var Jg=$.S;$.S=function(t,i){kv=fn(),typeof i=="object"&&i!==null&&typeof i.then=="function"&&GS(t,i),Jg!==null&&Jg(t,i)};var $s=k(null);function Kf(){var t=$s.current;return t!==null?t:ot.pooledCache}function fc(t,i){i===null?ue($s,$s.current):ue($s,i.pool)}function Zg(){var t=Kf();return t===null?null:{parent:Dt._currentValue,pool:t}}var Ba=Error(s(460)),$f=Error(s(474)),dc=Error(s(542)),mc={then:function(){}};function ey(t){return t=t.status,t==="fulfilled"||t==="rejected"}function ty(t,i,a){switch(a=t[a],a===void 0?t.push(i):a!==i&&(i.then(oi,oi),i=a),i.status){case"fulfilled":return i.value;case"rejected":throw t=i.reason,iy(t),t;default:if(typeof i.status=="string")i.then(oi,oi);else{if(t=ot,t!==null&&100<t.shellSuspendCounter)throw Error(s(482));t=i,t.status="pending",t.then(function(l){if(i.status==="pending"){var h=i;h.status="fulfilled",h.value=l}},function(l){if(i.status==="pending"){var h=i;h.status="rejected",h.reason=l}})}switch(i.status){case"fulfilled":return i.value;case"rejected":throw t=i.reason,iy(t),t}throw Ws=i,Ba}}function Xs(t){try{var i=t._init;return i(t._payload)}catch(a){throw a!==null&&typeof a=="object"&&typeof a.then=="function"?(Ws=a,Ba):a}}var Ws=null;function ny(){if(Ws===null)throw Error(s(459));var t=Ws;return Ws=null,t}function iy(t){if(t===Ba||t===dc)throw Error(s(483))}var qa=null,fl=0;function pc(t){var i=fl;return fl+=1,qa===null&&(qa=[]),ty(qa,t,i)}function dl(t,i){i=i.props.ref,t.ref=i!==void 0?i:null}function gc(t,i){throw i.$$typeof===R?Error(s(525)):(t=Object.prototype.toString.call(i),Error(s(31,t==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":t)))}function ry(t){function i(U,P){if(t){var B=U.deletions;B===null?(U.deletions=[P],U.flags|=16):B.push(P)}}function a(U,P){if(!t)return null;for(;P!==null;)i(U,P),P=P.sibling;return null}function l(U){for(var P=new Map;U!==null;)U.key!==null?P.set(U.key,U):P.set(U.index,U),U=U.sibling;return P}function h(U,P){return U=nr(U,P),U.index=0,U.sibling=null,U}function d(U,P,B){return U.index=B,t?(B=U.alternate,B!==null?(B=B.index,B<P?(U.flags|=67108866,P):B):(U.flags|=67108866,P)):(U.flags|=1048576,P)}function v(U){return t&&U.alternate===null&&(U.flags|=67108866),U}function b(U,P,B,te){return P===null||P.tag!==6?(P=Lf(B,U.mode,te),P.return=U,P):(P=h(P,B),P.return=U,P)}function O(U,P,B,te){var be=B.type;return be===G?J(U,P,B.props.children,te,B.key):P!==null&&(P.elementType===be||typeof be=="object"&&be!==null&&be.$$typeof===x&&Xs(be)===P.type)?(P=h(P,B.props),dl(P,B),P.return=U,P):(P=lc(B.type,B.key,B.props,null,U.mode,te),dl(P,B),P.return=U,P)}function q(U,P,B,te){return P===null||P.tag!==4||P.stateNode.containerInfo!==B.containerInfo||P.stateNode.implementation!==B.implementation?(P=Uf(B,U.mode,te),P.return=U,P):(P=h(P,B.children||[]),P.return=U,P)}function J(U,P,B,te,be){return P===null||P.tag!==7?(P=Gs(B,U.mode,te,be),P.return=U,P):(P=h(P,B),P.return=U,P)}function ie(U,P,B){if(typeof P=="string"&&P!==""||typeof P=="number"||typeof P=="bigint")return P=Lf(""+P,U.mode,B),P.return=U,P;if(typeof P=="object"&&P!==null){switch(P.$$typeof){case L:return B=lc(P.type,P.key,P.props,null,U.mode,B),dl(B,P),B.return=U,B;case H:return P=Uf(P,U.mode,B),P.return=U,P;case x:return P=Xs(P),ie(U,P,B)}if(at(P)||M(P))return P=Gs(P,U.mode,B,null),P.return=U,P;if(typeof P.then=="function")return ie(U,pc(P),B);if(P.$$typeof===Z)return ie(U,hc(U,P),B);gc(U,P)}return null}function F(U,P,B,te){var be=P!==null?P.key:null;if(typeof B=="string"&&B!==""||typeof B=="number"||typeof B=="bigint")return be!==null?null:b(U,P,""+B,te);if(typeof B=="object"&&B!==null){switch(B.$$typeof){case L:return B.key===be?O(U,P,B,te):null;case H:return B.key===be?q(U,P,B,te):null;case x:return B=Xs(B),F(U,P,B,te)}if(at(B)||M(B))return be!==null?null:J(U,P,B,te,null);if(typeof B.then=="function")return F(U,P,pc(B),te);if(B.$$typeof===Z)return F(U,P,hc(U,B),te);gc(U,B)}return null}function Y(U,P,B,te,be){if(typeof te=="string"&&te!==""||typeof te=="number"||typeof te=="bigint")return U=U.get(B)||null,b(P,U,""+te,be);if(typeof te=="object"&&te!==null){switch(te.$$typeof){case L:return U=U.get(te.key===null?B:te.key)||null,O(P,U,te,be);case H:return U=U.get(te.key===null?B:te.key)||null,q(P,U,te,be);case x:return te=Xs(te),Y(U,P,B,te,be)}if(at(te)||M(te))return U=U.get(B)||null,J(P,U,te,be,null);if(typeof te.then=="function")return Y(U,P,B,pc(te),be);if(te.$$typeof===Z)return Y(U,P,B,hc(P,te),be);gc(P,te)}return null}function ge(U,P,B,te){for(var be=null,Ye=null,ye=P,Me=P=0,Ue=null;ye!==null&&Me<B.length;Me++){ye.index>Me?(Ue=ye,ye=null):Ue=ye.sibling;var Ke=F(U,ye,B[Me],te);if(Ke===null){ye===null&&(ye=Ue);break}t&&ye&&Ke.alternate===null&&i(U,ye),P=d(Ke,P,Me),Ye===null?be=Ke:Ye.sibling=Ke,Ye=Ke,ye=Ue}if(Me===B.length)return a(U,ye),qe&&ir(U,Me),be;if(ye===null){for(;Me<B.length;Me++)ye=ie(U,B[Me],te),ye!==null&&(P=d(ye,P,Me),Ye===null?be=ye:Ye.sibling=ye,Ye=ye);return qe&&ir(U,Me),be}for(ye=l(ye);Me<B.length;Me++)Ue=Y(ye,U,Me,B[Me],te),Ue!==null&&(t&&Ue.alternate!==null&&ye.delete(Ue.key===null?Me:Ue.key),P=d(Ue,P,Me),Ye===null?be=Ue:Ye.sibling=Ue,Ye=Ue);return t&&ye.forEach(function(ss){return i(U,ss)}),qe&&ir(U,Me),be}function we(U,P,B,te){if(B==null)throw Error(s(151));for(var be=null,Ye=null,ye=P,Me=P=0,Ue=null,Ke=B.next();ye!==null&&!Ke.done;Me++,Ke=B.next()){ye.index>Me?(Ue=ye,ye=null):Ue=ye.sibling;var ss=F(U,ye,Ke.value,te);if(ss===null){ye===null&&(ye=Ue);break}t&&ye&&ss.alternate===null&&i(U,ye),P=d(ss,P,Me),Ye===null?be=ss:Ye.sibling=ss,Ye=ss,ye=Ue}if(Ke.done)return a(U,ye),qe&&ir(U,Me),be;if(ye===null){for(;!Ke.done;Me++,Ke=B.next())Ke=ie(U,Ke.value,te),Ke!==null&&(P=d(Ke,P,Me),Ye===null?be=Ke:Ye.sibling=Ke,Ye=Ke);return qe&&ir(U,Me),be}for(ye=l(ye);!Ke.done;Me++,Ke=B.next())Ke=Y(ye,U,Me,Ke.value,te),Ke!==null&&(t&&Ke.alternate!==null&&ye.delete(Ke.key===null?Me:Ke.key),P=d(Ke,P,Me),Ye===null?be=Ke:Ye.sibling=Ke,Ye=Ke);return t&&ye.forEach(function(iA){return i(U,iA)}),qe&&ir(U,Me),be}function rt(U,P,B,te){if(typeof B=="object"&&B!==null&&B.type===G&&B.key===null&&(B=B.props.children),typeof B=="object"&&B!==null){switch(B.$$typeof){case L:e:{for(var be=B.key;P!==null;){if(P.key===be){if(be=B.type,be===G){if(P.tag===7){a(U,P.sibling),te=h(P,B.props.children),te.return=U,U=te;break e}}else if(P.elementType===be||typeof be=="object"&&be!==null&&be.$$typeof===x&&Xs(be)===P.type){a(U,P.sibling),te=h(P,B.props),dl(te,B),te.return=U,U=te;break e}a(U,P);break}else i(U,P);P=P.sibling}B.type===G?(te=Gs(B.props.children,U.mode,te,B.key),te.return=U,U=te):(te=lc(B.type,B.key,B.props,null,U.mode,te),dl(te,B),te.return=U,U=te)}return v(U);case H:e:{for(be=B.key;P!==null;){if(P.key===be)if(P.tag===4&&P.stateNode.containerInfo===B.containerInfo&&P.stateNode.implementation===B.implementation){a(U,P.sibling),te=h(P,B.children||[]),te.return=U,U=te;break e}else{a(U,P);break}else i(U,P);P=P.sibling}te=Uf(B,U.mode,te),te.return=U,U=te}return v(U);case x:return B=Xs(B),rt(U,P,B,te)}if(at(B))return ge(U,P,B,te);if(M(B)){if(be=M(B),typeof be!="function")throw Error(s(150));return B=be.call(B),we(U,P,B,te)}if(typeof B.then=="function")return rt(U,P,pc(B),te);if(B.$$typeof===Z)return rt(U,P,hc(U,B),te);gc(U,B)}return typeof B=="string"&&B!==""||typeof B=="number"||typeof B=="bigint"?(B=""+B,P!==null&&P.tag===6?(a(U,P.sibling),te=h(P,B),te.return=U,U=te):(a(U,P),te=Lf(B,U.mode,te),te.return=U,U=te),v(U)):a(U,P)}return function(U,P,B,te){try{fl=0;var be=rt(U,P,B,te);return qa=null,be}catch(ye){if(ye===Ba||ye===dc)throw ye;var Ye=Dn(29,ye,null,U.mode);return Ye.lanes=te,Ye.return=U,Ye}}}var Js=ry(!0),sy=ry(!1),qr=!1;function Xf(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Wf(t,i){t=t.updateQueue,i.updateQueue===t&&(i.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function Hr(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function Fr(t,i,a){var l=t.updateQueue;if(l===null)return null;if(l=l.shared,(Xe&2)!==0){var h=l.pending;return h===null?i.next=i:(i.next=h.next,h.next=i),l.pending=i,i=oc(t),qg(t,null,a),i}return ac(t,l,i,a),oc(t)}function ml(t,i,a){if(i=i.updateQueue,i!==null&&(i=i.shared,(a&4194048)!==0)){var l=i.lanes;l&=t.pendingLanes,a|=l,i.lanes=a,Bo(t,a)}}function Jf(t,i){var a=t.updateQueue,l=t.alternate;if(l!==null&&(l=l.updateQueue,a===l)){var h=null,d=null;if(a=a.firstBaseUpdate,a!==null){do{var v={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};d===null?h=d=v:d=d.next=v,a=a.next}while(a!==null);d===null?h=d=i:d=d.next=i}else h=d=i;a={baseState:l.baseState,firstBaseUpdate:h,lastBaseUpdate:d,shared:l.shared,callbacks:l.callbacks},t.updateQueue=a;return}t=a.lastBaseUpdate,t===null?a.firstBaseUpdate=i:t.next=i,a.lastBaseUpdate=i}var Zf=!1;function pl(){if(Zf){var t=za;if(t!==null)throw t}}function gl(t,i,a,l){Zf=!1;var h=t.updateQueue;qr=!1;var d=h.firstBaseUpdate,v=h.lastBaseUpdate,b=h.shared.pending;if(b!==null){h.shared.pending=null;var O=b,q=O.next;O.next=null,v===null?d=q:v.next=q,v=O;var J=t.alternate;J!==null&&(J=J.updateQueue,b=J.lastBaseUpdate,b!==v&&(b===null?J.firstBaseUpdate=q:b.next=q,J.lastBaseUpdate=O))}if(d!==null){var ie=h.baseState;v=0,J=q=O=null,b=d;do{var F=b.lane&-536870913,Y=F!==b.lane;if(Y?(Le&F)===F:(l&F)===F){F!==0&&F===ja&&(Zf=!0),J!==null&&(J=J.next={lane:0,tag:b.tag,payload:b.payload,callback:null,next:null});e:{var ge=t,we=b;F=i;var rt=a;switch(we.tag){case 1:if(ge=we.payload,typeof ge=="function"){ie=ge.call(rt,ie,F);break e}ie=ge;break e;case 3:ge.flags=ge.flags&-65537|128;case 0:if(ge=we.payload,F=typeof ge=="function"?ge.call(rt,ie,F):ge,F==null)break e;ie=T({},ie,F);break e;case 2:qr=!0}}F=b.callback,F!==null&&(t.flags|=64,Y&&(t.flags|=8192),Y=h.callbacks,Y===null?h.callbacks=[F]:Y.push(F))}else Y={lane:F,tag:b.tag,payload:b.payload,callback:b.callback,next:null},J===null?(q=J=Y,O=ie):J=J.next=Y,v|=F;if(b=b.next,b===null){if(b=h.shared.pending,b===null)break;Y=b,b=Y.next,Y.next=null,h.lastBaseUpdate=Y,h.shared.pending=null}}while(!0);J===null&&(O=ie),h.baseState=O,h.firstBaseUpdate=q,h.lastBaseUpdate=J,d===null&&(h.shared.lanes=0),$r|=v,t.lanes=v,t.memoizedState=ie}}function ay(t,i){if(typeof t!="function")throw Error(s(191,t));t.call(i)}function oy(t,i){var a=t.callbacks;if(a!==null)for(t.callbacks=null,t=0;t<a.length;t++)ay(a[t],i)}var Ha=k(null),yc=k(0);function ly(t,i){t=mr,ue(yc,t),ue(Ha,i),mr=t|i.baseLanes}function ed(){ue(yc,mr),ue(Ha,Ha.current)}function td(){mr=yc.current,ne(Ha),ne(yc)}var Nn=k(null),Zn=null;function Gr(t){var i=t.alternate;ue(bt,bt.current&1),ue(Nn,t),Zn===null&&(i===null||Ha.current!==null||i.memoizedState!==null)&&(Zn=t)}function nd(t){ue(bt,bt.current),ue(Nn,t),Zn===null&&(Zn=t)}function uy(t){t.tag===22?(ue(bt,bt.current),ue(Nn,t),Zn===null&&(Zn=t)):Qr()}function Qr(){ue(bt,bt.current),ue(Nn,Nn.current)}function On(t){ne(Nn),Zn===t&&(Zn=null),ne(bt)}var bt=k(0);function vc(t){for(var i=t;i!==null;){if(i.tag===13){var a=i.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||lm(a)||um(a)))return i}else if(i.tag===19&&(i.memoizedProps.revealOrder==="forwards"||i.memoizedProps.revealOrder==="backwards"||i.memoizedProps.revealOrder==="unstable_legacy-backwards"||i.memoizedProps.revealOrder==="together")){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===t)break;for(;i.sibling===null;){if(i.return===null||i.return===t)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var ar=0,Oe=null,nt=null,Nt=null,_c=!1,Fa=!1,Zs=!1,Ec=0,yl=0,Ga=null,YS=0;function gt(){throw Error(s(321))}function id(t,i){if(i===null)return!1;for(var a=0;a<i.length&&a<t.length;a++)if(!In(t[a],i[a]))return!1;return!0}function rd(t,i,a,l,h,d){return ar=d,Oe=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,$.H=t===null||t.memoizedState===null?Qy:_d,Zs=!1,d=a(l,h),Zs=!1,Fa&&(d=hy(i,a,l,h)),cy(t),d}function cy(t){$.H=El;var i=nt!==null&&nt.next!==null;if(ar=0,Nt=nt=Oe=null,_c=!1,yl=0,Ga=null,i)throw Error(s(300));t===null||Ot||(t=t.dependencies,t!==null&&cc(t)&&(Ot=!0))}function hy(t,i,a,l){Oe=t;var h=0;do{if(Fa&&(Ga=null),yl=0,Fa=!1,25<=h)throw Error(s(301));if(h+=1,Nt=nt=null,t.updateQueue!=null){var d=t.updateQueue;d.lastEffect=null,d.events=null,d.stores=null,d.memoCache!=null&&(d.memoCache.index=0)}$.H=Yy,d=i(a,l)}while(Fa);return d}function KS(){var t=$.H,i=t.useState()[0];return i=typeof i.then=="function"?vl(i):i,t=t.useState()[0],(nt!==null?nt.memoizedState:null)!==t&&(Oe.flags|=1024),i}function sd(){var t=Ec!==0;return Ec=0,t}function ad(t,i,a){i.updateQueue=t.updateQueue,i.flags&=-2053,t.lanes&=~a}function od(t){if(_c){for(t=t.memoizedState;t!==null;){var i=t.queue;i!==null&&(i.pending=null),t=t.next}_c=!1}ar=0,Nt=nt=Oe=null,Fa=!1,yl=Ec=0,Ga=null}function mn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Nt===null?Oe.memoizedState=Nt=t:Nt=Nt.next=t,Nt}function St(){if(nt===null){var t=Oe.alternate;t=t!==null?t.memoizedState:null}else t=nt.next;var i=Nt===null?Oe.memoizedState:Nt.next;if(i!==null)Nt=i,nt=t;else{if(t===null)throw Oe.alternate===null?Error(s(467)):Error(s(310));nt=t,t={memoizedState:nt.memoizedState,baseState:nt.baseState,baseQueue:nt.baseQueue,queue:nt.queue,next:null},Nt===null?Oe.memoizedState=Nt=t:Nt=Nt.next=t}return Nt}function Tc(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function vl(t){var i=yl;return yl+=1,Ga===null&&(Ga=[]),t=ty(Ga,t,i),i=Oe,(Nt===null?i.memoizedState:Nt.next)===null&&(i=i.alternate,$.H=i===null||i.memoizedState===null?Qy:_d),t}function bc(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return vl(t);if(t.$$typeof===Z)return Jt(t)}throw Error(s(438,String(t)))}function ld(t){var i=null,a=Oe.updateQueue;if(a!==null&&(i=a.memoCache),i==null){var l=Oe.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(i={data:l.data.map(function(h){return h.slice()}),index:0})))}if(i==null&&(i={data:[],index:0}),a===null&&(a=Tc(),Oe.updateQueue=a),a.memoCache=i,a=i.data[i.index],a===void 0)for(a=i.data[i.index]=Array(t),l=0;l<t;l++)a[l]=N;return i.index++,a}function or(t,i){return typeof i=="function"?i(t):i}function Sc(t){var i=St();return ud(i,nt,t)}function ud(t,i,a){var l=t.queue;if(l===null)throw Error(s(311));l.lastRenderedReducer=a;var h=t.baseQueue,d=l.pending;if(d!==null){if(h!==null){var v=h.next;h.next=d.next,d.next=v}i.baseQueue=h=d,l.pending=null}if(d=t.baseState,h===null)t.memoizedState=d;else{i=h.next;var b=v=null,O=null,q=i,J=!1;do{var ie=q.lane&-536870913;if(ie!==q.lane?(Le&ie)===ie:(ar&ie)===ie){var F=q.revertLane;if(F===0)O!==null&&(O=O.next={lane:0,revertLane:0,gesture:null,action:q.action,hasEagerState:q.hasEagerState,eagerState:q.eagerState,next:null}),ie===ja&&(J=!0);else if((ar&F)===F){q=q.next,F===ja&&(J=!0);continue}else ie={lane:0,revertLane:q.revertLane,gesture:null,action:q.action,hasEagerState:q.hasEagerState,eagerState:q.eagerState,next:null},O===null?(b=O=ie,v=d):O=O.next=ie,Oe.lanes|=F,$r|=F;ie=q.action,Zs&&a(d,ie),d=q.hasEagerState?q.eagerState:a(d,ie)}else F={lane:ie,revertLane:q.revertLane,gesture:q.gesture,action:q.action,hasEagerState:q.hasEagerState,eagerState:q.eagerState,next:null},O===null?(b=O=F,v=d):O=O.next=F,Oe.lanes|=ie,$r|=ie;q=q.next}while(q!==null&&q!==i);if(O===null?v=d:O.next=b,!In(d,t.memoizedState)&&(Ot=!0,J&&(a=za,a!==null)))throw a;t.memoizedState=d,t.baseState=v,t.baseQueue=O,l.lastRenderedState=d}return h===null&&(l.lanes=0),[t.memoizedState,l.dispatch]}function cd(t){var i=St(),a=i.queue;if(a===null)throw Error(s(311));a.lastRenderedReducer=t;var l=a.dispatch,h=a.pending,d=i.memoizedState;if(h!==null){a.pending=null;var v=h=h.next;do d=t(d,v.action),v=v.next;while(v!==h);In(d,i.memoizedState)||(Ot=!0),i.memoizedState=d,i.baseQueue===null&&(i.baseState=d),a.lastRenderedState=d}return[d,l]}function fy(t,i,a){var l=Oe,h=St(),d=qe;if(d){if(a===void 0)throw Error(s(407));a=a()}else a=i();var v=!In((nt||h).memoizedState,a);if(v&&(h.memoizedState=a,Ot=!0),h=h.queue,dd(py.bind(null,l,h,t),[t]),h.getSnapshot!==i||v||Nt!==null&&Nt.memoizedState.tag&1){if(l.flags|=2048,Qa(9,{destroy:void 0},my.bind(null,l,h,a,i),null),ot===null)throw Error(s(349));d||(ar&127)!==0||dy(l,i,a)}return a}function dy(t,i,a){t.flags|=16384,t={getSnapshot:i,value:a},i=Oe.updateQueue,i===null?(i=Tc(),Oe.updateQueue=i,i.stores=[t]):(a=i.stores,a===null?i.stores=[t]:a.push(t))}function my(t,i,a,l){i.value=a,i.getSnapshot=l,gy(i)&&yy(t)}function py(t,i,a){return a(function(){gy(i)&&yy(t)})}function gy(t){var i=t.getSnapshot;t=t.value;try{var a=i();return!In(t,a)}catch{return!0}}function yy(t){var i=Fs(t,2);i!==null&&wn(i,t,2)}function hd(t){var i=mn();if(typeof t=="function"){var a=t;if(t=a(),Zs){Hn(!0);try{a()}finally{Hn(!1)}}}return i.memoizedState=i.baseState=t,i.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:or,lastRenderedState:t},i}function vy(t,i,a,l){return t.baseState=a,ud(t,nt,typeof l=="function"?l:or)}function $S(t,i,a,l,h){if(Rc(t))throw Error(s(485));if(t=i.action,t!==null){var d={payload:h,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(v){d.listeners.push(v)}};$.T!==null?a(!0):d.isTransition=!1,l(d),a=i.pending,a===null?(d.next=i.pending=d,_y(i,d)):(d.next=a.next,i.pending=a.next=d)}}function _y(t,i){var a=i.action,l=i.payload,h=t.state;if(i.isTransition){var d=$.T,v={};$.T=v;try{var b=a(h,l),O=$.S;O!==null&&O(v,b),Ey(t,i,b)}catch(q){fd(t,i,q)}finally{d!==null&&v.types!==null&&(d.types=v.types),$.T=d}}else try{d=a(h,l),Ey(t,i,d)}catch(q){fd(t,i,q)}}function Ey(t,i,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(l){Ty(t,i,l)},function(l){return fd(t,i,l)}):Ty(t,i,a)}function Ty(t,i,a){i.status="fulfilled",i.value=a,by(i),t.state=a,i=t.pending,i!==null&&(a=i.next,a===i?t.pending=null:(a=a.next,i.next=a,_y(t,a)))}function fd(t,i,a){var l=t.pending;if(t.pending=null,l!==null){l=l.next;do i.status="rejected",i.reason=a,by(i),i=i.next;while(i!==l)}t.action=null}function by(t){t=t.listeners;for(var i=0;i<t.length;i++)(0,t[i])()}function Sy(t,i){return i}function Ay(t,i){if(qe){var a=ot.formState;if(a!==null){e:{var l=Oe;if(qe){if(lt){t:{for(var h=lt,d=Jn;h.nodeType!==8;){if(!d){h=null;break t}if(h=ei(h.nextSibling),h===null){h=null;break t}}d=h.data,h=d==="F!"||d==="F"?h:null}if(h){lt=ei(h.nextSibling),l=h.data==="F!";break e}}zr(l)}l=!1}l&&(i=a[0])}}return a=mn(),a.memoizedState=a.baseState=i,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Sy,lastRenderedState:i},a.queue=l,a=Hy.bind(null,Oe,l),l.dispatch=a,l=hd(!1),d=vd.bind(null,Oe,!1,l.queue),l=mn(),h={state:i,dispatch:null,action:t,pending:null},l.queue=h,a=$S.bind(null,Oe,h,d,a),h.dispatch=a,l.memoizedState=t,[i,a,!1]}function wy(t){var i=St();return Ry(i,nt,t)}function Ry(t,i,a){if(i=ud(t,i,Sy)[0],t=Sc(or)[0],typeof i=="object"&&i!==null&&typeof i.then=="function")try{var l=vl(i)}catch(v){throw v===Ba?dc:v}else l=i;i=St();var h=i.queue,d=h.dispatch;return a!==i.memoizedState&&(Oe.flags|=2048,Qa(9,{destroy:void 0},XS.bind(null,h,a),null)),[l,d,t]}function XS(t,i){t.action=i}function Cy(t){var i=St(),a=nt;if(a!==null)return Ry(i,a,t);St(),i=i.memoizedState,a=St();var l=a.queue.dispatch;return a.memoizedState=t,[i,l,!1]}function Qa(t,i,a,l){return t={tag:t,create:a,deps:l,inst:i,next:null},i=Oe.updateQueue,i===null&&(i=Tc(),Oe.updateQueue=i),a=i.lastEffect,a===null?i.lastEffect=t.next=t:(l=a.next,a.next=t,t.next=l,i.lastEffect=t),t}function xy(){return St().memoizedState}function Ac(t,i,a,l){var h=mn();Oe.flags|=t,h.memoizedState=Qa(1|i,{destroy:void 0},a,l===void 0?null:l)}function wc(t,i,a,l){var h=St();l=l===void 0?null:l;var d=h.memoizedState.inst;nt!==null&&l!==null&&id(l,nt.memoizedState.deps)?h.memoizedState=Qa(i,d,a,l):(Oe.flags|=t,h.memoizedState=Qa(1|i,d,a,l))}function Iy(t,i){Ac(8390656,8,t,i)}function dd(t,i){wc(2048,8,t,i)}function WS(t){Oe.flags|=4;var i=Oe.updateQueue;if(i===null)i=Tc(),Oe.updateQueue=i,i.events=[t];else{var a=i.events;a===null?i.events=[t]:a.push(t)}}function Dy(t){var i=St().memoizedState;return WS({ref:i,nextImpl:t}),function(){if((Xe&2)!==0)throw Error(s(440));return i.impl.apply(void 0,arguments)}}function Ny(t,i){return wc(4,2,t,i)}function Oy(t,i){return wc(4,4,t,i)}function My(t,i){if(typeof i=="function"){t=t();var a=i(t);return function(){typeof a=="function"?a():i(null)}}if(i!=null)return t=t(),i.current=t,function(){i.current=null}}function Vy(t,i,a){a=a!=null?a.concat([t]):null,wc(4,4,My.bind(null,i,t),a)}function md(){}function ky(t,i){var a=St();i=i===void 0?null:i;var l=a.memoizedState;return i!==null&&id(i,l[1])?l[0]:(a.memoizedState=[t,i],t)}function Py(t,i){var a=St();i=i===void 0?null:i;var l=a.memoizedState;if(i!==null&&id(i,l[1]))return l[0];if(l=t(),Zs){Hn(!0);try{t()}finally{Hn(!1)}}return a.memoizedState=[l,i],l}function pd(t,i,a){return a===void 0||(ar&1073741824)!==0&&(Le&261930)===0?t.memoizedState=i:(t.memoizedState=a,t=Lv(),Oe.lanes|=t,$r|=t,a)}function Ly(t,i,a,l){return In(a,i)?a:Ha.current!==null?(t=pd(t,a,l),In(t,i)||(Ot=!0),t):(ar&42)===0||(ar&1073741824)!==0&&(Le&261930)===0?(Ot=!0,t.memoizedState=a):(t=Lv(),Oe.lanes|=t,$r|=t,i)}function Uy(t,i,a,l,h){var d=X.p;X.p=d!==0&&8>d?d:8;var v=$.T,b={};$.T=b,vd(t,!1,i,a);try{var O=h(),q=$.S;if(q!==null&&q(b,O),O!==null&&typeof O=="object"&&typeof O.then=="function"){var J=QS(O,l);_l(t,i,J,kn(t))}else _l(t,i,l,kn(t))}catch(ie){_l(t,i,{then:function(){},status:"rejected",reason:ie},kn())}finally{X.p=d,v!==null&&b.types!==null&&(v.types=b.types),$.T=v}}function JS(){}function gd(t,i,a,l){if(t.tag!==5)throw Error(s(476));var h=jy(t).queue;Uy(t,h,i,ce,a===null?JS:function(){return zy(t),a(l)})}function jy(t){var i=t.memoizedState;if(i!==null)return i;i={memoizedState:ce,baseState:ce,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:or,lastRenderedState:ce},next:null};var a={};return i.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:or,lastRenderedState:a},next:null},t.memoizedState=i,t=t.alternate,t!==null&&(t.memoizedState=i),i}function zy(t){var i=jy(t);i.next===null&&(i=t.alternate.memoizedState),_l(t,i.next.queue,{},kn())}function yd(){return Jt(Pl)}function By(){return St().memoizedState}function qy(){return St().memoizedState}function ZS(t){for(var i=t.return;i!==null;){switch(i.tag){case 24:case 3:var a=kn();t=Hr(a);var l=Fr(i,t,a);l!==null&&(wn(l,i,a),ml(l,i,a)),i={cache:Qf()},t.payload=i;return}i=i.return}}function e1(t,i,a){var l=kn();a={lane:l,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},Rc(t)?Fy(i,a):(a=kf(t,i,a,l),a!==null&&(wn(a,t,l),Gy(a,i,l)))}function Hy(t,i,a){var l=kn();_l(t,i,a,l)}function _l(t,i,a,l){var h={lane:l,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null};if(Rc(t))Fy(i,h);else{var d=t.alternate;if(t.lanes===0&&(d===null||d.lanes===0)&&(d=i.lastRenderedReducer,d!==null))try{var v=i.lastRenderedState,b=d(v,a);if(h.hasEagerState=!0,h.eagerState=b,In(b,v))return ac(t,i,h,0),ot===null&&sc(),!1}catch{}if(a=kf(t,i,h,l),a!==null)return wn(a,t,l),Gy(a,i,l),!0}return!1}function vd(t,i,a,l){if(l={lane:2,revertLane:Xd(),gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},Rc(t)){if(i)throw Error(s(479))}else i=kf(t,a,l,2),i!==null&&wn(i,t,2)}function Rc(t){var i=t.alternate;return t===Oe||i!==null&&i===Oe}function Fy(t,i){Fa=_c=!0;var a=t.pending;a===null?i.next=i:(i.next=a.next,a.next=i),t.pending=i}function Gy(t,i,a){if((a&4194048)!==0){var l=i.lanes;l&=t.pendingLanes,a|=l,i.lanes=a,Bo(t,a)}}var El={readContext:Jt,use:bc,useCallback:gt,useContext:gt,useEffect:gt,useImperativeHandle:gt,useLayoutEffect:gt,useInsertionEffect:gt,useMemo:gt,useReducer:gt,useRef:gt,useState:gt,useDebugValue:gt,useDeferredValue:gt,useTransition:gt,useSyncExternalStore:gt,useId:gt,useHostTransitionStatus:gt,useFormState:gt,useActionState:gt,useOptimistic:gt,useMemoCache:gt,useCacheRefresh:gt};El.useEffectEvent=gt;var Qy={readContext:Jt,use:bc,useCallback:function(t,i){return mn().memoizedState=[t,i===void 0?null:i],t},useContext:Jt,useEffect:Iy,useImperativeHandle:function(t,i,a){a=a!=null?a.concat([t]):null,Ac(4194308,4,My.bind(null,i,t),a)},useLayoutEffect:function(t,i){return Ac(4194308,4,t,i)},useInsertionEffect:function(t,i){Ac(4,2,t,i)},useMemo:function(t,i){var a=mn();i=i===void 0?null:i;var l=t();if(Zs){Hn(!0);try{t()}finally{Hn(!1)}}return a.memoizedState=[l,i],l},useReducer:function(t,i,a){var l=mn();if(a!==void 0){var h=a(i);if(Zs){Hn(!0);try{a(i)}finally{Hn(!1)}}}else h=i;return l.memoizedState=l.baseState=h,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:h},l.queue=t,t=t.dispatch=e1.bind(null,Oe,t),[l.memoizedState,t]},useRef:function(t){var i=mn();return t={current:t},i.memoizedState=t},useState:function(t){t=hd(t);var i=t.queue,a=Hy.bind(null,Oe,i);return i.dispatch=a,[t.memoizedState,a]},useDebugValue:md,useDeferredValue:function(t,i){var a=mn();return pd(a,t,i)},useTransition:function(){var t=hd(!1);return t=Uy.bind(null,Oe,t.queue,!0,!1),mn().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,i,a){var l=Oe,h=mn();if(qe){if(a===void 0)throw Error(s(407));a=a()}else{if(a=i(),ot===null)throw Error(s(349));(Le&127)!==0||dy(l,i,a)}h.memoizedState=a;var d={value:a,getSnapshot:i};return h.queue=d,Iy(py.bind(null,l,d,t),[t]),l.flags|=2048,Qa(9,{destroy:void 0},my.bind(null,l,d,a,i),null),a},useId:function(){var t=mn(),i=ot.identifierPrefix;if(qe){var a=ji,l=Ui;a=(l&~(1<<32-Et(l)-1)).toString(32)+a,i="_"+i+"R_"+a,a=Ec++,0<a&&(i+="H"+a.toString(32)),i+="_"}else a=YS++,i="_"+i+"r_"+a.toString(32)+"_";return t.memoizedState=i},useHostTransitionStatus:yd,useFormState:Ay,useActionState:Ay,useOptimistic:function(t){var i=mn();i.memoizedState=i.baseState=t;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return i.queue=a,i=vd.bind(null,Oe,!0,a),a.dispatch=i,[t,i]},useMemoCache:ld,useCacheRefresh:function(){return mn().memoizedState=ZS.bind(null,Oe)},useEffectEvent:function(t){var i=mn(),a={impl:t};return i.memoizedState=a,function(){if((Xe&2)!==0)throw Error(s(440));return a.impl.apply(void 0,arguments)}}},_d={readContext:Jt,use:bc,useCallback:ky,useContext:Jt,useEffect:dd,useImperativeHandle:Vy,useInsertionEffect:Ny,useLayoutEffect:Oy,useMemo:Py,useReducer:Sc,useRef:xy,useState:function(){return Sc(or)},useDebugValue:md,useDeferredValue:function(t,i){var a=St();return Ly(a,nt.memoizedState,t,i)},useTransition:function(){var t=Sc(or)[0],i=St().memoizedState;return[typeof t=="boolean"?t:vl(t),i]},useSyncExternalStore:fy,useId:By,useHostTransitionStatus:yd,useFormState:wy,useActionState:wy,useOptimistic:function(t,i){var a=St();return vy(a,nt,t,i)},useMemoCache:ld,useCacheRefresh:qy};_d.useEffectEvent=Dy;var Yy={readContext:Jt,use:bc,useCallback:ky,useContext:Jt,useEffect:dd,useImperativeHandle:Vy,useInsertionEffect:Ny,useLayoutEffect:Oy,useMemo:Py,useReducer:cd,useRef:xy,useState:function(){return cd(or)},useDebugValue:md,useDeferredValue:function(t,i){var a=St();return nt===null?pd(a,t,i):Ly(a,nt.memoizedState,t,i)},useTransition:function(){var t=cd(or)[0],i=St().memoizedState;return[typeof t=="boolean"?t:vl(t),i]},useSyncExternalStore:fy,useId:By,useHostTransitionStatus:yd,useFormState:Cy,useActionState:Cy,useOptimistic:function(t,i){var a=St();return nt!==null?vy(a,nt,t,i):(a.baseState=t,[t,a.queue.dispatch])},useMemoCache:ld,useCacheRefresh:qy};Yy.useEffectEvent=Dy;function Ed(t,i,a,l){i=t.memoizedState,a=a(l,i),a=a==null?i:T({},i,a),t.memoizedState=a,t.lanes===0&&(t.updateQueue.baseState=a)}var Td={enqueueSetState:function(t,i,a){t=t._reactInternals;var l=kn(),h=Hr(l);h.payload=i,a!=null&&(h.callback=a),i=Fr(t,h,l),i!==null&&(wn(i,t,l),ml(i,t,l))},enqueueReplaceState:function(t,i,a){t=t._reactInternals;var l=kn(),h=Hr(l);h.tag=1,h.payload=i,a!=null&&(h.callback=a),i=Fr(t,h,l),i!==null&&(wn(i,t,l),ml(i,t,l))},enqueueForceUpdate:function(t,i){t=t._reactInternals;var a=kn(),l=Hr(a);l.tag=2,i!=null&&(l.callback=i),i=Fr(t,l,a),i!==null&&(wn(i,t,a),ml(i,t,a))}};function Ky(t,i,a,l,h,d,v){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(l,d,v):i.prototype&&i.prototype.isPureReactComponent?!al(a,l)||!al(h,d):!0}function $y(t,i,a,l){t=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(a,l),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(a,l),i.state!==t&&Td.enqueueReplaceState(i,i.state,null)}function ea(t,i){var a=i;if("ref"in i){a={};for(var l in i)l!=="ref"&&(a[l]=i[l])}if(t=t.defaultProps){a===i&&(a=T({},a));for(var h in t)a[h]===void 0&&(a[h]=t[h])}return a}function Xy(t){rc(t)}function Wy(t){console.error(t)}function Jy(t){rc(t)}function Cc(t,i){try{var a=t.onUncaughtError;a(i.value,{componentStack:i.stack})}catch(l){setTimeout(function(){throw l})}}function Zy(t,i,a){try{var l=t.onCaughtError;l(a.value,{componentStack:a.stack,errorBoundary:i.tag===1?i.stateNode:null})}catch(h){setTimeout(function(){throw h})}}function bd(t,i,a){return a=Hr(a),a.tag=3,a.payload={element:null},a.callback=function(){Cc(t,i)},a}function ev(t){return t=Hr(t),t.tag=3,t}function tv(t,i,a,l){var h=a.type.getDerivedStateFromError;if(typeof h=="function"){var d=l.value;t.payload=function(){return h(d)},t.callback=function(){Zy(i,a,l)}}var v=a.stateNode;v!==null&&typeof v.componentDidCatch=="function"&&(t.callback=function(){Zy(i,a,l),typeof h!="function"&&(Xr===null?Xr=new Set([this]):Xr.add(this));var b=l.stack;this.componentDidCatch(l.value,{componentStack:b!==null?b:""})})}function t1(t,i,a,l,h){if(a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(i=a.alternate,i!==null&&Ua(i,a,h,!0),a=Nn.current,a!==null){switch(a.tag){case 31:case 13:return Zn===null?jc():a.alternate===null&&yt===0&&(yt=3),a.flags&=-257,a.flags|=65536,a.lanes=h,l===mc?a.flags|=16384:(i=a.updateQueue,i===null?a.updateQueue=new Set([l]):i.add(l),Yd(t,l,h)),!1;case 22:return a.flags|=65536,l===mc?a.flags|=16384:(i=a.updateQueue,i===null?(i={transitions:null,markerInstances:null,retryQueue:new Set([l])},a.updateQueue=i):(a=i.retryQueue,a===null?i.retryQueue=new Set([l]):a.add(l)),Yd(t,l,h)),!1}throw Error(s(435,a.tag))}return Yd(t,l,h),jc(),!1}if(qe)return i=Nn.current,i!==null?((i.flags&65536)===0&&(i.flags|=256),i.flags|=65536,i.lanes=h,l!==Bf&&(t=Error(s(422),{cause:l}),ul($n(t,a)))):(l!==Bf&&(i=Error(s(423),{cause:l}),ul($n(i,a))),t=t.current.alternate,t.flags|=65536,h&=-h,t.lanes|=h,l=$n(l,a),h=bd(t.stateNode,l,h),Jf(t,h),yt!==4&&(yt=2)),!1;var d=Error(s(520),{cause:l});if(d=$n(d,a),xl===null?xl=[d]:xl.push(d),yt!==4&&(yt=2),i===null)return!0;l=$n(l,a),a=i;do{switch(a.tag){case 3:return a.flags|=65536,t=h&-h,a.lanes|=t,t=bd(a.stateNode,l,t),Jf(a,t),!1;case 1:if(i=a.type,d=a.stateNode,(a.flags&128)===0&&(typeof i.getDerivedStateFromError=="function"||d!==null&&typeof d.componentDidCatch=="function"&&(Xr===null||!Xr.has(d))))return a.flags|=65536,h&=-h,a.lanes|=h,h=ev(h),tv(h,t,a,l),Jf(a,h),!1}a=a.return}while(a!==null);return!1}var Sd=Error(s(461)),Ot=!1;function Zt(t,i,a,l){i.child=t===null?sy(i,null,a,l):Js(i,t.child,a,l)}function nv(t,i,a,l,h){a=a.render;var d=i.ref;if("ref"in l){var v={};for(var b in l)b!=="ref"&&(v[b]=l[b])}else v=l;return Ks(i),l=rd(t,i,a,v,d,h),b=sd(),t!==null&&!Ot?(ad(t,i,h),lr(t,i,h)):(qe&&b&&jf(i),i.flags|=1,Zt(t,i,l,h),i.child)}function iv(t,i,a,l,h){if(t===null){var d=a.type;return typeof d=="function"&&!Pf(d)&&d.defaultProps===void 0&&a.compare===null?(i.tag=15,i.type=d,rv(t,i,d,l,h)):(t=lc(a.type,null,l,i,i.mode,h),t.ref=i.ref,t.return=i,i.child=t)}if(d=t.child,!Nd(t,h)){var v=d.memoizedProps;if(a=a.compare,a=a!==null?a:al,a(v,l)&&t.ref===i.ref)return lr(t,i,h)}return i.flags|=1,t=nr(d,l),t.ref=i.ref,t.return=i,i.child=t}function rv(t,i,a,l,h){if(t!==null){var d=t.memoizedProps;if(al(d,l)&&t.ref===i.ref)if(Ot=!1,i.pendingProps=l=d,Nd(t,h))(t.flags&131072)!==0&&(Ot=!0);else return i.lanes=t.lanes,lr(t,i,h)}return Ad(t,i,a,l,h)}function sv(t,i,a,l){var h=l.children,d=t!==null?t.memoizedState:null;if(t===null&&i.stateNode===null&&(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),l.mode==="hidden"){if((i.flags&128)!==0){if(d=d!==null?d.baseLanes|a:a,t!==null){for(l=i.child=t.child,h=0;l!==null;)h=h|l.lanes|l.childLanes,l=l.sibling;l=h&~d}else l=0,i.child=null;return av(t,i,d,a,l)}if((a&536870912)!==0)i.memoizedState={baseLanes:0,cachePool:null},t!==null&&fc(i,d!==null?d.cachePool:null),d!==null?ly(i,d):ed(),uy(i);else return l=i.lanes=536870912,av(t,i,d!==null?d.baseLanes|a:a,a,l)}else d!==null?(fc(i,d.cachePool),ly(i,d),Qr(),i.memoizedState=null):(t!==null&&fc(i,null),ed(),Qr());return Zt(t,i,h,a),i.child}function Tl(t,i){return t!==null&&t.tag===22||i.stateNode!==null||(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),i.sibling}function av(t,i,a,l,h){var d=Kf();return d=d===null?null:{parent:Dt._currentValue,pool:d},i.memoizedState={baseLanes:a,cachePool:d},t!==null&&fc(i,null),ed(),uy(i),t!==null&&Ua(t,i,l,!0),i.childLanes=h,null}function xc(t,i){return i=Dc({mode:i.mode,children:i.children},t.mode),i.ref=t.ref,t.child=i,i.return=t,i}function ov(t,i,a){return Js(i,t.child,null,a),t=xc(i,i.pendingProps),t.flags|=2,On(i),i.memoizedState=null,t}function n1(t,i,a){var l=i.pendingProps,h=(i.flags&128)!==0;if(i.flags&=-129,t===null){if(qe){if(l.mode==="hidden")return t=xc(i,l),i.lanes=536870912,Tl(null,t);if(nd(i),(t=lt)?(t=__(t,Jn),t=t!==null&&t.data==="&"?t:null,t!==null&&(i.memoizedState={dehydrated:t,treeContext:Ur!==null?{id:Ui,overflow:ji}:null,retryLane:536870912,hydrationErrors:null},a=Fg(t),a.return=i,i.child=a,Wt=i,lt=null)):t=null,t===null)throw zr(i);return i.lanes=536870912,null}return xc(i,l)}var d=t.memoizedState;if(d!==null){var v=d.dehydrated;if(nd(i),h)if(i.flags&256)i.flags&=-257,i=ov(t,i,a);else if(i.memoizedState!==null)i.child=t.child,i.flags|=128,i=null;else throw Error(s(558));else if(Ot||Ua(t,i,a,!1),h=(a&t.childLanes)!==0,Ot||h){if(l=ot,l!==null&&(v=qo(l,a),v!==0&&v!==d.retryLane))throw d.retryLane=v,Fs(t,v),wn(l,t,v),Sd;jc(),i=ov(t,i,a)}else t=d.treeContext,lt=ei(v.nextSibling),Wt=i,qe=!0,jr=null,Jn=!1,t!==null&&Yg(i,t),i=xc(i,l),i.flags|=4096;return i}return t=nr(t.child,{mode:l.mode,children:l.children}),t.ref=i.ref,i.child=t,t.return=i,t}function Ic(t,i){var a=i.ref;if(a===null)t!==null&&t.ref!==null&&(i.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(s(284));(t===null||t.ref!==a)&&(i.flags|=4194816)}}function Ad(t,i,a,l,h){return Ks(i),a=rd(t,i,a,l,void 0,h),l=sd(),t!==null&&!Ot?(ad(t,i,h),lr(t,i,h)):(qe&&l&&jf(i),i.flags|=1,Zt(t,i,a,h),i.child)}function lv(t,i,a,l,h,d){return Ks(i),i.updateQueue=null,a=hy(i,l,a,h),cy(t),l=sd(),t!==null&&!Ot?(ad(t,i,d),lr(t,i,d)):(qe&&l&&jf(i),i.flags|=1,Zt(t,i,a,d),i.child)}function uv(t,i,a,l,h){if(Ks(i),i.stateNode===null){var d=Va,v=a.contextType;typeof v=="object"&&v!==null&&(d=Jt(v)),d=new a(l,d),i.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,d.updater=Td,i.stateNode=d,d._reactInternals=i,d=i.stateNode,d.props=l,d.state=i.memoizedState,d.refs={},Xf(i),v=a.contextType,d.context=typeof v=="object"&&v!==null?Jt(v):Va,d.state=i.memoizedState,v=a.getDerivedStateFromProps,typeof v=="function"&&(Ed(i,a,v,l),d.state=i.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof d.getSnapshotBeforeUpdate=="function"||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(v=d.state,typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount(),v!==d.state&&Td.enqueueReplaceState(d,d.state,null),gl(i,l,d,h),pl(),d.state=i.memoizedState),typeof d.componentDidMount=="function"&&(i.flags|=4194308),l=!0}else if(t===null){d=i.stateNode;var b=i.memoizedProps,O=ea(a,b);d.props=O;var q=d.context,J=a.contextType;v=Va,typeof J=="object"&&J!==null&&(v=Jt(J));var ie=a.getDerivedStateFromProps;J=typeof ie=="function"||typeof d.getSnapshotBeforeUpdate=="function",b=i.pendingProps!==b,J||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(b||q!==v)&&$y(i,d,l,v),qr=!1;var F=i.memoizedState;d.state=F,gl(i,l,d,h),pl(),q=i.memoizedState,b||F!==q||qr?(typeof ie=="function"&&(Ed(i,a,ie,l),q=i.memoizedState),(O=qr||Ky(i,a,O,l,F,q,v))?(J||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount()),typeof d.componentDidMount=="function"&&(i.flags|=4194308)):(typeof d.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=l,i.memoizedState=q),d.props=l,d.state=q,d.context=v,l=O):(typeof d.componentDidMount=="function"&&(i.flags|=4194308),l=!1)}else{d=i.stateNode,Wf(t,i),v=i.memoizedProps,J=ea(a,v),d.props=J,ie=i.pendingProps,F=d.context,q=a.contextType,O=Va,typeof q=="object"&&q!==null&&(O=Jt(q)),b=a.getDerivedStateFromProps,(q=typeof b=="function"||typeof d.getSnapshotBeforeUpdate=="function")||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(v!==ie||F!==O)&&$y(i,d,l,O),qr=!1,F=i.memoizedState,d.state=F,gl(i,l,d,h),pl();var Y=i.memoizedState;v!==ie||F!==Y||qr||t!==null&&t.dependencies!==null&&cc(t.dependencies)?(typeof b=="function"&&(Ed(i,a,b,l),Y=i.memoizedState),(J=qr||Ky(i,a,J,l,F,Y,O)||t!==null&&t.dependencies!==null&&cc(t.dependencies))?(q||typeof d.UNSAFE_componentWillUpdate!="function"&&typeof d.componentWillUpdate!="function"||(typeof d.componentWillUpdate=="function"&&d.componentWillUpdate(l,Y,O),typeof d.UNSAFE_componentWillUpdate=="function"&&d.UNSAFE_componentWillUpdate(l,Y,O)),typeof d.componentDidUpdate=="function"&&(i.flags|=4),typeof d.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof d.componentDidUpdate!="function"||v===t.memoizedProps&&F===t.memoizedState||(i.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||v===t.memoizedProps&&F===t.memoizedState||(i.flags|=1024),i.memoizedProps=l,i.memoizedState=Y),d.props=l,d.state=Y,d.context=O,l=J):(typeof d.componentDidUpdate!="function"||v===t.memoizedProps&&F===t.memoizedState||(i.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||v===t.memoizedProps&&F===t.memoizedState||(i.flags|=1024),l=!1)}return d=l,Ic(t,i),l=(i.flags&128)!==0,d||l?(d=i.stateNode,a=l&&typeof a.getDerivedStateFromError!="function"?null:d.render(),i.flags|=1,t!==null&&l?(i.child=Js(i,t.child,null,h),i.child=Js(i,null,a,h)):Zt(t,i,a,h),i.memoizedState=d.state,t=i.child):t=lr(t,i,h),t}function cv(t,i,a,l){return Qs(),i.flags|=256,Zt(t,i,a,l),i.child}var wd={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Rd(t){return{baseLanes:t,cachePool:Zg()}}function Cd(t,i,a){return t=t!==null?t.childLanes&~a:0,i&&(t|=Vn),t}function hv(t,i,a){var l=i.pendingProps,h=!1,d=(i.flags&128)!==0,v;if((v=d)||(v=t!==null&&t.memoizedState===null?!1:(bt.current&2)!==0),v&&(h=!0,i.flags&=-129),v=(i.flags&32)!==0,i.flags&=-33,t===null){if(qe){if(h?Gr(i):Qr(),(t=lt)?(t=__(t,Jn),t=t!==null&&t.data!=="&"?t:null,t!==null&&(i.memoizedState={dehydrated:t,treeContext:Ur!==null?{id:Ui,overflow:ji}:null,retryLane:536870912,hydrationErrors:null},a=Fg(t),a.return=i,i.child=a,Wt=i,lt=null)):t=null,t===null)throw zr(i);return um(t)?i.lanes=32:i.lanes=536870912,null}var b=l.children;return l=l.fallback,h?(Qr(),h=i.mode,b=Dc({mode:"hidden",children:b},h),l=Gs(l,h,a,null),b.return=i,l.return=i,b.sibling=l,i.child=b,l=i.child,l.memoizedState=Rd(a),l.childLanes=Cd(t,v,a),i.memoizedState=wd,Tl(null,l)):(Gr(i),xd(i,b))}var O=t.memoizedState;if(O!==null&&(b=O.dehydrated,b!==null)){if(d)i.flags&256?(Gr(i),i.flags&=-257,i=Id(t,i,a)):i.memoizedState!==null?(Qr(),i.child=t.child,i.flags|=128,i=null):(Qr(),b=l.fallback,h=i.mode,l=Dc({mode:"visible",children:l.children},h),b=Gs(b,h,a,null),b.flags|=2,l.return=i,b.return=i,l.sibling=b,i.child=l,Js(i,t.child,null,a),l=i.child,l.memoizedState=Rd(a),l.childLanes=Cd(t,v,a),i.memoizedState=wd,i=Tl(null,l));else if(Gr(i),um(b)){if(v=b.nextSibling&&b.nextSibling.dataset,v)var q=v.dgst;v=q,l=Error(s(419)),l.stack="",l.digest=v,ul({value:l,source:null,stack:null}),i=Id(t,i,a)}else if(Ot||Ua(t,i,a,!1),v=(a&t.childLanes)!==0,Ot||v){if(v=ot,v!==null&&(l=qo(v,a),l!==0&&l!==O.retryLane))throw O.retryLane=l,Fs(t,l),wn(v,t,l),Sd;lm(b)||jc(),i=Id(t,i,a)}else lm(b)?(i.flags|=192,i.child=t.child,i=null):(t=O.treeContext,lt=ei(b.nextSibling),Wt=i,qe=!0,jr=null,Jn=!1,t!==null&&Yg(i,t),i=xd(i,l.children),i.flags|=4096);return i}return h?(Qr(),b=l.fallback,h=i.mode,O=t.child,q=O.sibling,l=nr(O,{mode:"hidden",children:l.children}),l.subtreeFlags=O.subtreeFlags&65011712,q!==null?b=nr(q,b):(b=Gs(b,h,a,null),b.flags|=2),b.return=i,l.return=i,l.sibling=b,i.child=l,Tl(null,l),l=i.child,b=t.child.memoizedState,b===null?b=Rd(a):(h=b.cachePool,h!==null?(O=Dt._currentValue,h=h.parent!==O?{parent:O,pool:O}:h):h=Zg(),b={baseLanes:b.baseLanes|a,cachePool:h}),l.memoizedState=b,l.childLanes=Cd(t,v,a),i.memoizedState=wd,Tl(t.child,l)):(Gr(i),a=t.child,t=a.sibling,a=nr(a,{mode:"visible",children:l.children}),a.return=i,a.sibling=null,t!==null&&(v=i.deletions,v===null?(i.deletions=[t],i.flags|=16):v.push(t)),i.child=a,i.memoizedState=null,a)}function xd(t,i){return i=Dc({mode:"visible",children:i},t.mode),i.return=t,t.child=i}function Dc(t,i){return t=Dn(22,t,null,i),t.lanes=0,t}function Id(t,i,a){return Js(i,t.child,null,a),t=xd(i,i.pendingProps.children),t.flags|=2,i.memoizedState=null,t}function fv(t,i,a){t.lanes|=i;var l=t.alternate;l!==null&&(l.lanes|=i),Ff(t.return,i,a)}function Dd(t,i,a,l,h,d){var v=t.memoizedState;v===null?t.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:l,tail:a,tailMode:h,treeForkCount:d}:(v.isBackwards=i,v.rendering=null,v.renderingStartTime=0,v.last=l,v.tail=a,v.tailMode=h,v.treeForkCount=d)}function dv(t,i,a){var l=i.pendingProps,h=l.revealOrder,d=l.tail;l=l.children;var v=bt.current,b=(v&2)!==0;if(b?(v=v&1|2,i.flags|=128):v&=1,ue(bt,v),Zt(t,i,l,a),l=qe?ll:0,!b&&t!==null&&(t.flags&128)!==0)e:for(t=i.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&fv(t,a,i);else if(t.tag===19)fv(t,a,i);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===i)break e;for(;t.sibling===null;){if(t.return===null||t.return===i)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}switch(h){case"forwards":for(a=i.child,h=null;a!==null;)t=a.alternate,t!==null&&vc(t)===null&&(h=a),a=a.sibling;a=h,a===null?(h=i.child,i.child=null):(h=a.sibling,a.sibling=null),Dd(i,!1,h,a,d,l);break;case"backwards":case"unstable_legacy-backwards":for(a=null,h=i.child,i.child=null;h!==null;){if(t=h.alternate,t!==null&&vc(t)===null){i.child=h;break}t=h.sibling,h.sibling=a,a=h,h=t}Dd(i,!0,a,null,d,l);break;case"together":Dd(i,!1,null,null,void 0,l);break;default:i.memoizedState=null}return i.child}function lr(t,i,a){if(t!==null&&(i.dependencies=t.dependencies),$r|=i.lanes,(a&i.childLanes)===0)if(t!==null){if(Ua(t,i,a,!1),(a&i.childLanes)===0)return null}else return null;if(t!==null&&i.child!==t.child)throw Error(s(153));if(i.child!==null){for(t=i.child,a=nr(t,t.pendingProps),i.child=a,a.return=i;t.sibling!==null;)t=t.sibling,a=a.sibling=nr(t,t.pendingProps),a.return=i;a.sibling=null}return i.child}function Nd(t,i){return(t.lanes&i)!==0?!0:(t=t.dependencies,!!(t!==null&&cc(t)))}function i1(t,i,a){switch(i.tag){case 3:et(i,i.stateNode.containerInfo),Br(i,Dt,t.memoizedState.cache),Qs();break;case 27:case 5:vn(i);break;case 4:et(i,i.stateNode.containerInfo);break;case 10:Br(i,i.type,i.memoizedProps.value);break;case 31:if(i.memoizedState!==null)return i.flags|=128,nd(i),null;break;case 13:var l=i.memoizedState;if(l!==null)return l.dehydrated!==null?(Gr(i),i.flags|=128,null):(a&i.child.childLanes)!==0?hv(t,i,a):(Gr(i),t=lr(t,i,a),t!==null?t.sibling:null);Gr(i);break;case 19:var h=(t.flags&128)!==0;if(l=(a&i.childLanes)!==0,l||(Ua(t,i,a,!1),l=(a&i.childLanes)!==0),h){if(l)return dv(t,i,a);i.flags|=128}if(h=i.memoizedState,h!==null&&(h.rendering=null,h.tail=null,h.lastEffect=null),ue(bt,bt.current),l)break;return null;case 22:return i.lanes=0,sv(t,i,a,i.pendingProps);case 24:Br(i,Dt,t.memoizedState.cache)}return lr(t,i,a)}function mv(t,i,a){if(t!==null)if(t.memoizedProps!==i.pendingProps)Ot=!0;else{if(!Nd(t,a)&&(i.flags&128)===0)return Ot=!1,i1(t,i,a);Ot=(t.flags&131072)!==0}else Ot=!1,qe&&(i.flags&1048576)!==0&&Qg(i,ll,i.index);switch(i.lanes=0,i.tag){case 16:e:{var l=i.pendingProps;if(t=Xs(i.elementType),i.type=t,typeof t=="function")Pf(t)?(l=ea(t,l),i.tag=1,i=uv(null,i,t,l,a)):(i.tag=0,i=Ad(null,i,t,l,a));else{if(t!=null){var h=t.$$typeof;if(h===se){i.tag=11,i=nv(null,i,t,l,a);break e}else if(h===D){i.tag=14,i=iv(null,i,t,l,a);break e}}throw i=Ee(t)||t,Error(s(306,i,""))}}return i;case 0:return Ad(t,i,i.type,i.pendingProps,a);case 1:return l=i.type,h=ea(l,i.pendingProps),uv(t,i,l,h,a);case 3:e:{if(et(i,i.stateNode.containerInfo),t===null)throw Error(s(387));l=i.pendingProps;var d=i.memoizedState;h=d.element,Wf(t,i),gl(i,l,null,a);var v=i.memoizedState;if(l=v.cache,Br(i,Dt,l),l!==d.cache&&Gf(i,[Dt],a,!0),pl(),l=v.element,d.isDehydrated)if(d={element:l,isDehydrated:!1,cache:v.cache},i.updateQueue.baseState=d,i.memoizedState=d,i.flags&256){i=cv(t,i,l,a);break e}else if(l!==h){h=$n(Error(s(424)),i),ul(h),i=cv(t,i,l,a);break e}else for(t=i.stateNode.containerInfo,t.nodeType===9?t=t.body:t=t.nodeName==="HTML"?t.ownerDocument.body:t,lt=ei(t.firstChild),Wt=i,qe=!0,jr=null,Jn=!0,a=sy(i,null,l,a),i.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling;else{if(Qs(),l===h){i=lr(t,i,a);break e}Zt(t,i,l,a)}i=i.child}return i;case 26:return Ic(t,i),t===null?(a=w_(i.type,null,i.pendingProps,null))?i.memoizedState=a:qe||(a=i.type,t=i.pendingProps,l=Qc(_e.current).createElement(a),l[Ct]=i,l[Ft]=t,en(l,a,t),xt(l),i.stateNode=l):i.memoizedState=w_(i.type,t.memoizedProps,i.pendingProps,t.memoizedState),null;case 27:return vn(i),t===null&&qe&&(l=i.stateNode=b_(i.type,i.pendingProps,_e.current),Wt=i,Jn=!0,h=lt,es(i.type)?(cm=h,lt=ei(l.firstChild)):lt=h),Zt(t,i,i.pendingProps.children,a),Ic(t,i),t===null&&(i.flags|=4194304),i.child;case 5:return t===null&&qe&&((h=l=lt)&&(l=M1(l,i.type,i.pendingProps,Jn),l!==null?(i.stateNode=l,Wt=i,lt=ei(l.firstChild),Jn=!1,h=!0):h=!1),h||zr(i)),vn(i),h=i.type,d=i.pendingProps,v=t!==null?t.memoizedProps:null,l=d.children,sm(h,d)?l=null:v!==null&&sm(h,v)&&(i.flags|=32),i.memoizedState!==null&&(h=rd(t,i,KS,null,null,a),Pl._currentValue=h),Ic(t,i),Zt(t,i,l,a),i.child;case 6:return t===null&&qe&&((t=a=lt)&&(a=V1(a,i.pendingProps,Jn),a!==null?(i.stateNode=a,Wt=i,lt=null,t=!0):t=!1),t||zr(i)),null;case 13:return hv(t,i,a);case 4:return et(i,i.stateNode.containerInfo),l=i.pendingProps,t===null?i.child=Js(i,null,l,a):Zt(t,i,l,a),i.child;case 11:return nv(t,i,i.type,i.pendingProps,a);case 7:return Zt(t,i,i.pendingProps,a),i.child;case 8:return Zt(t,i,i.pendingProps.children,a),i.child;case 12:return Zt(t,i,i.pendingProps.children,a),i.child;case 10:return l=i.pendingProps,Br(i,i.type,l.value),Zt(t,i,l.children,a),i.child;case 9:return h=i.type._context,l=i.pendingProps.children,Ks(i),h=Jt(h),l=l(h),i.flags|=1,Zt(t,i,l,a),i.child;case 14:return iv(t,i,i.type,i.pendingProps,a);case 15:return rv(t,i,i.type,i.pendingProps,a);case 19:return dv(t,i,a);case 31:return n1(t,i,a);case 22:return sv(t,i,a,i.pendingProps);case 24:return Ks(i),l=Jt(Dt),t===null?(h=Kf(),h===null&&(h=ot,d=Qf(),h.pooledCache=d,d.refCount++,d!==null&&(h.pooledCacheLanes|=a),h=d),i.memoizedState={parent:l,cache:h},Xf(i),Br(i,Dt,h)):((t.lanes&a)!==0&&(Wf(t,i),gl(i,null,null,a),pl()),h=t.memoizedState,d=i.memoizedState,h.parent!==l?(h={parent:l,cache:l},i.memoizedState=h,i.lanes===0&&(i.memoizedState=i.updateQueue.baseState=h),Br(i,Dt,l)):(l=d.cache,Br(i,Dt,l),l!==h.cache&&Gf(i,[Dt],a,!0))),Zt(t,i,i.pendingProps.children,a),i.child;case 29:throw i.pendingProps}throw Error(s(156,i.tag))}function ur(t){t.flags|=4}function Od(t,i,a,l,h){if((i=(t.mode&32)!==0)&&(i=!1),i){if(t.flags|=16777216,(h&335544128)===h)if(t.stateNode.complete)t.flags|=8192;else if(Bv())t.flags|=8192;else throw Ws=mc,$f}else t.flags&=-16777217}function pv(t,i){if(i.type!=="stylesheet"||(i.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!D_(i))if(Bv())t.flags|=8192;else throw Ws=mc,$f}function Nc(t,i){i!==null&&(t.flags|=4),t.flags&16384&&(i=t.tag!==22?Lu():536870912,t.lanes|=i,Xa|=i)}function bl(t,i){if(!qe)switch(t.tailMode){case"hidden":i=t.tail;for(var a=null;i!==null;)i.alternate!==null&&(a=i),i=i.sibling;a===null?t.tail=null:a.sibling=null;break;case"collapsed":a=t.tail;for(var l=null;a!==null;)a.alternate!==null&&(l=a),a=a.sibling;l===null?i||t.tail===null?t.tail=null:t.tail.sibling=null:l.sibling=null}}function ut(t){var i=t.alternate!==null&&t.alternate.child===t.child,a=0,l=0;if(i)for(var h=t.child;h!==null;)a|=h.lanes|h.childLanes,l|=h.subtreeFlags&65011712,l|=h.flags&65011712,h.return=t,h=h.sibling;else for(h=t.child;h!==null;)a|=h.lanes|h.childLanes,l|=h.subtreeFlags,l|=h.flags,h.return=t,h=h.sibling;return t.subtreeFlags|=l,t.childLanes=a,i}function r1(t,i,a){var l=i.pendingProps;switch(zf(i),i.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ut(i),null;case 1:return ut(i),null;case 3:return a=i.stateNode,l=null,t!==null&&(l=t.memoizedState.cache),i.memoizedState.cache!==l&&(i.flags|=2048),sr(Dt),Qe(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(t===null||t.child===null)&&(La(i)?ur(i):t===null||t.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,qf())),ut(i),null;case 26:var h=i.type,d=i.memoizedState;return t===null?(ur(i),d!==null?(ut(i),pv(i,d)):(ut(i),Od(i,h,null,l,a))):d?d!==t.memoizedState?(ur(i),ut(i),pv(i,d)):(ut(i),i.flags&=-16777217):(t=t.memoizedProps,t!==l&&ur(i),ut(i),Od(i,h,t,l,a)),null;case 27:if(an(i),a=_e.current,h=i.type,t!==null&&i.stateNode!=null)t.memoizedProps!==l&&ur(i);else{if(!l){if(i.stateNode===null)throw Error(s(166));return ut(i),null}t=fe.current,La(i)?Kg(i):(t=b_(h,l,a),i.stateNode=t,ur(i))}return ut(i),null;case 5:if(an(i),h=i.type,t!==null&&i.stateNode!=null)t.memoizedProps!==l&&ur(i);else{if(!l){if(i.stateNode===null)throw Error(s(166));return ut(i),null}if(d=fe.current,La(i))Kg(i);else{var v=Qc(_e.current);switch(d){case 1:d=v.createElementNS("http://www.w3.org/2000/svg",h);break;case 2:d=v.createElementNS("http://www.w3.org/1998/Math/MathML",h);break;default:switch(h){case"svg":d=v.createElementNS("http://www.w3.org/2000/svg",h);break;case"math":d=v.createElementNS("http://www.w3.org/1998/Math/MathML",h);break;case"script":d=v.createElement("div"),d.innerHTML="<script><\/script>",d=d.removeChild(d.firstChild);break;case"select":d=typeof l.is=="string"?v.createElement("select",{is:l.is}):v.createElement("select"),l.multiple?d.multiple=!0:l.size&&(d.size=l.size);break;default:d=typeof l.is=="string"?v.createElement(h,{is:l.is}):v.createElement(h)}}d[Ct]=i,d[Ft]=l;e:for(v=i.child;v!==null;){if(v.tag===5||v.tag===6)d.appendChild(v.stateNode);else if(v.tag!==4&&v.tag!==27&&v.child!==null){v.child.return=v,v=v.child;continue}if(v===i)break e;for(;v.sibling===null;){if(v.return===null||v.return===i)break e;v=v.return}v.sibling.return=v.return,v=v.sibling}i.stateNode=d;e:switch(en(d,h,l),h){case"button":case"input":case"select":case"textarea":l=!!l.autoFocus;break e;case"img":l=!0;break e;default:l=!1}l&&ur(i)}}return ut(i),Od(i,i.type,t===null?null:t.memoizedProps,i.pendingProps,a),null;case 6:if(t&&i.stateNode!=null)t.memoizedProps!==l&&ur(i);else{if(typeof l!="string"&&i.stateNode===null)throw Error(s(166));if(t=_e.current,La(i)){if(t=i.stateNode,a=i.memoizedProps,l=null,h=Wt,h!==null)switch(h.tag){case 27:case 5:l=h.memoizedProps}t[Ct]=i,t=!!(t.nodeValue===a||l!==null&&l.suppressHydrationWarning===!0||h_(t.nodeValue,a)),t||zr(i,!0)}else t=Qc(t).createTextNode(l),t[Ct]=i,i.stateNode=t}return ut(i),null;case 31:if(a=i.memoizedState,t===null||t.memoizedState!==null){if(l=La(i),a!==null){if(t===null){if(!l)throw Error(s(318));if(t=i.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(s(557));t[Ct]=i}else Qs(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;ut(i),t=!1}else a=qf(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=a),t=!0;if(!t)return i.flags&256?(On(i),i):(On(i),null);if((i.flags&128)!==0)throw Error(s(558))}return ut(i),null;case 13:if(l=i.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(h=La(i),l!==null&&l.dehydrated!==null){if(t===null){if(!h)throw Error(s(318));if(h=i.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(s(317));h[Ct]=i}else Qs(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;ut(i),h=!1}else h=qf(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=h),h=!0;if(!h)return i.flags&256?(On(i),i):(On(i),null)}return On(i),(i.flags&128)!==0?(i.lanes=a,i):(a=l!==null,t=t!==null&&t.memoizedState!==null,a&&(l=i.child,h=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(h=l.alternate.memoizedState.cachePool.pool),d=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(d=l.memoizedState.cachePool.pool),d!==h&&(l.flags|=2048)),a!==t&&a&&(i.child.flags|=8192),Nc(i,i.updateQueue),ut(i),null);case 4:return Qe(),t===null&&em(i.stateNode.containerInfo),ut(i),null;case 10:return sr(i.type),ut(i),null;case 19:if(ne(bt),l=i.memoizedState,l===null)return ut(i),null;if(h=(i.flags&128)!==0,d=l.rendering,d===null)if(h)bl(l,!1);else{if(yt!==0||t!==null&&(t.flags&128)!==0)for(t=i.child;t!==null;){if(d=vc(t),d!==null){for(i.flags|=128,bl(l,!1),t=d.updateQueue,i.updateQueue=t,Nc(i,t),i.subtreeFlags=0,t=a,a=i.child;a!==null;)Hg(a,t),a=a.sibling;return ue(bt,bt.current&1|2),qe&&ir(i,l.treeForkCount),i.child}t=t.sibling}l.tail!==null&&fn()>Pc&&(i.flags|=128,h=!0,bl(l,!1),i.lanes=4194304)}else{if(!h)if(t=vc(d),t!==null){if(i.flags|=128,h=!0,t=t.updateQueue,i.updateQueue=t,Nc(i,t),bl(l,!0),l.tail===null&&l.tailMode==="hidden"&&!d.alternate&&!qe)return ut(i),null}else 2*fn()-l.renderingStartTime>Pc&&a!==536870912&&(i.flags|=128,h=!0,bl(l,!1),i.lanes=4194304);l.isBackwards?(d.sibling=i.child,i.child=d):(t=l.last,t!==null?t.sibling=d:i.child=d,l.last=d)}return l.tail!==null?(t=l.tail,l.rendering=t,l.tail=t.sibling,l.renderingStartTime=fn(),t.sibling=null,a=bt.current,ue(bt,h?a&1|2:a&1),qe&&ir(i,l.treeForkCount),t):(ut(i),null);case 22:case 23:return On(i),td(),l=i.memoizedState!==null,t!==null?t.memoizedState!==null!==l&&(i.flags|=8192):l&&(i.flags|=8192),l?(a&536870912)!==0&&(i.flags&128)===0&&(ut(i),i.subtreeFlags&6&&(i.flags|=8192)):ut(i),a=i.updateQueue,a!==null&&Nc(i,a.retryQueue),a=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),l=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(l=i.memoizedState.cachePool.pool),l!==a&&(i.flags|=2048),t!==null&&ne($s),null;case 24:return a=null,t!==null&&(a=t.memoizedState.cache),i.memoizedState.cache!==a&&(i.flags|=2048),sr(Dt),ut(i),null;case 25:return null;case 30:return null}throw Error(s(156,i.tag))}function s1(t,i){switch(zf(i),i.tag){case 1:return t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 3:return sr(Dt),Qe(),t=i.flags,(t&65536)!==0&&(t&128)===0?(i.flags=t&-65537|128,i):null;case 26:case 27:case 5:return an(i),null;case 31:if(i.memoizedState!==null){if(On(i),i.alternate===null)throw Error(s(340));Qs()}return t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 13:if(On(i),t=i.memoizedState,t!==null&&t.dehydrated!==null){if(i.alternate===null)throw Error(s(340));Qs()}return t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 19:return ne(bt),null;case 4:return Qe(),null;case 10:return sr(i.type),null;case 22:case 23:return On(i),td(),t!==null&&ne($s),t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 24:return sr(Dt),null;case 25:return null;default:return null}}function gv(t,i){switch(zf(i),i.tag){case 3:sr(Dt),Qe();break;case 26:case 27:case 5:an(i);break;case 4:Qe();break;case 31:i.memoizedState!==null&&On(i);break;case 13:On(i);break;case 19:ne(bt);break;case 10:sr(i.type);break;case 22:case 23:On(i),td(),t!==null&&ne($s);break;case 24:sr(Dt)}}function Sl(t,i){try{var a=i.updateQueue,l=a!==null?a.lastEffect:null;if(l!==null){var h=l.next;a=h;do{if((a.tag&t)===t){l=void 0;var d=a.create,v=a.inst;l=d(),v.destroy=l}a=a.next}while(a!==h)}}catch(b){Ze(i,i.return,b)}}function Yr(t,i,a){try{var l=i.updateQueue,h=l!==null?l.lastEffect:null;if(h!==null){var d=h.next;l=d;do{if((l.tag&t)===t){var v=l.inst,b=v.destroy;if(b!==void 0){v.destroy=void 0,h=i;var O=a,q=b;try{q()}catch(J){Ze(h,O,J)}}}l=l.next}while(l!==d)}}catch(J){Ze(i,i.return,J)}}function yv(t){var i=t.updateQueue;if(i!==null){var a=t.stateNode;try{oy(i,a)}catch(l){Ze(t,t.return,l)}}}function vv(t,i,a){a.props=ea(t.type,t.memoizedProps),a.state=t.memoizedState;try{a.componentWillUnmount()}catch(l){Ze(t,i,l)}}function Al(t,i){try{var a=t.ref;if(a!==null){switch(t.tag){case 26:case 27:case 5:var l=t.stateNode;break;case 30:l=t.stateNode;break;default:l=t.stateNode}typeof a=="function"?t.refCleanup=a(l):a.current=l}}catch(h){Ze(t,i,h)}}function zi(t,i){var a=t.ref,l=t.refCleanup;if(a!==null)if(typeof l=="function")try{l()}catch(h){Ze(t,i,h)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(h){Ze(t,i,h)}else a.current=null}function _v(t){var i=t.type,a=t.memoizedProps,l=t.stateNode;try{e:switch(i){case"button":case"input":case"select":case"textarea":a.autoFocus&&l.focus();break e;case"img":a.src?l.src=a.src:a.srcSet&&(l.srcset=a.srcSet)}}catch(h){Ze(t,t.return,h)}}function Md(t,i,a){try{var l=t.stateNode;C1(l,t.type,a,i),l[Ft]=i}catch(h){Ze(t,t.return,h)}}function Ev(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&es(t.type)||t.tag===4}function Vd(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Ev(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&es(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function kd(t,i,a){var l=t.tag;if(l===5||l===6)t=t.stateNode,i?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(t,i):(i=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,i.appendChild(t),a=a._reactRootContainer,a!=null||i.onclick!==null||(i.onclick=oi));else if(l!==4&&(l===27&&es(t.type)&&(a=t.stateNode,i=null),t=t.child,t!==null))for(kd(t,i,a),t=t.sibling;t!==null;)kd(t,i,a),t=t.sibling}function Oc(t,i,a){var l=t.tag;if(l===5||l===6)t=t.stateNode,i?a.insertBefore(t,i):a.appendChild(t);else if(l!==4&&(l===27&&es(t.type)&&(a=t.stateNode),t=t.child,t!==null))for(Oc(t,i,a),t=t.sibling;t!==null;)Oc(t,i,a),t=t.sibling}function Tv(t){var i=t.stateNode,a=t.memoizedProps;try{for(var l=t.type,h=i.attributes;h.length;)i.removeAttributeNode(h[0]);en(i,l,a),i[Ct]=t,i[Ft]=a}catch(d){Ze(t,t.return,d)}}var cr=!1,Mt=!1,Pd=!1,bv=typeof WeakSet=="function"?WeakSet:Set,Qt=null;function a1(t,i){if(t=t.containerInfo,im=Zc,t=Vg(t),If(t)){if("selectionStart"in t)var a={start:t.selectionStart,end:t.selectionEnd};else e:{a=(a=t.ownerDocument)&&a.defaultView||window;var l=a.getSelection&&a.getSelection();if(l&&l.rangeCount!==0){a=l.anchorNode;var h=l.anchorOffset,d=l.focusNode;l=l.focusOffset;try{a.nodeType,d.nodeType}catch{a=null;break e}var v=0,b=-1,O=-1,q=0,J=0,ie=t,F=null;t:for(;;){for(var Y;ie!==a||h!==0&&ie.nodeType!==3||(b=v+h),ie!==d||l!==0&&ie.nodeType!==3||(O=v+l),ie.nodeType===3&&(v+=ie.nodeValue.length),(Y=ie.firstChild)!==null;)F=ie,ie=Y;for(;;){if(ie===t)break t;if(F===a&&++q===h&&(b=v),F===d&&++J===l&&(O=v),(Y=ie.nextSibling)!==null)break;ie=F,F=ie.parentNode}ie=Y}a=b===-1||O===-1?null:{start:b,end:O}}else a=null}a=a||{start:0,end:0}}else a=null;for(rm={focusedElem:t,selectionRange:a},Zc=!1,Qt=i;Qt!==null;)if(i=Qt,t=i.child,(i.subtreeFlags&1028)!==0&&t!==null)t.return=i,Qt=t;else for(;Qt!==null;){switch(i=Qt,d=i.alternate,t=i.flags,i.tag){case 0:if((t&4)!==0&&(t=i.updateQueue,t=t!==null?t.events:null,t!==null))for(a=0;a<t.length;a++)h=t[a],h.ref.impl=h.nextImpl;break;case 11:case 15:break;case 1:if((t&1024)!==0&&d!==null){t=void 0,a=i,h=d.memoizedProps,d=d.memoizedState,l=a.stateNode;try{var ge=ea(a.type,h);t=l.getSnapshotBeforeUpdate(ge,d),l.__reactInternalSnapshotBeforeUpdate=t}catch(we){Ze(a,a.return,we)}}break;case 3:if((t&1024)!==0){if(t=i.stateNode.containerInfo,a=t.nodeType,a===9)om(t);else if(a===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":om(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(s(163))}if(t=i.sibling,t!==null){t.return=i.return,Qt=t;break}Qt=i.return}}function Sv(t,i,a){var l=a.flags;switch(a.tag){case 0:case 11:case 15:fr(t,a),l&4&&Sl(5,a);break;case 1:if(fr(t,a),l&4)if(t=a.stateNode,i===null)try{t.componentDidMount()}catch(v){Ze(a,a.return,v)}else{var h=ea(a.type,i.memoizedProps);i=i.memoizedState;try{t.componentDidUpdate(h,i,t.__reactInternalSnapshotBeforeUpdate)}catch(v){Ze(a,a.return,v)}}l&64&&yv(a),l&512&&Al(a,a.return);break;case 3:if(fr(t,a),l&64&&(t=a.updateQueue,t!==null)){if(i=null,a.child!==null)switch(a.child.tag){case 27:case 5:i=a.child.stateNode;break;case 1:i=a.child.stateNode}try{oy(t,i)}catch(v){Ze(a,a.return,v)}}break;case 27:i===null&&l&4&&Tv(a);case 26:case 5:fr(t,a),i===null&&l&4&&_v(a),l&512&&Al(a,a.return);break;case 12:fr(t,a);break;case 31:fr(t,a),l&4&&Rv(t,a);break;case 13:fr(t,a),l&4&&Cv(t,a),l&64&&(t=a.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(a=p1.bind(null,a),k1(t,a))));break;case 22:if(l=a.memoizedState!==null||cr,!l){i=i!==null&&i.memoizedState!==null||Mt,h=cr;var d=Mt;cr=l,(Mt=i)&&!d?dr(t,a,(a.subtreeFlags&8772)!==0):fr(t,a),cr=h,Mt=d}break;case 30:break;default:fr(t,a)}}function Av(t){var i=t.alternate;i!==null&&(t.alternate=null,Av(i)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(i=t.stateNode,i!==null&&Ea(i)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var ft=null,Tn=!1;function hr(t,i,a){for(a=a.child;a!==null;)wv(t,i,a),a=a.sibling}function wv(t,i,a){if($t&&typeof $t.onCommitFiberUnmount=="function")try{$t.onCommitFiberUnmount(ii,a)}catch{}switch(a.tag){case 26:Mt||zi(a,i),hr(t,i,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:Mt||zi(a,i);var l=ft,h=Tn;es(a.type)&&(ft=a.stateNode,Tn=!1),hr(t,i,a),Ml(a.stateNode),ft=l,Tn=h;break;case 5:Mt||zi(a,i);case 6:if(l=ft,h=Tn,ft=null,hr(t,i,a),ft=l,Tn=h,ft!==null)if(Tn)try{(ft.nodeType===9?ft.body:ft.nodeName==="HTML"?ft.ownerDocument.body:ft).removeChild(a.stateNode)}catch(d){Ze(a,i,d)}else try{ft.removeChild(a.stateNode)}catch(d){Ze(a,i,d)}break;case 18:ft!==null&&(Tn?(t=ft,y_(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,a.stateNode),ro(t)):y_(ft,a.stateNode));break;case 4:l=ft,h=Tn,ft=a.stateNode.containerInfo,Tn=!0,hr(t,i,a),ft=l,Tn=h;break;case 0:case 11:case 14:case 15:Yr(2,a,i),Mt||Yr(4,a,i),hr(t,i,a);break;case 1:Mt||(zi(a,i),l=a.stateNode,typeof l.componentWillUnmount=="function"&&vv(a,i,l)),hr(t,i,a);break;case 21:hr(t,i,a);break;case 22:Mt=(l=Mt)||a.memoizedState!==null,hr(t,i,a),Mt=l;break;default:hr(t,i,a)}}function Rv(t,i){if(i.memoizedState===null&&(t=i.alternate,t!==null&&(t=t.memoizedState,t!==null))){t=t.dehydrated;try{ro(t)}catch(a){Ze(i,i.return,a)}}}function Cv(t,i){if(i.memoizedState===null&&(t=i.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{ro(t)}catch(a){Ze(i,i.return,a)}}function o1(t){switch(t.tag){case 31:case 13:case 19:var i=t.stateNode;return i===null&&(i=t.stateNode=new bv),i;case 22:return t=t.stateNode,i=t._retryCache,i===null&&(i=t._retryCache=new bv),i;default:throw Error(s(435,t.tag))}}function Mc(t,i){var a=o1(t);i.forEach(function(l){if(!a.has(l)){a.add(l);var h=g1.bind(null,t,l);l.then(h,h)}})}function bn(t,i){var a=i.deletions;if(a!==null)for(var l=0;l<a.length;l++){var h=a[l],d=t,v=i,b=v;e:for(;b!==null;){switch(b.tag){case 27:if(es(b.type)){ft=b.stateNode,Tn=!1;break e}break;case 5:ft=b.stateNode,Tn=!1;break e;case 3:case 4:ft=b.stateNode.containerInfo,Tn=!0;break e}b=b.return}if(ft===null)throw Error(s(160));wv(d,v,h),ft=null,Tn=!1,d=h.alternate,d!==null&&(d.return=null),h.return=null}if(i.subtreeFlags&13886)for(i=i.child;i!==null;)xv(i,t),i=i.sibling}var di=null;function xv(t,i){var a=t.alternate,l=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:bn(i,t),Sn(t),l&4&&(Yr(3,t,t.return),Sl(3,t),Yr(5,t,t.return));break;case 1:bn(i,t),Sn(t),l&512&&(Mt||a===null||zi(a,a.return)),l&64&&cr&&(t=t.updateQueue,t!==null&&(l=t.callbacks,l!==null&&(a=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=a===null?l:a.concat(l))));break;case 26:var h=di;if(bn(i,t),Sn(t),l&512&&(Mt||a===null||zi(a,a.return)),l&4){var d=a!==null?a.memoizedState:null;if(l=t.memoizedState,a===null)if(l===null)if(t.stateNode===null){e:{l=t.type,a=t.memoizedProps,h=h.ownerDocument||h;t:switch(l){case"title":d=h.getElementsByTagName("title")[0],(!d||d[Ri]||d[Ct]||d.namespaceURI==="http://www.w3.org/2000/svg"||d.hasAttribute("itemprop"))&&(d=h.createElement(l),h.head.insertBefore(d,h.querySelector("head > title"))),en(d,l,a),d[Ct]=t,xt(d),l=d;break e;case"link":var v=x_("link","href",h).get(l+(a.href||""));if(v){for(var b=0;b<v.length;b++)if(d=v[b],d.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&d.getAttribute("rel")===(a.rel==null?null:a.rel)&&d.getAttribute("title")===(a.title==null?null:a.title)&&d.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){v.splice(b,1);break t}}d=h.createElement(l),en(d,l,a),h.head.appendChild(d);break;case"meta":if(v=x_("meta","content",h).get(l+(a.content||""))){for(b=0;b<v.length;b++)if(d=v[b],d.getAttribute("content")===(a.content==null?null:""+a.content)&&d.getAttribute("name")===(a.name==null?null:a.name)&&d.getAttribute("property")===(a.property==null?null:a.property)&&d.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&d.getAttribute("charset")===(a.charSet==null?null:a.charSet)){v.splice(b,1);break t}}d=h.createElement(l),en(d,l,a),h.head.appendChild(d);break;default:throw Error(s(468,l))}d[Ct]=t,xt(d),l=d}t.stateNode=l}else I_(h,t.type,t.stateNode);else t.stateNode=C_(h,l,t.memoizedProps);else d!==l?(d===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):d.count--,l===null?I_(h,t.type,t.stateNode):C_(h,l,t.memoizedProps)):l===null&&t.stateNode!==null&&Md(t,t.memoizedProps,a.memoizedProps)}break;case 27:bn(i,t),Sn(t),l&512&&(Mt||a===null||zi(a,a.return)),a!==null&&l&4&&Md(t,t.memoizedProps,a.memoizedProps);break;case 5:if(bn(i,t),Sn(t),l&512&&(Mt||a===null||zi(a,a.return)),t.flags&32){h=t.stateNode;try{En(h,"")}catch(ge){Ze(t,t.return,ge)}}l&4&&t.stateNode!=null&&(h=t.memoizedProps,Md(t,h,a!==null?a.memoizedProps:h)),l&1024&&(Pd=!0);break;case 6:if(bn(i,t),Sn(t),l&4){if(t.stateNode===null)throw Error(s(162));l=t.memoizedProps,a=t.stateNode;try{a.nodeValue=l}catch(ge){Ze(t,t.return,ge)}}break;case 3:if($c=null,h=di,di=Yc(i.containerInfo),bn(i,t),di=h,Sn(t),l&4&&a!==null&&a.memoizedState.isDehydrated)try{ro(i.containerInfo)}catch(ge){Ze(t,t.return,ge)}Pd&&(Pd=!1,Iv(t));break;case 4:l=di,di=Yc(t.stateNode.containerInfo),bn(i,t),Sn(t),di=l;break;case 12:bn(i,t),Sn(t);break;case 31:bn(i,t),Sn(t),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,Mc(t,l)));break;case 13:bn(i,t),Sn(t),t.child.flags&8192&&t.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(kc=fn()),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,Mc(t,l)));break;case 22:h=t.memoizedState!==null;var O=a!==null&&a.memoizedState!==null,q=cr,J=Mt;if(cr=q||h,Mt=J||O,bn(i,t),Mt=J,cr=q,Sn(t),l&8192)e:for(i=t.stateNode,i._visibility=h?i._visibility&-2:i._visibility|1,h&&(a===null||O||cr||Mt||ta(t)),a=null,i=t;;){if(i.tag===5||i.tag===26){if(a===null){O=a=i;try{if(d=O.stateNode,h)v=d.style,typeof v.setProperty=="function"?v.setProperty("display","none","important"):v.display="none";else{b=O.stateNode;var ie=O.memoizedProps.style,F=ie!=null&&ie.hasOwnProperty("display")?ie.display:null;b.style.display=F==null||typeof F=="boolean"?"":(""+F).trim()}}catch(ge){Ze(O,O.return,ge)}}}else if(i.tag===6){if(a===null){O=i;try{O.stateNode.nodeValue=h?"":O.memoizedProps}catch(ge){Ze(O,O.return,ge)}}}else if(i.tag===18){if(a===null){O=i;try{var Y=O.stateNode;h?v_(Y,!0):v_(O.stateNode,!1)}catch(ge){Ze(O,O.return,ge)}}}else if((i.tag!==22&&i.tag!==23||i.memoizedState===null||i===t)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===t)break e;for(;i.sibling===null;){if(i.return===null||i.return===t)break e;a===i&&(a=null),i=i.return}a===i&&(a=null),i.sibling.return=i.return,i=i.sibling}l&4&&(l=t.updateQueue,l!==null&&(a=l.retryQueue,a!==null&&(l.retryQueue=null,Mc(t,a))));break;case 19:bn(i,t),Sn(t),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,Mc(t,l)));break;case 30:break;case 21:break;default:bn(i,t),Sn(t)}}function Sn(t){var i=t.flags;if(i&2){try{for(var a,l=t.return;l!==null;){if(Ev(l)){a=l;break}l=l.return}if(a==null)throw Error(s(160));switch(a.tag){case 27:var h=a.stateNode,d=Vd(t);Oc(t,d,h);break;case 5:var v=a.stateNode;a.flags&32&&(En(v,""),a.flags&=-33);var b=Vd(t);Oc(t,b,v);break;case 3:case 4:var O=a.stateNode.containerInfo,q=Vd(t);kd(t,q,O);break;default:throw Error(s(161))}}catch(J){Ze(t,t.return,J)}t.flags&=-3}i&4096&&(t.flags&=-4097)}function Iv(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var i=t;Iv(i),i.tag===5&&i.flags&1024&&i.stateNode.reset(),t=t.sibling}}function fr(t,i){if(i.subtreeFlags&8772)for(i=i.child;i!==null;)Sv(t,i.alternate,i),i=i.sibling}function ta(t){for(t=t.child;t!==null;){var i=t;switch(i.tag){case 0:case 11:case 14:case 15:Yr(4,i,i.return),ta(i);break;case 1:zi(i,i.return);var a=i.stateNode;typeof a.componentWillUnmount=="function"&&vv(i,i.return,a),ta(i);break;case 27:Ml(i.stateNode);case 26:case 5:zi(i,i.return),ta(i);break;case 22:i.memoizedState===null&&ta(i);break;case 30:ta(i);break;default:ta(i)}t=t.sibling}}function dr(t,i,a){for(a=a&&(i.subtreeFlags&8772)!==0,i=i.child;i!==null;){var l=i.alternate,h=t,d=i,v=d.flags;switch(d.tag){case 0:case 11:case 15:dr(h,d,a),Sl(4,d);break;case 1:if(dr(h,d,a),l=d,h=l.stateNode,typeof h.componentDidMount=="function")try{h.componentDidMount()}catch(q){Ze(l,l.return,q)}if(l=d,h=l.updateQueue,h!==null){var b=l.stateNode;try{var O=h.shared.hiddenCallbacks;if(O!==null)for(h.shared.hiddenCallbacks=null,h=0;h<O.length;h++)ay(O[h],b)}catch(q){Ze(l,l.return,q)}}a&&v&64&&yv(d),Al(d,d.return);break;case 27:Tv(d);case 26:case 5:dr(h,d,a),a&&l===null&&v&4&&_v(d),Al(d,d.return);break;case 12:dr(h,d,a);break;case 31:dr(h,d,a),a&&v&4&&Rv(h,d);break;case 13:dr(h,d,a),a&&v&4&&Cv(h,d);break;case 22:d.memoizedState===null&&dr(h,d,a),Al(d,d.return);break;case 30:break;default:dr(h,d,a)}i=i.sibling}}function Ld(t,i){var a=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),t=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(t=i.memoizedState.cachePool.pool),t!==a&&(t!=null&&t.refCount++,a!=null&&cl(a))}function Ud(t,i){t=null,i.alternate!==null&&(t=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==t&&(i.refCount++,t!=null&&cl(t))}function mi(t,i,a,l){if(i.subtreeFlags&10256)for(i=i.child;i!==null;)Dv(t,i,a,l),i=i.sibling}function Dv(t,i,a,l){var h=i.flags;switch(i.tag){case 0:case 11:case 15:mi(t,i,a,l),h&2048&&Sl(9,i);break;case 1:mi(t,i,a,l);break;case 3:mi(t,i,a,l),h&2048&&(t=null,i.alternate!==null&&(t=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==t&&(i.refCount++,t!=null&&cl(t)));break;case 12:if(h&2048){mi(t,i,a,l),t=i.stateNode;try{var d=i.memoizedProps,v=d.id,b=d.onPostCommit;typeof b=="function"&&b(v,i.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(O){Ze(i,i.return,O)}}else mi(t,i,a,l);break;case 31:mi(t,i,a,l);break;case 13:mi(t,i,a,l);break;case 23:break;case 22:d=i.stateNode,v=i.alternate,i.memoizedState!==null?d._visibility&2?mi(t,i,a,l):wl(t,i):d._visibility&2?mi(t,i,a,l):(d._visibility|=2,Ya(t,i,a,l,(i.subtreeFlags&10256)!==0||!1)),h&2048&&Ld(v,i);break;case 24:mi(t,i,a,l),h&2048&&Ud(i.alternate,i);break;default:mi(t,i,a,l)}}function Ya(t,i,a,l,h){for(h=h&&((i.subtreeFlags&10256)!==0||!1),i=i.child;i!==null;){var d=t,v=i,b=a,O=l,q=v.flags;switch(v.tag){case 0:case 11:case 15:Ya(d,v,b,O,h),Sl(8,v);break;case 23:break;case 22:var J=v.stateNode;v.memoizedState!==null?J._visibility&2?Ya(d,v,b,O,h):wl(d,v):(J._visibility|=2,Ya(d,v,b,O,h)),h&&q&2048&&Ld(v.alternate,v);break;case 24:Ya(d,v,b,O,h),h&&q&2048&&Ud(v.alternate,v);break;default:Ya(d,v,b,O,h)}i=i.sibling}}function wl(t,i){if(i.subtreeFlags&10256)for(i=i.child;i!==null;){var a=t,l=i,h=l.flags;switch(l.tag){case 22:wl(a,l),h&2048&&Ld(l.alternate,l);break;case 24:wl(a,l),h&2048&&Ud(l.alternate,l);break;default:wl(a,l)}i=i.sibling}}var Rl=8192;function Ka(t,i,a){if(t.subtreeFlags&Rl)for(t=t.child;t!==null;)Nv(t,i,a),t=t.sibling}function Nv(t,i,a){switch(t.tag){case 26:Ka(t,i,a),t.flags&Rl&&t.memoizedState!==null&&Y1(a,di,t.memoizedState,t.memoizedProps);break;case 5:Ka(t,i,a);break;case 3:case 4:var l=di;di=Yc(t.stateNode.containerInfo),Ka(t,i,a),di=l;break;case 22:t.memoizedState===null&&(l=t.alternate,l!==null&&l.memoizedState!==null?(l=Rl,Rl=16777216,Ka(t,i,a),Rl=l):Ka(t,i,a));break;default:Ka(t,i,a)}}function Ov(t){var i=t.alternate;if(i!==null&&(t=i.child,t!==null)){i.child=null;do i=t.sibling,t.sibling=null,t=i;while(t!==null)}}function Cl(t){var i=t.deletions;if((t.flags&16)!==0){if(i!==null)for(var a=0;a<i.length;a++){var l=i[a];Qt=l,Vv(l,t)}Ov(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)Mv(t),t=t.sibling}function Mv(t){switch(t.tag){case 0:case 11:case 15:Cl(t),t.flags&2048&&Yr(9,t,t.return);break;case 3:Cl(t);break;case 12:Cl(t);break;case 22:var i=t.stateNode;t.memoizedState!==null&&i._visibility&2&&(t.return===null||t.return.tag!==13)?(i._visibility&=-3,Vc(t)):Cl(t);break;default:Cl(t)}}function Vc(t){var i=t.deletions;if((t.flags&16)!==0){if(i!==null)for(var a=0;a<i.length;a++){var l=i[a];Qt=l,Vv(l,t)}Ov(t)}for(t=t.child;t!==null;){switch(i=t,i.tag){case 0:case 11:case 15:Yr(8,i,i.return),Vc(i);break;case 22:a=i.stateNode,a._visibility&2&&(a._visibility&=-3,Vc(i));break;default:Vc(i)}t=t.sibling}}function Vv(t,i){for(;Qt!==null;){var a=Qt;switch(a.tag){case 0:case 11:case 15:Yr(8,a,i);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var l=a.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:cl(a.memoizedState.cache)}if(l=a.child,l!==null)l.return=a,Qt=l;else e:for(a=t;Qt!==null;){l=Qt;var h=l.sibling,d=l.return;if(Av(l),l===a){Qt=null;break e}if(h!==null){h.return=d,Qt=h;break e}Qt=d}}}var l1={getCacheForType:function(t){var i=Jt(Dt),a=i.data.get(t);return a===void 0&&(a=t(),i.data.set(t,a)),a},cacheSignal:function(){return Jt(Dt).controller.signal}},u1=typeof WeakMap=="function"?WeakMap:Map,Xe=0,ot=null,Ve=null,Le=0,Je=0,Mn=null,Kr=!1,$a=!1,jd=!1,mr=0,yt=0,$r=0,na=0,zd=0,Vn=0,Xa=0,xl=null,An=null,Bd=!1,kc=0,kv=0,Pc=1/0,Lc=null,Xr=null,Bt=0,Wr=null,Wa=null,pr=0,qd=0,Hd=null,Pv=null,Il=0,Fd=null;function kn(){return(Xe&2)!==0&&Le!==0?Le&-Le:$.T!==null?Xd():Uu()}function Lv(){if(Vn===0)if((Le&536870912)===0||qe){var t=Is;Is<<=1,(Is&3932160)===0&&(Is=262144),Vn=t}else Vn=536870912;return t=Nn.current,t!==null&&(t.flags|=32),Vn}function wn(t,i,a){(t===ot&&(Je===2||Je===9)||t.cancelPendingCommit!==null)&&(Ja(t,0),Jr(t,Le,Vn,!1)),Ds(t,a),((Xe&2)===0||t!==ot)&&(t===ot&&((Xe&2)===0&&(na|=a),yt===4&&Jr(t,Le,Vn,!1)),Bi(t))}function Uv(t,i,a){if((Xe&6)!==0)throw Error(s(327));var l=!a&&(i&127)===0&&(i&t.expiredLanes)===0||ri(t,i),h=l?f1(t,i):Qd(t,i,!0),d=l;do{if(h===0){$a&&!l&&Jr(t,i,0,!1);break}else{if(a=t.current.alternate,d&&!c1(a)){h=Qd(t,i,!1),d=!1;continue}if(h===2){if(d=i,t.errorRecoveryDisabledLanes&d)var v=0;else v=t.pendingLanes&-536870913,v=v!==0?v:v&536870912?536870912:0;if(v!==0){i=v;e:{var b=t;h=xl;var O=b.current.memoizedState.isDehydrated;if(O&&(Ja(b,v).flags|=256),v=Qd(b,v,!1),v!==2){if(jd&&!O){b.errorRecoveryDisabledLanes|=d,na|=d,h=4;break e}d=An,An=h,d!==null&&(An===null?An=d:An.push.apply(An,d))}h=v}if(d=!1,h!==2)continue}}if(h===1){Ja(t,0),Jr(t,i,0,!0);break}e:{switch(l=t,d=h,d){case 0:case 1:throw Error(s(345));case 4:if((i&4194048)!==i)break;case 6:Jr(l,i,Vn,!Kr);break e;case 2:An=null;break;case 3:case 5:break;default:throw Error(s(329))}if((i&62914560)===i&&(h=kc+300-fn(),10<h)){if(Jr(l,i,Vn,!Kr),Si(l,0,!0)!==0)break e;pr=i,l.timeoutHandle=p_(jv.bind(null,l,a,An,Lc,Bd,i,Vn,na,Xa,Kr,d,"Throttled",-0,0),h);break e}jv(l,a,An,Lc,Bd,i,Vn,na,Xa,Kr,d,null,-0,0)}}break}while(!0);Bi(t)}function jv(t,i,a,l,h,d,v,b,O,q,J,ie,F,Y){if(t.timeoutHandle=-1,ie=i.subtreeFlags,ie&8192||(ie&16785408)===16785408){ie={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:oi},Nv(i,d,ie);var ge=(d&62914560)===d?kc-fn():(d&4194048)===d?kv-fn():0;if(ge=K1(ie,ge),ge!==null){pr=d,t.cancelPendingCommit=ge(Yv.bind(null,t,i,d,a,l,h,v,b,O,J,ie,null,F,Y)),Jr(t,d,v,!q);return}}Yv(t,i,d,a,l,h,v,b,O)}function c1(t){for(var i=t;;){var a=i.tag;if((a===0||a===11||a===15)&&i.flags&16384&&(a=i.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var l=0;l<a.length;l++){var h=a[l],d=h.getSnapshot;h=h.value;try{if(!In(d(),h))return!1}catch{return!1}}if(a=i.child,i.subtreeFlags&16384&&a!==null)a.return=i,i=a;else{if(i===t)break;for(;i.sibling===null;){if(i.return===null||i.return===t)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function Jr(t,i,a,l){i&=~zd,i&=~na,t.suspendedLanes|=i,t.pingedLanes&=~i,l&&(t.warmLanes|=i),l=t.expirationTimes;for(var h=i;0<h;){var d=31-Et(h),v=1<<d;l[d]=-1,h&=~v}a!==0&&Ns(t,a,i)}function Uc(){return(Xe&6)===0?(Dl(0),!1):!0}function Gd(){if(Ve!==null){if(Je===0)var t=Ve.return;else t=Ve,rr=Ys=null,od(t),qa=null,fl=0,t=Ve;for(;t!==null;)gv(t.alternate,t),t=t.return;Ve=null}}function Ja(t,i){var a=t.timeoutHandle;a!==-1&&(t.timeoutHandle=-1,D1(a)),a=t.cancelPendingCommit,a!==null&&(t.cancelPendingCommit=null,a()),pr=0,Gd(),ot=t,Ve=a=nr(t.current,null),Le=i,Je=0,Mn=null,Kr=!1,$a=ri(t,i),jd=!1,Xa=Vn=zd=na=$r=yt=0,An=xl=null,Bd=!1,(i&8)!==0&&(i|=i&32);var l=t.entangledLanes;if(l!==0)for(t=t.entanglements,l&=i;0<l;){var h=31-Et(l),d=1<<h;i|=t[h],l&=~d}return mr=i,sc(),a}function zv(t,i){Oe=null,$.H=El,i===Ba||i===dc?(i=ny(),Je=3):i===$f?(i=ny(),Je=4):Je=i===Sd?8:i!==null&&typeof i=="object"&&typeof i.then=="function"?6:1,Mn=i,Ve===null&&(yt=1,Cc(t,$n(i,t.current)))}function Bv(){var t=Nn.current;return t===null?!0:(Le&4194048)===Le?Zn===null:(Le&62914560)===Le||(Le&536870912)!==0?t===Zn:!1}function qv(){var t=$.H;return $.H=El,t===null?El:t}function Hv(){var t=$.A;return $.A=l1,t}function jc(){yt=4,Kr||(Le&4194048)!==Le&&Nn.current!==null||($a=!0),($r&134217727)===0&&(na&134217727)===0||ot===null||Jr(ot,Le,Vn,!1)}function Qd(t,i,a){var l=Xe;Xe|=2;var h=qv(),d=Hv();(ot!==t||Le!==i)&&(Lc=null,Ja(t,i)),i=!1;var v=yt;e:do try{if(Je!==0&&Ve!==null){var b=Ve,O=Mn;switch(Je){case 8:Gd(),v=6;break e;case 3:case 2:case 9:case 6:Nn.current===null&&(i=!0);var q=Je;if(Je=0,Mn=null,Za(t,b,O,q),a&&$a){v=0;break e}break;default:q=Je,Je=0,Mn=null,Za(t,b,O,q)}}h1(),v=yt;break}catch(J){zv(t,J)}while(!0);return i&&t.shellSuspendCounter++,rr=Ys=null,Xe=l,$.H=h,$.A=d,Ve===null&&(ot=null,Le=0,sc()),v}function h1(){for(;Ve!==null;)Fv(Ve)}function f1(t,i){var a=Xe;Xe|=2;var l=qv(),h=Hv();ot!==t||Le!==i?(Lc=null,Pc=fn()+500,Ja(t,i)):$a=ri(t,i);e:do try{if(Je!==0&&Ve!==null){i=Ve;var d=Mn;t:switch(Je){case 1:Je=0,Mn=null,Za(t,i,d,1);break;case 2:case 9:if(ey(d)){Je=0,Mn=null,Gv(i);break}i=function(){Je!==2&&Je!==9||ot!==t||(Je=7),Bi(t)},d.then(i,i);break e;case 3:Je=7;break e;case 4:Je=5;break e;case 7:ey(d)?(Je=0,Mn=null,Gv(i)):(Je=0,Mn=null,Za(t,i,d,7));break;case 5:var v=null;switch(Ve.tag){case 26:v=Ve.memoizedState;case 5:case 27:var b=Ve;if(v?D_(v):b.stateNode.complete){Je=0,Mn=null;var O=b.sibling;if(O!==null)Ve=O;else{var q=b.return;q!==null?(Ve=q,zc(q)):Ve=null}break t}}Je=0,Mn=null,Za(t,i,d,5);break;case 6:Je=0,Mn=null,Za(t,i,d,6);break;case 8:Gd(),yt=6;break e;default:throw Error(s(462))}}d1();break}catch(J){zv(t,J)}while(!0);return rr=Ys=null,$.H=l,$.A=h,Xe=a,Ve!==null?0:(ot=null,Le=0,sc(),yt)}function d1(){for(;Ve!==null&&!bf();)Fv(Ve)}function Fv(t){var i=mv(t.alternate,t,mr);t.memoizedProps=t.pendingProps,i===null?zc(t):Ve=i}function Gv(t){var i=t,a=i.alternate;switch(i.tag){case 15:case 0:i=lv(a,i,i.pendingProps,i.type,void 0,Le);break;case 11:i=lv(a,i,i.pendingProps,i.type.render,i.ref,Le);break;case 5:od(i);default:gv(a,i),i=Ve=Hg(i,mr),i=mv(a,i,mr)}t.memoizedProps=t.pendingProps,i===null?zc(t):Ve=i}function Za(t,i,a,l){rr=Ys=null,od(i),qa=null,fl=0;var h=i.return;try{if(t1(t,h,i,a,Le)){yt=1,Cc(t,$n(a,t.current)),Ve=null;return}}catch(d){if(h!==null)throw Ve=h,d;yt=1,Cc(t,$n(a,t.current)),Ve=null;return}i.flags&32768?(qe||l===1?t=!0:$a||(Le&536870912)!==0?t=!1:(Kr=t=!0,(l===2||l===9||l===3||l===6)&&(l=Nn.current,l!==null&&l.tag===13&&(l.flags|=16384))),Qv(i,t)):zc(i)}function zc(t){var i=t;do{if((i.flags&32768)!==0){Qv(i,Kr);return}t=i.return;var a=r1(i.alternate,i,mr);if(a!==null){Ve=a;return}if(i=i.sibling,i!==null){Ve=i;return}Ve=i=t}while(i!==null);yt===0&&(yt=5)}function Qv(t,i){do{var a=s1(t.alternate,t);if(a!==null){a.flags&=32767,Ve=a;return}if(a=t.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!i&&(t=t.sibling,t!==null)){Ve=t;return}Ve=t=a}while(t!==null);yt=6,Ve=null}function Yv(t,i,a,l,h,d,v,b,O){t.cancelPendingCommit=null;do Bc();while(Bt!==0);if((Xe&6)!==0)throw Error(s(327));if(i!==null){if(i===t.current)throw Error(s(177));if(d=i.lanes|i.childLanes,d|=Vf,wf(t,a,d,v,b,O),t===ot&&(Ve=ot=null,Le=0),Wa=i,Wr=t,pr=a,qd=d,Hd=h,Pv=l,(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,y1(xr,function(){return Jv(),null})):(t.callbackNode=null,t.callbackPriority=0),l=(i.flags&13878)!==0,(i.subtreeFlags&13878)!==0||l){l=$.T,$.T=null,h=X.p,X.p=2,v=Xe,Xe|=4;try{a1(t,i,a)}finally{Xe=v,X.p=h,$.T=l}}Bt=1,Kv(),$v(),Xv()}}function Kv(){if(Bt===1){Bt=0;var t=Wr,i=Wa,a=(i.flags&13878)!==0;if((i.subtreeFlags&13878)!==0||a){a=$.T,$.T=null;var l=X.p;X.p=2;var h=Xe;Xe|=4;try{xv(i,t);var d=rm,v=Vg(t.containerInfo),b=d.focusedElem,O=d.selectionRange;if(v!==b&&b&&b.ownerDocument&&Mg(b.ownerDocument.documentElement,b)){if(O!==null&&If(b)){var q=O.start,J=O.end;if(J===void 0&&(J=q),"selectionStart"in b)b.selectionStart=q,b.selectionEnd=Math.min(J,b.value.length);else{var ie=b.ownerDocument||document,F=ie&&ie.defaultView||window;if(F.getSelection){var Y=F.getSelection(),ge=b.textContent.length,we=Math.min(O.start,ge),rt=O.end===void 0?we:Math.min(O.end,ge);!Y.extend&&we>rt&&(v=rt,rt=we,we=v);var U=Og(b,we),P=Og(b,rt);if(U&&P&&(Y.rangeCount!==1||Y.anchorNode!==U.node||Y.anchorOffset!==U.offset||Y.focusNode!==P.node||Y.focusOffset!==P.offset)){var B=ie.createRange();B.setStart(U.node,U.offset),Y.removeAllRanges(),we>rt?(Y.addRange(B),Y.extend(P.node,P.offset)):(B.setEnd(P.node,P.offset),Y.addRange(B))}}}}for(ie=[],Y=b;Y=Y.parentNode;)Y.nodeType===1&&ie.push({element:Y,left:Y.scrollLeft,top:Y.scrollTop});for(typeof b.focus=="function"&&b.focus(),b=0;b<ie.length;b++){var te=ie[b];te.element.scrollLeft=te.left,te.element.scrollTop=te.top}}Zc=!!im,rm=im=null}finally{Xe=h,X.p=l,$.T=a}}t.current=i,Bt=2}}function $v(){if(Bt===2){Bt=0;var t=Wr,i=Wa,a=(i.flags&8772)!==0;if((i.subtreeFlags&8772)!==0||a){a=$.T,$.T=null;var l=X.p;X.p=2;var h=Xe;Xe|=4;try{Sv(t,i.alternate,i)}finally{Xe=h,X.p=l,$.T=a}}Bt=3}}function Xv(){if(Bt===4||Bt===3){Bt=0,Nu();var t=Wr,i=Wa,a=pr,l=Pv;(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?Bt=5:(Bt=0,Wa=Wr=null,Wv(t,t.pendingLanes));var h=t.pendingLanes;if(h===0&&(Xr=null),Ji(a),i=i.stateNode,$t&&typeof $t.onCommitFiberRoot=="function")try{$t.onCommitFiberRoot(ii,i,void 0,(i.current.flags&128)===128)}catch{}if(l!==null){i=$.T,h=X.p,X.p=2,$.T=null;try{for(var d=t.onRecoverableError,v=0;v<l.length;v++){var b=l[v];d(b.value,{componentStack:b.stack})}}finally{$.T=i,X.p=h}}(pr&3)!==0&&Bc(),Bi(t),h=t.pendingLanes,(a&261930)!==0&&(h&42)!==0?t===Fd?Il++:(Il=0,Fd=t):Il=0,Dl(0)}}function Wv(t,i){(t.pooledCacheLanes&=i)===0&&(i=t.pooledCache,i!=null&&(t.pooledCache=null,cl(i)))}function Bc(){return Kv(),$v(),Xv(),Jv()}function Jv(){if(Bt!==5)return!1;var t=Wr,i=qd;qd=0;var a=Ji(pr),l=$.T,h=X.p;try{X.p=32>a?32:a,$.T=null,a=Hd,Hd=null;var d=Wr,v=pr;if(Bt=0,Wa=Wr=null,pr=0,(Xe&6)!==0)throw Error(s(331));var b=Xe;if(Xe|=4,Mv(d.current),Dv(d,d.current,v,a),Xe=b,Dl(0,!1),$t&&typeof $t.onPostCommitFiberRoot=="function")try{$t.onPostCommitFiberRoot(ii,d)}catch{}return!0}finally{X.p=h,$.T=l,Wv(t,i)}}function Zv(t,i,a){i=$n(a,i),i=bd(t.stateNode,i,2),t=Fr(t,i,2),t!==null&&(Ds(t,2),Bi(t))}function Ze(t,i,a){if(t.tag===3)Zv(t,t,a);else for(;i!==null;){if(i.tag===3){Zv(i,t,a);break}else if(i.tag===1){var l=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(Xr===null||!Xr.has(l))){t=$n(a,t),a=ev(2),l=Fr(i,a,2),l!==null&&(tv(a,l,i,t),Ds(l,2),Bi(l));break}}i=i.return}}function Yd(t,i,a){var l=t.pingCache;if(l===null){l=t.pingCache=new u1;var h=new Set;l.set(i,h)}else h=l.get(i),h===void 0&&(h=new Set,l.set(i,h));h.has(a)||(jd=!0,h.add(a),t=m1.bind(null,t,i,a),i.then(t,t))}function m1(t,i,a){var l=t.pingCache;l!==null&&l.delete(i),t.pingedLanes|=t.suspendedLanes&a,t.warmLanes&=~a,ot===t&&(Le&a)===a&&(yt===4||yt===3&&(Le&62914560)===Le&&300>fn()-kc?(Xe&2)===0&&Ja(t,0):zd|=a,Xa===Le&&(Xa=0)),Bi(t)}function e_(t,i){i===0&&(i=Lu()),t=Fs(t,i),t!==null&&(Ds(t,i),Bi(t))}function p1(t){var i=t.memoizedState,a=0;i!==null&&(a=i.retryLane),e_(t,a)}function g1(t,i){var a=0;switch(t.tag){case 31:case 13:var l=t.stateNode,h=t.memoizedState;h!==null&&(a=h.retryLane);break;case 19:l=t.stateNode;break;case 22:l=t.stateNode._retryCache;break;default:throw Error(s(314))}l!==null&&l.delete(i),e_(t,a)}function y1(t,i){return zt(t,i)}var qc=null,eo=null,Kd=!1,Hc=!1,$d=!1,Zr=0;function Bi(t){t!==eo&&t.next===null&&(eo===null?qc=eo=t:eo=eo.next=t),Hc=!0,Kd||(Kd=!0,_1())}function Dl(t,i){if(!$d&&Hc){$d=!0;do for(var a=!1,l=qc;l!==null;){if(t!==0){var h=l.pendingLanes;if(h===0)var d=0;else{var v=l.suspendedLanes,b=l.pingedLanes;d=(1<<31-Et(42|t)+1)-1,d&=h&~(v&~b),d=d&201326741?d&201326741|1:d?d|2:0}d!==0&&(a=!0,r_(l,d))}else d=Le,d=Si(l,l===ot?d:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(d&3)===0||ri(l,d)||(a=!0,r_(l,d));l=l.next}while(a);$d=!1}}function v1(){t_()}function t_(){Hc=Kd=!1;var t=0;Zr!==0&&I1()&&(t=Zr);for(var i=fn(),a=null,l=qc;l!==null;){var h=l.next,d=n_(l,i);d===0?(l.next=null,a===null?qc=h:a.next=h,h===null&&(eo=a)):(a=l,(t!==0||(d&3)!==0)&&(Hc=!0)),l=h}Bt!==0&&Bt!==5||Dl(t),Zr!==0&&(Zr=0)}function n_(t,i){for(var a=t.suspendedLanes,l=t.pingedLanes,h=t.expirationTimes,d=t.pendingLanes&-62914561;0<d;){var v=31-Et(d),b=1<<v,O=h[v];O===-1?((b&a)===0||(b&l)!==0)&&(h[v]=Af(b,i)):O<=i&&(t.expiredLanes|=b),d&=~b}if(i=ot,a=Le,a=Si(t,t===i?a:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l=t.callbackNode,a===0||t===i&&(Je===2||Je===9)||t.cancelPendingCommit!==null)return l!==null&&l!==null&&Cr(l),t.callbackNode=null,t.callbackPriority=0;if((a&3)===0||ri(t,a)){if(i=a&-a,i===t.callbackPriority)return i;switch(l!==null&&Cr(l),Ji(a)){case 2:case 8:a=zo;break;case 32:a=xr;break;case 268435456:a=Ou;break;default:a=xr}return l=i_.bind(null,t),a=zt(a,l),t.callbackPriority=i,t.callbackNode=a,i}return l!==null&&l!==null&&Cr(l),t.callbackPriority=2,t.callbackNode=null,2}function i_(t,i){if(Bt!==0&&Bt!==5)return t.callbackNode=null,t.callbackPriority=0,null;var a=t.callbackNode;if(Bc()&&t.callbackNode!==a)return null;var l=Le;return l=Si(t,t===ot?l:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l===0?null:(Uv(t,l,i),n_(t,fn()),t.callbackNode!=null&&t.callbackNode===a?i_.bind(null,t):null)}function r_(t,i){if(Bc())return null;Uv(t,i,!0)}function _1(){N1(function(){(Xe&6)!==0?zt(jo,v1):t_()})}function Xd(){if(Zr===0){var t=ja;t===0&&(t=Ti,Ti<<=1,(Ti&261888)===0&&(Ti=256)),Zr=t}return Zr}function s_(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:Aa(""+t)}function a_(t,i){var a=i.ownerDocument.createElement("input");return a.name=i.name,a.value=i.value,t.id&&a.setAttribute("form",t.id),i.parentNode.insertBefore(a,i),t=new FormData(t),a.parentNode.removeChild(a),t}function E1(t,i,a,l,h){if(i==="submit"&&a&&a.stateNode===h){var d=s_((h[Ft]||null).action),v=l.submitter;v&&(i=(i=v[Ft]||null)?s_(i.formAction):v.getAttribute("formAction"),i!==null&&(d=i,v=null));var b=new Vi("action","action",null,l,h);t.push({event:b,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(Zr!==0){var O=v?a_(h,v):new FormData(h);gd(a,{pending:!0,data:O,method:h.method,action:d},null,O)}}else typeof d=="function"&&(b.preventDefault(),O=v?a_(h,v):new FormData(h),gd(a,{pending:!0,data:O,method:h.method,action:d},d,O))},currentTarget:h}]})}}for(var Wd=0;Wd<Mf.length;Wd++){var Jd=Mf[Wd],T1=Jd.toLowerCase(),b1=Jd[0].toUpperCase()+Jd.slice(1);fi(T1,"on"+b1)}fi(Lg,"onAnimationEnd"),fi(Ug,"onAnimationIteration"),fi(jg,"onAnimationStart"),fi("dblclick","onDoubleClick"),fi("focusin","onFocus"),fi("focusout","onBlur"),fi(US,"onTransitionRun"),fi(jS,"onTransitionStart"),fi(zS,"onTransitionCancel"),fi(zg,"onTransitionEnd"),Di("onMouseEnter",["mouseout","mouseover"]),Di("onMouseLeave",["mouseout","mouseover"]),Di("onPointerEnter",["pointerout","pointerover"]),Di("onPointerLeave",["pointerout","pointerover"]),Ii("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Ii("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Ii("onBeforeInput",["compositionend","keypress","textInput","paste"]),Ii("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Ii("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Ii("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Nl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),S1=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Nl));function o_(t,i){i=(i&4)!==0;for(var a=0;a<t.length;a++){var l=t[a],h=l.event;l=l.listeners;e:{var d=void 0;if(i)for(var v=l.length-1;0<=v;v--){var b=l[v],O=b.instance,q=b.currentTarget;if(b=b.listener,O!==d&&h.isPropagationStopped())break e;d=b,h.currentTarget=q;try{d(h)}catch(J){rc(J)}h.currentTarget=null,d=O}else for(v=0;v<l.length;v++){if(b=l[v],O=b.instance,q=b.currentTarget,b=b.listener,O!==d&&h.isPropagationStopped())break e;d=b,h.currentTarget=q;try{d(h)}catch(J){rc(J)}h.currentTarget=null,d=O}}}}function ke(t,i){var a=i[_a];a===void 0&&(a=i[_a]=new Set);var l=t+"__bubble";a.has(l)||(l_(i,t,2,!1),a.add(l))}function Zd(t,i,a){var l=0;i&&(l|=4),l_(a,t,l,i)}var Fc="_reactListening"+Math.random().toString(36).slice(2);function em(t){if(!t[Fc]){t[Fc]=!0,Ho.forEach(function(a){a!=="selectionchange"&&(S1.has(a)||Zd(a,!1,t),Zd(a,!0,t))});var i=t.nodeType===9?t:t.ownerDocument;i===null||i[Fc]||(i[Fc]=!0,Zd("selectionchange",!1,i))}}function l_(t,i,a,l){switch(L_(i)){case 2:var h=W1;break;case 8:h=J1;break;default:h=pm}a=h.bind(null,i,a,t),h=void 0,!Ps||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(h=!0),l?h!==void 0?t.addEventListener(i,a,{capture:!0,passive:h}):t.addEventListener(i,a,!0):h!==void 0?t.addEventListener(i,a,{passive:h}):t.addEventListener(i,a,!1)}function tm(t,i,a,l,h){var d=l;if((i&1)===0&&(i&2)===0&&l!==null)e:for(;;){if(l===null)return;var v=l.tag;if(v===3||v===4){var b=l.stateNode.containerInfo;if(b===h)break;if(v===4)for(v=l.return;v!==null;){var O=v.tag;if((O===3||O===4)&&v.stateNode.containerInfo===h)return;v=v.return}for(;b!==null;){if(v=Ci(b),v===null)return;if(O=v.tag,O===5||O===6||O===26||O===27){l=d=v;continue e}b=b.parentNode}}l=l.return}Vr(function(){var q=d,J=Gn(a),ie=[];e:{var F=Bg.get(t);if(F!==void 0){var Y=Vi,ge=t;switch(t){case"keypress":if(Us(a)===0)break e;case"keydown":case"keyup":Y=tc;break;case"focusin":ge="focus",Y=zs;break;case"focusout":ge="blur",Y=zs;break;case"beforeblur":case"afterblur":Y=zs;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Y=nl;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Y=Qu;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Y=y;break;case Lg:case Ug:case jg:Y=Ku;break;case zg:Y=w;break;case"scroll":case"scrollend":Y=tl;break;case"wheel":Y=Q;break;case"copy":case"cut":case"paste":Y=$u;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Y=tr;break;case"toggle":case"beforetoggle":Y=Ne}var we=(i&4)!==0,rt=!we&&(t==="scroll"||t==="scrollend"),U=we?F!==null?F+"Capture":null:F;we=[];for(var P=q,B;P!==null;){var te=P;if(B=te.stateNode,te=te.tag,te!==5&&te!==26&&te!==27||B===null||U===null||(te=li(P,U),te!=null&&we.push(Ol(P,te,B))),rt)break;P=P.return}0<we.length&&(F=new Y(F,ge,null,a,J),ie.push({event:F,listeners:we}))}}if((i&7)===0){e:{if(F=t==="mouseover"||t==="pointerover",Y=t==="mouseout"||t==="pointerout",F&&a!==Jo&&(ge=a.relatedTarget||a.fromElement)&&(Ci(ge)||ge[wi]))break e;if((Y||F)&&(F=J.window===J?J:(F=J.ownerDocument)?F.defaultView||F.parentWindow:window,Y?(ge=a.relatedTarget||a.toElement,Y=q,ge=ge?Ci(ge):null,ge!==null&&(rt=u(ge),we=ge.tag,ge!==rt||we!==5&&we!==27&&we!==6)&&(ge=null)):(Y=null,ge=q),Y!==ge)){if(we=nl,te="onMouseLeave",U="onMouseEnter",P="mouse",(t==="pointerout"||t==="pointerover")&&(we=tr,te="onPointerLeave",U="onPointerEnter",P="pointer"),rt=Y==null?F:Cn(Y),B=ge==null?F:Cn(ge),F=new we(te,P+"leave",Y,a,J),F.target=rt,F.relatedTarget=B,te=null,Ci(J)===q&&(we=new we(U,P+"enter",ge,a,J),we.target=B,we.relatedTarget=rt,te=we),rt=te,Y&&ge)t:{for(we=A1,U=Y,P=ge,B=0,te=U;te;te=we(te))B++;te=0;for(var be=P;be;be=we(be))te++;for(;0<B-te;)U=we(U),B--;for(;0<te-B;)P=we(P),te--;for(;B--;){if(U===P||P!==null&&U===P.alternate){we=U;break t}U=we(U),P=we(P)}we=null}else we=null;Y!==null&&u_(ie,F,Y,we,!1),ge!==null&&rt!==null&&u_(ie,rt,ge,we,!0)}}e:{if(F=q?Cn(q):window,Y=F.nodeName&&F.nodeName.toLowerCase(),Y==="select"||Y==="input"&&F.type==="file")var Ye=Rg;else if(Ag(F))if(Cg)Ye=kS;else{Ye=MS;var ye=OS}else Y=F.nodeName,!Y||Y.toLowerCase()!=="input"||F.type!=="checkbox"&&F.type!=="radio"?q&&Sa(q.elementType)&&(Ye=Rg):Ye=VS;if(Ye&&(Ye=Ye(t,q))){wg(ie,Ye,a,J);break e}ye&&ye(t,F,q),t==="focusout"&&q&&F.type==="number"&&q.memoizedProps.value!=null&&$o(F,"number",F.value)}switch(ye=q?Cn(q):window,t){case"focusin":(Ag(ye)||ye.contentEditable==="true")&&(Na=ye,Df=q,ol=null);break;case"focusout":ol=Df=Na=null;break;case"mousedown":Nf=!0;break;case"contextmenu":case"mouseup":case"dragend":Nf=!1,kg(ie,a,J);break;case"selectionchange":if(LS)break;case"keydown":case"keyup":kg(ie,a,J)}var Me;if($e)e:{switch(t){case"compositionstart":var Ue="onCompositionStart";break e;case"compositionend":Ue="onCompositionEnd";break e;case"compositionupdate":Ue="onCompositionUpdate";break e}Ue=void 0}else Da?Bs(t,a)&&(Ue="onCompositionEnd"):t==="keydown"&&a.keyCode===229&&(Ue="onCompositionStart");Ue&&(Li&&a.locale!=="ko"&&(Da||Ue!=="onCompositionStart"?Ue==="onCompositionEnd"&&Da&&(Me=el()):(Mi=J,Zo="value"in Mi?Mi.value:Mi.textContent,Da=!0)),ye=Gc(q,Ue),0<ye.length&&(Ue=new Pi(Ue,t,null,a,J),ie.push({event:Ue,listeners:ye}),Me?Ue.data=Me:(Me=Ia(a),Me!==null&&(Ue.data=Me)))),(Me=Yn?xS(t,a):IS(t,a))&&(Ue=Gc(q,"onBeforeInput"),0<Ue.length&&(ye=new Pi("onBeforeInput","beforeinput",null,a,J),ie.push({event:ye,listeners:Ue}),ye.data=Me)),E1(ie,t,q,a,J)}o_(ie,i)})}function Ol(t,i,a){return{instance:t,listener:i,currentTarget:a}}function Gc(t,i){for(var a=i+"Capture",l=[];t!==null;){var h=t,d=h.stateNode;if(h=h.tag,h!==5&&h!==26&&h!==27||d===null||(h=li(t,a),h!=null&&l.unshift(Ol(t,h,d)),h=li(t,i),h!=null&&l.push(Ol(t,h,d))),t.tag===3)return l;t=t.return}return[]}function A1(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function u_(t,i,a,l,h){for(var d=i._reactName,v=[];a!==null&&a!==l;){var b=a,O=b.alternate,q=b.stateNode;if(b=b.tag,O!==null&&O===l)break;b!==5&&b!==26&&b!==27||q===null||(O=q,h?(q=li(a,d),q!=null&&v.unshift(Ol(a,q,O))):h||(q=li(a,d),q!=null&&v.push(Ol(a,q,O)))),a=a.return}v.length!==0&&t.push({event:i,listeners:v})}var w1=/\r\n?/g,R1=/\u0000|\uFFFD/g;function c_(t){return(typeof t=="string"?t:""+t).replace(w1,`
`).replace(R1,"")}function h_(t,i){return i=c_(i),c_(t)===i}function it(t,i,a,l,h,d){switch(a){case"children":typeof l=="string"?i==="body"||i==="textarea"&&l===""||En(t,l):(typeof l=="number"||typeof l=="bigint")&&i!=="body"&&En(t,""+l);break;case"className":xn(t,"class",l);break;case"tabIndex":xn(t,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":xn(t,a,l);break;case"style":Wo(t,l,d);break;case"data":if(i!=="object"){xn(t,"data",l);break}case"src":case"href":if(l===""&&(i!=="a"||a!=="href")){t.removeAttribute(a);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(a);break}l=Aa(""+l),t.setAttribute(a,l);break;case"action":case"formAction":if(typeof l=="function"){t.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof d=="function"&&(a==="formAction"?(i!=="input"&&it(t,i,"name",h.name,h,null),it(t,i,"formEncType",h.formEncType,h,null),it(t,i,"formMethod",h.formMethod,h,null),it(t,i,"formTarget",h.formTarget,h,null)):(it(t,i,"encType",h.encType,h,null),it(t,i,"method",h.method,h,null),it(t,i,"target",h.target,h,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(a);break}l=Aa(""+l),t.setAttribute(a,l);break;case"onClick":l!=null&&(t.onclick=oi);break;case"onScroll":l!=null&&ke("scroll",t);break;case"onScrollEnd":l!=null&&ke("scrollend",t);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(s(61));if(a=l.__html,a!=null){if(h.children!=null)throw Error(s(60));t.innerHTML=a}}break;case"multiple":t.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":t.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){t.removeAttribute("xlink:href");break}a=Aa(""+l),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,""+l):t.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,""):t.removeAttribute(a);break;case"capture":case"download":l===!0?t.setAttribute(a,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,l):t.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?t.setAttribute(a,l):t.removeAttribute(a);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?t.removeAttribute(a):t.setAttribute(a,l);break;case"popover":ke("beforetoggle",t),ke("toggle",t),Ta(t,"popover",l);break;case"xlinkActuate":It(t,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":It(t,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":It(t,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":It(t,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":It(t,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":It(t,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":It(t,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":It(t,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":It(t,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":Ta(t,"is",l);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=Gu.get(a)||a,Ta(t,a,l))}}function nm(t,i,a,l,h,d){switch(a){case"style":Wo(t,l,d);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(s(61));if(a=l.__html,a!=null){if(h.children!=null)throw Error(s(60));t.innerHTML=a}}break;case"children":typeof l=="string"?En(t,l):(typeof l=="number"||typeof l=="bigint")&&En(t,""+l);break;case"onScroll":l!=null&&ke("scroll",t);break;case"onScrollEnd":l!=null&&ke("scrollend",t);break;case"onClick":l!=null&&(t.onclick=oi);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Fo.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(h=a.endsWith("Capture"),i=a.slice(2,h?a.length-7:void 0),d=t[Ft]||null,d=d!=null?d[a]:null,typeof d=="function"&&t.removeEventListener(i,d,h),typeof l=="function")){typeof d!="function"&&d!==null&&(a in t?t[a]=null:t.hasAttribute(a)&&t.removeAttribute(a)),t.addEventListener(i,l,h);break e}a in t?t[a]=l:l===!0?t.setAttribute(a,""):Ta(t,a,l)}}}function en(t,i,a){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":ke("error",t),ke("load",t);var l=!1,h=!1,d;for(d in a)if(a.hasOwnProperty(d)){var v=a[d];if(v!=null)switch(d){case"src":l=!0;break;case"srcSet":h=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,i));default:it(t,i,d,v,a,null)}}h&&it(t,i,"srcSet",a.srcSet,a,null),l&&it(t,i,"src",a.src,a,null);return;case"input":ke("invalid",t);var b=d=v=h=null,O=null,q=null;for(l in a)if(a.hasOwnProperty(l)){var J=a[l];if(J!=null)switch(l){case"name":h=J;break;case"type":v=J;break;case"checked":O=J;break;case"defaultChecked":q=J;break;case"value":d=J;break;case"defaultValue":b=J;break;case"children":case"dangerouslySetInnerHTML":if(J!=null)throw Error(s(137,i));break;default:it(t,i,l,J,a,null)}}qu(t,d,b,O,q,v,h,!1);return;case"select":ke("invalid",t),l=v=d=null;for(h in a)if(a.hasOwnProperty(h)&&(b=a[h],b!=null))switch(h){case"value":d=b;break;case"defaultValue":v=b;break;case"multiple":l=b;default:it(t,i,h,b,a,null)}i=d,a=v,t.multiple=!!l,i!=null?Dr(t,!!l,i,!1):a!=null&&Dr(t,!!l,a,!0);return;case"textarea":ke("invalid",t),d=h=l=null;for(v in a)if(a.hasOwnProperty(v)&&(b=a[v],b!=null))switch(v){case"value":l=b;break;case"defaultValue":h=b;break;case"children":d=b;break;case"dangerouslySetInnerHTML":if(b!=null)throw Error(s(91));break;default:it(t,i,v,b,a,null)}Nr(t,l,h,d);return;case"option":for(O in a)a.hasOwnProperty(O)&&(l=a[O],l!=null)&&(O==="selected"?t.selected=l&&typeof l!="function"&&typeof l!="symbol":it(t,i,O,l,a,null));return;case"dialog":ke("beforetoggle",t),ke("toggle",t),ke("cancel",t),ke("close",t);break;case"iframe":case"object":ke("load",t);break;case"video":case"audio":for(l=0;l<Nl.length;l++)ke(Nl[l],t);break;case"image":ke("error",t),ke("load",t);break;case"details":ke("toggle",t);break;case"embed":case"source":case"link":ke("error",t),ke("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(q in a)if(a.hasOwnProperty(q)&&(l=a[q],l!=null))switch(q){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,i));default:it(t,i,q,l,a,null)}return;default:if(Sa(i)){for(J in a)a.hasOwnProperty(J)&&(l=a[J],l!==void 0&&nm(t,i,J,l,a,void 0));return}}for(b in a)a.hasOwnProperty(b)&&(l=a[b],l!=null&&it(t,i,b,l,a,null))}function C1(t,i,a,l){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var h=null,d=null,v=null,b=null,O=null,q=null,J=null;for(Y in a){var ie=a[Y];if(a.hasOwnProperty(Y)&&ie!=null)switch(Y){case"checked":break;case"value":break;case"defaultValue":O=ie;default:l.hasOwnProperty(Y)||it(t,i,Y,null,l,ie)}}for(var F in l){var Y=l[F];if(ie=a[F],l.hasOwnProperty(F)&&(Y!=null||ie!=null))switch(F){case"type":d=Y;break;case"name":h=Y;break;case"checked":q=Y;break;case"defaultChecked":J=Y;break;case"value":v=Y;break;case"defaultValue":b=Y;break;case"children":case"dangerouslySetInnerHTML":if(Y!=null)throw Error(s(137,i));break;default:Y!==ie&&it(t,i,F,Y,l,ie)}}ba(t,v,b,O,q,J,d,h);return;case"select":Y=v=b=F=null;for(d in a)if(O=a[d],a.hasOwnProperty(d)&&O!=null)switch(d){case"value":break;case"multiple":Y=O;default:l.hasOwnProperty(d)||it(t,i,d,null,l,O)}for(h in l)if(d=l[h],O=a[h],l.hasOwnProperty(h)&&(d!=null||O!=null))switch(h){case"value":F=d;break;case"defaultValue":b=d;break;case"multiple":v=d;default:d!==O&&it(t,i,h,d,l,O)}i=b,a=v,l=Y,F!=null?Dr(t,!!a,F,!1):!!l!=!!a&&(i!=null?Dr(t,!!a,i,!0):Dr(t,!!a,a?[]:"",!1));return;case"textarea":Y=F=null;for(b in a)if(h=a[b],a.hasOwnProperty(b)&&h!=null&&!l.hasOwnProperty(b))switch(b){case"value":break;case"children":break;default:it(t,i,b,null,l,h)}for(v in l)if(h=l[v],d=a[v],l.hasOwnProperty(v)&&(h!=null||d!=null))switch(v){case"value":F=h;break;case"defaultValue":Y=h;break;case"children":break;case"dangerouslySetInnerHTML":if(h!=null)throw Error(s(91));break;default:h!==d&&it(t,i,v,h,l,d)}Hu(t,F,Y);return;case"option":for(var ge in a)F=a[ge],a.hasOwnProperty(ge)&&F!=null&&!l.hasOwnProperty(ge)&&(ge==="selected"?t.selected=!1:it(t,i,ge,null,l,F));for(O in l)F=l[O],Y=a[O],l.hasOwnProperty(O)&&F!==Y&&(F!=null||Y!=null)&&(O==="selected"?t.selected=F&&typeof F!="function"&&typeof F!="symbol":it(t,i,O,F,l,Y));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var we in a)F=a[we],a.hasOwnProperty(we)&&F!=null&&!l.hasOwnProperty(we)&&it(t,i,we,null,l,F);for(q in l)if(F=l[q],Y=a[q],l.hasOwnProperty(q)&&F!==Y&&(F!=null||Y!=null))switch(q){case"children":case"dangerouslySetInnerHTML":if(F!=null)throw Error(s(137,i));break;default:it(t,i,q,F,l,Y)}return;default:if(Sa(i)){for(var rt in a)F=a[rt],a.hasOwnProperty(rt)&&F!==void 0&&!l.hasOwnProperty(rt)&&nm(t,i,rt,void 0,l,F);for(J in l)F=l[J],Y=a[J],!l.hasOwnProperty(J)||F===Y||F===void 0&&Y===void 0||nm(t,i,J,F,l,Y);return}}for(var U in a)F=a[U],a.hasOwnProperty(U)&&F!=null&&!l.hasOwnProperty(U)&&it(t,i,U,null,l,F);for(ie in l)F=l[ie],Y=a[ie],!l.hasOwnProperty(ie)||F===Y||F==null&&Y==null||it(t,i,ie,F,l,Y)}function f_(t){switch(t){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function x1(){if(typeof performance.getEntriesByType=="function"){for(var t=0,i=0,a=performance.getEntriesByType("resource"),l=0;l<a.length;l++){var h=a[l],d=h.transferSize,v=h.initiatorType,b=h.duration;if(d&&b&&f_(v)){for(v=0,b=h.responseEnd,l+=1;l<a.length;l++){var O=a[l],q=O.startTime;if(q>b)break;var J=O.transferSize,ie=O.initiatorType;J&&f_(ie)&&(O=O.responseEnd,v+=J*(O<b?1:(b-q)/(O-q)))}if(--l,i+=8*(d+v)/(h.duration/1e3),t++,10<t)break}}if(0<t)return i/t/1e6}return navigator.connection&&(t=navigator.connection.downlink,typeof t=="number")?t:5}var im=null,rm=null;function Qc(t){return t.nodeType===9?t:t.ownerDocument}function d_(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function m_(t,i){if(t===0)switch(i){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&i==="foreignObject"?0:t}function sm(t,i){return t==="textarea"||t==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.children=="bigint"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var am=null;function I1(){var t=window.event;return t&&t.type==="popstate"?t===am?!1:(am=t,!0):(am=null,!1)}var p_=typeof setTimeout=="function"?setTimeout:void 0,D1=typeof clearTimeout=="function"?clearTimeout:void 0,g_=typeof Promise=="function"?Promise:void 0,N1=typeof queueMicrotask=="function"?queueMicrotask:typeof g_<"u"?function(t){return g_.resolve(null).then(t).catch(O1)}:p_;function O1(t){setTimeout(function(){throw t})}function es(t){return t==="head"}function y_(t,i){var a=i,l=0;do{var h=a.nextSibling;if(t.removeChild(a),h&&h.nodeType===8)if(a=h.data,a==="/$"||a==="/&"){if(l===0){t.removeChild(h),ro(i);return}l--}else if(a==="$"||a==="$?"||a==="$~"||a==="$!"||a==="&")l++;else if(a==="html")Ml(t.ownerDocument.documentElement);else if(a==="head"){a=t.ownerDocument.head,Ml(a);for(var d=a.firstChild;d;){var v=d.nextSibling,b=d.nodeName;d[Ri]||b==="SCRIPT"||b==="STYLE"||b==="LINK"&&d.rel.toLowerCase()==="stylesheet"||a.removeChild(d),d=v}}else a==="body"&&Ml(t.ownerDocument.body);a=h}while(a);ro(i)}function v_(t,i){var a=t;t=0;do{var l=a.nextSibling;if(a.nodeType===1?i?(a._stashedDisplay=a.style.display,a.style.display="none"):(a.style.display=a._stashedDisplay||"",a.getAttribute("style")===""&&a.removeAttribute("style")):a.nodeType===3&&(i?(a._stashedText=a.nodeValue,a.nodeValue=""):a.nodeValue=a._stashedText||""),l&&l.nodeType===8)if(a=l.data,a==="/$"){if(t===0)break;t--}else a!=="$"&&a!=="$?"&&a!=="$~"&&a!=="$!"||t++;a=l}while(a)}function om(t){var i=t.firstChild;for(i&&i.nodeType===10&&(i=i.nextSibling);i;){var a=i;switch(i=i.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":om(a),Ea(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}t.removeChild(a)}}function M1(t,i,a,l){for(;t.nodeType===1;){var h=a;if(t.nodeName.toLowerCase()!==i.toLowerCase()){if(!l&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(l){if(!t[Ri])switch(i){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(d=t.getAttribute("rel"),d==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(d!==h.rel||t.getAttribute("href")!==(h.href==null||h.href===""?null:h.href)||t.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin)||t.getAttribute("title")!==(h.title==null?null:h.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(d=t.getAttribute("src"),(d!==(h.src==null?null:h.src)||t.getAttribute("type")!==(h.type==null?null:h.type)||t.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin))&&d&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(i==="input"&&t.type==="hidden"){var d=h.name==null?null:""+h.name;if(h.type==="hidden"&&t.getAttribute("name")===d)return t}else return t;if(t=ei(t.nextSibling),t===null)break}return null}function V1(t,i,a){if(i==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!a||(t=ei(t.nextSibling),t===null))return null;return t}function __(t,i){for(;t.nodeType!==8;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!i||(t=ei(t.nextSibling),t===null))return null;return t}function lm(t){return t.data==="$?"||t.data==="$~"}function um(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState!=="loading"}function k1(t,i){var a=t.ownerDocument;if(t.data==="$~")t._reactRetry=i;else if(t.data!=="$?"||a.readyState!=="loading")i();else{var l=function(){i(),a.removeEventListener("DOMContentLoaded",l)};a.addEventListener("DOMContentLoaded",l),t._reactRetry=l}}function ei(t){for(;t!=null;t=t.nextSibling){var i=t.nodeType;if(i===1||i===3)break;if(i===8){if(i=t.data,i==="$"||i==="$!"||i==="$?"||i==="$~"||i==="&"||i==="F!"||i==="F")break;if(i==="/$"||i==="/&")return null}}return t}var cm=null;function E_(t){t=t.nextSibling;for(var i=0;t;){if(t.nodeType===8){var a=t.data;if(a==="/$"||a==="/&"){if(i===0)return ei(t.nextSibling);i--}else a!=="$"&&a!=="$!"&&a!=="$?"&&a!=="$~"&&a!=="&"||i++}t=t.nextSibling}return null}function T_(t){t=t.previousSibling;for(var i=0;t;){if(t.nodeType===8){var a=t.data;if(a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"){if(i===0)return t;i--}else a!=="/$"&&a!=="/&"||i++}t=t.previousSibling}return null}function b_(t,i,a){switch(i=Qc(a),t){case"html":if(t=i.documentElement,!t)throw Error(s(452));return t;case"head":if(t=i.head,!t)throw Error(s(453));return t;case"body":if(t=i.body,!t)throw Error(s(454));return t;default:throw Error(s(451))}}function Ml(t){for(var i=t.attributes;i.length;)t.removeAttributeNode(i[0]);Ea(t)}var ti=new Map,S_=new Set;function Yc(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var gr=X.d;X.d={f:P1,r:L1,D:U1,C:j1,L:z1,m:B1,X:H1,S:q1,M:F1};function P1(){var t=gr.f(),i=Uc();return t||i}function L1(t){var i=Fn(t);i!==null&&i.tag===5&&i.type==="form"?zy(i):gr.r(t)}var to=typeof document>"u"?null:document;function A_(t,i,a){var l=to;if(l&&typeof i=="string"&&i){var h=_n(i);h='link[rel="'+t+'"][href="'+h+'"]',typeof a=="string"&&(h+='[crossorigin="'+a+'"]'),S_.has(h)||(S_.add(h),t={rel:t,crossOrigin:a,href:i},l.querySelector(h)===null&&(i=l.createElement("link"),en(i,"link",t),xt(i),l.head.appendChild(i)))}}function U1(t){gr.D(t),A_("dns-prefetch",t,null)}function j1(t,i){gr.C(t,i),A_("preconnect",t,i)}function z1(t,i,a){gr.L(t,i,a);var l=to;if(l&&t&&i){var h='link[rel="preload"][as="'+_n(i)+'"]';i==="image"&&a&&a.imageSrcSet?(h+='[imagesrcset="'+_n(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(h+='[imagesizes="'+_n(a.imageSizes)+'"]')):h+='[href="'+_n(t)+'"]';var d=h;switch(i){case"style":d=no(t);break;case"script":d=io(t)}ti.has(d)||(t=T({rel:"preload",href:i==="image"&&a&&a.imageSrcSet?void 0:t,as:i},a),ti.set(d,t),l.querySelector(h)!==null||i==="style"&&l.querySelector(Vl(d))||i==="script"&&l.querySelector(kl(d))||(i=l.createElement("link"),en(i,"link",t),xt(i),l.head.appendChild(i)))}}function B1(t,i){gr.m(t,i);var a=to;if(a&&t){var l=i&&typeof i.as=="string"?i.as:"script",h='link[rel="modulepreload"][as="'+_n(l)+'"][href="'+_n(t)+'"]',d=h;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":d=io(t)}if(!ti.has(d)&&(t=T({rel:"modulepreload",href:t},i),ti.set(d,t),a.querySelector(h)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(kl(d)))return}l=a.createElement("link"),en(l,"link",t),xt(l),a.head.appendChild(l)}}}function q1(t,i,a){gr.S(t,i,a);var l=to;if(l&&t){var h=xi(l).hoistableStyles,d=no(t);i=i||"default";var v=h.get(d);if(!v){var b={loading:0,preload:null};if(v=l.querySelector(Vl(d)))b.loading=5;else{t=T({rel:"stylesheet",href:t,"data-precedence":i},a),(a=ti.get(d))&&hm(t,a);var O=v=l.createElement("link");xt(O),en(O,"link",t),O._p=new Promise(function(q,J){O.onload=q,O.onerror=J}),O.addEventListener("load",function(){b.loading|=1}),O.addEventListener("error",function(){b.loading|=2}),b.loading|=4,Kc(v,i,l)}v={type:"stylesheet",instance:v,count:1,state:b},h.set(d,v)}}}function H1(t,i){gr.X(t,i);var a=to;if(a&&t){var l=xi(a).hoistableScripts,h=io(t),d=l.get(h);d||(d=a.querySelector(kl(h)),d||(t=T({src:t,async:!0},i),(i=ti.get(h))&&fm(t,i),d=a.createElement("script"),xt(d),en(d,"link",t),a.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},l.set(h,d))}}function F1(t,i){gr.M(t,i);var a=to;if(a&&t){var l=xi(a).hoistableScripts,h=io(t),d=l.get(h);d||(d=a.querySelector(kl(h)),d||(t=T({src:t,async:!0,type:"module"},i),(i=ti.get(h))&&fm(t,i),d=a.createElement("script"),xt(d),en(d,"link",t),a.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},l.set(h,d))}}function w_(t,i,a,l){var h=(h=_e.current)?Yc(h):null;if(!h)throw Error(s(446));switch(t){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(i=no(a.href),a=xi(h).hoistableStyles,l=a.get(i),l||(l={type:"style",instance:null,count:0,state:null},a.set(i,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){t=no(a.href);var d=xi(h).hoistableStyles,v=d.get(t);if(v||(h=h.ownerDocument||h,v={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},d.set(t,v),(d=h.querySelector(Vl(t)))&&!d._p&&(v.instance=d,v.state.loading=5),ti.has(t)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},ti.set(t,a),d||G1(h,t,a,v.state))),i&&l===null)throw Error(s(528,""));return v}if(i&&l!==null)throw Error(s(529,""));return null;case"script":return i=a.async,a=a.src,typeof a=="string"&&i&&typeof i!="function"&&typeof i!="symbol"?(i=io(a),a=xi(h).hoistableScripts,l=a.get(i),l||(l={type:"script",instance:null,count:0,state:null},a.set(i,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,t))}}function no(t){return'href="'+_n(t)+'"'}function Vl(t){return'link[rel="stylesheet"]['+t+"]"}function R_(t){return T({},t,{"data-precedence":t.precedence,precedence:null})}function G1(t,i,a,l){t.querySelector('link[rel="preload"][as="style"]['+i+"]")?l.loading=1:(i=t.createElement("link"),l.preload=i,i.addEventListener("load",function(){return l.loading|=1}),i.addEventListener("error",function(){return l.loading|=2}),en(i,"link",a),xt(i),t.head.appendChild(i))}function io(t){return'[src="'+_n(t)+'"]'}function kl(t){return"script[async]"+t}function C_(t,i,a){if(i.count++,i.instance===null)switch(i.type){case"style":var l=t.querySelector('style[data-href~="'+_n(a.href)+'"]');if(l)return i.instance=l,xt(l),l;var h=T({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return l=(t.ownerDocument||t).createElement("style"),xt(l),en(l,"style",h),Kc(l,a.precedence,t),i.instance=l;case"stylesheet":h=no(a.href);var d=t.querySelector(Vl(h));if(d)return i.state.loading|=4,i.instance=d,xt(d),d;l=R_(a),(h=ti.get(h))&&hm(l,h),d=(t.ownerDocument||t).createElement("link"),xt(d);var v=d;return v._p=new Promise(function(b,O){v.onload=b,v.onerror=O}),en(d,"link",l),i.state.loading|=4,Kc(d,a.precedence,t),i.instance=d;case"script":return d=io(a.src),(h=t.querySelector(kl(d)))?(i.instance=h,xt(h),h):(l=a,(h=ti.get(d))&&(l=T({},a),fm(l,h)),t=t.ownerDocument||t,h=t.createElement("script"),xt(h),en(h,"link",l),t.head.appendChild(h),i.instance=h);case"void":return null;default:throw Error(s(443,i.type))}else i.type==="stylesheet"&&(i.state.loading&4)===0&&(l=i.instance,i.state.loading|=4,Kc(l,a.precedence,t));return i.instance}function Kc(t,i,a){for(var l=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),h=l.length?l[l.length-1]:null,d=h,v=0;v<l.length;v++){var b=l[v];if(b.dataset.precedence===i)d=b;else if(d!==h)break}d?d.parentNode.insertBefore(t,d.nextSibling):(i=a.nodeType===9?a.head:a,i.insertBefore(t,i.firstChild))}function hm(t,i){t.crossOrigin==null&&(t.crossOrigin=i.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=i.referrerPolicy),t.title==null&&(t.title=i.title)}function fm(t,i){t.crossOrigin==null&&(t.crossOrigin=i.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=i.referrerPolicy),t.integrity==null&&(t.integrity=i.integrity)}var $c=null;function x_(t,i,a){if($c===null){var l=new Map,h=$c=new Map;h.set(a,l)}else h=$c,l=h.get(a),l||(l=new Map,h.set(a,l));if(l.has(t))return l;for(l.set(t,null),a=a.getElementsByTagName(t),h=0;h<a.length;h++){var d=a[h];if(!(d[Ri]||d[Ct]||t==="link"&&d.getAttribute("rel")==="stylesheet")&&d.namespaceURI!=="http://www.w3.org/2000/svg"){var v=d.getAttribute(i)||"";v=t+v;var b=l.get(v);b?b.push(d):l.set(v,[d])}}return l}function I_(t,i,a){t=t.ownerDocument||t,t.head.insertBefore(a,i==="title"?t.querySelector("head > title"):null)}function Q1(t,i,a){if(a===1||i.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof i.precedence!="string"||typeof i.href!="string"||i.href==="")break;return!0;case"link":if(typeof i.rel!="string"||typeof i.href!="string"||i.href===""||i.onLoad||i.onError)break;return i.rel==="stylesheet"?(t=i.disabled,typeof i.precedence=="string"&&t==null):!0;case"script":if(i.async&&typeof i.async!="function"&&typeof i.async!="symbol"&&!i.onLoad&&!i.onError&&i.src&&typeof i.src=="string")return!0}return!1}function D_(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}function Y1(t,i,a,l){if(a.type==="stylesheet"&&(typeof l.media!="string"||matchMedia(l.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var h=no(l.href),d=i.querySelector(Vl(h));if(d){i=d._p,i!==null&&typeof i=="object"&&typeof i.then=="function"&&(t.count++,t=Xc.bind(t),i.then(t,t)),a.state.loading|=4,a.instance=d,xt(d);return}d=i.ownerDocument||i,l=R_(l),(h=ti.get(h))&&hm(l,h),d=d.createElement("link"),xt(d);var v=d;v._p=new Promise(function(b,O){v.onload=b,v.onerror=O}),en(d,"link",l),a.instance=d}t.stylesheets===null&&(t.stylesheets=new Map),t.stylesheets.set(a,i),(i=a.state.preload)&&(a.state.loading&3)===0&&(t.count++,a=Xc.bind(t),i.addEventListener("load",a),i.addEventListener("error",a))}}var dm=0;function K1(t,i){return t.stylesheets&&t.count===0&&Jc(t,t.stylesheets),0<t.count||0<t.imgCount?function(a){var l=setTimeout(function(){if(t.stylesheets&&Jc(t,t.stylesheets),t.unsuspend){var d=t.unsuspend;t.unsuspend=null,d()}},6e4+i);0<t.imgBytes&&dm===0&&(dm=62500*x1());var h=setTimeout(function(){if(t.waitingForImages=!1,t.count===0&&(t.stylesheets&&Jc(t,t.stylesheets),t.unsuspend)){var d=t.unsuspend;t.unsuspend=null,d()}},(t.imgBytes>dm?50:800)+i);return t.unsuspend=a,function(){t.unsuspend=null,clearTimeout(l),clearTimeout(h)}}:null}function Xc(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Jc(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var Wc=null;function Jc(t,i){t.stylesheets=null,t.unsuspend!==null&&(t.count++,Wc=new Map,i.forEach($1,t),Wc=null,Xc.call(t))}function $1(t,i){if(!(i.state.loading&4)){var a=Wc.get(t);if(a)var l=a.get(null);else{a=new Map,Wc.set(t,a);for(var h=t.querySelectorAll("link[data-precedence],style[data-precedence]"),d=0;d<h.length;d++){var v=h[d];(v.nodeName==="LINK"||v.getAttribute("media")!=="not all")&&(a.set(v.dataset.precedence,v),l=v)}l&&a.set(null,l)}h=i.instance,v=h.getAttribute("data-precedence"),d=a.get(v)||l,d===l&&a.set(null,h),a.set(v,h),this.count++,l=Xc.bind(this),h.addEventListener("load",l),h.addEventListener("error",l),d?d.parentNode.insertBefore(h,d.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(h,t.firstChild)),i.state.loading|=4}}var Pl={$$typeof:Z,Provider:null,Consumer:null,_currentValue:ce,_currentValue2:ce,_threadCount:0};function X1(t,i,a,l,h,d,v,b,O){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ai(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ai(0),this.hiddenUpdates=Ai(null),this.identifierPrefix=l,this.onUncaughtError=h,this.onCaughtError=d,this.onRecoverableError=v,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=O,this.incompleteTransitions=new Map}function N_(t,i,a,l,h,d,v,b,O,q,J,ie){return t=new X1(t,i,a,v,O,q,J,ie,b),i=1,d===!0&&(i|=24),d=Dn(3,null,null,i),t.current=d,d.stateNode=t,i=Qf(),i.refCount++,t.pooledCache=i,i.refCount++,d.memoizedState={element:l,isDehydrated:a,cache:i},Xf(d),t}function O_(t){return t?(t=Va,t):Va}function M_(t,i,a,l,h,d){h=O_(h),l.context===null?l.context=h:l.pendingContext=h,l=Hr(i),l.payload={element:a},d=d===void 0?null:d,d!==null&&(l.callback=d),a=Fr(t,l,i),a!==null&&(wn(a,t,i),ml(a,t,i))}function V_(t,i){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var a=t.retryLane;t.retryLane=a!==0&&a<i?a:i}}function mm(t,i){V_(t,i),(t=t.alternate)&&V_(t,i)}function k_(t){if(t.tag===13||t.tag===31){var i=Fs(t,67108864);i!==null&&wn(i,t,67108864),mm(t,67108864)}}function P_(t){if(t.tag===13||t.tag===31){var i=kn();i=Os(i);var a=Fs(t,i);a!==null&&wn(a,t,i),mm(t,i)}}var Zc=!0;function W1(t,i,a,l){var h=$.T;$.T=null;var d=X.p;try{X.p=2,pm(t,i,a,l)}finally{X.p=d,$.T=h}}function J1(t,i,a,l){var h=$.T;$.T=null;var d=X.p;try{X.p=8,pm(t,i,a,l)}finally{X.p=d,$.T=h}}function pm(t,i,a,l){if(Zc){var h=gm(l);if(h===null)tm(t,i,l,eh,a),U_(t,l);else if(eA(h,t,i,a,l))l.stopPropagation();else if(U_(t,l),i&4&&-1<Z1.indexOf(t)){for(;h!==null;){var d=Fn(h);if(d!==null)switch(d.tag){case 3:if(d=d.stateNode,d.current.memoizedState.isDehydrated){var v=bi(d.pendingLanes);if(v!==0){var b=d;for(b.pendingLanes|=2,b.entangledLanes|=2;v;){var O=1<<31-Et(v);b.entanglements[1]|=O,v&=~O}Bi(d),(Xe&6)===0&&(Pc=fn()+500,Dl(0))}}break;case 31:case 13:b=Fs(d,2),b!==null&&wn(b,d,2),Uc(),mm(d,2)}if(d=gm(l),d===null&&tm(t,i,l,eh,a),d===h)break;h=d}h!==null&&l.stopPropagation()}else tm(t,i,l,null,a)}}function gm(t){return t=Gn(t),ym(t)}var eh=null;function ym(t){if(eh=null,t=Ci(t),t!==null){var i=u(t);if(i===null)t=null;else{var a=i.tag;if(a===13){if(t=f(i),t!==null)return t;t=null}else if(a===31){if(t=m(i),t!==null)return t;t=null}else if(a===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;t=null}else i!==t&&(t=null)}}return eh=t,null}function L_(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(xs()){case jo:return 2;case zo:return 8;case xr:case Sf:return 32;case Ou:return 268435456;default:return 32}default:return 32}}var vm=!1,ts=null,ns=null,is=null,Ll=new Map,Ul=new Map,rs=[],Z1="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function U_(t,i){switch(t){case"focusin":case"focusout":ts=null;break;case"dragenter":case"dragleave":ns=null;break;case"mouseover":case"mouseout":is=null;break;case"pointerover":case"pointerout":Ll.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ul.delete(i.pointerId)}}function jl(t,i,a,l,h,d){return t===null||t.nativeEvent!==d?(t={blockedOn:i,domEventName:a,eventSystemFlags:l,nativeEvent:d,targetContainers:[h]},i!==null&&(i=Fn(i),i!==null&&k_(i)),t):(t.eventSystemFlags|=l,i=t.targetContainers,h!==null&&i.indexOf(h)===-1&&i.push(h),t)}function eA(t,i,a,l,h){switch(i){case"focusin":return ts=jl(ts,t,i,a,l,h),!0;case"dragenter":return ns=jl(ns,t,i,a,l,h),!0;case"mouseover":return is=jl(is,t,i,a,l,h),!0;case"pointerover":var d=h.pointerId;return Ll.set(d,jl(Ll.get(d)||null,t,i,a,l,h)),!0;case"gotpointercapture":return d=h.pointerId,Ul.set(d,jl(Ul.get(d)||null,t,i,a,l,h)),!0}return!1}function j_(t){var i=Ci(t.target);if(i!==null){var a=u(i);if(a!==null){if(i=a.tag,i===13){if(i=f(a),i!==null){t.blockedOn=i,si(t.priority,function(){P_(a)});return}}else if(i===31){if(i=m(a),i!==null){t.blockedOn=i,si(t.priority,function(){P_(a)});return}}else if(i===3&&a.stateNode.current.memoizedState.isDehydrated){t.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}t.blockedOn=null}function th(t){if(t.blockedOn!==null)return!1;for(var i=t.targetContainers;0<i.length;){var a=gm(t.nativeEvent);if(a===null){a=t.nativeEvent;var l=new a.constructor(a.type,a);Jo=l,a.target.dispatchEvent(l),Jo=null}else return i=Fn(a),i!==null&&k_(i),t.blockedOn=a,!1;i.shift()}return!0}function z_(t,i,a){th(t)&&a.delete(i)}function tA(){vm=!1,ts!==null&&th(ts)&&(ts=null),ns!==null&&th(ns)&&(ns=null),is!==null&&th(is)&&(is=null),Ll.forEach(z_),Ul.forEach(z_)}function nh(t,i){t.blockedOn===i&&(t.blockedOn=null,vm||(vm=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,tA)))}var ih=null;function B_(t){ih!==t&&(ih=t,r.unstable_scheduleCallback(r.unstable_NormalPriority,function(){ih===t&&(ih=null);for(var i=0;i<t.length;i+=3){var a=t[i],l=t[i+1],h=t[i+2];if(typeof l!="function"){if(ym(l||a)===null)continue;break}var d=Fn(a);d!==null&&(t.splice(i,3),i-=3,gd(d,{pending:!0,data:h,method:a.method,action:l},l,h))}}))}function ro(t){function i(O){return nh(O,t)}ts!==null&&nh(ts,t),ns!==null&&nh(ns,t),is!==null&&nh(is,t),Ll.forEach(i),Ul.forEach(i);for(var a=0;a<rs.length;a++){var l=rs[a];l.blockedOn===t&&(l.blockedOn=null)}for(;0<rs.length&&(a=rs[0],a.blockedOn===null);)j_(a),a.blockedOn===null&&rs.shift();if(a=(t.ownerDocument||t).$$reactFormReplay,a!=null)for(l=0;l<a.length;l+=3){var h=a[l],d=a[l+1],v=h[Ft]||null;if(typeof d=="function")v||B_(a);else if(v){var b=null;if(d&&d.hasAttribute("formAction")){if(h=d,v=d[Ft]||null)b=v.formAction;else if(ym(h)!==null)continue}else b=v.action;typeof b=="function"?a[l+1]=b:(a.splice(l,3),l-=3),B_(a)}}}function q_(){function t(d){d.canIntercept&&d.info==="react-transition"&&d.intercept({handler:function(){return new Promise(function(v){return h=v})},focusReset:"manual",scroll:"manual"})}function i(){h!==null&&(h(),h=null),l||setTimeout(a,20)}function a(){if(!l&&!navigation.transition){var d=navigation.currentEntry;d&&d.url!=null&&navigation.navigate(d.url,{state:d.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var l=!1,h=null;return navigation.addEventListener("navigate",t),navigation.addEventListener("navigatesuccess",i),navigation.addEventListener("navigateerror",i),setTimeout(a,100),function(){l=!0,navigation.removeEventListener("navigate",t),navigation.removeEventListener("navigatesuccess",i),navigation.removeEventListener("navigateerror",i),h!==null&&(h(),h=null)}}}function _m(t){this._internalRoot=t}rh.prototype.render=_m.prototype.render=function(t){var i=this._internalRoot;if(i===null)throw Error(s(409));var a=i.current,l=kn();M_(a,l,t,i,null,null)},rh.prototype.unmount=_m.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var i=t.containerInfo;M_(t.current,2,null,t,null,null),Uc(),i[wi]=null}};function rh(t){this._internalRoot=t}rh.prototype.unstable_scheduleHydration=function(t){if(t){var i=Uu();t={blockedOn:null,target:t,priority:i};for(var a=0;a<rs.length&&i!==0&&i<rs[a].priority;a++);rs.splice(a,0,t),a===0&&j_(t)}};var H_=e.version;if(H_!=="19.2.3")throw Error(s(527,H_,"19.2.3"));X.findDOMNode=function(t){var i=t._reactInternals;if(i===void 0)throw typeof t.render=="function"?Error(s(188)):(t=Object.keys(t).join(","),Error(s(268,t)));return t=g(i),t=t!==null?E(t):null,t=t===null?null:t.stateNode,t};var nA={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:$,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var sh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!sh.isDisabled&&sh.supportsFiber)try{ii=sh.inject(nA),$t=sh}catch{}}return Bl.createRoot=function(t,i){if(!o(t))throw Error(s(299));var a=!1,l="",h=Xy,d=Wy,v=Jy;return i!=null&&(i.unstable_strictMode===!0&&(a=!0),i.identifierPrefix!==void 0&&(l=i.identifierPrefix),i.onUncaughtError!==void 0&&(h=i.onUncaughtError),i.onCaughtError!==void 0&&(d=i.onCaughtError),i.onRecoverableError!==void 0&&(v=i.onRecoverableError)),i=N_(t,1,!1,null,null,a,l,null,h,d,v,q_),t[wi]=i.current,em(t),new _m(i)},Bl.hydrateRoot=function(t,i,a){if(!o(t))throw Error(s(299));var l=!1,h="",d=Xy,v=Wy,b=Jy,O=null;return a!=null&&(a.unstable_strictMode===!0&&(l=!0),a.identifierPrefix!==void 0&&(h=a.identifierPrefix),a.onUncaughtError!==void 0&&(d=a.onUncaughtError),a.onCaughtError!==void 0&&(v=a.onCaughtError),a.onRecoverableError!==void 0&&(b=a.onRecoverableError),a.formState!==void 0&&(O=a.formState)),i=N_(t,1,!0,i,a??null,l,h,O,d,v,b,q_),i.context=O_(null),a=i.current,l=kn(),l=Os(l),h=Hr(l),h.callback=null,Fr(a,h,l),a=l,i.current.lanes=a,Ds(i,a),Bi(i),t[wi]=i.current,em(t),new rh(i)},Bl.version="19.2.3",Bl}var Z_;function dA(){if(Z_)return bm.exports;Z_=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),bm.exports=fA(),bm.exports}var mA=dA();var e0="popstate";function pA(r={}){function e(s,o){let{pathname:u,search:f,hash:m}=s.location;return Fm("",{pathname:u,search:f,hash:m},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function n(s,o){return typeof o=="string"?o:eu(o)}return yA(e,n,null,r)}function dt(r,e){if(r===!1||r===null||typeof r>"u")throw new Error(e)}function ni(r,e){if(!r){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function gA(){return Math.random().toString(36).substring(2,10)}function t0(r,e){return{usr:r.state,key:r.key,idx:e}}function Fm(r,e,n=null,s){return{pathname:typeof r=="string"?r:r.pathname,search:"",hash:"",...typeof e=="string"?Ro(e):e,state:n,key:e&&e.key||s||gA()}}function eu({pathname:r="/",search:e="",hash:n=""}){return e&&e!=="?"&&(r+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(r+=n.charAt(0)==="#"?n:"#"+n),r}function Ro(r){let e={};if(r){let n=r.indexOf("#");n>=0&&(e.hash=r.substring(n),r=r.substring(0,n));let s=r.indexOf("?");s>=0&&(e.search=r.substring(s),r=r.substring(0,s)),r&&(e.pathname=r)}return e}function yA(r,e,n,s={}){let{window:o=document.defaultView,v5Compat:u=!1}=s,f=o.history,m="POP",p=null,g=E();g==null&&(g=0,f.replaceState({...f.state,idx:g},""));function E(){return(f.state||{idx:null}).idx}function T(){m="POP";let z=E(),W=z==null?null:z-g;g=z,p&&p({action:m,location:G.location,delta:W})}function R(z,W){m="PUSH";let K=Fm(G.location,z,W);g=E()+1;let Z=t0(K,g),se=G.createHref(K);try{f.pushState(Z,"",se)}catch(le){if(le instanceof DOMException&&le.name==="DataCloneError")throw le;o.location.assign(se)}u&&p&&p({action:m,location:G.location,delta:1})}function L(z,W){m="REPLACE";let K=Fm(G.location,z,W);g=E();let Z=t0(K,g),se=G.createHref(K);f.replaceState(Z,"",se),u&&p&&p({action:m,location:G.location,delta:0})}function H(z){return vA(z)}let G={get action(){return m},get location(){return r(o,f)},listen(z){if(p)throw new Error("A history only accepts one active listener");return o.addEventListener(e0,T),p=z,()=>{o.removeEventListener(e0,T),p=null}},createHref(z){return e(o,z)},createURL:H,encodeLocation(z){let W=H(z);return{pathname:W.pathname,search:W.search,hash:W.hash}},push:R,replace:L,go(z){return f.go(z)}};return G}function vA(r,e=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),dt(n,"No window.location.(origin|href) available to create URL");let s=typeof r=="string"?r:eu(r);return s=s.replace(/ $/,"%20"),!e&&s.startsWith("//")&&(s=n+s),new URL(s,n)}function kE(r,e,n="/"){return _A(r,e,n,!1)}function _A(r,e,n,s){let o=typeof e=="string"?Ro(e):e,u=Tr(o.pathname||"/",n);if(u==null)return null;let f=PE(r);EA(f);let m=null;for(let p=0;m==null&&p<f.length;++p){let g=NA(u);m=IA(f[p],g,s)}return m}function PE(r,e=[],n=[],s="",o=!1){let u=(f,m,p=o,g)=>{let E={relativePath:g===void 0?f.path||"":g,caseSensitive:f.caseSensitive===!0,childrenIndex:m,route:f};if(E.relativePath.startsWith("/")){if(!E.relativePath.startsWith(s)&&p)return;dt(E.relativePath.startsWith(s),`Absolute route path "${E.relativePath}" nested under path "${s}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),E.relativePath=E.relativePath.slice(s.length)}let T=Er([s,E.relativePath]),R=n.concat(E);f.children&&f.children.length>0&&(dt(f.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${T}".`),PE(f.children,e,R,T,p)),!(f.path==null&&!f.index)&&e.push({path:T,score:CA(T,f.index),routesMeta:R})};return r.forEach((f,m)=>{if(f.path===""||!f.path?.includes("?"))u(f,m);else for(let p of LE(f.path))u(f,m,!0,p)}),e}function LE(r){let e=r.split("/");if(e.length===0)return[];let[n,...s]=e,o=n.endsWith("?"),u=n.replace(/\?$/,"");if(s.length===0)return o?[u,""]:[u];let f=LE(s.join("/")),m=[];return m.push(...f.map(p=>p===""?u:[u,p].join("/"))),o&&m.push(...f),m.map(p=>r.startsWith("/")&&p===""?"/":p)}function EA(r){r.sort((e,n)=>e.score!==n.score?n.score-e.score:xA(e.routesMeta.map(s=>s.childrenIndex),n.routesMeta.map(s=>s.childrenIndex)))}var TA=/^:[\w-]+$/,bA=3,SA=2,AA=1,wA=10,RA=-2,n0=r=>r==="*";function CA(r,e){let n=r.split("/"),s=n.length;return n.some(n0)&&(s+=RA),e&&(s+=SA),n.filter(o=>!n0(o)).reduce((o,u)=>o+(TA.test(u)?bA:u===""?AA:wA),s)}function xA(r,e){return r.length===e.length&&r.slice(0,-1).every((s,o)=>s===e[o])?r[r.length-1]-e[e.length-1]:0}function IA(r,e,n=!1){let{routesMeta:s}=r,o={},u="/",f=[];for(let m=0;m<s.length;++m){let p=s[m],g=m===s.length-1,E=u==="/"?e:e.slice(u.length)||"/",T=Ch({path:p.relativePath,caseSensitive:p.caseSensitive,end:g},E),R=p.route;if(!T&&g&&n&&!s[s.length-1].route.index&&(T=Ch({path:p.relativePath,caseSensitive:p.caseSensitive,end:!1},E)),!T)return null;Object.assign(o,T.params),f.push({params:o,pathname:Er([u,T.pathname]),pathnameBase:kA(Er([u,T.pathnameBase])),route:R}),T.pathnameBase!=="/"&&(u=Er([u,T.pathnameBase]))}return f}function Ch(r,e){typeof r=="string"&&(r={path:r,caseSensitive:!1,end:!0});let[n,s]=DA(r.path,r.caseSensitive,r.end),o=e.match(n);if(!o)return null;let u=o[0],f=u.replace(/(.)\/+$/,"$1"),m=o.slice(1);return{params:s.reduce((g,{paramName:E,isOptional:T},R)=>{if(E==="*"){let H=m[R]||"";f=u.slice(0,u.length-H.length).replace(/(.)\/+$/,"$1")}const L=m[R];return T&&!L?g[E]=void 0:g[E]=(L||"").replace(/%2F/g,"/"),g},{}),pathname:u,pathnameBase:f,pattern:r}}function DA(r,e=!1,n=!0){ni(r==="*"||!r.endsWith("*")||r.endsWith("/*"),`Route path "${r}" will be treated as if it were "${r.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${r.replace(/\*$/,"/*")}".`);let s=[],o="^"+r.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(f,m,p)=>(s.push({paramName:m,isOptional:p!=null}),p?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return r.endsWith("*")?(s.push({paramName:"*"}),o+=r==="*"||r==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?o+="\\/*$":r!==""&&r!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,e?void 0:"i"),s]}function NA(r){try{return r.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return ni(!1,`The URL path "${r}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),r}}function Tr(r,e){if(e==="/")return r;if(!r.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,s=r.charAt(n);return s&&s!=="/"?null:r.slice(n)||"/"}var UE=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,OA=r=>UE.test(r);function MA(r,e="/"){let{pathname:n,search:s="",hash:o=""}=typeof r=="string"?Ro(r):r,u;if(n)if(OA(n))u=n;else{if(n.includes("//")){let f=n;n=n.replace(/\/\/+/g,"/"),ni(!1,`Pathnames cannot have embedded double slashes - normalizing ${f} -> ${n}`)}n.startsWith("/")?u=i0(n.substring(1),"/"):u=i0(n,e)}else u=e;return{pathname:u,search:PA(s),hash:LA(o)}}function i0(r,e){let n=e.replace(/\/+$/,"").split("/");return r.split("/").forEach(o=>{o===".."?n.length>1&&n.pop():o!=="."&&n.push(o)}),n.length>1?n.join("/"):"/"}function Rm(r,e,n,s){return`Cannot include a '${r}' character in a manually specified \`to.${e}\` field [${JSON.stringify(s)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function VA(r){return r.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function vp(r){let e=VA(r);return e.map((n,s)=>s===e.length-1?n.pathname:n.pathnameBase)}function _p(r,e,n,s=!1){let o;typeof r=="string"?o=Ro(r):(o={...r},dt(!o.pathname||!o.pathname.includes("?"),Rm("?","pathname","search",o)),dt(!o.pathname||!o.pathname.includes("#"),Rm("#","pathname","hash",o)),dt(!o.search||!o.search.includes("#"),Rm("#","search","hash",o)));let u=r===""||o.pathname==="",f=u?"/":o.pathname,m;if(f==null)m=n;else{let T=e.length-1;if(!s&&f.startsWith("..")){let R=f.split("/");for(;R[0]==="..";)R.shift(),T-=1;o.pathname=R.join("/")}m=T>=0?e[T]:"/"}let p=MA(o,m),g=f&&f!=="/"&&f.endsWith("/"),E=(u||f===".")&&n.endsWith("/");return!p.pathname.endsWith("/")&&(g||E)&&(p.pathname+="/"),p}var Er=r=>r.join("/").replace(/\/\/+/g,"/"),kA=r=>r.replace(/\/+$/,"").replace(/^\/*/,"/"),PA=r=>!r||r==="?"?"":r.startsWith("?")?r:"?"+r,LA=r=>!r||r==="#"?"":r.startsWith("#")?r:"#"+r,UA=class{constructor(r,e,n,s=!1){this.status=r,this.statusText=e||"",this.internal=s,n instanceof Error?(this.data=n.toString(),this.error=n):this.data=n}};function jA(r){return r!=null&&typeof r.status=="number"&&typeof r.statusText=="string"&&typeof r.internal=="boolean"&&"data"in r}function zA(r){return r.map(e=>e.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var jE=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function zE(r,e){let n=r;if(typeof n!="string"||!UE.test(n))return{absoluteURL:void 0,isExternal:!1,to:n};let s=n,o=!1;if(jE)try{let u=new URL(window.location.href),f=n.startsWith("//")?new URL(u.protocol+n):new URL(n),m=Tr(f.pathname,e);f.origin===u.origin&&m!=null?n=m+f.search+f.hash:o=!0}catch{ni(!1,`<Link to="${n}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:s,isExternal:o,to:n}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var BE=["POST","PUT","PATCH","DELETE"];new Set(BE);var BA=["GET",...BE];new Set(BA);var Co=V.createContext(null);Co.displayName="DataRouter";var $h=V.createContext(null);$h.displayName="DataRouterState";var qA=V.createContext(!1),qE=V.createContext({isTransitioning:!1});qE.displayName="ViewTransition";var HA=V.createContext(new Map);HA.displayName="Fetchers";var FA=V.createContext(null);FA.displayName="Await";var Bn=V.createContext(null);Bn.displayName="Navigation";var hu=V.createContext(null);hu.displayName="Location";var Ei=V.createContext({outlet:null,matches:[],isDataRoute:!1});Ei.displayName="Route";var Ep=V.createContext(null);Ep.displayName="RouteError";var HE="REACT_ROUTER_ERROR",GA="REDIRECT",QA="ROUTE_ERROR_RESPONSE";function YA(r){if(r.startsWith(`${HE}:${GA}:{`))try{let e=JSON.parse(r.slice(28));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.location=="string"&&typeof e.reloadDocument=="boolean"&&typeof e.replace=="boolean")return e}catch{}}function KA(r){if(r.startsWith(`${HE}:${QA}:{`))try{let e=JSON.parse(r.slice(40));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string")return new UA(e.status,e.statusText,e.data)}catch{}}function $A(r,{relative:e}={}){dt(xo(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:s}=V.useContext(Bn),{hash:o,pathname:u,search:f}=fu(r,{relative:e}),m=u;return n!=="/"&&(m=u==="/"?n:Er([n,u])),s.createHref({pathname:m,search:f,hash:o})}function xo(){return V.useContext(hu)!=null}function As(){return dt(xo(),"useLocation() may be used only in the context of a <Router> component."),V.useContext(hu).location}var FE="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function GE(r){V.useContext(Bn).static||V.useLayoutEffect(r)}function Io(){let{isDataRoute:r}=V.useContext(Ei);return r?uw():XA()}function XA(){dt(xo(),"useNavigate() may be used only in the context of a <Router> component.");let r=V.useContext(Co),{basename:e,navigator:n}=V.useContext(Bn),{matches:s}=V.useContext(Ei),{pathname:o}=As(),u=JSON.stringify(vp(s)),f=V.useRef(!1);return GE(()=>{f.current=!0}),V.useCallback((p,g={})=>{if(ni(f.current,FE),!f.current)return;if(typeof p=="number"){n.go(p);return}let E=_p(p,JSON.parse(u),o,g.relative==="path");r==null&&e!=="/"&&(E.pathname=E.pathname==="/"?e:Er([e,E.pathname])),(g.replace?n.replace:n.push)(E,g.state,g)},[e,n,u,o,r])}V.createContext(null);function WA(){let{matches:r}=V.useContext(Ei),e=r[r.length-1];return e?e.params:{}}function fu(r,{relative:e}={}){let{matches:n}=V.useContext(Ei),{pathname:s}=As(),o=JSON.stringify(vp(n));return V.useMemo(()=>_p(r,JSON.parse(o),s,e==="path"),[r,o,s,e])}function JA(r,e){return QE(r,e)}function QE(r,e,n,s,o){dt(xo(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:u}=V.useContext(Bn),{matches:f}=V.useContext(Ei),m=f[f.length-1],p=m?m.params:{},g=m?m.pathname:"/",E=m?m.pathnameBase:"/",T=m&&m.route;{let K=T&&T.path||"";KE(g,!T||K.endsWith("*")||K.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${g}" (under <Route path="${K}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${K}"> to <Route path="${K==="/"?"*":`${K}/*`}">.`)}let R=As(),L;if(e){let K=typeof e=="string"?Ro(e):e;dt(E==="/"||K.pathname?.startsWith(E),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${E}" but pathname "${K.pathname}" was given in the \`location\` prop.`),L=K}else L=R;let H=L.pathname||"/",G=H;if(E!=="/"){let K=E.replace(/^\//,"").split("/");G="/"+H.replace(/^\//,"").split("/").slice(K.length).join("/")}let z=kE(r,{pathname:G});ni(T||z!=null,`No routes matched location "${L.pathname}${L.search}${L.hash}" `),ni(z==null||z[z.length-1].route.element!==void 0||z[z.length-1].route.Component!==void 0||z[z.length-1].route.lazy!==void 0,`Matched leaf route at location "${L.pathname}${L.search}${L.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let W=iw(z&&z.map(K=>Object.assign({},K,{params:Object.assign({},p,K.params),pathname:Er([E,u.encodeLocation?u.encodeLocation(K.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:K.pathname]),pathnameBase:K.pathnameBase==="/"?E:Er([E,u.encodeLocation?u.encodeLocation(K.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:K.pathnameBase])})),f,n,s,o);return e&&W?V.createElement(hu.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...L},navigationType:"POP"}},W):W}function ZA(){let r=lw(),e=jA(r)?`${r.status} ${r.statusText}`:r instanceof Error?r.message:JSON.stringify(r),n=r instanceof Error?r.stack:null,s="rgba(200,200,200, 0.5)",o={padding:"0.5rem",backgroundColor:s},u={padding:"2px 4px",backgroundColor:s},f=null;return console.error("Error handled by React Router default ErrorBoundary:",r),f=V.createElement(V.Fragment,null,V.createElement("p",null," Hey developer "),V.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",V.createElement("code",{style:u},"ErrorBoundary")," or"," ",V.createElement("code",{style:u},"errorElement")," prop on your route.")),V.createElement(V.Fragment,null,V.createElement("h2",null,"Unexpected Application Error!"),V.createElement("h3",{style:{fontStyle:"italic"}},e),n?V.createElement("pre",{style:o},n):null,f)}var ew=V.createElement(ZA,null),YE=class extends V.Component{constructor(r){super(r),this.state={location:r.location,revalidation:r.revalidation,error:r.error}}static getDerivedStateFromError(r){return{error:r}}static getDerivedStateFromProps(r,e){return e.location!==r.location||e.revalidation!=="idle"&&r.revalidation==="idle"?{error:r.error,location:r.location,revalidation:r.revalidation}:{error:r.error!==void 0?r.error:e.error,location:e.location,revalidation:r.revalidation||e.revalidation}}componentDidCatch(r,e){this.props.onError?this.props.onError(r,e):console.error("React Router caught the following error during render",r)}render(){let r=this.state.error;if(this.context&&typeof r=="object"&&r&&"digest"in r&&typeof r.digest=="string"){const n=KA(r.digest);n&&(r=n)}let e=r!==void 0?V.createElement(Ei.Provider,{value:this.props.routeContext},V.createElement(Ep.Provider,{value:r,children:this.props.component})):this.props.children;return this.context?V.createElement(tw,{error:r},e):e}};YE.contextType=qA;var Cm=new WeakMap;function tw({children:r,error:e}){let{basename:n}=V.useContext(Bn);if(typeof e=="object"&&e&&"digest"in e&&typeof e.digest=="string"){let s=YA(e.digest);if(s){let o=Cm.get(e);if(o)throw o;let u=zE(s.location,n);if(jE&&!Cm.get(e))if(u.isExternal||s.reloadDocument)window.location.href=u.absoluteURL||u.to;else{const f=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(u.to,{replace:s.replace}));throw Cm.set(e,f),f}return V.createElement("meta",{httpEquiv:"refresh",content:`0;url=${u.absoluteURL||u.to}`})}}return r}function nw({routeContext:r,match:e,children:n}){let s=V.useContext(Co);return s&&s.static&&s.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=e.route.id),V.createElement(Ei.Provider,{value:r},n)}function iw(r,e=[],n=null,s=null,o=null){if(r==null){if(!n)return null;if(n.errors)r=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)r=n.matches;else return null}let u=r,f=n?.errors;if(f!=null){let E=u.findIndex(T=>T.route.id&&f?.[T.route.id]!==void 0);dt(E>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(f).join(",")}`),u=u.slice(0,Math.min(u.length,E+1))}let m=!1,p=-1;if(n)for(let E=0;E<u.length;E++){let T=u[E];if((T.route.HydrateFallback||T.route.hydrateFallbackElement)&&(p=E),T.route.id){let{loaderData:R,errors:L}=n,H=T.route.loader&&!R.hasOwnProperty(T.route.id)&&(!L||L[T.route.id]===void 0);if(T.route.lazy||H){m=!0,p>=0?u=u.slice(0,p+1):u=[u[0]];break}}}let g=n&&s?(E,T)=>{s(E,{location:n.location,params:n.matches?.[0]?.params??{},unstable_pattern:zA(n.matches),errorInfo:T})}:void 0;return u.reduceRight((E,T,R)=>{let L,H=!1,G=null,z=null;n&&(L=f&&T.route.id?f[T.route.id]:void 0,G=T.route.errorElement||ew,m&&(p<0&&R===0?(KE("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),H=!0,z=null):p===R&&(H=!0,z=T.route.hydrateFallbackElement||null)));let W=e.concat(u.slice(0,R+1)),K=()=>{let Z;return L?Z=G:H?Z=z:T.route.Component?Z=V.createElement(T.route.Component,null):T.route.element?Z=T.route.element:Z=E,V.createElement(nw,{match:T,routeContext:{outlet:E,matches:W,isDataRoute:n!=null},children:Z})};return n&&(T.route.ErrorBoundary||T.route.errorElement||R===0)?V.createElement(YE,{location:n.location,revalidation:n.revalidation,component:G,error:L,children:K(),routeContext:{outlet:null,matches:W,isDataRoute:!0},onError:g}):K()},null)}function Tp(r){return`${r} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function rw(r){let e=V.useContext(Co);return dt(e,Tp(r)),e}function sw(r){let e=V.useContext($h);return dt(e,Tp(r)),e}function aw(r){let e=V.useContext(Ei);return dt(e,Tp(r)),e}function bp(r){let e=aw(r),n=e.matches[e.matches.length-1];return dt(n.route.id,`${r} can only be used on routes that contain a unique "id"`),n.route.id}function ow(){return bp("useRouteId")}function lw(){let r=V.useContext(Ep),e=sw("useRouteError"),n=bp("useRouteError");return r!==void 0?r:e.errors?.[n]}function uw(){let{router:r}=rw("useNavigate"),e=bp("useNavigate"),n=V.useRef(!1);return GE(()=>{n.current=!0}),V.useCallback(async(o,u={})=>{ni(n.current,FE),n.current&&(typeof o=="number"?await r.navigate(o):await r.navigate(o,{fromRouteId:e,...u}))},[r,e])}var r0={};function KE(r,e,n){!e&&!r0[r]&&(r0[r]=!0,ni(!1,n))}V.memo(cw);function cw({routes:r,future:e,state:n,onError:s}){return QE(r,void 0,n,s,e)}function hw({to:r,replace:e,state:n,relative:s}){dt(xo(),"<Navigate> may be used only in the context of a <Router> component.");let{static:o}=V.useContext(Bn);ni(!o,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:u}=V.useContext(Ei),{pathname:f}=As(),m=Io(),p=_p(r,vp(u),f,s==="path"),g=JSON.stringify(p);return V.useEffect(()=>{m(JSON.parse(g),{replace:e,state:n,relative:s})},[m,g,s,e,n]),null}function so(r){dt(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function fw({basename:r="/",children:e=null,location:n,navigationType:s="POP",navigator:o,static:u=!1,unstable_useTransitions:f}){dt(!xo(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let m=r.replace(/^\/*/,"/"),p=V.useMemo(()=>({basename:m,navigator:o,static:u,unstable_useTransitions:f,future:{}}),[m,o,u,f]);typeof n=="string"&&(n=Ro(n));let{pathname:g="/",search:E="",hash:T="",state:R=null,key:L="default"}=n,H=V.useMemo(()=>{let G=Tr(g,m);return G==null?null:{location:{pathname:G,search:E,hash:T,state:R,key:L},navigationType:s}},[m,g,E,T,R,L,s]);return ni(H!=null,`<Router basename="${m}"> is not able to match the URL "${g}${E}${T}" because it does not start with the basename, so the <Router> won't render anything.`),H==null?null:V.createElement(Bn.Provider,{value:p},V.createElement(hu.Provider,{children:e,value:H}))}function dw({children:r,location:e}){return JA(Gm(r),e)}function Gm(r,e=[]){let n=[];return V.Children.forEach(r,(s,o)=>{if(!V.isValidElement(s))return;let u=[...e,o];if(s.type===V.Fragment){n.push.apply(n,Gm(s.props.children,u));return}dt(s.type===so,`[${typeof s.type=="string"?s.type:s.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),dt(!s.props.index||!s.props.children,"An index route cannot have child routes.");let f={id:s.props.id||u.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,middleware:s.props.middleware,loader:s.props.loader,action:s.props.action,hydrateFallbackElement:s.props.hydrateFallbackElement,HydrateFallback:s.props.HydrateFallback,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.hasErrorBoundary===!0||s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(f.children=Gm(s.props.children,u)),n.push(f)}),n}var mh="get",ph="application/x-www-form-urlencoded";function Xh(r){return typeof HTMLElement<"u"&&r instanceof HTMLElement}function mw(r){return Xh(r)&&r.tagName.toLowerCase()==="button"}function pw(r){return Xh(r)&&r.tagName.toLowerCase()==="form"}function gw(r){return Xh(r)&&r.tagName.toLowerCase()==="input"}function yw(r){return!!(r.metaKey||r.altKey||r.ctrlKey||r.shiftKey)}function vw(r,e){return r.button===0&&(!e||e==="_self")&&!yw(r)}var ah=null;function _w(){if(ah===null)try{new FormData(document.createElement("form"),0),ah=!1}catch{ah=!0}return ah}var Ew=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function xm(r){return r!=null&&!Ew.has(r)?(ni(!1,`"${r}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${ph}"`),null):r}function Tw(r,e){let n,s,o,u,f;if(pw(r)){let m=r.getAttribute("action");s=m?Tr(m,e):null,n=r.getAttribute("method")||mh,o=xm(r.getAttribute("enctype"))||ph,u=new FormData(r)}else if(mw(r)||gw(r)&&(r.type==="submit"||r.type==="image")){let m=r.form;if(m==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let p=r.getAttribute("formaction")||m.getAttribute("action");if(s=p?Tr(p,e):null,n=r.getAttribute("formmethod")||m.getAttribute("method")||mh,o=xm(r.getAttribute("formenctype"))||xm(m.getAttribute("enctype"))||ph,u=new FormData(m,r),!_w()){let{name:g,type:E,value:T}=r;if(E==="image"){let R=g?`${g}.`:"";u.append(`${R}x`,"0"),u.append(`${R}y`,"0")}else g&&u.append(g,T)}}else{if(Xh(r))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=mh,s=null,o=ph,f=r}return u&&o==="text/plain"&&(f=u,u=void 0),{action:s,method:n.toLowerCase(),encType:o,formData:u,body:f}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Sp(r,e){if(r===!1||r===null||typeof r>"u")throw new Error(e)}function bw(r,e,n){let s=typeof r=="string"?new URL(r,typeof window>"u"?"server://singlefetch/":window.location.origin):r;return s.pathname==="/"?s.pathname=`_root.${n}`:e&&Tr(s.pathname,e)==="/"?s.pathname=`${e.replace(/\/$/,"")}/_root.${n}`:s.pathname=`${s.pathname.replace(/\/$/,"")}.${n}`,s}async function Sw(r,e){if(r.id in e)return e[r.id];try{let n=await import(r.module);return e[r.id]=n,n}catch(n){return console.error(`Error loading route module \`${r.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function Aw(r){return r==null?!1:r.href==null?r.rel==="preload"&&typeof r.imageSrcSet=="string"&&typeof r.imageSizes=="string":typeof r.rel=="string"&&typeof r.href=="string"}async function ww(r,e,n){let s=await Promise.all(r.map(async o=>{let u=e.routes[o.route.id];if(u){let f=await Sw(u,n);return f.links?f.links():[]}return[]}));return Iw(s.flat(1).filter(Aw).filter(o=>o.rel==="stylesheet"||o.rel==="preload").map(o=>o.rel==="stylesheet"?{...o,rel:"prefetch",as:"style"}:{...o,rel:"prefetch"}))}function s0(r,e,n,s,o,u){let f=(p,g)=>n[g]?p.route.id!==n[g].route.id:!0,m=(p,g)=>n[g].pathname!==p.pathname||n[g].route.path?.endsWith("*")&&n[g].params["*"]!==p.params["*"];return u==="assets"?e.filter((p,g)=>f(p,g)||m(p,g)):u==="data"?e.filter((p,g)=>{let E=s.routes[p.route.id];if(!E||!E.hasLoader)return!1;if(f(p,g)||m(p,g))return!0;if(p.route.shouldRevalidate){let T=p.route.shouldRevalidate({currentUrl:new URL(o.pathname+o.search+o.hash,window.origin),currentParams:n[0]?.params||{},nextUrl:new URL(r,window.origin),nextParams:p.params,defaultShouldRevalidate:!0});if(typeof T=="boolean")return T}return!0}):[]}function Rw(r,e,{includeHydrateFallback:n}={}){return Cw(r.map(s=>{let o=e.routes[s.route.id];if(!o)return[];let u=[o.module];return o.clientActionModule&&(u=u.concat(o.clientActionModule)),o.clientLoaderModule&&(u=u.concat(o.clientLoaderModule)),n&&o.hydrateFallbackModule&&(u=u.concat(o.hydrateFallbackModule)),o.imports&&(u=u.concat(o.imports)),u}).flat(1))}function Cw(r){return[...new Set(r)]}function xw(r){let e={},n=Object.keys(r).sort();for(let s of n)e[s]=r[s];return e}function Iw(r,e){let n=new Set;return new Set(e),r.reduce((s,o)=>{let u=JSON.stringify(xw(o));return n.has(u)||(n.add(u),s.push({key:u,link:o})),s},[])}function $E(){let r=V.useContext(Co);return Sp(r,"You must render this element inside a <DataRouterContext.Provider> element"),r}function Dw(){let r=V.useContext($h);return Sp(r,"You must render this element inside a <DataRouterStateContext.Provider> element"),r}var Ap=V.createContext(void 0);Ap.displayName="FrameworkContext";function XE(){let r=V.useContext(Ap);return Sp(r,"You must render this element inside a <HydratedRouter> element"),r}function Nw(r,e){let n=V.useContext(Ap),[s,o]=V.useState(!1),[u,f]=V.useState(!1),{onFocus:m,onBlur:p,onMouseEnter:g,onMouseLeave:E,onTouchStart:T}=e,R=V.useRef(null);V.useEffect(()=>{if(r==="render"&&f(!0),r==="viewport"){let G=W=>{W.forEach(K=>{f(K.isIntersecting)})},z=new IntersectionObserver(G,{threshold:.5});return R.current&&z.observe(R.current),()=>{z.disconnect()}}},[r]),V.useEffect(()=>{if(s){let G=setTimeout(()=>{f(!0)},100);return()=>{clearTimeout(G)}}},[s]);let L=()=>{o(!0)},H=()=>{o(!1),f(!1)};return n?r!=="intent"?[u,R,{}]:[u,R,{onFocus:ql(m,L),onBlur:ql(p,H),onMouseEnter:ql(g,L),onMouseLeave:ql(E,H),onTouchStart:ql(T,L)}]:[!1,R,{}]}function ql(r,e){return n=>{r&&r(n),n.defaultPrevented||e(n)}}function Ow({page:r,...e}){let{router:n}=$E(),s=V.useMemo(()=>kE(n.routes,r,n.basename),[n.routes,r,n.basename]);return s?V.createElement(Vw,{page:r,matches:s,...e}):null}function Mw(r){let{manifest:e,routeModules:n}=XE(),[s,o]=V.useState([]);return V.useEffect(()=>{let u=!1;return ww(r,e,n).then(f=>{u||o(f)}),()=>{u=!0}},[r,e,n]),s}function Vw({page:r,matches:e,...n}){let s=As(),{manifest:o,routeModules:u}=XE(),{basename:f}=$E(),{loaderData:m,matches:p}=Dw(),g=V.useMemo(()=>s0(r,e,p,o,s,"data"),[r,e,p,o,s]),E=V.useMemo(()=>s0(r,e,p,o,s,"assets"),[r,e,p,o,s]),T=V.useMemo(()=>{if(r===s.pathname+s.search+s.hash)return[];let H=new Set,G=!1;if(e.forEach(W=>{let K=o.routes[W.route.id];!K||!K.hasLoader||(!g.some(Z=>Z.route.id===W.route.id)&&W.route.id in m&&u[W.route.id]?.shouldRevalidate||K.hasClientLoader?G=!0:H.add(W.route.id))}),H.size===0)return[];let z=bw(r,f,"data");return G&&H.size>0&&z.searchParams.set("_routes",e.filter(W=>H.has(W.route.id)).map(W=>W.route.id).join(",")),[z.pathname+z.search]},[f,m,s,o,g,e,r,u]),R=V.useMemo(()=>Rw(E,o),[E,o]),L=Mw(E);return V.createElement(V.Fragment,null,T.map(H=>V.createElement("link",{key:H,rel:"prefetch",as:"fetch",href:H,...n})),R.map(H=>V.createElement("link",{key:H,rel:"modulepreload",href:H,...n})),L.map(({key:H,link:G})=>V.createElement("link",{key:H,nonce:n.nonce,...G})))}function kw(...r){return e=>{r.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var Pw=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{Pw&&(window.__reactRouterVersion="7.11.0")}catch{}function Lw({basename:r,children:e,unstable_useTransitions:n,window:s}){let o=V.useRef();o.current==null&&(o.current=pA({window:s,v5Compat:!0}));let u=o.current,[f,m]=V.useState({action:u.action,location:u.location}),p=V.useCallback(g=>{n===!1?m(g):V.startTransition(()=>m(g))},[n]);return V.useLayoutEffect(()=>u.listen(p),[u,p]),V.createElement(fw,{basename:r,children:e,location:f.location,navigationType:f.action,navigator:u,unstable_useTransitions:n})}var WE=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,JE=V.forwardRef(function({onClick:e,discover:n="render",prefetch:s="none",relative:o,reloadDocument:u,replace:f,state:m,target:p,to:g,preventScrollReset:E,viewTransition:T,unstable_defaultShouldRevalidate:R,...L},H){let{basename:G,unstable_useTransitions:z}=V.useContext(Bn),W=typeof g=="string"&&WE.test(g),K=zE(g,G);g=K.to;let Z=$A(g,{relative:o}),[se,le,pe]=Nw(s,L),D=Bw(g,{replace:f,state:m,target:p,preventScrollReset:E,relative:o,viewTransition:T,unstable_defaultShouldRevalidate:R,unstable_useTransitions:z});function x(N){e&&e(N),N.defaultPrevented||D(N)}let A=V.createElement("a",{...L,...pe,href:K.absoluteURL||Z,onClick:K.isExternal||u?e:x,ref:kw(H,le),target:p,"data-discover":!W&&n==="render"?"true":void 0});return se&&!W?V.createElement(V.Fragment,null,A,V.createElement(Ow,{page:Z})):A});JE.displayName="Link";var Uw=V.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:s="",end:o=!1,style:u,to:f,viewTransition:m,children:p,...g},E){let T=fu(f,{relative:g.relative}),R=As(),L=V.useContext($h),{navigator:H,basename:G}=V.useContext(Bn),z=L!=null&&Qw(T)&&m===!0,W=H.encodeLocation?H.encodeLocation(T).pathname:T.pathname,K=R.pathname,Z=L&&L.navigation&&L.navigation.location?L.navigation.location.pathname:null;n||(K=K.toLowerCase(),Z=Z?Z.toLowerCase():null,W=W.toLowerCase()),Z&&G&&(Z=Tr(Z,G)||Z);const se=W!=="/"&&W.endsWith("/")?W.length-1:W.length;let le=K===W||!o&&K.startsWith(W)&&K.charAt(se)==="/",pe=Z!=null&&(Z===W||!o&&Z.startsWith(W)&&Z.charAt(W.length)==="/"),D={isActive:le,isPending:pe,isTransitioning:z},x=le?e:void 0,A;typeof s=="function"?A=s(D):A=[s,le?"active":null,pe?"pending":null,z?"transitioning":null].filter(Boolean).join(" ");let N=typeof u=="function"?u(D):u;return V.createElement(JE,{...g,"aria-current":x,className:A,ref:E,style:N,to:f,viewTransition:m},typeof p=="function"?p(D):p)});Uw.displayName="NavLink";var jw=V.forwardRef(({discover:r="render",fetcherKey:e,navigate:n,reloadDocument:s,replace:o,state:u,method:f=mh,action:m,onSubmit:p,relative:g,preventScrollReset:E,viewTransition:T,unstable_defaultShouldRevalidate:R,...L},H)=>{let{unstable_useTransitions:G}=V.useContext(Bn),z=Fw(),W=Gw(m,{relative:g}),K=f.toLowerCase()==="get"?"get":"post",Z=typeof m=="string"&&WE.test(m),se=le=>{if(p&&p(le),le.defaultPrevented)return;le.preventDefault();let pe=le.nativeEvent.submitter,D=pe?.getAttribute("formmethod")||f,x=()=>z(pe||le.currentTarget,{fetcherKey:e,method:D,navigate:n,replace:o,state:u,relative:g,preventScrollReset:E,viewTransition:T,unstable_defaultShouldRevalidate:R});G&&n!==!1?V.startTransition(()=>x()):x()};return V.createElement("form",{ref:H,method:K,action:W,onSubmit:s?p:se,...L,"data-discover":!Z&&r==="render"?"true":void 0})});jw.displayName="Form";function zw(r){return`${r} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function ZE(r){let e=V.useContext(Co);return dt(e,zw(r)),e}function Bw(r,{target:e,replace:n,state:s,preventScrollReset:o,relative:u,viewTransition:f,unstable_defaultShouldRevalidate:m,unstable_useTransitions:p}={}){let g=Io(),E=As(),T=fu(r,{relative:u});return V.useCallback(R=>{if(vw(R,e)){R.preventDefault();let L=n!==void 0?n:eu(E)===eu(T),H=()=>g(r,{replace:L,state:s,preventScrollReset:o,relative:u,viewTransition:f,unstable_defaultShouldRevalidate:m});p?V.startTransition(()=>H()):H()}},[E,g,T,n,s,e,r,o,u,f,m,p])}var qw=0,Hw=()=>`__${String(++qw)}__`;function Fw(){let{router:r}=ZE("useSubmit"),{basename:e}=V.useContext(Bn),n=ow(),s=r.fetch,o=r.navigate;return V.useCallback(async(u,f={})=>{let{action:m,method:p,encType:g,formData:E,body:T}=Tw(u,e);if(f.navigate===!1){let R=f.fetcherKey||Hw();await s(R,n,f.action||m,{unstable_defaultShouldRevalidate:f.unstable_defaultShouldRevalidate,preventScrollReset:f.preventScrollReset,formData:E,body:T,formMethod:f.method||p,formEncType:f.encType||g,flushSync:f.flushSync})}else await o(f.action||m,{unstable_defaultShouldRevalidate:f.unstable_defaultShouldRevalidate,preventScrollReset:f.preventScrollReset,formData:E,body:T,formMethod:f.method||p,formEncType:f.encType||g,replace:f.replace,state:f.state,fromRouteId:n,flushSync:f.flushSync,viewTransition:f.viewTransition})},[s,o,e,n])}function Gw(r,{relative:e}={}){let{basename:n}=V.useContext(Bn),s=V.useContext(Ei);dt(s,"useFormAction must be used inside a RouteContext");let[o]=s.matches.slice(-1),u={...fu(r||".",{relative:e})},f=As();if(r==null){u.search=f.search;let m=new URLSearchParams(u.search),p=m.getAll("index");if(p.some(E=>E==="")){m.delete("index"),p.filter(T=>T).forEach(T=>m.append("index",T));let E=m.toString();u.search=E?`?${E}`:""}}return(!r||r===".")&&o.route.index&&(u.search=u.search?u.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(u.pathname=u.pathname==="/"?n:Er([n,u.pathname])),eu(u)}function Qw(r,{relative:e}={}){let n=V.useContext(qE);dt(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:s}=ZE("useViewTransitionState"),o=fu(r,{relative:e});if(!n.isTransitioning)return!1;let u=Tr(n.currentLocation.pathname,s)||n.currentLocation.pathname,f=Tr(n.nextLocation.pathname,s)||n.nextLocation.pathname;return Ch(o.pathname,f)!=null||Ch(o.pathname,u)!=null}const Yw=()=>{};var a0={};const eT=function(r){const e=[];let n=0;for(let s=0;s<r.length;s++){let o=r.charCodeAt(s);o<128?e[n++]=o:o<2048?(e[n++]=o>>6|192,e[n++]=o&63|128):(o&64512)===55296&&s+1<r.length&&(r.charCodeAt(s+1)&64512)===56320?(o=65536+((o&1023)<<10)+(r.charCodeAt(++s)&1023),e[n++]=o>>18|240,e[n++]=o>>12&63|128,e[n++]=o>>6&63|128,e[n++]=o&63|128):(e[n++]=o>>12|224,e[n++]=o>>6&63|128,e[n++]=o&63|128)}return e},Kw=function(r){const e=[];let n=0,s=0;for(;n<r.length;){const o=r[n++];if(o<128)e[s++]=String.fromCharCode(o);else if(o>191&&o<224){const u=r[n++];e[s++]=String.fromCharCode((o&31)<<6|u&63)}else if(o>239&&o<365){const u=r[n++],f=r[n++],m=r[n++],p=((o&7)<<18|(u&63)<<12|(f&63)<<6|m&63)-65536;e[s++]=String.fromCharCode(55296+(p>>10)),e[s++]=String.fromCharCode(56320+(p&1023))}else{const u=r[n++],f=r[n++];e[s++]=String.fromCharCode((o&15)<<12|(u&63)<<6|f&63)}}return e.join("")},tT={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(r,e){if(!Array.isArray(r))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let o=0;o<r.length;o+=3){const u=r[o],f=o+1<r.length,m=f?r[o+1]:0,p=o+2<r.length,g=p?r[o+2]:0,E=u>>2,T=(u&3)<<4|m>>4;let R=(m&15)<<2|g>>6,L=g&63;p||(L=64,f||(R=64)),s.push(n[E],n[T],n[R],n[L])}return s.join("")},encodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(r):this.encodeByteArray(eT(r),e)},decodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(r):Kw(this.decodeStringToByteArray(r,e))},decodeStringToByteArray(r,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let o=0;o<r.length;){const u=n[r.charAt(o++)],m=o<r.length?n[r.charAt(o)]:0;++o;const g=o<r.length?n[r.charAt(o)]:64;++o;const T=o<r.length?n[r.charAt(o)]:64;if(++o,u==null||m==null||g==null||T==null)throw new $w;const R=u<<2|m>>4;if(s.push(R),g!==64){const L=m<<4&240|g>>2;if(s.push(L),T!==64){const H=g<<6&192|T;s.push(H)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let r=0;r<this.ENCODED_VALS.length;r++)this.byteToCharMap_[r]=this.ENCODED_VALS.charAt(r),this.charToByteMap_[this.byteToCharMap_[r]]=r,this.byteToCharMapWebSafe_[r]=this.ENCODED_VALS_WEBSAFE.charAt(r),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[r]]=r,r>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(r)]=r,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(r)]=r)}}};class $w extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Xw=function(r){const e=eT(r);return tT.encodeByteArray(e,!0)},xh=function(r){return Xw(r).replace(/\./g,"")},nT=function(r){try{return tT.decodeString(r,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function Ww(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const Jw=()=>Ww().__FIREBASE_DEFAULTS__,Zw=()=>{if(typeof process>"u"||typeof a0>"u")return;const r=a0.__FIREBASE_DEFAULTS__;if(r)return JSON.parse(r)},eR=()=>{if(typeof document>"u")return;let r;try{r=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=r&&nT(r[1]);return e&&JSON.parse(e)},Wh=()=>{try{return Yw()||Jw()||Zw()||eR()}catch(r){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${r}`);return}},iT=r=>Wh()?.emulatorHosts?.[r],tR=r=>{const e=iT(r);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),s]:[e.substring(0,n),s]},rT=()=>Wh()?.config,sT=r=>Wh()?.[`_${r}`];class nR{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,s)=>{n?this.reject(n):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,s))}}}function Do(r){try{return(r.startsWith("http://")||r.startsWith("https://")?new URL(r).hostname:r).endsWith(".cloudworkstations.dev")}catch{return!1}}async function aT(r){return(await fetch(r,{credentials:"include"})).ok}function iR(r,e){if(r.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},s=e||"demo-project",o=r.iat||0,u=r.sub||r.user_id;if(!u)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const f={iss:`https://securetoken.google.com/${s}`,aud:s,iat:o,exp:o+3600,auth_time:o,sub:u,user_id:u,firebase:{sign_in_provider:"custom",identities:{}},...r};return[xh(JSON.stringify(n)),xh(JSON.stringify(f)),""].join(".")}const Yl={};function rR(){const r={prod:[],emulator:[]};for(const e of Object.keys(Yl))Yl[e]?r.emulator.push(e):r.prod.push(e);return r}function sR(r){let e=document.getElementById(r),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",r),n=!0),{created:n,element:e}}let o0=!1;function oT(r,e){if(typeof window>"u"||typeof document>"u"||!Do(window.location.host)||Yl[r]===e||Yl[r]||o0)return;Yl[r]=e;function n(R){return`__firebase__banner__${R}`}const s="__firebase__banner",u=rR().prod.length>0;function f(){const R=document.getElementById(s);R&&R.remove()}function m(R){R.style.display="flex",R.style.background="#7faaf0",R.style.position="fixed",R.style.bottom="5px",R.style.left="5px",R.style.padding=".5em",R.style.borderRadius="5px",R.style.alignItems="center"}function p(R,L){R.setAttribute("width","24"),R.setAttribute("id",L),R.setAttribute("height","24"),R.setAttribute("viewBox","0 0 24 24"),R.setAttribute("fill","none"),R.style.marginLeft="-6px"}function g(){const R=document.createElement("span");return R.style.cursor="pointer",R.style.marginLeft="16px",R.style.fontSize="24px",R.innerHTML=" &times;",R.onclick=()=>{o0=!0,f()},R}function E(R,L){R.setAttribute("id",L),R.innerText="Learn more",R.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",R.setAttribute("target","__blank"),R.style.paddingLeft="5px",R.style.textDecoration="underline"}function T(){const R=sR(s),L=n("text"),H=document.getElementById(L)||document.createElement("span"),G=n("learnmore"),z=document.getElementById(G)||document.createElement("a"),W=n("preprendIcon"),K=document.getElementById(W)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(R.created){const Z=R.element;m(Z),E(z,G);const se=g();p(K,W),Z.append(K,H,z,se),document.body.appendChild(Z)}u?(H.innerText="Preview backend disconnected.",K.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(K.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,H.innerText="Preview backend running in this workspace."),H.setAttribute("id",L)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",T):T()}function cn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function aR(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(cn())}function oR(){const r=Wh()?.forceEnvironment;if(r==="node")return!0;if(r==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function lR(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function uR(){const r=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof r=="object"&&r.id!==void 0}function cR(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function hR(){const r=cn();return r.indexOf("MSIE ")>=0||r.indexOf("Trident/")>=0}function fR(){return!oR()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function dR(){try{return typeof indexedDB=="object"}catch{return!1}}function mR(){return new Promise((r,e)=>{try{let n=!0;const s="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(s);o.onsuccess=()=>{o.result.close(),n||self.indexedDB.deleteDatabase(s),r(!0)},o.onupgradeneeded=()=>{n=!1},o.onerror=()=>{e(o.error?.message||"")}}catch(n){e(n)}})}const pR="FirebaseError";class Rr extends Error{constructor(e,n,s){super(n),this.code=e,this.customData=s,this.name=pR,Object.setPrototypeOf(this,Rr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,du.prototype.create)}}class du{constructor(e,n,s){this.service=e,this.serviceName=n,this.errors=s}create(e,...n){const s=n[0]||{},o=`${this.service}/${e}`,u=this.errors[e],f=u?gR(u,s):"Error",m=`${this.serviceName}: ${f} (${o}).`;return new Rr(o,m,s)}}function gR(r,e){return r.replace(yR,(n,s)=>{const o=e[s];return o!=null?String(o):`<${s}?>`})}const yR=/\{\$([^}]+)}/g;function vR(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}function ua(r,e){if(r===e)return!0;const n=Object.keys(r),s=Object.keys(e);for(const o of n){if(!s.includes(o))return!1;const u=r[o],f=e[o];if(l0(u)&&l0(f)){if(!ua(u,f))return!1}else if(u!==f)return!1}for(const o of s)if(!n.includes(o))return!1;return!0}function l0(r){return r!==null&&typeof r=="object"}function mu(r){const e=[];for(const[n,s]of Object.entries(r))Array.isArray(s)?s.forEach(o=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}function _R(r,e){const n=new ER(r,e);return n.subscribe.bind(n)}class ER{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(s=>{this.error(s)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,s){let o;if(e===void 0&&n===void 0&&s===void 0)throw new Error("Missing Observer.");TR(e,["next","error","complete"])?o=e:o={next:e,error:n,complete:s},o.next===void 0&&(o.next=Im),o.error===void 0&&(o.error=Im),o.complete===void 0&&(o.complete=Im);const u=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),u}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function TR(r,e){if(typeof r!="object"||r===null)return!1;for(const n of e)if(n in r&&typeof r[n]=="function")return!0;return!1}function Im(){}function jt(r){return r&&r._delegate?r._delegate:r}class ca{constructor(e,n,s){this.name=e,this.instanceFactory=n,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const ia="[DEFAULT]";class bR{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const s=new nR;if(this.instancesDeferred.set(n,s),this.isInitialized(n)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:n});o&&s.resolve(o)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e?.identifier),s=e?.optional??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(o){if(s)return null;throw o}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(AR(e))try{this.getOrInitializeService({instanceIdentifier:ia})}catch{}for(const[n,s]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(n);try{const u=this.getOrInitializeService({instanceIdentifier:o});s.resolve(u)}catch{}}}}clearInstance(e=ia){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ia){return this.instances.has(e)}getOptions(e=ia){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:s,options:n});for(const[u,f]of this.instancesDeferred.entries()){const m=this.normalizeInstanceIdentifier(u);s===m&&f.resolve(o)}return o}onInit(e,n){const s=this.normalizeInstanceIdentifier(n),o=this.onInitCallbacks.get(s)??new Set;o.add(e),this.onInitCallbacks.set(s,o);const u=this.instances.get(s);return u&&e(u,s),()=>{o.delete(e)}}invokeOnInitCallbacks(e,n){const s=this.onInitCallbacks.get(n);if(s)for(const o of s)try{o(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:SR(e),options:n}),this.instances.set(e,s),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=ia){return this.component?this.component.multipleInstances?e:ia:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function SR(r){return r===ia?void 0:r}function AR(r){return r.instantiationMode==="EAGER"}class wR{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new bR(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}var je;(function(r){r[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT"})(je||(je={}));const RR={debug:je.DEBUG,verbose:je.VERBOSE,info:je.INFO,warn:je.WARN,error:je.ERROR,silent:je.SILENT},CR=je.INFO,xR={[je.DEBUG]:"log",[je.VERBOSE]:"log",[je.INFO]:"info",[je.WARN]:"warn",[je.ERROR]:"error"},IR=(r,e,...n)=>{if(e<r.logLevel)return;const s=new Date().toISOString(),o=xR[e];if(o)console[o](`[${s}]  ${r.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class wp{constructor(e){this.name=e,this._logLevel=CR,this._logHandler=IR,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in je))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?RR[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,je.DEBUG,...e),this._logHandler(this,je.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,je.VERBOSE,...e),this._logHandler(this,je.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,je.INFO,...e),this._logHandler(this,je.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,je.WARN,...e),this._logHandler(this,je.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,je.ERROR,...e),this._logHandler(this,je.ERROR,...e)}}const DR=(r,e)=>e.some(n=>r instanceof n);let u0,c0;function NR(){return u0||(u0=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function OR(){return c0||(c0=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const lT=new WeakMap,Qm=new WeakMap,uT=new WeakMap,Dm=new WeakMap,Rp=new WeakMap;function MR(r){const e=new Promise((n,s)=>{const o=()=>{r.removeEventListener("success",u),r.removeEventListener("error",f)},u=()=>{n(hs(r.result)),o()},f=()=>{s(r.error),o()};r.addEventListener("success",u),r.addEventListener("error",f)});return e.then(n=>{n instanceof IDBCursor&&lT.set(n,r)}).catch(()=>{}),Rp.set(e,r),e}function VR(r){if(Qm.has(r))return;const e=new Promise((n,s)=>{const o=()=>{r.removeEventListener("complete",u),r.removeEventListener("error",f),r.removeEventListener("abort",f)},u=()=>{n(),o()},f=()=>{s(r.error||new DOMException("AbortError","AbortError")),o()};r.addEventListener("complete",u),r.addEventListener("error",f),r.addEventListener("abort",f)});Qm.set(r,e)}let Ym={get(r,e,n){if(r instanceof IDBTransaction){if(e==="done")return Qm.get(r);if(e==="objectStoreNames")return r.objectStoreNames||uT.get(r);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return hs(r[e])},set(r,e,n){return r[e]=n,!0},has(r,e){return r instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in r}};function kR(r){Ym=r(Ym)}function PR(r){return r===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const s=r.call(Nm(this),e,...n);return uT.set(s,e.sort?e.sort():[e]),hs(s)}:OR().includes(r)?function(...e){return r.apply(Nm(this),e),hs(lT.get(this))}:function(...e){return hs(r.apply(Nm(this),e))}}function LR(r){return typeof r=="function"?PR(r):(r instanceof IDBTransaction&&VR(r),DR(r,NR())?new Proxy(r,Ym):r)}function hs(r){if(r instanceof IDBRequest)return MR(r);if(Dm.has(r))return Dm.get(r);const e=LR(r);return e!==r&&(Dm.set(r,e),Rp.set(e,r)),e}const Nm=r=>Rp.get(r);function UR(r,e,{blocked:n,upgrade:s,blocking:o,terminated:u}={}){const f=indexedDB.open(r,e),m=hs(f);return s&&f.addEventListener("upgradeneeded",p=>{s(hs(f.result),p.oldVersion,p.newVersion,hs(f.transaction),p)}),n&&f.addEventListener("blocked",p=>n(p.oldVersion,p.newVersion,p)),m.then(p=>{u&&p.addEventListener("close",()=>u()),o&&p.addEventListener("versionchange",g=>o(g.oldVersion,g.newVersion,g))}).catch(()=>{}),m}const jR=["get","getKey","getAll","getAllKeys","count"],zR=["put","add","delete","clear"],Om=new Map;function h0(r,e){if(!(r instanceof IDBDatabase&&!(e in r)&&typeof e=="string"))return;if(Om.get(e))return Om.get(e);const n=e.replace(/FromIndex$/,""),s=e!==n,o=zR.includes(n);if(!(n in(s?IDBIndex:IDBObjectStore).prototype)||!(o||jR.includes(n)))return;const u=async function(f,...m){const p=this.transaction(f,o?"readwrite":"readonly");let g=p.store;return s&&(g=g.index(m.shift())),(await Promise.all([g[n](...m),o&&p.done]))[0]};return Om.set(e,u),u}kR(r=>({...r,get:(e,n,s)=>h0(e,n)||r.get(e,n,s),has:(e,n)=>!!h0(e,n)||r.has(e,n)}));class BR{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(qR(n)){const s=n.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(n=>n).join(" ")}}function qR(r){return r.getComponent()?.type==="VERSION"}const Km="@firebase/app",f0="0.14.6";const br=new wp("@firebase/app"),HR="@firebase/app-compat",FR="@firebase/analytics-compat",GR="@firebase/analytics",QR="@firebase/app-check-compat",YR="@firebase/app-check",KR="@firebase/auth",$R="@firebase/auth-compat",XR="@firebase/database",WR="@firebase/data-connect",JR="@firebase/database-compat",ZR="@firebase/functions",eC="@firebase/functions-compat",tC="@firebase/installations",nC="@firebase/installations-compat",iC="@firebase/messaging",rC="@firebase/messaging-compat",sC="@firebase/performance",aC="@firebase/performance-compat",oC="@firebase/remote-config",lC="@firebase/remote-config-compat",uC="@firebase/storage",cC="@firebase/storage-compat",hC="@firebase/firestore",fC="@firebase/ai",dC="@firebase/firestore-compat",mC="firebase",pC="12.6.0";const $m="[DEFAULT]",gC={[Km]:"fire-core",[HR]:"fire-core-compat",[GR]:"fire-analytics",[FR]:"fire-analytics-compat",[YR]:"fire-app-check",[QR]:"fire-app-check-compat",[KR]:"fire-auth",[$R]:"fire-auth-compat",[XR]:"fire-rtdb",[WR]:"fire-data-connect",[JR]:"fire-rtdb-compat",[ZR]:"fire-fn",[eC]:"fire-fn-compat",[tC]:"fire-iid",[nC]:"fire-iid-compat",[iC]:"fire-fcm",[rC]:"fire-fcm-compat",[sC]:"fire-perf",[aC]:"fire-perf-compat",[oC]:"fire-rc",[lC]:"fire-rc-compat",[uC]:"fire-gcs",[cC]:"fire-gcs-compat",[hC]:"fire-fst",[dC]:"fire-fst-compat",[fC]:"fire-vertex","fire-js":"fire-js",[mC]:"fire-js-all"};const Ih=new Map,yC=new Map,Xm=new Map;function d0(r,e){try{r.container.addComponent(e)}catch(n){br.debug(`Component ${e.name} failed to register with FirebaseApp ${r.name}`,n)}}function yo(r){const e=r.name;if(Xm.has(e))return br.debug(`There were multiple attempts to register component ${e}.`),!1;Xm.set(e,r);for(const n of Ih.values())d0(n,r);for(const n of yC.values())d0(n,r);return!0}function Cp(r,e){const n=r.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),r.container.getProvider(e)}function pi(r){return r==null?!1:r.settings!==void 0}const vC={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},fs=new du("app","Firebase",vC);class _C{constructor(e,n,s){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new ca("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw fs.create("app-deleted",{appName:this._name})}}const No=pC;function cT(r,e={}){let n=r;typeof e!="object"&&(e={name:e});const s={name:$m,automaticDataCollectionEnabled:!0,...e},o=s.name;if(typeof o!="string"||!o)throw fs.create("bad-app-name",{appName:String(o)});if(n||(n=rT()),!n)throw fs.create("no-options");const u=Ih.get(o);if(u){if(ua(n,u.options)&&ua(s,u.config))return u;throw fs.create("duplicate-app",{appName:o})}const f=new wR(o);for(const p of Xm.values())f.addComponent(p);const m=new _C(n,s,f);return Ih.set(o,m),m}function hT(r=$m){const e=Ih.get(r);if(!e&&r===$m&&rT())return cT();if(!e)throw fs.create("no-app",{appName:r});return e}function ds(r,e,n){let s=gC[r]??r;n&&(s+=`-${n}`);const o=s.match(/\s|\//),u=e.match(/\s|\//);if(o||u){const f=[`Unable to register library "${s}" with version "${e}":`];o&&f.push(`library name "${s}" contains illegal characters (whitespace or "/")`),o&&u&&f.push("and"),u&&f.push(`version name "${e}" contains illegal characters (whitespace or "/")`),br.warn(f.join(" "));return}yo(new ca(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}const EC="firebase-heartbeat-database",TC=1,tu="firebase-heartbeat-store";let Mm=null;function fT(){return Mm||(Mm=UR(EC,TC,{upgrade:(r,e)=>{switch(e){case 0:try{r.createObjectStore(tu)}catch(n){console.warn(n)}}}}).catch(r=>{throw fs.create("idb-open",{originalErrorMessage:r.message})})),Mm}async function bC(r){try{const n=(await fT()).transaction(tu),s=await n.objectStore(tu).get(dT(r));return await n.done,s}catch(e){if(e instanceof Rr)br.warn(e.message);else{const n=fs.create("idb-get",{originalErrorMessage:e?.message});br.warn(n.message)}}}async function m0(r,e){try{const s=(await fT()).transaction(tu,"readwrite");await s.objectStore(tu).put(e,dT(r)),await s.done}catch(n){if(n instanceof Rr)br.warn(n.message);else{const s=fs.create("idb-set",{originalErrorMessage:n?.message});br.warn(s.message)}}}function dT(r){return`${r.name}!${r.options.appId}`}const SC=1024,AC=30;class wC{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new CC(n),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=p0();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:n}),this._heartbeatsCache.heartbeats.length>AC){const o=xC(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){br.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=p0(),{heartbeatsToSend:n,unsentEntries:s}=RC(this._heartbeatsCache.heartbeats),o=xh(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(e){return br.warn(e),""}}}function p0(){return new Date().toISOString().substring(0,10)}function RC(r,e=SC){const n=[];let s=r.slice();for(const o of r){const u=n.find(f=>f.agent===o.agent);if(u){if(u.dates.push(o.date),g0(n)>e){u.dates.pop();break}}else if(n.push({agent:o.agent,dates:[o.date]}),g0(n)>e){n.pop();break}s=s.slice(1)}return{heartbeatsToSend:n,unsentEntries:s}}class CC{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return dR()?mR().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await bC(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return m0(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return m0(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function g0(r){return xh(JSON.stringify({version:2,heartbeats:r})).length}function xC(r){if(r.length===0)return-1;let e=0,n=r[0].date;for(let s=1;s<r.length;s++)r[s].date<n&&(n=r[s].date,e=s);return e}function IC(r){yo(new ca("platform-logger",e=>new BR(e),"PRIVATE")),yo(new ca("heartbeat",e=>new wC(e),"PRIVATE")),ds(Km,f0,r),ds(Km,f0,"esm2020"),ds("fire-js","")}IC("");function mT(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const DC=mT,pT=new du("auth","Firebase",mT());const Dh=new wp("@firebase/auth");function NC(r,...e){Dh.logLevel<=je.WARN&&Dh.warn(`Auth (${No}): ${r}`,...e)}function gh(r,...e){Dh.logLevel<=je.ERROR&&Dh.error(`Auth (${No}): ${r}`,...e)}function Ki(r,...e){throw Ip(r,...e)}function vi(r,...e){return Ip(r,...e)}function xp(r,e,n){const s={...DC(),[e]:n};return new du("auth","Firebase",s).create(e,{appName:r.name})}function oa(r){return xp(r,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function OC(r,e,n){const s=n;if(!(e instanceof s))throw s.name!==e.constructor.name&&Ki(r,"argument-error"),xp(r,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Ip(r,...e){if(typeof r!="string"){const n=e[0],s=[...e.slice(1)];return s[0]&&(s[0].appName=r.name),r._errorFactory.create(n,...s)}return pT.create(r,...e)}function Ce(r,e,...n){if(!r)throw Ip(e,...n)}function vr(r){const e="INTERNAL ASSERTION FAILED: "+r;throw gh(e),new Error(e)}function Sr(r,e){r||vr(e)}function Wm(){return typeof self<"u"&&self.location?.href||""}function MC(){return y0()==="http:"||y0()==="https:"}function y0(){return typeof self<"u"&&self.location?.protocol||null}function VC(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(MC()||uR()||"connection"in navigator)?navigator.onLine:!0}function kC(){if(typeof navigator>"u")return null;const r=navigator;return r.languages&&r.languages[0]||r.language||null}class pu{constructor(e,n){this.shortDelay=e,this.longDelay=n,Sr(n>e,"Short delay should be less than long delay!"),this.isMobile=aR()||cR()}get(){return VC()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Dp(r,e){Sr(r.emulator,"Emulator should always be set here");const{url:n}=r.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}class gT{static initialize(e,n,s){this.fetchImpl=e,n&&(this.headersImpl=n),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;vr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;vr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;vr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const PC={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const LC=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],UC=new pu(3e4,6e4);function Np(r,e){return r.tenantId&&!e.tenantId?{...e,tenantId:r.tenantId}:e}async function Oo(r,e,n,s,o={}){return yT(r,o,async()=>{let u={},f={};s&&(e==="GET"?f=s:u={body:JSON.stringify(s)});const m=mu({key:r.config.apiKey,...f}).slice(1),p=await r._getAdditionalHeaders();p["Content-Type"]="application/json",r.languageCode&&(p["X-Firebase-Locale"]=r.languageCode);const g={method:e,headers:p,...u};return lR()||(g.referrerPolicy="no-referrer"),r.emulatorConfig&&Do(r.emulatorConfig.host)&&(g.credentials="include"),gT.fetch()(await vT(r,r.config.apiHost,n,m),g)})}async function yT(r,e,n){r._canInitEmulator=!1;const s={...PC,...e};try{const o=new zC(r),u=await Promise.race([n(),o.promise]);o.clearNetworkTimeout();const f=await u.json();if("needConfirmation"in f)throw oh(r,"account-exists-with-different-credential",f);if(u.ok&&!("errorMessage"in f))return f;{const m=u.ok?f.errorMessage:f.error.message,[p,g]=m.split(" : ");if(p==="FEDERATED_USER_ID_ALREADY_LINKED")throw oh(r,"credential-already-in-use",f);if(p==="EMAIL_EXISTS")throw oh(r,"email-already-in-use",f);if(p==="USER_DISABLED")throw oh(r,"user-disabled",f);const E=s[p]||p.toLowerCase().replace(/[_\s]+/g,"-");if(g)throw xp(r,E,g);Ki(r,E)}}catch(o){if(o instanceof Rr)throw o;Ki(r,"network-request-failed",{message:String(o)})}}async function jC(r,e,n,s,o={}){const u=await Oo(r,e,n,s,o);return"mfaPendingCredential"in u&&Ki(r,"multi-factor-auth-required",{_serverResponse:u}),u}async function vT(r,e,n,s){const o=`${e}${n}?${s}`,u=r,f=u.config.emulator?Dp(r.config,o):`${r.config.apiScheme}://${o}`;return LC.includes(n)&&(await u._persistenceManagerAvailable,u._getPersistenceType()==="COOKIE")?u._getPersistence()._getFinalTarget(f).toString():f}class zC{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,s)=>{this.timer=setTimeout(()=>s(vi(this.auth,"network-request-failed")),UC.get())})}}function oh(r,e,n){const s={appName:r.name};n.email&&(s.email=n.email),n.phoneNumber&&(s.phoneNumber=n.phoneNumber);const o=vi(r,e,s);return o.customData._tokenResponse=n,o}async function BC(r,e){return Oo(r,"POST","/v1/accounts:delete",e)}async function Nh(r,e){return Oo(r,"POST","/v1/accounts:lookup",e)}function Kl(r){if(r)try{const e=new Date(Number(r));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function qC(r,e=!1){const n=jt(r),s=await n.getIdToken(e),o=Op(s);Ce(o&&o.exp&&o.auth_time&&o.iat,n.auth,"internal-error");const u=typeof o.firebase=="object"?o.firebase:void 0,f=u?.sign_in_provider;return{claims:o,token:s,authTime:Kl(Vm(o.auth_time)),issuedAtTime:Kl(Vm(o.iat)),expirationTime:Kl(Vm(o.exp)),signInProvider:f||null,signInSecondFactor:u?.sign_in_second_factor||null}}function Vm(r){return Number(r)*1e3}function Op(r){const[e,n,s]=r.split(".");if(e===void 0||n===void 0||s===void 0)return gh("JWT malformed, contained fewer than 3 sections"),null;try{const o=nT(n);return o?JSON.parse(o):(gh("Failed to decode base64 JWT payload"),null)}catch(o){return gh("Caught error parsing JWT payload as JSON",o?.toString()),null}}function v0(r){const e=Op(r);return Ce(e,"internal-error"),Ce(typeof e.exp<"u","internal-error"),Ce(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function nu(r,e,n=!1){if(n)return e;try{return await e}catch(s){throw s instanceof Rr&&HC(s)&&r.auth.currentUser===r&&await r.auth.signOut(),s}}function HC({code:r}){return r==="auth/user-disabled"||r==="auth/user-token-expired"}class FC{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const s=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class Jm{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Kl(this.lastLoginAt),this.creationTime=Kl(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function Oh(r){const e=r.auth,n=await r.getIdToken(),s=await nu(r,Nh(e,{idToken:n}));Ce(s?.users.length,e,"internal-error");const o=s.users[0];r._notifyReloadListener(o);const u=o.providerUserInfo?.length?_T(o.providerUserInfo):[],f=QC(r.providerData,u),m=r.isAnonymous,p=!(r.email&&o.passwordHash)&&!f?.length,g=m?p:!1,E={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:f,metadata:new Jm(o.createdAt,o.lastLoginAt),isAnonymous:g};Object.assign(r,E)}async function GC(r){const e=jt(r);await Oh(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function QC(r,e){return[...r.filter(s=>!e.some(o=>o.providerId===s.providerId)),...e]}function _T(r){return r.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}async function YC(r,e){const n=await yT(r,{},async()=>{const s=mu({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:u}=r.config,f=await vT(r,o,"/v1/token",`key=${u}`),m=await r._getAdditionalHeaders();m["Content-Type"]="application/x-www-form-urlencoded";const p={method:"POST",headers:m,body:s};return r.emulatorConfig&&Do(r.emulatorConfig.host)&&(p.credentials="include"),gT.fetch()(f,p)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function KC(r,e){return Oo(r,"POST","/v2/accounts:revokeToken",Np(r,e))}class fo{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ce(e.idToken,"internal-error"),Ce(typeof e.idToken<"u","internal-error"),Ce(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):v0(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Ce(e.length!==0,"internal-error");const n=v0(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Ce(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:s,refreshToken:o,expiresIn:u}=await YC(e,n);this.updateTokensAndExpiration(s,o,Number(u))}updateTokensAndExpiration(e,n,s){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(e,n){const{refreshToken:s,accessToken:o,expirationTime:u}=n,f=new fo;return s&&(Ce(typeof s=="string","internal-error",{appName:e}),f.refreshToken=s),o&&(Ce(typeof o=="string","internal-error",{appName:e}),f.accessToken=o),u&&(Ce(typeof u=="number","internal-error",{appName:e}),f.expirationTime=u),f}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new fo,this.toJSON())}_performRefresh(){return vr("not implemented")}}function as(r,e){Ce(typeof r=="string"||typeof r>"u","internal-error",{appName:e})}class gi{constructor({uid:e,auth:n,stsTokenManager:s,...o}){this.providerId="firebase",this.proactiveRefresh=new FC(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new Jm(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const n=await nu(this,this.stsTokenManager.getToken(this.auth,e));return Ce(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return qC(this,e)}reload(){return GC(this)}_assign(e){this!==e&&(Ce(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new gi({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){Ce(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let s=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),s=!0),n&&await Oh(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(pi(this.auth.app))return Promise.reject(oa(this.auth));const e=await this.getIdToken();return await nu(this,BC(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const s=n.displayName??void 0,o=n.email??void 0,u=n.phoneNumber??void 0,f=n.photoURL??void 0,m=n.tenantId??void 0,p=n._redirectEventId??void 0,g=n.createdAt??void 0,E=n.lastLoginAt??void 0,{uid:T,emailVerified:R,isAnonymous:L,providerData:H,stsTokenManager:G}=n;Ce(T&&G,e,"internal-error");const z=fo.fromJSON(this.name,G);Ce(typeof T=="string",e,"internal-error"),as(s,e.name),as(o,e.name),Ce(typeof R=="boolean",e,"internal-error"),Ce(typeof L=="boolean",e,"internal-error"),as(u,e.name),as(f,e.name),as(m,e.name),as(p,e.name),as(g,e.name),as(E,e.name);const W=new gi({uid:T,auth:e,email:o,emailVerified:R,displayName:s,isAnonymous:L,photoURL:f,phoneNumber:u,tenantId:m,stsTokenManager:z,createdAt:g,lastLoginAt:E});return H&&Array.isArray(H)&&(W.providerData=H.map(K=>({...K}))),p&&(W._redirectEventId=p),W}static async _fromIdTokenResponse(e,n,s=!1){const o=new fo;o.updateFromServerResponse(n);const u=new gi({uid:n.localId,auth:e,stsTokenManager:o,isAnonymous:s});return await Oh(u),u}static async _fromGetAccountInfoResponse(e,n,s){const o=n.users[0];Ce(o.localId!==void 0,"internal-error");const u=o.providerUserInfo!==void 0?_T(o.providerUserInfo):[],f=!(o.email&&o.passwordHash)&&!u?.length,m=new fo;m.updateFromIdToken(s);const p=new gi({uid:o.localId,auth:e,stsTokenManager:m,isAnonymous:f}),g={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:u,metadata:new Jm(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!u?.length};return Object.assign(p,g),p}}const _0=new Map;function _r(r){Sr(r instanceof Function,"Expected a class definition");let e=_0.get(r);return e?(Sr(e instanceof r,"Instance stored in cache mismatched with class"),e):(e=new r,_0.set(r,e),e)}class ET{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}ET.type="NONE";const E0=ET;function yh(r,e,n){return`firebase:${r}:${e}:${n}`}class mo{constructor(e,n,s){this.persistence=e,this.auth=n,this.userKey=s;const{config:o,name:u}=this.auth;this.fullUserKey=yh(this.userKey,o.apiKey,u),this.fullPersistenceKey=yh("persistence",o.apiKey,u),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await Nh(this.auth,{idToken:e}).catch(()=>{});return n?gi._fromGetAccountInfoResponse(this.auth,n,e):null}return gi._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,s="authUser"){if(!n.length)return new mo(_r(E0),e,s);const o=(await Promise.all(n.map(async g=>{if(await g._isAvailable())return g}))).filter(g=>g);let u=o[0]||_r(E0);const f=yh(s,e.config.apiKey,e.name);let m=null;for(const g of n)try{const E=await g._get(f);if(E){let T;if(typeof E=="string"){const R=await Nh(e,{idToken:E}).catch(()=>{});if(!R)break;T=await gi._fromGetAccountInfoResponse(e,R,E)}else T=gi._fromJSON(e,E);g!==u&&(m=T),u=g;break}}catch{}const p=o.filter(g=>g._shouldAllowMigration);return!u._shouldAllowMigration||!p.length?new mo(u,e,s):(u=p[0],m&&await u._set(f,m.toJSON()),await Promise.all(n.map(async g=>{if(g!==u)try{await g._remove(f)}catch{}})),new mo(u,e,s))}}function T0(r){const e=r.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(AT(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(TT(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(RT(e))return"Blackberry";if(CT(e))return"Webos";if(bT(e))return"Safari";if((e.includes("chrome/")||ST(e))&&!e.includes("edge/"))return"Chrome";if(wT(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=r.match(n);if(s?.length===2)return s[1]}return"Other"}function TT(r=cn()){return/firefox\//i.test(r)}function bT(r=cn()){const e=r.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function ST(r=cn()){return/crios\//i.test(r)}function AT(r=cn()){return/iemobile/i.test(r)}function wT(r=cn()){return/android/i.test(r)}function RT(r=cn()){return/blackberry/i.test(r)}function CT(r=cn()){return/webos/i.test(r)}function Mp(r=cn()){return/iphone|ipad|ipod/i.test(r)||/macintosh/i.test(r)&&/mobile/i.test(r)}function $C(r=cn()){return Mp(r)&&!!window.navigator?.standalone}function XC(){return hR()&&document.documentMode===10}function xT(r=cn()){return Mp(r)||wT(r)||CT(r)||RT(r)||/windows phone/i.test(r)||AT(r)}function IT(r,e=[]){let n;switch(r){case"Browser":n=T0(cn());break;case"Worker":n=`${T0(cn())}-${r}`;break;default:n=r}const s=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${No}/${s}`}class WC{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const s=u=>new Promise((f,m)=>{try{const p=e(u);f(p)}catch(p){m(p)}});s.onAbort=n,this.queue.push(s);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const s of this.queue)await s(e),s.onAbort&&n.push(s.onAbort)}catch(s){n.reverse();for(const o of n)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s?.message})}}}async function JC(r,e={}){return Oo(r,"GET","/v2/passwordPolicy",Np(r,e))}const ZC=6;class ex{constructor(e){const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??ZC,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const s=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;s&&(n.meetsMinPasswordLength=e.length>=s),o&&(n.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let s;for(let o=0;o<e.length;o++)s=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(n,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(e,n,s,o,u){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=u))}}class tx{constructor(e,n,s,o){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=s,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new b0(this),this.idTokenSubscription=new b0(this),this.beforeStateQueue=new WC(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=pT,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(u=>this._resolvePersistenceManagerAvailable=u)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=_r(n)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await mo.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Nh(this,{idToken:e}),s=await gi._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(s)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(pi(this.app)){const u=this.app.settings.authIdToken;return u?new Promise(f=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(u).then(f,f))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let s=n,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const u=this.redirectUser?._redirectEventId,f=s?._redirectEventId,m=await this.tryRedirectSignIn(e);(!u||u===f)&&m?.user&&(s=m.user,o=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(s)}catch(u){s=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(u))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return Ce(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Oh(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=kC()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(pi(this.app))return Promise.reject(oa(this));const n=e?jt(e):null;return n&&Ce(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Ce(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return pi(this.app)?Promise.reject(oa(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return pi(this.app)?Promise.reject(oa(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(_r(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await JC(this),n=new ex(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new du("auth","Firebase",e())}onAuthStateChanged(e,n,s){return this.registerStateListener(this.authStateSubscription,e,n,s)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,s){return this.registerStateListener(this.idTokenSubscription,e,n,s)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const s=this.onAuthStateChanged(()=>{s(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(s.tenantId=this.tenantId),await KC(this,s)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,n){const s=await this.getOrInitRedirectPersistenceManager(n);return e===null?s.removeCurrentUser():s.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&_r(e)||this._popupRedirectResolver;Ce(n,this,"argument-error"),this.redirectPersistenceManager=await mo.create(this,[_r(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,s,o){if(this._deleted)return()=>{};const u=typeof n=="function"?n:n.next.bind(n);let f=!1;const m=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ce(m,this,"internal-error"),m.then(()=>{f||u(this.currentUser)}),typeof n=="function"){const p=e.addObserver(n,s,o);return()=>{f=!0,p()}}else{const p=e.addObserver(n);return()=>{f=!0,p()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ce(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=IT(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();n&&(e["X-Firebase-Client"]=n);const s=await this._getAppCheckToken();return s&&(e["X-Firebase-AppCheck"]=s),e}async _getAppCheckToken(){if(pi(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&NC(`Error while retrieving App Check token: ${e.error}`),e?.token}}function Jh(r){return jt(r)}class b0{constructor(e){this.auth=e,this.observer=null,this.addObserver=_R(n=>this.observer=n)}get next(){return Ce(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let Vp={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function nx(r){Vp=r}function ix(r){return Vp.loadJS(r)}function rx(){return Vp.gapiScript}function sx(r){return`__${r}${Math.floor(Math.random()*1e6)}`}function ax(r,e){const n=Cp(r,"auth");if(n.isInitialized()){const o=n.getImmediate(),u=n.getOptions();if(ua(u,e??{}))return o;Ki(o,"already-initialized")}return n.initialize({options:e})}function ox(r,e){const n=e?.persistence||[],s=(Array.isArray(n)?n:[n]).map(_r);e?.errorMap&&r._updateErrorMap(e.errorMap),r._initializeWithPersistence(s,e?.popupRedirectResolver)}function lx(r,e,n){const s=Jh(r);Ce(/^https?:\/\//.test(e),s,"invalid-emulator-scheme");const o=!1,u=DT(e),{host:f,port:m}=ux(e),p=m===null?"":`:${m}`,g={url:`${u}//${f}${p}/`},E=Object.freeze({host:f,port:m,protocol:u.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!s._canInitEmulator){Ce(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),Ce(ua(g,s.config.emulator)&&ua(E,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=g,s.emulatorConfig=E,s.settings.appVerificationDisabledForTesting=!0,Do(f)?(aT(`${u}//${f}${p}`),oT("Auth",!0)):cx()}function DT(r){const e=r.indexOf(":");return e<0?"":r.substr(0,e+1)}function ux(r){const e=DT(r),n=/(\/\/)?([^?#/]+)/.exec(r.substr(e.length));if(!n)return{host:"",port:null};const s=n[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(s);if(o){const u=o[1];return{host:u,port:S0(s.substr(u.length+1))}}else{const[u,f]=s.split(":");return{host:u,port:S0(f)}}}function S0(r){if(!r)return null;const e=Number(r);return isNaN(e)?null:e}function cx(){function r(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",r):r())}class NT{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return vr("not implemented")}_getIdTokenResponse(e){return vr("not implemented")}_linkToIdToken(e,n){return vr("not implemented")}_getReauthenticationResolver(e){return vr("not implemented")}}async function po(r,e){return jC(r,"POST","/v1/accounts:signInWithIdp",Np(r,e))}const hx="http://localhost";class ha extends NT{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new ha(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Ki("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:s,signInMethod:o,...u}=n;if(!s||!o)return null;const f=new ha(s,o);return f.idToken=u.idToken||void 0,f.accessToken=u.accessToken||void 0,f.secret=u.secret,f.nonce=u.nonce,f.pendingToken=u.pendingToken||null,f}_getIdTokenResponse(e){const n=this.buildRequest();return po(e,n)}_linkToIdToken(e,n){const s=this.buildRequest();return s.idToken=n,po(e,s)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,po(e,n)}buildRequest(){const e={requestUri:hx,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=mu(n)}return e}}class kp{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class gu extends kp{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class os extends gu{constructor(){super("facebook.com")}static credential(e){return ha._fromParams({providerId:os.PROVIDER_ID,signInMethod:os.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return os.credentialFromTaggedObject(e)}static credentialFromError(e){return os.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return os.credential(e.oauthAccessToken)}catch{return null}}}os.FACEBOOK_SIGN_IN_METHOD="facebook.com";os.PROVIDER_ID="facebook.com";class yr extends gu{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return ha._fromParams({providerId:yr.PROVIDER_ID,signInMethod:yr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return yr.credentialFromTaggedObject(e)}static credentialFromError(e){return yr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:s}=e;if(!n&&!s)return null;try{return yr.credential(n,s)}catch{return null}}}yr.GOOGLE_SIGN_IN_METHOD="google.com";yr.PROVIDER_ID="google.com";class ls extends gu{constructor(){super("github.com")}static credential(e){return ha._fromParams({providerId:ls.PROVIDER_ID,signInMethod:ls.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ls.credentialFromTaggedObject(e)}static credentialFromError(e){return ls.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ls.credential(e.oauthAccessToken)}catch{return null}}}ls.GITHUB_SIGN_IN_METHOD="github.com";ls.PROVIDER_ID="github.com";class us extends gu{constructor(){super("twitter.com")}static credential(e,n){return ha._fromParams({providerId:us.PROVIDER_ID,signInMethod:us.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return us.credentialFromTaggedObject(e)}static credentialFromError(e){return us.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:s}=e;if(!n||!s)return null;try{return us.credential(n,s)}catch{return null}}}us.TWITTER_SIGN_IN_METHOD="twitter.com";us.PROVIDER_ID="twitter.com";class vo{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,s,o=!1){const u=await gi._fromIdTokenResponse(e,s,o),f=A0(s);return new vo({user:u,providerId:f,_tokenResponse:s,operationType:n})}static async _forOperation(e,n,s){await e._updateTokensIfNecessary(s,!0);const o=A0(s);return new vo({user:e,providerId:o,_tokenResponse:s,operationType:n})}}function A0(r){return r.providerId?r.providerId:"phoneNumber"in r?"phone":null}class Mh extends Rr{constructor(e,n,s,o){super(n.code,n.message),this.operationType=s,this.user=o,Object.setPrototypeOf(this,Mh.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(e,n,s,o){return new Mh(e,n,s,o)}}function OT(r,e,n,s){return(e==="reauthenticate"?n._getReauthenticationResolver(r):n._getIdTokenResponse(r)).catch(u=>{throw u.code==="auth/multi-factor-auth-required"?Mh._fromErrorAndOperation(r,u,e,s):u})}async function fx(r,e,n=!1){const s=await nu(r,e._linkToIdToken(r.auth,await r.getIdToken()),n);return vo._forOperation(r,"link",s)}async function dx(r,e,n=!1){const{auth:s}=r;if(pi(s.app))return Promise.reject(oa(s));const o="reauthenticate";try{const u=await nu(r,OT(s,o,e,r),n);Ce(u.idToken,s,"internal-error");const f=Op(u.idToken);Ce(f,s,"internal-error");const{sub:m}=f;return Ce(r.uid===m,s,"user-mismatch"),vo._forOperation(r,o,u)}catch(u){throw u?.code==="auth/user-not-found"&&Ki(s,"user-mismatch"),u}}async function mx(r,e,n=!1){if(pi(r.app))return Promise.reject(oa(r));const s="signIn",o=await OT(r,s,e),u=await vo._fromIdTokenResponse(r,s,o);return n||await r._updateCurrentUser(u.user),u}function px(r,e,n,s){return jt(r).onIdTokenChanged(e,n,s)}function gx(r,e,n){return jt(r).beforeAuthStateChanged(e,n)}function yx(r,e,n,s){return jt(r).onAuthStateChanged(e,n,s)}function vx(r){return jt(r).signOut()}const Vh="__sak";class MT{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Vh,"1"),this.storage.removeItem(Vh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const _x=1e3,Ex=10;class VT extends MT{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=xT(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const s=this.storage.getItem(n),o=this.localCache[n];s!==o&&e(n,o,s)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((f,m,p)=>{this.notifyListeners(f,p)});return}const s=e.key;n?this.detachListener():this.stopPolling();const o=()=>{const f=this.storage.getItem(s);!n&&this.localCache[s]===f||this.notifyListeners(s,f)},u=this.storage.getItem(s);XC()&&u!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,Ex):o()}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const o of Array.from(s))o(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:s}),!0)})},_x)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}VT.type="LOCAL";const Tx=VT;class kT extends MT{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}kT.type="SESSION";const PT=kT;function bx(r){return Promise.all(r.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}class Zh{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(o=>o.isListeningto(e));if(n)return n;const s=new Zh(e);return this.receivers.push(s),s}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:s,eventType:o,data:u}=n.data,f=this.handlersMap[o];if(!f?.size)return;n.ports[0].postMessage({status:"ack",eventId:s,eventType:o});const m=Array.from(f).map(async g=>g(n.origin,u)),p=await bx(m);n.ports[0].postMessage({status:"done",eventId:s,eventType:o,response:p})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Zh.receivers=[];function Pp(r="",e=10){let n="";for(let s=0;s<e;s++)n+=Math.floor(Math.random()*10);return r+n}class Sx{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,s=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let u,f;return new Promise((m,p)=>{const g=Pp("",20);o.port1.start();const E=setTimeout(()=>{p(new Error("unsupported_event"))},s);f={messageChannel:o,onMessage(T){const R=T;if(R.data.eventId===g)switch(R.data.status){case"ack":clearTimeout(E),u=setTimeout(()=>{p(new Error("timeout"))},3e3);break;case"done":clearTimeout(u),m(R.data.response);break;default:clearTimeout(E),clearTimeout(u),p(new Error("invalid_response"));break}}},this.handlers.add(f),o.port1.addEventListener("message",f.onMessage),this.target.postMessage({eventType:e,eventId:g,data:n},[o.port2])}).finally(()=>{f&&this.removeMessageHandler(f)})}}function Hi(){return window}function Ax(r){Hi().location.href=r}function LT(){return typeof Hi().WorkerGlobalScope<"u"&&typeof Hi().importScripts=="function"}async function wx(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function Rx(){return navigator?.serviceWorker?.controller||null}function Cx(){return LT()?self:null}const UT="firebaseLocalStorageDb",xx=1,kh="firebaseLocalStorage",jT="fbase_key";class yu{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function ef(r,e){return r.transaction([kh],e?"readwrite":"readonly").objectStore(kh)}function Ix(){const r=indexedDB.deleteDatabase(UT);return new yu(r).toPromise()}function Zm(){const r=indexedDB.open(UT,xx);return new Promise((e,n)=>{r.addEventListener("error",()=>{n(r.error)}),r.addEventListener("upgradeneeded",()=>{const s=r.result;try{s.createObjectStore(kh,{keyPath:jT})}catch(o){n(o)}}),r.addEventListener("success",async()=>{const s=r.result;s.objectStoreNames.contains(kh)?e(s):(s.close(),await Ix(),e(await Zm()))})})}async function w0(r,e,n){const s=ef(r,!0).put({[jT]:e,value:n});return new yu(s).toPromise()}async function Dx(r,e){const n=ef(r,!1).get(e),s=await new yu(n).toPromise();return s===void 0?null:s.value}function R0(r,e){const n=ef(r,!0).delete(e);return new yu(n).toPromise()}const Nx=800,Ox=3;class zT{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Zm(),this.db)}async _withRetries(e){let n=0;for(;;)try{const s=await this._openDb();return await e(s)}catch(s){if(n++>Ox)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return LT()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Zh._getInstance(Cx()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await wx(),!this.activeServiceWorker)return;this.sender=new Sx(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||Rx()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Zm();return await w0(e,Vh,"1"),await R0(e,Vh),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(s=>w0(s,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(s=>Dx(s,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>R0(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const u=ef(o,!1).getAll();return new yu(u).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],s=new Set;if(e.length!==0)for(const{fbase_key:o,value:u}of e)s.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(u)&&(this.notifyListeners(o,u),n.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!s.has(o)&&(this.notifyListeners(o,null),n.push(o));return n}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const o of Array.from(s))o(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),Nx)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}zT.type="LOCAL";const Mx=zT;new pu(3e4,6e4);function BT(r,e){return e?_r(e):(Ce(r._popupRedirectResolver,r,"argument-error"),r._popupRedirectResolver)}class Lp extends NT{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return po(e,this._buildIdpRequest())}_linkToIdToken(e,n){return po(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return po(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function Vx(r){return mx(r.auth,new Lp(r),r.bypassAuthState)}function kx(r){const{auth:e,user:n}=r;return Ce(n,e,"internal-error"),dx(n,new Lp(r),r.bypassAuthState)}async function Px(r){const{auth:e,user:n}=r;return Ce(n,e,"internal-error"),fx(n,new Lp(r),r.bypassAuthState)}class qT{constructor(e,n,s,o,u=!1){this.auth=e,this.resolver=s,this.user=o,this.bypassAuthState=u,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:s,postBody:o,tenantId:u,error:f,type:m}=e;if(f){this.reject(f);return}const p={auth:this.auth,requestUri:n,sessionId:s,tenantId:u||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(m)(p))}catch(g){this.reject(g)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Vx;case"linkViaPopup":case"linkViaRedirect":return Px;case"reauthViaPopup":case"reauthViaRedirect":return kx;default:Ki(this.auth,"internal-error")}}resolve(e){Sr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Sr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Lx=new pu(2e3,1e4);async function Ux(r,e,n){if(pi(r.app))return Promise.reject(vi(r,"operation-not-supported-in-this-environment"));const s=Jh(r);OC(r,e,kp);const o=BT(s,n);return new ra(s,"signInViaPopup",e,o).executeNotNull()}class ra extends qT{constructor(e,n,s,o,u){super(e,n,o,u),this.provider=s,this.authWindow=null,this.pollId=null,ra.currentPopupAction&&ra.currentPopupAction.cancel(),ra.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ce(e,this.auth,"internal-error"),e}async onExecution(){Sr(this.filter.length===1,"Popup operations only handle one event");const e=Pp();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(vi(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(vi(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ra.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(vi(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,Lx.get())};e()}}ra.currentPopupAction=null;const jx="pendingRedirect",vh=new Map;class zx extends qT{constructor(e,n,s=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,s),this.eventId=null}async execute(){let e=vh.get(this.auth._key());if(!e){try{const s=await Bx(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(s)}catch(n){e=()=>Promise.reject(n)}vh.set(this.auth._key(),e)}return this.bypassAuthState||vh.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function Bx(r,e){const n=Fx(e),s=Hx(r);if(!await s._isAvailable())return!1;const o=await s._get(n)==="true";return await s._remove(n),o}function qx(r,e){vh.set(r._key(),e)}function Hx(r){return _r(r._redirectPersistence)}function Fx(r){return yh(jx,r.config.apiKey,r.name)}async function Gx(r,e,n=!1){if(pi(r.app))return Promise.reject(oa(r));const s=Jh(r),o=BT(s,e),f=await new zx(s,o,n).execute();return f&&!n&&(delete f.user._redirectEventId,await s._persistUserIfCurrent(f.user),await s._setRedirectUser(null,e)),f}const Qx=600*1e3;class Yx{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(e,s)&&(n=!0,this.sendToConsumer(e,s),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!Kx(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){if(e.error&&!HT(e)){const s=e.error.code?.split("auth/")[1]||"internal-error";n.onError(vi(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const s=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&s}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=Qx&&this.cachedEventUids.clear(),this.cachedEventUids.has(C0(e))}saveEventToCache(e){this.cachedEventUids.add(C0(e)),this.lastProcessedEventTime=Date.now()}}function C0(r){return[r.type,r.eventId,r.sessionId,r.tenantId].filter(e=>e).join("-")}function HT({type:r,error:e}){return r==="unknown"&&e?.code==="auth/no-auth-event"}function Kx(r){switch(r.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return HT(r);default:return!1}}async function $x(r,e={}){return Oo(r,"GET","/v1/projects",e)}const Xx=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Wx=/^https?/;async function Jx(r){if(r.config.emulator)return;const{authorizedDomains:e}=await $x(r);for(const n of e)try{if(Zx(n))return}catch{}Ki(r,"unauthorized-domain")}function Zx(r){const e=Wm(),{protocol:n,hostname:s}=new URL(e);if(r.startsWith("chrome-extension://")){const f=new URL(r);return f.hostname===""&&s===""?n==="chrome-extension:"&&r.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&f.hostname===s}if(!Wx.test(n))return!1;if(Xx.test(r))return s===r;const o=r.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(s)}const e2=new pu(3e4,6e4);function x0(){const r=Hi().___jsl;if(r?.H){for(const e of Object.keys(r.H))if(r.H[e].r=r.H[e].r||[],r.H[e].L=r.H[e].L||[],r.H[e].r=[...r.H[e].L],r.CP)for(let n=0;n<r.CP.length;n++)r.CP[n]=null}}function t2(r){return new Promise((e,n)=>{function s(){x0(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{x0(),n(vi(r,"network-request-failed"))},timeout:e2.get()})}if(Hi().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(Hi().gapi?.load)s();else{const o=sx("iframefcb");return Hi()[o]=()=>{gapi.load?s():n(vi(r,"network-request-failed"))},ix(`${rx()}?onload=${o}`).catch(u=>n(u))}}).catch(e=>{throw _h=null,e})}let _h=null;function n2(r){return _h=_h||t2(r),_h}const i2=new pu(5e3,15e3),r2="__/auth/iframe",s2="emulator/auth/iframe",a2={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},o2=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function l2(r){const e=r.config;Ce(e.authDomain,r,"auth-domain-config-required");const n=e.emulator?Dp(e,s2):`https://${r.config.authDomain}/${r2}`,s={apiKey:e.apiKey,appName:r.name,v:No},o=o2.get(r.config.apiHost);o&&(s.eid=o);const u=r._getFrameworks();return u.length&&(s.fw=u.join(",")),`${n}?${mu(s).slice(1)}`}async function u2(r){const e=await n2(r),n=Hi().gapi;return Ce(n,r,"internal-error"),e.open({where:document.body,url:l2(r),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:a2,dontclear:!0},s=>new Promise(async(o,u)=>{await s.restyle({setHideOnLeave:!1});const f=vi(r,"network-request-failed"),m=Hi().setTimeout(()=>{u(f)},i2.get());function p(){Hi().clearTimeout(m),o(s)}s.ping(p).then(p,()=>{u(f)})}))}const c2={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},h2=500,f2=600,d2="_blank",m2="http://localhost";class I0{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function p2(r,e,n,s=h2,o=f2){const u=Math.max((window.screen.availHeight-o)/2,0).toString(),f=Math.max((window.screen.availWidth-s)/2,0).toString();let m="";const p={...c2,width:s.toString(),height:o.toString(),top:u,left:f},g=cn().toLowerCase();n&&(m=ST(g)?d2:n),TT(g)&&(e=e||m2,p.scrollbars="yes");const E=Object.entries(p).reduce((R,[L,H])=>`${R}${L}=${H},`,"");if($C(g)&&m!=="_self")return g2(e||"",m),new I0(null);const T=window.open(e||"",m,E);Ce(T,r,"popup-blocked");try{T.focus()}catch{}return new I0(T)}function g2(r,e){const n=document.createElement("a");n.href=r,n.target=e;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(s)}const y2="__/auth/handler",v2="emulator/auth/handler",_2=encodeURIComponent("fac");async function D0(r,e,n,s,o,u){Ce(r.config.authDomain,r,"auth-domain-config-required"),Ce(r.config.apiKey,r,"invalid-api-key");const f={apiKey:r.config.apiKey,appName:r.name,authType:n,redirectUrl:s,v:No,eventId:o};if(e instanceof kp){e.setDefaultLanguage(r.languageCode),f.providerId=e.providerId||"",vR(e.getCustomParameters())||(f.customParameters=JSON.stringify(e.getCustomParameters()));for(const[E,T]of Object.entries({}))f[E]=T}if(e instanceof gu){const E=e.getScopes().filter(T=>T!=="");E.length>0&&(f.scopes=E.join(","))}r.tenantId&&(f.tid=r.tenantId);const m=f;for(const E of Object.keys(m))m[E]===void 0&&delete m[E];const p=await r._getAppCheckToken(),g=p?`#${_2}=${encodeURIComponent(p)}`:"";return`${E2(r)}?${mu(m).slice(1)}${g}`}function E2({config:r}){return r.emulator?Dp(r,v2):`https://${r.authDomain}/${y2}`}const km="webStorageSupport";class T2{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=PT,this._completeRedirectFn=Gx,this._overrideRedirectResult=qx}async _openPopup(e,n,s,o){Sr(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const u=await D0(e,n,s,Wm(),o);return p2(e,u,Pp())}async _openRedirect(e,n,s,o){await this._originValidation(e);const u=await D0(e,n,s,Wm(),o);return Ax(u),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:o,promise:u}=this.eventManagers[n];return o?Promise.resolve(o):(Sr(u,"If manager is not set, promise should be"),u)}const s=this.initAndGetManager(e);return this.eventManagers[n]={promise:s},s.catch(()=>{delete this.eventManagers[n]}),s}async initAndGetManager(e){const n=await u2(e),s=new Yx(e);return n.register("authEvent",o=>(Ce(o?.authEvent,e,"invalid-auth-event"),{status:s.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:s},this.iframes[e._key()]=n,s}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(km,{type:km},o=>{const u=o?.[0]?.[km];u!==void 0&&n(!!u),Ki(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=Jx(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return xT()||bT()||Mp()}}const b2=T2;var N0="@firebase/auth",O0="1.12.0";class S2{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(s=>{e(s?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Ce(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function A2(r){switch(r){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function w2(r){yo(new ca("auth",(e,{options:n})=>{const s=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),u=e.getProvider("app-check-internal"),{apiKey:f,authDomain:m}=s.options;Ce(f&&!f.includes(":"),"invalid-api-key",{appName:s.name});const p={apiKey:f,authDomain:m,clientPlatform:r,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:IT(r)},g=new tx(s,o,u,p);return ox(g,n),g},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,s)=>{e.getProvider("auth-internal").initialize()})),yo(new ca("auth-internal",e=>{const n=Jh(e.getProvider("auth").getImmediate());return(s=>new S2(s))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),ds(N0,O0,A2(r)),ds(N0,O0,"esm2020")}const R2=300,C2=sT("authIdTokenMaxAge")||R2;let M0=null;const x2=r=>async e=>{const n=e&&await e.getIdTokenResult(),s=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(s&&s>C2)return;const o=n?.token;M0!==o&&(M0=o,await fetch(r,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function I2(r=hT()){const e=Cp(r,"auth");if(e.isInitialized())return e.getImmediate();const n=ax(r,{popupRedirectResolver:b2,persistence:[Mx,Tx,PT]}),s=sT("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const u=new URL(s,location.origin);if(location.origin===u.origin){const f=x2(u.toString());gx(n,f,()=>f(n.currentUser)),px(n,m=>f(m))}}const o=iT("auth");return o&&lx(n,`http://${o}`),n}function D2(){return document.getElementsByTagName("head")?.[0]??document}nx({loadJS(r){return new Promise((e,n)=>{const s=document.createElement("script");s.setAttribute("src",r),s.onload=e,s.onerror=o=>{const u=vi("internal-error");u.customData=o,n(u)},s.type="text/javascript",s.charset="UTF-8",D2().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});w2("Browser");var N2="firebase",O2="12.7.0";ds(N2,O2,"app");var V0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var ms,FT;(function(){var r;function e(D,x){function A(){}A.prototype=x.prototype,D.F=x.prototype,D.prototype=new A,D.prototype.constructor=D,D.D=function(N,C,M){for(var I=Array(arguments.length-2),Ee=2;Ee<arguments.length;Ee++)I[Ee-2]=arguments[Ee];return x.prototype[C].apply(N,I)}}function n(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(s,n),s.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(D,x,A){A||(A=0);const N=Array(16);if(typeof x=="string")for(var C=0;C<16;++C)N[C]=x.charCodeAt(A++)|x.charCodeAt(A++)<<8|x.charCodeAt(A++)<<16|x.charCodeAt(A++)<<24;else for(C=0;C<16;++C)N[C]=x[A++]|x[A++]<<8|x[A++]<<16|x[A++]<<24;x=D.g[0],A=D.g[1],C=D.g[2];let M=D.g[3],I;I=x+(M^A&(C^M))+N[0]+3614090360&4294967295,x=A+(I<<7&4294967295|I>>>25),I=M+(C^x&(A^C))+N[1]+3905402710&4294967295,M=x+(I<<12&4294967295|I>>>20),I=C+(A^M&(x^A))+N[2]+606105819&4294967295,C=M+(I<<17&4294967295|I>>>15),I=A+(x^C&(M^x))+N[3]+3250441966&4294967295,A=C+(I<<22&4294967295|I>>>10),I=x+(M^A&(C^M))+N[4]+4118548399&4294967295,x=A+(I<<7&4294967295|I>>>25),I=M+(C^x&(A^C))+N[5]+1200080426&4294967295,M=x+(I<<12&4294967295|I>>>20),I=C+(A^M&(x^A))+N[6]+2821735955&4294967295,C=M+(I<<17&4294967295|I>>>15),I=A+(x^C&(M^x))+N[7]+4249261313&4294967295,A=C+(I<<22&4294967295|I>>>10),I=x+(M^A&(C^M))+N[8]+1770035416&4294967295,x=A+(I<<7&4294967295|I>>>25),I=M+(C^x&(A^C))+N[9]+2336552879&4294967295,M=x+(I<<12&4294967295|I>>>20),I=C+(A^M&(x^A))+N[10]+4294925233&4294967295,C=M+(I<<17&4294967295|I>>>15),I=A+(x^C&(M^x))+N[11]+2304563134&4294967295,A=C+(I<<22&4294967295|I>>>10),I=x+(M^A&(C^M))+N[12]+1804603682&4294967295,x=A+(I<<7&4294967295|I>>>25),I=M+(C^x&(A^C))+N[13]+4254626195&4294967295,M=x+(I<<12&4294967295|I>>>20),I=C+(A^M&(x^A))+N[14]+2792965006&4294967295,C=M+(I<<17&4294967295|I>>>15),I=A+(x^C&(M^x))+N[15]+1236535329&4294967295,A=C+(I<<22&4294967295|I>>>10),I=x+(C^M&(A^C))+N[1]+4129170786&4294967295,x=A+(I<<5&4294967295|I>>>27),I=M+(A^C&(x^A))+N[6]+3225465664&4294967295,M=x+(I<<9&4294967295|I>>>23),I=C+(x^A&(M^x))+N[11]+643717713&4294967295,C=M+(I<<14&4294967295|I>>>18),I=A+(M^x&(C^M))+N[0]+3921069994&4294967295,A=C+(I<<20&4294967295|I>>>12),I=x+(C^M&(A^C))+N[5]+3593408605&4294967295,x=A+(I<<5&4294967295|I>>>27),I=M+(A^C&(x^A))+N[10]+38016083&4294967295,M=x+(I<<9&4294967295|I>>>23),I=C+(x^A&(M^x))+N[15]+3634488961&4294967295,C=M+(I<<14&4294967295|I>>>18),I=A+(M^x&(C^M))+N[4]+3889429448&4294967295,A=C+(I<<20&4294967295|I>>>12),I=x+(C^M&(A^C))+N[9]+568446438&4294967295,x=A+(I<<5&4294967295|I>>>27),I=M+(A^C&(x^A))+N[14]+3275163606&4294967295,M=x+(I<<9&4294967295|I>>>23),I=C+(x^A&(M^x))+N[3]+4107603335&4294967295,C=M+(I<<14&4294967295|I>>>18),I=A+(M^x&(C^M))+N[8]+1163531501&4294967295,A=C+(I<<20&4294967295|I>>>12),I=x+(C^M&(A^C))+N[13]+2850285829&4294967295,x=A+(I<<5&4294967295|I>>>27),I=M+(A^C&(x^A))+N[2]+4243563512&4294967295,M=x+(I<<9&4294967295|I>>>23),I=C+(x^A&(M^x))+N[7]+1735328473&4294967295,C=M+(I<<14&4294967295|I>>>18),I=A+(M^x&(C^M))+N[12]+2368359562&4294967295,A=C+(I<<20&4294967295|I>>>12),I=x+(A^C^M)+N[5]+4294588738&4294967295,x=A+(I<<4&4294967295|I>>>28),I=M+(x^A^C)+N[8]+2272392833&4294967295,M=x+(I<<11&4294967295|I>>>21),I=C+(M^x^A)+N[11]+1839030562&4294967295,C=M+(I<<16&4294967295|I>>>16),I=A+(C^M^x)+N[14]+4259657740&4294967295,A=C+(I<<23&4294967295|I>>>9),I=x+(A^C^M)+N[1]+2763975236&4294967295,x=A+(I<<4&4294967295|I>>>28),I=M+(x^A^C)+N[4]+1272893353&4294967295,M=x+(I<<11&4294967295|I>>>21),I=C+(M^x^A)+N[7]+4139469664&4294967295,C=M+(I<<16&4294967295|I>>>16),I=A+(C^M^x)+N[10]+3200236656&4294967295,A=C+(I<<23&4294967295|I>>>9),I=x+(A^C^M)+N[13]+681279174&4294967295,x=A+(I<<4&4294967295|I>>>28),I=M+(x^A^C)+N[0]+3936430074&4294967295,M=x+(I<<11&4294967295|I>>>21),I=C+(M^x^A)+N[3]+3572445317&4294967295,C=M+(I<<16&4294967295|I>>>16),I=A+(C^M^x)+N[6]+76029189&4294967295,A=C+(I<<23&4294967295|I>>>9),I=x+(A^C^M)+N[9]+3654602809&4294967295,x=A+(I<<4&4294967295|I>>>28),I=M+(x^A^C)+N[12]+3873151461&4294967295,M=x+(I<<11&4294967295|I>>>21),I=C+(M^x^A)+N[15]+530742520&4294967295,C=M+(I<<16&4294967295|I>>>16),I=A+(C^M^x)+N[2]+3299628645&4294967295,A=C+(I<<23&4294967295|I>>>9),I=x+(C^(A|~M))+N[0]+4096336452&4294967295,x=A+(I<<6&4294967295|I>>>26),I=M+(A^(x|~C))+N[7]+1126891415&4294967295,M=x+(I<<10&4294967295|I>>>22),I=C+(x^(M|~A))+N[14]+2878612391&4294967295,C=M+(I<<15&4294967295|I>>>17),I=A+(M^(C|~x))+N[5]+4237533241&4294967295,A=C+(I<<21&4294967295|I>>>11),I=x+(C^(A|~M))+N[12]+1700485571&4294967295,x=A+(I<<6&4294967295|I>>>26),I=M+(A^(x|~C))+N[3]+2399980690&4294967295,M=x+(I<<10&4294967295|I>>>22),I=C+(x^(M|~A))+N[10]+4293915773&4294967295,C=M+(I<<15&4294967295|I>>>17),I=A+(M^(C|~x))+N[1]+2240044497&4294967295,A=C+(I<<21&4294967295|I>>>11),I=x+(C^(A|~M))+N[8]+1873313359&4294967295,x=A+(I<<6&4294967295|I>>>26),I=M+(A^(x|~C))+N[15]+4264355552&4294967295,M=x+(I<<10&4294967295|I>>>22),I=C+(x^(M|~A))+N[6]+2734768916&4294967295,C=M+(I<<15&4294967295|I>>>17),I=A+(M^(C|~x))+N[13]+1309151649&4294967295,A=C+(I<<21&4294967295|I>>>11),I=x+(C^(A|~M))+N[4]+4149444226&4294967295,x=A+(I<<6&4294967295|I>>>26),I=M+(A^(x|~C))+N[11]+3174756917&4294967295,M=x+(I<<10&4294967295|I>>>22),I=C+(x^(M|~A))+N[2]+718787259&4294967295,C=M+(I<<15&4294967295|I>>>17),I=A+(M^(C|~x))+N[9]+3951481745&4294967295,D.g[0]=D.g[0]+x&4294967295,D.g[1]=D.g[1]+(C+(I<<21&4294967295|I>>>11))&4294967295,D.g[2]=D.g[2]+C&4294967295,D.g[3]=D.g[3]+M&4294967295}s.prototype.v=function(D,x){x===void 0&&(x=D.length);const A=x-this.blockSize,N=this.C;let C=this.h,M=0;for(;M<x;){if(C==0)for(;M<=A;)o(this,D,M),M+=this.blockSize;if(typeof D=="string"){for(;M<x;)if(N[C++]=D.charCodeAt(M++),C==this.blockSize){o(this,N),C=0;break}}else for(;M<x;)if(N[C++]=D[M++],C==this.blockSize){o(this,N),C=0;break}}this.h=C,this.o+=x},s.prototype.A=function(){var D=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);D[0]=128;for(var x=1;x<D.length-8;++x)D[x]=0;x=this.o*8;for(var A=D.length-8;A<D.length;++A)D[A]=x&255,x/=256;for(this.v(D),D=Array(16),x=0,A=0;A<4;++A)for(let N=0;N<32;N+=8)D[x++]=this.g[A]>>>N&255;return D};function u(D,x){var A=m;return Object.prototype.hasOwnProperty.call(A,D)?A[D]:A[D]=x(D)}function f(D,x){this.h=x;const A=[];let N=!0;for(let C=D.length-1;C>=0;C--){const M=D[C]|0;N&&M==x||(A[C]=M,N=!1)}this.g=A}var m={};function p(D){return-128<=D&&D<128?u(D,function(x){return new f([x|0],x<0?-1:0)}):new f([D|0],D<0?-1:0)}function g(D){if(isNaN(D)||!isFinite(D))return T;if(D<0)return z(g(-D));const x=[];let A=1;for(let N=0;D>=A;N++)x[N]=D/A|0,A*=4294967296;return new f(x,0)}function E(D,x){if(D.length==0)throw Error("number format error: empty string");if(x=x||10,x<2||36<x)throw Error("radix out of range: "+x);if(D.charAt(0)=="-")return z(E(D.substring(1),x));if(D.indexOf("-")>=0)throw Error('number format error: interior "-" character');const A=g(Math.pow(x,8));let N=T;for(let M=0;M<D.length;M+=8){var C=Math.min(8,D.length-M);const I=parseInt(D.substring(M,M+C),x);C<8?(C=g(Math.pow(x,C)),N=N.j(C).add(g(I))):(N=N.j(A),N=N.add(g(I)))}return N}var T=p(0),R=p(1),L=p(16777216);r=f.prototype,r.m=function(){if(G(this))return-z(this).m();let D=0,x=1;for(let A=0;A<this.g.length;A++){const N=this.i(A);D+=(N>=0?N:4294967296+N)*x,x*=4294967296}return D},r.toString=function(D){if(D=D||10,D<2||36<D)throw Error("radix out of range: "+D);if(H(this))return"0";if(G(this))return"-"+z(this).toString(D);const x=g(Math.pow(D,6));var A=this;let N="";for(;;){const C=se(A,x).g;A=W(A,C.j(x));let M=((A.g.length>0?A.g[0]:A.h)>>>0).toString(D);if(A=C,H(A))return M+N;for(;M.length<6;)M="0"+M;N=M+N}},r.i=function(D){return D<0?0:D<this.g.length?this.g[D]:this.h};function H(D){if(D.h!=0)return!1;for(let x=0;x<D.g.length;x++)if(D.g[x]!=0)return!1;return!0}function G(D){return D.h==-1}r.l=function(D){return D=W(this,D),G(D)?-1:H(D)?0:1};function z(D){const x=D.g.length,A=[];for(let N=0;N<x;N++)A[N]=~D.g[N];return new f(A,~D.h).add(R)}r.abs=function(){return G(this)?z(this):this},r.add=function(D){const x=Math.max(this.g.length,D.g.length),A=[];let N=0;for(let C=0;C<=x;C++){let M=N+(this.i(C)&65535)+(D.i(C)&65535),I=(M>>>16)+(this.i(C)>>>16)+(D.i(C)>>>16);N=I>>>16,M&=65535,I&=65535,A[C]=I<<16|M}return new f(A,A[A.length-1]&-2147483648?-1:0)};function W(D,x){return D.add(z(x))}r.j=function(D){if(H(this)||H(D))return T;if(G(this))return G(D)?z(this).j(z(D)):z(z(this).j(D));if(G(D))return z(this.j(z(D)));if(this.l(L)<0&&D.l(L)<0)return g(this.m()*D.m());const x=this.g.length+D.g.length,A=[];for(var N=0;N<2*x;N++)A[N]=0;for(N=0;N<this.g.length;N++)for(let C=0;C<D.g.length;C++){const M=this.i(N)>>>16,I=this.i(N)&65535,Ee=D.i(C)>>>16,at=D.i(C)&65535;A[2*N+2*C]+=I*at,K(A,2*N+2*C),A[2*N+2*C+1]+=M*at,K(A,2*N+2*C+1),A[2*N+2*C+1]+=I*Ee,K(A,2*N+2*C+1),A[2*N+2*C+2]+=M*Ee,K(A,2*N+2*C+2)}for(D=0;D<x;D++)A[D]=A[2*D+1]<<16|A[2*D];for(D=x;D<2*x;D++)A[D]=0;return new f(A,0)};function K(D,x){for(;(D[x]&65535)!=D[x];)D[x+1]+=D[x]>>>16,D[x]&=65535,x++}function Z(D,x){this.g=D,this.h=x}function se(D,x){if(H(x))throw Error("division by zero");if(H(D))return new Z(T,T);if(G(D))return x=se(z(D),x),new Z(z(x.g),z(x.h));if(G(x))return x=se(D,z(x)),new Z(z(x.g),x.h);if(D.g.length>30){if(G(D)||G(x))throw Error("slowDivide_ only works with positive integers.");for(var A=R,N=x;N.l(D)<=0;)A=le(A),N=le(N);var C=pe(A,1),M=pe(N,1);for(N=pe(N,2),A=pe(A,2);!H(N);){var I=M.add(N);I.l(D)<=0&&(C=C.add(A),M=I),N=pe(N,1),A=pe(A,1)}return x=W(D,C.j(x)),new Z(C,x)}for(C=T;D.l(x)>=0;){for(A=Math.max(1,Math.floor(D.m()/x.m())),N=Math.ceil(Math.log(A)/Math.LN2),N=N<=48?1:Math.pow(2,N-48),M=g(A),I=M.j(x);G(I)||I.l(D)>0;)A-=N,M=g(A),I=M.j(x);H(M)&&(M=R),C=C.add(M),D=W(D,I)}return new Z(C,D)}r.B=function(D){return se(this,D).h},r.and=function(D){const x=Math.max(this.g.length,D.g.length),A=[];for(let N=0;N<x;N++)A[N]=this.i(N)&D.i(N);return new f(A,this.h&D.h)},r.or=function(D){const x=Math.max(this.g.length,D.g.length),A=[];for(let N=0;N<x;N++)A[N]=this.i(N)|D.i(N);return new f(A,this.h|D.h)},r.xor=function(D){const x=Math.max(this.g.length,D.g.length),A=[];for(let N=0;N<x;N++)A[N]=this.i(N)^D.i(N);return new f(A,this.h^D.h)};function le(D){const x=D.g.length+1,A=[];for(let N=0;N<x;N++)A[N]=D.i(N)<<1|D.i(N-1)>>>31;return new f(A,D.h)}function pe(D,x){const A=x>>5;x%=32;const N=D.g.length-A,C=[];for(let M=0;M<N;M++)C[M]=x>0?D.i(M+A)>>>x|D.i(M+A+1)<<32-x:D.i(M+A);return new f(C,D.h)}s.prototype.digest=s.prototype.A,s.prototype.reset=s.prototype.u,s.prototype.update=s.prototype.v,FT=s,f.prototype.add=f.prototype.add,f.prototype.multiply=f.prototype.j,f.prototype.modulo=f.prototype.B,f.prototype.compare=f.prototype.l,f.prototype.toNumber=f.prototype.m,f.prototype.toString=f.prototype.toString,f.prototype.getBits=f.prototype.i,f.fromNumber=g,f.fromString=E,ms=f}).apply(typeof V0<"u"?V0:typeof self<"u"?self:typeof window<"u"?window:{});var lh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var GT,Hl,QT,Eh,ep,YT,KT,$T;(function(){var r,e=Object.defineProperty;function n(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof lh=="object"&&lh];for(var y=0;y<c.length;++y){var _=c[y];if(_&&_.Math==Math)return _}throw Error("Cannot find global object")}var s=n(this);function o(c,y){if(y)e:{var _=s;c=c.split(".");for(var w=0;w<c.length-1;w++){var j=c[w];if(!(j in _))break e;_=_[j]}c=c[c.length-1],w=_[c],y=y(w),y!=w&&y!=null&&e(_,c,{configurable:!0,writable:!0,value:y})}}o("Symbol.dispose",function(c){return c||Symbol("Symbol.dispose")}),o("Array.prototype.values",function(c){return c||function(){return this[Symbol.iterator]()}}),o("Object.entries",function(c){return c||function(y){var _=[],w;for(w in y)Object.prototype.hasOwnProperty.call(y,w)&&_.push([w,y[w]]);return _}});var u=u||{},f=this||self;function m(c){var y=typeof c;return y=="object"&&c!=null||y=="function"}function p(c,y,_){return c.call.apply(c.bind,arguments)}function g(c,y,_){return g=p,g.apply(null,arguments)}function E(c,y){var _=Array.prototype.slice.call(arguments,1);return function(){var w=_.slice();return w.push.apply(w,arguments),c.apply(this,w)}}function T(c,y){function _(){}_.prototype=y.prototype,c.Z=y.prototype,c.prototype=new _,c.prototype.constructor=c,c.Ob=function(w,j,Q){for(var oe=Array(arguments.length-2),Ne=2;Ne<arguments.length;Ne++)oe[Ne-2]=arguments[Ne];return y.prototype[j].apply(w,oe)}}var R=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?c=>c&&AsyncContext.Snapshot.wrap(c):c=>c;function L(c){const y=c.length;if(y>0){const _=Array(y);for(let w=0;w<y;w++)_[w]=c[w];return _}return[]}function H(c,y){for(let w=1;w<arguments.length;w++){const j=arguments[w];var _=typeof j;if(_=_!="object"?_:j?Array.isArray(j)?"array":_:"null",_=="array"||_=="object"&&typeof j.length=="number"){_=c.length||0;const Q=j.length||0;c.length=_+Q;for(let oe=0;oe<Q;oe++)c[_+oe]=j[oe]}else c.push(j)}}class G{constructor(y,_){this.i=y,this.j=_,this.h=0,this.g=null}get(){let y;return this.h>0?(this.h--,y=this.g,this.g=y.next,y.next=null):y=this.i(),y}}function z(c){f.setTimeout(()=>{throw c},0)}function W(){var c=D;let y=null;return c.g&&(y=c.g,c.g=c.g.next,c.g||(c.h=null),y.next=null),y}class K{constructor(){this.h=this.g=null}add(y,_){const w=Z.get();w.set(y,_),this.h?this.h.next=w:this.g=w,this.h=w}}var Z=new G(()=>new se,c=>c.reset());class se{constructor(){this.next=this.g=this.h=null}set(y,_){this.h=y,this.g=_,this.next=null}reset(){this.next=this.g=this.h=null}}let le,pe=!1,D=new K,x=()=>{const c=Promise.resolve(void 0);le=()=>{c.then(A)}};function A(){for(var c;c=W();){try{c.h.call(c.g)}catch(_){z(_)}var y=Z;y.j(c),y.h<100&&(y.h++,c.next=y.g,y.g=c)}pe=!1}function N(){this.u=this.u,this.C=this.C}N.prototype.u=!1,N.prototype.dispose=function(){this.u||(this.u=!0,this.N())},N.prototype[Symbol.dispose]=function(){this.dispose()},N.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function C(c,y){this.type=c,this.g=this.target=y,this.defaultPrevented=!1}C.prototype.h=function(){this.defaultPrevented=!0};var M=(function(){if(!f.addEventListener||!Object.defineProperty)return!1;var c=!1,y=Object.defineProperty({},"passive",{get:function(){c=!0}});try{const _=()=>{};f.addEventListener("test",_,y),f.removeEventListener("test",_,y)}catch{}return c})();function I(c){return/^[\s\xa0]*$/.test(c)}function Ee(c,y){C.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c&&this.init(c,y)}T(Ee,C),Ee.prototype.init=function(c,y){const _=this.type=c.type,w=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;this.target=c.target||c.srcElement,this.g=y,y=c.relatedTarget,y||(_=="mouseover"?y=c.fromElement:_=="mouseout"&&(y=c.toElement)),this.relatedTarget=y,w?(this.clientX=w.clientX!==void 0?w.clientX:w.pageX,this.clientY=w.clientY!==void 0?w.clientY:w.pageY,this.screenX=w.screenX||0,this.screenY=w.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=c.pointerType,this.state=c.state,this.i=c,c.defaultPrevented&&Ee.Z.h.call(this)},Ee.prototype.h=function(){Ee.Z.h.call(this);const c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var at="closure_listenable_"+(Math.random()*1e6|0),$=0;function X(c,y,_,w,j){this.listener=c,this.proxy=null,this.src=y,this.type=_,this.capture=!!w,this.ha=j,this.key=++$,this.da=this.fa=!1}function ce(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function de(c,y,_){for(const w in c)y.call(_,c[w],w,c)}function Pe(c,y){for(const _ in c)y.call(void 0,c[_],_,c)}function k(c){const y={};for(const _ in c)y[_]=c[_];return y}const ne="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ue(c,y){let _,w;for(let j=1;j<arguments.length;j++){w=arguments[j];for(_ in w)c[_]=w[_];for(let Q=0;Q<ne.length;Q++)_=ne[Q],Object.prototype.hasOwnProperty.call(w,_)&&(c[_]=w[_])}}function fe(c){this.src=c,this.g={},this.h=0}fe.prototype.add=function(c,y,_,w,j){const Q=c.toString();c=this.g[Q],c||(c=this.g[Q]=[],this.h++);const oe=_e(c,y,w,j);return oe>-1?(y=c[oe],_||(y.fa=!1)):(y=new X(y,this.src,Q,!!w,j),y.fa=_,c.push(y)),y};function ve(c,y){const _=y.type;if(_ in c.g){var w=c.g[_],j=Array.prototype.indexOf.call(w,y,void 0),Q;(Q=j>=0)&&Array.prototype.splice.call(w,j,1),Q&&(ce(y),c.g[_].length==0&&(delete c.g[_],c.h--))}}function _e(c,y,_,w){for(let j=0;j<c.length;++j){const Q=c[j];if(!Q.da&&Q.listener==y&&Q.capture==!!_&&Q.ha==w)return j}return-1}var Se="closure_lm_"+(Math.random()*1e6|0),et={};function Qe(c,y,_,w,j){if(Array.isArray(y)){for(let Q=0;Q<y.length;Q++)Qe(c,y[Q],_,w,j);return null}return _=Uo(_),c&&c[at]?c.J(y,_,m(w)?!!w.capture:!1,j):vn(c,y,_,!1,w,j)}function vn(c,y,_,w,j,Q){if(!y)throw Error("Invalid event type");const oe=m(j)?!!j.capture:!!j;let Ne=Cs(c);if(Ne||(c[Se]=Ne=new fe(c)),_=Ne.add(y,_,w,oe,Q),_.proxy)return _;if(w=an(),_.proxy=w,w.src=c,w.listener=_,c.addEventListener)M||(j=oe),j===void 0&&(j=!1),c.addEventListener(y.toString(),w,j);else if(c.attachEvent)c.attachEvent(Ht(y.toString()),w);else if(c.addListener&&c.removeListener)c.addListener(w);else throw Error("addEventListener and attachEvent are unavailable.");return _}function an(){function c(_){return y.call(c.src,c.listener,_)}const y=hn;return c}function Wi(c,y,_,w,j){if(Array.isArray(y))for(var Q=0;Q<y.length;Q++)Wi(c,y[Q],_,w,j);else w=m(w)?!!w.capture:!!w,_=Uo(_),c&&c[at]?(c=c.i,Q=String(y).toString(),Q in c.g&&(y=c.g[Q],_=_e(y,_,w,j),_>-1&&(ce(y[_]),Array.prototype.splice.call(y,_,1),y.length==0&&(delete c.g[Q],c.h--)))):c&&(c=Cs(c))&&(y=c.g[y.toString()],c=-1,y&&(c=_e(y,_,w,j)),(_=c>-1?y[c]:null)&&qn(_))}function qn(c){if(typeof c!="number"&&c&&!c.da){var y=c.src;if(y&&y[at])ve(y.i,c);else{var _=c.type,w=c.proxy;y.removeEventListener?y.removeEventListener(_,w,c.capture):y.detachEvent?y.detachEvent(Ht(_),w):y.addListener&&y.removeListener&&y.removeListener(w),(_=Cs(y))?(ve(_,c),_.h==0&&(_.src=null,y[Se]=null)):ce(c)}}}function Ht(c){return c in et?et[c]:et[c]="on"+c}function hn(c,y){if(c.da)c=!0;else{y=new Ee(y,this);const _=c.listener,w=c.ha||c.src;c.fa&&qn(c),c=_.call(w,y)}return c}function Cs(c){return c=c[Se],c instanceof fe?c:null}var Lo="__closure_events_fn_"+(Math.random()*1e9>>>0);function Uo(c){return typeof c=="function"?c:(c[Lo]||(c[Lo]=function(y){return c.handleEvent(y)}),c[Lo])}function wt(){N.call(this),this.i=new fe(this),this.M=this,this.G=null}T(wt,N),wt.prototype[at]=!0,wt.prototype.removeEventListener=function(c,y,_,w){Wi(this,c,y,_,w)};function zt(c,y){var _,w=c.G;if(w)for(_=[];w;w=w.G)_.push(w);if(c=c.M,w=y.type||y,typeof y=="string")y=new C(y,c);else if(y instanceof C)y.target=y.target||c;else{var j=y;y=new C(w,c),ue(y,j)}j=!0;let Q,oe;if(_)for(oe=_.length-1;oe>=0;oe--)Q=y.g=_[oe],j=Cr(Q,w,!0,y)&&j;if(Q=y.g=c,j=Cr(Q,w,!0,y)&&j,j=Cr(Q,w,!1,y)&&j,_)for(oe=0;oe<_.length;oe++)Q=y.g=_[oe],j=Cr(Q,w,!1,y)&&j}wt.prototype.N=function(){if(wt.Z.N.call(this),this.i){var c=this.i;for(const y in c.g){const _=c.g[y];for(let w=0;w<_.length;w++)ce(_[w]);delete c.g[y],c.h--}}this.G=null},wt.prototype.J=function(c,y,_,w){return this.i.add(String(c),y,!1,_,w)},wt.prototype.K=function(c,y,_,w){return this.i.add(String(c),y,!0,_,w)};function Cr(c,y,_,w){if(y=c.i.g[String(y)],!y)return!0;y=y.concat();let j=!0;for(let Q=0;Q<y.length;++Q){const oe=y[Q];if(oe&&!oe.da&&oe.capture==_){const Ne=oe.listener,Tt=oe.ha||oe.src;oe.fa&&ve(c.i,oe),j=Ne.call(Tt,w)!==!1&&j}}return j&&!w.defaultPrevented}function bf(c,y){if(typeof c!="function")if(c&&typeof c.handleEvent=="function")c=g(c.handleEvent,c);else throw Error("Invalid listener argument");return Number(y)>2147483647?-1:f.setTimeout(c,y||0)}function Nu(c){c.g=bf(()=>{c.g=null,c.i&&(c.i=!1,Nu(c))},c.l);const y=c.h;c.h=null,c.m.apply(null,y)}class fn extends N{constructor(y,_){super(),this.m=y,this.l=_,this.h=null,this.i=!1,this.g=null}j(y){this.h=arguments,this.g?this.i=!0:Nu(this)}N(){super.N(),this.g&&(f.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function xs(c){N.call(this),this.h=c,this.g={}}T(xs,N);var jo=[];function zo(c){de(c.g,function(y,_){this.g.hasOwnProperty(_)&&qn(y)},c),c.g={}}xs.prototype.N=function(){xs.Z.N.call(this),zo(this)},xs.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var xr=f.JSON.stringify,Sf=f.JSON.parse,Ou=class{stringify(c){return f.JSON.stringify(c,void 0)}parse(c){return f.JSON.parse(c,void 0)}};function Mu(){}function Vu(){}var ii={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function $t(){C.call(this,"d")}T($t,C);function Hn(){C.call(this,"c")}T(Hn,C);var Et={},ku=null;function va(){return ku=ku||new wt}Et.Ia="serverreachability";function Pu(c){C.call(this,Et.Ia,c)}T(Pu,C);function Ti(c){const y=va();zt(y,new Pu(y))}Et.STAT_EVENT="statevent";function Is(c,y){C.call(this,Et.STAT_EVENT,c),this.stat=y}T(Is,C);function Rt(c){const y=va();zt(y,new Is(y,c))}Et.Ja="timingevent";function bi(c,y){C.call(this,Et.Ja,c),this.size=y}T(bi,C);function Si(c,y){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return f.setTimeout(function(){c()},y)}function ri(){this.g=!0}ri.prototype.ua=function(){this.g=!1};function Af(c,y,_,w,j,Q){c.info(function(){if(c.g)if(Q){var oe="",Ne=Q.split("&");for(let $e=0;$e<Ne.length;$e++){var Tt=Ne[$e].split("=");if(Tt.length>1){const ht=Tt[0];Tt=Tt[1];const Yn=ht.split("_");oe=Yn.length>=2&&Yn[1]=="type"?oe+(ht+"="+Tt+"&"):oe+(ht+"=redacted&")}}}else oe=null;else oe=Q;return"XMLHTTP REQ ("+w+") [attempt "+j+"]: "+y+`
`+_+`
`+oe})}function Lu(c,y,_,w,j,Q,oe){c.info(function(){return"XMLHTTP RESP ("+w+") [ attempt "+j+"]: "+y+`
`+_+`
`+Q+" "+oe})}function Ai(c,y,_,w){c.info(function(){return"XMLHTTP TEXT ("+y+"): "+wf(c,_)+(w?" "+w:"")})}function Ds(c,y){c.info(function(){return"TIMEOUT: "+y})}ri.prototype.info=function(){};function wf(c,y){if(!c.g)return y;if(!y)return null;try{const Q=JSON.parse(y);if(Q){for(c=0;c<Q.length;c++)if(Array.isArray(Q[c])){var _=Q[c];if(!(_.length<2)){var w=_[1];if(Array.isArray(w)&&!(w.length<1)){var j=w[0];if(j!="noop"&&j!="stop"&&j!="close")for(let oe=1;oe<w.length;oe++)w[oe]=""}}}}return xr(Q)}catch{return y}}var Ns={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Bo={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},qo;function Os(){}T(Os,Mu),Os.prototype.g=function(){return new XMLHttpRequest},qo=new Os;function Ji(c){return encodeURIComponent(String(c))}function Uu(c){var y=1;c=c.split(":");const _=[];for(;y>0&&c.length;)_.push(c.shift()),y--;return c.length&&_.push(c.join(":")),_}function si(c,y,_,w){this.j=c,this.i=y,this.l=_,this.S=w||1,this.V=new xs(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new ai}function ai(){this.i=null,this.g="",this.h=!1}var Ct={},Ft={};function wi(c,y,_){c.M=1,c.A=Ms(It(y)),c.u=_,c.R=!0,_a(c,null)}function _a(c,y){c.F=Date.now(),Ri(c),c.B=It(c.A);var _=c.B,w=c.S;Array.isArray(w)||(w=[String(w)]),Sa(_.i,"t",w),c.C=0,_=c.j.L,c.h=new ai,c.g=Zu(c.j,_?y:null,!c.u),c.P>0&&(c.O=new fn(g(c.Y,c,c.g),c.P)),y=c.V,_=c.g,w=c.ba;var j="readystatechange";Array.isArray(j)||(j&&(jo[0]=j.toString()),j=jo);for(let Q=0;Q<j.length;Q++){const oe=Qe(_,j[Q],w||y.handleEvent,!1,y.h||y);if(!oe)break;y.g[oe.key]=oe}y=c.J?k(c.J):{},c.u?(c.v||(c.v="POST"),y["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.B,c.v,c.u,y)):(c.v="GET",c.g.ea(c.B,c.v,null,y)),Ti(),Af(c.i,c.v,c.B,c.l,c.S,c.u)}si.prototype.ba=function(c){c=c.target;const y=this.O;y&&ui(c)==3?y.j():this.Y(c)},si.prototype.Y=function(c){try{if(c==this.g)e:{const Ne=ui(this.g),Tt=this.g.ya(),$e=this.g.ca();if(!(Ne<3)&&(Ne!=3||this.g&&(this.h.h||this.g.la()||Xt(this.g)))){this.K||Ne!=4||Tt==7||(Tt==8||$e<=0?Ti(3):Ti(2)),Ci(this);var y=this.g.ca();this.X=y;var _=Rf(this);if(this.o=y==200,Lu(this.i,this.v,this.B,this.l,this.S,Ne,y),this.o){if(this.U&&!this.L){t:{if(this.g){var w,j=this.g;if((w=j.g?j.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!I(w)){var Q=w;break t}}Q=null}if(c=Q)Ai(this.i,this.l,c,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,xi(this,c);else{this.o=!1,this.m=3,Rt(12),Cn(this),Fn(this);break e}}if(this.R){c=!0;let ht;for(;!this.K&&this.C<_.length;)if(ht=zu(this,_),ht==Ft){Ne==4&&(this.m=4,Rt(14),c=!1),Ai(this.i,this.l,null,"[Incomplete Response]");break}else if(ht==Ct){this.m=4,Rt(15),Ai(this.i,this.l,_,"[Invalid Chunk]"),c=!1;break}else Ai(this.i,this.l,ht,null),xi(this,ht);if(ju(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ne!=4||_.length!=0||this.h.h||(this.m=1,Rt(16),c=!1),this.o=this.o&&c,!c)Ai(this.i,this.l,_,"[Invalid Chunked Response]"),Cn(this),Fn(this);else if(_.length>0&&!this.W){this.W=!0;var oe=this.j;oe.g==this&&oe.aa&&!oe.P&&(oe.j.info("Great, no buffering proxy detected. Bytes received: "+_.length),il(oe),oe.P=!0,Rt(11))}}else Ai(this.i,this.l,_,null),xi(this,_);Ne==4&&Cn(this),this.o&&!this.K&&(Ne==4?$u(this.j,this):(this.o=!1,Ri(this)))}else er(this.g),y==400&&_.indexOf("Unknown SID")>0?(this.m=3,Rt(12)):(this.m=0,Rt(13)),Cn(this),Fn(this)}}}catch{}};function Rf(c){if(!ju(c))return c.g.la();const y=Xt(c.g);if(y==="")return"";let _="";const w=y.length,j=ui(c.g)==4;if(!c.h.i){if(typeof TextDecoder>"u")return Cn(c),Fn(c),"";c.h.i=new f.TextDecoder}for(let Q=0;Q<w;Q++)c.h.h=!0,_+=c.h.i.decode(y[Q],{stream:!(j&&Q==w-1)});return y.length=0,c.h.g+=_,c.C=0,c.h.g}function ju(c){return c.g?c.v=="GET"&&c.M!=2&&c.j.Aa:!1}function zu(c,y){var _=c.C,w=y.indexOf(`
`,_);return w==-1?Ft:(_=Number(y.substring(_,w)),isNaN(_)?Ct:(w+=1,w+_>y.length?Ft:(y=y.slice(w,w+_),c.C=w+_,y)))}si.prototype.cancel=function(){this.K=!0,Cn(this)};function Ri(c){c.T=Date.now()+c.H,Ea(c,c.H)}function Ea(c,y){if(c.D!=null)throw Error("WatchDog timer not null");c.D=Si(g(c.aa,c),y)}function Ci(c){c.D&&(f.clearTimeout(c.D),c.D=null)}si.prototype.aa=function(){this.D=null;const c=Date.now();c-this.T>=0?(Ds(this.i,this.B),this.M!=2&&(Ti(),Rt(17)),Cn(this),this.m=2,Fn(this)):Ea(this,this.T-c)};function Fn(c){c.j.I==0||c.K||$u(c.j,c)}function Cn(c){Ci(c);var y=c.O;y&&typeof y.dispose=="function"&&y.dispose(),c.O=null,zo(c.V),c.g&&(y=c.g,c.g=null,y.abort(),y.dispose())}function xi(c,y){try{var _=c.j;if(_.I!=0&&(_.g==c||Di(_.h,c))){if(!c.L&&Di(_.h,c)&&_.I==3){try{var w=_.Ba.g.parse(y)}catch{w=null}if(Array.isArray(w)&&w.length==3){var j=w;if(j[0]==0){e:if(!_.v){if(_.g)if(_.g.F+3e3<c.F)xa(_),Pr(_);else break e;zs(_),Rt(18)}}else _.xa=j[1],0<_.xa-_.K&&j[2]<37500&&_.F&&_.A==0&&!_.C&&(_.C=Si(g(_.Va,_),6e3));Ii(_.h)<=1&&_.ta&&(_.ta=void 0)}else Pi(_,11)}else if((c.L||_.g==c)&&xa(_),!I(y))for(j=_.Ba.g.parse(y),y=0;y<j.length;y++){let $e=j[y];const ht=$e[0];if(!(ht<=_.K))if(_.K=ht,$e=$e[1],_.I==2)if($e[0]=="c"){_.M=$e[1],_.ba=$e[2];const Yn=$e[3];Yn!=null&&(_.ka=Yn,_.j.info("VER="+_.ka));const Li=$e[4];Li!=null&&(_.za=Li,_.j.info("SVER="+_.za));const ci=$e[5];ci!=null&&typeof ci=="number"&&ci>0&&(w=1.5*ci,_.O=w,_.j.info("backChannelRequestTimeoutMs_="+w)),w=_;const hi=c.g;if(hi){const Bs=hi.g?hi.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Bs){var Q=w.h;Q.g||Bs.indexOf("spdy")==-1&&Bs.indexOf("quic")==-1&&Bs.indexOf("h2")==-1||(Q.j=Q.l,Q.g=new Set,Q.h&&(Go(Q,Q.h),Q.h=null))}if(w.G){const Ia=hi.g?hi.g.getResponseHeader("X-HTTP-Session-Id"):null;Ia&&(w.wa=Ia,We(w.J,w.G,Ia))}}_.I=3,_.l&&_.l.ra(),_.aa&&(_.T=Date.now()-c.F,_.j.info("Handshake RTT: "+_.T+"ms")),w=_;var oe=c;if(w.na=Ju(w,w.L?w.ba:null,w.W),oe.L){Qo(w.h,oe);var Ne=oe,Tt=w.O;Tt&&(Ne.H=Tt),Ne.D&&(Ci(Ne),Ri(Ne)),w.g=oe}else Yu(w);_.i.length>0&&ki(_)}else $e[0]!="stop"&&$e[0]!="close"||Pi(_,7);else _.I==3&&($e[0]=="stop"||$e[0]=="close"?$e[0]=="stop"?Pi(_,7):tl(_):$e[0]!="noop"&&_.l&&_.l.qa($e),_.A=0)}}Ti(4)}catch{}}var xt=class{constructor(c,y){this.g=c,this.map=y}};function Ho(c){this.l=c||10,f.PerformanceNavigationTiming?(c=f.performance.getEntriesByType("navigation"),c=c.length>0&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(f.chrome&&f.chrome.loadTimes&&f.chrome.loadTimes()&&f.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Fo(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function Ii(c){return c.h?1:c.g?c.g.size:0}function Di(c,y){return c.h?c.h==y:c.g?c.g.has(y):!1}function Go(c,y){c.g?c.g.add(y):c.h=y}function Qo(c,y){c.h&&c.h==y?c.h=null:c.g&&c.g.has(y)&&c.g.delete(y)}Ho.prototype.cancel=function(){if(this.i=Yo(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const c of this.g.values())c.cancel();this.g.clear()}};function Yo(c){if(c.h!=null)return c.i.concat(c.h.G);if(c.g!=null&&c.g.size!==0){let y=c.i;for(const _ of c.g.values())y=y.concat(_.G);return y}return L(c.i)}var Bu=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ta(c,y){if(c){c=c.split("&");for(let _=0;_<c.length;_++){const w=c[_].indexOf("=");let j,Q=null;w>=0?(j=c[_].substring(0,w),Q=c[_].substring(w+1)):j=c[_],y(j,Q?decodeURIComponent(Q.replace(/\+/g," ")):"")}}}function xn(c){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let y;c instanceof xn?(this.l=c.l,Gt(this,c.j),this.o=c.o,this.g=c.g,Ir(this,c.u),this.h=c.h,Ko(this,Gu(c.i)),this.m=c.m):c&&(y=String(c).match(Bu))?(this.l=!1,Gt(this,y[1]||"",!0),this.o=Ni(y[2]||""),this.g=Ni(y[3]||"",!0),Ir(this,y[4]),this.h=Ni(y[5]||"",!0),Ko(this,y[6]||"",!0),this.m=Ni(y[7]||"")):(this.l=!1,this.i=new Nr(null,this.l))}xn.prototype.toString=function(){const c=[];var y=this.j;y&&c.push(Vs(y,ba,!0),":");var _=this.g;return(_||y=="file")&&(c.push("//"),(y=this.o)&&c.push(Vs(y,ba,!0),"@"),c.push(Ji(_).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),_=this.u,_!=null&&c.push(":",String(_))),(_=this.h)&&(this.g&&_.charAt(0)!="/"&&c.push("/"),c.push(Vs(_,_.charAt(0)=="/"?$o:qu,!0))),(_=this.i.toString())&&c.push("?",_),(_=this.m)&&c.push("#",Vs(_,Hu)),c.join("")},xn.prototype.resolve=function(c){const y=It(this);let _=!!c.j;_?Gt(y,c.j):_=!!c.o,_?y.o=c.o:_=!!c.g,_?y.g=c.g:_=c.u!=null;var w=c.h;if(_)Ir(y,c.u);else if(_=!!c.h){if(w.charAt(0)!="/")if(this.g&&!this.h)w="/"+w;else{var j=y.h.lastIndexOf("/");j!=-1&&(w=y.h.slice(0,j+1)+w)}if(j=w,j==".."||j==".")w="";else if(j.indexOf("./")!=-1||j.indexOf("/.")!=-1){w=j.lastIndexOf("/",0)==0,j=j.split("/");const Q=[];for(let oe=0;oe<j.length;){const Ne=j[oe++];Ne=="."?w&&oe==j.length&&Q.push(""):Ne==".."?((Q.length>1||Q.length==1&&Q[0]!="")&&Q.pop(),w&&oe==j.length&&Q.push("")):(Q.push(Ne),w=!0)}w=Q.join("/")}else w=j}return _?y.h=w:_=c.i.toString()!=="",_?Ko(y,Gu(c.i)):_=!!c.m,_&&(y.m=c.m),y};function It(c){return new xn(c)}function Gt(c,y,_){c.j=_?Ni(y,!0):y,c.j&&(c.j=c.j.replace(/:$/,""))}function Ir(c,y){if(y){if(y=Number(y),isNaN(y)||y<0)throw Error("Bad port number "+y);c.u=y}else c.u=null}function Ko(c,y,_){y instanceof Nr?(c.i=y,Aa(c.i,c.l)):(_||(y=Vs(y,Dr)),c.i=new Nr(y,c.l))}function We(c,y,_){c.i.set(y,_)}function Ms(c){return We(c,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),c}function Ni(c,y){return c?y?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function Vs(c,y,_){return typeof c=="string"?(c=encodeURI(c).replace(y,_n),_&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function _n(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var ba=/[#\/\?@]/g,qu=/[#\?:]/g,$o=/[#\?]/g,Dr=/[#\?@]/g,Hu=/#/g;function Nr(c,y){this.h=this.g=null,this.i=c||null,this.j=!!y}function En(c){c.g||(c.g=new Map,c.h=0,c.i&&Ta(c.i,function(y,_){c.add(decodeURIComponent(y.replace(/\+/g," ")),_)}))}r=Nr.prototype,r.add=function(c,y){En(this),this.i=null,c=Or(this,c);let _=this.g.get(c);return _||this.g.set(c,_=[]),_.push(y),this.h+=1,this};function Fu(c,y){En(c),y=Or(c,y),c.g.has(y)&&(c.i=null,c.h-=c.g.get(y).length,c.g.delete(y))}function Xo(c,y){return En(c),y=Or(c,y),c.g.has(y)}r.forEach=function(c,y){En(this),this.g.forEach(function(_,w){_.forEach(function(j){c.call(y,j,w,this)},this)},this)};function Wo(c,y){En(c);let _=[];if(typeof y=="string")Xo(c,y)&&(_=_.concat(c.g.get(Or(c,y))));else for(c=Array.from(c.g.values()),y=0;y<c.length;y++)_=_.concat(c[y]);return _}r.set=function(c,y){return En(this),this.i=null,c=Or(this,c),Xo(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[y]),this.h+=1,this},r.get=function(c,y){return c?(c=Wo(this,c),c.length>0?String(c[0]):y):y};function Sa(c,y,_){Fu(c,y),_.length>0&&(c.i=null,c.g.set(Or(c,y),L(_)),c.h+=_.length)}r.toString=function(){if(this.i)return this.i;if(!this.g)return"";const c=[],y=Array.from(this.g.keys());for(let w=0;w<y.length;w++){var _=y[w];const j=Ji(_);_=Wo(this,_);for(let Q=0;Q<_.length;Q++){let oe=j;_[Q]!==""&&(oe+="="+Ji(_[Q])),c.push(oe)}}return this.i=c.join("&")};function Gu(c){const y=new Nr;return y.i=c.i,c.g&&(y.g=new Map(c.g),y.h=c.h),y}function Or(c,y){return y=String(y),c.j&&(y=y.toLowerCase()),y}function Aa(c,y){y&&!c.j&&(En(c),c.i=null,c.g.forEach(function(_,w){const j=w.toLowerCase();w!=j&&(Fu(this,w),Sa(this,j,_))},c)),c.j=y}function oi(c,y){const _=new ri;if(f.Image){const w=new Image;w.onload=E(Gn,_,"TestLoadImage: loaded",!0,y,w),w.onerror=E(Gn,_,"TestLoadImage: error",!1,y,w),w.onabort=E(Gn,_,"TestLoadImage: abort",!1,y,w),w.ontimeout=E(Gn,_,"TestLoadImage: timeout",!1,y,w),f.setTimeout(function(){w.ontimeout&&w.ontimeout()},1e4),w.src=c}else y(!1)}function Jo(c,y){const _=new ri,w=new AbortController,j=setTimeout(()=>{w.abort(),Gn(_,"TestPingServer: timeout",!1,y)},1e4);fetch(c,{signal:w.signal}).then(Q=>{clearTimeout(j),Q.ok?Gn(_,"TestPingServer: ok",!0,y):Gn(_,"TestPingServer: server error",!1,y)}).catch(()=>{clearTimeout(j),Gn(_,"TestPingServer: error",!1,y)})}function Gn(c,y,_,w,j){try{j&&(j.onload=null,j.onerror=null,j.onabort=null,j.ontimeout=null),w(_)}catch{}}function Mr(){this.g=new Ou}function Oi(c){this.i=c.Sb||null,this.h=c.ab||!1}T(Oi,Mu),Oi.prototype.g=function(){return new ks(this.i,this.h)};function ks(c,y){wt.call(this),this.H=c,this.o=y,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}T(ks,wt),r=ks.prototype,r.open=function(c,y){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=c,this.D=y,this.readyState=1,li(this)},r.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const y={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};c&&(y.body=c),(this.H||f).fetch(new Request(this.D,y)).then(this.Pa.bind(this),this.ga.bind(this))},r.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Vr(this)),this.readyState=0},r.Pa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,li(this)),this.g&&(this.readyState=3,li(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof f.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;wa(this)}else c.text().then(this.Oa.bind(this),this.ga.bind(this))};function wa(c){c.j.read().then(c.Ma.bind(c)).catch(c.ga.bind(c))}r.Ma=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var y=c.value?c.value:new Uint8Array(0);(y=this.B.decode(y,{stream:!c.done}))&&(this.response=this.responseText+=y)}c.done?Vr(this):li(this),this.readyState==3&&wa(this)}},r.Oa=function(c){this.g&&(this.response=this.responseText=c,Vr(this))},r.Na=function(c){this.g&&(this.response=c,Vr(this))},r.ga=function(){this.g&&Vr(this)};function Vr(c){c.readyState=4,c.l=null,c.j=null,c.B=null,li(c)}r.setRequestHeader=function(c,y){this.A.append(c,y)},r.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},r.getAllResponseHeaders=function(){if(!this.h)return"";const c=[],y=this.h.entries();for(var _=y.next();!_.done;)_=_.value,c.push(_[0]+": "+_[1]),_=y.next();return c.join(`\r
`)};function li(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(ks.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function Qn(c){let y="";return de(c,function(_,w){y+=w,y+=":",y+=_,y+=`\r
`}),y}function Ps(c,y,_){e:{for(w in _){var w=!1;break e}w=!0}w||(_=Qn(_),typeof c=="string"?_!=null&&Ji(_):We(c,y,_))}function tt(c){wt.call(this),this.headers=new Map,this.L=c||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}T(tt,wt);var Mi=/^https?$/i,Zo=["POST","PUT"];r=tt.prototype,r.Fa=function(c){this.H=c},r.ea=function(c,y,_,w){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);y=y?y.toUpperCase():"GET",this.D=c,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():qo.g(),this.g.onreadystatechange=R(g(this.Ca,this));try{this.B=!0,this.g.open(y,String(c),!0),this.B=!1}catch(Q){Ls(this,Q);return}if(c=_||"",_=new Map(this.headers),w)if(Object.getPrototypeOf(w)===Object.prototype)for(var j in w)_.set(j,w[j]);else if(typeof w.keys=="function"&&typeof w.get=="function")for(const Q of w.keys())_.set(Q,w.get(Q));else throw Error("Unknown input type for opt_headers: "+String(w));w=Array.from(_.keys()).find(Q=>Q.toLowerCase()=="content-type"),j=f.FormData&&c instanceof f.FormData,!(Array.prototype.indexOf.call(Zo,y,void 0)>=0)||w||j||_.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Q,oe]of _)this.g.setRequestHeader(Q,oe);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(c),this.v=!1}catch(Q){Ls(this,Q)}};function Ls(c,y){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=y,c.o=5,el(c),Zi(c)}function el(c){c.A||(c.A=!0,zt(c,"complete"),zt(c,"error"))}r.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=c||7,zt(this,"complete"),zt(this,"abort"),Zi(this))},r.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Zi(this,!0)),tt.Z.N.call(this)},r.Ca=function(){this.u||(this.B||this.v||this.j?Us(this):this.Xa())},r.Xa=function(){Us(this)};function Us(c){if(c.h&&typeof u<"u"){if(c.v&&ui(c)==4)setTimeout(c.Ca.bind(c),0);else if(zt(c,"readystatechange"),ui(c)==4){c.h=!1;try{const Q=c.ca();e:switch(Q){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var y=!0;break e;default:y=!1}var _;if(!(_=y)){var w;if(w=Q===0){let oe=String(c.D).match(Bu)[1]||null;!oe&&f.self&&f.self.location&&(oe=f.self.location.protocol.slice(0,-1)),w=!Mi.test(oe?oe.toLowerCase():"")}_=w}if(_)zt(c,"complete"),zt(c,"success");else{c.o=6;try{var j=ui(c)>2?c.g.statusText:""}catch{j=""}c.l=j+" ["+c.ca()+"]",el(c)}}finally{Zi(c)}}}}function Zi(c,y){if(c.g){c.m&&(clearTimeout(c.m),c.m=null);const _=c.g;c.g=null,y||zt(c,"ready");try{_.onreadystatechange=null}catch{}}}r.isActive=function(){return!!this.g};function ui(c){return c.g?c.g.readyState:0}r.ca=function(){try{return ui(this)>2?this.g.status:-1}catch{return-1}},r.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},r.La=function(c){if(this.g){var y=this.g.responseText;return c&&y.indexOf(c)==0&&(y=y.substring(c.length)),Sf(y)}};function Xt(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.F){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function er(c){const y={};c=(c.g&&ui(c)>=2&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let w=0;w<c.length;w++){if(I(c[w]))continue;var _=Uu(c[w]);const j=_[0];if(_=_[1],typeof _!="string")continue;_=_.trim();const Q=y[j]||[];y[j]=Q,Q.push(_)}Pe(y,function(w){return w.join(", ")})}r.ya=function(){return this.o},r.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Vi(c,y,_){return _&&_.internalChannelParams&&_.internalChannelParams[c]||y}function kr(c){this.za=0,this.i=[],this.j=new ri,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Vi("failFast",!1,c),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Vi("baseRetryDelayMs",5e3,c),this.Za=Vi("retryDelaySeedMs",1e4,c),this.Ta=Vi("forwardChannelMaxRetries",2,c),this.va=Vi("forwardChannelRequestTimeoutMs",2e4,c),this.ma=c&&c.xmlHttpFactory||void 0,this.Ua=c&&c.Rb||void 0,this.Aa=c&&c.useFetchStreams||!1,this.O=void 0,this.L=c&&c.supportsCrossDomainXhr||!1,this.M="",this.h=new Ho(c&&c.concurrentRequestLimit),this.Ba=new Mr,this.S=c&&c.fastHandshake||!1,this.R=c&&c.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=c&&c.Pb||!1,c&&c.ua&&this.j.ua(),c&&c.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&c&&c.detectBufferingProxy||!1,this.ia=void 0,c&&c.longPollingTimeout&&c.longPollingTimeout>0&&(this.ia=c.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}r=kr.prototype,r.ka=8,r.I=1,r.connect=function(c,y,_,w){Rt(0),this.W=c,this.H=y||{},_&&w!==void 0&&(this.H.OSID=_,this.H.OAID=w),this.F=this.X,this.J=Ju(this,null,this.W),ki(this)};function tl(c){if(Ra(c),c.I==3){var y=c.V++,_=It(c.J);if(We(_,"SID",c.M),We(_,"RID",y),We(_,"TYPE","terminate"),js(c,_),y=new si(c,c.j,y),y.M=2,y.A=Ms(It(_)),_=!1,f.navigator&&f.navigator.sendBeacon)try{_=f.navigator.sendBeacon(y.A.toString(),"")}catch{}!_&&f.Image&&(new Image().src=y.A,_=!0),_||(y.g=Zu(y.j,null),y.g.ea(y.A)),y.F=Date.now(),Ri(y)}Wu(c)}function Pr(c){c.g&&(il(c),c.g.cancel(),c.g=null)}function Ra(c){Pr(c),c.v&&(f.clearTimeout(c.v),c.v=null),xa(c),c.h.cancel(),c.m&&(typeof c.m=="number"&&f.clearTimeout(c.m),c.m=null)}function ki(c){if(!Fo(c.h)&&!c.m){c.m=!0;var y=c.Ea;le||x(),pe||(le(),pe=!0),D.add(y,c),c.D=0}}function Ca(c,y){return Ii(c.h)>=c.h.j-(c.m?1:0)?!1:c.m?(c.i=y.G.concat(c.i),!0):c.I==1||c.I==2||c.D>=(c.Sa?0:c.Ta)?!1:(c.m=Si(g(c.Ea,c,y),Xu(c,c.D)),c.D++,!0)}r.Ea=function(c){if(this.m)if(this.m=null,this.I==1){if(!c){this.V=Math.floor(Math.random()*1e5),c=this.V++;const j=new si(this,this.j,c);let Q=this.o;if(this.U&&(Q?(Q=k(Q),ue(Q,this.U)):Q=this.U),this.u!==null||this.R||(j.J=Q,Q=null),this.S)e:{for(var y=0,_=0;_<this.i.length;_++){t:{var w=this.i[_];if("__data__"in w.map&&(w=w.map.__data__,typeof w=="string")){w=w.length;break t}w=void 0}if(w===void 0)break;if(y+=w,y>4096){y=_;break e}if(y===4096||_===this.i.length-1){y=_+1;break e}}y=1e3}else y=1e3;y=Qu(this,j,y),_=It(this.J),We(_,"RID",c),We(_,"CVER",22),this.G&&We(_,"X-HTTP-Session-Id",this.G),js(this,_),Q&&(this.R?y="headers="+Ji(Qn(Q))+"&"+y:this.u&&Ps(_,this.u,Q)),Go(this.h,j),this.Ra&&We(_,"TYPE","init"),this.S?(We(_,"$req",y),We(_,"SID","null"),j.U=!0,wi(j,_,null)):wi(j,_,y),this.I=2}}else this.I==3&&(c?nl(this,c):this.i.length==0||Fo(this.h)||nl(this))};function nl(c,y){var _;y?_=y.l:_=c.V++;const w=It(c.J);We(w,"SID",c.M),We(w,"RID",_),We(w,"AID",c.K),js(c,w),c.u&&c.o&&Ps(w,c.u,c.o),_=new si(c,c.j,_,c.D+1),c.u===null&&(_.J=c.o),y&&(c.i=y.G.concat(c.i)),y=Qu(c,_,1e3),_.H=Math.round(c.va*.5)+Math.round(c.va*.5*Math.random()),Go(c.h,_),wi(_,w,y)}function js(c,y){c.H&&de(c.H,function(_,w){We(y,w,_)}),c.l&&de({},function(_,w){We(y,w,_)})}function Qu(c,y,_){_=Math.min(c.i.length,_);const w=c.l?g(c.l.Ka,c.l,c):null;e:{var j=c.i;let Ne=-1;for(;;){const Tt=["count="+_];Ne==-1?_>0?(Ne=j[0].g,Tt.push("ofs="+Ne)):Ne=0:Tt.push("ofs="+Ne);let $e=!0;for(let ht=0;ht<_;ht++){var Q=j[ht].g;const Yn=j[ht].map;if(Q-=Ne,Q<0)Ne=Math.max(0,j[ht].g-100),$e=!1;else try{Q="req"+Q+"_"||"";try{var oe=Yn instanceof Map?Yn:Object.entries(Yn);for(const[Li,ci]of oe){let hi=ci;m(ci)&&(hi=xr(ci)),Tt.push(Q+Li+"="+encodeURIComponent(hi))}}catch(Li){throw Tt.push(Q+"type="+encodeURIComponent("_badmap")),Li}}catch{w&&w(Yn)}}if($e){oe=Tt.join("&");break e}}oe=void 0}return c=c.i.splice(0,_),y.G=c,oe}function Yu(c){if(!c.g&&!c.v){c.Y=1;var y=c.Da;le||x(),pe||(le(),pe=!0),D.add(y,c),c.A=0}}function zs(c){return c.g||c.v||c.A>=3?!1:(c.Y++,c.v=Si(g(c.Da,c),Xu(c,c.A)),c.A++,!0)}r.Da=function(){if(this.v=null,Ku(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var c=4*this.T;this.j.info("BP detection timer enabled: "+c),this.B=Si(g(this.Wa,this),c)}},r.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Rt(10),Pr(this),Ku(this))};function il(c){c.B!=null&&(f.clearTimeout(c.B),c.B=null)}function Ku(c){c.g=new si(c,c.j,"rpc",c.Y),c.u===null&&(c.g.J=c.o),c.g.P=0;var y=It(c.na);We(y,"RID","rpc"),We(y,"SID",c.M),We(y,"AID",c.K),We(y,"CI",c.F?"0":"1"),!c.F&&c.ia&&We(y,"TO",c.ia),We(y,"TYPE","xmlhttp"),js(c,y),c.u&&c.o&&Ps(y,c.u,c.o),c.O&&(c.g.H=c.O);var _=c.g;c=c.ba,_.M=1,_.A=Ms(It(y)),_.u=null,_.R=!0,_a(_,c)}r.Va=function(){this.C!=null&&(this.C=null,Pr(this),zs(this),Rt(19))};function xa(c){c.C!=null&&(f.clearTimeout(c.C),c.C=null)}function $u(c,y){var _=null;if(c.g==y){xa(c),il(c),c.g=null;var w=2}else if(Di(c.h,y))_=y.G,Qo(c.h,y),w=1;else return;if(c.I!=0){if(y.o)if(w==1){_=y.u?y.u.length:0,y=Date.now()-y.F;var j=c.D;w=va(),zt(w,new bi(w,_)),ki(c)}else Yu(c);else if(j=y.m,j==3||j==0&&y.X>0||!(w==1&&Ca(c,y)||w==2&&zs(c)))switch(_&&_.length>0&&(y=c.h,y.i=y.i.concat(_)),j){case 1:Pi(c,5);break;case 4:Pi(c,10);break;case 3:Pi(c,6);break;default:Pi(c,2)}}}function Xu(c,y){let _=c.Qa+Math.floor(Math.random()*c.Za);return c.isActive()||(_*=2),_*y}function Pi(c,y){if(c.j.info("Error code "+y),y==2){var _=g(c.bb,c),w=c.Ua;const j=!w;w=new xn(w||"//www.google.com/images/cleardot.gif"),f.location&&f.location.protocol=="http"||Gt(w,"https"),Ms(w),j?oi(w.toString(),_):Jo(w.toString(),_)}else Rt(2);c.I=0,c.l&&c.l.pa(y),Wu(c),Ra(c)}r.bb=function(c){c?(this.j.info("Successfully pinged google.com"),Rt(2)):(this.j.info("Failed to ping google.com"),Rt(1))};function Wu(c){if(c.I=0,c.ja=[],c.l){const y=Yo(c.h);(y.length!=0||c.i.length!=0)&&(H(c.ja,y),H(c.ja,c.i),c.h.i.length=0,L(c.i),c.i.length=0),c.l.oa()}}function Ju(c,y,_){var w=_ instanceof xn?It(_):new xn(_);if(w.g!="")y&&(w.g=y+"."+w.g),Ir(w,w.u);else{var j=f.location;w=j.protocol,y=y?y+"."+j.hostname:j.hostname,j=+j.port;const Q=new xn(null);w&&Gt(Q,w),y&&(Q.g=y),j&&Ir(Q,j),_&&(Q.h=_),w=Q}return _=c.G,y=c.wa,_&&y&&We(w,_,y),We(w,"VER",c.ka),js(c,w),w}function Zu(c,y,_){if(y&&!c.L)throw Error("Can't create secondary domain capable XhrIo object.");return y=c.Aa&&!c.ma?new tt(new Oi({ab:_})):new tt(c.ma),y.Fa(c.L),y}r.isActive=function(){return!!this.l&&this.l.isActive(this)};function ec(){}r=ec.prototype,r.ra=function(){},r.qa=function(){},r.pa=function(){},r.oa=function(){},r.isActive=function(){return!0},r.Ka=function(){};function Lr(){}Lr.prototype.g=function(c,y){return new dn(c,y)};function dn(c,y){wt.call(this),this.g=new kr(y),this.l=c,this.h=y&&y.messageUrlParams||null,c=y&&y.messageHeaders||null,y&&y.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=y&&y.initMessageHeaders||null,y&&y.messageContentType&&(c?c["X-WebChannel-Content-Type"]=y.messageContentType:c={"X-WebChannel-Content-Type":y.messageContentType}),y&&y.sa&&(c?c["X-WebChannel-Client-Profile"]=y.sa:c={"X-WebChannel-Client-Profile":y.sa}),this.g.U=c,(c=y&&y.Qb)&&!I(c)&&(this.g.u=c),this.A=y&&y.supportsCrossDomainXhr||!1,this.v=y&&y.sendRawJson||!1,(y=y&&y.httpSessionIdParam)&&!I(y)&&(this.g.G=y,c=this.h,c!==null&&y in c&&(c=this.h,y in c&&delete c[y])),this.j=new tr(this)}T(dn,wt),dn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},dn.prototype.close=function(){tl(this.g)},dn.prototype.o=function(c){var y=this.g;if(typeof c=="string"){var _={};_.__data__=c,c=_}else this.v&&(_={},_.__data__=xr(c),c=_);y.i.push(new xt(y.Ya++,c)),y.I==3&&ki(y)},dn.prototype.N=function(){this.g.l=null,delete this.j,tl(this.g),delete this.g,dn.Z.N.call(this)};function tc(c){$t.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var y=c.__sm__;if(y){e:{for(const _ in y){c=_;break e}c=void 0}(this.i=c)&&(c=this.i,y=y!==null&&c in y?y[c]:void 0),this.data=y}else this.data=c}T(tc,$t);function nc(){Hn.call(this),this.status=1}T(nc,Hn);function tr(c){this.g=c}T(tr,ec),tr.prototype.ra=function(){zt(this.g,"a")},tr.prototype.qa=function(c){zt(this.g,new tc(c))},tr.prototype.pa=function(c){zt(this.g,new nc)},tr.prototype.oa=function(){zt(this.g,"b")},Lr.prototype.createWebChannel=Lr.prototype.g,dn.prototype.send=dn.prototype.o,dn.prototype.open=dn.prototype.m,dn.prototype.close=dn.prototype.close,$T=function(){return new Lr},KT=function(){return va()},YT=Et,ep={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Ns.NO_ERROR=0,Ns.TIMEOUT=8,Ns.HTTP_ERROR=6,Eh=Ns,Bo.COMPLETE="complete",QT=Bo,Vu.EventType=ii,ii.OPEN="a",ii.CLOSE="b",ii.ERROR="c",ii.MESSAGE="d",wt.prototype.listen=wt.prototype.J,Hl=Vu,tt.prototype.listenOnce=tt.prototype.K,tt.prototype.getLastError=tt.prototype.Ha,tt.prototype.getLastErrorCode=tt.prototype.ya,tt.prototype.getStatus=tt.prototype.ca,tt.prototype.getResponseJson=tt.prototype.La,tt.prototype.getResponseText=tt.prototype.la,tt.prototype.send=tt.prototype.ea,tt.prototype.setWithCredentials=tt.prototype.Fa,GT=tt}).apply(typeof lh<"u"?lh:typeof self<"u"?self:typeof window<"u"?window:{});const k0="@firebase/firestore",P0="4.9.3";class un{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}un.UNAUTHENTICATED=new un(null),un.GOOGLE_CREDENTIALS=new un("google-credentials-uid"),un.FIRST_PARTY=new un("first-party-uid"),un.MOCK_USER=new un("mock-user");let Mo="12.7.0";const fa=new wp("@firebase/firestore");function ao(){return fa.logLevel}function me(r,...e){if(fa.logLevel<=je.DEBUG){const n=e.map(Up);fa.debug(`Firestore (${Mo}): ${r}`,...n)}}function Ar(r,...e){if(fa.logLevel<=je.ERROR){const n=e.map(Up);fa.error(`Firestore (${Mo}): ${r}`,...n)}}function _o(r,...e){if(fa.logLevel<=je.WARN){const n=e.map(Up);fa.warn(`Firestore (${Mo}): ${r}`,...n)}}function Up(r){if(typeof r=="string")return r;try{return(function(n){return JSON.stringify(n)})(r)}catch{return r}}function Ae(r,e,n){let s="Unexpected state";typeof e=="string"?s=e:n=e,XT(r,s,n)}function XT(r,e,n){let s=`FIRESTORE (${Mo}) INTERNAL ASSERTION FAILED: ${e} (ID: ${r.toString(16)})`;if(n!==void 0)try{s+=" CONTEXT: "+JSON.stringify(n)}catch{s+=" CONTEXT: "+n}throw Ar(s),new Error(s)}function Ge(r,e,n,s){let o="Unexpected state";typeof n=="string"?o=n:s=n,r||XT(e,o,s)}function xe(r,e){return r}const ee={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class he extends Rr{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Fi{constructor(){this.promise=new Promise(((e,n)=>{this.resolve=e,this.reject=n}))}}class WT{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class M2{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable((()=>n(un.UNAUTHENTICATED)))}shutdown(){}}class V2{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class k2{constructor(e){this.t=e,this.currentUser=un.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Ge(this.o===void 0,42304);let s=this.i;const o=p=>this.i!==s?(s=this.i,n(p)):Promise.resolve();let u=new Fi;this.o=()=>{this.i++,this.currentUser=this.u(),u.resolve(),u=new Fi,e.enqueueRetryable((()=>o(this.currentUser)))};const f=()=>{const p=u;e.enqueueRetryable((async()=>{await p.promise,await o(this.currentUser)}))},m=p=>{me("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=p,this.o&&(this.auth.addAuthTokenListener(this.o),f())};this.t.onInit((p=>m(p))),setTimeout((()=>{if(!this.auth){const p=this.t.getImmediate({optional:!0});p?m(p):(me("FirebaseAuthCredentialsProvider","Auth not yet detected"),u.resolve(),u=new Fi)}}),0),f()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((s=>this.i!==e?(me("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(Ge(typeof s.accessToken=="string",31837,{l:s}),new WT(s.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ge(e===null||typeof e=="string",2055,{h:e}),new un(e)}}class P2{constructor(e,n,s){this.P=e,this.T=n,this.I=s,this.type="FirstParty",this.user=un.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class L2{constructor(e,n,s){this.P=e,this.T=n,this.I=s}getToken(){return Promise.resolve(new P2(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable((()=>n(un.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class L0{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class U2{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,pi(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){Ge(this.o===void 0,3512);const s=u=>{u.error!=null&&me("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const f=u.token!==this.m;return this.m=u.token,me("FirebaseAppCheckTokenProvider",`Received ${f?"new":"existing"} token.`),f?n(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable((()=>s(u)))};const o=u=>{me("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((u=>o(u))),setTimeout((()=>{if(!this.appCheck){const u=this.V.getImmediate({optional:!0});u?o(u):me("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new L0(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((n=>n?(Ge(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new L0(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function j2(r){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(r);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let s=0;s<r;s++)n[s]=Math.floor(256*Math.random());return n}class jp{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const o=j2(40);for(let u=0;u<o.length;++u)s.length<20&&o[u]<n&&(s+=e.charAt(o[u]%62))}return s}}function ze(r,e){return r<e?-1:r>e?1:0}function tp(r,e){const n=Math.min(r.length,e.length);for(let s=0;s<n;s++){const o=r.charAt(s),u=e.charAt(s);if(o!==u)return Pm(o)===Pm(u)?ze(o,u):Pm(o)?1:-1}return ze(r.length,e.length)}const z2=55296,B2=57343;function Pm(r){const e=r.charCodeAt(0);return e>=z2&&e<=B2}function Eo(r,e,n){return r.length===e.length&&r.every(((s,o)=>n(s,e[o])))}const U0="__name__";class qi{constructor(e,n,s){n===void 0?n=0:n>e.length&&Ae(637,{offset:n,range:e.length}),s===void 0?s=e.length-n:s>e.length-n&&Ae(1746,{length:s,range:e.length-n}),this.segments=e,this.offset=n,this.len=s}get length(){return this.len}isEqual(e){return qi.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof qi?e.forEach((s=>{n.push(s)})):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,s=this.limit();n<s;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const s=Math.min(e.length,n.length);for(let o=0;o<s;o++){const u=qi.compareSegments(e.get(o),n.get(o));if(u!==0)return u}return ze(e.length,n.length)}static compareSegments(e,n){const s=qi.isNumericId(e),o=qi.isNumericId(n);return s&&!o?-1:!s&&o?1:s&&o?qi.extractNumericId(e).compare(qi.extractNumericId(n)):tp(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return ms.fromString(e.substring(4,e.length-2))}}class st extends qi{construct(e,n,s){return new st(e,n,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const s of e){if(s.indexOf("//")>=0)throw new he(ee.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);n.push(...s.split("/").filter((o=>o.length>0)))}return new st(n)}static emptyPath(){return new st([])}}const q2=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class nn extends qi{construct(e,n,s){return new nn(e,n,s)}static isValidIdentifier(e){return q2.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),nn.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===U0}static keyField(){return new nn([U0])}static fromServerFormat(e){const n=[];let s="",o=0;const u=()=>{if(s.length===0)throw new he(ee.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(s),s=""};let f=!1;for(;o<e.length;){const m=e[o];if(m==="\\"){if(o+1===e.length)throw new he(ee.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const p=e[o+1];if(p!=="\\"&&p!=="."&&p!=="`")throw new he(ee.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=p,o+=2}else m==="`"?(f=!f,o++):m!=="."||f?(s+=m,o++):(u(),o++)}if(u(),f)throw new he(ee.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new nn(n)}static emptyPath(){return new nn([])}}class Te{constructor(e){this.path=e}static fromPath(e){return new Te(st.fromString(e))}static fromName(e){return new Te(st.fromString(e).popFirst(5))}static empty(){return new Te(st.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&st.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return st.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Te(new st(e.slice()))}}function JT(r,e,n){if(!n)throw new he(ee.INVALID_ARGUMENT,`Function ${r}() cannot be called with an empty ${e}.`)}function H2(r,e,n,s){if(e===!0&&s===!0)throw new he(ee.INVALID_ARGUMENT,`${r} and ${n} cannot be used together.`)}function j0(r){if(!Te.isDocumentKey(r))throw new he(ee.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${r} has ${r.length}.`)}function z0(r){if(Te.isDocumentKey(r))throw new he(ee.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${r} has ${r.length}.`)}function ZT(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}function tf(r){if(r===void 0)return"undefined";if(r===null)return"null";if(typeof r=="string")return r.length>20&&(r=`${r.substring(0,20)}...`),JSON.stringify(r);if(typeof r=="number"||typeof r=="boolean")return""+r;if(typeof r=="object"){if(r instanceof Array)return"an array";{const e=(function(s){return s.constructor?s.constructor.name:null})(r);return e?`a custom ${e} object`:"an object"}}return typeof r=="function"?"a function":Ae(12329,{type:typeof r})}function yn(r,e){if("_delegate"in r&&(r=r._delegate),!(r instanceof e)){if(e.name===r.constructor.name)throw new he(ee.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=tf(r);throw new he(ee.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return r}function Ut(r,e){const n={typeString:r};return e&&(n.value=e),n}function vu(r,e){if(!ZT(r))throw new he(ee.INVALID_ARGUMENT,"JSON must be an object");let n;for(const s in e)if(e[s]){const o=e[s].typeString,u="value"in e[s]?{value:e[s].value}:void 0;if(!(s in r)){n=`JSON missing required field: '${s}'`;break}const f=r[s];if(o&&typeof f!==o){n=`JSON field '${s}' must be a ${o}.`;break}if(u!==void 0&&f!==u.value){n=`Expected '${s}' field to equal '${u.value}'`;break}}if(n)throw new he(ee.INVALID_ARGUMENT,n);return!0}const B0=-62135596800,q0=1e6;class ct{static now(){return ct.fromMillis(Date.now())}static fromDate(e){return ct.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),s=Math.floor((e-1e3*n)*q0);return new ct(n,s)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new he(ee.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new he(ee.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<B0)throw new he(ee.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new he(ee.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/q0}_compareTo(e){return this.seconds===e.seconds?ze(this.nanoseconds,e.nanoseconds):ze(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:ct._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(vu(e,ct._jsonSchema))return new ct(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-B0;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}ct._jsonSchemaVersion="firestore/timestamp/1.0",ct._jsonSchema={type:Ut("string",ct._jsonSchemaVersion),seconds:Ut("number"),nanoseconds:Ut("number")};class Re{static fromTimestamp(e){return new Re(e)}static min(){return new Re(new ct(0,0))}static max(){return new Re(new ct(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const iu=-1;function F2(r,e){const n=r.toTimestamp().seconds,s=r.toTimestamp().nanoseconds+1,o=Re.fromTimestamp(s===1e9?new ct(n+1,0):new ct(n,s));return new vs(o,Te.empty(),e)}function G2(r){return new vs(r.readTime,r.key,iu)}class vs{constructor(e,n,s){this.readTime=e,this.documentKey=n,this.largestBatchId=s}static min(){return new vs(Re.min(),Te.empty(),iu)}static max(){return new vs(Re.max(),Te.empty(),iu)}}function Q2(r,e){let n=r.readTime.compareTo(e.readTime);return n!==0?n:(n=Te.comparator(r.documentKey,e.documentKey),n!==0?n:ze(r.largestBatchId,e.largestBatchId))}const Y2="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class K2{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function Vo(r){if(r.code!==ee.FAILED_PRECONDITION||r.message!==Y2)throw r;me("LocalStore","Unexpectedly lost primary lease")}class re{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Ae(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new re(((s,o)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(s,o)},this.catchCallback=u=>{this.wrapFailure(n,u).next(s,o)}}))}toPromise(){return new Promise(((e,n)=>{this.next(e,n)}))}wrapUserFunction(e){try{const n=e();return n instanceof re?n:re.resolve(n)}catch(n){return re.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction((()=>e(n))):re.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction((()=>e(n))):re.reject(n)}static resolve(e){return new re(((n,s)=>{n(e)}))}static reject(e){return new re(((n,s)=>{s(e)}))}static waitFor(e){return new re(((n,s)=>{let o=0,u=0,f=!1;e.forEach((m=>{++o,m.next((()=>{++u,f&&u===o&&n()}),(p=>s(p)))})),f=!0,u===o&&n()}))}static or(e){let n=re.resolve(!1);for(const s of e)n=n.next((o=>o?re.resolve(o):s()));return n}static forEach(e,n){const s=[];return e.forEach(((o,u)=>{s.push(n.call(this,o,u))})),this.waitFor(s)}static mapArray(e,n){return new re(((s,o)=>{const u=e.length,f=new Array(u);let m=0;for(let p=0;p<u;p++){const g=p;n(e[g]).next((E=>{f[g]=E,++m,m===u&&s(f)}),(E=>o(E)))}}))}static doWhile(e,n){return new re(((s,o)=>{const u=()=>{e()===!0?n().next((()=>{u()}),o):s()};u()}))}}function $2(r){const e=r.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function ko(r){return r.name==="IndexedDbTransactionError"}class nf{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=s=>this.ae(s),this.ue=s=>n.writeSequenceNumber(s))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}nf.ce=-1;const zp=-1;function _u(r){return r==null}function Ph(r){return r===0&&1/r==-1/0}function X2(r){return typeof r=="number"&&Number.isInteger(r)&&!Ph(r)&&r<=Number.MAX_SAFE_INTEGER&&r>=Number.MIN_SAFE_INTEGER}const eb="";function W2(r){let e="";for(let n=0;n<r.length;n++)e.length>0&&(e=H0(e)),e=J2(r.get(n),e);return H0(e)}function J2(r,e){let n=e;const s=r.length;for(let o=0;o<s;o++){const u=r.charAt(o);switch(u){case"\0":n+="";break;case eb:n+="";break;default:n+=u}}return n}function H0(r){return r+eb+""}function F0(r){let e=0;for(const n in r)Object.prototype.hasOwnProperty.call(r,n)&&e++;return e}function ws(r,e){for(const n in r)Object.prototype.hasOwnProperty.call(r,n)&&e(n,r[n])}function tb(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}class pt{constructor(e,n){this.comparator=e,this.root=n||tn.EMPTY}insert(e,n){return new pt(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,tn.BLACK,null,null))}remove(e){return new pt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,tn.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const s=this.comparator(e,n.key);if(s===0)return n.value;s<0?n=n.left:s>0&&(n=n.right)}return null}indexOf(e){let n=0,s=this.root;for(;!s.isEmpty();){const o=this.comparator(e,s.key);if(o===0)return n+s.left.size;o<0?s=s.left:(n+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((n,s)=>(e(n,s),!1)))}toString(){const e=[];return this.inorderTraversal(((n,s)=>(e.push(`${n}:${s}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new uh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new uh(this.root,e,this.comparator,!1)}getReverseIterator(){return new uh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new uh(this.root,e,this.comparator,!0)}}class uh{constructor(e,n,s,o){this.isReverse=o,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=n?s(e.key,n):1,n&&o&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(u===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class tn{constructor(e,n,s,o,u){this.key=e,this.value=n,this.color=s??tn.RED,this.left=o??tn.EMPTY,this.right=u??tn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,s,o,u){return new tn(e??this.key,n??this.value,s??this.color,o??this.left,u??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,s){let o=this;const u=s(e,o.key);return o=u<0?o.copy(null,null,null,o.left.insert(e,n,s),null):u===0?o.copy(null,n,null,null,null):o.copy(null,null,null,null,o.right.insert(e,n,s)),o.fixUp()}removeMin(){if(this.left.isEmpty())return tn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let s,o=this;if(n(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,n),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),n(e,o.key)===0){if(o.right.isEmpty())return tn.EMPTY;s=o.right.min(),o=o.copy(s.key,s.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,n))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,tn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,tn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ae(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Ae(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Ae(27949);return e+(this.isRed()?0:1)}}tn.EMPTY=null,tn.RED=!0,tn.BLACK=!1;tn.EMPTY=new class{constructor(){this.size=0}get key(){throw Ae(57766)}get value(){throw Ae(16141)}get color(){throw Ae(16727)}get left(){throw Ae(29726)}get right(){throw Ae(36894)}copy(e,n,s,o,u){return this}insert(e,n,s){return new tn(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class qt{constructor(e){this.comparator=e,this.data=new pt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((n,s)=>(e(n),!1)))}forEachInRange(e,n){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const o=s.getNext();if(this.comparator(o.key,e[1])>=0)return;n(o.key)}}forEachWhile(e,n){let s;for(s=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new G0(this.data.getIterator())}getIteratorFrom(e){return new G0(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach((s=>{n=n.add(s)})),n}isEqual(e){if(!(e instanceof qt)||this.size!==e.size)return!1;const n=this.data.getIterator(),s=e.data.getIterator();for(;n.hasNext();){const o=n.getNext().key,u=s.getNext().key;if(this.comparator(o,u)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((n=>{e.push(n)})),e}toString(){const e=[];return this.forEach((n=>e.push(n))),"SortedSet("+e.toString()+")"}copy(e){const n=new qt(this.comparator);return n.data=e,n}}class G0{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class jn{constructor(e){this.fields=e,e.sort(nn.comparator)}static empty(){return new jn([])}unionWith(e){let n=new qt(nn.comparator);for(const s of this.fields)n=n.add(s);for(const s of e)n=n.add(s);return new jn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Eo(this.fields,e.fields,((n,s)=>n.isEqual(s)))}}class nb extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class sn{constructor(e){this.binaryString=e}static fromBase64String(e){const n=(function(o){try{return atob(o)}catch(u){throw typeof DOMException<"u"&&u instanceof DOMException?new nb("Invalid base64 string: "+u):u}})(e);return new sn(n)}static fromUint8Array(e){const n=(function(o){let u="";for(let f=0;f<o.length;++f)u+=String.fromCharCode(o[f]);return u})(e);return new sn(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const s=new Uint8Array(n.length);for(let o=0;o<n.length;o++)s[o]=n.charCodeAt(o);return s})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ze(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}sn.EMPTY_BYTE_STRING=new sn("");const Z2=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function _s(r){if(Ge(!!r,39018),typeof r=="string"){let e=0;const n=Z2.exec(r);if(Ge(!!n,46558,{timestamp:r}),n[1]){let o=n[1];o=(o+"000000000").substr(0,9),e=Number(o)}const s=new Date(r);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:At(r.seconds),nanos:At(r.nanos)}}function At(r){return typeof r=="number"?r:typeof r=="string"?Number(r):0}function Es(r){return typeof r=="string"?sn.fromBase64String(r):sn.fromUint8Array(r)}const ib="server_timestamp",rb="__type__",sb="__previous_value__",ab="__local_write_time__";function Bp(r){return(r?.mapValue?.fields||{})[rb]?.stringValue===ib}function rf(r){const e=r.mapValue.fields[sb];return Bp(e)?rf(e):e}function ru(r){const e=_s(r.mapValue.fields[ab].timestampValue);return new ct(e.seconds,e.nanos)}class eI{constructor(e,n,s,o,u,f,m,p,g,E){this.databaseId=e,this.appId=n,this.persistenceKey=s,this.host=o,this.ssl=u,this.forceLongPolling=f,this.autoDetectLongPolling=m,this.longPollingOptions=p,this.useFetchStreams=g,this.isUsingEmulator=E}}const Lh="(default)";class su{constructor(e,n){this.projectId=e,this.database=n||Lh}static empty(){return new su("","")}get isDefaultDatabase(){return this.database===Lh}isEqual(e){return e instanceof su&&e.projectId===this.projectId&&e.database===this.database}}const ob="__type__",tI="__max__",ch={mapValue:{}},lb="__vector__",Uh="value";function Ts(r){return"nullValue"in r?0:"booleanValue"in r?1:"integerValue"in r||"doubleValue"in r?2:"timestampValue"in r?3:"stringValue"in r?5:"bytesValue"in r?6:"referenceValue"in r?7:"geoPointValue"in r?8:"arrayValue"in r?9:"mapValue"in r?Bp(r)?4:iI(r)?9007199254740991:nI(r)?10:11:Ae(28295,{value:r})}function $i(r,e){if(r===e)return!0;const n=Ts(r);if(n!==Ts(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return r.booleanValue===e.booleanValue;case 4:return ru(r).isEqual(ru(e));case 3:return(function(o,u){if(typeof o.timestampValue=="string"&&typeof u.timestampValue=="string"&&o.timestampValue.length===u.timestampValue.length)return o.timestampValue===u.timestampValue;const f=_s(o.timestampValue),m=_s(u.timestampValue);return f.seconds===m.seconds&&f.nanos===m.nanos})(r,e);case 5:return r.stringValue===e.stringValue;case 6:return(function(o,u){return Es(o.bytesValue).isEqual(Es(u.bytesValue))})(r,e);case 7:return r.referenceValue===e.referenceValue;case 8:return(function(o,u){return At(o.geoPointValue.latitude)===At(u.geoPointValue.latitude)&&At(o.geoPointValue.longitude)===At(u.geoPointValue.longitude)})(r,e);case 2:return(function(o,u){if("integerValue"in o&&"integerValue"in u)return At(o.integerValue)===At(u.integerValue);if("doubleValue"in o&&"doubleValue"in u){const f=At(o.doubleValue),m=At(u.doubleValue);return f===m?Ph(f)===Ph(m):isNaN(f)&&isNaN(m)}return!1})(r,e);case 9:return Eo(r.arrayValue.values||[],e.arrayValue.values||[],$i);case 10:case 11:return(function(o,u){const f=o.mapValue.fields||{},m=u.mapValue.fields||{};if(F0(f)!==F0(m))return!1;for(const p in f)if(f.hasOwnProperty(p)&&(m[p]===void 0||!$i(f[p],m[p])))return!1;return!0})(r,e);default:return Ae(52216,{left:r})}}function au(r,e){return(r.values||[]).find((n=>$i(n,e)))!==void 0}function To(r,e){if(r===e)return 0;const n=Ts(r),s=Ts(e);if(n!==s)return ze(n,s);switch(n){case 0:case 9007199254740991:return 0;case 1:return ze(r.booleanValue,e.booleanValue);case 2:return(function(u,f){const m=At(u.integerValue||u.doubleValue),p=At(f.integerValue||f.doubleValue);return m<p?-1:m>p?1:m===p?0:isNaN(m)?isNaN(p)?0:-1:1})(r,e);case 3:return Q0(r.timestampValue,e.timestampValue);case 4:return Q0(ru(r),ru(e));case 5:return tp(r.stringValue,e.stringValue);case 6:return(function(u,f){const m=Es(u),p=Es(f);return m.compareTo(p)})(r.bytesValue,e.bytesValue);case 7:return(function(u,f){const m=u.split("/"),p=f.split("/");for(let g=0;g<m.length&&g<p.length;g++){const E=ze(m[g],p[g]);if(E!==0)return E}return ze(m.length,p.length)})(r.referenceValue,e.referenceValue);case 8:return(function(u,f){const m=ze(At(u.latitude),At(f.latitude));return m!==0?m:ze(At(u.longitude),At(f.longitude))})(r.geoPointValue,e.geoPointValue);case 9:return Y0(r.arrayValue,e.arrayValue);case 10:return(function(u,f){const m=u.fields||{},p=f.fields||{},g=m[Uh]?.arrayValue,E=p[Uh]?.arrayValue,T=ze(g?.values?.length||0,E?.values?.length||0);return T!==0?T:Y0(g,E)})(r.mapValue,e.mapValue);case 11:return(function(u,f){if(u===ch.mapValue&&f===ch.mapValue)return 0;if(u===ch.mapValue)return 1;if(f===ch.mapValue)return-1;const m=u.fields||{},p=Object.keys(m),g=f.fields||{},E=Object.keys(g);p.sort(),E.sort();for(let T=0;T<p.length&&T<E.length;++T){const R=tp(p[T],E[T]);if(R!==0)return R;const L=To(m[p[T]],g[E[T]]);if(L!==0)return L}return ze(p.length,E.length)})(r.mapValue,e.mapValue);default:throw Ae(23264,{he:n})}}function Q0(r,e){if(typeof r=="string"&&typeof e=="string"&&r.length===e.length)return ze(r,e);const n=_s(r),s=_s(e),o=ze(n.seconds,s.seconds);return o!==0?o:ze(n.nanos,s.nanos)}function Y0(r,e){const n=r.values||[],s=e.values||[];for(let o=0;o<n.length&&o<s.length;++o){const u=To(n[o],s[o]);if(u)return u}return ze(n.length,s.length)}function bo(r){return np(r)}function np(r){return"nullValue"in r?"null":"booleanValue"in r?""+r.booleanValue:"integerValue"in r?""+r.integerValue:"doubleValue"in r?""+r.doubleValue:"timestampValue"in r?(function(n){const s=_s(n);return`time(${s.seconds},${s.nanos})`})(r.timestampValue):"stringValue"in r?r.stringValue:"bytesValue"in r?(function(n){return Es(n).toBase64()})(r.bytesValue):"referenceValue"in r?(function(n){return Te.fromName(n).toString()})(r.referenceValue):"geoPointValue"in r?(function(n){return`geo(${n.latitude},${n.longitude})`})(r.geoPointValue):"arrayValue"in r?(function(n){let s="[",o=!0;for(const u of n.values||[])o?o=!1:s+=",",s+=np(u);return s+"]"})(r.arrayValue):"mapValue"in r?(function(n){const s=Object.keys(n.fields||{}).sort();let o="{",u=!0;for(const f of s)u?u=!1:o+=",",o+=`${f}:${np(n.fields[f])}`;return o+"}"})(r.mapValue):Ae(61005,{value:r})}function Th(r){switch(Ts(r)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=rf(r);return e?16+Th(e):16;case 5:return 2*r.stringValue.length;case 6:return Es(r.bytesValue).approximateByteSize();case 7:return r.referenceValue.length;case 9:return(function(s){return(s.values||[]).reduce(((o,u)=>o+Th(u)),0)})(r.arrayValue);case 10:case 11:return(function(s){let o=0;return ws(s.fields,((u,f)=>{o+=u.length+Th(f)})),o})(r.mapValue);default:throw Ae(13486,{value:r})}}function K0(r,e){return{referenceValue:`projects/${r.projectId}/databases/${r.database}/documents/${e.path.canonicalString()}`}}function ip(r){return!!r&&"integerValue"in r}function qp(r){return!!r&&"arrayValue"in r}function $0(r){return!!r&&"nullValue"in r}function X0(r){return!!r&&"doubleValue"in r&&isNaN(Number(r.doubleValue))}function bh(r){return!!r&&"mapValue"in r}function nI(r){return(r?.mapValue?.fields||{})[ob]?.stringValue===lb}function $l(r){if(r.geoPointValue)return{geoPointValue:{...r.geoPointValue}};if(r.timestampValue&&typeof r.timestampValue=="object")return{timestampValue:{...r.timestampValue}};if(r.mapValue){const e={mapValue:{fields:{}}};return ws(r.mapValue.fields,((n,s)=>e.mapValue.fields[n]=$l(s))),e}if(r.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(r.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=$l(r.arrayValue.values[n]);return e}return{...r}}function iI(r){return(((r.mapValue||{}).fields||{}).__type__||{}).stringValue===tI}class pn{constructor(e){this.value=e}static empty(){return new pn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let s=0;s<e.length-1;++s)if(n=(n.mapValue.fields||{})[e.get(s)],!bh(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=$l(n)}setAll(e){let n=nn.emptyPath(),s={},o=[];e.forEach(((f,m)=>{if(!n.isImmediateParentOf(m)){const p=this.getFieldsMap(n);this.applyChanges(p,s,o),s={},o=[],n=m.popLast()}f?s[m.lastSegment()]=$l(f):o.push(m.lastSegment())}));const u=this.getFieldsMap(n);this.applyChanges(u,s,o)}delete(e){const n=this.field(e.popLast());bh(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return $i(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let s=0;s<e.length;++s){let o=n.mapValue.fields[e.get(s)];bh(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},n.mapValue.fields[e.get(s)]=o),n=o}return n.mapValue.fields}applyChanges(e,n,s){ws(n,((o,u)=>e[o]=u));for(const o of s)delete e[o]}clone(){return new pn($l(this.value))}}function ub(r){const e=[];return ws(r.fields,((n,s)=>{const o=new nn([n]);if(bh(s)){const u=ub(s.mapValue).fields;if(u.length===0)e.push(o);else for(const f of u)e.push(o.child(f))}else e.push(o)})),new jn(e)}class Kt{constructor(e,n,s,o,u,f,m){this.key=e,this.documentType=n,this.version=s,this.readTime=o,this.createTime=u,this.data=f,this.documentState=m}static newInvalidDocument(e){return new Kt(e,0,Re.min(),Re.min(),Re.min(),pn.empty(),0)}static newFoundDocument(e,n,s,o){return new Kt(e,1,n,Re.min(),s,o,0)}static newNoDocument(e,n){return new Kt(e,2,n,Re.min(),Re.min(),pn.empty(),0)}static newUnknownDocument(e,n){return new Kt(e,3,n,Re.min(),Re.min(),pn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Re.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=pn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=pn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Re.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Kt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Kt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class jh{constructor(e,n){this.position=e,this.inclusive=n}}function W0(r,e,n){let s=0;for(let o=0;o<r.position.length;o++){const u=e[o],f=r.position[o];if(u.field.isKeyField()?s=Te.comparator(Te.fromName(f.referenceValue),n.key):s=To(f,n.data.field(u.field)),u.dir==="desc"&&(s*=-1),s!==0)break}return s}function J0(r,e){if(r===null)return e===null;if(e===null||r.inclusive!==e.inclusive||r.position.length!==e.position.length)return!1;for(let n=0;n<r.position.length;n++)if(!$i(r.position[n],e.position[n]))return!1;return!0}class zh{constructor(e,n="asc"){this.field=e,this.dir=n}}function rI(r,e){return r.dir===e.dir&&r.field.isEqual(e.field)}class cb{}class Lt extends cb{constructor(e,n,s){super(),this.field=e,this.op=n,this.value=s}static create(e,n,s){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,s):new aI(e,n,s):n==="array-contains"?new uI(e,s):n==="in"?new cI(e,s):n==="not-in"?new hI(e,s):n==="array-contains-any"?new fI(e,s):new Lt(e,n,s)}static createKeyFieldInFilter(e,n,s){return n==="in"?new oI(e,s):new lI(e,s)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(To(n,this.value)):n!==null&&Ts(this.value)===Ts(n)&&this.matchesComparison(To(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ae(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class _i extends cb{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new _i(e,n)}matches(e){return hb(this)?this.filters.find((n=>!n.matches(e)))===void 0:this.filters.find((n=>n.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,n)=>e.concat(n.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function hb(r){return r.op==="and"}function fb(r){return sI(r)&&hb(r)}function sI(r){for(const e of r.filters)if(e instanceof _i)return!1;return!0}function rp(r){if(r instanceof Lt)return r.field.canonicalString()+r.op.toString()+bo(r.value);if(fb(r))return r.filters.map((e=>rp(e))).join(",");{const e=r.filters.map((n=>rp(n))).join(",");return`${r.op}(${e})`}}function db(r,e){return r instanceof Lt?(function(s,o){return o instanceof Lt&&s.op===o.op&&s.field.isEqual(o.field)&&$i(s.value,o.value)})(r,e):r instanceof _i?(function(s,o){return o instanceof _i&&s.op===o.op&&s.filters.length===o.filters.length?s.filters.reduce(((u,f,m)=>u&&db(f,o.filters[m])),!0):!1})(r,e):void Ae(19439)}function mb(r){return r instanceof Lt?(function(n){return`${n.field.canonicalString()} ${n.op} ${bo(n.value)}`})(r):r instanceof _i?(function(n){return n.op.toString()+" {"+n.getFilters().map(mb).join(" ,")+"}"})(r):"Filter"}class aI extends Lt{constructor(e,n,s){super(e,n,s),this.key=Te.fromName(s.referenceValue)}matches(e){const n=Te.comparator(e.key,this.key);return this.matchesComparison(n)}}class oI extends Lt{constructor(e,n){super(e,"in",n),this.keys=pb("in",n)}matches(e){return this.keys.some((n=>n.isEqual(e.key)))}}class lI extends Lt{constructor(e,n){super(e,"not-in",n),this.keys=pb("not-in",n)}matches(e){return!this.keys.some((n=>n.isEqual(e.key)))}}function pb(r,e){return(e.arrayValue?.values||[]).map((n=>Te.fromName(n.referenceValue)))}class uI extends Lt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return qp(n)&&au(n.arrayValue,this.value)}}class cI extends Lt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&au(this.value.arrayValue,n)}}class hI extends Lt{constructor(e,n){super(e,"not-in",n)}matches(e){if(au(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!au(this.value.arrayValue,n)}}class fI extends Lt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!qp(n)||!n.arrayValue.values)&&n.arrayValue.values.some((s=>au(this.value.arrayValue,s)))}}class dI{constructor(e,n=null,s=[],o=[],u=null,f=null,m=null){this.path=e,this.collectionGroup=n,this.orderBy=s,this.filters=o,this.limit=u,this.startAt=f,this.endAt=m,this.Te=null}}function Z0(r,e=null,n=[],s=[],o=null,u=null,f=null){return new dI(r,e,n,s,o,u,f)}function Hp(r){const e=xe(r);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((s=>rp(s))).join(","),n+="|ob:",n+=e.orderBy.map((s=>(function(u){return u.field.canonicalString()+u.dir})(s))).join(","),_u(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((s=>bo(s))).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((s=>bo(s))).join(",")),e.Te=n}return e.Te}function Fp(r,e){if(r.limit!==e.limit||r.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<r.orderBy.length;n++)if(!rI(r.orderBy[n],e.orderBy[n]))return!1;if(r.filters.length!==e.filters.length)return!1;for(let n=0;n<r.filters.length;n++)if(!db(r.filters[n],e.filters[n]))return!1;return r.collectionGroup===e.collectionGroup&&!!r.path.isEqual(e.path)&&!!J0(r.startAt,e.startAt)&&J0(r.endAt,e.endAt)}function sp(r){return Te.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}class Eu{constructor(e,n=null,s=[],o=[],u=null,f="F",m=null,p=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=s,this.filters=o,this.limit=u,this.limitType=f,this.startAt=m,this.endAt=p,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function mI(r,e,n,s,o,u,f,m){return new Eu(r,e,n,s,o,u,f,m)}function sf(r){return new Eu(r)}function eE(r){return r.filters.length===0&&r.limit===null&&r.startAt==null&&r.endAt==null&&(r.explicitOrderBy.length===0||r.explicitOrderBy.length===1&&r.explicitOrderBy[0].field.isKeyField())}function gb(r){return r.collectionGroup!==null}function Xl(r){const e=xe(r);if(e.Ie===null){e.Ie=[];const n=new Set;for(const u of e.explicitOrderBy)e.Ie.push(u),n.add(u.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(f){let m=new qt(nn.comparator);return f.filters.forEach((p=>{p.getFlattenedFilters().forEach((g=>{g.isInequality()&&(m=m.add(g.field))}))})),m})(e).forEach((u=>{n.has(u.canonicalString())||u.isKeyField()||e.Ie.push(new zh(u,s))})),n.has(nn.keyField().canonicalString())||e.Ie.push(new zh(nn.keyField(),s))}return e.Ie}function Gi(r){const e=xe(r);return e.Ee||(e.Ee=pI(e,Xl(r))),e.Ee}function pI(r,e){if(r.limitType==="F")return Z0(r.path,r.collectionGroup,e,r.filters,r.limit,r.startAt,r.endAt);{e=e.map((o=>{const u=o.dir==="desc"?"asc":"desc";return new zh(o.field,u)}));const n=r.endAt?new jh(r.endAt.position,r.endAt.inclusive):null,s=r.startAt?new jh(r.startAt.position,r.startAt.inclusive):null;return Z0(r.path,r.collectionGroup,e,r.filters,r.limit,n,s)}}function ap(r,e){const n=r.filters.concat([e]);return new Eu(r.path,r.collectionGroup,r.explicitOrderBy.slice(),n,r.limit,r.limitType,r.startAt,r.endAt)}function op(r,e,n){return new Eu(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),e,n,r.startAt,r.endAt)}function af(r,e){return Fp(Gi(r),Gi(e))&&r.limitType===e.limitType}function yb(r){return`${Hp(Gi(r))}|lt:${r.limitType}`}function oo(r){return`Query(target=${(function(n){let s=n.path.canonicalString();return n.collectionGroup!==null&&(s+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(s+=`, filters: [${n.filters.map((o=>mb(o))).join(", ")}]`),_u(n.limit)||(s+=", limit: "+n.limit),n.orderBy.length>0&&(s+=`, orderBy: [${n.orderBy.map((o=>(function(f){return`${f.field.canonicalString()} (${f.dir})`})(o))).join(", ")}]`),n.startAt&&(s+=", startAt: ",s+=n.startAt.inclusive?"b:":"a:",s+=n.startAt.position.map((o=>bo(o))).join(",")),n.endAt&&(s+=", endAt: ",s+=n.endAt.inclusive?"a:":"b:",s+=n.endAt.position.map((o=>bo(o))).join(",")),`Target(${s})`})(Gi(r))}; limitType=${r.limitType})`}function of(r,e){return e.isFoundDocument()&&(function(s,o){const u=o.key.path;return s.collectionGroup!==null?o.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(u):Te.isDocumentKey(s.path)?s.path.isEqual(u):s.path.isImmediateParentOf(u)})(r,e)&&(function(s,o){for(const u of Xl(s))if(!u.field.isKeyField()&&o.data.field(u.field)===null)return!1;return!0})(r,e)&&(function(s,o){for(const u of s.filters)if(!u.matches(o))return!1;return!0})(r,e)&&(function(s,o){return!(s.startAt&&!(function(f,m,p){const g=W0(f,m,p);return f.inclusive?g<=0:g<0})(s.startAt,Xl(s),o)||s.endAt&&!(function(f,m,p){const g=W0(f,m,p);return f.inclusive?g>=0:g>0})(s.endAt,Xl(s),o))})(r,e)}function gI(r){return r.collectionGroup||(r.path.length%2==1?r.path.lastSegment():r.path.get(r.path.length-2))}function vb(r){return(e,n)=>{let s=!1;for(const o of Xl(r)){const u=yI(o,e,n);if(u!==0)return u;s=s||o.field.isKeyField()}return 0}}function yI(r,e,n){const s=r.field.isKeyField()?Te.comparator(e.key,n.key):(function(u,f,m){const p=f.data.field(u),g=m.data.field(u);return p!==null&&g!==null?To(p,g):Ae(42886)})(r.field,e,n);switch(r.dir){case"asc":return s;case"desc":return-1*s;default:return Ae(19790,{direction:r.dir})}}class ma{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s!==void 0){for(const[o,u]of s)if(this.equalsFn(o,e))return u}}has(e){return this.get(e)!==void 0}set(e,n){const s=this.mapKeyFn(e),o=this.inner[s];if(o===void 0)return this.inner[s]=[[e,n]],void this.innerSize++;for(let u=0;u<o.length;u++)if(this.equalsFn(o[u][0],e))return void(o[u]=[e,n]);o.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s===void 0)return!1;for(let o=0;o<s.length;o++)if(this.equalsFn(s[o][0],e))return s.length===1?delete this.inner[n]:s.splice(o,1),this.innerSize--,!0;return!1}forEach(e){ws(this.inner,((n,s)=>{for(const[o,u]of s)e(o,u)}))}isEmpty(){return tb(this.inner)}size(){return this.innerSize}}const vI=new pt(Te.comparator);function wr(){return vI}const _b=new pt(Te.comparator);function Fl(...r){let e=_b;for(const n of r)e=e.insert(n.key,n);return e}function Eb(r){let e=_b;return r.forEach(((n,s)=>e=e.insert(n,s.overlayedDocument))),e}function sa(){return Wl()}function Tb(){return Wl()}function Wl(){return new ma((r=>r.toString()),((r,e)=>r.isEqual(e)))}const _I=new pt(Te.comparator),EI=new qt(Te.comparator);function Be(...r){let e=EI;for(const n of r)e=e.add(n);return e}const TI=new qt(ze);function bI(){return TI}function Gp(r,e){if(r.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ph(e)?"-0":e}}function bb(r){return{integerValue:""+r}}function Sb(r,e){return X2(e)?bb(e):Gp(r,e)}class lf{constructor(){this._=void 0}}function SI(r,e,n){return r instanceof ou?(function(o,u){const f={fields:{[rb]:{stringValue:ib},[ab]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return u&&Bp(u)&&(u=rf(u)),u&&(f.fields[sb]=u),{mapValue:f}})(n,e):r instanceof lu?wb(r,e):r instanceof uu?Rb(r,e):(function(o,u){const f=Ab(o,u),m=tE(f)+tE(o.Ae);return ip(f)&&ip(o.Ae)?bb(m):Gp(o.serializer,m)})(r,e)}function AI(r,e,n){return r instanceof lu?wb(r,e):r instanceof uu?Rb(r,e):n}function Ab(r,e){return r instanceof cu?(function(s){return ip(s)||(function(u){return!!u&&"doubleValue"in u})(s)})(e)?e:{integerValue:0}:null}class ou extends lf{}class lu extends lf{constructor(e){super(),this.elements=e}}function wb(r,e){const n=Cb(e);for(const s of r.elements)n.some((o=>$i(o,s)))||n.push(s);return{arrayValue:{values:n}}}class uu extends lf{constructor(e){super(),this.elements=e}}function Rb(r,e){let n=Cb(e);for(const s of r.elements)n=n.filter((o=>!$i(o,s)));return{arrayValue:{values:n}}}class cu extends lf{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function tE(r){return At(r.integerValue||r.doubleValue)}function Cb(r){return qp(r)&&r.arrayValue.values?r.arrayValue.values.slice():[]}class xb{constructor(e,n){this.field=e,this.transform=n}}function wI(r,e){return r.field.isEqual(e.field)&&(function(s,o){return s instanceof lu&&o instanceof lu||s instanceof uu&&o instanceof uu?Eo(s.elements,o.elements,$i):s instanceof cu&&o instanceof cu?$i(s.Ae,o.Ae):s instanceof ou&&o instanceof ou})(r.transform,e.transform)}class RI{constructor(e,n){this.version=e,this.transformResults=n}}class rn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new rn}static exists(e){return new rn(void 0,e)}static updateTime(e){return new rn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Sh(r,e){return r.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(r.updateTime):r.exists===void 0||r.exists===e.isFoundDocument()}class uf{}function Ib(r,e){if(!r.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return r.isNoDocument()?new cf(r.key,rn.none()):new Tu(r.key,r.data,rn.none());{const n=r.data,s=pn.empty();let o=new qt(nn.comparator);for(let u of e.fields)if(!o.has(u)){let f=n.field(u);f===null&&u.length>1&&(u=u.popLast(),f=n.field(u)),f===null?s.delete(u):s.set(u,f),o=o.add(u)}return new Rs(r.key,s,new jn(o.toArray()),rn.none())}}function CI(r,e,n){r instanceof Tu?(function(o,u,f){const m=o.value.clone(),p=iE(o.fieldTransforms,u,f.transformResults);m.setAll(p),u.convertToFoundDocument(f.version,m).setHasCommittedMutations()})(r,e,n):r instanceof Rs?(function(o,u,f){if(!Sh(o.precondition,u))return void u.convertToUnknownDocument(f.version);const m=iE(o.fieldTransforms,u,f.transformResults),p=u.data;p.setAll(Db(o)),p.setAll(m),u.convertToFoundDocument(f.version,p).setHasCommittedMutations()})(r,e,n):(function(o,u,f){u.convertToNoDocument(f.version).setHasCommittedMutations()})(0,e,n)}function Jl(r,e,n,s){return r instanceof Tu?(function(u,f,m,p){if(!Sh(u.precondition,f))return m;const g=u.value.clone(),E=rE(u.fieldTransforms,p,f);return g.setAll(E),f.convertToFoundDocument(f.version,g).setHasLocalMutations(),null})(r,e,n,s):r instanceof Rs?(function(u,f,m,p){if(!Sh(u.precondition,f))return m;const g=rE(u.fieldTransforms,p,f),E=f.data;return E.setAll(Db(u)),E.setAll(g),f.convertToFoundDocument(f.version,E).setHasLocalMutations(),m===null?null:m.unionWith(u.fieldMask.fields).unionWith(u.fieldTransforms.map((T=>T.field)))})(r,e,n,s):(function(u,f,m){return Sh(u.precondition,f)?(f.convertToNoDocument(f.version).setHasLocalMutations(),null):m})(r,e,n)}function xI(r,e){let n=null;for(const s of r.fieldTransforms){const o=e.data.field(s.field),u=Ab(s.transform,o||null);u!=null&&(n===null&&(n=pn.empty()),n.set(s.field,u))}return n||null}function nE(r,e){return r.type===e.type&&!!r.key.isEqual(e.key)&&!!r.precondition.isEqual(e.precondition)&&!!(function(s,o){return s===void 0&&o===void 0||!(!s||!o)&&Eo(s,o,((u,f)=>wI(u,f)))})(r.fieldTransforms,e.fieldTransforms)&&(r.type===0?r.value.isEqual(e.value):r.type!==1||r.data.isEqual(e.data)&&r.fieldMask.isEqual(e.fieldMask))}class Tu extends uf{constructor(e,n,s,o=[]){super(),this.key=e,this.value=n,this.precondition=s,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class Rs extends uf{constructor(e,n,s,o,u=[]){super(),this.key=e,this.data=n,this.fieldMask=s,this.precondition=o,this.fieldTransforms=u,this.type=1}getFieldMask(){return this.fieldMask}}function Db(r){const e=new Map;return r.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const s=r.data.field(n);e.set(n,s)}})),e}function iE(r,e,n){const s=new Map;Ge(r.length===n.length,32656,{Re:n.length,Ve:r.length});for(let o=0;o<n.length;o++){const u=r[o],f=u.transform,m=e.data.field(u.field);s.set(u.field,AI(f,m,n[o]))}return s}function rE(r,e,n){const s=new Map;for(const o of r){const u=o.transform,f=n.data.field(o.field);s.set(o.field,SI(u,f,e))}return s}class cf extends uf{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Nb extends uf{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class II{constructor(e,n,s,o){this.batchId=e,this.localWriteTime=n,this.baseMutations=s,this.mutations=o}applyToRemoteDocument(e,n){const s=n.mutationResults;for(let o=0;o<this.mutations.length;o++){const u=this.mutations[o];u.key.isEqual(e.key)&&CI(u,e,s[o])}}applyToLocalView(e,n){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(n=Jl(s,e,n,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(n=Jl(s,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const s=Tb();return this.mutations.forEach((o=>{const u=e.get(o.key),f=u.overlayedDocument;let m=this.applyToLocalView(f,u.mutatedFields);m=n.has(o.key)?null:m;const p=Ib(f,m);p!==null&&s.set(o.key,p),f.isValidDocument()||f.convertToNoDocument(Re.min())})),s}keys(){return this.mutations.reduce(((e,n)=>e.add(n.key)),Be())}isEqual(e){return this.batchId===e.batchId&&Eo(this.mutations,e.mutations,((n,s)=>nE(n,s)))&&Eo(this.baseMutations,e.baseMutations,((n,s)=>nE(n,s)))}}class Qp{constructor(e,n,s,o){this.batch=e,this.commitVersion=n,this.mutationResults=s,this.docVersions=o}static from(e,n,s){Ge(e.mutations.length===s.length,58842,{me:e.mutations.length,fe:s.length});let o=(function(){return _I})();const u=e.mutations;for(let f=0;f<u.length;f++)o=o.insert(u[f].key,s[f].version);return new Qp(e,n,s,o)}}class DI{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class NI{constructor(e,n){this.count=e,this.unchangedNames=n}}var kt,Fe;function Ob(r){switch(r){case ee.OK:return Ae(64938);case ee.CANCELLED:case ee.UNKNOWN:case ee.DEADLINE_EXCEEDED:case ee.RESOURCE_EXHAUSTED:case ee.INTERNAL:case ee.UNAVAILABLE:case ee.UNAUTHENTICATED:return!1;case ee.INVALID_ARGUMENT:case ee.NOT_FOUND:case ee.ALREADY_EXISTS:case ee.PERMISSION_DENIED:case ee.FAILED_PRECONDITION:case ee.ABORTED:case ee.OUT_OF_RANGE:case ee.UNIMPLEMENTED:case ee.DATA_LOSS:return!0;default:return Ae(15467,{code:r})}}function Mb(r){if(r===void 0)return Ar("GRPC error has no .code"),ee.UNKNOWN;switch(r){case kt.OK:return ee.OK;case kt.CANCELLED:return ee.CANCELLED;case kt.UNKNOWN:return ee.UNKNOWN;case kt.DEADLINE_EXCEEDED:return ee.DEADLINE_EXCEEDED;case kt.RESOURCE_EXHAUSTED:return ee.RESOURCE_EXHAUSTED;case kt.INTERNAL:return ee.INTERNAL;case kt.UNAVAILABLE:return ee.UNAVAILABLE;case kt.UNAUTHENTICATED:return ee.UNAUTHENTICATED;case kt.INVALID_ARGUMENT:return ee.INVALID_ARGUMENT;case kt.NOT_FOUND:return ee.NOT_FOUND;case kt.ALREADY_EXISTS:return ee.ALREADY_EXISTS;case kt.PERMISSION_DENIED:return ee.PERMISSION_DENIED;case kt.FAILED_PRECONDITION:return ee.FAILED_PRECONDITION;case kt.ABORTED:return ee.ABORTED;case kt.OUT_OF_RANGE:return ee.OUT_OF_RANGE;case kt.UNIMPLEMENTED:return ee.UNIMPLEMENTED;case kt.DATA_LOSS:return ee.DATA_LOSS;default:return Ae(39323,{code:r})}}(Fe=kt||(kt={}))[Fe.OK=0]="OK",Fe[Fe.CANCELLED=1]="CANCELLED",Fe[Fe.UNKNOWN=2]="UNKNOWN",Fe[Fe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Fe[Fe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Fe[Fe.NOT_FOUND=5]="NOT_FOUND",Fe[Fe.ALREADY_EXISTS=6]="ALREADY_EXISTS",Fe[Fe.PERMISSION_DENIED=7]="PERMISSION_DENIED",Fe[Fe.UNAUTHENTICATED=16]="UNAUTHENTICATED",Fe[Fe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Fe[Fe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Fe[Fe.ABORTED=10]="ABORTED",Fe[Fe.OUT_OF_RANGE=11]="OUT_OF_RANGE",Fe[Fe.UNIMPLEMENTED=12]="UNIMPLEMENTED",Fe[Fe.INTERNAL=13]="INTERNAL",Fe[Fe.UNAVAILABLE=14]="UNAVAILABLE",Fe[Fe.DATA_LOSS=15]="DATA_LOSS";function OI(){return new TextEncoder}const MI=new ms([4294967295,4294967295],0);function sE(r){const e=OI().encode(r),n=new FT;return n.update(e),new Uint8Array(n.digest())}function aE(r){const e=new DataView(r.buffer),n=e.getUint32(0,!0),s=e.getUint32(4,!0),o=e.getUint32(8,!0),u=e.getUint32(12,!0);return[new ms([n,s],0),new ms([o,u],0)]}class Yp{constructor(e,n,s){if(this.bitmap=e,this.padding=n,this.hashCount=s,n<0||n>=8)throw new Gl(`Invalid padding: ${n}`);if(s<0)throw new Gl(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new Gl(`Invalid hash count: ${s}`);if(e.length===0&&n!==0)throw new Gl(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=ms.fromNumber(this.ge)}ye(e,n,s){let o=e.add(n.multiply(ms.fromNumber(s)));return o.compare(MI)===1&&(o=new ms([o.getBits(0),o.getBits(1)],0)),o.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=sE(e),[s,o]=aE(n);for(let u=0;u<this.hashCount;u++){const f=this.ye(s,o,u);if(!this.we(f))return!1}return!0}static create(e,n,s){const o=e%8==0?0:8-e%8,u=new Uint8Array(Math.ceil(e/8)),f=new Yp(u,o,n);return s.forEach((m=>f.insert(m))),f}insert(e){if(this.ge===0)return;const n=sE(e),[s,o]=aE(n);for(let u=0;u<this.hashCount;u++){const f=this.ye(s,o,u);this.Se(f)}}Se(e){const n=Math.floor(e/8),s=e%8;this.bitmap[n]|=1<<s}}class Gl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class hf{constructor(e,n,s,o,u){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=s,this.documentUpdates=o,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,n,s){const o=new Map;return o.set(e,bu.createSynthesizedTargetChangeForCurrentChange(e,n,s)),new hf(Re.min(),o,new pt(ze),wr(),Be())}}class bu{constructor(e,n,s,o,u){this.resumeToken=e,this.current=n,this.addedDocuments=s,this.modifiedDocuments=o,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,n,s){return new bu(s,n,Be(),Be(),Be())}}class Ah{constructor(e,n,s,o){this.be=e,this.removedTargetIds=n,this.key=s,this.De=o}}class Vb{constructor(e,n){this.targetId=e,this.Ce=n}}class kb{constructor(e,n,s=sn.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=n,this.resumeToken=s,this.cause=o}}class oE{constructor(){this.ve=0,this.Fe=lE(),this.Me=sn.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Be(),n=Be(),s=Be();return this.Fe.forEach(((o,u)=>{switch(u){case 0:e=e.add(o);break;case 2:n=n.add(o);break;case 1:s=s.add(o);break;default:Ae(38017,{changeType:u})}})),new bu(this.Me,this.xe,e,n,s)}qe(){this.Oe=!1,this.Fe=lE()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Ge(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class VI{constructor(e){this.Ge=e,this.ze=new Map,this.je=wr(),this.Je=hh(),this.He=hh(),this.Ye=new pt(ze)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,(n=>{const s=this.nt(n);switch(e.state){case 0:this.rt(n)&&s.Le(e.resumeToken);break;case 1:s.Ke(),s.Ne||s.qe(),s.Le(e.resumeToken);break;case 2:s.Ke(),s.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(s.We(),s.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),s.Le(e.resumeToken));break;default:Ae(56790,{state:e.state})}}))}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach(((s,o)=>{this.rt(o)&&n(o)}))}st(e){const n=e.targetId,s=e.Ce.count,o=this.ot(n);if(o){const u=o.target;if(sp(u))if(s===0){const f=new Te(u.path);this.et(n,f,Kt.newNoDocument(f,Re.min()))}else Ge(s===1,20013,{expectedCount:s});else{const f=this._t(n);if(f!==s){const m=this.ut(e),p=m?this.ct(m,e,f):1;if(p!==0){this.it(n);const g=p===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,g)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:s="",padding:o=0},hashCount:u=0}=n;let f,m;try{f=Es(s).toUint8Array()}catch(p){if(p instanceof nb)return _o("Decoding the base64 bloom filter in existence filter failed ("+p.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw p}try{m=new Yp(f,o,u)}catch(p){return _o(p instanceof Gl?"BloomFilter error: ":"Applying bloom filter failed: ",p),null}return m.ge===0?null:m}ct(e,n,s){return n.Ce.count===s-this.Pt(e,n.targetId)?0:2}Pt(e,n){const s=this.Ge.getRemoteKeysForTarget(n);let o=0;return s.forEach((u=>{const f=this.Ge.ht(),m=`projects/${f.projectId}/databases/${f.database}/documents/${u.path.canonicalString()}`;e.mightContain(m)||(this.et(n,u,null),o++)})),o}Tt(e){const n=new Map;this.ze.forEach(((u,f)=>{const m=this.ot(f);if(m){if(u.current&&sp(m.target)){const p=new Te(m.target.path);this.It(p).has(f)||this.Et(f,p)||this.et(f,p,Kt.newNoDocument(p,e))}u.Be&&(n.set(f,u.ke()),u.qe())}}));let s=Be();this.He.forEach(((u,f)=>{let m=!0;f.forEachWhile((p=>{const g=this.ot(p);return!g||g.purpose==="TargetPurposeLimboResolution"||(m=!1,!1)})),m&&(s=s.add(u))})),this.je.forEach(((u,f)=>f.setReadTime(e)));const o=new hf(e,n,this.Ye,this.je,s);return this.je=wr(),this.Je=hh(),this.He=hh(),this.Ye=new pt(ze),o}Xe(e,n){if(!this.rt(e))return;const s=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,s),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,s){if(!this.rt(e))return;const o=this.nt(e);this.Et(e,n)?o.Qe(n,1):o.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),s&&(this.je=this.je.insert(n,s))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new oE,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new qt(ze),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new qt(ze),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||me("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new oE),this.Ge.getRemoteKeysForTarget(e).forEach((n=>{this.et(e,n,null)}))}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function hh(){return new pt(Te.comparator)}function lE(){return new pt(Te.comparator)}const kI={asc:"ASCENDING",desc:"DESCENDING"},PI={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},LI={and:"AND",or:"OR"};class UI{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function lp(r,e){return r.useProto3Json||_u(e)?e:{value:e}}function Bh(r,e){return r.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Pb(r,e){return r.useProto3Json?e.toBase64():e.toUint8Array()}function jI(r,e){return Bh(r,e.toTimestamp())}function zn(r){return Ge(!!r,49232),Re.fromTimestamp((function(n){const s=_s(n);return new ct(s.seconds,s.nanos)})(r))}function Kp(r,e){return up(r,e).canonicalString()}function up(r,e){const n=(function(o){return new st(["projects",o.projectId,"databases",o.database])})(r).child("documents");return e===void 0?n:n.child(e)}function Lb(r){const e=st.fromString(r);return Ge(Hb(e),10190,{key:e.toString()}),e}function qh(r,e){return Kp(r.databaseId,e.path)}function Zl(r,e){const n=Lb(e);if(n.get(1)!==r.databaseId.projectId)throw new he(ee.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+r.databaseId.projectId);if(n.get(3)!==r.databaseId.database)throw new he(ee.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+r.databaseId.database);return new Te(jb(n))}function Ub(r,e){return Kp(r.databaseId,e)}function zI(r){const e=Lb(r);return e.length===4?st.emptyPath():jb(e)}function cp(r){return new st(["projects",r.databaseId.projectId,"databases",r.databaseId.database]).canonicalString()}function jb(r){return Ge(r.length>4&&r.get(4)==="documents",29091,{key:r.toString()}),r.popFirst(5)}function uE(r,e,n){return{name:qh(r,e),fields:n.value.mapValue.fields}}function BI(r,e){return"found"in e?(function(s,o){Ge(!!o.found,43571),o.found.name,o.found.updateTime;const u=Zl(s,o.found.name),f=zn(o.found.updateTime),m=o.found.createTime?zn(o.found.createTime):Re.min(),p=new pn({mapValue:{fields:o.found.fields}});return Kt.newFoundDocument(u,f,m,p)})(r,e):"missing"in e?(function(s,o){Ge(!!o.missing,3894),Ge(!!o.readTime,22933);const u=Zl(s,o.missing),f=zn(o.readTime);return Kt.newNoDocument(u,f)})(r,e):Ae(7234,{result:e})}function qI(r,e){let n;if("targetChange"in e){e.targetChange;const s=(function(g){return g==="NO_CHANGE"?0:g==="ADD"?1:g==="REMOVE"?2:g==="CURRENT"?3:g==="RESET"?4:Ae(39313,{state:g})})(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],u=(function(g,E){return g.useProto3Json?(Ge(E===void 0||typeof E=="string",58123),sn.fromBase64String(E||"")):(Ge(E===void 0||E instanceof Buffer||E instanceof Uint8Array,16193),sn.fromUint8Array(E||new Uint8Array))})(r,e.targetChange.resumeToken),f=e.targetChange.cause,m=f&&(function(g){const E=g.code===void 0?ee.UNKNOWN:Mb(g.code);return new he(E,g.message||"")})(f);n=new kb(s,o,u,m||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const o=Zl(r,s.document.name),u=zn(s.document.updateTime),f=s.document.createTime?zn(s.document.createTime):Re.min(),m=new pn({mapValue:{fields:s.document.fields}}),p=Kt.newFoundDocument(o,u,f,m),g=s.targetIds||[],E=s.removedTargetIds||[];n=new Ah(g,E,p.key,p)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const o=Zl(r,s.document),u=s.readTime?zn(s.readTime):Re.min(),f=Kt.newNoDocument(o,u),m=s.removedTargetIds||[];n=new Ah([],m,f.key,f)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const o=Zl(r,s.document),u=s.removedTargetIds||[];n=new Ah([],u,o,null)}else{if(!("filter"in e))return Ae(11601,{Rt:e});{e.filter;const s=e.filter;s.targetId;const{count:o=0,unchangedNames:u}=s,f=new NI(o,u),m=s.targetId;n=new Vb(m,f)}}return n}function zb(r,e){let n;if(e instanceof Tu)n={update:uE(r,e.key,e.value)};else if(e instanceof cf)n={delete:qh(r,e.key)};else if(e instanceof Rs)n={update:uE(r,e.key,e.data),updateMask:WI(e.fieldMask)};else{if(!(e instanceof Nb))return Ae(16599,{Vt:e.type});n={verify:qh(r,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((s=>(function(u,f){const m=f.transform;if(m instanceof ou)return{fieldPath:f.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(m instanceof lu)return{fieldPath:f.field.canonicalString(),appendMissingElements:{values:m.elements}};if(m instanceof uu)return{fieldPath:f.field.canonicalString(),removeAllFromArray:{values:m.elements}};if(m instanceof cu)return{fieldPath:f.field.canonicalString(),increment:m.Ae};throw Ae(20930,{transform:f.transform})})(0,s)))),e.precondition.isNone||(n.currentDocument=(function(o,u){return u.updateTime!==void 0?{updateTime:jI(o,u.updateTime)}:u.exists!==void 0?{exists:u.exists}:Ae(27497)})(r,e.precondition)),n}function HI(r,e){return r&&r.length>0?(Ge(e!==void 0,14353),r.map((n=>(function(o,u){let f=o.updateTime?zn(o.updateTime):zn(u);return f.isEqual(Re.min())&&(f=zn(u)),new RI(f,o.transformResults||[])})(n,e)))):[]}function FI(r,e){return{documents:[Ub(r,e.path)]}}function GI(r,e){const n={structuredQuery:{}},s=e.path;let o;e.collectionGroup!==null?(o=s,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=s.popLast(),n.structuredQuery.from=[{collectionId:s.lastSegment()}]),n.parent=Ub(r,o);const u=(function(g){if(g.length!==0)return qb(_i.create(g,"and"))})(e.filters);u&&(n.structuredQuery.where=u);const f=(function(g){if(g.length!==0)return g.map((E=>(function(R){return{field:lo(R.field),direction:KI(R.dir)}})(E)))})(e.orderBy);f&&(n.structuredQuery.orderBy=f);const m=lp(r,e.limit);return m!==null&&(n.structuredQuery.limit=m),e.startAt&&(n.structuredQuery.startAt=(function(g){return{before:g.inclusive,values:g.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(g){return{before:!g.inclusive,values:g.position}})(e.endAt)),{ft:n,parent:o}}function QI(r){let e=zI(r.parent);const n=r.structuredQuery,s=n.from?n.from.length:0;let o=null;if(s>0){Ge(s===1,65062);const E=n.from[0];E.allDescendants?o=E.collectionId:e=e.child(E.collectionId)}let u=[];n.where&&(u=(function(T){const R=Bb(T);return R instanceof _i&&fb(R)?R.getFilters():[R]})(n.where));let f=[];n.orderBy&&(f=(function(T){return T.map((R=>(function(H){return new zh(uo(H.field),(function(z){switch(z){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(H.direction))})(R)))})(n.orderBy));let m=null;n.limit&&(m=(function(T){let R;return R=typeof T=="object"?T.value:T,_u(R)?null:R})(n.limit));let p=null;n.startAt&&(p=(function(T){const R=!!T.before,L=T.values||[];return new jh(L,R)})(n.startAt));let g=null;return n.endAt&&(g=(function(T){const R=!T.before,L=T.values||[];return new jh(L,R)})(n.endAt)),mI(e,o,f,u,m,"F",p,g)}function YI(r,e){const n=(function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ae(28987,{purpose:o})}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function Bb(r){return r.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const s=uo(n.unaryFilter.field);return Lt.create(s,"==",{doubleValue:NaN});case"IS_NULL":const o=uo(n.unaryFilter.field);return Lt.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const u=uo(n.unaryFilter.field);return Lt.create(u,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const f=uo(n.unaryFilter.field);return Lt.create(f,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Ae(61313);default:return Ae(60726)}})(r):r.fieldFilter!==void 0?(function(n){return Lt.create(uo(n.fieldFilter.field),(function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Ae(58110);default:return Ae(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(r):r.compositeFilter!==void 0?(function(n){return _i.create(n.compositeFilter.filters.map((s=>Bb(s))),(function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return Ae(1026)}})(n.compositeFilter.op))})(r):Ae(30097,{filter:r})}function KI(r){return kI[r]}function $I(r){return PI[r]}function XI(r){return LI[r]}function lo(r){return{fieldPath:r.canonicalString()}}function uo(r){return nn.fromServerFormat(r.fieldPath)}function qb(r){return r instanceof Lt?(function(n){if(n.op==="=="){if(X0(n.value))return{unaryFilter:{field:lo(n.field),op:"IS_NAN"}};if($0(n.value))return{unaryFilter:{field:lo(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(X0(n.value))return{unaryFilter:{field:lo(n.field),op:"IS_NOT_NAN"}};if($0(n.value))return{unaryFilter:{field:lo(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:lo(n.field),op:$I(n.op),value:n.value}}})(r):r instanceof _i?(function(n){const s=n.getFilters().map((o=>qb(o)));return s.length===1?s[0]:{compositeFilter:{op:XI(n.op),filters:s}}})(r):Ae(54877,{filter:r})}function WI(r){const e=[];return r.fields.forEach((n=>e.push(n.canonicalString()))),{fieldPaths:e}}function Hb(r){return r.length>=4&&r.get(0)==="projects"&&r.get(2)==="databases"}class cs{constructor(e,n,s,o,u=Re.min(),f=Re.min(),m=sn.EMPTY_BYTE_STRING,p=null){this.target=e,this.targetId=n,this.purpose=s,this.sequenceNumber=o,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=f,this.resumeToken=m,this.expectedCount=p}withSequenceNumber(e){return new cs(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new cs(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new cs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new cs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class JI{constructor(e){this.yt=e}}function ZI(r){const e=QI({parent:r.parent,structuredQuery:r.structuredQuery});return r.limitType==="LAST"?op(e,e.limit,"L"):e}class eD{constructor(){this.Cn=new tD}addToCollectionParentIndex(e,n){return this.Cn.add(n),re.resolve()}getCollectionParents(e,n){return re.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return re.resolve()}deleteFieldIndex(e,n){return re.resolve()}deleteAllFieldIndexes(e){return re.resolve()}createTargetIndexes(e,n){return re.resolve()}getDocumentsMatchingTarget(e,n){return re.resolve(null)}getIndexType(e,n){return re.resolve(0)}getFieldIndexes(e,n){return re.resolve([])}getNextCollectionGroupToUpdate(e){return re.resolve(null)}getMinOffset(e,n){return re.resolve(vs.min())}getMinOffsetFromCollectionGroup(e,n){return re.resolve(vs.min())}updateCollectionGroup(e,n,s){return re.resolve()}updateIndexEntries(e,n){return re.resolve()}}class tD{constructor(){this.index={}}add(e){const n=e.lastSegment(),s=e.popLast(),o=this.index[n]||new qt(st.comparator),u=!o.has(s);return this.index[n]=o.add(s),u}has(e){const n=e.lastSegment(),s=e.popLast(),o=this.index[n];return o&&o.has(s)}getEntries(e){return(this.index[e]||new qt(st.comparator)).toArray()}}const cE={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Fb=41943040;class Rn{static withCacheSize(e){return new Rn(e,Rn.DEFAULT_COLLECTION_PERCENTILE,Rn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=s}}Rn.DEFAULT_COLLECTION_PERCENTILE=10,Rn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Rn.DEFAULT=new Rn(Fb,Rn.DEFAULT_COLLECTION_PERCENTILE,Rn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Rn.DISABLED=new Rn(-1,0,0);class So{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new So(0)}static cr(){return new So(-1)}}const hE="LruGarbageCollector",nD=1048576;function fE([r,e],[n,s]){const o=ze(r,n);return o===0?ze(e,s):o}class iD{constructor(e){this.Ir=e,this.buffer=new qt(fE),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const s=this.buffer.last();fE(n,s)<0&&(this.buffer=this.buffer.delete(s).add(n))}}get maxValue(){return this.buffer.last()[0]}}class rD{constructor(e,n,s){this.garbageCollector=e,this.asyncQueue=n,this.localStore=s,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){me(hE,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){ko(n)?me(hE,"Ignoring IndexedDB error during garbage collection: ",n):await Vo(n)}await this.Vr(3e5)}))}}class sD{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next((s=>Math.floor(n/100*s)))}nthSequenceNumber(e,n){if(n===0)return re.resolve(nf.ce);const s=new iD(n);return this.mr.forEachTarget(e,(o=>s.Ar(o.sequenceNumber))).next((()=>this.mr.pr(e,(o=>s.Ar(o))))).next((()=>s.maxValue))}removeTargets(e,n,s){return this.mr.removeTargets(e,n,s)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(me("LruGarbageCollector","Garbage collection skipped; disabled"),re.resolve(cE)):this.getCacheSize(e).next((s=>s<this.params.cacheSizeCollectionThreshold?(me("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),cE):this.yr(e,n)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let s,o,u,f,m,p,g;const E=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((T=>(T>this.params.maximumSequenceNumbersToCollect?(me("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${T}`),o=this.params.maximumSequenceNumbersToCollect):o=T,f=Date.now(),this.nthSequenceNumber(e,o)))).next((T=>(s=T,m=Date.now(),this.removeTargets(e,s,n)))).next((T=>(u=T,p=Date.now(),this.removeOrphanedDocuments(e,s)))).next((T=>(g=Date.now(),ao()<=je.DEBUG&&me("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${f-E}ms
	Determined least recently used ${o} in `+(m-f)+`ms
	Removed ${u} targets in `+(p-m)+`ms
	Removed ${T} documents in `+(g-p)+`ms
Total Duration: ${g-E}ms`),re.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:u,documentsRemoved:T}))))}}function aD(r,e){return new sD(r,e)}class oD{constructor(){this.changes=new ma((e=>e.toString()),((e,n)=>e.isEqual(n))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Kt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const s=this.changes.get(n);return s!==void 0?re.resolve(s):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class lD{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}class uD{constructor(e,n,s,o){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=s,this.indexManager=o}getDocument(e,n){let s=null;return this.documentOverlayCache.getOverlay(e,n).next((o=>(s=o,this.remoteDocumentCache.getEntry(e,n)))).next((o=>(s!==null&&Jl(s.mutation,o,jn.empty(),ct.now()),o)))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next((s=>this.getLocalViewOfDocuments(e,s,Be()).next((()=>s))))}getLocalViewOfDocuments(e,n,s=Be()){const o=sa();return this.populateOverlays(e,o,n).next((()=>this.computeViews(e,n,o,s).next((u=>{let f=Fl();return u.forEach(((m,p)=>{f=f.insert(m,p.overlayedDocument)})),f}))))}getOverlayedDocuments(e,n){const s=sa();return this.populateOverlays(e,s,n).next((()=>this.computeViews(e,n,s,Be())))}populateOverlays(e,n,s){const o=[];return s.forEach((u=>{n.has(u)||o.push(u)})),this.documentOverlayCache.getOverlays(e,o).next((u=>{u.forEach(((f,m)=>{n.set(f,m)}))}))}computeViews(e,n,s,o){let u=wr();const f=Wl(),m=(function(){return Wl()})();return n.forEach(((p,g)=>{const E=s.get(g.key);o.has(g.key)&&(E===void 0||E.mutation instanceof Rs)?u=u.insert(g.key,g):E!==void 0?(f.set(g.key,E.mutation.getFieldMask()),Jl(E.mutation,g,E.mutation.getFieldMask(),ct.now())):f.set(g.key,jn.empty())})),this.recalculateAndSaveOverlays(e,u).next((p=>(p.forEach(((g,E)=>f.set(g,E))),n.forEach(((g,E)=>m.set(g,new lD(E,f.get(g)??null)))),m)))}recalculateAndSaveOverlays(e,n){const s=Wl();let o=new pt(((f,m)=>f-m)),u=Be();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next((f=>{for(const m of f)m.keys().forEach((p=>{const g=n.get(p);if(g===null)return;let E=s.get(p)||jn.empty();E=m.applyToLocalView(g,E),s.set(p,E);const T=(o.get(m.batchId)||Be()).add(p);o=o.insert(m.batchId,T)}))})).next((()=>{const f=[],m=o.getReverseIterator();for(;m.hasNext();){const p=m.getNext(),g=p.key,E=p.value,T=Tb();E.forEach((R=>{if(!u.has(R)){const L=Ib(n.get(R),s.get(R));L!==null&&T.set(R,L),u=u.add(R)}})),f.push(this.documentOverlayCache.saveOverlays(e,g,T))}return re.waitFor(f)})).next((()=>s))}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next((s=>this.recalculateAndSaveOverlays(e,s)))}getDocumentsMatchingQuery(e,n,s,o){return(function(f){return Te.isDocumentKey(f.path)&&f.collectionGroup===null&&f.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):gb(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,s,o):this.getDocumentsMatchingCollectionQuery(e,n,s,o)}getNextDocuments(e,n,s,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,s,o).next((u=>{const f=o-u.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,s.largestBatchId,o-u.size):re.resolve(sa());let m=iu,p=u;return f.next((g=>re.forEach(g,((E,T)=>(m<T.largestBatchId&&(m=T.largestBatchId),u.get(E)?re.resolve():this.remoteDocumentCache.getEntry(e,E).next((R=>{p=p.insert(E,R)}))))).next((()=>this.populateOverlays(e,g,u))).next((()=>this.computeViews(e,p,g,Be()))).next((E=>({batchId:m,changes:Eb(E)})))))}))}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Te(n)).next((s=>{let o=Fl();return s.isFoundDocument()&&(o=o.insert(s.key,s)),o}))}getDocumentsMatchingCollectionGroupQuery(e,n,s,o){const u=n.collectionGroup;let f=Fl();return this.indexManager.getCollectionParents(e,u).next((m=>re.forEach(m,(p=>{const g=(function(T,R){return new Eu(R,null,T.explicitOrderBy.slice(),T.filters.slice(),T.limit,T.limitType,T.startAt,T.endAt)})(n,p.child(u));return this.getDocumentsMatchingCollectionQuery(e,g,s,o).next((E=>{E.forEach(((T,R)=>{f=f.insert(T,R)}))}))})).next((()=>f))))}getDocumentsMatchingCollectionQuery(e,n,s,o){let u;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,s.largestBatchId).next((f=>(u=f,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,s,u,o)))).next((f=>{u.forEach(((p,g)=>{const E=g.getKey();f.get(E)===null&&(f=f.insert(E,Kt.newInvalidDocument(E)))}));let m=Fl();return f.forEach(((p,g)=>{const E=u.get(p);E!==void 0&&Jl(E.mutation,g,jn.empty(),ct.now()),of(n,g)&&(m=m.insert(p,g))})),m}))}}class cD{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return re.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,(function(o){return{id:o.id,version:o.version,createTime:zn(o.createTime)}})(n)),re.resolve()}getNamedQuery(e,n){return re.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,(function(o){return{name:o.name,query:ZI(o.bundledQuery),readTime:zn(o.readTime)}})(n)),re.resolve()}}class hD{constructor(){this.overlays=new pt(Te.comparator),this.qr=new Map}getOverlay(e,n){return re.resolve(this.overlays.get(n))}getOverlays(e,n){const s=sa();return re.forEach(n,(o=>this.getOverlay(e,o).next((u=>{u!==null&&s.set(o,u)})))).next((()=>s))}saveOverlays(e,n,s){return s.forEach(((o,u)=>{this.St(e,n,u)})),re.resolve()}removeOverlaysForBatchId(e,n,s){const o=this.qr.get(s);return o!==void 0&&(o.forEach((u=>this.overlays=this.overlays.remove(u))),this.qr.delete(s)),re.resolve()}getOverlaysForCollection(e,n,s){const o=sa(),u=n.length+1,f=new Te(n.child("")),m=this.overlays.getIteratorFrom(f);for(;m.hasNext();){const p=m.getNext().value,g=p.getKey();if(!n.isPrefixOf(g.path))break;g.path.length===u&&p.largestBatchId>s&&o.set(p.getKey(),p)}return re.resolve(o)}getOverlaysForCollectionGroup(e,n,s,o){let u=new pt(((g,E)=>g-E));const f=this.overlays.getIterator();for(;f.hasNext();){const g=f.getNext().value;if(g.getKey().getCollectionGroup()===n&&g.largestBatchId>s){let E=u.get(g.largestBatchId);E===null&&(E=sa(),u=u.insert(g.largestBatchId,E)),E.set(g.getKey(),g)}}const m=sa(),p=u.getIterator();for(;p.hasNext()&&(p.getNext().value.forEach(((g,E)=>m.set(g,E))),!(m.size()>=o)););return re.resolve(m)}St(e,n,s){const o=this.overlays.get(s.key);if(o!==null){const f=this.qr.get(o.largestBatchId).delete(s.key);this.qr.set(o.largestBatchId,f)}this.overlays=this.overlays.insert(s.key,new DI(n,s));let u=this.qr.get(n);u===void 0&&(u=Be(),this.qr.set(n,u)),this.qr.set(n,u.add(s.key))}}class fD{constructor(){this.sessionToken=sn.EMPTY_BYTE_STRING}getSessionToken(e){return re.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,re.resolve()}}class $p{constructor(){this.Qr=new qt(Yt.$r),this.Ur=new qt(Yt.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const s=new Yt(e,n);this.Qr=this.Qr.add(s),this.Ur=this.Ur.add(s)}Wr(e,n){e.forEach((s=>this.addReference(s,n)))}removeReference(e,n){this.Gr(new Yt(e,n))}zr(e,n){e.forEach((s=>this.removeReference(s,n)))}jr(e){const n=new Te(new st([])),s=new Yt(n,e),o=new Yt(n,e+1),u=[];return this.Ur.forEachInRange([s,o],(f=>{this.Gr(f),u.push(f.key)})),u}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new Te(new st([])),s=new Yt(n,e),o=new Yt(n,e+1);let u=Be();return this.Ur.forEachInRange([s,o],(f=>{u=u.add(f.key)})),u}containsKey(e){const n=new Yt(e,0),s=this.Qr.firstAfterOrEqual(n);return s!==null&&e.isEqual(s.key)}}class Yt{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return Te.comparator(e.key,n.key)||ze(e.Yr,n.Yr)}static Kr(e,n){return ze(e.Yr,n.Yr)||Te.comparator(e.key,n.key)}}class dD{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new qt(Yt.$r)}checkEmpty(e){return re.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,s,o){const u=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const f=new II(u,n,s,o);this.mutationQueue.push(f);for(const m of o)this.Zr=this.Zr.add(new Yt(m.key,u)),this.indexManager.addToCollectionParentIndex(e,m.key.path.popLast());return re.resolve(f)}lookupMutationBatch(e,n){return re.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const s=n+1,o=this.ei(s),u=o<0?0:o;return re.resolve(this.mutationQueue.length>u?this.mutationQueue[u]:null)}getHighestUnacknowledgedBatchId(){return re.resolve(this.mutationQueue.length===0?zp:this.tr-1)}getAllMutationBatches(e){return re.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const s=new Yt(n,0),o=new Yt(n,Number.POSITIVE_INFINITY),u=[];return this.Zr.forEachInRange([s,o],(f=>{const m=this.Xr(f.Yr);u.push(m)})),re.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,n){let s=new qt(ze);return n.forEach((o=>{const u=new Yt(o,0),f=new Yt(o,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([u,f],(m=>{s=s.add(m.Yr)}))})),re.resolve(this.ti(s))}getAllMutationBatchesAffectingQuery(e,n){const s=n.path,o=s.length+1;let u=s;Te.isDocumentKey(u)||(u=u.child(""));const f=new Yt(new Te(u),0);let m=new qt(ze);return this.Zr.forEachWhile((p=>{const g=p.key.path;return!!s.isPrefixOf(g)&&(g.length===o&&(m=m.add(p.Yr)),!0)}),f),re.resolve(this.ti(m))}ti(e){const n=[];return e.forEach((s=>{const o=this.Xr(s);o!==null&&n.push(o)})),n}removeMutationBatch(e,n){Ge(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Zr;return re.forEach(n.mutations,(o=>{const u=new Yt(o.key,n.batchId);return s=s.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)})).next((()=>{this.Zr=s}))}ir(e){}containsKey(e,n){const s=new Yt(n,0),o=this.Zr.firstAfterOrEqual(s);return re.resolve(n.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,re.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}class mD{constructor(e){this.ri=e,this.docs=(function(){return new pt(Te.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const s=n.key,o=this.docs.get(s),u=o?o.size:0,f=this.ri(n);return this.docs=this.docs.insert(s,{document:n.mutableCopy(),size:f}),this.size+=f-u,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const s=this.docs.get(n);return re.resolve(s?s.document.mutableCopy():Kt.newInvalidDocument(n))}getEntries(e,n){let s=wr();return n.forEach((o=>{const u=this.docs.get(o);s=s.insert(o,u?u.document.mutableCopy():Kt.newInvalidDocument(o))})),re.resolve(s)}getDocumentsMatchingQuery(e,n,s,o){let u=wr();const f=n.path,m=new Te(f.child("__id-9223372036854775808__")),p=this.docs.getIteratorFrom(m);for(;p.hasNext();){const{key:g,value:{document:E}}=p.getNext();if(!f.isPrefixOf(g.path))break;g.path.length>f.length+1||Q2(G2(E),s)<=0||(o.has(E.key)||of(n,E))&&(u=u.insert(E.key,E.mutableCopy()))}return re.resolve(u)}getAllFromCollectionGroup(e,n,s,o){Ae(9500)}ii(e,n){return re.forEach(this.docs,(s=>n(s)))}newChangeBuffer(e){return new pD(this)}getSize(e){return re.resolve(this.size)}}class pD extends oD{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach(((s,o)=>{o.isValidDocument()?n.push(this.Nr.addEntry(e,o)):this.Nr.removeEntry(s)})),re.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}class gD{constructor(e){this.persistence=e,this.si=new ma((n=>Hp(n)),Fp),this.lastRemoteSnapshotVersion=Re.min(),this.highestTargetId=0,this.oi=0,this._i=new $p,this.targetCount=0,this.ai=So.ur()}forEachTarget(e,n){return this.si.forEach(((s,o)=>n(o))),re.resolve()}getLastRemoteSnapshotVersion(e){return re.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return re.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),re.resolve(this.highestTargetId)}setTargetsMetadata(e,n,s){return s&&(this.lastRemoteSnapshotVersion=s),n>this.oi&&(this.oi=n),re.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new So(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,re.resolve()}updateTargetData(e,n){return this.Pr(n),re.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,re.resolve()}removeTargets(e,n,s){let o=0;const u=[];return this.si.forEach(((f,m)=>{m.sequenceNumber<=n&&s.get(m.targetId)===null&&(this.si.delete(f),u.push(this.removeMatchingKeysForTargetId(e,m.targetId)),o++)})),re.waitFor(u).next((()=>o))}getTargetCount(e){return re.resolve(this.targetCount)}getTargetData(e,n){const s=this.si.get(n)||null;return re.resolve(s)}addMatchingKeys(e,n,s){return this._i.Wr(n,s),re.resolve()}removeMatchingKeys(e,n,s){this._i.zr(n,s);const o=this.persistence.referenceDelegate,u=[];return o&&n.forEach((f=>{u.push(o.markPotentiallyOrphaned(e,f))})),re.waitFor(u)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),re.resolve()}getMatchingKeysForTargetId(e,n){const s=this._i.Hr(n);return re.resolve(s)}containsKey(e,n){return re.resolve(this._i.containsKey(n))}}class Gb{constructor(e,n){this.ui={},this.overlays={},this.ci=new nf(0),this.li=!1,this.li=!0,this.hi=new fD,this.referenceDelegate=e(this),this.Pi=new gD(this),this.indexManager=new eD,this.remoteDocumentCache=(function(o){return new mD(o)})((s=>this.referenceDelegate.Ti(s))),this.serializer=new JI(n),this.Ii=new cD(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new hD,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let s=this.ui[e.toKey()];return s||(s=new dD(n,this.referenceDelegate),this.ui[e.toKey()]=s),s}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,s){me("MemoryPersistence","Starting transaction:",e);const o=new yD(this.ci.next());return this.referenceDelegate.Ei(),s(o).next((u=>this.referenceDelegate.di(o).next((()=>u)))).toPromise().then((u=>(o.raiseOnCommittedEvent(),u)))}Ai(e,n){return re.or(Object.values(this.ui).map((s=>()=>s.containsKey(e,n))))}}class yD extends K2{constructor(e){super(),this.currentSequenceNumber=e}}class Xp{constructor(e){this.persistence=e,this.Ri=new $p,this.Vi=null}static mi(e){return new Xp(e)}get fi(){if(this.Vi)return this.Vi;throw Ae(60996)}addReference(e,n,s){return this.Ri.addReference(s,n),this.fi.delete(s.toString()),re.resolve()}removeReference(e,n,s){return this.Ri.removeReference(s,n),this.fi.add(s.toString()),re.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),re.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach((o=>this.fi.add(o.toString())));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,n.targetId).next((o=>{o.forEach((u=>this.fi.add(u.toString())))})).next((()=>s.removeTargetData(e,n)))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return re.forEach(this.fi,(s=>{const o=Te.fromPath(s);return this.gi(e,o).next((u=>{u||n.removeEntry(o,Re.min())}))})).next((()=>(this.Vi=null,n.apply(e))))}updateLimboDocument(e,n){return this.gi(e,n).next((s=>{s?this.fi.delete(n.toString()):this.fi.add(n.toString())}))}Ti(e){return 0}gi(e,n){return re.or([()=>re.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class Hh{constructor(e,n){this.persistence=e,this.pi=new ma((s=>W2(s.path)),((s,o)=>s.isEqual(o))),this.garbageCollector=aD(this,n)}static mi(e,n){return new Hh(e,n)}Ei(){}di(e){return re.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((s=>n.next((o=>s+o))))}wr(e){let n=0;return this.pr(e,(s=>{n++})).next((()=>n))}pr(e,n){return re.forEach(this.pi,((s,o)=>this.br(e,s,o).next((u=>u?re.resolve():n(o)))))}removeTargets(e,n,s){return this.persistence.getTargetCache().removeTargets(e,n,s)}removeOrphanedDocuments(e,n){let s=0;const o=this.persistence.getRemoteDocumentCache(),u=o.newChangeBuffer();return o.ii(e,(f=>this.br(e,f,n).next((m=>{m||(s++,u.removeEntry(f,Re.min()))})))).next((()=>u.apply(e))).next((()=>s))}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),re.resolve()}removeTarget(e,n){const s=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,s)}addReference(e,n,s){return this.pi.set(s,e.currentSequenceNumber),re.resolve()}removeReference(e,n,s){return this.pi.set(s,e.currentSequenceNumber),re.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),re.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Th(e.data.value)),n}br(e,n,s){return re.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const o=this.pi.get(n);return re.resolve(o!==void 0&&o>s)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class Wp{constructor(e,n,s,o){this.targetId=e,this.fromCache=n,this.Es=s,this.ds=o}static As(e,n){let s=Be(),o=Be();for(const u of n.docChanges)switch(u.type){case 0:s=s.add(u.doc.key);break;case 1:o=o.add(u.doc.key)}return new Wp(e,n.fromCache,s,o)}}class vD{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class _D{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return fR()?8:$2(cn())>0?6:4})()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,s,o){const u={result:null};return this.ys(e,n).next((f=>{u.result=f})).next((()=>{if(!u.result)return this.ws(e,n,o,s).next((f=>{u.result=f}))})).next((()=>{if(u.result)return;const f=new vD;return this.Ss(e,n,f).next((m=>{if(u.result=m,this.Vs)return this.bs(e,n,f,m.size)}))})).next((()=>u.result))}bs(e,n,s,o){return s.documentReadCount<this.fs?(ao()<=je.DEBUG&&me("QueryEngine","SDK will not create cache indexes for query:",oo(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),re.resolve()):(ao()<=je.DEBUG&&me("QueryEngine","Query:",oo(n),"scans",s.documentReadCount,"local documents and returns",o,"documents as results."),s.documentReadCount>this.gs*o?(ao()<=je.DEBUG&&me("QueryEngine","The SDK decides to create cache indexes for query:",oo(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Gi(n))):re.resolve())}ys(e,n){if(eE(n))return re.resolve(null);let s=Gi(n);return this.indexManager.getIndexType(e,s).next((o=>o===0?null:(n.limit!==null&&o===1&&(n=op(n,null,"F"),s=Gi(n)),this.indexManager.getDocumentsMatchingTarget(e,s).next((u=>{const f=Be(...u);return this.ps.getDocuments(e,f).next((m=>this.indexManager.getMinOffset(e,s).next((p=>{const g=this.Ds(n,m);return this.Cs(n,g,f,p.readTime)?this.ys(e,op(n,null,"F")):this.vs(e,g,n,p)}))))})))))}ws(e,n,s,o){return eE(n)||o.isEqual(Re.min())?re.resolve(null):this.ps.getDocuments(e,s).next((u=>{const f=this.Ds(n,u);return this.Cs(n,f,s,o)?re.resolve(null):(ao()<=je.DEBUG&&me("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),oo(n)),this.vs(e,f,n,F2(o,iu)).next((m=>m)))}))}Ds(e,n){let s=new qt(vb(e));return n.forEach(((o,u)=>{of(e,u)&&(s=s.add(u))})),s}Cs(e,n,s,o){if(e.limit===null)return!1;if(s.size!==n.size)return!0;const u=e.limitType==="F"?n.last():n.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(o)>0)}Ss(e,n,s){return ao()<=je.DEBUG&&me("QueryEngine","Using full collection scan to execute query:",oo(n)),this.ps.getDocumentsMatchingQuery(e,n,vs.min(),s)}vs(e,n,s,o){return this.ps.getDocumentsMatchingQuery(e,s,o).next((u=>(n.forEach((f=>{u=u.insert(f.key,f)})),u)))}}const Jp="LocalStore",ED=3e8;class TD{constructor(e,n,s,o){this.persistence=e,this.Fs=n,this.serializer=o,this.Ms=new pt(ze),this.xs=new ma((u=>Hp(u)),Fp),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(s)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new uD(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>e.collect(n,this.Ms)))}}function bD(r,e,n,s){return new TD(r,e,n,s)}async function Qb(r,e){const n=xe(r);return await n.persistence.runTransaction("Handle user change","readonly",(s=>{let o;return n.mutationQueue.getAllMutationBatches(s).next((u=>(o=u,n.Bs(e),n.mutationQueue.getAllMutationBatches(s)))).next((u=>{const f=[],m=[];let p=Be();for(const g of o){f.push(g.batchId);for(const E of g.mutations)p=p.add(E.key)}for(const g of u){m.push(g.batchId);for(const E of g.mutations)p=p.add(E.key)}return n.localDocuments.getDocuments(s,p).next((g=>({Ls:g,removedBatchIds:f,addedBatchIds:m})))}))}))}function SD(r,e){const n=xe(r);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(s=>{const o=e.batch.keys(),u=n.Ns.newChangeBuffer({trackRemovals:!0});return(function(m,p,g,E){const T=g.batch,R=T.keys();let L=re.resolve();return R.forEach((H=>{L=L.next((()=>E.getEntry(p,H))).next((G=>{const z=g.docVersions.get(H);Ge(z!==null,48541),G.version.compareTo(z)<0&&(T.applyToRemoteDocument(G,g),G.isValidDocument()&&(G.setReadTime(g.commitVersion),E.addEntry(G)))}))})),L.next((()=>m.mutationQueue.removeMutationBatch(p,T)))})(n,s,e,u).next((()=>u.apply(s))).next((()=>n.mutationQueue.performConsistencyCheck(s))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(s,o,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,(function(m){let p=Be();for(let g=0;g<m.mutationResults.length;++g)m.mutationResults[g].transformResults.length>0&&(p=p.add(m.batch.mutations[g].key));return p})(e)))).next((()=>n.localDocuments.getDocuments(s,o)))}))}function Yb(r){const e=xe(r);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>e.Pi.getLastRemoteSnapshotVersion(n)))}function AD(r,e){const n=xe(r),s=e.snapshotVersion;let o=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(u=>{const f=n.Ns.newChangeBuffer({trackRemovals:!0});o=n.Ms;const m=[];e.targetChanges.forEach(((E,T)=>{const R=o.get(T);if(!R)return;m.push(n.Pi.removeMatchingKeys(u,E.removedDocuments,T).next((()=>n.Pi.addMatchingKeys(u,E.addedDocuments,T))));let L=R.withSequenceNumber(u.currentSequenceNumber);e.targetMismatches.get(T)!==null?L=L.withResumeToken(sn.EMPTY_BYTE_STRING,Re.min()).withLastLimboFreeSnapshotVersion(Re.min()):E.resumeToken.approximateByteSize()>0&&(L=L.withResumeToken(E.resumeToken,s)),o=o.insert(T,L),(function(G,z,W){return G.resumeToken.approximateByteSize()===0||z.snapshotVersion.toMicroseconds()-G.snapshotVersion.toMicroseconds()>=ED?!0:W.addedDocuments.size+W.modifiedDocuments.size+W.removedDocuments.size>0})(R,L,E)&&m.push(n.Pi.updateTargetData(u,L))}));let p=wr(),g=Be();if(e.documentUpdates.forEach((E=>{e.resolvedLimboDocuments.has(E)&&m.push(n.persistence.referenceDelegate.updateLimboDocument(u,E))})),m.push(wD(u,f,e.documentUpdates).next((E=>{p=E.ks,g=E.qs}))),!s.isEqual(Re.min())){const E=n.Pi.getLastRemoteSnapshotVersion(u).next((T=>n.Pi.setTargetsMetadata(u,u.currentSequenceNumber,s)));m.push(E)}return re.waitFor(m).next((()=>f.apply(u))).next((()=>n.localDocuments.getLocalViewOfDocuments(u,p,g))).next((()=>p))})).then((u=>(n.Ms=o,u)))}function wD(r,e,n){let s=Be(),o=Be();return n.forEach((u=>s=s.add(u))),e.getEntries(r,s).next((u=>{let f=wr();return n.forEach(((m,p)=>{const g=u.get(m);p.isFoundDocument()!==g.isFoundDocument()&&(o=o.add(m)),p.isNoDocument()&&p.version.isEqual(Re.min())?(e.removeEntry(m,p.readTime),f=f.insert(m,p)):!g.isValidDocument()||p.version.compareTo(g.version)>0||p.version.compareTo(g.version)===0&&g.hasPendingWrites?(e.addEntry(p),f=f.insert(m,p)):me(Jp,"Ignoring outdated watch update for ",m,". Current version:",g.version," Watch version:",p.version)})),{ks:f,qs:o}}))}function RD(r,e){const n=xe(r);return n.persistence.runTransaction("Get next mutation batch","readonly",(s=>(e===void 0&&(e=zp),n.mutationQueue.getNextMutationBatchAfterBatchId(s,e))))}function CD(r,e){const n=xe(r);return n.persistence.runTransaction("Allocate target","readwrite",(s=>{let o;return n.Pi.getTargetData(s,e).next((u=>u?(o=u,re.resolve(o)):n.Pi.allocateTargetId(s).next((f=>(o=new cs(e,f,"TargetPurposeListen",s.currentSequenceNumber),n.Pi.addTargetData(s,o).next((()=>o)))))))})).then((s=>{const o=n.Ms.get(s.targetId);return(o===null||s.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(s.targetId,s),n.xs.set(e,s.targetId)),s}))}async function hp(r,e,n){const s=xe(r),o=s.Ms.get(e),u=n?"readwrite":"readwrite-primary";try{n||await s.persistence.runTransaction("Release target",u,(f=>s.persistence.referenceDelegate.removeTarget(f,o)))}catch(f){if(!ko(f))throw f;me(Jp,`Failed to update sequence numbers for target ${e}: ${f}`)}s.Ms=s.Ms.remove(e),s.xs.delete(o.target)}function dE(r,e,n){const s=xe(r);let o=Re.min(),u=Be();return s.persistence.runTransaction("Execute query","readwrite",(f=>(function(p,g,E){const T=xe(p),R=T.xs.get(E);return R!==void 0?re.resolve(T.Ms.get(R)):T.Pi.getTargetData(g,E)})(s,f,Gi(e)).next((m=>{if(m)return o=m.lastLimboFreeSnapshotVersion,s.Pi.getMatchingKeysForTargetId(f,m.targetId).next((p=>{u=p}))})).next((()=>s.Fs.getDocumentsMatchingQuery(f,e,n?o:Re.min(),n?u:Be()))).next((m=>(xD(s,gI(e),m),{documents:m,Qs:u})))))}function xD(r,e,n){let s=r.Os.get(e)||Re.min();n.forEach(((o,u)=>{u.readTime.compareTo(s)>0&&(s=u.readTime)})),r.Os.set(e,s)}class mE{constructor(){this.activeTargetIds=bI()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class ID{constructor(){this.Mo=new mE,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,s){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,s){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new mE,Promise.resolve()}handleUserChange(e,n,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class DD{Oo(e){}shutdown(){}}const pE="ConnectivityMonitor";class gE{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){me(pE,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){me(pE,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let fh=null;function fp(){return fh===null?fh=(function(){return 268435456+Math.round(2147483648*Math.random())})():fh++,"0x"+fh.toString(16)}const Lm="RestConnection",ND={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class OD{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${s}/databases/${o}`,this.Wo=this.databaseId.database===Lh?`project_id=${s}`:`project_id=${s}&database_id=${o}`}Go(e,n,s,o,u){const f=fp(),m=this.zo(e,n.toUriEncodedString());me(Lm,`Sending RPC '${e}' ${f}:`,m,s);const p={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(p,o,u);const{host:g}=new URL(m),E=Do(g);return this.Jo(e,m,p,s,E).then((T=>(me(Lm,`Received RPC '${e}' ${f}: `,T),T)),(T=>{throw _o(Lm,`RPC '${e}' ${f} failed with error: `,T,"url: ",m,"request:",s),T}))}Ho(e,n,s,o,u,f){return this.Go(e,n,s,o,u)}jo(e,n,s){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Mo})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((o,u)=>e[u]=o)),s&&s.headers.forEach(((o,u)=>e[u]=o))}zo(e,n){const s=ND[e];return`${this.Uo}/v1/${n}:${s}`}terminate(){}}class MD{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}const ln="WebChannelConnection";class VD extends OD{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,s,o,u){const f=fp();return new Promise(((m,p)=>{const g=new GT;g.setWithCredentials(!0),g.listenOnce(QT.COMPLETE,(()=>{try{switch(g.getLastErrorCode()){case Eh.NO_ERROR:const T=g.getResponseJson();me(ln,`XHR for RPC '${e}' ${f} received:`,JSON.stringify(T)),m(T);break;case Eh.TIMEOUT:me(ln,`RPC '${e}' ${f} timed out`),p(new he(ee.DEADLINE_EXCEEDED,"Request time out"));break;case Eh.HTTP_ERROR:const R=g.getStatus();if(me(ln,`RPC '${e}' ${f} failed with status:`,R,"response text:",g.getResponseText()),R>0){let L=g.getResponseJson();Array.isArray(L)&&(L=L[0]);const H=L?.error;if(H&&H.status&&H.message){const G=(function(W){const K=W.toLowerCase().replace(/_/g,"-");return Object.values(ee).indexOf(K)>=0?K:ee.UNKNOWN})(H.status);p(new he(G,H.message))}else p(new he(ee.UNKNOWN,"Server responded with status "+g.getStatus()))}else p(new he(ee.UNAVAILABLE,"Connection failed."));break;default:Ae(9055,{l_:e,streamId:f,h_:g.getLastErrorCode(),P_:g.getLastError()})}}finally{me(ln,`RPC '${e}' ${f} completed.`)}}));const E=JSON.stringify(o);me(ln,`RPC '${e}' ${f} sending request:`,o),g.send(n,"POST",E,s,15)}))}T_(e,n,s){const o=fp(),u=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],f=$T(),m=KT(),p={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},g=this.longPollingOptions.timeoutSeconds;g!==void 0&&(p.longPollingTimeout=Math.round(1e3*g)),this.useFetchStreams&&(p.useFetchStreams=!0),this.jo(p.initMessageHeaders,n,s),p.encodeInitMessageHeaders=!0;const E=u.join("");me(ln,`Creating RPC '${e}' stream ${o}: ${E}`,p);const T=f.createWebChannel(E,p);this.I_(T);let R=!1,L=!1;const H=new MD({Yo:z=>{L?me(ln,`Not sending because RPC '${e}' stream ${o} is closed:`,z):(R||(me(ln,`Opening RPC '${e}' stream ${o} transport.`),T.open(),R=!0),me(ln,`RPC '${e}' stream ${o} sending:`,z),T.send(z))},Zo:()=>T.close()}),G=(z,W,K)=>{z.listen(W,(Z=>{try{K(Z)}catch(se){setTimeout((()=>{throw se}),0)}}))};return G(T,Hl.EventType.OPEN,(()=>{L||(me(ln,`RPC '${e}' stream ${o} transport opened.`),H.o_())})),G(T,Hl.EventType.CLOSE,(()=>{L||(L=!0,me(ln,`RPC '${e}' stream ${o} transport closed`),H.a_(),this.E_(T))})),G(T,Hl.EventType.ERROR,(z=>{L||(L=!0,_o(ln,`RPC '${e}' stream ${o} transport errored. Name:`,z.name,"Message:",z.message),H.a_(new he(ee.UNAVAILABLE,"The operation could not be completed")))})),G(T,Hl.EventType.MESSAGE,(z=>{if(!L){const W=z.data[0];Ge(!!W,16349);const K=W,Z=K?.error||K[0]?.error;if(Z){me(ln,`RPC '${e}' stream ${o} received error:`,Z);const se=Z.status;let le=(function(x){const A=kt[x];if(A!==void 0)return Mb(A)})(se),pe=Z.message;le===void 0&&(le=ee.INTERNAL,pe="Unknown error status: "+se+" with message "+Z.message),L=!0,H.a_(new he(le,pe)),T.close()}else me(ln,`RPC '${e}' stream ${o} received:`,W),H.u_(W)}})),G(m,YT.STAT_EVENT,(z=>{z.stat===ep.PROXY?me(ln,`RPC '${e}' stream ${o} detected buffering proxy`):z.stat===ep.NOPROXY&&me(ln,`RPC '${e}' stream ${o} detected no buffering proxy`)})),setTimeout((()=>{H.__()}),0),H}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((n=>n===e))}}function Um(){return typeof document<"u"?document:null}function ff(r){return new UI(r,!0)}class Zp{constructor(e,n,s=1e3,o=1.5,u=6e4){this.Mi=e,this.timerId=n,this.d_=s,this.A_=o,this.R_=u,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),s=Math.max(0,Date.now()-this.f_),o=Math.max(0,n-s);o>0&&me("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${s} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,o,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}const yE="PersistentStream";class Kb{constructor(e,n,s,o,u,f,m,p){this.Mi=e,this.S_=s,this.b_=o,this.connection=u,this.authCredentialsProvider=f,this.appCheckCredentialsProvider=m,this.listener=p,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new Zp(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===ee.RESOURCE_EXHAUSTED?(Ar(n.toString()),Ar("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===ee.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([s,o])=>{this.D_===n&&this.G_(s,o)}),(s=>{e((()=>{const o=new he(ee.UNKNOWN,"Fetching auth token failed: "+s.message);return this.z_(o)}))}))}G_(e,n){const s=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo((()=>{s((()=>this.listener.Xo()))})),this.stream.t_((()=>{s((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((o=>{s((()=>this.z_(o)))})),this.stream.onMessage((o=>{s((()=>++this.F_==1?this.J_(o):this.onNext(o)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return me(yE,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget((()=>this.D_===e?n():(me(yE,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class kD extends Kb{constructor(e,n,s,o,u,f){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,s,o,f),this.serializer=u}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=qI(this.serializer,e),s=(function(u){if(!("targetChange"in u))return Re.min();const f=u.targetChange;return f.targetIds&&f.targetIds.length?Re.min():f.readTime?zn(f.readTime):Re.min()})(e);return this.listener.H_(n,s)}Y_(e){const n={};n.database=cp(this.serializer),n.addTarget=(function(u,f){let m;const p=f.target;if(m=sp(p)?{documents:FI(u,p)}:{query:GI(u,p).ft},m.targetId=f.targetId,f.resumeToken.approximateByteSize()>0){m.resumeToken=Pb(u,f.resumeToken);const g=lp(u,f.expectedCount);g!==null&&(m.expectedCount=g)}else if(f.snapshotVersion.compareTo(Re.min())>0){m.readTime=Bh(u,f.snapshotVersion.toTimestamp());const g=lp(u,f.expectedCount);g!==null&&(m.expectedCount=g)}return m})(this.serializer,e);const s=YI(this.serializer,e);s&&(n.labels=s),this.q_(n)}Z_(e){const n={};n.database=cp(this.serializer),n.removeTarget=e,this.q_(n)}}class PD extends Kb{constructor(e,n,s,o,u,f){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,s,o,f),this.serializer=u}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return Ge(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Ge(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Ge(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=HI(e.writeResults,e.commitTime),s=zn(e.commitTime);return this.listener.na(s,n)}ra(){const e={};e.database=cp(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map((s=>zb(this.serializer,s)))};this.q_(n)}}class LD{}class UD extends LD{constructor(e,n,s,o){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=s,this.serializer=o,this.ia=!1}sa(){if(this.ia)throw new he(ee.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,s,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([u,f])=>this.connection.Go(e,up(n,s),o,u,f))).catch((u=>{throw u.name==="FirebaseError"?(u.code===ee.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new he(ee.UNKNOWN,u.toString())}))}Ho(e,n,s,o,u){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([f,m])=>this.connection.Ho(e,up(n,s),o,f,m,u))).catch((f=>{throw f.name==="FirebaseError"?(f.code===ee.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),f):new he(ee.UNKNOWN,f.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class jD{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Ar(n),this.aa=!1):me("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const da="RemoteStore";class zD{constructor(e,n,s,o,u){this.localStore=e,this.datastore=n,this.asyncQueue=s,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=u,this.Aa.Oo((f=>{s.enqueueAndForget((async()=>{pa(this)&&(me(da,"Restarting streams for network reachability change."),await(async function(p){const g=xe(p);g.Ea.add(4),await Su(g),g.Ra.set("Unknown"),g.Ea.delete(4),await df(g)})(this))}))})),this.Ra=new jD(s,o)}}async function df(r){if(pa(r))for(const e of r.da)await e(!0)}async function Su(r){for(const e of r.da)await e(!1)}function $b(r,e){const n=xe(r);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),ig(n)?ng(n):Po(n).O_()&&tg(n,e))}function eg(r,e){const n=xe(r),s=Po(n);n.Ia.delete(e),s.O_()&&Xb(n,e),n.Ia.size===0&&(s.O_()?s.L_():pa(n)&&n.Ra.set("Unknown"))}function tg(r,e){if(r.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Re.min())>0){const n=r.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Po(r).Y_(e)}function Xb(r,e){r.Va.Ue(e),Po(r).Z_(e)}function ng(r){r.Va=new VI({getRemoteKeysForTarget:e=>r.remoteSyncer.getRemoteKeysForTarget(e),At:e=>r.Ia.get(e)||null,ht:()=>r.datastore.serializer.databaseId}),Po(r).start(),r.Ra.ua()}function ig(r){return pa(r)&&!Po(r).x_()&&r.Ia.size>0}function pa(r){return xe(r).Ea.size===0}function Wb(r){r.Va=void 0}async function BD(r){r.Ra.set("Online")}async function qD(r){r.Ia.forEach(((e,n)=>{tg(r,e)}))}async function HD(r,e){Wb(r),ig(r)?(r.Ra.ha(e),ng(r)):r.Ra.set("Unknown")}async function FD(r,e,n){if(r.Ra.set("Online"),e instanceof kb&&e.state===2&&e.cause)try{await(async function(o,u){const f=u.cause;for(const m of u.targetIds)o.Ia.has(m)&&(await o.remoteSyncer.rejectListen(m,f),o.Ia.delete(m),o.Va.removeTarget(m))})(r,e)}catch(s){me(da,"Failed to remove targets %s: %s ",e.targetIds.join(","),s),await Fh(r,s)}else if(e instanceof Ah?r.Va.Ze(e):e instanceof Vb?r.Va.st(e):r.Va.tt(e),!n.isEqual(Re.min()))try{const s=await Yb(r.localStore);n.compareTo(s)>=0&&await(function(u,f){const m=u.Va.Tt(f);return m.targetChanges.forEach(((p,g)=>{if(p.resumeToken.approximateByteSize()>0){const E=u.Ia.get(g);E&&u.Ia.set(g,E.withResumeToken(p.resumeToken,f))}})),m.targetMismatches.forEach(((p,g)=>{const E=u.Ia.get(p);if(!E)return;u.Ia.set(p,E.withResumeToken(sn.EMPTY_BYTE_STRING,E.snapshotVersion)),Xb(u,p);const T=new cs(E.target,p,g,E.sequenceNumber);tg(u,T)})),u.remoteSyncer.applyRemoteEvent(m)})(r,n)}catch(s){me(da,"Failed to raise snapshot:",s),await Fh(r,s)}}async function Fh(r,e,n){if(!ko(e))throw e;r.Ea.add(1),await Su(r),r.Ra.set("Offline"),n||(n=()=>Yb(r.localStore)),r.asyncQueue.enqueueRetryable((async()=>{me(da,"Retrying IndexedDB access"),await n(),r.Ea.delete(1),await df(r)}))}function Jb(r,e){return e().catch((n=>Fh(r,n,e)))}async function mf(r){const e=xe(r),n=bs(e);let s=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:zp;for(;GD(e);)try{const o=await RD(e.localStore,s);if(o===null){e.Ta.length===0&&n.L_();break}s=o.batchId,QD(e,o)}catch(o){await Fh(e,o)}Zb(e)&&eS(e)}function GD(r){return pa(r)&&r.Ta.length<10}function QD(r,e){r.Ta.push(e);const n=bs(r);n.O_()&&n.X_&&n.ea(e.mutations)}function Zb(r){return pa(r)&&!bs(r).x_()&&r.Ta.length>0}function eS(r){bs(r).start()}async function YD(r){bs(r).ra()}async function KD(r){const e=bs(r);for(const n of r.Ta)e.ea(n.mutations)}async function $D(r,e,n){const s=r.Ta.shift(),o=Qp.from(s,e,n);await Jb(r,(()=>r.remoteSyncer.applySuccessfulWrite(o))),await mf(r)}async function XD(r,e){e&&bs(r).X_&&await(async function(s,o){if((function(f){return Ob(f)&&f!==ee.ABORTED})(o.code)){const u=s.Ta.shift();bs(s).B_(),await Jb(s,(()=>s.remoteSyncer.rejectFailedWrite(u.batchId,o))),await mf(s)}})(r,e),Zb(r)&&eS(r)}async function vE(r,e){const n=xe(r);n.asyncQueue.verifyOperationInProgress(),me(da,"RemoteStore received new credentials");const s=pa(n);n.Ea.add(3),await Su(n),s&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await df(n)}async function WD(r,e){const n=xe(r);e?(n.Ea.delete(2),await df(n)):e||(n.Ea.add(2),await Su(n),n.Ra.set("Unknown"))}function Po(r){return r.ma||(r.ma=(function(n,s,o){const u=xe(n);return u.sa(),new kD(s,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)})(r.datastore,r.asyncQueue,{Xo:BD.bind(null,r),t_:qD.bind(null,r),r_:HD.bind(null,r),H_:FD.bind(null,r)}),r.da.push((async e=>{e?(r.ma.B_(),ig(r)?ng(r):r.Ra.set("Unknown")):(await r.ma.stop(),Wb(r))}))),r.ma}function bs(r){return r.fa||(r.fa=(function(n,s,o){const u=xe(n);return u.sa(),new PD(s,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)})(r.datastore,r.asyncQueue,{Xo:()=>Promise.resolve(),t_:YD.bind(null,r),r_:XD.bind(null,r),ta:KD.bind(null,r),na:$D.bind(null,r)}),r.da.push((async e=>{e?(r.fa.B_(),await mf(r)):(await r.fa.stop(),r.Ta.length>0&&(me(da,`Stopping write stream with ${r.Ta.length} pending writes`),r.Ta=[]))}))),r.fa}class rg{constructor(e,n,s,o,u){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=s,this.op=o,this.removalCallback=u,this.deferred=new Fi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((f=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,n,s,o,u){const f=Date.now()+s,m=new rg(e,n,f,o,u);return m.start(s),m}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new he(ee.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function sg(r,e){if(Ar("AsyncQueue",`${e}: ${r}`),ko(r))return new he(ee.UNAVAILABLE,`${e}: ${r}`);throw r}class go{static emptySet(e){return new go(e.comparator)}constructor(e){this.comparator=e?(n,s)=>e(n,s)||Te.comparator(n.key,s.key):(n,s)=>Te.comparator(n.key,s.key),this.keyedMap=Fl(),this.sortedSet=new pt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((n,s)=>(e(n),!1)))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof go)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;n.hasNext();){const o=n.getNext().key,u=s.getNext().key;if(!o.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach((n=>{e.push(n.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const s=new go;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=n,s}}class _E{constructor(){this.ga=new pt(Te.comparator)}track(e){const n=e.doc.key,s=this.ga.get(n);s?e.type!==0&&s.type===3?this.ga=this.ga.insert(n,e):e.type===3&&s.type!==1?this.ga=this.ga.insert(n,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.ga=this.ga.remove(n):e.type===1&&s.type===2?this.ga=this.ga.insert(n,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):Ae(63341,{Rt:e,pa:s}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal(((n,s)=>{e.push(s)})),e}}class Ao{constructor(e,n,s,o,u,f,m,p,g){this.query=e,this.docs=n,this.oldDocs=s,this.docChanges=o,this.mutatedKeys=u,this.fromCache=f,this.syncStateChanged=m,this.excludesMetadataChanges=p,this.hasCachedResults=g}static fromInitialDocuments(e,n,s,o,u){const f=[];return n.forEach((m=>{f.push({type:0,doc:m})})),new Ao(e,n,go.emptySet(n),f,s,o,!0,!1,u)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&af(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,s=e.docChanges;if(n.length!==s.length)return!1;for(let o=0;o<n.length;o++)if(n[o].type!==s[o].type||!n[o].doc.isEqual(s[o].doc))return!1;return!0}}class JD{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class ZD{constructor(){this.queries=EE(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,s){const o=xe(n),u=o.queries;o.queries=EE(),u.forEach(((f,m)=>{for(const p of m.Sa)p.onError(s)}))})(this,new he(ee.ABORTED,"Firestore shutting down"))}}function EE(){return new ma((r=>yb(r)),af)}async function ag(r,e){const n=xe(r);let s=3;const o=e.query;let u=n.queries.get(o);u?!u.ba()&&e.Da()&&(s=2):(u=new JD,s=e.Da()?0:1);try{switch(s){case 0:u.wa=await n.onListen(o,!0);break;case 1:u.wa=await n.onListen(o,!1);break;case 2:await n.onFirstRemoteStoreListen(o)}}catch(f){const m=sg(f,`Initialization of query '${oo(e.query)}' failed`);return void e.onError(m)}n.queries.set(o,u),u.Sa.push(e),e.va(n.onlineState),u.wa&&e.Fa(u.wa)&&lg(n)}async function og(r,e){const n=xe(r),s=e.query;let o=3;const u=n.queries.get(s);if(u){const f=u.Sa.indexOf(e);f>=0&&(u.Sa.splice(f,1),u.Sa.length===0?o=e.Da()?0:1:!u.ba()&&e.Da()&&(o=2))}switch(o){case 0:return n.queries.delete(s),n.onUnlisten(s,!0);case 1:return n.queries.delete(s),n.onUnlisten(s,!1);case 2:return n.onLastRemoteStoreUnlisten(s);default:return}}function eN(r,e){const n=xe(r);let s=!1;for(const o of e){const u=o.query,f=n.queries.get(u);if(f){for(const m of f.Sa)m.Fa(o)&&(s=!0);f.wa=o}}s&&lg(n)}function tN(r,e,n){const s=xe(r),o=s.queries.get(e);if(o)for(const u of o.Sa)u.onError(n);s.queries.delete(e)}function lg(r){r.Ca.forEach((e=>{e.next()}))}var dp,TE;(TE=dp||(dp={})).Ma="default",TE.Cache="cache";class ug{constructor(e,n,s){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=s||{}}Fa(e){if(!this.options.includeMetadataChanges){const s=[];for(const o of e.docChanges)o.type!==3&&s.push(o);e=new Ao(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const s=n!=="Offline";return(!this.options.qa||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=Ao.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==dp.Cache}}class tS{constructor(e){this.key=e}}class nS{constructor(e){this.key=e}}class nN{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Be(),this.mutatedKeys=Be(),this.eu=vb(e),this.tu=new go(this.eu)}get nu(){return this.Ya}ru(e,n){const s=n?n.iu:new _E,o=n?n.tu:this.tu;let u=n?n.mutatedKeys:this.mutatedKeys,f=o,m=!1;const p=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,g=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal(((E,T)=>{const R=o.get(E),L=of(this.query,T)?T:null,H=!!R&&this.mutatedKeys.has(R.key),G=!!L&&(L.hasLocalMutations||this.mutatedKeys.has(L.key)&&L.hasCommittedMutations);let z=!1;R&&L?R.data.isEqual(L.data)?H!==G&&(s.track({type:3,doc:L}),z=!0):this.su(R,L)||(s.track({type:2,doc:L}),z=!0,(p&&this.eu(L,p)>0||g&&this.eu(L,g)<0)&&(m=!0)):!R&&L?(s.track({type:0,doc:L}),z=!0):R&&!L&&(s.track({type:1,doc:R}),z=!0,(p||g)&&(m=!0)),z&&(L?(f=f.add(L),u=G?u.add(E):u.delete(E)):(f=f.delete(E),u=u.delete(E)))})),this.query.limit!==null)for(;f.size>this.query.limit;){const E=this.query.limitType==="F"?f.last():f.first();f=f.delete(E.key),u=u.delete(E.key),s.track({type:1,doc:E})}return{tu:f,iu:s,Cs:m,mutatedKeys:u}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,s,o){const u=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const f=e.iu.ya();f.sort(((E,T)=>(function(L,H){const G=z=>{switch(z){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ae(20277,{Rt:z})}};return G(L)-G(H)})(E.type,T.type)||this.eu(E.doc,T.doc))),this.ou(s),o=o??!1;const m=n&&!o?this._u():[],p=this.Xa.size===0&&this.current&&!o?1:0,g=p!==this.Za;return this.Za=p,f.length!==0||g?{snapshot:new Ao(this.query,e.tu,u,f,e.mutatedKeys,p===0,g,!1,!!s&&s.resumeToken.approximateByteSize()>0),au:m}:{au:m}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new _E,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((n=>this.Ya=this.Ya.add(n))),e.modifiedDocuments.forEach((n=>{})),e.removedDocuments.forEach((n=>this.Ya=this.Ya.delete(n))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Be(),this.tu.forEach((s=>{this.uu(s.key)&&(this.Xa=this.Xa.add(s.key))}));const n=[];return e.forEach((s=>{this.Xa.has(s)||n.push(new nS(s))})),this.Xa.forEach((s=>{e.has(s)||n.push(new tS(s))})),n}cu(e){this.Ya=e.Qs,this.Xa=Be();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return Ao.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const cg="SyncEngine";class iN{constructor(e,n,s){this.query=e,this.targetId=n,this.view=s}}class rN{constructor(e){this.key=e,this.hu=!1}}class sN{constructor(e,n,s,o,u,f){this.localStore=e,this.remoteStore=n,this.eventManager=s,this.sharedClientState=o,this.currentUser=u,this.maxConcurrentLimboResolutions=f,this.Pu={},this.Tu=new ma((m=>yb(m)),af),this.Iu=new Map,this.Eu=new Set,this.du=new pt(Te.comparator),this.Au=new Map,this.Ru=new $p,this.Vu={},this.mu=new Map,this.fu=So.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function aN(r,e,n=!0){const s=lS(r);let o;const u=s.Tu.get(e);return u?(s.sharedClientState.addLocalQueryTarget(u.targetId),o=u.view.lu()):o=await iS(s,e,n,!0),o}async function oN(r,e){const n=lS(r);await iS(n,e,!0,!1)}async function iS(r,e,n,s){const o=await CD(r.localStore,Gi(e)),u=o.targetId,f=r.sharedClientState.addLocalQueryTarget(u,n);let m;return s&&(m=await lN(r,e,u,f==="current",o.resumeToken)),r.isPrimaryClient&&n&&$b(r.remoteStore,o),m}async function lN(r,e,n,s,o){r.pu=(T,R,L)=>(async function(G,z,W,K){let Z=z.view.ru(W);Z.Cs&&(Z=await dE(G.localStore,z.query,!1).then((({documents:D})=>z.view.ru(D,Z))));const se=K&&K.targetChanges.get(z.targetId),le=K&&K.targetMismatches.get(z.targetId)!=null,pe=z.view.applyChanges(Z,G.isPrimaryClient,se,le);return SE(G,z.targetId,pe.au),pe.snapshot})(r,T,R,L);const u=await dE(r.localStore,e,!0),f=new nN(e,u.Qs),m=f.ru(u.documents),p=bu.createSynthesizedTargetChangeForCurrentChange(n,s&&r.onlineState!=="Offline",o),g=f.applyChanges(m,r.isPrimaryClient,p);SE(r,n,g.au);const E=new iN(e,n,f);return r.Tu.set(e,E),r.Iu.has(n)?r.Iu.get(n).push(e):r.Iu.set(n,[e]),g.snapshot}async function uN(r,e,n){const s=xe(r),o=s.Tu.get(e),u=s.Iu.get(o.targetId);if(u.length>1)return s.Iu.set(o.targetId,u.filter((f=>!af(f,e)))),void s.Tu.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(o.targetId),s.sharedClientState.isActiveQueryTarget(o.targetId)||await hp(s.localStore,o.targetId,!1).then((()=>{s.sharedClientState.clearQueryState(o.targetId),n&&eg(s.remoteStore,o.targetId),mp(s,o.targetId)})).catch(Vo)):(mp(s,o.targetId),await hp(s.localStore,o.targetId,!0))}async function cN(r,e){const n=xe(r),s=n.Tu.get(e),o=n.Iu.get(s.targetId);n.isPrimaryClient&&o.length===1&&(n.sharedClientState.removeLocalQueryTarget(s.targetId),eg(n.remoteStore,s.targetId))}async function hN(r,e,n){const s=vN(r);try{const o=await(function(f,m){const p=xe(f),g=ct.now(),E=m.reduce(((L,H)=>L.add(H.key)),Be());let T,R;return p.persistence.runTransaction("Locally write mutations","readwrite",(L=>{let H=wr(),G=Be();return p.Ns.getEntries(L,E).next((z=>{H=z,H.forEach(((W,K)=>{K.isValidDocument()||(G=G.add(W))}))})).next((()=>p.localDocuments.getOverlayedDocuments(L,H))).next((z=>{T=z;const W=[];for(const K of m){const Z=xI(K,T.get(K.key).overlayedDocument);Z!=null&&W.push(new Rs(K.key,Z,ub(Z.value.mapValue),rn.exists(!0)))}return p.mutationQueue.addMutationBatch(L,g,W,m)})).next((z=>{R=z;const W=z.applyToLocalDocumentSet(T,G);return p.documentOverlayCache.saveOverlays(L,z.batchId,W)}))})).then((()=>({batchId:R.batchId,changes:Eb(T)})))})(s.localStore,e);s.sharedClientState.addPendingMutation(o.batchId),(function(f,m,p){let g=f.Vu[f.currentUser.toKey()];g||(g=new pt(ze)),g=g.insert(m,p),f.Vu[f.currentUser.toKey()]=g})(s,o.batchId,n),await Au(s,o.changes),await mf(s.remoteStore)}catch(o){const u=sg(o,"Failed to persist write");n.reject(u)}}async function rS(r,e){const n=xe(r);try{const s=await AD(n.localStore,e);e.targetChanges.forEach(((o,u)=>{const f=n.Au.get(u);f&&(Ge(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?f.hu=!0:o.modifiedDocuments.size>0?Ge(f.hu,14607):o.removedDocuments.size>0&&(Ge(f.hu,42227),f.hu=!1))})),await Au(n,s,e)}catch(s){await Vo(s)}}function bE(r,e,n){const s=xe(r);if(s.isPrimaryClient&&n===0||!s.isPrimaryClient&&n===1){const o=[];s.Tu.forEach(((u,f)=>{const m=f.view.va(e);m.snapshot&&o.push(m.snapshot)})),(function(f,m){const p=xe(f);p.onlineState=m;let g=!1;p.queries.forEach(((E,T)=>{for(const R of T.Sa)R.va(m)&&(g=!0)})),g&&lg(p)})(s.eventManager,e),o.length&&s.Pu.H_(o),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function fN(r,e,n){const s=xe(r);s.sharedClientState.updateQueryState(e,"rejected",n);const o=s.Au.get(e),u=o&&o.key;if(u){let f=new pt(Te.comparator);f=f.insert(u,Kt.newNoDocument(u,Re.min()));const m=Be().add(u),p=new hf(Re.min(),new Map,new pt(ze),f,m);await rS(s,p),s.du=s.du.remove(u),s.Au.delete(e),hg(s)}else await hp(s.localStore,e,!1).then((()=>mp(s,e,n))).catch(Vo)}async function dN(r,e){const n=xe(r),s=e.batch.batchId;try{const o=await SD(n.localStore,e);aS(n,s,null),sS(n,s),n.sharedClientState.updateMutationState(s,"acknowledged"),await Au(n,o)}catch(o){await Vo(o)}}async function mN(r,e,n){const s=xe(r);try{const o=await(function(f,m){const p=xe(f);return p.persistence.runTransaction("Reject batch","readwrite-primary",(g=>{let E;return p.mutationQueue.lookupMutationBatch(g,m).next((T=>(Ge(T!==null,37113),E=T.keys(),p.mutationQueue.removeMutationBatch(g,T)))).next((()=>p.mutationQueue.performConsistencyCheck(g))).next((()=>p.documentOverlayCache.removeOverlaysForBatchId(g,E,m))).next((()=>p.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(g,E))).next((()=>p.localDocuments.getDocuments(g,E)))}))})(s.localStore,e);aS(s,e,n),sS(s,e),s.sharedClientState.updateMutationState(e,"rejected",n),await Au(s,o)}catch(o){await Vo(o)}}function sS(r,e){(r.mu.get(e)||[]).forEach((n=>{n.resolve()})),r.mu.delete(e)}function aS(r,e,n){const s=xe(r);let o=s.Vu[s.currentUser.toKey()];if(o){const u=o.get(e);u&&(n?u.reject(n):u.resolve(),o=o.remove(e)),s.Vu[s.currentUser.toKey()]=o}}function mp(r,e,n=null){r.sharedClientState.removeLocalQueryTarget(e);for(const s of r.Iu.get(e))r.Tu.delete(s),n&&r.Pu.yu(s,n);r.Iu.delete(e),r.isPrimaryClient&&r.Ru.jr(e).forEach((s=>{r.Ru.containsKey(s)||oS(r,s)}))}function oS(r,e){r.Eu.delete(e.path.canonicalString());const n=r.du.get(e);n!==null&&(eg(r.remoteStore,n),r.du=r.du.remove(e),r.Au.delete(n),hg(r))}function SE(r,e,n){for(const s of n)s instanceof tS?(r.Ru.addReference(s.key,e),pN(r,s)):s instanceof nS?(me(cg,"Document no longer in limbo: "+s.key),r.Ru.removeReference(s.key,e),r.Ru.containsKey(s.key)||oS(r,s.key)):Ae(19791,{wu:s})}function pN(r,e){const n=e.key,s=n.path.canonicalString();r.du.get(n)||r.Eu.has(s)||(me(cg,"New document in limbo: "+n),r.Eu.add(s),hg(r))}function hg(r){for(;r.Eu.size>0&&r.du.size<r.maxConcurrentLimboResolutions;){const e=r.Eu.values().next().value;r.Eu.delete(e);const n=new Te(st.fromString(e)),s=r.fu.next();r.Au.set(s,new rN(n)),r.du=r.du.insert(n,s),$b(r.remoteStore,new cs(Gi(sf(n.path)),s,"TargetPurposeLimboResolution",nf.ce))}}async function Au(r,e,n){const s=xe(r),o=[],u=[],f=[];s.Tu.isEmpty()||(s.Tu.forEach(((m,p)=>{f.push(s.pu(p,e,n).then((g=>{if((g||n)&&s.isPrimaryClient){const E=g?!g.fromCache:n?.targetChanges.get(p.targetId)?.current;s.sharedClientState.updateQueryState(p.targetId,E?"current":"not-current")}if(g){o.push(g);const E=Wp.As(p.targetId,g);u.push(E)}})))})),await Promise.all(f),s.Pu.H_(o),await(async function(p,g){const E=xe(p);try{await E.persistence.runTransaction("notifyLocalViewChanges","readwrite",(T=>re.forEach(g,(R=>re.forEach(R.Es,(L=>E.persistence.referenceDelegate.addReference(T,R.targetId,L))).next((()=>re.forEach(R.ds,(L=>E.persistence.referenceDelegate.removeReference(T,R.targetId,L)))))))))}catch(T){if(!ko(T))throw T;me(Jp,"Failed to update sequence numbers: "+T)}for(const T of g){const R=T.targetId;if(!T.fromCache){const L=E.Ms.get(R),H=L.snapshotVersion,G=L.withLastLimboFreeSnapshotVersion(H);E.Ms=E.Ms.insert(R,G)}}})(s.localStore,u))}async function gN(r,e){const n=xe(r);if(!n.currentUser.isEqual(e)){me(cg,"User change. New user:",e.toKey());const s=await Qb(n.localStore,e);n.currentUser=e,(function(u,f){u.mu.forEach((m=>{m.forEach((p=>{p.reject(new he(ee.CANCELLED,f))}))})),u.mu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await Au(n,s.Ls)}}function yN(r,e){const n=xe(r),s=n.Au.get(e);if(s&&s.hu)return Be().add(s.key);{let o=Be();const u=n.Iu.get(e);if(!u)return o;for(const f of u){const m=n.Tu.get(f);o=o.unionWith(m.view.nu)}return o}}function lS(r){const e=xe(r);return e.remoteStore.remoteSyncer.applyRemoteEvent=rS.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=yN.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=fN.bind(null,e),e.Pu.H_=eN.bind(null,e.eventManager),e.Pu.yu=tN.bind(null,e.eventManager),e}function vN(r){const e=xe(r);return e.remoteStore.remoteSyncer.applySuccessfulWrite=dN.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=mN.bind(null,e),e}class Gh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=ff(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return bD(this.persistence,new _D,e.initialUser,this.serializer)}Cu(e){return new Gb(Xp.mi,this.serializer)}Du(e){return new ID}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Gh.provider={build:()=>new Gh};class _N extends Gh{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){Ge(this.persistence.referenceDelegate instanceof Hh,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new rD(s,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?Rn.withCacheSize(this.cacheSizeBytes):Rn.DEFAULT;return new Gb((s=>Hh.mi(s,n)),this.serializer)}}class pp{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>bE(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=gN.bind(null,this.syncEngine),await WD(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new ZD})()}createDatastore(e){const n=ff(e.databaseInfo.databaseId),s=(function(u){return new VD(u)})(e.databaseInfo);return(function(u,f,m,p){return new UD(u,f,m,p)})(e.authCredentials,e.appCheckCredentials,s,n)}createRemoteStore(e){return(function(s,o,u,f,m){return new zD(s,o,u,f,m)})(this.localStore,this.datastore,e.asyncQueue,(n=>bE(this.syncEngine,n,0)),(function(){return gE.v()?new gE:new DD})())}createSyncEngine(e,n){return(function(o,u,f,m,p,g,E){const T=new sN(o,u,f,m,p,g);return E&&(T.gu=!0),T})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){await(async function(n){const s=xe(n);me(da,"RemoteStore shutting down."),s.Ea.add(5),await Su(s),s.Aa.shutdown(),s.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}pp.provider={build:()=>new pp};class fg{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Ar("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout((()=>{this.muted||e(n)}),0)}}class EN{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new he(ee.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const n=await(async function(o,u){const f=xe(o),m={documents:u.map((T=>qh(f.serializer,T)))},p=await f.Ho("BatchGetDocuments",f.serializer.databaseId,st.emptyPath(),m,u.length),g=new Map;p.forEach((T=>{const R=BI(f.serializer,T);g.set(R.key.toString(),R)}));const E=[];return u.forEach((T=>{const R=g.get(T.toString());Ge(!!R,55234,{key:T}),E.push(R)})),E})(this.datastore,e);return n.forEach((s=>this.recordVersion(s))),n}set(e,n){this.write(n.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,n){try{this.write(n.toMutation(e,this.preconditionForUpdate(e)))}catch(s){this.lastTransactionError=s}this.writtenDocs.add(e.toString())}delete(e){this.write(new cf(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach((n=>{e.delete(n.key.toString())})),e.forEach(((n,s)=>{const o=Te.fromPath(s);this.mutations.push(new Nb(o,this.precondition(o)))})),await(async function(s,o){const u=xe(s),f={writes:o.map((m=>zb(u.serializer,m)))};await u.Go("Commit",u.serializer.databaseId,st.emptyPath(),f)})(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let n;if(e.isFoundDocument())n=e.version;else{if(!e.isNoDocument())throw Ae(50498,{Gu:e.constructor.name});n=Re.min()}const s=this.readVersions.get(e.key.toString());if(s){if(!n.isEqual(s))throw new he(ee.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),n)}precondition(e){const n=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&n?n.isEqual(Re.min())?rn.exists(!1):rn.updateTime(n):rn.none()}preconditionForUpdate(e){const n=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&n){if(n.isEqual(Re.min()))throw new he(ee.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return rn.updateTime(n)}return rn.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class TN{constructor(e,n,s,o,u){this.asyncQueue=e,this.datastore=n,this.options=s,this.updateFunction=o,this.deferred=u,this.zu=s.maxAttempts,this.M_=new Zp(this.asyncQueue,"transaction_retry")}ju(){this.zu-=1,this.Ju()}Ju(){this.M_.p_((async()=>{const e=new EN(this.datastore),n=this.Hu(e);n&&n.then((s=>{this.asyncQueue.enqueueAndForget((()=>e.commit().then((()=>{this.deferred.resolve(s)})).catch((o=>{this.Yu(o)}))))})).catch((s=>{this.Yu(s)}))}))}Hu(e){try{const n=this.updateFunction(e);return!_u(n)&&n.catch&&n.then?n:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(n){return this.deferred.reject(n),null}}Yu(e){this.zu>0&&this.Zu(e)?(this.zu-=1,this.asyncQueue.enqueueAndForget((()=>(this.Ju(),Promise.resolve())))):this.deferred.reject(e)}Zu(e){if(e?.name==="FirebaseError"){const n=e.code;return n==="aborted"||n==="failed-precondition"||n==="already-exists"||!Ob(n)}return!1}}const Ss="FirestoreClient";class bN{constructor(e,n,s,o,u){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=s,this.databaseInfo=o,this.user=un.UNAUTHENTICATED,this.clientId=jp.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=u,this.authCredentials.start(s,(async f=>{me(Ss,"Received user=",f.uid),await this.authCredentialListener(f),this.user=f})),this.appCheckCredentials.start(s,(f=>(me(Ss,"Received new app check token=",f),this.appCheckCredentialListener(f,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Fi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const s=sg(n,"Failed to shutdown persistence");e.reject(s)}})),e.promise}}async function jm(r,e){r.asyncQueue.verifyOperationInProgress(),me(Ss,"Initializing OfflineComponentProvider");const n=r.configuration;await e.initialize(n);let s=n.initialUser;r.setCredentialChangeListener((async o=>{s.isEqual(o)||(await Qb(e.localStore,o),s=o)})),e.persistence.setDatabaseDeletedListener((()=>r.terminate())),r._offlineComponents=e}async function AE(r,e){r.asyncQueue.verifyOperationInProgress();const n=await SN(r);me(Ss,"Initializing OnlineComponentProvider"),await e.initialize(n,r.configuration),r.setCredentialChangeListener((s=>vE(e.remoteStore,s))),r.setAppCheckTokenChangeListener(((s,o)=>vE(e.remoteStore,o))),r._onlineComponents=e}async function SN(r){if(!r._offlineComponents)if(r._uninitializedComponentsProvider){me(Ss,"Using user provided OfflineComponentProvider");try{await jm(r,r._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!(function(o){return o.name==="FirebaseError"?o.code===ee.FAILED_PRECONDITION||o.code===ee.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11})(n))throw n;_o("Error using user provided cache. Falling back to memory cache: "+n),await jm(r,new Gh)}}else me(Ss,"Using default OfflineComponentProvider"),await jm(r,new _N(void 0));return r._offlineComponents}async function dg(r){return r._onlineComponents||(r._uninitializedComponentsProvider?(me(Ss,"Using user provided OnlineComponentProvider"),await AE(r,r._uninitializedComponentsProvider._online)):(me(Ss,"Using default OnlineComponentProvider"),await AE(r,new pp))),r._onlineComponents}function AN(r){return dg(r).then((e=>e.syncEngine))}function wN(r){return dg(r).then((e=>e.datastore))}async function Qh(r){const e=await dg(r),n=e.eventManager;return n.onListen=aN.bind(null,e.syncEngine),n.onUnlisten=uN.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=oN.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=cN.bind(null,e.syncEngine),n}function RN(r,e,n={}){const s=new Fi;return r.asyncQueue.enqueueAndForget((async()=>(function(u,f,m,p,g){const E=new fg({next:R=>{E.Nu(),f.enqueueAndForget((()=>og(u,T)));const L=R.docs.has(m);!L&&R.fromCache?g.reject(new he(ee.UNAVAILABLE,"Failed to get document because the client is offline.")):L&&R.fromCache&&p&&p.source==="server"?g.reject(new he(ee.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):g.resolve(R)},error:R=>g.reject(R)}),T=new ug(sf(m.path),E,{includeMetadataChanges:!0,qa:!0});return ag(u,T)})(await Qh(r),r.asyncQueue,e,n,s))),s.promise}function CN(r,e,n={}){const s=new Fi;return r.asyncQueue.enqueueAndForget((async()=>(function(u,f,m,p,g){const E=new fg({next:R=>{E.Nu(),f.enqueueAndForget((()=>og(u,T))),R.fromCache&&p.source==="server"?g.reject(new he(ee.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):g.resolve(R)},error:R=>g.reject(R)}),T=new ug(m,E,{includeMetadataChanges:!0,qa:!0});return ag(u,T)})(await Qh(r),r.asyncQueue,e,n,s))),s.promise}function uS(r){const e={};return r.timeoutSeconds!==void 0&&(e.timeoutSeconds=r.timeoutSeconds),e}const wE=new Map;const cS="firestore.googleapis.com",RE=!0;class CE{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new he(ee.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=cS,this.ssl=RE}else this.host=e.host,this.ssl=e.ssl??RE;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=Fb;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<nD)throw new he(ee.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}H2("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=uS(e.experimentalLongPollingOptions??{}),(function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new he(ee.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new he(ee.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new he(ee.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(s,o){return s.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class pf{constructor(e,n,s,o){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=s,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new CE({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new he(ee.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new he(ee.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new CE(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(s){if(!s)return new M2;switch(s.type){case"firstParty":return new L2(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new he(ee.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const s=wE.get(n);s&&(me("ComponentProvider","Removing Datastore"),wE.delete(n),s.terminate())})(this),Promise.resolve()}}function xN(r,e,n,s={}){r=yn(r,pf);const o=Do(e),u=r._getSettings(),f={...u,emulatorOptions:r._getEmulatorOptions()},m=`${e}:${n}`;o&&(aT(`https://${m}`),oT("Firestore",!0)),u.host!==cS&&u.host!==m&&_o("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const p={...u,host:m,ssl:o,emulatorOptions:s};if(!ua(p,f)&&(r._setSettings(p),s.mockUserToken)){let g,E;if(typeof s.mockUserToken=="string")g=s.mockUserToken,E=un.MOCK_USER;else{g=iR(s.mockUserToken,r._app?.options.projectId);const T=s.mockUserToken.sub||s.mockUserToken.user_id;if(!T)throw new he(ee.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");E=new un(T)}r._authCredentials=new V2(new WT(g,E))}}class ga{constructor(e,n,s){this.converter=n,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new ga(this.firestore,e,this._query)}}class mt{constructor(e,n,s){this.converter=n,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ps(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new mt(this.firestore,e,this._key)}toJSON(){return{type:mt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,s){if(vu(n,mt._jsonSchema))return new mt(e,s||null,new Te(st.fromString(n.referencePath)))}}mt._jsonSchemaVersion="firestore/documentReference/1.0",mt._jsonSchema={type:Ut("string",mt._jsonSchemaVersion),referencePath:Ut("string")};class ps extends ga{constructor(e,n,s){super(e,n,sf(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new mt(this.firestore,null,new Te(e))}withConverter(e){return new ps(this.firestore,e,this._path)}}function Pt(r,e,...n){if(r=jt(r),JT("collection","path",e),r instanceof pf){const s=st.fromString(e,...n);return z0(s),new ps(r,null,s)}{if(!(r instanceof mt||r instanceof ps))throw new he(ee.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=r._path.child(st.fromString(e,...n));return z0(s),new ps(r.firestore,null,s)}}function gn(r,e,...n){if(r=jt(r),arguments.length===1&&(e=jp.newId()),JT("doc","path",e),r instanceof pf){const s=st.fromString(e,...n);return j0(s),new mt(r,null,new Te(s))}{if(!(r instanceof mt||r instanceof ps))throw new he(ee.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=r._path.child(st.fromString(e,...n));return j0(s),new mt(r.firestore,r instanceof ps?r.converter:null,new Te(s))}}const xE="AsyncQueue";class IE{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new Zp(this,"async_queue_retry"),this._c=()=>{const s=Um();s&&me(xE,"Visibility state changed to "+s.visibilityState),this.M_.w_()},this.ac=e;const n=Um();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=Um();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const n=new Fi;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!ko(e))throw e;me(xE,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const n=this.ac.then((()=>(this.rc=!0,e().catch((s=>{throw this.nc=s,this.rc=!1,Ar("INTERNAL UNHANDLED ERROR: ",DE(s)),s})).then((s=>(this.rc=!1,s))))));return this.ac=n,n}enqueueAfterDelay(e,n,s){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const o=rg.createAndSchedule(this,e,n,s,(u=>this.hc(u)));return this.tc.push(o),o}uc(){this.nc&&Ae(47125,{Pc:DE(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((n,s)=>n.targetTimeMs-s.targetTimeMs));for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function DE(r){let e=r.message||"";return r.stack&&(e=r.stack.includes(r.message)?r.stack:r.message+`
`+r.stack),e}function NE(r){return(function(n,s){if(typeof n!="object"||n===null)return!1;const o=n;for(const u of s)if(u in o&&typeof o[u]=="function")return!0;return!1})(r,["next","error","complete"])}class Xi extends pf{constructor(e,n,s,o){super(e,n,s,o),this.type="firestore",this._queue=new IE,this._persistenceKey=o?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new IE(e),this._firestoreClient=void 0,await e}}}function IN(r,e){const n=typeof r=="object"?r:hT(),s=typeof r=="string"?r:Lh,o=Cp(n,"firestore").getImmediate({identifier:s});if(!o._initialized){const u=tR("firestore");u&&xN(o,...u)}return o}function wu(r){if(r._terminated)throw new he(ee.FAILED_PRECONDITION,"The client has already been terminated.");return r._firestoreClient||DN(r),r._firestoreClient}function DN(r){const e=r._freezeSettings(),n=(function(o,u,f,m){return new eI(o,u,f,m.host,m.ssl,m.experimentalForceLongPolling,m.experimentalAutoDetectLongPolling,uS(m.experimentalLongPollingOptions),m.useFetchStreams,m.isUsingEmulator)})(r._databaseId,r._app?.options.appId||"",r._persistenceKey,e);r._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(r._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),r._firestoreClient=new bN(r._authCredentials,r._appCheckCredentials,r._queue,n,r._componentsProvider&&(function(o){const u=o?._online.build();return{_offline:o?._offline.build(u),_online:u}})(r._componentsProvider))}class Un{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Un(sn.fromBase64String(e))}catch(n){throw new he(ee.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Un(sn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Un._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(vu(e,Un._jsonSchema))return Un.fromBase64String(e.bytes)}}Un._jsonSchemaVersion="firestore/bytes/1.0",Un._jsonSchema={type:Ut("string",Un._jsonSchemaVersion),bytes:Ut("string")};class Ru{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new he(ee.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new nn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Cu{constructor(e){this._methodName=e}}class Qi{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new he(ee.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new he(ee.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return ze(this._lat,e._lat)||ze(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Qi._jsonSchemaVersion}}static fromJSON(e){if(vu(e,Qi._jsonSchema))return new Qi(e.latitude,e.longitude)}}Qi._jsonSchemaVersion="firestore/geoPoint/1.0",Qi._jsonSchema={type:Ut("string",Qi._jsonSchemaVersion),latitude:Ut("number"),longitude:Ut("number")};class Yi{constructor(e){this._values=(e||[]).map((n=>n))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(s,o){if(s.length!==o.length)return!1;for(let u=0;u<s.length;++u)if(s[u]!==o[u])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Yi._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(vu(e,Yi._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((n=>typeof n=="number")))return new Yi(e.vectorValues);throw new he(ee.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Yi._jsonSchemaVersion="firestore/vectorValue/1.0",Yi._jsonSchema={type:Ut("string",Yi._jsonSchemaVersion),vectorValues:Ut("object")};const NN=/^__.*__$/;class ON{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return this.fieldMask!==null?new Rs(e,this.data,this.fieldMask,n,this.fieldTransforms):new Tu(e,this.data,n,this.fieldTransforms)}}class hS{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return new Rs(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function fS(r){switch(r){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ae(40011,{Ac:r})}}class mg{constructor(e,n,s,o,u,f){this.settings=e,this.databaseId=n,this.serializer=s,this.ignoreUndefinedProperties=o,u===void 0&&this.Rc(),this.fieldTransforms=u||[],this.fieldMask=f||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new mg({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const n=this.path?.child(e),s=this.Vc({path:n,fc:!1});return s.gc(e),s}yc(e){const n=this.path?.child(e),s=this.Vc({path:n,fc:!1});return s.Rc(),s}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Yh(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((n=>e.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>e.isPrefixOf(n.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(fS(this.Ac)&&NN.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class MN{constructor(e,n,s){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=s||ff(e)}Cc(e,n,s,o=!1){return new mg({Ac:e,methodName:n,Dc:s,path:nn.emptyPath(),fc:!1,bc:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function xu(r){const e=r._freezeSettings(),n=ff(r._databaseId);return new MN(r._databaseId,!!e.ignoreUndefinedProperties,n)}function pg(r,e,n,s,o,u={}){const f=r.Cc(u.merge||u.mergeFields?2:0,e,n,o);vg("Data must be an object, but it was:",f,s);const m=pS(s,f);let p,g;if(u.merge)p=new jn(f.fieldMask),g=f.fieldTransforms;else if(u.mergeFields){const E=[];for(const T of u.mergeFields){const R=gp(e,T,n);if(!f.contains(R))throw new he(ee.INVALID_ARGUMENT,`Field '${R}' is specified in your field mask but missing from your input data.`);yS(E,R)||E.push(R)}p=new jn(E),g=f.fieldTransforms.filter((T=>p.covers(T.field)))}else p=null,g=f.fieldTransforms;return new ON(new pn(m),p,g)}class gf extends Cu{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof gf}}class gg extends Cu{_toFieldTransform(e){return new xb(e.path,new ou)}isEqual(e){return e instanceof gg}}class yg extends Cu{constructor(e,n){super(e),this.Fc=n}_toFieldTransform(e){const n=new cu(e.serializer,Sb(e.serializer,this.Fc));return new xb(e.path,n)}isEqual(e){return e instanceof yg&&this.Fc===e.Fc}}function dS(r,e,n,s){const o=r.Cc(1,e,n);vg("Data must be an object, but it was:",o,s);const u=[],f=pn.empty();ws(s,((p,g)=>{const E=_g(e,p,n);g=jt(g);const T=o.yc(E);if(g instanceof gf)u.push(E);else{const R=Iu(g,T);R!=null&&(u.push(E),f.set(E,R))}}));const m=new jn(u);return new hS(f,m,o.fieldTransforms)}function mS(r,e,n,s,o,u){const f=r.Cc(1,e,n),m=[gp(e,s,n)],p=[o];if(u.length%2!=0)throw new he(ee.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let R=0;R<u.length;R+=2)m.push(gp(e,u[R])),p.push(u[R+1]);const g=[],E=pn.empty();for(let R=m.length-1;R>=0;--R)if(!yS(g,m[R])){const L=m[R];let H=p[R];H=jt(H);const G=f.yc(L);if(H instanceof gf)g.push(L);else{const z=Iu(H,G);z!=null&&(g.push(L),E.set(L,z))}}const T=new jn(g);return new hS(E,T,f.fieldTransforms)}function VN(r,e,n,s=!1){return Iu(n,r.Cc(s?4:3,e))}function Iu(r,e){if(gS(r=jt(r)))return vg("Unsupported field value:",e,r),pS(r,e);if(r instanceof Cu)return(function(s,o){if(!fS(o.Ac))throw o.Sc(`${s._methodName}() can only be used with update() and set()`);if(!o.path)throw o.Sc(`${s._methodName}() is not currently supported inside arrays`);const u=s._toFieldTransform(o);u&&o.fieldTransforms.push(u)})(r,e),null;if(r===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),r instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(s,o){const u=[];let f=0;for(const m of s){let p=Iu(m,o.wc(f));p==null&&(p={nullValue:"NULL_VALUE"}),u.push(p),f++}return{arrayValue:{values:u}}})(r,e)}return(function(s,o){if((s=jt(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return Sb(o.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const u=ct.fromDate(s);return{timestampValue:Bh(o.serializer,u)}}if(s instanceof ct){const u=new ct(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:Bh(o.serializer,u)}}if(s instanceof Qi)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof Un)return{bytesValue:Pb(o.serializer,s._byteString)};if(s instanceof mt){const u=o.databaseId,f=s.firestore._databaseId;if(!f.isEqual(u))throw o.Sc(`Document reference is for database ${f.projectId}/${f.database} but should be for database ${u.projectId}/${u.database}`);return{referenceValue:Kp(s.firestore._databaseId||o.databaseId,s._key.path)}}if(s instanceof Yi)return(function(f,m){return{mapValue:{fields:{[ob]:{stringValue:lb},[Uh]:{arrayValue:{values:f.toArray().map((g=>{if(typeof g!="number")throw m.Sc("VectorValues must only contain numeric values.");return Gp(m.serializer,g)}))}}}}}})(s,o);throw o.Sc(`Unsupported field value: ${tf(s)}`)})(r,e)}function pS(r,e){const n={};return tb(r)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ws(r,((s,o)=>{const u=Iu(o,e.mc(s));u!=null&&(n[s]=u)})),{mapValue:{fields:n}}}function gS(r){return!(typeof r!="object"||r===null||r instanceof Array||r instanceof Date||r instanceof ct||r instanceof Qi||r instanceof Un||r instanceof mt||r instanceof Cu||r instanceof Yi)}function vg(r,e,n){if(!gS(n)||!ZT(n)){const s=tf(n);throw s==="an object"?e.Sc(r+" a custom object"):e.Sc(r+" "+s)}}function gp(r,e,n){if((e=jt(e))instanceof Ru)return e._internalPath;if(typeof e=="string")return _g(r,e);throw Yh("Field path arguments must be of type string or ",r,!1,void 0,n)}const kN=new RegExp("[~\\*/\\[\\]]");function _g(r,e,n){if(e.search(kN)>=0)throw Yh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,r,!1,void 0,n);try{return new Ru(...e.split("."))._internalPath}catch{throw Yh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,r,!1,void 0,n)}}function Yh(r,e,n,s,o){const u=s&&!s.isEmpty(),f=o!==void 0;let m=`Function ${e}() called with invalid data`;n&&(m+=" (via `toFirestore()`)"),m+=". ";let p="";return(u||f)&&(p+=" (found",u&&(p+=` in field ${s}`),f&&(p+=` in document ${o}`),p+=")"),new he(ee.INVALID_ARGUMENT,m+r+p)}function yS(r,e){return r.some((n=>n.isEqual(e)))}class Kh{constructor(e,n,s,o,u){this._firestore=e,this._userDataWriter=n,this._key=s,this._document=o,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new mt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new PN(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Eg("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class PN extends Kh{data(){return super.data()}}function Eg(r,e){return typeof e=="string"?_g(r,e):e instanceof Ru?e._internalPath:e._delegate._internalPath}function vS(r){if(r.limitType==="L"&&r.explicitOrderBy.length===0)throw new he(ee.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Tg{}class LN extends Tg{}function yf(r,e,...n){let s=[];e instanceof Tg&&s.push(e),s=s.concat(n),(function(u){const f=u.filter((p=>p instanceof bg)).length,m=u.filter((p=>p instanceof vf)).length;if(f>1||f>0&&m>0)throw new he(ee.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(s);for(const o of s)r=o._apply(r);return r}class vf extends LN{constructor(e,n,s){super(),this._field=e,this._op=n,this._value=s,this.type="where"}static _create(e,n,s){return new vf(e,n,s)}_apply(e){const n=this._parse(e);return _S(e._query,n),new ga(e.firestore,e.converter,ap(e._query,n))}_parse(e){const n=xu(e.firestore);return(function(u,f,m,p,g,E,T){let R;if(g.isKeyField()){if(E==="array-contains"||E==="array-contains-any")throw new he(ee.INVALID_ARGUMENT,`Invalid Query. You can't perform '${E}' queries on documentId().`);if(E==="in"||E==="not-in"){ME(T,E);const H=[];for(const G of T)H.push(OE(p,u,G));R={arrayValue:{values:H}}}else R=OE(p,u,T)}else E!=="in"&&E!=="not-in"&&E!=="array-contains-any"||ME(T,E),R=VN(m,f,T,E==="in"||E==="not-in");return Lt.create(g,E,R)})(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function wo(r,e,n){const s=e,o=Eg("where",r);return vf._create(o,s,n)}class bg extends Tg{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new bg(e,n)}_parse(e){const n=this._queryConstraints.map((s=>s._parse(e))).filter((s=>s.getFilters().length>0));return n.length===1?n[0]:_i.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:((function(o,u){let f=o;const m=u.getFlattenedFilters();for(const p of m)_S(f,p),f=ap(f,p)})(e._query,n),new ga(e.firestore,e.converter,ap(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function OE(r,e,n){if(typeof(n=jt(n))=="string"){if(n==="")throw new he(ee.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!gb(e)&&n.indexOf("/")!==-1)throw new he(ee.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const s=e.path.child(st.fromString(n));if(!Te.isDocumentKey(s))throw new he(ee.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return K0(r,new Te(s))}if(n instanceof mt)return K0(r,n._key);throw new he(ee.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${tf(n)}.`)}function ME(r,e){if(!Array.isArray(r)||r.length===0)throw new he(ee.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function _S(r,e){const n=(function(o,u){for(const f of o)for(const m of f.getFlattenedFilters())if(u.indexOf(m.op)>=0)return m.op;return null})(r.filters,(function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(n!==null)throw n===e.op?new he(ee.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new he(ee.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class ES{convertValue(e,n="none"){switch(Ts(e)){case 0:return null;case 1:return e.booleanValue;case 2:return At(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Es(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Ae(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const s={};return ws(e,((o,u)=>{s[o]=this.convertValue(u,n)})),s}convertVectorValue(e){const n=e.fields?.[Uh].arrayValue?.values?.map((s=>At(s.doubleValue)));return new Yi(n)}convertGeoPoint(e){return new Qi(At(e.latitude),At(e.longitude))}convertArray(e,n){return(e.values||[]).map((s=>this.convertValue(s,n)))}convertServerTimestamp(e,n){switch(n){case"previous":const s=rf(e);return s==null?null:this.convertValue(s,n);case"estimate":return this.convertTimestamp(ru(e));default:return null}}convertTimestamp(e){const n=_s(e);return new ct(n.seconds,n.nanos)}convertDocumentKey(e,n){const s=st.fromString(e);Ge(Hb(s),9688,{name:e});const o=new su(s.get(1),s.get(3)),u=new Te(s.popFirst(5));return o.isEqual(n)||Ar(`Document ${u} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),u}}function Sg(r,e,n){let s;return s=r?n&&(n.merge||n.mergeFields)?r.toFirestore(e,n):r.toFirestore(e):e,s}class UN extends ES{constructor(e){super(),this.firestore=e}convertBytes(e){return new Un(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new mt(this.firestore,null,n)}}class co{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class gs extends Kh{constructor(e,n,s,o,u,f){super(e,n,s,o,f),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new wh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const s=this._document.data.field(Eg("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new he(ee.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=gs._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}gs._jsonSchemaVersion="firestore/documentSnapshot/1.0",gs._jsonSchema={type:Ut("string",gs._jsonSchemaVersion),bundleSource:Ut("string","DocumentSnapshot"),bundleName:Ut("string"),bundle:Ut("string")};class wh extends gs{data(e={}){return super.data(e)}}class la{constructor(e,n,s,o){this._firestore=e,this._userDataWriter=n,this._snapshot=o,this.metadata=new co(o.hasPendingWrites,o.fromCache),this.query=s}get docs(){const e=[];return this.forEach((n=>e.push(n))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach((s=>{e.call(n,new wh(this._firestore,this._userDataWriter,s.key,s,new co(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new he(ee.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(o,u){if(o._snapshot.oldDocs.isEmpty()){let f=0;return o._snapshot.docChanges.map((m=>{const p=new wh(o._firestore,o._userDataWriter,m.doc.key,m.doc,new co(o._snapshot.mutatedKeys.has(m.doc.key),o._snapshot.fromCache),o.query.converter);return m.doc,{type:"added",doc:p,oldIndex:-1,newIndex:f++}}))}{let f=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((m=>u||m.type!==3)).map((m=>{const p=new wh(o._firestore,o._userDataWriter,m.doc.key,m.doc,new co(o._snapshot.mutatedKeys.has(m.doc.key),o._snapshot.fromCache),o.query.converter);let g=-1,E=-1;return m.type!==0&&(g=f.indexOf(m.doc.key),f=f.delete(m.doc.key)),m.type!==1&&(f=f.add(m.doc),E=f.indexOf(m.doc.key)),{type:jN(m.type),doc:p,oldIndex:g,newIndex:E}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new he(ee.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=la._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=jp.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],s=[],o=[];return this.docs.forEach((u=>{u._document!==null&&(n.push(u._document),s.push(this._userDataWriter.convertObjectMap(u._document.data.value.mapValue.fields,"previous")),o.push(u.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function jN(r){switch(r){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ae(61501,{type:r})}}function ys(r){r=yn(r,mt);const e=yn(r.firestore,Xi);return RN(wu(e),r._key).then((n=>TS(e,r,n)))}la._jsonSchemaVersion="firestore/querySnapshot/1.0",la._jsonSchema={type:Ut("string",la._jsonSchemaVersion),bundleSource:Ut("string","QuerySnapshot"),bundleName:Ut("string"),bundle:Ut("string")};class _f extends ES{constructor(e){super(),this.firestore=e}convertBytes(e){return new Un(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new mt(this.firestore,null,n)}}function Ln(r){r=yn(r,ga);const e=yn(r.firestore,Xi),n=wu(e),s=new _f(e);return vS(r._query),CN(n,r._query).then((o=>new la(e,s,r,o)))}function ho(r,e,n){r=yn(r,mt);const s=yn(r.firestore,Xi),o=Sg(r.converter,e,n);return Ef(s,[pg(xu(s),"setDoc",r._key,o,r.converter!==null,n).toMutation(r._key,rn.none())])}function zN(r,e,n,...s){r=yn(r,mt);const o=yn(r.firestore,Xi),u=xu(o);let f;return f=typeof(e=jt(e))=="string"||e instanceof Ru?mS(u,"updateDoc",r._key,e,n,s):dS(u,"updateDoc",r._key,e),Ef(o,[f.toMutation(r._key,rn.exists(!0))])}function zm(r){return Ef(yn(r.firestore,Xi),[new cf(r._key,rn.none())])}function BN(r,e){const n=yn(r.firestore,Xi),s=gn(r),o=Sg(r.converter,e);return Ef(n,[pg(xu(r.firestore),"addDoc",s._key,o,r.converter!==null,{}).toMutation(s._key,rn.exists(!1))]).then((()=>s))}function aa(r,...e){r=jt(r);let n={includeMetadataChanges:!1,source:"default"},s=0;typeof e[s]!="object"||NE(e[s])||(n=e[s++]);const o={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(NE(e[s])){const p=e[s];e[s]=p.next?.bind(p),e[s+1]=p.error?.bind(p),e[s+2]=p.complete?.bind(p)}let u,f,m;if(r instanceof mt)f=yn(r.firestore,Xi),m=sf(r._key.path),u={next:p=>{e[s]&&e[s](TS(f,r,p))},error:e[s+1],complete:e[s+2]};else{const p=yn(r,ga);f=yn(p.firestore,Xi),m=p._query;const g=new _f(f);u={next:E=>{e[s]&&e[s](new la(f,g,p,E))},error:e[s+1],complete:e[s+2]},vS(r._query)}return(function(g,E,T,R){const L=new fg(R),H=new ug(E,L,T);return g.asyncQueue.enqueueAndForget((async()=>ag(await Qh(g),H))),()=>{L.Nu(),g.asyncQueue.enqueueAndForget((async()=>og(await Qh(g),H)))}})(wu(f),m,o,u)}function Ef(r,e){return(function(s,o){const u=new Fi;return s.asyncQueue.enqueueAndForget((async()=>hN(await AN(s),o,u))),u.promise})(wu(r),e)}function TS(r,e,n){const s=n.docs.get(e._key),o=new _f(r);return new gs(r,o,e._key,s,new co(n.hasPendingWrites,n.fromCache),e.converter)}const qN={maxAttempts:5};function Ql(r,e){if((r=jt(r)).firestore!==e)throw new he(ee.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return r}class HN{constructor(e,n){this._firestore=e,this._transaction=n,this._dataReader=xu(e)}get(e){const n=Ql(e,this._firestore),s=new UN(this._firestore);return this._transaction.lookup([n._key]).then((o=>{if(!o||o.length!==1)return Ae(24041);const u=o[0];if(u.isFoundDocument())return new Kh(this._firestore,s,u.key,u,n.converter);if(u.isNoDocument())return new Kh(this._firestore,s,n._key,null,n.converter);throw Ae(18433,{doc:u})}))}set(e,n,s){const o=Ql(e,this._firestore),u=Sg(o.converter,n,s),f=pg(this._dataReader,"Transaction.set",o._key,u,o.converter!==null,s);return this._transaction.set(o._key,f),this}update(e,n,s,...o){const u=Ql(e,this._firestore);let f;return f=typeof(n=jt(n))=="string"||n instanceof Ru?mS(this._dataReader,"Transaction.update",u._key,n,s,o):dS(this._dataReader,"Transaction.update",u._key,n),this._transaction.update(u._key,f),this}delete(e){const n=Ql(e,this._firestore);return this._transaction.delete(n._key),this}}class FN extends HN{constructor(e,n){super(e,n),this._firestore=e}get(e){const n=Ql(e,this._firestore),s=new _f(this._firestore);return super.get(e).then((o=>new gs(this._firestore,s,n._key,o._document,new co(!1,!1),n.converter)))}}function GN(r,e,n){r=yn(r,Xi);const s={...qN,...n};return(function(u){if(u.maxAttempts<1)throw new he(ee.INVALID_ARGUMENT,"Max attempts must be at least 1")})(s),(function(u,f,m){const p=new Fi;return u.asyncQueue.enqueueAndForget((async()=>{const g=await wN(u);new TN(u.asyncQueue,g,m,f,p).ju()})),p.promise})(wu(r),(o=>e(new FN(r,o))),s)}function yi(){return new gg("serverTimestamp")}function QN(r){return new yg("increment",r)}(function(e,n=!0){(function(o){Mo=o})(No),yo(new ca("firestore",((s,{instanceIdentifier:o,options:u})=>{const f=s.getProvider("app").getImmediate(),m=new Xi(new k2(s.getProvider("auth-internal")),new U2(f,s.getProvider("app-check-internal")),(function(g,E){if(!Object.prototype.hasOwnProperty.apply(g.options,["projectId"]))throw new he(ee.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new su(g.options.projectId,E)})(f,o),f);return u={useFetchStreams:n,...u},m._setSettings(u),m}),"PUBLIC").setMultipleInstances(!0)),ds(k0,P0,e),ds(k0,P0,"esm2020")})();const YN={apiKey:"AIzaSyDYdiJjDRBA9nGPj8LGDxAE4O6o6Qlyx68",authDomain:"labyrinth-6dc4f.firebaseapp.com",projectId:"labyrinth-6dc4f",storageBucket:"labyrinth-6dc4f.firebasestorage.app",messagingSenderId:"912154260516",appId:"1:912154260516:web:e118702708fb452fde14b1"},bS=cT(YN),Bm=I2(bS),KN=new yr,He=IN(bS),SS=V.createContext(),ya=()=>{const r=V.useContext(SS);if(!r)throw new Error("useAuth must be used within an AuthProvider");return r},$N=({children:r})=>{const[e,n]=V.useState(null),[s,o]=V.useState(!0);V.useEffect(()=>yx(Bm,g=>{n(g),o(!1)}),[]);const m={user:e,loading:s,loginWithGoogle:async()=>{try{return(await Ux(Bm,KN)).user}catch(p){throw console.error("Google login error:",p),p}},logout:async()=>{try{await vx(Bm)}catch(p){throw console.error("Logout error:",p),p}},isAuthenticated:!!e};return S.jsx(SS.Provider,{value:m,children:!s&&r})},AS=V.createContext(),Tf=()=>{const r=V.useContext(AS);if(!r)throw new Error("useMedia must be used within a MediaProvider");return r},XN=({children:r})=>{const[e,n]=V.useState(null),[s,o]=V.useState(!1),[u,f]=V.useState(!0),[m,p]=V.useState(!1),[g,E]=V.useState(null),T=V.useRef(null),R=V.useRef(null),L=V.useCallback(async(se,le=null)=>{try{const pe=se==="video"?{video:{width:{ideal:640},height:{ideal:480},frameRate:{ideal:15},facingMode:"user",...le&&{deviceId:{exact:le}}}}:{audio:{echoCancellation:!0,noiseSuppression:!0,autoGainControl:!0,...le&&{deviceId:{exact:le}}}};return(await navigator.mediaDevices.getUserMedia(pe)).getTracks()[0]}catch(pe){if(console.error(`Error getting ${se} track:`,pe),se==="video"&&pe.name==="NotReadableError")return console.log("Camera busy, creating test video track for localhost testing"),H();throw pe}},[]),H=()=>{const se=document.createElement("canvas");se.width=640,se.height=480;const le=se.getContext("2d"),pe=le.createLinearGradient(0,0,640,480);return pe.addColorStop(0,"#8b5cf6"),pe.addColorStop(1,"#3b82f6"),le.fillStyle=pe,le.fillRect(0,0,640,480),le.fillStyle="white",le.font="30px Arial",le.textAlign="center",le.fillText("Test Video",320,240),le.font="20px Arial",le.fillText("Localhost Mode",320,280),se.captureStream(15).getVideoTracks()[0]},G=V.useCallback(async(se={})=>{p(!0),E(null);try{console.log("Initializing media with options:",se),T.current&&(T.current.stop(),T.current=null),R.current&&(R.current.stop(),R.current=null);const le=new MediaStream;if(se.video!==!1)try{T.current=await L("video"),le.addTrack(T.current),o(!0),console.log("Video track added")}catch(pe){console.warn("Could not get video track:",pe),o(!1)}else o(!1);if(se.audio!==!1)try{R.current=await L("audio"),le.addTrack(R.current),f(!0),console.log("Audio track added")}catch(pe){console.warn("Could not get audio track:",pe),f(!1)}else f(!1);return n(le),console.log("Media initialized:",{hasVideo:!!T.current,hasAudio:!!R.current}),le}catch(le){throw console.error("Error initializing media:",le),E(`Failed to initialize media: ${le.message}`),le}finally{p(!1)}},[L]),z=V.useCallback(async()=>{p(!0);try{if(s){console.log("Turning camera OFF..."),T.current&&(T.current.stop(),T.current=null);const se=new MediaStream;R.current&&se.addTrack(R.current),n(se),o(!1),console.log("Camera turned OFF")}else{console.log("Turning camera ON...");try{T.current=await L("video");const se=new MediaStream;R.current&&se.addTrack(R.current),se.addTrack(T.current),n(se),o(!0),console.log("Camera turned ON")}catch(se){console.error("Failed to enable camera:",se),E("Cannot enable camera");return}}}catch(se){console.error("Error toggling camera:",se),E(`Failed to toggle camera: ${se.message}`)}finally{p(!1)}},[s,L]),W=V.useCallback(async()=>{p(!0);try{if(u){console.log("Muting microphone..."),R.current&&(R.current.stop(),R.current=null);const se=new MediaStream;T.current&&se.addTrack(T.current),n(se),f(!1),console.log("Microphone MUTED")}else{console.log("Unmuting microphone...");try{R.current=await L("audio");const se=new MediaStream;T.current&&se.addTrack(T.current),se.addTrack(R.current),n(se),f(!0),console.log("Microphone UNMUTED")}catch(se){console.error("Failed to enable microphone:",se),E("Cannot enable microphone");return}}}catch(se){console.error("Error toggling microphone:",se),E(`Failed to toggle microphone: ${se.message}`)}finally{p(!1)}},[u,L]),K=V.useCallback(()=>{T.current&&(T.current.stop(),T.current=null),R.current&&(R.current.stop(),R.current=null),n(null),o(!1),f(!1)},[]);Hm.useEffect(()=>{(async()=>{try{await G({video:!0,audio:!0})}catch{console.log("Auto-initialize failed, user will need to manually enable")}})()},[G]),Hm.useEffect(()=>()=>{K()},[K]);const Z={localStream:e,isCameraOn:s,isMicOn:u,isLoading:m,error:g,initializeMedia:G,toggleCamera:z,toggleMicrophone:W,stopMedia:K};return S.jsx(AS.Provider,{value:Z,children:r})},WN=()=>Math.floor(1e5+Math.random()*9e5).toString(),JN=async r=>{const e=Pt(He,"rooms"),n=yf(e,wo("roomCode","==",r));return(await Ln(n)).empty},ZN=async(r,e)=>{try{let n,s=!1;for(let f=0;f<5&&(n=WN(),s=await JN(n),!s);f++);if(!s)throw new Error("Could not generate unique room code. Please try again.");const o={name:r.name||`${e.displayName}'s Room`,maxParticipants:Math.min(Math.max(r.maxParticipants,2),10),currentParticipants:1,hostId:e.uid,hostName:e.displayName,hostPhotoURL:e.photoURL||"",createdAt:yi(),lastActivity:yi(),isActive:!0,status:"waiting",roomCode:n},u=await BN(Pt(He,"rooms"),o);return await ho(gn(He,"rooms",u.id,"participants",e.uid),{name:e.displayName,email:e.email,photoURL:e.photoURL||"",joinedAt:yi(),isHost:!0,isActive:!0}),{id:u.id,...o,roomCode:n}}catch(n){throw console.error("Error creating room:",n),n}},Rh=async r=>{try{const e=gn(He,"rooms",r),n=await ys(e);return n.exists()?{id:n.id,...n.data()}:null}catch(e){throw console.error("Error getting room:",e),e}},eO=async r=>{try{const e=Pt(He,"rooms"),n=yf(e,wo("roomCode","==",r)),s=await Ln(n);if(!s.empty){const o=s.docs[0];return{id:o.id,...o.data()}}return null}catch(e){throw console.error("Error getting room by code:",e),e}},tO=async()=>{try{const r=Pt(He,"rooms"),e=yf(r,wo("isActive","==",!0),wo("status","in",["waiting","active"]));return(await Ln(e)).docs.map(s=>({id:s.id,...s.data()}))}catch(r){throw console.error("Error getting active rooms:",r),r}},dh=async r=>{try{const e=Pt(He,"rooms",r,"participants");return(await Ln(e)).docs.map(s=>({id:s.id,...s.data()}))}catch(e){throw console.error("Error getting participants:",e),e}},nO=async(r,e)=>{try{console.log("=== JOIN ROOM ATTEMPT ==="),console.log(`User: ${e.uid} (${e.displayName})`),console.log(`Room: ${r}`);const n=gn(He,"rooms",r,"participants",e.uid);if((await ys(n)).exists())return console.log("User already a participant, skipping join"),{alreadyJoined:!0};const o=gn(He,"rooms",r),u=await ys(o);if(!u.exists())throw new Error("Room not found");const f=u.data();if(console.log("Current room state:",f),f.currentParticipants>=f.maxParticipants)throw console.log("Room is full, cannot join"),new Error("Room is full");console.log("Starting transaction to join room...");try{const m=await GN(He,async p=>{const g=await p.get(o);if(!g.exists())throw new Error("Room not found");const E=g.data();if(console.log("Fresh room data in transaction:",E),E.currentParticipants>=E.maxParticipants)throw new Error("Room is now full");return(await p.get(n)).exists()?(console.log("User already joined (race condition detected)"),{alreadyJoined:!0}):(p.set(n,{name:e.displayName,email:e.email,photoURL:e.photoURL||"",joinedAt:yi(),isHost:!1,isActive:!0}),p.update(o,{currentParticipants:E.currentParticipants+1,lastActivity:yi()}),console.log("Transaction successful - user joined"),{success:!0,newCount:E.currentParticipants+1})});return console.log("Transaction result:",m),console.log("=== JOIN SUCCESSFUL ==="),m}catch(m){return console.error("Transaction error:",m),console.log("Trying non-transactional approach..."),await ho(n,{name:e.displayName,email:e.email,photoURL:e.photoURL||"",joinedAt:yi(),isHost:!1,isActive:!0}),await zN(o,{currentParticipants:QN(1),lastActivity:yi()}),console.log("Non-transactional join successful"),{success:!0,fallback:!0}}}catch(n){console.error("Join room error:",n);try{if((await ys(gn(He,"rooms",r,"participants",e.uid))).exists())return console.log("User was added despite error (race condition)"),{alreadyJoined:!0}}catch(s){console.error("Final check error:",s)}throw n}},iO=async(r,e)=>{try{console.log("=== DEBUG ROOM STATE ===");const n=gn(He,"rooms",r),s=await ys(n);if(s.exists()){const p=s.data();console.log("Room data:",p),console.log(`Participants: ${p.currentParticipants}/${p.maxParticipants}`)}else console.log("Room not found");const o=gn(He,"rooms",r,"participants",e),u=await ys(o);console.log("Participant exists?",u.exists()),u.exists()&&console.log("Participant data:",u.data());const f=Pt(He,"rooms",r,"participants"),m=await Ln(f);console.log("All participants count:",m.docs.length),m.docs.forEach(p=>{console.log(`- ${p.id}: ${p.data().name}`)})}catch(n){console.error("Debug error:",n)}},rO=(r,e)=>{try{const n=gn(He,"rooms",r);return console.log(`Setting up room listener for: ${r}`),aa(n,o=>{if(console.log(`Room snapshot received for ${r}:`,o.exists()),o.exists()){const u={id:o.id,...o.data()};console.log("Room data:",u),e(u)}else console.log("Room does not exist"),e(null)},o=>{console.error("Error in room listener:",o),e(null,o)})}catch(n){throw console.error("Error setting up room listener:",n),n}},sO=(r,e)=>{try{const n=Pt(He,"rooms",r,"participants");return console.log(`Setting up participants listener for room: ${r}`),aa(n,o=>{const u=o.docs.map(f=>({id:f.id,...f.data()}));console.log(`Participants snapshot: ${u.length} participants`),e(u)},o=>{console.error("Error in participants listener:",o),e([],o)})}catch(n){throw console.error("Error setting up participants listener:",n),n}},aO=r=>{try{const e=Pt(He,"rooms"),n=yf(e,wo("isActive","==",!0),wo("status","in",["waiting","active"]));return aa(n,o=>{const u=o.docs.map(f=>({id:f.id,...f.data()}));r(u)},o=>{console.error("Error listening to active rooms:",o)})}catch(e){throw console.error("Error setting up active rooms listener:",e),e}},wS=V.createContext(),Du=()=>{const r=V.useContext(wS);if(!r)throw new Error("useRoom must be used within a RoomProvider");return r},oO=({children:r})=>{const{user:e}=ya(),[n,s]=V.useState([]),[o,u]=V.useState(null),[f,m]=V.useState(!1),[p,g]=V.useState(null),E=async W=>{if(!e)throw new Error("User must be logged in");m(!0),g(null);try{const K=await ZN(W,e);return s(Z=>[K,...Z]),u(K),K}catch(K){throw g(K.message),K}finally{m(!1)}},T=async()=>{m(!0);try{const W=await tO();return s(W),W}catch(W){throw g(W.message),W}finally{m(!1)}},R=async W=>{m(!0);try{const K=await Rh(W);if(!K||!K.isActive)throw new Error("Room not found or inactive");return u(K),K}catch(K){throw g(K.message),K}finally{m(!1)}},L=async W=>{m(!0);try{const K=await eO(W);if(!K||!K.isActive)throw new Error("Room not found or inactive");return u(K),K}catch(K){throw g(K.message),K}finally{m(!1)}},H=()=>{u(null)},G=()=>{g(null)};V.useEffect(()=>{e&&T()},[e]);const z={rooms:n,currentRoom:o,loading:f,error:p,createRoom:E,fetchActiveRooms:T,joinRoomById:R,joinRoomByCode:L,leaveRoom:H,clearError:G,setCurrentRoom:u};return S.jsx(wS.Provider,{value:z,children:r})},RS=V.createContext(),CS=()=>{const r=V.useContext(RS);if(!r)throw new Error("usePeer must be used within a PeerProvider");return r},lO=({children:r})=>{const{user:e}=ya(),{localStream:n}=Tf(),{currentRoom:s}=Du(),[o,u]=V.useState({}),[f,m]=V.useState("idle"),[p,g]=V.useState(0),E=V.useRef({}),T=V.useRef(null),R=V.useRef([]),L={iceServers:[{urls:"stun:stun.l.google.com:19302"},{urls:"stun:stun1.l.google.com:19302"},{urls:"stun:stun2.l.google.com:19302"},{urls:"stun:stun3.l.google.com:19302"},{urls:"turn:openrelay.metered.ca:80",username:"openrelayproject",credential:"openrelayproject"},{urls:"turn:openrelay.metered.ca:443",username:"openrelayproject",credential:"openrelayproject"}]},H=V.useCallback(()=>{console.log(" Cleaning up peer connections"),Object.values(E.current).forEach(A=>{A&&A.signalingState!=="closed"&&A.close()}),E.current={},R.current.forEach(A=>A()),R.current=[],u({}),m("idle"),g(0),console.log(" Peer cleanup complete")},[]),G=V.useCallback(async A=>{if(!(!e||!A)){console.log(" Initializing signaling for room:",A);try{const N=gn(He,"rooms",A,"signaling",e.uid);await ho(N,{userId:e.uid,userName:e.displayName,isOnline:!0,lastSeen:yi(),status:"online",readyForConnection:!0},{merge:!0}),console.log(" Signaling document created/updated for user:",e.uid)}catch(N){console.error(" Error creating signaling document:",N)}}},[e]),z=V.useCallback((A,N)=>{console.log(" Creating peer connection to:",A);try{const C=new RTCPeerConnection(L);return E.current[A]=C,T.current&&T.current.getTracks().forEach(M=>{C.addTrack(M,T.current)}),C.ontrack=M=>{console.log(" Received remote track from:",A);const I=M.streams[0];I&&u(Ee=>({...Ee,[A]:{...Ee[A],stream:I,connectionState:C.connectionState||"connected",userData:N}}))},C.onicecandidate=M=>{M.candidate&&(console.log(" New ICE candidate for:",A),W(A,M.candidate))},C.onicegatheringstatechange=()=>{console.log(` ICE gathering state for ${A}:`,C.iceGatheringState)},C.onconnectionstatechange=()=>{console.log(` Connection state with ${A}:`,C.connectionState),u(M=>({...M,[A]:{...M[A],connectionState:C.connectionState}})),C.connectionState==="connected"?(console.log(` Connected to ${A}`),m("connected")):(C.connectionState==="disconnected"||C.connectionState==="failed"||C.connectionState==="closed")&&(console.log(` Connection lost with ${A}`),E.current[A]&&(E.current[A].close(),delete E.current[A]),u(M=>{const I={...M};return delete I[A],I}))},C.oniceconnectionstatechange=()=>{console.log(` ICE connection state with ${A}:`,C.iceConnectionState),C.iceConnectionState==="failed"&&(console.log(` ICE connection failed for ${A}, restarting ICE`),setTimeout(()=>{C.iceConnectionState==="failed"&&C.restartIce()},1e3))},C.onsignalingstatechange=()=>{console.log(` Signaling state with ${A}:`,C.signalingState)},console.log(" Peer connection created for:",A),C}catch(C){return console.error(" Error creating peer connection:",C),null}},[]),W=V.useCallback(async(A,N)=>{if(!(!s?.id||!e))try{const C=gn(He,"rooms",s.id,"signaling",A,"candidates",`${Date.now()}_${e.uid}`);await ho(C,{to:A,from:e.uid,candidate:JSON.stringify(N.toJSON()),timestamp:yi(),type:"candidate"}),console.log(" ICE candidate sent to:",A)}catch(C){console.error(" Error sending ICE candidate:",C)}},[s?.id,e]),K=V.useCallback(async(A,N)=>{if(!(!s?.id||!e)){console.log(" Sending offer to user:",A);try{const C=gn(He,"rooms",s.id,"signaling",A,"offers",`${Date.now()}_${e.uid}`);await ho(C,{sdp:JSON.stringify(N),from:e.uid,fromName:e.displayName,to:A,timestamp:yi(),type:"offer"}),console.log(" Offer saved to Firestore at path:",C.path)}catch(C){console.error(" Error sending offer:",C)}}},[s?.id,e]),Z=V.useCallback(async(A,N)=>{if(!(!s?.id||!e)){console.log(" Sending answer to user:",A);try{const C=gn(He,"rooms",s.id,"signaling",A,"answers",`${Date.now()}_${e.uid}`);await ho(C,{sdp:JSON.stringify(N),from:e.uid,fromName:e.displayName,to:A,timestamp:yi(),type:"answer"}),console.log(" Answer saved to Firestore at path:",C.path)}catch(C){console.error(" Error sending answer:",C)}}},[s?.id,e]),se=V.useCallback(async(A,N)=>{console.log(" handleIncomingOffer called for:",A),console.log("   Offer type:",N?.type);try{let C=E.current[A];if(!C){console.log("   Creating new peer connection...");const I={id:A,name:N.fromName||"Remote User"};if(C=z(A,I),!C){console.error("    Failed to create peer connection");return}}console.log("   Setting remote description..."),await C.setRemoteDescription(new RTCSessionDescription(N)),console.log("    Remote description set"),console.log("   Creating answer...");const M=await C.createAnswer({offerToReceiveAudio:!0,offerToReceiveVideo:!0});console.log("   Answer created:",M.type),console.log("   Setting local description..."),await C.setLocalDescription(M),console.log("    Local description set"),console.log("   Sending answer to:",A),await Z(A,M),console.log("    Answer sent"),u(I=>({...I,[A]:{...I[A],connectionState:C.connectionState,userData:{id:A,name:N.fromName||"Remote User"}}}))}catch(C){console.error(" Error in handleIncomingOffer:",C)}},[z,Z]),le=V.useCallback(async(A,N)=>{console.log(" Handling incoming answer from:",A);const C=E.current[A];if(!C){console.error(" No peer connection found for:",A);return}try{const M=new RTCSessionDescription(N);await C.setRemoteDescription(M),console.log(" Remote description set for:",A)}catch(M){console.error(" Error setting remote description:",M)}},[]),pe=V.useCallback(async(A,N)=>{console.log(" Handling incoming ICE candidate from:",A);const C=E.current[A];if(!C){console.error(" No peer connection found for ICE candidate:",A);return}try{await C.addIceCandidate(new RTCIceCandidate(N)),console.log(" ICE candidate added for:",A)}catch(M){console.error(" Error adding ICE candidate:",M)}},[]),D=V.useCallback(async(A,N)=>{if(!(!e||e.uid===A)){if(console.log(" Connecting to user:",A),m("connecting"),E.current[A]){console.log(" Already connected to:",A);return}try{const C=z(A,N);if(!C)throw new Error("Failed to create peer connection");const M=await C.createOffer({offerToReceiveAudio:!0,offerToReceiveVideo:!0});await C.setLocalDescription(M),await K(A,M),console.log(" Offer created and sent to:",A),u(I=>({...I,[A]:{connectionState:"connecting",userData:N}}))}catch(C){console.error(" Error connecting to user:",C),m("error")}}},[e,z,K]);V.useEffect(()=>{T.current=n},[n]),V.useEffect(()=>{s?.id&&e&&(console.log(" Initializing signaling for room:",s.id),G(s.id))},[s?.id,e,G]),V.useEffect(()=>()=>{H()},[H]),V.useEffect(()=>{if(!s?.id||!e)return;console.log(" Setting up offer listener for user:",e.uid);const A=Pt(He,"rooms",s.id,"signaling",e.uid,"offers"),N=aa(A,C=>{C.docChanges().forEach(async M=>{if(M.type==="added"){const I=M.doc.data();console.log(" NEW OFFER RECEIVED from:",I.from);try{const Ee=JSON.parse(I.sdp);await se(I.from,Ee),await zm(M.doc.ref),console.log(" Offer processed and cleaned up")}catch(Ee){console.error(" Error processing offer:",Ee)}}})},C=>{console.error(" Error in offer listener:",C)});return R.current.push(N),()=>{N()}},[s?.id,e,se]),V.useEffect(()=>{if(!s?.id||!e)return;console.log(" Setting up answer listener");const A=Pt(He,"rooms",s.id,"signaling",e.uid,"answers"),N=aa(A,C=>{C.docChanges().forEach(async M=>{if(M.type==="added"){const I=M.doc.data();console.log(" Received answer from:",I.from);try{await le(I.from,JSON.parse(I.sdp)),await zm(M.doc.ref)}catch(Ee){console.error(" Error processing answer:",Ee)}}})});return R.current.push(N),()=>{N()}},[s?.id,e,le]),V.useEffect(()=>{if(!s?.id||!e)return;console.log(" Setting up ICE candidate listener");const A=Pt(He,"rooms",s.id,"signaling",e.uid,"candidates"),N=aa(A,C=>{C.docChanges().forEach(async M=>{if(M.type==="added"){const I=M.doc.data();console.log(" Received ICE candidate from:",I.from);try{await pe(I.from,JSON.parse(I.candidate)),await zm(M.doc.ref)}catch(Ee){console.error(" Error processing ICE candidate:",Ee)}}})});return R.current.push(N),()=>{N()}},[s?.id,e,pe]),V.useEffect(()=>{if(!s?.id||!e)return;console.log(" Setting up participants listener");const A=Pt(He,"rooms",s.id,"participants"),N=aa(A,C=>{const M=C.docs.map(Ee=>({id:Ee.id,...Ee.data()}));console.log(" Participants found:",M.length);const I=M.filter(Ee=>Ee.id!==e.uid);if(s.hostId===e.uid)I.forEach(Ee=>{E.current[Ee.id]||(console.log(" Host connecting to:",Ee.id),setTimeout(()=>{D(Ee.id,{name:Ee.name,photoURL:Ee.photoURL})},1e3))});else{const Ee=M.find(at=>at.id===s.hostId);Ee&&!E.current[Ee.id]&&(console.log(" Joiner connecting to host:",Ee.id),setTimeout(()=>{D(Ee.id,{name:Ee.name,photoURL:Ee.photoURL})},1e3))}});return R.current.push(N),()=>{N()}},[s,e,D]),V.useEffect(()=>{const A=Object.keys(o).length;g(A),A>0&&f!=="connected"&&m("connected")},[o,f]),V.useEffect(()=>{const A=setInterval(()=>{Object.entries(E.current).forEach(([N,C])=>{C&&(C.connectionState==="disconnected"||C.connectionState==="failed"||C.connectionState==="closed")&&(console.log(` Cleaning up stale connection to ${N}`),C.close(),delete E.current[N],u(M=>{const I={...M};return delete I[N],I}))})},1e4);return()=>clearInterval(A)},[]);const x={peers:o,connectionStatus:f,activeConnections:p,connectToUser:D,cleanup:H};return S.jsx(RS.Provider,{value:x,children:r})},VE=({children:r})=>{const{user:e,loading:n}=ya();return n?S.jsx("div",{className:"flex-center",style:{minHeight:"100vh",backgroundColor:"var(--bg-dark)"},children:S.jsxs("div",{className:"text-center",children:[S.jsx("div",{className:"spinner"}),S.jsx("p",{style:{marginTop:"1rem",color:"var(--text-light)"},children:"Loading Labyrinth..."})]})}):e?r:S.jsx(hw,{to:"/",replace:!0})},qm=()=>{const{loginWithGoogle:r}=ya(),e=Io(),[n,s]=Hm.useState(!1),o=async()=>{s(!0);try{await r(),e("/dashboard")}catch(u){console.error("Login failed:",u),alert("Login failed. Please try again.")}finally{s(!1)}};return S.jsx("div",{style:{minHeight:"100vh",width:"100%",background:"linear-gradient(135deg, var(--primary-darker) 0%, var(--primary-dark) 100%)",display:"flex",alignItems:"center",justifyContent:"center",padding:"var(--space-md)"},children:S.jsxs("div",{style:{background:"var(--bg-card)",backdropFilter:"blur(20px)",borderRadius:"var(--radius-xl)",border:"1px solid var(--border-medium)",padding:"var(--space-xl)",width:"90%",maxWidth:"400px",boxShadow:"var(--shadow-xl)",margin:"0 auto"},children:[S.jsxs("div",{style:{textAlign:"center",marginBottom:"var(--space-xl)"},children:[S.jsx("h1",{style:{fontSize:"3rem",fontWeight:"700",background:"linear-gradient(135deg, var(--primary-purple), var(--accent-pink))",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",backgroundClip:"text",marginBottom:"var(--space-xs)",letterSpacing:"1px"},children:"Labyrinth"}),S.jsx("p",{style:{color:"var(--text-gray)",fontSize:"1.1rem",fontWeight:"300"},children:"Video Chat Maze"})]}),S.jsxs("div",{style:{textAlign:"center"},children:[S.jsx("h2",{style:{fontSize:"1.8rem",fontWeight:"600",marginBottom:"var(--space-sm)",color:"var(--text-light)"},children:"Welcome to Labyrinth"}),S.jsx("p",{style:{color:"var(--text-gray)",marginBottom:"var(--space-lg)",fontSize:"1rem",lineHeight:"1.5"},children:"Enter the maze of conversations. Connect, collaborate, and converse."}),S.jsx("button",{onClick:o,disabled:n,style:{width:"100%",background:"white",color:"#333",border:"none",padding:"var(--space-md)",borderRadius:"var(--radius-md)",fontSize:"1rem",fontWeight:"500",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"var(--space-sm)",transition:"all 0.2s ease",boxShadow:"var(--shadow-md)",opacity:n?.6:1},onMouseOver:u=>{n||(u.currentTarget.style.transform="translateY(-2px)",u.currentTarget.style.boxShadow="var(--shadow-lg)")},onMouseOut:u=>{n||(u.currentTarget.style.transform="translateY(0)",u.currentTarget.style.boxShadow="var(--shadow-md)")},children:n?S.jsxs(S.Fragment,{children:[S.jsx("div",{style:{width:"20px",height:"20px",border:"2px solid rgba(0, 0, 0, 0.1)",borderTopColor:"#333",borderRadius:"50%",animation:"spin 1s linear infinite"}}),S.jsx("span",{children:"Signing in..."})]}):S.jsxs(S.Fragment,{children:[S.jsxs("svg",{style:{width:"20px",height:"20px"},viewBox:"0 0 24 24",children:[S.jsx("path",{fill:"currentColor",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),S.jsx("path",{fill:"currentColor",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),S.jsx("path",{fill:"currentColor",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),S.jsx("path",{fill:"currentColor",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),S.jsx("span",{children:"Continue with Google"})]})}),S.jsx("div",{style:{marginTop:"var(--space-lg)",paddingTop:"var(--space-md)",borderTop:"1px solid var(--border-light)"},children:S.jsx("p",{style:{color:"var(--text-gray)",fontSize:"0.9rem",lineHeight:"1.4"},children:"By signing in, you agree to our Terms of Service and Privacy Policy"})})]})]})})},uO=({isOpen:r,onClose:e})=>{const{createRoom:n,loading:s}=Du(),o=Io(),[u,f]=V.useState({name:"",maxParticipants:4}),[m,p]=V.useState("");if(!r)return null;const g=async T=>{if(T.preventDefault(),p(""),u.maxParticipants<2||u.maxParticipants>10){p("Participants must be between 2 and 10");return}try{const R=await n(u);e(),o(`/room/${R.id}`)}catch(R){p(R.message||"Failed to create room")}},E=T=>{const{name:R,value:L}=T.target;f(H=>({...H,[R]:R==="maxParticipants"?parseInt(L)||2:L}))};return S.jsx("div",{style:vt.overlay,children:S.jsxs("div",{style:vt.modal,children:[S.jsxs("div",{style:vt.header,children:[S.jsx("h2",{style:vt.title,children:"Create New Room"}),S.jsx("button",{onClick:e,style:vt.closeButton,children:""})]}),S.jsxs("form",{onSubmit:g,style:vt.form,children:[S.jsx("div",{style:vt.formGroup,children:S.jsxs("label",{style:vt.label,children:["Room Name (Optional)",S.jsx("input",{type:"text",name:"name",value:u.name,onChange:E,placeholder:"Enter room name",style:vt.input,maxLength:30})]})}),S.jsx("div",{style:vt.formGroup,children:S.jsxs("label",{style:vt.label,children:["Maximum Participants: ",u.maxParticipants,S.jsxs("div",{style:vt.sliderContainer,children:[S.jsx("input",{type:"range",name:"maxParticipants",min:"2",max:"10",value:u.maxParticipants,onChange:E,style:vt.slider}),S.jsxs("div",{style:vt.sliderLabels,children:[S.jsx("span",{children:"2"}),S.jsx("span",{children:"10"})]})]}),S.jsx("div",{style:vt.participantHint,children:u.maxParticipants===10?"Max capacity (10 participants)":`${u.maxParticipants} participants maximum`})]})}),m&&S.jsx("div",{style:vt.error,children:m}),S.jsxs("div",{style:vt.buttonGroup,children:[S.jsx("button",{type:"button",onClick:e,style:vt.cancelButton,disabled:s,children:"Cancel"}),S.jsx("button",{type:"submit",style:vt.createButton,disabled:s,children:s?S.jsxs(S.Fragment,{children:[S.jsx("div",{style:vt.spinner}),"Creating..."]}):"Create Room"})]})]}),S.jsx("div",{style:vt.note,children:S.jsxs("p",{style:vt.noteText,children:[S.jsx("strong",{children:"Note:"})," You'll become the host of this room. You can invite others using the room code that will be generated."]})})]})})},vt={overlay:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.7)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3,backdropFilter:"blur(4px)"},modal:{backgroundColor:"var(--bg-card)",borderRadius:"var(--radius-lg)",border:"1px solid var(--border-medium)",width:"90%",maxWidth:"500px",maxHeight:"90vh",overflow:"auto",boxShadow:"var(--shadow-xl)"},header:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"var(--space-lg)",borderBottom:"1px solid var(--border-light)"},title:{fontSize:"1.5rem",fontWeight:"600",color:"var(--text-light)",margin:0},closeButton:{background:"none",border:"none",fontSize:"2rem",color:"var(--text-gray)",cursor:"pointer",padding:"0",width:"40px",height:"40px",display:"flex",alignItems:"center",justifyContent:"center",borderRadius:"50%",transition:"all 0.2s ease"},form:{padding:"var(--space-lg)"},formGroup:{marginBottom:"var(--space-lg)"},label:{display:"block",color:"var(--text-light)",marginBottom:"var(--space-sm)",fontSize:"0.95rem",fontWeight:"500"},input:{width:"100%",padding:"var(--space-sm)",backgroundColor:"rgba(255, 255, 255, 0.1)",border:"1px solid var(--border-light)",borderRadius:"var(--radius-md)",color:"var(--text-light)",fontSize:"1rem",marginTop:"var(--space-xs)",transition:"all 0.2s ease"},sliderContainer:{marginTop:"var(--space-sm)"},slider:{width:"100%",height:"6px",borderRadius:"3px",backgroundColor:"rgba(255, 255, 255, 0.1)",outline:"none",opacity:"0.7",transition:"opacity 0.2s",WebkitAppearance:"none"},sliderLabels:{display:"flex",justifyContent:"space-between",marginTop:"var(--space-xs)",color:"var(--text-gray)",fontSize:"0.9rem"},participantHint:{marginTop:"var(--space-xs)",color:"var(--accent-blue)",fontSize:"0.9rem",fontStyle:"italic"},error:{backgroundColor:"rgba(239, 68, 68, 0.2)",color:"#f87171",padding:"var(--space-sm)",borderRadius:"var(--radius-md)",marginBottom:"var(--space-md)",fontSize:"0.9rem"},buttonGroup:{display:"flex",gap:"var(--space-md)",marginTop:"var(--space-xl)"},cancelButton:{flex:1,padding:"var(--space-md)",backgroundColor:"rgba(255, 255, 255, 0.1)",border:"1px solid var(--border-light)",borderRadius:"var(--radius-md)",color:"var(--text-light)",fontSize:"1rem",fontWeight:"500",cursor:"pointer",transition:"all 0.2s ease"},createButton:{flex:2,padding:"var(--space-md)",background:"linear-gradient(135deg, var(--primary-purple), var(--primary-indigo))",border:"none",borderRadius:"var(--radius-md)",color:"white",fontSize:"1rem",fontWeight:"600",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"var(--space-sm)",transition:"all 0.2s ease"},spinner:{width:"20px",height:"20px",border:"2px solid rgba(255, 255, 255, 0.3)",borderTopColor:"white",borderRadius:"50%",animation:"spin 1s linear infinite"},note:{padding:"var(--space-lg)",backgroundColor:"rgba(59, 130, 246, 0.1)",borderTop:"1px solid rgba(59, 130, 246, 0.3)",borderBottomLeftRadius:"var(--radius-lg)",borderBottomRightRadius:"var(--radius-lg)"},noteText:{margin:0,color:"#93c5fd",fontSize:"0.9rem",lineHeight:1.5}},cO=()=>{const{user:r,logout:e}=ya(),{rooms:n,loading:s,error:o,fetchActiveRooms:u}=Du(),f=Io(),[m,p]=V.useState(n),[g,E]=V.useState(!1),[T,R]=V.useState(!1),[L,H]=V.useState("");V.useEffect(()=>{if(!r)return;console.log("Setting up dashboard room listeners");const Z=aO(se=>{console.log("Dashboard rooms updated:",se.length,"rooms"),se.forEach(le=>{console.log(`Room ${le.id}: ${le.currentParticipants}/${le.maxParticipants}`)}),p(se)});return()=>{console.log("Cleaning up dashboard listeners"),Z()}},[r]),V.useEffect(()=>{p(n)},[n]);const G=async()=>{try{await e(),f("/")}catch(Z){console.error("Logout failed:",Z)}},z=async Z=>{R(!0),H("");try{const se=m.find(le=>le.id===Z);if(!se){H("Room not found");return}if(se.currentParticipants>=se.maxParticipants){H("This room is now full");return}if(!se.isActive||se.status==="ended"){H("This room is no longer active");return}f(`/room/${Z}`)}catch(se){console.error("Error joining room:",se),H("Failed to join room. Please try again.")}finally{R(!1)}},W=Z=>{if(!Z)return"Just now";let se;if(Z.toDate)se=Z.toDate();else if(Z instanceof Date)se=Z;else if(Z.seconds)se=new Date(Z.seconds*1e3);else return"Just now";const pe=new Date-se,D=Math.floor(pe/6e4);if(D<1)return"Just now";if(D<60)return`${D}m ago`;const x=Math.floor(D/60);return x<24?`${x}h ago`:`${Math.floor(x/24)}d ago`},K=Z=>Z.currentParticipants>=Z.maxParticipants;return S.jsxs(S.Fragment,{children:[S.jsxs("div",{className:"dashboard-page",children:[S.jsx("nav",{className:"dashboard-nav",children:S.jsxs("div",{className:"container nav-container",children:[S.jsxs("div",{className:"nav-left",children:[S.jsx("div",{className:"nav-logo"}),S.jsx("h1",{className:"nav-title",children:"Labyrinth"})]}),S.jsxs("div",{className:"nav-right",children:[S.jsxs("div",{className:"user-info",children:[r?.photoURL&&S.jsx("img",{src:r.photoURL,alt:r.displayName,className:"user-avatar"}),S.jsx("span",{className:"user-name",children:r?.displayName})]}),S.jsx("button",{onClick:G,className:"logout-btn",children:"Logout"})]})]})}),S.jsx("main",{className:"dashboard-main",children:S.jsx("div",{className:"container",children:S.jsxs("div",{className:"dashboard-content",children:[S.jsxs("div",{className:"dashboard-header",children:[S.jsx("h2",{className:"dashboard-title",children:"Labyrinth Dashboard"}),S.jsx("p",{className:"dashboard-subtitle",children:"Create or join video chat rooms. Host meetings, collaborate, and connect."})]}),S.jsxs("div",{style:De.quickActions,children:[S.jsxs("div",{style:De.actionCard,children:[S.jsx("div",{style:De.actionIcon,children:""}),S.jsx("h3",{style:De.actionTitle,children:"Create Room"}),S.jsx("p",{style:De.actionDescription,children:"Start a new video chat room. Set participant limits and invite others."}),S.jsx("button",{onClick:()=>E(!0),style:De.actionButton,children:"Create New Room"})]}),S.jsxs("div",{style:De.actionCard,children:[S.jsx("div",{style:De.actionIcon,children:""}),S.jsx("h3",{style:De.actionTitle,children:"Active Rooms"}),S.jsx("p",{style:De.actionDescription,children:m.length===0?"No active rooms. Be the first to create one!":`${m.length} room${m.length!==1?"s":""} available`}),S.jsx("button",{onClick:u,style:De.refreshButton,disabled:s,children:s?"Refreshing...":" Refresh List"})]})]}),S.jsxs("div",{style:De.roomsSection,children:[S.jsxs("div",{style:De.sectionHeader,children:[S.jsxs("h3",{style:De.sectionTitle,children:["Available Rooms ",m.length>0&&`(${m.length})`]}),L&&S.jsxs("div",{style:De.joinErrorBanner,children:[L,S.jsx("button",{onClick:()=>H(""),style:De.dismissError,children:""})]})]}),o&&S.jsxs("div",{style:De.errorMessage,children:["Error: ",o,S.jsx("button",{onClick:u,style:De.retryButton,children:"Retry"})]}),s&&m.length===0?S.jsxs("div",{style:De.loading,children:[S.jsx("div",{style:De.spinner}),S.jsx("p",{children:"Loading rooms..."})]}):m.length===0?S.jsxs("div",{style:De.emptyState,children:[S.jsx("div",{style:De.emptyIcon,children:""}),S.jsx("h4",{style:De.emptyTitle,children:"No Active Rooms"}),S.jsx("p",{style:De.emptyText,children:'Be the first to create a room! Click "Create New Room" above.'})]}):S.jsx("div",{style:De.roomsGrid,children:m.map(Z=>{const se=K(Z);return S.jsxs("div",{style:{...De.roomCard,...se?De.roomCardFull:{},...T?De.roomCardDisabled:{}},children:[S.jsxs("div",{style:De.roomHeader,children:[S.jsxs("div",{style:De.roomHost,children:[Z.hostPhotoURL?S.jsx("img",{src:Z.hostPhotoURL,alt:Z.hostName,style:De.hostAvatar}):S.jsx("div",{style:De.defaultAvatar,children:Z.hostName.charAt(0)}),S.jsx("span",{style:De.hostName,children:Z.hostName})]}),S.jsxs("div",{style:De.roomCode,children:["#",Z.roomCode]})]}),S.jsx("h4",{style:De.roomName,children:Z.name}),S.jsxs("div",{style:De.roomDetails,children:[S.jsxs("div",{style:De.participantInfo,children:[S.jsxs("span",{style:{...De.participantCount,...se?De.participantCountFull:{}},children:[Z.currentParticipants,"/",Z.maxParticipants]}),S.jsx("span",{style:De.participantLabel,children:se?"FULL":"participants"})]}),S.jsx("div",{style:De.roomTime,children:W(Z.createdAt)})]}),se?S.jsx("div",{style:De.fullRoomBadge,children:S.jsx("span",{style:De.fullRoomText,children:"Room Full"})}):S.jsx("button",{style:De.joinRoomButton,onClick:()=>z(Z.id),disabled:T,children:T?"Joining...":"Join Room"})]},Z.id)})})]})]})})})]}),S.jsx(uO,{isOpen:g,onClose:()=>E(!1)})]})},De={quickActions:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(300px, 1fr))",gap:"var(--space-lg)",marginBottom:"var(--space-xl)"},actionCard:{backgroundColor:"var(--bg-card-light)",border:"1px solid var(--border-light)",borderRadius:"var(--radius-lg)",padding:"var(--space-lg)",transition:"all 0.3s ease"},actionIcon:{fontSize:"2.5rem",marginBottom:"var(--space-md)"},actionTitle:{fontSize:"1.3rem",fontWeight:"600",marginBottom:"var(--space-sm)",color:"var(--text-light)"},actionDescription:{color:"var(--text-gray)",marginBottom:"var(--space-md)",lineHeight:1.5},actionButton:{width:"100%",padding:"var(--space-md)",background:"linear-gradient(135deg, var(--primary-purple), var(--primary-indigo))",border:"none",borderRadius:"var(--radius-md)",color:"white",fontSize:"1rem",fontWeight:"600",cursor:"pointer",transition:"all 0.2s ease"},refreshButton:{width:"100%",padding:"var(--space-md)",backgroundColor:"rgba(255, 255, 255, 0.1)",border:"1px solid var(--border-light)",borderRadius:"var(--radius-md)",color:"var(--text-light)",fontSize:"1rem",fontWeight:"500",cursor:"pointer",transition:"all 0.2s ease"},roomsSection:{marginTop:"var(--space-xl)"},sectionHeader:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"var(--space-lg)"},sectionTitle:{fontSize:"1.5rem",fontWeight:"600",color:"var(--text-light)",margin:0},joinErrorBanner:{backgroundColor:"rgba(239, 68, 68, 0.2)",color:"#f87171",padding:"8px 16px",borderRadius:"var(--radius-md)",display:"flex",alignItems:"center",gap:"10px"},dismissError:{background:"none",border:"none",color:"#f87171",fontSize:"1.2rem",cursor:"pointer",padding:"0",width:"24px",height:"24px",display:"flex",alignItems:"center",justifyContent:"center",borderRadius:"50%"},errorMessage:{backgroundColor:"rgba(239, 68, 68, 0.2)",color:"#f87171",padding:"var(--space-md)",borderRadius:"var(--radius-md)",marginBottom:"var(--space-md)"},retryButton:{marginLeft:"10px",padding:"4px 12px",backgroundColor:"rgba(59, 130, 246, 0.2)",border:"1px solid rgba(59, 130, 246, 0.3)",borderRadius:"4px",color:"#93c5fd",cursor:"pointer",fontSize:"0.9rem"},loading:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:"var(--space-xl)",color:"var(--text-gray)"},spinner:{width:"40px",height:"40px",border:"3px solid rgba(255, 255, 255, 0.1)",borderTopColor:"var(--primary-purple)",borderRadius:"50%",animation:"spin 1s linear infinite",marginBottom:"var(--space-md)"},emptyState:{textAlign:"center",padding:"var(--space-xl)",color:"var(--text-gray)"},emptyIcon:{fontSize:"4rem",marginBottom:"var(--space-md)",opacity:.5},emptyTitle:{fontSize:"1.5rem",marginBottom:"var(--space-sm)",color:"var(--text-light)"},emptyText:{fontSize:"1rem",lineHeight:1.5},roomsGrid:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(300px, 1fr))",gap:"var(--space-md)"},roomCard:{backgroundColor:"var(--bg-card-light)",border:"1px solid var(--border-light)",borderRadius:"var(--radius-lg)",padding:"var(--space-lg)",transition:"all 0.3s ease"},roomCardFull:{borderColor:"rgba(239, 68, 68, 0.3)",backgroundColor:"rgba(30, 41, 59, 0.5)"},roomCardDisabled:{pointerEvents:"none",opacity:.5},roomHeader:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"var(--space-md)"},roomHost:{display:"flex",alignItems:"center",gap:"var(--space-sm)"},hostAvatar:{width:"32px",height:"32px",borderRadius:"50%",border:"2px solid var(--border-light)"},defaultAvatar:{width:"32px",height:"32px",borderRadius:"50%",backgroundColor:"var(--primary-purple)",display:"flex",alignItems:"center",justifyContent:"center",color:"white",fontWeight:"600",fontSize:"0.9rem"},hostName:{fontSize:"0.9rem",color:"var(--text-light)",fontWeight:"500"},roomCode:{backgroundColor:"rgba(124, 58, 237, 0.2)",color:"#a78bfa",padding:"var(--space-xs) var(--space-sm)",borderRadius:"var(--radius-sm)",fontSize:"0.8rem",fontWeight:"600",fontFamily:"monospace"},roomName:{fontSize:"1.2rem",fontWeight:"600",color:"var(--text-light)",marginBottom:"var(--space-md)"},roomDetails:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"var(--space-lg)"},participantInfo:{display:"flex",alignItems:"baseline",gap:"var(--space-xs)"},participantCount:{fontSize:"1.5rem",fontWeight:"700",color:"var(--text-light)"},participantCountFull:{color:"#f87171"},participantLabel:{fontSize:"0.9rem",color:"var(--text-gray)"},roomTime:{fontSize:"0.9rem",color:"var(--text-gray)"},fullRoomBadge:{width:"100%",padding:"12px",backgroundColor:"rgba(239, 68, 68, 0.1)",border:"1px solid rgba(239, 68, 68, 0.2)",borderRadius:"var(--radius-md)",textAlign:"center"},fullRoomText:{color:"#f87171",fontWeight:"600",fontSize:"0.9rem"},joinRoomButton:{width:"100%",padding:"var(--space-sm)",backgroundColor:"rgba(59, 130, 246, 0.2)",border:"1px solid rgba(59, 130, 246, 0.3)",borderRadius:"var(--radius-md)",color:"#93c5fd",fontSize:"0.9rem",fontWeight:"600",cursor:"pointer",transition:"all 0.2s ease"}},hO=()=>{const{user:r}=ya(),{currentRoom:e}=Du(),{peers:n,connectionStatus:s,activeConnections:o}=CS(),[u,f]=V.useState(null),[m,p]=V.useState(!1),g=async()=>{p(!0),f(null),console.log("=== CONNECTION DEBUG ===");const E={timestamp:new Date().toISOString(),user:{id:r?.uid,name:r?.displayName},room:{id:e?.id,name:e?.name},peers:Object.keys(n).length,connectionStatus:s,activeConnections:o};if(console.log("Basic Info:",E),e?.id&&r?.uid)try{const T=Pt(He,"rooms",e.id,"signaling",r.uid,"offers"),R=await Ln(T);E.offersCount=R.docs.length,E.offers=R.docs.map(L=>({id:L.id,from:L.data().from,timestamp:L.data().timestamp})),console.log("Offers found:",E.offersCount),console.log("Offers details:",E.offers)}catch(T){console.error("Error checking offers:",T),E.offersError=T.message}f(E),p(!1)};return S.jsxs("div",{style:{background:"rgba(0,0,0,0.9)",color:"white",padding:"15px",borderRadius:"8px",marginTop:"15px",fontSize:"12px",maxWidth:"400px"},children:[S.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"10px"},children:[S.jsx("strong",{style:{fontSize:"14px"},children:" Connection Debug"}),S.jsx("button",{onClick:g,disabled:m,style:{padding:"5px 10px",background:m?"#6b7280":"#8b5cf6",color:"white",border:"none",borderRadius:"4px",cursor:m?"not-allowed":"pointer",fontSize:"11px"},children:m?"Checking...":"Run Test"})]}),S.jsxs("div",{style:{marginBottom:"8px"},children:[S.jsx("span",{style:{color:"#93c5fd"},children:"Status:"})," ",s]}),S.jsxs("div",{style:{marginBottom:"8px"},children:[S.jsx("span",{style:{color:"#93c5fd"},children:"Active Peers:"})," ",o]}),S.jsxs("div",{style:{marginBottom:"8px"},children:[S.jsx("span",{style:{color:"#93c5fd"},children:"Room ID:"})," ",e?.id?.substring(0,10),"..."]}),S.jsxs("div",{style:{marginBottom:"8px"},children:[S.jsx("span",{style:{color:"#93c5fd"},children:"User ID:"})," ",r?.uid?.substring(0,10),"..."]}),u&&S.jsxs("div",{style:{marginTop:"10px",padding:"10px",background:"rgba(255,255,255,0.1)",borderRadius:"4px",fontSize:"11px"},children:[S.jsx("div",{style:{marginBottom:"5px"},children:S.jsx("strong",{children:" Debug Results:"})}),S.jsxs("div",{style:{marginBottom:"3px"},children:[S.jsx("span",{style:{color:"#86efac"},children:"Offers in my collection:"})," ",u.offersCount||0]}),u.offers&&u.offers.length>0&&S.jsxs("div",{style:{marginTop:"5px"},children:[S.jsx("div",{style:{color:"#fbbf24",marginBottom:"3px"},children:" Offers found:"}),u.offers.map((E,T)=>S.jsxs("div",{style:{marginLeft:"10px",marginBottom:"2px"},children:["From: ",E.from?.substring(0,10),"..."]},T))]}),u.offersError&&S.jsxs("div",{style:{color:"#f87171",marginTop:"5px"},children:["Error: ",u.offersError]}),S.jsxs("div",{style:{marginTop:"5px",fontSize:"10px",opacity:.7},children:["Last checked: ",new Date(u.timestamp).toLocaleTimeString()]})]}),S.jsxs("div",{style:{marginTop:"10px",fontSize:"10px",opacity:.7},children:[S.jsx("div",{children:"User A (Chad): iMKGFzfEF1esEzNogBHreM89MzH2"}),S.jsx("div",{children:"User B (Gautam): GuUKvuO8E0goWwF89MK46MLiImt1"})]})]})},fO=({stream:r,userData:e,connectionState:n})=>{const s=V.useRef(null),[o,u]=V.useState(!1),[f,m]=V.useState(!1);V.useEffect(()=>{if(s.current&&r){s.current.srcObject=r;const g=r.getVideoTracks(),E=r.getAudioTracks();u(g.length>0&&g[0].enabled),m(E.length>0&&E[0].enabled);const T=()=>{u(g.length>0&&g[0].enabled),m(E.length>0&&E[0].enabled)};return g[0]&&(g[0].addEventListener("mute",T),g[0].addEventListener("unmute",T)),E[0]&&(E[0].addEventListener("mute",T),E[0].addEventListener("unmute",T)),()=>{g[0]&&(g[0].removeEventListener("mute",T),g[0].removeEventListener("unmute",T)),E[0]&&(E[0].removeEventListener("mute",T),E[0].removeEventListener("unmute",T))}}},[r]);const p=()=>{switch(n){case"connected":return"#10b981";case"connecting":return"#f59e0b";case"disconnected":return"#ef4444";case"failed":return"#dc2626";default:return"#6b7280"}};return S.jsxs("div",{style:Pn.container,children:[S.jsxs("div",{style:Pn.videoWrapper,children:[o?S.jsx("video",{ref:s,autoPlay:!0,playsInline:!0,style:Pn.video,muted:!1}):S.jsxs("div",{style:Pn.noVideoPlaceholder,children:[S.jsx("div",{style:Pn.avatar,children:e?.name?.charAt(0)||"U"}),S.jsx("p",{style:Pn.noVideoText,children:"No video"})]}),S.jsxs("div",{style:Pn.statusOverlay,children:[S.jsxs("div",{style:Pn.statusIcons,children:[S.jsx("div",{style:{...Pn.statusIcon,backgroundColor:o?"rgba(34, 197, 94, 0.7)":"rgba(239, 68, 68, 0.7)"},children:o?"":""}),S.jsx("div",{style:{...Pn.statusIcon,backgroundColor:f?"rgba(34, 197, 94, 0.7)":"rgba(239, 68, 68, 0.7)"},children:f?"":""})]}),S.jsx("div",{style:{...Pn.connectionStatus,backgroundColor:p()},children:n||"unknown"})]}),S.jsx("div",{style:Pn.nameLabel,children:e?.name||"Remote User"})]}),!o&&f&&S.jsx("div",{style:Pn.audioOnlyIndicator,children:S.jsx("span",{children:" Audio Only"})})]})},Pn={container:{width:"100%",height:"100%",position:"relative",backgroundColor:"#000",borderRadius:"var(--radius-lg)",overflow:"hidden"},videoWrapper:{width:"100%",height:"100%",position:"relative"},video:{width:"100%",height:"100%",objectFit:"cover",backgroundColor:"#000"},noVideoPlaceholder:{width:"100%",height:"100%",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",backgroundColor:"var(--bg-card)",color:"var(--text-gray)"},avatar:{width:"80px",height:"80px",borderRadius:"50%",backgroundColor:"var(--primary-purple)",display:"flex",alignItems:"center",justifyContent:"center",color:"white",fontSize:"2rem",fontWeight:"600",marginBottom:"10px"},noVideoText:{fontSize:"0.9rem",opacity:.7},statusOverlay:{position:"absolute",top:"10px",left:"10px",right:"10px",display:"flex",justifyContent:"space-between",alignItems:"flex-start",zIndex:10},statusIcons:{display:"flex",gap:"5px"},statusIcon:{padding:"4px 8px",borderRadius:"12px",fontSize:"0.8rem",color:"white",backdropFilter:"blur(10px)"},connectionStatus:{padding:"4px 8px",borderRadius:"12px",fontSize:"0.7rem",color:"white",fontWeight:"600",textTransform:"uppercase",backdropFilter:"blur(10px)",backgroundColor:"rgba(0, 0, 0, 0.5)"},nameLabel:{position:"absolute",bottom:"10px",left:"10px",padding:"4px 8px",backgroundColor:"rgba(0, 0, 0, 0.7)",color:"white",borderRadius:"var(--radius-md)",fontSize:"0.8rem",fontWeight:"500"},audioOnlyIndicator:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",padding:"8px 16px",backgroundColor:"rgba(0, 0, 0, 0.7)",color:"white",borderRadius:"20px",fontSize:"0.9rem",display:"flex",alignItems:"center",gap:"8px"}},dO=()=>{const{localStream:r,isMicOn:e}=Tf(),n=V.useRef(null),s=V.useRef(null),o=V.useRef(null),u=V.useRef(null),f=V.useRef(null),[m,p]=V.useState(!1),[g,E]=V.useState(0);V.useEffect(()=>{if(!r||!e){s.current&&(cancelAnimationFrame(s.current),s.current=null),o.current&&o.current.state!=="closed"&&o.current.close(),p(!1),E(0);return}const G=r.getAudioTracks()[0];if(!G||!G.enabled){p(!1),E(0);return}return(async()=>{try{const W=window.AudioContext||window.webkitAudioContext;o.current||(o.current=new W),u.current=o.current.createAnalyser(),u.current.fftSize=256,u.current.minDecibels=-90,u.current.maxDecibels=-10,u.current.smoothingTimeConstant=.85,f.current=o.current.createMediaStreamSource(r),f.current.connect(u.current),p(!0),T()}catch(W){console.error("Error setting up audio visualizer:",W),p(!1)}})(),()=>{s.current&&cancelAnimationFrame(s.current),f.current&&f.current.disconnect(),u.current&&u.current.disconnect()}},[r,e]);const T=()=>{if(!n.current||!u.current)return;const G=n.current,z=G.getContext("2d"),W=u.current.frequencyBinCount,K=new Uint8Array(W),Z=()=>{s.current=requestAnimationFrame(Z),u.current.getByteFrequencyData(K);let se=0;for(let A=0;A<K.length;A++)se+=K[A];const le=se/K.length;E(le),z.clearRect(0,0,G.width,G.height),z.fillStyle="rgba(0, 0, 0, 0.3)",z.fillRect(0,0,G.width,G.height);const pe=G.width/W*2.5;let D,x=0;for(let A=0;A<W;A++){D=K[A]/2;const N=z.createLinearGradient(0,G.height,0,G.height-D);D<30?(N.addColorStop(0,"#10b981"),N.addColorStop(1,"#34d399")):D<60?(N.addColorStop(0,"#f59e0b"),N.addColorStop(1,"#fbbf24")):(N.addColorStop(0,"#ef4444"),N.addColorStop(1,"#f87171")),z.fillStyle=N,z.fillRect(x,G.height-D,pe,D),x+=pe+1}};Z()},R=Math.min(Math.round(g/128*100),100);let L="low",H="#10b981";return R>30&&(L="medium",H="#f59e0b"),R>60&&(L="high",H="#ef4444"),S.jsxs("div",{style:Vt.container,children:[S.jsxs("div",{style:Vt.header,children:[S.jsxs("div",{style:Vt.title,children:[S.jsx("span",{style:Vt.icon,children:""}),"Microphone Activity"]}),S.jsxs("div",{style:Vt.status,children:[S.jsx("div",{style:{...Vt.statusDot,backgroundColor:e?"#10b981":"#ef4444"}}),S.jsx("span",{children:e?"Active":"Muted"})]})]}),S.jsxs("div",{style:Vt.visualizerContainer,children:[S.jsx("canvas",{ref:n,width:300,height:80,style:Vt.canvas}),S.jsxs("div",{style:Vt.volumeInfo,children:[S.jsx("div",{style:Vt.volumeBarContainer,children:S.jsx("div",{style:{...Vt.volumeBar,width:`${R}%`,backgroundColor:H}})}),S.jsxs("div",{style:Vt.volumeText,children:[S.jsx("span",{style:{color:H,fontWeight:"600"},children:L.toUpperCase()}),S.jsxs("span",{children:[R,"%"]})]})]})]}),S.jsx("div",{style:Vt.instructions,children:!m&&e?S.jsxs("div",{style:Vt.warning,children:[S.jsx("span",{style:Vt.warningIcon,children:""}),'Speak to see audio activity. Try saying "Testing, 1, 2, 3"']}):e?S.jsxs("div",{style:Vt.active,children:[S.jsx("span",{style:Vt.activeIcon,children:""}),"Microphone is working! Volume: ",L]}):S.jsxs("div",{style:Vt.muted,children:[S.jsx("span",{style:Vt.mutedIcon,children:""}),"Microphone is muted"]})}),S.jsx("button",{onClick:()=>{if(e&&o.current){const G=o.current.createOscillator(),z=o.current.createGain();G.connect(z),z.connect(o.current.destination),G.frequency.value=440,G.type="sine",z.gain.setValueAtTime(0,o.current.currentTime),z.gain.linearRampToValueAtTime(.1,o.current.currentTime+.1),z.gain.linearRampToValueAtTime(0,o.current.currentTime+.5),G.start(o.current.currentTime),G.stop(o.current.currentTime+.5)}},style:Vt.testButton,disabled:!e,children:" Test Sound"})]})},Vt={container:{backgroundColor:"rgba(255, 255, 255, 0.05)",borderRadius:"var(--radius-lg)",padding:"15px",border:"1px solid var(--border-light)",marginTop:"20px"},header:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"15px"},title:{display:"flex",alignItems:"center",gap:"8px",fontWeight:"600",color:"var(--text-light)",fontSize:"1rem"},icon:{fontSize:"1.2rem"},status:{display:"flex",alignItems:"center",gap:"6px",fontSize:"0.85rem",color:"var(--text-gray)"},statusDot:{width:"8px",height:"8px",borderRadius:"50%"},visualizerContainer:{position:"relative",marginBottom:"15px"},canvas:{width:"100%",height:"80px",borderRadius:"var(--radius-md)",backgroundColor:"rgba(0, 0, 0, 0.5)"},volumeInfo:{marginTop:"10px"},volumeBarContainer:{width:"100%",height:"6px",backgroundColor:"rgba(255, 255, 255, 0.1)",borderRadius:"3px",overflow:"hidden",marginBottom:"5px"},volumeBar:{height:"100%",borderRadius:"3px",transition:"width 0.2s ease"},volumeText:{display:"flex",justifyContent:"space-between",fontSize:"0.8rem",color:"var(--text-gray)"},instructions:{fontSize:"0.85rem",textAlign:"center",marginBottom:"15px",padding:"10px",borderRadius:"var(--radius-md)"},warning:{color:"#f59e0b",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px"},warningIcon:{fontSize:"1rem"},muted:{color:"#ef4444",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px"},mutedIcon:{fontSize:"1rem"},active:{color:"#10b981",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px"},activeIcon:{fontSize:"1rem"},testButton:{width:"100%",padding:"10px",backgroundColor:"rgba(59, 130, 246, 0.2)",border:"1px solid rgba(59, 130, 246, 0.3)",borderRadius:"var(--radius-md)",color:"#93c5fd",fontSize:"0.9rem",fontWeight:"500",cursor:"pointer",transition:"all 0.2s ease"}},mO=()=>{const{localStream:r,isCameraOn:e,isMicOn:n,isLoading:s,error:o,initializeMedia:u}=Tf(),f=V.useRef(null);return V.useEffect(()=>{f.current&&r&&(f.current.srcObject=r)},[r]),V.useEffect(()=>{(async()=>r||await u())()},[]),s?S.jsxs("div",{style:_t.loadingContainer,children:[S.jsx("div",{style:_t.spinner}),S.jsx("p",{children:"Loading camera and microphone..."})]}):o?S.jsxs("div",{style:_t.errorContainer,children:[S.jsx("div",{style:_t.errorIcon,children:""}),S.jsx("h4",{children:"Camera/Microphone Error"}),S.jsx("p",{style:_t.errorText,children:o}),S.jsx("button",{onClick:u,style:_t.retryButton,children:"Try Again"})]}):S.jsxs("div",{style:_t.container,children:[S.jsxs("div",{style:_t.videoWrapper,children:[e?S.jsx("video",{ref:f,autoPlay:!0,playsInline:!0,muted:!0,style:_t.video}):S.jsxs("div",{style:_t.cameraOffPlaceholder,children:[S.jsx("div",{style:_t.cameraOffIcon,children:""}),S.jsx("p",{children:"Camera is off"})]}),S.jsx("div",{style:_t.statusOverlay,children:S.jsxs("div",{style:_t.statusIcons,children:[S.jsxs("div",{style:{..._t.statusIcon,...e?_t.statusOn:_t.statusOff},children:[e?"":"",S.jsx("span",{style:_t.statusText,children:e?"Camera On":"Camera Off"})]}),S.jsxs("div",{style:{..._t.statusIcon,...n?_t.statusOn:_t.statusOff},children:[n?"":"",S.jsx("span",{style:_t.statusText,children:n?"Mic On":"Mic Muted"})]})]})}),S.jsx("div",{style:_t.nameLabel,children:"You (Preview)"})]}),S.jsx(dO,{})]})},_t={container:{width:"100%",height:"100%",position:"relative",display:"flex",flexDirection:"column",gap:"15px"},loadingContainer:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:"100%",color:"var(--text-gray)"},spinner:{width:"40px",height:"40px",border:"3px solid rgba(255, 255, 255, 0.1)",borderTopColor:"var(--primary-purple)",borderRadius:"50%",animation:"spin 1s linear infinite",marginBottom:"15px"},errorContainer:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:"100%",textAlign:"center",padding:"20px",color:"var(--text-light)"},errorIcon:{fontSize:"3rem",marginBottom:"15px",opacity:.7},errorText:{color:"var(--text-gray)",marginBottom:"20px",fontSize:"0.9rem"},retryButton:{padding:"10px 20px",backgroundColor:"var(--primary-purple)",border:"none",borderRadius:"var(--radius-md)",color:"white",fontWeight:"500",cursor:"pointer",transition:"all 0.2s ease"},videoWrapper:{position:"relative",width:"100%",flex:1,backgroundColor:"#000",borderRadius:"var(--radius-lg)",overflow:"hidden",minHeight:"300px"},video:{width:"100%",height:"100%",objectFit:"cover",transform:"scaleX(-1)",backgroundColor:"#000"},cameraOffPlaceholder:{width:"100%",height:"100%",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",backgroundColor:"var(--bg-card)",color:"var(--text-gray)"},cameraOffIcon:{fontSize:"4rem",marginBottom:"15px",opacity:.5},statusOverlay:{position:"absolute",top:"15px",left:"15px",right:"15px",zIndex:10},statusIcons:{display:"flex",gap:"10px",flexWrap:"wrap"},statusIcon:{display:"flex",alignItems:"center",gap:"6px",padding:"6px 12px",borderRadius:"20px",fontSize:"0.9rem",fontWeight:"500",backdropFilter:"blur(10px)",backgroundColor:"rgba(0, 0, 0, 0.5)",color:"white"},statusOn:{backgroundColor:"rgba(34, 197, 94, 0.7)"},statusOff:{backgroundColor:"rgba(239, 68, 68, 0.7)"},statusText:{fontSize:"0.8rem"},nameLabel:{position:"absolute",bottom:"15px",left:"15px",padding:"6px 12px",backgroundColor:"rgba(0, 0, 0, 0.7)",color:"white",borderRadius:"var(--radius-md)",fontSize:"0.9rem",fontWeight:"500"}},pO=()=>{const{roomId:r}=WA(),e=Io(),{user:n}=ya(),{setCurrentRoom:s}=Du(),[o,u]=V.useState(null),[f,m]=V.useState([]),[p,g]=V.useState(!0),[E,T]=V.useState(""),[R,L]=V.useState(!1),{peers:H,connectionStatus:G,activeConnections:z,initializeUserSignaling:W,connectToUser:K}=CS(),{localStream:Z,isCameraOn:se,isMicOn:le,toggleCamera:pe,toggleMicrophone:D,isLoading:x,error:A}=Tf(),N=async()=>{console.clear(),console.log(" === COMPLETE FIRESTORE DEBUG === "),console.log("Timestamp:",new Date().toISOString()),console.log("Current user:",n?.uid),console.log("Room ID:",r);try{console.log(`
 === CURRENT ROOM DATA ===`);const X=gn(He,"rooms",r),ce=await ys(X);if(!ce.exists()){console.log(" Room not found in Firestore");return}const de=ce.data();console.log(" Room Document:",{id:r,name:de.name,hostId:de.hostId,hostName:de.hostName,roomCode:de.roomCode,currentParticipants:de.currentParticipants,maxParticipants:de.maxParticipants,status:de.status,isActive:de.isActive,createdAt:de.createdAt?.toDate?.()||de.createdAt,lastActivity:de.lastActivity?.toDate?.()||de.lastActivity}),console.log(`
 === PARTICIPANTS ===`);const Pe=Pt(He,"rooms",r,"participants"),k=await Ln(Pe);console.log(`Total participants in DB: ${k.docs.length}`),console.log(`Room shows: ${de.currentParticipants}/${de.maxParticipants}`),k.docs.forEach(ve=>{const _e=ve.data();console.log(`- ${_e.name} (${ve.id})`,{isHost:_e.isHost,isActive:_e.isActive,joinedAt:_e.joinedAt?.toDate?.()||_e.joinedAt,email:_e.email,isCurrentUser:ve.id===n?.uid})});const ne=k.docs.some(ve=>ve.id===n?.uid);console.log(`
 Current user in participants? ${ne?"YES":"NO"}`),console.log(`
 === SIGNALING DATA ===`);const ue=Pt(He,"rooms",r,"signaling"),fe=await Ln(ue);console.log(`Signaling users: ${fe.docs.length}`);for(const ve of fe.docs){const _e=ve.id,Se=ve.data();console.log(`
 User: ${_e} (${Se.userName||"No name"})`),console.log("   Signaling Document:",{isOnline:Se.isOnline,readyForConnection:Se.readyForConnection,status:Se.status,lastSeen:Se.lastSeen?.toDate?.()||Se.lastSeen});const et=Pt(He,"rooms",r,"signaling",_e,"offers"),Qe=await Ln(et);console.log(`   Offers TO this user: ${Qe.docs.length}`),Qe.docs.forEach(Ht=>{const hn=Ht.data();console.log(`     From: ${hn.from} (${hn.fromName}) to: ${hn.to}`,{type:hn.type,timestamp:hn.timestamp?.toDate?.()||hn.timestamp,docId:Ht.id})});const vn=Pt(He,"rooms",r,"signaling",_e,"answers"),an=await Ln(vn);console.log(`   Answers TO this user: ${an.docs.length}`),an.docs.forEach(Ht=>{const hn=Ht.data();console.log(`     From: ${hn.from} to: ${hn.to}`)});const Wi=Pt(He,"rooms",r,"signaling",_e,"candidates"),qn=await Ln(Wi);console.log(`   ICE Candidates TO this user: ${qn.docs.length}`)}console.log(`
 === SUMMARY ===`),console.log(`Room: ${de.name} (${r})`),console.log(`Host: ${de.hostName} (${de.hostId})`),console.log(`Capacity: ${de.currentParticipants}/${de.maxParticipants}`),console.log(`Current user ${n?.uid} is ${ne?"IN":"NOT IN"} room`),console.log(`UI shows error: "${E}"`),console.log(`UI loading state: ${p}`)}catch(X){console.error(" Debug error:",X)}};V.useEffect(()=>{if(!r||!n)return;console.log(" Setting up real-time listeners for room:",r);const X=rO(r,de=>{console.log(" Room real-time update:",de),de?(u(de),s(de),E&&de.isActive&&de.currentParticipants<=de.maxParticipants&&T("")):T("Room was deleted")}),ce=sO(r,de=>{console.log(" Participants real-time update:",de),m(de);const Pe=de.some(k=>k.id===n.uid);console.log("Current user in room?",Pe),Pe&&E.includes("Room is full")&&(console.log(' User is in room, clearing "room is full" error'),T(""))});return()=>{console.log(" Cleaning up real-time listeners"),X(),ce()}},[r,n,E,s]);const C=V.useCallback(async()=>{if(!(!n||!r||R)){g(!0),T(""),L(!0),console.log("=== LOAD ROOM START ==="),console.log("User:",n.uid,n.displayName),console.log("Room ID:",r);try{const X=await Rh(r);if(console.log("Room data from service:",X),!X){T("Room not found"),g(!1);return}if(!X.isActive||X.status==="ended"){T("Room is no longer active"),g(!1);return}const ce=await dh(r);console.log("Participants from service:",ce),console.log("Participant IDs:",ce.map(Se=>Se.id));const de=ce.some(Se=>Se.id===n.uid);if(console.log("Is user already in room?",de),u(X),m(ce),s(X),de){console.log(" User already in room, loading complete"),g(!1),setTimeout(()=>{W?.()},1e3);return}const Pe=ce.length>=X.maxParticipants;console.log("Is room full?",Pe,`(${ce.length}/${X.maxParticipants})`);const k=gn(He,"rooms",r),ue=(await ys(k)).data(),fe=Pt(He,"rooms",r,"participants"),ve=await Ln(fe),_e=ve.docs.length;if(console.log("Fresh check - Room capacity:",ue?.currentParticipants,"/",ue?.maxParticipants),console.log("Fresh check - Actual participants:",_e),console.log("Fresh check - User in fresh participants?",ve.docs.some(Se=>Se.id===n.uid)),_e>=X.maxParticipants){console.log(" Room is actually full, cannot join"),T(`Room is full (${_e}/${X.maxParticipants} participants)`),g(!1);return}console.log(" Attempting to join room...");try{const Se=await nO(r,n);console.log("Join result:",Se),await new Promise(an=>setTimeout(an,1e3));const et=await Rh(r),Qe=await dh(r);console.log("After join - Room:",et),console.log("After join - Participants:",Qe),u(et),m(Qe),s(et);const vn=Qe.some(an=>an.id===n.uid);if(console.log("User now in room?",vn),vn)console.log(" Successfully joined room, initializing signaling..."),setTimeout(()=>{W?.()},1500);else{const an=await Ln(Pt(He,"rooms",r,"participants"));if(an.docs.some(qn=>qn.id===n.uid)){console.log(" Race condition resolved - user IS in room");const qn=an.docs.map(Ht=>({id:Ht.id,...Ht.data()}));m(qn)}else console.log(" User still not in room after join attempt"),T("Failed to join room. Please try again.")}}catch(Se){console.error("Join error:",Se);const et=await dh(r);et.some(vn=>vn.id===n.uid)?(console.log(" User actually joined despite error (race condition)"),m(et),T(""),setTimeout(()=>{W?.()},1500)):Se.message.includes("full")?T("Room is now full. Please try another room."):T(`Failed to join: ${Se.message}`)}}catch(X){console.error("Error in loadRoom:",X),T(`Failed to load room: ${X.message}`)}finally{g(!1),console.log("=== LOAD ROOM END ===")}}},[n,r,R,s,W]);V.useEffect(()=>{if(!n){e("/");return}C()},[n,e,C]);const M=()=>{e("/dashboard")},I=()=>{o?.roomCode&&(navigator.clipboard.writeText(o.roomCode),alert(`Room code ${o.roomCode} copied to clipboard!`))},Ee=()=>{const X=`${window.location.origin}/room/${r}`;navigator.clipboard.writeText(X),alert(`Invite link copied to clipboard!

${X}`)},at=async()=>{console.log(" Manually refreshing room data..."),g(!0);try{const X=await Rh(r),ce=await dh(r);u(X),m(ce),s(X),T(""),console.log(" Room data refreshed")}catch(X){console.error("Error refreshing room:",X)}finally{g(!1)}};if(p)return S.jsxs("div",{style:ae.loadingContainer,children:[S.jsx("div",{style:ae.spinner}),S.jsx("p",{style:ae.loadingText,children:"Loading room..."}),S.jsx("button",{onClick:at,style:ae.refreshButton,children:"Force Refresh"})]});const $=f.some(X=>X.id===n?.uid);return E&&E.includes("full")&&!$?S.jsx("div",{style:ae.fullRoomContainer,children:S.jsxs("div",{style:ae.fullRoomContent,children:[S.jsx("div",{style:ae.fullRoomIcon,children:""}),S.jsx("h2",{style:ae.fullRoomTitle,children:"Room Full"}),S.jsxs("p",{style:ae.fullRoomMessage,children:["This room has reached its maximum capacity of ",o?.maxParticipants," participants."]}),S.jsxs("div",{style:ae.fullRoomDetails,children:[S.jsxs("p",{children:[S.jsx("strong",{children:"Room:"})," ",o?.name]}),S.jsxs("p",{children:[S.jsx("strong",{children:"Host:"})," ",o?.hostName]}),S.jsxs("p",{children:[S.jsx("strong",{children:"Current Participants:"})," ",o?.currentParticipants,"/",o?.maxParticipants]}),S.jsxs("p",{children:[S.jsx("strong",{children:"You are in room?"})," ",$?"YES":"NO"]})]}),S.jsxs("div",{style:ae.debugInfo,children:[S.jsx("button",{onClick:N,style:ae.debugButton,children:" Debug Firestore"}),S.jsx("button",{onClick:at,style:ae.debugButton,children:" Refresh Data"})]}),S.jsxs("div",{style:ae.fullRoomActions,children:[S.jsx("button",{onClick:()=>e("/dashboard"),style:ae.fullRoomButton,children:"Back to Dashboard"}),!$&&S.jsx("button",{onClick:async()=>{console.log(" Retrying join..."),L(!1),await C()},style:ae.fullRoomButtonSecondary,children:"Try Again"})]})]})}):E&&!E.includes("full")?S.jsxs("div",{style:ae.errorContainer,children:[S.jsx("div",{style:ae.errorIcon,children:""}),S.jsx("h2",{style:ae.errorTitle,children:"Room Unavailable"}),S.jsx("p",{style:ae.errorMessage,children:E}),S.jsxs("div",{style:ae.errorActions,children:[S.jsx("button",{onClick:()=>e("/dashboard"),style:ae.backButton,children:"Back to Dashboard"}),S.jsx("button",{onClick:at,style:ae.refreshButton,children:"Try Again"})]})]}):o?S.jsxs("div",{style:ae.container,children:[S.jsxs("header",{style:ae.header,children:[S.jsxs("div",{style:ae.headerLeft,children:[S.jsx("button",{onClick:()=>e("/dashboard"),style:ae.backButton,children:" Back"}),S.jsxs("div",{style:ae.roomInfo,children:[S.jsx("h1",{style:ae.roomName,children:o.name}),S.jsxs("div",{style:ae.roomMeta,children:[S.jsxs("span",{style:ae.roomCode,onClick:I,title:"Click to copy",children:["#",o.roomCode]}),S.jsxs("span",{style:ae.participantCount,children:[o.currentParticipants,"/",o.maxParticipants," participants"]}),S.jsx("span",{style:ae.roomStatus,"data-status":o.status,children:o.status}),!$&&S.jsx("span",{style:ae.warningBadge,children:"Not in room"})]})]})]}),S.jsx("div",{style:ae.headerRight,children:S.jsx("button",{onClick:M,style:ae.leaveButton,children:"Leave Room"})})]}),S.jsxs("main",{style:ae.main,children:[S.jsxs("div",{style:ae.videoSection,children:[S.jsx("div",{style:ae.videoContainer,children:S.jsx(mO,{})}),Object.entries(H).map(([X,ce])=>S.jsx("div",{style:ae.videoContainer,children:S.jsx(fO,{stream:ce.stream,userData:ce.userData,connectionState:ce.connectionState})},X)),Object.keys(H).length===0&&G==="connected"&&S.jsxs("div",{style:ae.noConnectionsMessage,children:[S.jsx("div",{style:ae.noConnectionsIcon,children:""}),S.jsx("p",{style:ae.noConnectionsText,children:"Connected to room"}),S.jsx("p",{style:ae.noConnectionsSubtext,children:"Waiting for other participants to join..."}),S.jsxs("p",{style:ae.inviteHint,children:["Share room code: ",S.jsxs("strong",{children:["#",o?.roomCode]})]})]}),S.jsxs("div",{style:ae.connectionStatus,children:[S.jsx("div",{style:{...ae.statusIndicator,backgroundColor:G==="connected"?"#10b981":G==="connecting"?"#f59e0b":"#ef4444"},children:G.toUpperCase()}),S.jsxs("div",{style:ae.statusText,children:[z," connection",z!==1?"s":""," active"]})]})]}),S.jsxs("aside",{style:ae.sidebar,children:[S.jsxs("div",{style:ae.sidebarHeader,children:[S.jsx("h3",{style:ae.sidebarTitle,children:"Participants"}),S.jsx("span",{style:ae.participantBadge,children:f.length}),S.jsx("button",{onClick:at,style:ae.refreshSmallButton,title:"Refresh participants",children:""})]}),S.jsx("div",{style:ae.participantsList,children:f.map(X=>S.jsxs("div",{style:{...ae.participantItem,...X.isHost?ae.hostItem:{},...X.id===n?.uid?ae.currentUserItem:{}},children:[S.jsxs("div",{style:ae.participantAvatar,children:[X.photoURL?S.jsx("img",{src:X.photoURL,alt:X.name,style:ae.avatarImage}):S.jsx("div",{style:ae.defaultAvatar,children:X.name.charAt(0)}),X.isHost&&S.jsx("div",{style:ae.hostBadge,title:"Host",children:""})]}),S.jsxs("div",{style:ae.participantInfo,children:[S.jsxs("div",{style:ae.participantName,children:[X.name,X.id===n?.uid&&S.jsx("span",{style:ae.youBadge,children:" (You)"})]}),S.jsxs("div",{style:ae.participantStatus,children:[S.jsx("span",{style:ae.statusDot}),X.isActive?"Online":"Offline"]})]}),o.hostId===n?.uid&&!X.isHost&&S.jsx("button",{style:ae.kickButton,title:"Kick participant",onClick:()=>alert(`Kick ${X.name} - Coming soon`),children:""})]},X.id))}),S.jsxs("div",{style:ae.controlsSection,children:[S.jsx("h4",{style:ae.controlsTitle,children:"Room Controls"}),S.jsxs("div",{style:ae.controlsGrid,children:[S.jsx("button",{style:{...ae.controlButton,...le?ae.controlButtonActive:ae.controlButtonInactive},onClick:D,disabled:x,children:le?" Mic On":" Mic Muted"}),S.jsx("button",{style:{...ae.controlButton,...se?ae.controlButtonActive:ae.controlButtonInactive},onClick:pe,disabled:x,children:se?" Camera On":" Camera Off"}),S.jsx("button",{style:ae.controlButton,onClick:Ee,children:" Invite"}),S.jsx("button",{style:ae.controlButton,onClick:()=>navigator.clipboard.writeText(`#${o.roomCode}`),children:" Copy Code"}),o.hostId===n?.uid&&S.jsx("button",{style:ae.controlButtonDanger,onClick:()=>alert("End Room - Coming soon"),children:" End Room"})]}),A&&S.jsxs("div",{style:ae.mediaError,children:[" ",A]}),S.jsxs("div",{style:ae.peersStatus,children:[S.jsxs("div",{style:ae.peersStatusHeader,children:[S.jsx("span",{children:"Active Connections:"}),S.jsx("span",{style:{color:z>0?"#10b981":"#f59e0b",fontWeight:"600"},children:z})]}),Object.entries(H).map(([X,ce])=>S.jsxs("div",{style:ae.peerItem,children:[S.jsx("span",{style:ae.peerName,children:ce.userData?.name||"Peer"}),S.jsx("span",{style:{...ae.peerStatus,color:ce.connectionState==="connected"?"#10b981":ce.connectionState==="connecting"?"#f59e0b":"#ef4444"},children:ce.connectionState||"unknown"})]},X))]})]})]})]}),S.jsxs("details",{style:ae.debugPanel,children:[S.jsx("summary",{style:ae.debugSummary,children:" Debug Panel"}),S.jsx(hO,{}),S.jsxs("div",{style:ae.debugActions,children:[S.jsx("button",{onClick:N,style:ae.debugButton,children:" Debug Firestore"}),S.jsx("button",{onClick:iO,style:ae.debugButton,children:"Check Room State"}),S.jsx("button",{onClick:()=>console.log("Peers:",H),style:ae.debugButton,children:"Log Peers"}),S.jsx("button",{onClick:at,style:ae.debugButton,children:"Refresh Data"}),o?.hostId===n?.uid&&f.length>1&&S.jsx("button",{onClick:()=>{const X=f.find(ce=>ce.id!==n?.uid);X&&(console.log("Manual connect to:",X),K(X.id,{name:X.name,photoURL:X.photoURL}))},style:ae.debugButton,children:" Manual Connect"})]})]}),S.jsx("footer",{style:ae.footer,children:S.jsxs("div",{style:ae.footerContent,children:[S.jsxs("div",{style:ae.footerInfo,children:[S.jsxs("span",{children:["Room created by ",o.hostName]}),S.jsx("span",{style:ae.footerSeparator,children:""}),S.jsxs("span",{children:["You are ",o.hostId===n?.uid?"the host":"a participant"]}),S.jsx("span",{style:ae.footerSeparator,children:""}),S.jsx("span",{style:{color:G==="connected"?"#10b981":G==="connecting"?"#f59e0b":"#ef4444"},children:G.toUpperCase()}),!$&&S.jsxs(S.Fragment,{children:[S.jsx("span",{style:ae.footerSeparator,children:""}),S.jsx("span",{style:{color:"#ef4444"},children:"NOT IN ROOM"})]})]}),S.jsxs("div",{style:ae.footerActions,children:[S.jsx("button",{style:ae.footerButton,onClick:Ee,children:"Copy Invite Link"}),S.jsx("button",{style:ae.footerButton,onClick:()=>alert("Settings - Coming soon"),children:"Settings"})]})]})})]}):S.jsxs("div",{style:ae.errorContainer,children:[S.jsx("h2",{style:ae.errorTitle,children:"Room Not Found"}),S.jsx("button",{onClick:()=>e("/dashboard"),style:ae.backButton,children:"Back to Dashboard"})]})},ae={container:{minHeight:"100vh",backgroundColor:"var(--bg-dark)",color:"var(--text-light)",display:"flex",flexDirection:"column"},loadingContainer:{minHeight:"100vh",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",backgroundColor:"var(--bg-dark)",gap:"20px"},spinner:{width:"50px",height:"50px",border:"4px solid rgba(255, 255, 255, 0.1)",borderTopColor:"var(--primary-purple)",borderRadius:"50%",animation:"spin 1s linear infinite",marginBottom:"10px"},loadingText:{color:"var(--text-gray)",fontSize:"1.1rem"},refreshButton:{padding:"10px 20px",backgroundColor:"rgba(59, 130, 246, 0.2)",border:"1px solid rgba(59, 130, 246, 0.3)",borderRadius:"var(--radius-md)",color:"#93c5fd",cursor:"pointer",fontSize:"0.9rem"},errorContainer:{minHeight:"100vh",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",backgroundColor:"var(--bg-dark)",textAlign:"center",padding:"20px",gap:"20px"},errorIcon:{fontSize:"4rem",marginBottom:"20px"},errorTitle:{fontSize:"2rem",marginBottom:"10px",color:"var(--text-light)"},errorMessage:{color:"var(--text-gray)",marginBottom:"30px",fontSize:"1.1rem",maxWidth:"400px"},errorActions:{display:"flex",gap:"15px"},backButton:{padding:"10px 20px",backgroundColor:"var(--primary-purple)",border:"none",borderRadius:"var(--radius-md)",color:"white",cursor:"pointer",fontSize:"1rem",transition:"all 0.2s ease"},fullRoomContainer:{minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"var(--bg-dark)",padding:"20px"},fullRoomContent:{background:"var(--bg-card)",padding:"40px",borderRadius:"var(--radius-xl)",border:"1px solid var(--border-medium)",textAlign:"center",maxWidth:"500px"},fullRoomIcon:{fontSize:"4rem",marginBottom:"20px"},fullRoomTitle:{fontSize:"2rem",marginBottom:"15px",color:"var(--text-light)"},fullRoomMessage:{color:"var(--text-gray)",marginBottom:"25px",fontSize:"1.1rem"},fullRoomDetails:{textAlign:"left",marginBottom:"30px",padding:"20px",backgroundColor:"rgba(255, 255, 255, 0.05)",borderRadius:"var(--radius-md)",fontSize:"0.9rem"},debugInfo:{display:"flex",gap:"10px",justifyContent:"center",marginBottom:"20px"},debugButton:{padding:"8px 16px",backgroundColor:"rgba(255, 255, 255, 0.1)",border:"1px solid var(--border-light)",borderRadius:"var(--radius-md)",color:"var(--text-light)",cursor:"pointer",fontSize:"0.8rem"},fullRoomActions:{display:"flex",gap:"15px",justifyContent:"center"},fullRoomButton:{padding:"12px 24px",backgroundColor:"var(--primary-purple)",border:"none",borderRadius:"var(--radius-md)",color:"white",cursor:"pointer",fontSize:"1rem",fontWeight:"500"},fullRoomButtonSecondary:{padding:"12px 24px",backgroundColor:"transparent",border:"1px solid var(--border-light)",borderRadius:"var(--radius-md)",color:"var(--text-light)",cursor:"pointer",fontSize:"1rem"},header:{backgroundColor:"var(--bg-card)",borderBottom:"1px solid var(--border-light)",padding:"15px 20px",display:"flex",justifyContent:"space-between",alignItems:"center"},headerLeft:{display:"flex",alignItems:"center",gap:"20px"},roomInfo:{display:"flex",flexDirection:"column",gap:"5px"},roomName:{fontSize:"1.5rem",fontWeight:"600",margin:0,color:"var(--text-light)"},roomMeta:{display:"flex",alignItems:"center",gap:"15px",fontSize:"0.9rem",color:"var(--text-gray)",flexWrap:"wrap"},roomCode:{backgroundColor:"rgba(124, 58, 237, 0.2)",color:"#a78bfa",padding:"4px 8px",borderRadius:"4px",fontFamily:"monospace",fontWeight:"600",cursor:"pointer",transition:"all 0.2s ease"},participantCount:{padding:"4px 8px",backgroundColor:"rgba(59, 130, 246, 0.2)",borderRadius:"4px"},roomStatus:{padding:"4px 8px",borderRadius:"4px",fontWeight:"500",textTransform:"capitalize"},warningBadge:{padding:"4px 8px",backgroundColor:"rgba(239, 68, 68, 0.2)",color:"#f87171",borderRadius:"4px",fontWeight:"500"},headerRight:{display:"flex",alignItems:"center",gap:"10px"},leaveButton:{padding:"10px 20px",backgroundColor:"rgba(239, 68, 68, 0.2)",border:"1px solid rgba(239, 68, 68, 0.3)",borderRadius:"var(--radius-md)",color:"#f87171",cursor:"pointer",fontWeight:"500",transition:"all 0.2s ease"},main:{flex:1,display:"flex",padding:"20px",gap:"20px",overflow:"hidden"},videoSection:{flex:3,display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(300px, 1fr))",gap:"15px",backgroundColor:"var(--bg-card-light)",borderRadius:"var(--radius-lg)",border:"1px solid var(--border-light)",padding:"15px",minHeight:"500px",overflowY:"auto",position:"relative"},videoContainer:{position:"relative",backgroundColor:"#000",borderRadius:"var(--radius-md)",overflow:"hidden",aspectRatio:"16/9",minHeight:"250px",border:"2px solid var(--border-light)"},noConnectionsMessage:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",textAlign:"center",padding:"40px",backgroundColor:"rgba(0, 0, 0, 0.7)",borderRadius:"var(--radius-lg)",backdropFilter:"blur(10px)",border:"1px solid var(--border-light)",zIndex:10},noConnectionsIcon:{fontSize:"3rem",marginBottom:"15px",opacity:.7},noConnectionsText:{fontSize:"1.5rem",marginBottom:"10px",color:"var(--text-light)"},noConnectionsSubtext:{color:"var(--text-gray)",marginBottom:"15px",fontSize:"1rem"},inviteHint:{color:"#a78bfa",fontSize:"0.9rem",backgroundColor:"rgba(124, 58, 237, 0.1)",padding:"8px 12px",borderRadius:"var(--radius-md)",display:"inline-block"},connectionStatus:{position:"absolute",bottom:"20px",right:"20px",backgroundColor:"rgba(0, 0, 0, 0.8)",color:"white",padding:"8px 12px",borderRadius:"var(--radius-md)",fontSize:"0.9rem",zIndex:100,display:"flex",alignItems:"center",gap:"10px",backdropFilter:"blur(10px)"},statusIndicator:{padding:"4px 8px",borderRadius:"12px",color:"white",fontWeight:"600",fontSize:"0.8rem",textTransform:"uppercase"},statusText:{fontSize:"0.8rem",opacity:.9},sidebar:{flex:1,backgroundColor:"var(--bg-card-light)",borderRadius:"var(--radius-lg)",border:"1px solid var(--border-light)",padding:"20px",minWidth:"300px",maxHeight:"600px",overflowY:"auto"},sidebarHeader:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px",paddingBottom:"15px",borderBottom:"1px solid var(--border-light)"},sidebarTitle:{fontSize:"1.2rem",fontWeight:"600",margin:0,color:"var(--text-light)"},participantBadge:{backgroundColor:"var(--primary-purple)",color:"white",padding:"4px 10px",borderRadius:"12px",fontSize:"0.8rem",fontWeight:"600"},refreshSmallButton:{background:"none",border:"none",color:"var(--text-gray)",cursor:"pointer",fontSize:"1rem",padding:"5px",borderRadius:"4px"},participantsList:{display:"flex",flexDirection:"column",gap:"10px",marginBottom:"30px"},participantItem:{display:"flex",alignItems:"center",gap:"12px",padding:"12px",backgroundColor:"rgba(255, 255, 255, 0.05)",borderRadius:"var(--radius-md)",transition:"all 0.2s ease"},hostItem:{backgroundColor:"rgba(124, 58, 237, 0.1)",borderLeft:"3px solid var(--primary-purple)"},currentUserItem:{backgroundColor:"rgba(59, 130, 246, 0.1)",borderLeft:"3px solid #3b82f6"},participantAvatar:{position:"relative",width:"40px",height:"40px"},avatarImage:{width:"100%",height:"100%",borderRadius:"50%",objectFit:"cover"},defaultAvatar:{width:"100%",height:"100%",borderRadius:"50%",backgroundColor:"var(--primary-purple)",display:"flex",alignItems:"center",justifyContent:"center",color:"white",fontWeight:"600",fontSize:"1.2rem"},hostBadge:{position:"absolute",bottom:"-5px",right:"-5px",backgroundColor:"var(--primary-purple)",borderRadius:"50%",width:"20px",height:"20px",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"0.8rem"},participantInfo:{flex:1,minWidth:0},participantName:{fontWeight:"500",color:"var(--text-light)",marginBottom:"4px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},youBadge:{color:"var(--accent-blue)",fontSize:"0.9rem"},participantStatus:{display:"flex",alignItems:"center",gap:"6px",fontSize:"0.8rem",color:"var(--text-gray)"},statusDot:{width:"8px",height:"8px",backgroundColor:"#10b981",borderRadius:"50%"},kickButton:{width:"28px",height:"28px",backgroundColor:"rgba(239, 68, 68, 0.1)",border:"1px solid rgba(239, 68, 68, 0.3)",borderRadius:"50%",color:"#f87171",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"1.2rem",transition:"all 0.2s ease"},controlsSection:{marginTop:"30px",paddingTop:"20px",borderTop:"1px solid var(--border-light)"},controlsTitle:{fontSize:"1rem",fontWeight:"600",marginBottom:"15px",color:"var(--text-light)"},controlsGrid:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"10px",marginBottom:"20px"},controlButton:{padding:"12px",backgroundColor:"rgba(255, 255, 255, 0.1)",border:"1px solid var(--border-light)",borderRadius:"var(--radius-md)",color:"var(--text-light)",cursor:"pointer",fontSize:"0.9rem",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",transition:"all 0.2s ease"},controlButtonActive:{backgroundColor:"rgba(34, 197, 94, 0.2)",borderColor:"rgba(34, 197, 94, 0.5)",color:"#4ade80"},controlButtonInactive:{backgroundColor:"rgba(239, 68, 68, 0.2)",borderColor:"rgba(239, 68, 68, 0.5)",color:"#f87171"},controlButtonDanger:{gridColumn:"1 / -1",padding:"12px",backgroundColor:"rgba(239, 68, 68, 0.2)",border:"1px solid rgba(239, 68, 68, 0.3)",borderRadius:"var(--radius-md)",color:"#f87171",cursor:"pointer",fontSize:"0.9rem",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",transition:"all 0.2s ease"},mediaError:{marginTop:"10px",padding:"8px 12px",backgroundColor:"rgba(245, 158, 11, 0.2)",border:"1px solid rgba(245, 158, 11, 0.3)",borderRadius:"var(--radius-md)",color:"#fbbf24",fontSize:"0.8rem"},peersStatus:{marginTop:"20px",padding:"15px",backgroundColor:"rgba(0, 0, 0, 0.2)",borderRadius:"var(--radius-md)"},peersStatusHeader:{display:"flex",justifyContent:"space-between",marginBottom:"10px",fontSize:"0.9rem"},peerItem:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"6px 0",fontSize:"0.8rem"},peerName:{color:"var(--text-gray)"},peerStatus:{fontWeight:"500",fontSize:"0.75rem",textTransform:"uppercase"},debugPanel:{margin:"20px",padding:"15px",backgroundColor:"rgba(0, 0, 0, 0.5)",borderRadius:"var(--radius-md)",border:"1px solid var(--border-light)"},debugSummary:{cursor:"pointer",padding:"10px",backgroundColor:"rgba(59, 130, 246, 0.2)",border:"1px solid rgba(59, 130, 246, 0.3)",borderRadius:"var(--radius-md)",color:"#93c5fd",fontWeight:"500",marginBottom:"15px"},debugActions:{display:"flex",gap:"10px",marginTop:"15px",flexWrap:"wrap"},footer:{backgroundColor:"var(--bg-card)",borderTop:"1px solid var(--border-light)",padding:"15px 20px",marginTop:"auto"},footerContent:{display:"flex",justifyContent:"space-between",alignItems:"center"},footerInfo:{display:"flex",alignItems:"center",gap:"10px",color:"var(--text-gray)",fontSize:"0.9rem",flexWrap:"wrap"},footerSeparator:{opacity:.5},footerActions:{display:"flex",gap:"10px"},footerButton:{padding:"8px 16px",backgroundColor:"rgba(255, 255, 255, 0.1)",border:"1px solid var(--border-light)",borderRadius:"var(--radius-md)",color:"var(--text-light)",cursor:"pointer",fontSize:"0.9rem",transition:"all 0.2s ease"}};function gO(){return S.jsx($N,{children:S.jsx(XN,{children:S.jsx(oO,{children:S.jsxs(lO,{children:["  ",S.jsxs(Lw,{children:["  ",S.jsxs(dw,{children:[S.jsx(so,{path:"/",element:S.jsx(qm,{})}),S.jsx(so,{path:"/Labyrinth",element:S.jsx(qm,{})})," ",S.jsx(so,{path:"/dashboard",element:S.jsx(VE,{children:S.jsx(cO,{})})}),S.jsx(so,{path:"/room/:roomId",element:S.jsx(VE,{children:S.jsx(pO,{})})}),S.jsx(so,{path:"*",element:S.jsx(qm,{})})]})]})]})})})})}mA.createRoot(document.getElementById("root")).render(S.jsx(V.StrictMode,{children:S.jsx(gO,{})}));
