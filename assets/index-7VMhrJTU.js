(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const u of o)if(u.type==="childList")for(const f of u.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&s(f)}).observe(document,{childList:!0,subtree:!0});function n(o){const u={};return o.integrity&&(u.integrity=o.integrity),o.referrerPolicy&&(u.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?u.credentials="include":o.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function s(o){if(o.ep)return;o.ep=!0;const u=n(o);fetch(o.href,u)}})();function rA(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var Em={exports:{}},zl={};var G_;function sA(){if(G_)return zl;G_=1;var r=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(s,o,u){var f=null;if(u!==void 0&&(f=""+u),o.key!==void 0&&(f=""+o.key),"key"in o){u={};for(var m in o)m!=="key"&&(u[m]=o[m])}else u=o;return o=u.ref,{$$typeof:r,type:s,key:f,ref:o!==void 0?o:null,props:u}}return zl.Fragment=e,zl.jsx=n,zl.jsxs=n,zl}var $_;function aA(){return $_||($_=1,Em.exports=sA()),Em.exports}var b=aA(),Tm={exports:{}},Ne={};var Q_;function oA(){if(Q_)return Ne;Q_=1;var r=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),u=Symbol.for("react.consumer"),f=Symbol.for("react.context"),m=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),E=Symbol.for("react.lazy"),T=Symbol.for("react.activity"),I=Symbol.iterator;function P(k){return k===null||typeof k!="object"?null:(k=I&&k[I]||k["@@iterator"],typeof k=="function"?k:null)}var j={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},$=Object.assign,B={};function Z(k,ee,ce){this.props=k,this.context=ee,this.refs=B,this.updater=ce||j}Z.prototype.isReactComponent={},Z.prototype.setState=function(k,ee){if(typeof k!="object"&&typeof k!="function"&&k!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,k,ee,"setState")},Z.prototype.forceUpdate=function(k){this.updater.enqueueForceUpdate(this,k,"forceUpdate")};function J(){}J.prototype=Z.prototype;function q(k,ee,ce){this.props=k,this.context=ee,this.refs=B,this.updater=ce||j}var ge=q.prototype=new J;ge.constructor=q,$(ge,Z.prototype),ge.isPureReactComponent=!0;var _e=Array.isArray;function Ee(){}var O={H:null,A:null,T:null,S:null},x=Object.prototype.hasOwnProperty;function w(k,ee,ce){var de=ce.ref;return{$$typeof:r,type:k,key:ee,ref:de!==void 0?de:null,props:ce}}function D(k,ee){return w(k.type,ee,k.props)}function R(k){return typeof k=="object"&&k!==null&&k.$$typeof===r}function N(k){var ee={"=":"=0",":":"=2"};return"$"+k.replace(/[=:]/g,function(ce){return ee[ce]})}var A=/\/+/g;function Y(k,ee){return typeof k=="object"&&k!==null&&k.key!=null?N(""+k.key):ee.toString(36)}function he(k){switch(k.status){case"fulfilled":return k.value;case"rejected":throw k.reason;default:switch(typeof k.status=="string"?k.then(Ee,Ee):(k.status="pending",k.then(function(ee){k.status==="pending"&&(k.status="fulfilled",k.value=ee)},function(ee){k.status==="pending"&&(k.status="rejected",k.reason=ee)})),k.status){case"fulfilled":return k.value;case"rejected":throw k.reason}}throw k}function z(k,ee,ce,de,we){var Se=typeof k;(Se==="undefined"||Se==="boolean")&&(k=null);var Ce=!1;if(k===null)Ce=!0;else switch(Se){case"bigint":case"string":case"number":Ce=!0;break;case"object":switch(k.$$typeof){case r:case e:Ce=!0;break;case E:return Ce=k._init,z(Ce(k._payload),ee,ce,de,we)}}if(Ce)return we=we(k),Ce=de===""?"."+Y(k,0):de,_e(we)?(ce="",Ce!=null&&(ce=Ce.replace(A,"$&/")+"/"),z(we,ee,ce,"",function(dn){return dn})):we!=null&&(R(we)&&(we=D(we,ce+(we.key==null||k&&k.key===we.key?"":(""+we.key).replace(A,"$&/")+"/")+Ce)),ee.push(we)),1;Ce=0;var Pe=de===""?".":de+":";if(_e(k))for(var Ye=0;Ye<k.length;Ye++)de=k[Ye],Se=Pe+Y(de,Ye),Ce+=z(de,ee,ce,Se,we);else if(Ye=P(k),typeof Ye=="function")for(k=Ye.call(k),Ye=0;!(de=k.next()).done;)de=de.value,Se=Pe+Y(de,Ye++),Ce+=z(de,ee,ce,Se,we);else if(Se==="object"){if(typeof k.then=="function")return z(he(k),ee,ce,de,we);throw ee=String(k),Error("Objects are not valid as a React child (found: "+(ee==="[object Object]"?"object with keys {"+Object.keys(k).join(", ")+"}":ee)+"). If you meant to render a collection of children, use an array instead.")}return Ce}function oe(k,ee,ce){if(k==null)return k;var de=[],we=0;return z(k,de,"","",function(Se){return ee.call(ce,Se,we++)}),de}function W(k){if(k._status===-1){var ee=k._result;ee=ee(),ee.then(function(ce){(k._status===0||k._status===-1)&&(k._status=1,k._result=ce)},function(ce){(k._status===0||k._status===-1)&&(k._status=2,k._result=ce)}),k._status===-1&&(k._status=0,k._result=ee)}if(k._status===1)return k._result.default;throw k._result}var ue=typeof reportError=="function"?reportError:function(k){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var ee=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof k=="object"&&k!==null&&typeof k.message=="string"?String(k.message):String(k),error:k});if(!window.dispatchEvent(ee))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",k);return}console.error(k)},le={map:oe,forEach:function(k,ee,ce){oe(k,function(){ee.apply(this,arguments)},ce)},count:function(k){var ee=0;return oe(k,function(){ee++}),ee},toArray:function(k){return oe(k,function(ee){return ee})||[]},only:function(k){if(!R(k))throw Error("React.Children.only expected to receive a single React element child.");return k}};return Ne.Activity=T,Ne.Children=le,Ne.Component=Z,Ne.Fragment=n,Ne.Profiler=o,Ne.PureComponent=q,Ne.StrictMode=s,Ne.Suspense=g,Ne.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=O,Ne.__COMPILER_RUNTIME={__proto__:null,c:function(k){return O.H.useMemoCache(k)}},Ne.cache=function(k){return function(){return k.apply(null,arguments)}},Ne.cacheSignal=function(){return null},Ne.cloneElement=function(k,ee,ce){if(k==null)throw Error("The argument must be a React element, but you passed "+k+".");var de=$({},k.props),we=k.key;if(ee!=null)for(Se in ee.key!==void 0&&(we=""+ee.key),ee)!x.call(ee,Se)||Se==="key"||Se==="__self"||Se==="__source"||Se==="ref"&&ee.ref===void 0||(de[Se]=ee[Se]);var Se=arguments.length-2;if(Se===1)de.children=ce;else if(1<Se){for(var Ce=Array(Se),Pe=0;Pe<Se;Pe++)Ce[Pe]=arguments[Pe+2];de.children=Ce}return w(k.type,we,de)},Ne.createContext=function(k){return k={$$typeof:f,_currentValue:k,_currentValue2:k,_threadCount:0,Provider:null,Consumer:null},k.Provider=k,k.Consumer={$$typeof:u,_context:k},k},Ne.createElement=function(k,ee,ce){var de,we={},Se=null;if(ee!=null)for(de in ee.key!==void 0&&(Se=""+ee.key),ee)x.call(ee,de)&&de!=="key"&&de!=="__self"&&de!=="__source"&&(we[de]=ee[de]);var Ce=arguments.length-2;if(Ce===1)we.children=ce;else if(1<Ce){for(var Pe=Array(Ce),Ye=0;Ye<Ce;Ye++)Pe[Ye]=arguments[Ye+2];we.children=Pe}if(k&&k.defaultProps)for(de in Ce=k.defaultProps,Ce)we[de]===void 0&&(we[de]=Ce[de]);return w(k,Se,we)},Ne.createRef=function(){return{current:null}},Ne.forwardRef=function(k){return{$$typeof:m,render:k}},Ne.isValidElement=R,Ne.lazy=function(k){return{$$typeof:E,_payload:{_status:-1,_result:k},_init:W}},Ne.memo=function(k,ee){return{$$typeof:p,type:k,compare:ee===void 0?null:ee}},Ne.startTransition=function(k){var ee=O.T,ce={};O.T=ce;try{var de=k(),we=O.S;we!==null&&we(ce,de),typeof de=="object"&&de!==null&&typeof de.then=="function"&&de.then(Ee,ue)}catch(Se){ue(Se)}finally{ee!==null&&ce.types!==null&&(ee.types=ce.types),O.T=ee}},Ne.unstable_useCacheRefresh=function(){return O.H.useCacheRefresh()},Ne.use=function(k){return O.H.use(k)},Ne.useActionState=function(k,ee,ce){return O.H.useActionState(k,ee,ce)},Ne.useCallback=function(k,ee){return O.H.useCallback(k,ee)},Ne.useContext=function(k){return O.H.useContext(k)},Ne.useDebugValue=function(){},Ne.useDeferredValue=function(k,ee){return O.H.useDeferredValue(k,ee)},Ne.useEffect=function(k,ee){return O.H.useEffect(k,ee)},Ne.useEffectEvent=function(k){return O.H.useEffectEvent(k)},Ne.useId=function(){return O.H.useId()},Ne.useImperativeHandle=function(k,ee,ce){return O.H.useImperativeHandle(k,ee,ce)},Ne.useInsertionEffect=function(k,ee){return O.H.useInsertionEffect(k,ee)},Ne.useLayoutEffect=function(k,ee){return O.H.useLayoutEffect(k,ee)},Ne.useMemo=function(k,ee){return O.H.useMemo(k,ee)},Ne.useOptimistic=function(k,ee){return O.H.useOptimistic(k,ee)},Ne.useReducer=function(k,ee,ce){return O.H.useReducer(k,ee,ce)},Ne.useRef=function(k){return O.H.useRef(k)},Ne.useState=function(k){return O.H.useState(k)},Ne.useSyncExternalStore=function(k,ee,ce){return O.H.useSyncExternalStore(k,ee,ce)},Ne.useTransition=function(){return O.H.useTransition()},Ne.version="19.2.3",Ne}var Y_;function vg(){return Y_||(Y_=1,Tm.exports=oA()),Tm.exports}var V=vg();const Hm=rA(V);var bm={exports:{}},Bl={},Sm={exports:{}},Am={};var K_;function lA(){return K_||(K_=1,(function(r){function e(z,oe){var W=z.length;z.push(oe);e:for(;0<W;){var ue=W-1>>>1,le=z[ue];if(0<o(le,oe))z[ue]=oe,z[W]=le,W=ue;else break e}}function n(z){return z.length===0?null:z[0]}function s(z){if(z.length===0)return null;var oe=z[0],W=z.pop();if(W!==oe){z[0]=W;e:for(var ue=0,le=z.length,k=le>>>1;ue<k;){var ee=2*(ue+1)-1,ce=z[ee],de=ee+1,we=z[de];if(0>o(ce,W))de<le&&0>o(we,ce)?(z[ue]=we,z[de]=W,ue=de):(z[ue]=ce,z[ee]=W,ue=ee);else if(de<le&&0>o(we,W))z[ue]=we,z[de]=W,ue=de;else break e}}return oe}function o(z,oe){var W=z.sortIndex-oe.sortIndex;return W!==0?W:z.id-oe.id}if(r.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var u=performance;r.unstable_now=function(){return u.now()}}else{var f=Date,m=f.now();r.unstable_now=function(){return f.now()-m}}var g=[],p=[],E=1,T=null,I=3,P=!1,j=!1,$=!1,B=!1,Z=typeof setTimeout=="function"?setTimeout:null,J=typeof clearTimeout=="function"?clearTimeout:null,q=typeof setImmediate<"u"?setImmediate:null;function ge(z){for(var oe=n(p);oe!==null;){if(oe.callback===null)s(p);else if(oe.startTime<=z)s(p),oe.sortIndex=oe.expirationTime,e(g,oe);else break;oe=n(p)}}function _e(z){if($=!1,ge(z),!j)if(n(g)!==null)j=!0,Ee||(Ee=!0,N());else{var oe=n(p);oe!==null&&he(_e,oe.startTime-z)}}var Ee=!1,O=-1,x=5,w=-1;function D(){return B?!0:!(r.unstable_now()-w<x)}function R(){if(B=!1,Ee){var z=r.unstable_now();w=z;var oe=!0;try{e:{j=!1,$&&($=!1,J(O),O=-1),P=!0;var W=I;try{t:{for(ge(z),T=n(g);T!==null&&!(T.expirationTime>z&&D());){var ue=T.callback;if(typeof ue=="function"){T.callback=null,I=T.priorityLevel;var le=ue(T.expirationTime<=z);if(z=r.unstable_now(),typeof le=="function"){T.callback=le,ge(z),oe=!0;break t}T===n(g)&&s(g),ge(z)}else s(g);T=n(g)}if(T!==null)oe=!0;else{var k=n(p);k!==null&&he(_e,k.startTime-z),oe=!1}}break e}finally{T=null,I=W,P=!1}oe=void 0}}finally{oe?N():Ee=!1}}}var N;if(typeof q=="function")N=function(){q(R)};else if(typeof MessageChannel<"u"){var A=new MessageChannel,Y=A.port2;A.port1.onmessage=R,N=function(){Y.postMessage(null)}}else N=function(){Z(R,0)};function he(z,oe){O=Z(function(){z(r.unstable_now())},oe)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(z){z.callback=null},r.unstable_forceFrameRate=function(z){0>z||125<z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):x=0<z?Math.floor(1e3/z):5},r.unstable_getCurrentPriorityLevel=function(){return I},r.unstable_next=function(z){switch(I){case 1:case 2:case 3:var oe=3;break;default:oe=I}var W=I;I=oe;try{return z()}finally{I=W}},r.unstable_requestPaint=function(){B=!0},r.unstable_runWithPriority=function(z,oe){switch(z){case 1:case 2:case 3:case 4:case 5:break;default:z=3}var W=I;I=z;try{return oe()}finally{I=W}},r.unstable_scheduleCallback=function(z,oe,W){var ue=r.unstable_now();switch(typeof W=="object"&&W!==null?(W=W.delay,W=typeof W=="number"&&0<W?ue+W:ue):W=ue,z){case 1:var le=-1;break;case 2:le=250;break;case 5:le=1073741823;break;case 4:le=1e4;break;default:le=5e3}return le=W+le,z={id:E++,callback:oe,priorityLevel:z,startTime:W,expirationTime:le,sortIndex:-1},W>ue?(z.sortIndex=W,e(p,z),n(g)===null&&z===n(p)&&($?(J(O),O=-1):$=!0,he(_e,W-ue))):(z.sortIndex=le,e(g,z),j||P||(j=!0,Ee||(Ee=!0,N()))),z},r.unstable_shouldYield=D,r.unstable_wrapCallback=function(z){var oe=I;return function(){var W=I;I=oe;try{return z.apply(this,arguments)}finally{I=W}}}})(Am)),Am}var X_;function uA(){return X_||(X_=1,Sm.exports=lA()),Sm.exports}var wm={exports:{}},un={};var W_;function cA(){if(W_)return un;W_=1;var r=vg();function e(g){var p="https://react.dev/errors/"+g;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var E=2;E<arguments.length;E++)p+="&args[]="+encodeURIComponent(arguments[E])}return"Minified React error #"+g+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var s={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},o=Symbol.for("react.portal");function u(g,p,E){var T=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:T==null?null:""+T,children:g,containerInfo:p,implementation:E}}var f=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function m(g,p){if(g==="font")return"";if(typeof p=="string")return p==="use-credentials"?p:""}return un.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,un.createPortal=function(g,p){var E=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)throw Error(e(299));return u(g,p,null,E)},un.flushSync=function(g){var p=f.T,E=s.p;try{if(f.T=null,s.p=2,g)return g()}finally{f.T=p,s.p=E,s.d.f()}},un.preconnect=function(g,p){typeof g=="string"&&(p?(p=p.crossOrigin,p=typeof p=="string"?p==="use-credentials"?p:"":void 0):p=null,s.d.C(g,p))},un.prefetchDNS=function(g){typeof g=="string"&&s.d.D(g)},un.preinit=function(g,p){if(typeof g=="string"&&p&&typeof p.as=="string"){var E=p.as,T=m(E,p.crossOrigin),I=typeof p.integrity=="string"?p.integrity:void 0,P=typeof p.fetchPriority=="string"?p.fetchPriority:void 0;E==="style"?s.d.S(g,typeof p.precedence=="string"?p.precedence:void 0,{crossOrigin:T,integrity:I,fetchPriority:P}):E==="script"&&s.d.X(g,{crossOrigin:T,integrity:I,fetchPriority:P,nonce:typeof p.nonce=="string"?p.nonce:void 0})}},un.preinitModule=function(g,p){if(typeof g=="string")if(typeof p=="object"&&p!==null){if(p.as==null||p.as==="script"){var E=m(p.as,p.crossOrigin);s.d.M(g,{crossOrigin:E,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0})}}else p==null&&s.d.M(g)},un.preload=function(g,p){if(typeof g=="string"&&typeof p=="object"&&p!==null&&typeof p.as=="string"){var E=p.as,T=m(E,p.crossOrigin);s.d.L(g,E,{crossOrigin:T,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0,type:typeof p.type=="string"?p.type:void 0,fetchPriority:typeof p.fetchPriority=="string"?p.fetchPriority:void 0,referrerPolicy:typeof p.referrerPolicy=="string"?p.referrerPolicy:void 0,imageSrcSet:typeof p.imageSrcSet=="string"?p.imageSrcSet:void 0,imageSizes:typeof p.imageSizes=="string"?p.imageSizes:void 0,media:typeof p.media=="string"?p.media:void 0})}},un.preloadModule=function(g,p){if(typeof g=="string")if(p){var E=m(p.as,p.crossOrigin);s.d.m(g,{as:typeof p.as=="string"&&p.as!=="script"?p.as:void 0,crossOrigin:E,integrity:typeof p.integrity=="string"?p.integrity:void 0})}else s.d.m(g)},un.requestFormReset=function(g){s.d.r(g)},un.unstable_batchedUpdates=function(g,p){return g(p)},un.useFormState=function(g,p,E){return f.H.useFormState(g,p,E)},un.useFormStatus=function(){return f.H.useHostTransitionStatus()},un.version="19.2.3",un}var J_;function hA(){if(J_)return wm.exports;J_=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),wm.exports=cA(),wm.exports}var Z_;function fA(){if(Z_)return Bl;Z_=1;var r=uA(),e=vg(),n=hA();function s(t){var i="https://react.dev/errors/"+t;if(1<arguments.length){i+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)i+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+t+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function u(t){var i=t,a=t;if(t.alternate)for(;i.return;)i=i.return;else{t=i;do i=t,(i.flags&4098)!==0&&(a=i.return),t=i.return;while(t)}return i.tag===3?a:null}function f(t){if(t.tag===13){var i=t.memoizedState;if(i===null&&(t=t.alternate,t!==null&&(i=t.memoizedState)),i!==null)return i.dehydrated}return null}function m(t){if(t.tag===31){var i=t.memoizedState;if(i===null&&(t=t.alternate,t!==null&&(i=t.memoizedState)),i!==null)return i.dehydrated}return null}function g(t){if(u(t)!==t)throw Error(s(188))}function p(t){var i=t.alternate;if(!i){if(i=u(t),i===null)throw Error(s(188));return i!==t?null:t}for(var a=t,l=i;;){var h=a.return;if(h===null)break;var d=h.alternate;if(d===null){if(l=h.return,l!==null){a=l;continue}break}if(h.child===d.child){for(d=h.child;d;){if(d===a)return g(h),t;if(d===l)return g(h),i;d=d.sibling}throw Error(s(188))}if(a.return!==l.return)a=h,l=d;else{for(var v=!1,S=h.child;S;){if(S===a){v=!0,a=h,l=d;break}if(S===l){v=!0,l=h,a=d;break}S=S.sibling}if(!v){for(S=d.child;S;){if(S===a){v=!0,a=d,l=h;break}if(S===l){v=!0,l=d,a=h;break}S=S.sibling}if(!v)throw Error(s(189))}}if(a.alternate!==l)throw Error(s(190))}if(a.tag!==3)throw Error(s(188));return a.stateNode.current===a?t:i}function E(t){var i=t.tag;if(i===5||i===26||i===27||i===6)return t;for(t=t.child;t!==null;){if(i=E(t),i!==null)return i;t=t.sibling}return null}var T=Object.assign,I=Symbol.for("react.element"),P=Symbol.for("react.transitional.element"),j=Symbol.for("react.portal"),$=Symbol.for("react.fragment"),B=Symbol.for("react.strict_mode"),Z=Symbol.for("react.profiler"),J=Symbol.for("react.consumer"),q=Symbol.for("react.context"),ge=Symbol.for("react.forward_ref"),_e=Symbol.for("react.suspense"),Ee=Symbol.for("react.suspense_list"),O=Symbol.for("react.memo"),x=Symbol.for("react.lazy"),w=Symbol.for("react.activity"),D=Symbol.for("react.memo_cache_sentinel"),R=Symbol.iterator;function N(t){return t===null||typeof t!="object"?null:(t=R&&t[R]||t["@@iterator"],typeof t=="function"?t:null)}var A=Symbol.for("react.client.reference");function Y(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===A?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case $:return"Fragment";case Z:return"Profiler";case B:return"StrictMode";case _e:return"Suspense";case Ee:return"SuspenseList";case w:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case j:return"Portal";case q:return t.displayName||"Context";case J:return(t._context.displayName||"Context")+".Consumer";case ge:var i=t.render;return t=t.displayName,t||(t=i.displayName||i.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case O:return i=t.displayName||null,i!==null?i:Y(t.type)||"Memo";case x:i=t._payload,t=t._init;try{return Y(t(i))}catch{}}return null}var he=Array.isArray,z=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,oe=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,W={pending:!1,data:null,method:null,action:null},ue=[],le=-1;function k(t){return{current:t}}function ee(t){0>le||(t.current=ue[le],ue[le]=null,le--)}function ce(t,i){le++,ue[le]=t.current,t.current=i}var de=k(null),we=k(null),Se=k(null),Ce=k(null);function Pe(t,i){switch(ce(Se,i),ce(we,t),ce(de,null),i.nodeType){case 9:case 11:t=(t=i.documentElement)&&(t=t.namespaceURI)?m_(t):0;break;default:if(t=i.tagName,i=i.namespaceURI)i=m_(i),t=g_(i,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}ee(de),ce(de,t)}function Ye(){ee(de),ee(we),ee(Se)}function dn(t){t.memoizedState!==null&&ce(Ce,t);var i=de.current,a=g_(i,t.type);i!==a&&(ce(we,t),ce(de,a))}function xn(t){we.current===t&&(ee(de),ee(we)),Ce.current===t&&(ee(Ce),Pl._currentValue=W)}var on,Ji;function ln(t){if(on===void 0)try{throw Error()}catch(a){var i=a.stack.trim().match(/\n( *(at )?)/);on=i&&i[1]||"",Ji=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+on+t+Ji}var In=!1;function Kt(t,i){if(!t||In)return"";In=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(i){var re=function(){throw Error()};if(Object.defineProperty(re.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(re,[])}catch(X){var Q=X}Reflect.construct(t,[],re)}else{try{re.call()}catch(X){Q=X}t.call(re.prototype)}}else{try{throw Error()}catch(X){Q=X}(re=t())&&typeof re.catch=="function"&&re.catch(function(){})}}catch(X){if(X&&Q&&typeof X.stack=="string")return[X.stack,Q.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var h=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");h&&h.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var d=l.DetermineComponentFrameRoot(),v=d[0],S=d[1];if(v&&S){var M=v.split(`
`),G=S.split(`
`);for(h=l=0;l<M.length&&!M[l].includes("DetermineComponentFrameRoot");)l++;for(;h<G.length&&!G[h].includes("DetermineComponentFrameRoot");)h++;if(l===M.length||h===G.length)for(l=M.length-1,h=G.length-1;1<=l&&0<=h&&M[l]!==G[h];)h--;for(;1<=l&&0<=h;l--,h--)if(M[l]!==G[h]){if(l!==1||h!==1)do if(l--,h--,0>h||M[l]!==G[h]){var te=`
`+M[l].replace(" at new "," at ");return t.displayName&&te.includes("<anonymous>")&&(te=te.replace("<anonymous>",t.displayName)),te}while(1<=l&&0<=h);break}}}finally{In=!1,Error.prepareStackTrace=a}return(a=t?t.displayName||t.name:"")?ln(a):""}function Lo(t,i){switch(t.tag){case 26:case 27:case 5:return ln(t.type);case 16:return ln("Lazy");case 13:return t.child!==i&&i!==null?ln("Suspense Fallback"):ln("Suspense");case 19:return ln("SuspenseList");case 0:case 15:return Kt(t.type,!1);case 11:return Kt(t.type.render,!1);case 1:return Kt(t.type,!0);case 31:return ln("Activity");default:return""}}function jo(t){try{var i="",a=null;do i+=Lo(t,a),a=t,t=t.return;while(t);return i}catch(l){return`
Error generating stack: `+l.message+`
`+l.stack}}var Rt=Object.prototype.hasOwnProperty,Bt=r.unstable_scheduleCallback,xr=r.unstable_cancelCallback,bf=r.unstable_shouldYield,Nu=r.unstable_requestPaint,mn=r.unstable_now,xs=r.unstable_getCurrentPriorityLevel,Uo=r.unstable_ImmediatePriority,zo=r.unstable_UserBlockingPriority,Ir=r.unstable_NormalPriority,Sf=r.unstable_LowPriority,Ou=r.unstable_IdlePriority,Mu=r.log,Vu=r.unstable_setDisableYieldValue,ri=null,Xt=null;function Fn(t){if(typeof Mu=="function"&&Vu(t),Xt&&typeof Xt.setStrictMode=="function")try{Xt.setStrictMode(ri,t)}catch{}}var Tt=Math.clz32?Math.clz32:Pu,ku=Math.log,va=Math.LN2;function Pu(t){return t>>>=0,t===0?32:31-(ku(t)/va|0)|0}var bi=256,Is=262144,Ct=4194304;function Si(t){var i=t&42;if(i!==0)return i;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return t&261888;case 262144:case 524288:case 1048576:case 2097152:return t&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function Ai(t,i,a){var l=t.pendingLanes;if(l===0)return 0;var h=0,d=t.suspendedLanes,v=t.pingedLanes;t=t.warmLanes;var S=l&134217727;return S!==0?(l=S&~d,l!==0?h=Si(l):(v&=S,v!==0?h=Si(v):a||(a=S&~t,a!==0&&(h=Si(a))))):(S=l&~d,S!==0?h=Si(S):v!==0?h=Si(v):a||(a=l&~t,a!==0&&(h=Si(a)))),h===0?0:i!==0&&i!==h&&(i&d)===0&&(d=h&-h,a=i&-i,d>=a||d===32&&(a&4194048)!==0)?i:h}function si(t,i){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&i)===0}function Af(t,i){switch(t){case 1:case 2:case 4:case 8:case 64:return i+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Lu(){var t=Ct;return Ct<<=1,(Ct&62914560)===0&&(Ct=4194304),t}function wi(t){for(var i=[],a=0;31>a;a++)i.push(t);return i}function Ds(t,i){t.pendingLanes|=i,i!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function wf(t,i,a,l,h,d){var v=t.pendingLanes;t.pendingLanes=a,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=a,t.entangledLanes&=a,t.errorRecoveryDisabledLanes&=a,t.shellSuspendCounter=0;var S=t.entanglements,M=t.expirationTimes,G=t.hiddenUpdates;for(a=v&~a;0<a;){var te=31-Tt(a),re=1<<te;S[te]=0,M[te]=-1;var Q=G[te];if(Q!==null)for(G[te]=null,te=0;te<Q.length;te++){var X=Q[te];X!==null&&(X.lane&=-536870913)}a&=~re}l!==0&&Ns(t,l,0),d!==0&&h===0&&t.tag!==0&&(t.suspendedLanes|=d&~(v&~i))}function Ns(t,i,a){t.pendingLanes|=i,t.suspendedLanes&=~i;var l=31-Tt(i);t.entangledLanes|=i,t.entanglements[l]=t.entanglements[l]|1073741824|a&261930}function Bo(t,i){var a=t.entangledLanes|=i;for(t=t.entanglements;a;){var l=31-Tt(a),h=1<<l;h&i|t[l]&i&&(t[l]|=i),a&=~h}}function qo(t,i){var a=i&-i;return a=(a&42)!==0?1:Os(a),(a&(t.suspendedLanes|i))!==0?0:a}function Os(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function Zi(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function ju(){var t=oe.p;return t!==0?t:(t=window.event,t===void 0?32:j_(t.type))}function ai(t,i){var a=oe.p;try{return oe.p=t,i()}finally{oe.p=a}}var oi=Math.random().toString(36).slice(2),xt="__reactFiber$"+oi,Ft="__reactProps$"+oi,Ri="__reactContainer$"+oi,_a="__reactEvents$"+oi,Rf="__reactListeners$"+oi,Uu="__reactHandles$"+oi,zu="__reactResources$"+oi,Ci="__reactMarker$"+oi;function Ea(t){delete t[xt],delete t[Ft],delete t[_a],delete t[Rf],delete t[Uu]}function xi(t){var i=t[xt];if(i)return i;for(var a=t.parentNode;a;){if(i=a[Ri]||a[xt]){if(a=i.alternate,i.child!==null||a!==null&&a.child!==null)for(t=b_(t);t!==null;){if(a=t[xt])return a;t=b_(t)}return i}t=a,a=t.parentNode}return null}function Gn(t){if(t=t[xt]||t[Ri]){var i=t.tag;if(i===5||i===6||i===13||i===31||i===26||i===27||i===3)return t}return null}function Dn(t){var i=t.tag;if(i===5||i===26||i===27||i===6)return t.stateNode;throw Error(s(33))}function Ii(t){var i=t[zu];return i||(i=t[zu]={hoistableStyles:new Map,hoistableScripts:new Map}),i}function It(t){t[Ci]=!0}var Ho=new Set,Fo={};function Di(t,i){Ni(t,i),Ni(t+"Capture",i)}function Ni(t,i){for(Fo[t]=i,t=0;t<i.length;t++)Ho.add(i[t])}var Go=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),$o={},Qo={};function Bu(t){return Rt.call(Qo,t)?!0:Rt.call($o,t)?!1:Go.test(t)?Qo[t]=!0:($o[t]=!0,!1)}function Ta(t,i,a){if(Bu(i))if(a===null)t.removeAttribute(i);else{switch(typeof a){case"undefined":case"function":case"symbol":t.removeAttribute(i);return;case"boolean":var l=i.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){t.removeAttribute(i);return}}t.setAttribute(i,""+a)}}function Nn(t,i,a){if(a===null)t.removeAttribute(i);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(i);return}t.setAttribute(i,""+a)}}function Dt(t,i,a,l){if(l===null)t.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(a);return}t.setAttributeNS(i,a,""+l)}}function Gt(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Dr(t){var i=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function Yo(t,i,a){var l=Object.getOwnPropertyDescriptor(t.constructor.prototype,i);if(!t.hasOwnProperty(i)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var h=l.get,d=l.set;return Object.defineProperty(t,i,{configurable:!0,get:function(){return h.call(this)},set:function(v){a=""+v,d.call(this,v)}}),Object.defineProperty(t,i,{enumerable:l.enumerable}),{getValue:function(){return a},setValue:function(v){a=""+v},stopTracking:function(){t._valueTracker=null,delete t[i]}}}}function et(t){if(!t._valueTracker){var i=Dr(t)?"checked":"value";t._valueTracker=Yo(t,i,""+t[i])}}function Ms(t){if(!t)return!1;var i=t._valueTracker;if(!i)return!0;var a=i.getValue(),l="";return t&&(l=Dr(t)?t.checked?"true":"false":t.value),t=l,t!==a?(i.setValue(t),!0):!1}function Oi(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var Vs=/[\n"\\]/g;function En(t){return t.replace(Vs,function(i){return"\\"+i.charCodeAt(0).toString(16)+" "})}function ba(t,i,a,l,h,d,v,S){t.name="",v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"?t.type=v:t.removeAttribute("type"),i!=null?v==="number"?(i===0&&t.value===""||t.value!=i)&&(t.value=""+Gt(i)):t.value!==""+Gt(i)&&(t.value=""+Gt(i)):v!=="submit"&&v!=="reset"||t.removeAttribute("value"),i!=null?Ko(t,v,Gt(i)):a!=null?Ko(t,v,Gt(a)):l!=null&&t.removeAttribute("value"),h==null&&d!=null&&(t.defaultChecked=!!d),h!=null&&(t.checked=h&&typeof h!="function"&&typeof h!="symbol"),S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"?t.name=""+Gt(S):t.removeAttribute("name")}function qu(t,i,a,l,h,d,v,S){if(d!=null&&typeof d!="function"&&typeof d!="symbol"&&typeof d!="boolean"&&(t.type=d),i!=null||a!=null){if(!(d!=="submit"&&d!=="reset"||i!=null)){et(t);return}a=a!=null?""+Gt(a):"",i=i!=null?""+Gt(i):a,S||i===t.value||(t.value=i),t.defaultValue=i}l=l??h,l=typeof l!="function"&&typeof l!="symbol"&&!!l,t.checked=S?t.checked:!!l,t.defaultChecked=!!l,v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"&&(t.name=v),et(t)}function Ko(t,i,a){i==="number"&&Oi(t.ownerDocument)===t||t.defaultValue===""+a||(t.defaultValue=""+a)}function Nr(t,i,a,l){if(t=t.options,i){i={};for(var h=0;h<a.length;h++)i["$"+a[h]]=!0;for(a=0;a<t.length;a++)h=i.hasOwnProperty("$"+t[a].value),t[a].selected!==h&&(t[a].selected=h),h&&l&&(t[a].defaultSelected=!0)}else{for(a=""+Gt(a),i=null,h=0;h<t.length;h++){if(t[h].value===a){t[h].selected=!0,l&&(t[h].defaultSelected=!0);return}i!==null||t[h].disabled||(i=t[h])}i!==null&&(i.selected=!0)}}function Hu(t,i,a){if(i!=null&&(i=""+Gt(i),i!==t.value&&(t.value=i),a==null)){t.defaultValue!==i&&(t.defaultValue=i);return}t.defaultValue=a!=null?""+Gt(a):""}function Or(t,i,a,l){if(i==null){if(l!=null){if(a!=null)throw Error(s(92));if(he(l)){if(1<l.length)throw Error(s(93));l=l[0]}a=l}a==null&&(a=""),i=a}a=Gt(i),t.defaultValue=a,l=t.textContent,l===a&&l!==""&&l!==null&&(t.value=l),et(t)}function Tn(t,i){if(i){var a=t.firstChild;if(a&&a===t.lastChild&&a.nodeType===3){a.nodeValue=i;return}}t.textContent=i}var Fu=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Xo(t,i,a){var l=i.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?l?t.setProperty(i,""):i==="float"?t.cssFloat="":t[i]="":l?t.setProperty(i,a):typeof a!="number"||a===0||Fu.has(i)?i==="float"?t.cssFloat=a:t[i]=(""+a).trim():t[i]=a+"px"}function Wo(t,i,a){if(i!=null&&typeof i!="object")throw Error(s(62));if(t=t.style,a!=null){for(var l in a)!a.hasOwnProperty(l)||i!=null&&i.hasOwnProperty(l)||(l.indexOf("--")===0?t.setProperty(l,""):l==="float"?t.cssFloat="":t[l]="");for(var h in i)l=i[h],i.hasOwnProperty(h)&&a[h]!==l&&Xo(t,h,l)}else for(var d in i)i.hasOwnProperty(d)&&Xo(t,d,i[d])}function Sa(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Gu=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Mr=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Aa(t){return Mr.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}function li(){}var Jo=null;function $n(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Vr=null,Mi=null;function ks(t){var i=Gn(t);if(i&&(t=i.stateNode)){var a=t[Ft]||null;e:switch(t=i.stateNode,i.type){case"input":if(ba(t,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),i=a.name,a.type==="radio"&&i!=null){for(a=t;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+En(""+i)+'"][type="radio"]'),i=0;i<a.length;i++){var l=a[i];if(l!==t&&l.form===t.form){var h=l[Ft]||null;if(!h)throw Error(s(90));ba(l,h.value,h.defaultValue,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name)}}for(i=0;i<a.length;i++)l=a[i],l.form===t.form&&Ms(l)}break e;case"textarea":Hu(t,a.value,a.defaultValue);break e;case"select":i=a.value,i!=null&&Nr(t,!!a.multiple,i,!1)}}}var wa=!1;function kr(t,i,a){if(wa)return t(i,a);wa=!0;try{var l=t(i);return l}finally{if(wa=!1,(Vr!==null||Mi!==null)&&(jc(),Vr&&(i=Vr,t=Mi,Mi=Vr=null,ks(i),t)))for(i=0;i<t.length;i++)ks(t[i])}}function ui(t,i){var a=t.stateNode;if(a===null)return null;var l=a[Ft]||null;if(l===null)return null;a=l[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(t=t.type,l=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!l;break e;default:t=!1}if(t)return null;if(a&&typeof a!="function")throw Error(s(231,i,typeof a));return a}var Qn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ps=!1;if(Qn)try{var it={};Object.defineProperty(it,"passive",{get:function(){Ps=!0}}),window.addEventListener("test",it,it),window.removeEventListener("test",it,it)}catch{Ps=!1}var Vi=null,Zo=null,Ls=null;function el(){if(Ls)return Ls;var t,i=Zo,a=i.length,l,h="value"in Vi?Vi.value:Vi.textContent,d=h.length;for(t=0;t<a&&i[t]===h[t];t++);var v=a-t;for(l=1;l<=v&&i[a-l]===h[d-l];l++);return Ls=h.slice(t,1<l?1-l:void 0)}function js(t){var i=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&i===13&&(t=13)):t=i,t===10&&(t=13),32<=t||t===13?t:0}function er(){return!0}function ci(){return!1}function Wt(t){function i(a,l,h,d,v){this._reactName=a,this._targetInst=h,this.type=l,this.nativeEvent=d,this.target=v,this.currentTarget=null;for(var S in t)t.hasOwnProperty(S)&&(a=t[S],this[S]=a?a(d):d[S]);return this.isDefaultPrevented=(d.defaultPrevented!=null?d.defaultPrevented:d.returnValue===!1)?er:ci,this.isPropagationStopped=ci,this}return T(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=er)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=er)},persist:function(){},isPersistent:er}),i}var tr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ki=Wt(tr),Pr=T({},tr,{view:0,detail:0}),tl=Wt(Pr),Lr,Ra,Pi,Ca=T({},Pr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:jr,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Pi&&(Pi&&t.type==="mousemove"?(Lr=t.screenX-Pi.screenX,Ra=t.screenY-Pi.screenY):Ra=Lr=0,Pi=t),Lr)},movementY:function(t){return"movementY"in t?t.movementY:Ra}}),nl=Wt(Ca),Us=T({},Ca,{dataTransfer:0}),$u=Wt(Us),Qu=T({},Pr,{relatedTarget:0}),zs=Wt(Qu),il=T({},tr,{animationName:0,elapsedTime:0,pseudoElement:0}),Yu=Wt(il),xa=T({},tr,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Ku=Wt(xa),Xu=T({},tr,{data:0}),Li=Wt(Xu),Wu={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Ju={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Zu={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ec(t){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(t):(t=Zu[t])?!!i[t]:!1}function jr(){return ec}var gn=T({},Pr,{key:function(t){if(t.key){var i=Wu[t.key]||t.key;if(i!=="Unidentified")return i}return t.type==="keypress"?(t=js(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Ju[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:jr,charCode:function(t){return t.type==="keypress"?js(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?js(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),tc=Wt(gn),nc=T({},Ca,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),nr=Wt(nc),c=T({},Pr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:jr}),y=Wt(c),_=T({},tr,{propertyName:0,elapsedTime:0,pseudoElement:0}),C=Wt(_),H=T({},Ca,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),K=Wt(H),fe=T({},tr,{newState:0,oldState:0}),Me=Wt(fe),bt=[9,13,27,32],Je=Qn&&"CompositionEvent"in window,dt=null;Qn&&"documentMode"in document&&(dt=document.documentMode);var Yn=Qn&&"TextEvent"in window&&!dt,ji=Qn&&(!Je||dt&&8<dt&&11>=dt),hi=" ",fi=!1;function Bs(t,i){switch(t){case"keyup":return bt.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ia(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Da=!1;function xS(t,i){switch(t){case"compositionend":return Ia(i);case"keypress":return i.which!==32?null:(fi=!0,hi);case"textInput":return t=i.data,t===hi&&fi?null:t;default:return null}}function IS(t,i){if(Da)return t==="compositionend"||!Je&&Bs(t,i)?(t=el(),Ls=Zo=Vi=null,Da=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return ji&&i.locale!=="ko"?null:i.data;default:return null}}var DS={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function wp(t){var i=t&&t.nodeName&&t.nodeName.toLowerCase();return i==="input"?!!DS[t.type]:i==="textarea"}function Rp(t,i,a,l){Vr?Mi?Mi.push(l):Mi=[l]:Vr=l,i=Gc(i,"onChange"),0<i.length&&(a=new ki("onChange","change",null,a,l),t.push({event:a,listeners:i}))}var rl=null,sl=null;function NS(t){l_(t,0)}function ic(t){var i=Dn(t);if(Ms(i))return t}function Cp(t,i){if(t==="change")return i}var xp=!1;if(Qn){var Cf;if(Qn){var xf="oninput"in document;if(!xf){var Ip=document.createElement("div");Ip.setAttribute("oninput","return;"),xf=typeof Ip.oninput=="function"}Cf=xf}else Cf=!1;xp=Cf&&(!document.documentMode||9<document.documentMode)}function Dp(){rl&&(rl.detachEvent("onpropertychange",Np),sl=rl=null)}function Np(t){if(t.propertyName==="value"&&ic(sl)){var i=[];Rp(i,sl,t,$n(t)),kr(NS,i)}}function OS(t,i,a){t==="focusin"?(Dp(),rl=i,sl=a,rl.attachEvent("onpropertychange",Np)):t==="focusout"&&Dp()}function MS(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return ic(sl)}function VS(t,i){if(t==="click")return ic(i)}function kS(t,i){if(t==="input"||t==="change")return ic(i)}function PS(t,i){return t===i&&(t!==0||1/t===1/i)||t!==t&&i!==i}var On=typeof Object.is=="function"?Object.is:PS;function al(t,i){if(On(t,i))return!0;if(typeof t!="object"||t===null||typeof i!="object"||i===null)return!1;var a=Object.keys(t),l=Object.keys(i);if(a.length!==l.length)return!1;for(l=0;l<a.length;l++){var h=a[l];if(!Rt.call(i,h)||!On(t[h],i[h]))return!1}return!0}function Op(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Mp(t,i){var a=Op(t);t=0;for(var l;a;){if(a.nodeType===3){if(l=t+a.textContent.length,t<=i&&l>=i)return{node:a,offset:i-t};t=l}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=Op(a)}}function Vp(t,i){return t&&i?t===i?!0:t&&t.nodeType===3?!1:i&&i.nodeType===3?Vp(t,i.parentNode):"contains"in t?t.contains(i):t.compareDocumentPosition?!!(t.compareDocumentPosition(i)&16):!1:!1}function kp(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var i=Oi(t.document);i instanceof t.HTMLIFrameElement;){try{var a=typeof i.contentWindow.location.href=="string"}catch{a=!1}if(a)t=i.contentWindow;else break;i=Oi(t.document)}return i}function If(t){var i=t&&t.nodeName&&t.nodeName.toLowerCase();return i&&(i==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||i==="textarea"||t.contentEditable==="true")}var LS=Qn&&"documentMode"in document&&11>=document.documentMode,Na=null,Df=null,ol=null,Nf=!1;function Pp(t,i,a){var l=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;Nf||Na==null||Na!==Oi(l)||(l=Na,"selectionStart"in l&&If(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),ol&&al(ol,l)||(ol=l,l=Gc(Df,"onSelect"),0<l.length&&(i=new ki("onSelect","select",null,i,a),t.push({event:i,listeners:l}),i.target=Na)))}function qs(t,i){var a={};return a[t.toLowerCase()]=i.toLowerCase(),a["Webkit"+t]="webkit"+i,a["Moz"+t]="moz"+i,a}var Oa={animationend:qs("Animation","AnimationEnd"),animationiteration:qs("Animation","AnimationIteration"),animationstart:qs("Animation","AnimationStart"),transitionrun:qs("Transition","TransitionRun"),transitionstart:qs("Transition","TransitionStart"),transitioncancel:qs("Transition","TransitionCancel"),transitionend:qs("Transition","TransitionEnd")},Of={},Lp={};Qn&&(Lp=document.createElement("div").style,"AnimationEvent"in window||(delete Oa.animationend.animation,delete Oa.animationiteration.animation,delete Oa.animationstart.animation),"TransitionEvent"in window||delete Oa.transitionend.transition);function Hs(t){if(Of[t])return Of[t];if(!Oa[t])return t;var i=Oa[t],a;for(a in i)if(i.hasOwnProperty(a)&&a in Lp)return Of[t]=i[a];return t}var jp=Hs("animationend"),Up=Hs("animationiteration"),zp=Hs("animationstart"),jS=Hs("transitionrun"),US=Hs("transitionstart"),zS=Hs("transitioncancel"),Bp=Hs("transitionend"),qp=new Map,Mf="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Mf.push("scrollEnd");function di(t,i){qp.set(t,i),Di(i,[t])}var rc=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var i=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(i))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)},Kn=[],Ma=0,Vf=0;function sc(){for(var t=Ma,i=Vf=Ma=0;i<t;){var a=Kn[i];Kn[i++]=null;var l=Kn[i];Kn[i++]=null;var h=Kn[i];Kn[i++]=null;var d=Kn[i];if(Kn[i++]=null,l!==null&&h!==null){var v=l.pending;v===null?h.next=h:(h.next=v.next,v.next=h),l.pending=h}d!==0&&Hp(a,h,d)}}function ac(t,i,a,l){Kn[Ma++]=t,Kn[Ma++]=i,Kn[Ma++]=a,Kn[Ma++]=l,Vf|=l,t.lanes|=l,t=t.alternate,t!==null&&(t.lanes|=l)}function kf(t,i,a,l){return ac(t,i,a,l),oc(t)}function Fs(t,i){return ac(t,null,null,i),oc(t)}function Hp(t,i,a){t.lanes|=a;var l=t.alternate;l!==null&&(l.lanes|=a);for(var h=!1,d=t.return;d!==null;)d.childLanes|=a,l=d.alternate,l!==null&&(l.childLanes|=a),d.tag===22&&(t=d.stateNode,t===null||t._visibility&1||(h=!0)),t=d,d=d.return;return t.tag===3?(d=t.stateNode,h&&i!==null&&(h=31-Tt(a),t=d.hiddenUpdates,l=t[h],l===null?t[h]=[i]:l.push(i),i.lane=a|536870912),d):null}function oc(t){if(50<Il)throw Il=0,Fd=null,Error(s(185));for(var i=t.return;i!==null;)t=i,i=t.return;return t.tag===3?t.stateNode:null}var Va={};function BS(t,i,a,l){this.tag=t,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Mn(t,i,a,l){return new BS(t,i,a,l)}function Pf(t){return t=t.prototype,!(!t||!t.isReactComponent)}function ir(t,i){var a=t.alternate;return a===null?(a=Mn(t.tag,i,t.key,t.mode),a.elementType=t.elementType,a.type=t.type,a.stateNode=t.stateNode,a.alternate=t,t.alternate=a):(a.pendingProps=i,a.type=t.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=t.flags&65011712,a.childLanes=t.childLanes,a.lanes=t.lanes,a.child=t.child,a.memoizedProps=t.memoizedProps,a.memoizedState=t.memoizedState,a.updateQueue=t.updateQueue,i=t.dependencies,a.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},a.sibling=t.sibling,a.index=t.index,a.ref=t.ref,a.refCleanup=t.refCleanup,a}function Fp(t,i){t.flags&=65011714;var a=t.alternate;return a===null?(t.childLanes=0,t.lanes=i,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=a.childLanes,t.lanes=a.lanes,t.child=a.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=a.memoizedProps,t.memoizedState=a.memoizedState,t.updateQueue=a.updateQueue,t.type=a.type,i=a.dependencies,t.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),t}function lc(t,i,a,l,h,d){var v=0;if(l=t,typeof t=="function")Pf(t)&&(v=1);else if(typeof t=="string")v=$1(t,a,de.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case w:return t=Mn(31,a,i,h),t.elementType=w,t.lanes=d,t;case $:return Gs(a.children,h,d,i);case B:v=8,h|=24;break;case Z:return t=Mn(12,a,i,h|2),t.elementType=Z,t.lanes=d,t;case _e:return t=Mn(13,a,i,h),t.elementType=_e,t.lanes=d,t;case Ee:return t=Mn(19,a,i,h),t.elementType=Ee,t.lanes=d,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case q:v=10;break e;case J:v=9;break e;case ge:v=11;break e;case O:v=14;break e;case x:v=16,l=null;break e}v=29,a=Error(s(130,t===null?"null":typeof t,"")),l=null}return i=Mn(v,a,i,h),i.elementType=t,i.type=l,i.lanes=d,i}function Gs(t,i,a,l){return t=Mn(7,t,l,i),t.lanes=a,t}function Lf(t,i,a){return t=Mn(6,t,null,i),t.lanes=a,t}function Gp(t){var i=Mn(18,null,null,0);return i.stateNode=t,i}function jf(t,i,a){return i=Mn(4,t.children!==null?t.children:[],t.key,i),i.lanes=a,i.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},i}var $p=new WeakMap;function Xn(t,i){if(typeof t=="object"&&t!==null){var a=$p.get(t);return a!==void 0?a:(i={value:t,source:i,stack:jo(i)},$p.set(t,i),i)}return{value:t,source:i,stack:jo(i)}}var ka=[],Pa=0,uc=null,ll=0,Wn=[],Jn=0,Ur=null,Ui=1,zi="";function rr(t,i){ka[Pa++]=ll,ka[Pa++]=uc,uc=t,ll=i}function Qp(t,i,a){Wn[Jn++]=Ui,Wn[Jn++]=zi,Wn[Jn++]=Ur,Ur=t;var l=Ui;t=zi;var h=32-Tt(l)-1;l&=~(1<<h),a+=1;var d=32-Tt(i)+h;if(30<d){var v=h-h%5;d=(l&(1<<v)-1).toString(32),l>>=v,h-=v,Ui=1<<32-Tt(i)+h|a<<h|l,zi=d+t}else Ui=1<<d|a<<h|l,zi=t}function Uf(t){t.return!==null&&(rr(t,1),Qp(t,1,0))}function zf(t){for(;t===uc;)uc=ka[--Pa],ka[Pa]=null,ll=ka[--Pa],ka[Pa]=null;for(;t===Ur;)Ur=Wn[--Jn],Wn[Jn]=null,zi=Wn[--Jn],Wn[Jn]=null,Ui=Wn[--Jn],Wn[Jn]=null}function Yp(t,i){Wn[Jn++]=Ui,Wn[Jn++]=zi,Wn[Jn++]=Ur,Ui=i.id,zi=i.overflow,Ur=t}var Jt=null,ct=null,Fe=!1,zr=null,Zn=!1,Bf=Error(s(519));function Br(t){var i=Error(s(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw ul(Xn(i,t)),Bf}function Kp(t){var i=t.stateNode,a=t.type,l=t.memoizedProps;switch(i[xt]=t,i[Ft]=l,a){case"dialog":je("cancel",i),je("close",i);break;case"iframe":case"object":case"embed":je("load",i);break;case"video":case"audio":for(a=0;a<Nl.length;a++)je(Nl[a],i);break;case"source":je("error",i);break;case"img":case"image":case"link":je("error",i),je("load",i);break;case"details":je("toggle",i);break;case"input":je("invalid",i),qu(i,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0);break;case"select":je("invalid",i);break;case"textarea":je("invalid",i),Or(i,l.value,l.defaultValue,l.children)}a=l.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||i.textContent===""+a||l.suppressHydrationWarning===!0||f_(i.textContent,a)?(l.popover!=null&&(je("beforetoggle",i),je("toggle",i)),l.onScroll!=null&&je("scroll",i),l.onScrollEnd!=null&&je("scrollend",i),l.onClick!=null&&(i.onclick=li),i=!0):i=!1,i||Br(t,!0)}function Xp(t){for(Jt=t.return;Jt;)switch(Jt.tag){case 5:case 31:case 13:Zn=!1;return;case 27:case 3:Zn=!0;return;default:Jt=Jt.return}}function La(t){if(t!==Jt)return!1;if(!Fe)return Xp(t),Fe=!0,!1;var i=t.tag,a;if((a=i!==3&&i!==27)&&((a=i===5)&&(a=t.type,a=!(a!=="form"&&a!=="button")||sm(t.type,t.memoizedProps)),a=!a),a&&ct&&Br(t),Xp(t),i===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(s(317));ct=T_(t)}else if(i===31){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(s(317));ct=T_(t)}else i===27?(i=ct,ts(t.type)?(t=cm,cm=null,ct=t):ct=i):ct=Jt?ti(t.stateNode.nextSibling):null;return!0}function $s(){ct=Jt=null,Fe=!1}function qf(){var t=zr;return t!==null&&(wn===null?wn=t:wn.push.apply(wn,t),zr=null),t}function ul(t){zr===null?zr=[t]:zr.push(t)}var Hf=k(null),Qs=null,sr=null;function qr(t,i,a){ce(Hf,i._currentValue),i._currentValue=a}function ar(t){t._currentValue=Hf.current,ee(Hf)}function Ff(t,i,a){for(;t!==null;){var l=t.alternate;if((t.childLanes&i)!==i?(t.childLanes|=i,l!==null&&(l.childLanes|=i)):l!==null&&(l.childLanes&i)!==i&&(l.childLanes|=i),t===a)break;t=t.return}}function Gf(t,i,a,l){var h=t.child;for(h!==null&&(h.return=t);h!==null;){var d=h.dependencies;if(d!==null){var v=h.child;d=d.firstContext;e:for(;d!==null;){var S=d;d=h;for(var M=0;M<i.length;M++)if(S.context===i[M]){d.lanes|=a,S=d.alternate,S!==null&&(S.lanes|=a),Ff(d.return,a,t),l||(v=null);break e}d=S.next}}else if(h.tag===18){if(v=h.return,v===null)throw Error(s(341));v.lanes|=a,d=v.alternate,d!==null&&(d.lanes|=a),Ff(v,a,t),v=null}else v=h.child;if(v!==null)v.return=h;else for(v=h;v!==null;){if(v===t){v=null;break}if(h=v.sibling,h!==null){h.return=v.return,v=h;break}v=v.return}h=v}}function ja(t,i,a,l){t=null;for(var h=i,d=!1;h!==null;){if(!d){if((h.flags&524288)!==0)d=!0;else if((h.flags&262144)!==0)break}if(h.tag===10){var v=h.alternate;if(v===null)throw Error(s(387));if(v=v.memoizedProps,v!==null){var S=h.type;On(h.pendingProps.value,v.value)||(t!==null?t.push(S):t=[S])}}else if(h===Ce.current){if(v=h.alternate,v===null)throw Error(s(387));v.memoizedState.memoizedState!==h.memoizedState.memoizedState&&(t!==null?t.push(Pl):t=[Pl])}h=h.return}t!==null&&Gf(i,t,a,l),i.flags|=262144}function cc(t){for(t=t.firstContext;t!==null;){if(!On(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function Ys(t){Qs=t,sr=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function Zt(t){return Wp(Qs,t)}function hc(t,i){return Qs===null&&Ys(t),Wp(t,i)}function Wp(t,i){var a=i._currentValue;if(i={context:i,memoizedValue:a,next:null},sr===null){if(t===null)throw Error(s(308));sr=i,t.dependencies={lanes:0,firstContext:i},t.flags|=524288}else sr=sr.next=i;return a}var qS=typeof AbortController<"u"?AbortController:function(){var t=[],i=this.signal={aborted:!1,addEventListener:function(a,l){t.push(l)}};this.abort=function(){i.aborted=!0,t.forEach(function(a){return a()})}},HS=r.unstable_scheduleCallback,FS=r.unstable_NormalPriority,Nt={$$typeof:q,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function $f(){return{controller:new qS,data:new Map,refCount:0}}function cl(t){t.refCount--,t.refCount===0&&HS(FS,function(){t.controller.abort()})}var hl=null,Qf=0,Ua=0,za=null;function GS(t,i){if(hl===null){var a=hl=[];Qf=0,Ua=Xd(),za={status:"pending",value:void 0,then:function(l){a.push(l)}}}return Qf++,i.then(Jp,Jp),i}function Jp(){if(--Qf===0&&hl!==null){za!==null&&(za.status="fulfilled");var t=hl;hl=null,Ua=0,za=null;for(var i=0;i<t.length;i++)(0,t[i])()}}function $S(t,i){var a=[],l={status:"pending",value:null,reason:null,then:function(h){a.push(h)}};return t.then(function(){l.status="fulfilled",l.value=i;for(var h=0;h<a.length;h++)(0,a[h])(i)},function(h){for(l.status="rejected",l.reason=h,h=0;h<a.length;h++)(0,a[h])(void 0)}),l}var Zp=z.S;z.S=function(t,i){Pv=mn(),typeof i=="object"&&i!==null&&typeof i.then=="function"&&GS(t,i),Zp!==null&&Zp(t,i)};var Ks=k(null);function Yf(){var t=Ks.current;return t!==null?t:ut.pooledCache}function fc(t,i){i===null?ce(Ks,Ks.current):ce(Ks,i.pool)}function ey(){var t=Yf();return t===null?null:{parent:Nt._currentValue,pool:t}}var Ba=Error(s(460)),Kf=Error(s(474)),dc=Error(s(542)),mc={then:function(){}};function ty(t){return t=t.status,t==="fulfilled"||t==="rejected"}function ny(t,i,a){switch(a=t[a],a===void 0?t.push(i):a!==i&&(i.then(li,li),i=a),i.status){case"fulfilled":return i.value;case"rejected":throw t=i.reason,ry(t),t;default:if(typeof i.status=="string")i.then(li,li);else{if(t=ut,t!==null&&100<t.shellSuspendCounter)throw Error(s(482));t=i,t.status="pending",t.then(function(l){if(i.status==="pending"){var h=i;h.status="fulfilled",h.value=l}},function(l){if(i.status==="pending"){var h=i;h.status="rejected",h.reason=l}})}switch(i.status){case"fulfilled":return i.value;case"rejected":throw t=i.reason,ry(t),t}throw Ws=i,Ba}}function Xs(t){try{var i=t._init;return i(t._payload)}catch(a){throw a!==null&&typeof a=="object"&&typeof a.then=="function"?(Ws=a,Ba):a}}var Ws=null;function iy(){if(Ws===null)throw Error(s(459));var t=Ws;return Ws=null,t}function ry(t){if(t===Ba||t===dc)throw Error(s(483))}var qa=null,fl=0;function gc(t){var i=fl;return fl+=1,qa===null&&(qa=[]),ny(qa,t,i)}function dl(t,i){i=i.props.ref,t.ref=i!==void 0?i:null}function pc(t,i){throw i.$$typeof===I?Error(s(525)):(t=Object.prototype.toString.call(i),Error(s(31,t==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":t)))}function sy(t){function i(U,L){if(t){var F=U.deletions;F===null?(U.deletions=[L],U.flags|=16):F.push(L)}}function a(U,L){if(!t)return null;for(;L!==null;)i(U,L),L=L.sibling;return null}function l(U){for(var L=new Map;U!==null;)U.key!==null?L.set(U.key,U):L.set(U.index,U),U=U.sibling;return L}function h(U,L){return U=ir(U,L),U.index=0,U.sibling=null,U}function d(U,L,F){return U.index=F,t?(F=U.alternate,F!==null?(F=F.index,F<L?(U.flags|=67108866,L):F):(U.flags|=67108866,L)):(U.flags|=1048576,L)}function v(U){return t&&U.alternate===null&&(U.flags|=67108866),U}function S(U,L,F,ie){return L===null||L.tag!==6?(L=Lf(F,U.mode,ie),L.return=U,L):(L=h(L,F),L.return=U,L)}function M(U,L,F,ie){var be=F.type;return be===$?te(U,L,F.props.children,ie,F.key):L!==null&&(L.elementType===be||typeof be=="object"&&be!==null&&be.$$typeof===x&&Xs(be)===L.type)?(L=h(L,F.props),dl(L,F),L.return=U,L):(L=lc(F.type,F.key,F.props,null,U.mode,ie),dl(L,F),L.return=U,L)}function G(U,L,F,ie){return L===null||L.tag!==4||L.stateNode.containerInfo!==F.containerInfo||L.stateNode.implementation!==F.implementation?(L=jf(F,U.mode,ie),L.return=U,L):(L=h(L,F.children||[]),L.return=U,L)}function te(U,L,F,ie,be){return L===null||L.tag!==7?(L=Gs(F,U.mode,ie,be),L.return=U,L):(L=h(L,F),L.return=U,L)}function re(U,L,F){if(typeof L=="string"&&L!==""||typeof L=="number"||typeof L=="bigint")return L=Lf(""+L,U.mode,F),L.return=U,L;if(typeof L=="object"&&L!==null){switch(L.$$typeof){case P:return F=lc(L.type,L.key,L.props,null,U.mode,F),dl(F,L),F.return=U,F;case j:return L=jf(L,U.mode,F),L.return=U,L;case x:return L=Xs(L),re(U,L,F)}if(he(L)||N(L))return L=Gs(L,U.mode,F,null),L.return=U,L;if(typeof L.then=="function")return re(U,gc(L),F);if(L.$$typeof===q)return re(U,hc(U,L),F);pc(U,L)}return null}function Q(U,L,F,ie){var be=L!==null?L.key:null;if(typeof F=="string"&&F!==""||typeof F=="number"||typeof F=="bigint")return be!==null?null:S(U,L,""+F,ie);if(typeof F=="object"&&F!==null){switch(F.$$typeof){case P:return F.key===be?M(U,L,F,ie):null;case j:return F.key===be?G(U,L,F,ie):null;case x:return F=Xs(F),Q(U,L,F,ie)}if(he(F)||N(F))return be!==null?null:te(U,L,F,ie,null);if(typeof F.then=="function")return Q(U,L,gc(F),ie);if(F.$$typeof===q)return Q(U,L,hc(U,F),ie);pc(U,F)}return null}function X(U,L,F,ie,be){if(typeof ie=="string"&&ie!==""||typeof ie=="number"||typeof ie=="bigint")return U=U.get(F)||null,S(L,U,""+ie,be);if(typeof ie=="object"&&ie!==null){switch(ie.$$typeof){case P:return U=U.get(ie.key===null?F:ie.key)||null,M(L,U,ie,be);case j:return U=U.get(ie.key===null?F:ie.key)||null,G(L,U,ie,be);case x:return ie=Xs(ie),X(U,L,F,ie,be)}if(he(ie)||N(ie))return U=U.get(F)||null,te(L,U,ie,be,null);if(typeof ie.then=="function")return X(U,L,F,gc(ie),be);if(ie.$$typeof===q)return X(U,L,F,hc(L,ie),be);pc(L,ie)}return null}function ye(U,L,F,ie){for(var be=null,Ke=null,ve=L,ke=L=0,ze=null;ve!==null&&ke<F.length;ke++){ve.index>ke?(ze=ve,ve=null):ze=ve.sibling;var Xe=Q(U,ve,F[ke],ie);if(Xe===null){ve===null&&(ve=ze);break}t&&ve&&Xe.alternate===null&&i(U,ve),L=d(Xe,L,ke),Ke===null?be=Xe:Ke.sibling=Xe,Ke=Xe,ve=ze}if(ke===F.length)return a(U,ve),Fe&&rr(U,ke),be;if(ve===null){for(;ke<F.length;ke++)ve=re(U,F[ke],ie),ve!==null&&(L=d(ve,L,ke),Ke===null?be=ve:Ke.sibling=ve,Ke=ve);return Fe&&rr(U,ke),be}for(ve=l(ve);ke<F.length;ke++)ze=X(ve,U,ke,F[ke],ie),ze!==null&&(t&&ze.alternate!==null&&ve.delete(ze.key===null?ke:ze.key),L=d(ze,L,ke),Ke===null?be=ze:Ke.sibling=ze,Ke=ze);return t&&ve.forEach(function(as){return i(U,as)}),Fe&&rr(U,ke),be}function Re(U,L,F,ie){if(F==null)throw Error(s(151));for(var be=null,Ke=null,ve=L,ke=L=0,ze=null,Xe=F.next();ve!==null&&!Xe.done;ke++,Xe=F.next()){ve.index>ke?(ze=ve,ve=null):ze=ve.sibling;var as=Q(U,ve,Xe.value,ie);if(as===null){ve===null&&(ve=ze);break}t&&ve&&as.alternate===null&&i(U,ve),L=d(as,L,ke),Ke===null?be=as:Ke.sibling=as,Ke=as,ve=ze}if(Xe.done)return a(U,ve),Fe&&rr(U,ke),be;if(ve===null){for(;!Xe.done;ke++,Xe=F.next())Xe=re(U,Xe.value,ie),Xe!==null&&(L=d(Xe,L,ke),Ke===null?be=Xe:Ke.sibling=Xe,Ke=Xe);return Fe&&rr(U,ke),be}for(ve=l(ve);!Xe.done;ke++,Xe=F.next())Xe=X(ve,U,ke,Xe.value,ie),Xe!==null&&(t&&Xe.alternate!==null&&ve.delete(Xe.key===null?ke:Xe.key),L=d(Xe,L,ke),Ke===null?be=Xe:Ke.sibling=Xe,Ke=Xe);return t&&ve.forEach(function(iA){return i(U,iA)}),Fe&&rr(U,ke),be}function at(U,L,F,ie){if(typeof F=="object"&&F!==null&&F.type===$&&F.key===null&&(F=F.props.children),typeof F=="object"&&F!==null){switch(F.$$typeof){case P:e:{for(var be=F.key;L!==null;){if(L.key===be){if(be=F.type,be===$){if(L.tag===7){a(U,L.sibling),ie=h(L,F.props.children),ie.return=U,U=ie;break e}}else if(L.elementType===be||typeof be=="object"&&be!==null&&be.$$typeof===x&&Xs(be)===L.type){a(U,L.sibling),ie=h(L,F.props),dl(ie,F),ie.return=U,U=ie;break e}a(U,L);break}else i(U,L);L=L.sibling}F.type===$?(ie=Gs(F.props.children,U.mode,ie,F.key),ie.return=U,U=ie):(ie=lc(F.type,F.key,F.props,null,U.mode,ie),dl(ie,F),ie.return=U,U=ie)}return v(U);case j:e:{for(be=F.key;L!==null;){if(L.key===be)if(L.tag===4&&L.stateNode.containerInfo===F.containerInfo&&L.stateNode.implementation===F.implementation){a(U,L.sibling),ie=h(L,F.children||[]),ie.return=U,U=ie;break e}else{a(U,L);break}else i(U,L);L=L.sibling}ie=jf(F,U.mode,ie),ie.return=U,U=ie}return v(U);case x:return F=Xs(F),at(U,L,F,ie)}if(he(F))return ye(U,L,F,ie);if(N(F)){if(be=N(F),typeof be!="function")throw Error(s(150));return F=be.call(F),Re(U,L,F,ie)}if(typeof F.then=="function")return at(U,L,gc(F),ie);if(F.$$typeof===q)return at(U,L,hc(U,F),ie);pc(U,F)}return typeof F=="string"&&F!==""||typeof F=="number"||typeof F=="bigint"?(F=""+F,L!==null&&L.tag===6?(a(U,L.sibling),ie=h(L,F),ie.return=U,U=ie):(a(U,L),ie=Lf(F,U.mode,ie),ie.return=U,U=ie),v(U)):a(U,L)}return function(U,L,F,ie){try{fl=0;var be=at(U,L,F,ie);return qa=null,be}catch(ve){if(ve===Ba||ve===dc)throw ve;var Ke=Mn(29,ve,null,U.mode);return Ke.lanes=ie,Ke.return=U,Ke}}}var Js=sy(!0),ay=sy(!1),Hr=!1;function Xf(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Wf(t,i){t=t.updateQueue,i.updateQueue===t&&(i.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function Fr(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function Gr(t,i,a){var l=t.updateQueue;if(l===null)return null;if(l=l.shared,(Ze&2)!==0){var h=l.pending;return h===null?i.next=i:(i.next=h.next,h.next=i),l.pending=i,i=oc(t),Hp(t,null,a),i}return ac(t,l,i,a),oc(t)}function ml(t,i,a){if(i=i.updateQueue,i!==null&&(i=i.shared,(a&4194048)!==0)){var l=i.lanes;l&=t.pendingLanes,a|=l,i.lanes=a,Bo(t,a)}}function Jf(t,i){var a=t.updateQueue,l=t.alternate;if(l!==null&&(l=l.updateQueue,a===l)){var h=null,d=null;if(a=a.firstBaseUpdate,a!==null){do{var v={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};d===null?h=d=v:d=d.next=v,a=a.next}while(a!==null);d===null?h=d=i:d=d.next=i}else h=d=i;a={baseState:l.baseState,firstBaseUpdate:h,lastBaseUpdate:d,shared:l.shared,callbacks:l.callbacks},t.updateQueue=a;return}t=a.lastBaseUpdate,t===null?a.firstBaseUpdate=i:t.next=i,a.lastBaseUpdate=i}var Zf=!1;function gl(){if(Zf){var t=za;if(t!==null)throw t}}function pl(t,i,a,l){Zf=!1;var h=t.updateQueue;Hr=!1;var d=h.firstBaseUpdate,v=h.lastBaseUpdate,S=h.shared.pending;if(S!==null){h.shared.pending=null;var M=S,G=M.next;M.next=null,v===null?d=G:v.next=G,v=M;var te=t.alternate;te!==null&&(te=te.updateQueue,S=te.lastBaseUpdate,S!==v&&(S===null?te.firstBaseUpdate=G:S.next=G,te.lastBaseUpdate=M))}if(d!==null){var re=h.baseState;v=0,te=G=M=null,S=d;do{var Q=S.lane&-536870913,X=Q!==S.lane;if(X?(Ue&Q)===Q:(l&Q)===Q){Q!==0&&Q===Ua&&(Zf=!0),te!==null&&(te=te.next={lane:0,tag:S.tag,payload:S.payload,callback:null,next:null});e:{var ye=t,Re=S;Q=i;var at=a;switch(Re.tag){case 1:if(ye=Re.payload,typeof ye=="function"){re=ye.call(at,re,Q);break e}re=ye;break e;case 3:ye.flags=ye.flags&-65537|128;case 0:if(ye=Re.payload,Q=typeof ye=="function"?ye.call(at,re,Q):ye,Q==null)break e;re=T({},re,Q);break e;case 2:Hr=!0}}Q=S.callback,Q!==null&&(t.flags|=64,X&&(t.flags|=8192),X=h.callbacks,X===null?h.callbacks=[Q]:X.push(Q))}else X={lane:Q,tag:S.tag,payload:S.payload,callback:S.callback,next:null},te===null?(G=te=X,M=re):te=te.next=X,v|=Q;if(S=S.next,S===null){if(S=h.shared.pending,S===null)break;X=S,S=X.next,X.next=null,h.lastBaseUpdate=X,h.shared.pending=null}}while(!0);te===null&&(M=re),h.baseState=M,h.firstBaseUpdate=G,h.lastBaseUpdate=te,d===null&&(h.shared.lanes=0),Xr|=v,t.lanes=v,t.memoizedState=re}}function oy(t,i){if(typeof t!="function")throw Error(s(191,t));t.call(i)}function ly(t,i){var a=t.callbacks;if(a!==null)for(t.callbacks=null,t=0;t<a.length;t++)oy(a[t],i)}var Ha=k(null),yc=k(0);function uy(t,i){t=gr,ce(yc,t),ce(Ha,i),gr=t|i.baseLanes}function ed(){ce(yc,gr),ce(Ha,Ha.current)}function td(){gr=yc.current,ee(Ha),ee(yc)}var Vn=k(null),ei=null;function $r(t){var i=t.alternate;ce(St,St.current&1),ce(Vn,t),ei===null&&(i===null||Ha.current!==null||i.memoizedState!==null)&&(ei=t)}function nd(t){ce(St,St.current),ce(Vn,t),ei===null&&(ei=t)}function cy(t){t.tag===22?(ce(St,St.current),ce(Vn,t),ei===null&&(ei=t)):Qr()}function Qr(){ce(St,St.current),ce(Vn,Vn.current)}function kn(t){ee(Vn),ei===t&&(ei=null),ee(St)}var St=k(0);function vc(t){for(var i=t;i!==null;){if(i.tag===13){var a=i.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||lm(a)||um(a)))return i}else if(i.tag===19&&(i.memoizedProps.revealOrder==="forwards"||i.memoizedProps.revealOrder==="backwards"||i.memoizedProps.revealOrder==="unstable_legacy-backwards"||i.memoizedProps.revealOrder==="together")){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===t)break;for(;i.sibling===null;){if(i.return===null||i.return===t)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var or=0,Ve=null,rt=null,Ot=null,_c=!1,Fa=!1,Zs=!1,Ec=0,yl=0,Ga=null,QS=0;function vt(){throw Error(s(321))}function id(t,i){if(i===null)return!1;for(var a=0;a<i.length&&a<t.length;a++)if(!On(t[a],i[a]))return!1;return!0}function rd(t,i,a,l,h,d){return or=d,Ve=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,z.H=t===null||t.memoizedState===null?Qy:_d,Zs=!1,d=a(l,h),Zs=!1,Fa&&(d=fy(i,a,l,h)),hy(t),d}function hy(t){z.H=El;var i=rt!==null&&rt.next!==null;if(or=0,Ot=rt=Ve=null,_c=!1,yl=0,Ga=null,i)throw Error(s(300));t===null||Mt||(t=t.dependencies,t!==null&&cc(t)&&(Mt=!0))}function fy(t,i,a,l){Ve=t;var h=0;do{if(Fa&&(Ga=null),yl=0,Fa=!1,25<=h)throw Error(s(301));if(h+=1,Ot=rt=null,t.updateQueue!=null){var d=t.updateQueue;d.lastEffect=null,d.events=null,d.stores=null,d.memoCache!=null&&(d.memoCache.index=0)}z.H=Yy,d=i(a,l)}while(Fa);return d}function YS(){var t=z.H,i=t.useState()[0];return i=typeof i.then=="function"?vl(i):i,t=t.useState()[0],(rt!==null?rt.memoizedState:null)!==t&&(Ve.flags|=1024),i}function sd(){var t=Ec!==0;return Ec=0,t}function ad(t,i,a){i.updateQueue=t.updateQueue,i.flags&=-2053,t.lanes&=~a}function od(t){if(_c){for(t=t.memoizedState;t!==null;){var i=t.queue;i!==null&&(i.pending=null),t=t.next}_c=!1}or=0,Ot=rt=Ve=null,Fa=!1,yl=Ec=0,Ga=null}function pn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ot===null?Ve.memoizedState=Ot=t:Ot=Ot.next=t,Ot}function At(){if(rt===null){var t=Ve.alternate;t=t!==null?t.memoizedState:null}else t=rt.next;var i=Ot===null?Ve.memoizedState:Ot.next;if(i!==null)Ot=i,rt=t;else{if(t===null)throw Ve.alternate===null?Error(s(467)):Error(s(310));rt=t,t={memoizedState:rt.memoizedState,baseState:rt.baseState,baseQueue:rt.baseQueue,queue:rt.queue,next:null},Ot===null?Ve.memoizedState=Ot=t:Ot=Ot.next=t}return Ot}function Tc(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function vl(t){var i=yl;return yl+=1,Ga===null&&(Ga=[]),t=ny(Ga,t,i),i=Ve,(Ot===null?i.memoizedState:Ot.next)===null&&(i=i.alternate,z.H=i===null||i.memoizedState===null?Qy:_d),t}function bc(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return vl(t);if(t.$$typeof===q)return Zt(t)}throw Error(s(438,String(t)))}function ld(t){var i=null,a=Ve.updateQueue;if(a!==null&&(i=a.memoCache),i==null){var l=Ve.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(i={data:l.data.map(function(h){return h.slice()}),index:0})))}if(i==null&&(i={data:[],index:0}),a===null&&(a=Tc(),Ve.updateQueue=a),a.memoCache=i,a=i.data[i.index],a===void 0)for(a=i.data[i.index]=Array(t),l=0;l<t;l++)a[l]=D;return i.index++,a}function lr(t,i){return typeof i=="function"?i(t):i}function Sc(t){var i=At();return ud(i,rt,t)}function ud(t,i,a){var l=t.queue;if(l===null)throw Error(s(311));l.lastRenderedReducer=a;var h=t.baseQueue,d=l.pending;if(d!==null){if(h!==null){var v=h.next;h.next=d.next,d.next=v}i.baseQueue=h=d,l.pending=null}if(d=t.baseState,h===null)t.memoizedState=d;else{i=h.next;var S=v=null,M=null,G=i,te=!1;do{var re=G.lane&-536870913;if(re!==G.lane?(Ue&re)===re:(or&re)===re){var Q=G.revertLane;if(Q===0)M!==null&&(M=M.next={lane:0,revertLane:0,gesture:null,action:G.action,hasEagerState:G.hasEagerState,eagerState:G.eagerState,next:null}),re===Ua&&(te=!0);else if((or&Q)===Q){G=G.next,Q===Ua&&(te=!0);continue}else re={lane:0,revertLane:G.revertLane,gesture:null,action:G.action,hasEagerState:G.hasEagerState,eagerState:G.eagerState,next:null},M===null?(S=M=re,v=d):M=M.next=re,Ve.lanes|=Q,Xr|=Q;re=G.action,Zs&&a(d,re),d=G.hasEagerState?G.eagerState:a(d,re)}else Q={lane:re,revertLane:G.revertLane,gesture:G.gesture,action:G.action,hasEagerState:G.hasEagerState,eagerState:G.eagerState,next:null},M===null?(S=M=Q,v=d):M=M.next=Q,Ve.lanes|=re,Xr|=re;G=G.next}while(G!==null&&G!==i);if(M===null?v=d:M.next=S,!On(d,t.memoizedState)&&(Mt=!0,te&&(a=za,a!==null)))throw a;t.memoizedState=d,t.baseState=v,t.baseQueue=M,l.lastRenderedState=d}return h===null&&(l.lanes=0),[t.memoizedState,l.dispatch]}function cd(t){var i=At(),a=i.queue;if(a===null)throw Error(s(311));a.lastRenderedReducer=t;var l=a.dispatch,h=a.pending,d=i.memoizedState;if(h!==null){a.pending=null;var v=h=h.next;do d=t(d,v.action),v=v.next;while(v!==h);On(d,i.memoizedState)||(Mt=!0),i.memoizedState=d,i.baseQueue===null&&(i.baseState=d),a.lastRenderedState=d}return[d,l]}function dy(t,i,a){var l=Ve,h=At(),d=Fe;if(d){if(a===void 0)throw Error(s(407));a=a()}else a=i();var v=!On((rt||h).memoizedState,a);if(v&&(h.memoizedState=a,Mt=!0),h=h.queue,dd(py.bind(null,l,h,t),[t]),h.getSnapshot!==i||v||Ot!==null&&Ot.memoizedState.tag&1){if(l.flags|=2048,$a(9,{destroy:void 0},gy.bind(null,l,h,a,i),null),ut===null)throw Error(s(349));d||(or&127)!==0||my(l,i,a)}return a}function my(t,i,a){t.flags|=16384,t={getSnapshot:i,value:a},i=Ve.updateQueue,i===null?(i=Tc(),Ve.updateQueue=i,i.stores=[t]):(a=i.stores,a===null?i.stores=[t]:a.push(t))}function gy(t,i,a,l){i.value=a,i.getSnapshot=l,yy(i)&&vy(t)}function py(t,i,a){return a(function(){yy(i)&&vy(t)})}function yy(t){var i=t.getSnapshot;t=t.value;try{var a=i();return!On(t,a)}catch{return!0}}function vy(t){var i=Fs(t,2);i!==null&&Rn(i,t,2)}function hd(t){var i=pn();if(typeof t=="function"){var a=t;if(t=a(),Zs){Fn(!0);try{a()}finally{Fn(!1)}}}return i.memoizedState=i.baseState=t,i.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:lr,lastRenderedState:t},i}function _y(t,i,a,l){return t.baseState=a,ud(t,rt,typeof l=="function"?l:lr)}function KS(t,i,a,l,h){if(Rc(t))throw Error(s(485));if(t=i.action,t!==null){var d={payload:h,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(v){d.listeners.push(v)}};z.T!==null?a(!0):d.isTransition=!1,l(d),a=i.pending,a===null?(d.next=i.pending=d,Ey(i,d)):(d.next=a.next,i.pending=a.next=d)}}function Ey(t,i){var a=i.action,l=i.payload,h=t.state;if(i.isTransition){var d=z.T,v={};z.T=v;try{var S=a(h,l),M=z.S;M!==null&&M(v,S),Ty(t,i,S)}catch(G){fd(t,i,G)}finally{d!==null&&v.types!==null&&(d.types=v.types),z.T=d}}else try{d=a(h,l),Ty(t,i,d)}catch(G){fd(t,i,G)}}function Ty(t,i,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(l){by(t,i,l)},function(l){return fd(t,i,l)}):by(t,i,a)}function by(t,i,a){i.status="fulfilled",i.value=a,Sy(i),t.state=a,i=t.pending,i!==null&&(a=i.next,a===i?t.pending=null:(a=a.next,i.next=a,Ey(t,a)))}function fd(t,i,a){var l=t.pending;if(t.pending=null,l!==null){l=l.next;do i.status="rejected",i.reason=a,Sy(i),i=i.next;while(i!==l)}t.action=null}function Sy(t){t=t.listeners;for(var i=0;i<t.length;i++)(0,t[i])()}function Ay(t,i){return i}function wy(t,i){if(Fe){var a=ut.formState;if(a!==null){e:{var l=Ve;if(Fe){if(ct){t:{for(var h=ct,d=Zn;h.nodeType!==8;){if(!d){h=null;break t}if(h=ti(h.nextSibling),h===null){h=null;break t}}d=h.data,h=d==="F!"||d==="F"?h:null}if(h){ct=ti(h.nextSibling),l=h.data==="F!";break e}}Br(l)}l=!1}l&&(i=a[0])}}return a=pn(),a.memoizedState=a.baseState=i,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ay,lastRenderedState:i},a.queue=l,a=Fy.bind(null,Ve,l),l.dispatch=a,l=hd(!1),d=vd.bind(null,Ve,!1,l.queue),l=pn(),h={state:i,dispatch:null,action:t,pending:null},l.queue=h,a=KS.bind(null,Ve,h,d,a),h.dispatch=a,l.memoizedState=t,[i,a,!1]}function Ry(t){var i=At();return Cy(i,rt,t)}function Cy(t,i,a){if(i=ud(t,i,Ay)[0],t=Sc(lr)[0],typeof i=="object"&&i!==null&&typeof i.then=="function")try{var l=vl(i)}catch(v){throw v===Ba?dc:v}else l=i;i=At();var h=i.queue,d=h.dispatch;return a!==i.memoizedState&&(Ve.flags|=2048,$a(9,{destroy:void 0},XS.bind(null,h,a),null)),[l,d,t]}function XS(t,i){t.action=i}function xy(t){var i=At(),a=rt;if(a!==null)return Cy(i,a,t);At(),i=i.memoizedState,a=At();var l=a.queue.dispatch;return a.memoizedState=t,[i,l,!1]}function $a(t,i,a,l){return t={tag:t,create:a,deps:l,inst:i,next:null},i=Ve.updateQueue,i===null&&(i=Tc(),Ve.updateQueue=i),a=i.lastEffect,a===null?i.lastEffect=t.next=t:(l=a.next,a.next=t,t.next=l,i.lastEffect=t),t}function Iy(){return At().memoizedState}function Ac(t,i,a,l){var h=pn();Ve.flags|=t,h.memoizedState=$a(1|i,{destroy:void 0},a,l===void 0?null:l)}function wc(t,i,a,l){var h=At();l=l===void 0?null:l;var d=h.memoizedState.inst;rt!==null&&l!==null&&id(l,rt.memoizedState.deps)?h.memoizedState=$a(i,d,a,l):(Ve.flags|=t,h.memoizedState=$a(1|i,d,a,l))}function Dy(t,i){Ac(8390656,8,t,i)}function dd(t,i){wc(2048,8,t,i)}function WS(t){Ve.flags|=4;var i=Ve.updateQueue;if(i===null)i=Tc(),Ve.updateQueue=i,i.events=[t];else{var a=i.events;a===null?i.events=[t]:a.push(t)}}function Ny(t){var i=At().memoizedState;return WS({ref:i,nextImpl:t}),function(){if((Ze&2)!==0)throw Error(s(440));return i.impl.apply(void 0,arguments)}}function Oy(t,i){return wc(4,2,t,i)}function My(t,i){return wc(4,4,t,i)}function Vy(t,i){if(typeof i=="function"){t=t();var a=i(t);return function(){typeof a=="function"?a():i(null)}}if(i!=null)return t=t(),i.current=t,function(){i.current=null}}function ky(t,i,a){a=a!=null?a.concat([t]):null,wc(4,4,Vy.bind(null,i,t),a)}function md(){}function Py(t,i){var a=At();i=i===void 0?null:i;var l=a.memoizedState;return i!==null&&id(i,l[1])?l[0]:(a.memoizedState=[t,i],t)}function Ly(t,i){var a=At();i=i===void 0?null:i;var l=a.memoizedState;if(i!==null&&id(i,l[1]))return l[0];if(l=t(),Zs){Fn(!0);try{t()}finally{Fn(!1)}}return a.memoizedState=[l,i],l}function gd(t,i,a){return a===void 0||(or&1073741824)!==0&&(Ue&261930)===0?t.memoizedState=i:(t.memoizedState=a,t=jv(),Ve.lanes|=t,Xr|=t,a)}function jy(t,i,a,l){return On(a,i)?a:Ha.current!==null?(t=gd(t,a,l),On(t,i)||(Mt=!0),t):(or&42)===0||(or&1073741824)!==0&&(Ue&261930)===0?(Mt=!0,t.memoizedState=a):(t=jv(),Ve.lanes|=t,Xr|=t,i)}function Uy(t,i,a,l,h){var d=oe.p;oe.p=d!==0&&8>d?d:8;var v=z.T,S={};z.T=S,vd(t,!1,i,a);try{var M=h(),G=z.S;if(G!==null&&G(S,M),M!==null&&typeof M=="object"&&typeof M.then=="function"){var te=$S(M,l);_l(t,i,te,jn(t))}else _l(t,i,l,jn(t))}catch(re){_l(t,i,{then:function(){},status:"rejected",reason:re},jn())}finally{oe.p=d,v!==null&&S.types!==null&&(v.types=S.types),z.T=v}}function JS(){}function pd(t,i,a,l){if(t.tag!==5)throw Error(s(476));var h=zy(t).queue;Uy(t,h,i,W,a===null?JS:function(){return By(t),a(l)})}function zy(t){var i=t.memoizedState;if(i!==null)return i;i={memoizedState:W,baseState:W,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:lr,lastRenderedState:W},next:null};var a={};return i.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:lr,lastRenderedState:a},next:null},t.memoizedState=i,t=t.alternate,t!==null&&(t.memoizedState=i),i}function By(t){var i=zy(t);i.next===null&&(i=t.alternate.memoizedState),_l(t,i.next.queue,{},jn())}function yd(){return Zt(Pl)}function qy(){return At().memoizedState}function Hy(){return At().memoizedState}function ZS(t){for(var i=t.return;i!==null;){switch(i.tag){case 24:case 3:var a=jn();t=Fr(a);var l=Gr(i,t,a);l!==null&&(Rn(l,i,a),ml(l,i,a)),i={cache:$f()},t.payload=i;return}i=i.return}}function e1(t,i,a){var l=jn();a={lane:l,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},Rc(t)?Gy(i,a):(a=kf(t,i,a,l),a!==null&&(Rn(a,t,l),$y(a,i,l)))}function Fy(t,i,a){var l=jn();_l(t,i,a,l)}function _l(t,i,a,l){var h={lane:l,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null};if(Rc(t))Gy(i,h);else{var d=t.alternate;if(t.lanes===0&&(d===null||d.lanes===0)&&(d=i.lastRenderedReducer,d!==null))try{var v=i.lastRenderedState,S=d(v,a);if(h.hasEagerState=!0,h.eagerState=S,On(S,v))return ac(t,i,h,0),ut===null&&sc(),!1}catch{}if(a=kf(t,i,h,l),a!==null)return Rn(a,t,l),$y(a,i,l),!0}return!1}function vd(t,i,a,l){if(l={lane:2,revertLane:Xd(),gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},Rc(t)){if(i)throw Error(s(479))}else i=kf(t,a,l,2),i!==null&&Rn(i,t,2)}function Rc(t){var i=t.alternate;return t===Ve||i!==null&&i===Ve}function Gy(t,i){Fa=_c=!0;var a=t.pending;a===null?i.next=i:(i.next=a.next,a.next=i),t.pending=i}function $y(t,i,a){if((a&4194048)!==0){var l=i.lanes;l&=t.pendingLanes,a|=l,i.lanes=a,Bo(t,a)}}var El={readContext:Zt,use:bc,useCallback:vt,useContext:vt,useEffect:vt,useImperativeHandle:vt,useLayoutEffect:vt,useInsertionEffect:vt,useMemo:vt,useReducer:vt,useRef:vt,useState:vt,useDebugValue:vt,useDeferredValue:vt,useTransition:vt,useSyncExternalStore:vt,useId:vt,useHostTransitionStatus:vt,useFormState:vt,useActionState:vt,useOptimistic:vt,useMemoCache:vt,useCacheRefresh:vt};El.useEffectEvent=vt;var Qy={readContext:Zt,use:bc,useCallback:function(t,i){return pn().memoizedState=[t,i===void 0?null:i],t},useContext:Zt,useEffect:Dy,useImperativeHandle:function(t,i,a){a=a!=null?a.concat([t]):null,Ac(4194308,4,Vy.bind(null,i,t),a)},useLayoutEffect:function(t,i){return Ac(4194308,4,t,i)},useInsertionEffect:function(t,i){Ac(4,2,t,i)},useMemo:function(t,i){var a=pn();i=i===void 0?null:i;var l=t();if(Zs){Fn(!0);try{t()}finally{Fn(!1)}}return a.memoizedState=[l,i],l},useReducer:function(t,i,a){var l=pn();if(a!==void 0){var h=a(i);if(Zs){Fn(!0);try{a(i)}finally{Fn(!1)}}}else h=i;return l.memoizedState=l.baseState=h,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:h},l.queue=t,t=t.dispatch=e1.bind(null,Ve,t),[l.memoizedState,t]},useRef:function(t){var i=pn();return t={current:t},i.memoizedState=t},useState:function(t){t=hd(t);var i=t.queue,a=Fy.bind(null,Ve,i);return i.dispatch=a,[t.memoizedState,a]},useDebugValue:md,useDeferredValue:function(t,i){var a=pn();return gd(a,t,i)},useTransition:function(){var t=hd(!1);return t=Uy.bind(null,Ve,t.queue,!0,!1),pn().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,i,a){var l=Ve,h=pn();if(Fe){if(a===void 0)throw Error(s(407));a=a()}else{if(a=i(),ut===null)throw Error(s(349));(Ue&127)!==0||my(l,i,a)}h.memoizedState=a;var d={value:a,getSnapshot:i};return h.queue=d,Dy(py.bind(null,l,d,t),[t]),l.flags|=2048,$a(9,{destroy:void 0},gy.bind(null,l,d,a,i),null),a},useId:function(){var t=pn(),i=ut.identifierPrefix;if(Fe){var a=zi,l=Ui;a=(l&~(1<<32-Tt(l)-1)).toString(32)+a,i="_"+i+"R_"+a,a=Ec++,0<a&&(i+="H"+a.toString(32)),i+="_"}else a=QS++,i="_"+i+"r_"+a.toString(32)+"_";return t.memoizedState=i},useHostTransitionStatus:yd,useFormState:wy,useActionState:wy,useOptimistic:function(t){var i=pn();i.memoizedState=i.baseState=t;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return i.queue=a,i=vd.bind(null,Ve,!0,a),a.dispatch=i,[t,i]},useMemoCache:ld,useCacheRefresh:function(){return pn().memoizedState=ZS.bind(null,Ve)},useEffectEvent:function(t){var i=pn(),a={impl:t};return i.memoizedState=a,function(){if((Ze&2)!==0)throw Error(s(440));return a.impl.apply(void 0,arguments)}}},_d={readContext:Zt,use:bc,useCallback:Py,useContext:Zt,useEffect:dd,useImperativeHandle:ky,useInsertionEffect:Oy,useLayoutEffect:My,useMemo:Ly,useReducer:Sc,useRef:Iy,useState:function(){return Sc(lr)},useDebugValue:md,useDeferredValue:function(t,i){var a=At();return jy(a,rt.memoizedState,t,i)},useTransition:function(){var t=Sc(lr)[0],i=At().memoizedState;return[typeof t=="boolean"?t:vl(t),i]},useSyncExternalStore:dy,useId:qy,useHostTransitionStatus:yd,useFormState:Ry,useActionState:Ry,useOptimistic:function(t,i){var a=At();return _y(a,rt,t,i)},useMemoCache:ld,useCacheRefresh:Hy};_d.useEffectEvent=Ny;var Yy={readContext:Zt,use:bc,useCallback:Py,useContext:Zt,useEffect:dd,useImperativeHandle:ky,useInsertionEffect:Oy,useLayoutEffect:My,useMemo:Ly,useReducer:cd,useRef:Iy,useState:function(){return cd(lr)},useDebugValue:md,useDeferredValue:function(t,i){var a=At();return rt===null?gd(a,t,i):jy(a,rt.memoizedState,t,i)},useTransition:function(){var t=cd(lr)[0],i=At().memoizedState;return[typeof t=="boolean"?t:vl(t),i]},useSyncExternalStore:dy,useId:qy,useHostTransitionStatus:yd,useFormState:xy,useActionState:xy,useOptimistic:function(t,i){var a=At();return rt!==null?_y(a,rt,t,i):(a.baseState=t,[t,a.queue.dispatch])},useMemoCache:ld,useCacheRefresh:Hy};Yy.useEffectEvent=Ny;function Ed(t,i,a,l){i=t.memoizedState,a=a(l,i),a=a==null?i:T({},i,a),t.memoizedState=a,t.lanes===0&&(t.updateQueue.baseState=a)}var Td={enqueueSetState:function(t,i,a){t=t._reactInternals;var l=jn(),h=Fr(l);h.payload=i,a!=null&&(h.callback=a),i=Gr(t,h,l),i!==null&&(Rn(i,t,l),ml(i,t,l))},enqueueReplaceState:function(t,i,a){t=t._reactInternals;var l=jn(),h=Fr(l);h.tag=1,h.payload=i,a!=null&&(h.callback=a),i=Gr(t,h,l),i!==null&&(Rn(i,t,l),ml(i,t,l))},enqueueForceUpdate:function(t,i){t=t._reactInternals;var a=jn(),l=Fr(a);l.tag=2,i!=null&&(l.callback=i),i=Gr(t,l,a),i!==null&&(Rn(i,t,a),ml(i,t,a))}};function Ky(t,i,a,l,h,d,v){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(l,d,v):i.prototype&&i.prototype.isPureReactComponent?!al(a,l)||!al(h,d):!0}function Xy(t,i,a,l){t=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(a,l),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(a,l),i.state!==t&&Td.enqueueReplaceState(i,i.state,null)}function ea(t,i){var a=i;if("ref"in i){a={};for(var l in i)l!=="ref"&&(a[l]=i[l])}if(t=t.defaultProps){a===i&&(a=T({},a));for(var h in t)a[h]===void 0&&(a[h]=t[h])}return a}function Wy(t){rc(t)}function Jy(t){console.error(t)}function Zy(t){rc(t)}function Cc(t,i){try{var a=t.onUncaughtError;a(i.value,{componentStack:i.stack})}catch(l){setTimeout(function(){throw l})}}function ev(t,i,a){try{var l=t.onCaughtError;l(a.value,{componentStack:a.stack,errorBoundary:i.tag===1?i.stateNode:null})}catch(h){setTimeout(function(){throw h})}}function bd(t,i,a){return a=Fr(a),a.tag=3,a.payload={element:null},a.callback=function(){Cc(t,i)},a}function tv(t){return t=Fr(t),t.tag=3,t}function nv(t,i,a,l){var h=a.type.getDerivedStateFromError;if(typeof h=="function"){var d=l.value;t.payload=function(){return h(d)},t.callback=function(){ev(i,a,l)}}var v=a.stateNode;v!==null&&typeof v.componentDidCatch=="function"&&(t.callback=function(){ev(i,a,l),typeof h!="function"&&(Wr===null?Wr=new Set([this]):Wr.add(this));var S=l.stack;this.componentDidCatch(l.value,{componentStack:S!==null?S:""})})}function t1(t,i,a,l,h){if(a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(i=a.alternate,i!==null&&ja(i,a,h,!0),a=Vn.current,a!==null){switch(a.tag){case 31:case 13:return ei===null?Uc():a.alternate===null&&_t===0&&(_t=3),a.flags&=-257,a.flags|=65536,a.lanes=h,l===mc?a.flags|=16384:(i=a.updateQueue,i===null?a.updateQueue=new Set([l]):i.add(l),Qd(t,l,h)),!1;case 22:return a.flags|=65536,l===mc?a.flags|=16384:(i=a.updateQueue,i===null?(i={transitions:null,markerInstances:null,retryQueue:new Set([l])},a.updateQueue=i):(a=i.retryQueue,a===null?i.retryQueue=new Set([l]):a.add(l)),Qd(t,l,h)),!1}throw Error(s(435,a.tag))}return Qd(t,l,h),Uc(),!1}if(Fe)return i=Vn.current,i!==null?((i.flags&65536)===0&&(i.flags|=256),i.flags|=65536,i.lanes=h,l!==Bf&&(t=Error(s(422),{cause:l}),ul(Xn(t,a)))):(l!==Bf&&(i=Error(s(423),{cause:l}),ul(Xn(i,a))),t=t.current.alternate,t.flags|=65536,h&=-h,t.lanes|=h,l=Xn(l,a),h=bd(t.stateNode,l,h),Jf(t,h),_t!==4&&(_t=2)),!1;var d=Error(s(520),{cause:l});if(d=Xn(d,a),xl===null?xl=[d]:xl.push(d),_t!==4&&(_t=2),i===null)return!0;l=Xn(l,a),a=i;do{switch(a.tag){case 3:return a.flags|=65536,t=h&-h,a.lanes|=t,t=bd(a.stateNode,l,t),Jf(a,t),!1;case 1:if(i=a.type,d=a.stateNode,(a.flags&128)===0&&(typeof i.getDerivedStateFromError=="function"||d!==null&&typeof d.componentDidCatch=="function"&&(Wr===null||!Wr.has(d))))return a.flags|=65536,h&=-h,a.lanes|=h,h=tv(h),nv(h,t,a,l),Jf(a,h),!1}a=a.return}while(a!==null);return!1}var Sd=Error(s(461)),Mt=!1;function en(t,i,a,l){i.child=t===null?ay(i,null,a,l):Js(i,t.child,a,l)}function iv(t,i,a,l,h){a=a.render;var d=i.ref;if("ref"in l){var v={};for(var S in l)S!=="ref"&&(v[S]=l[S])}else v=l;return Ys(i),l=rd(t,i,a,v,d,h),S=sd(),t!==null&&!Mt?(ad(t,i,h),ur(t,i,h)):(Fe&&S&&Uf(i),i.flags|=1,en(t,i,l,h),i.child)}function rv(t,i,a,l,h){if(t===null){var d=a.type;return typeof d=="function"&&!Pf(d)&&d.defaultProps===void 0&&a.compare===null?(i.tag=15,i.type=d,sv(t,i,d,l,h)):(t=lc(a.type,null,l,i,i.mode,h),t.ref=i.ref,t.return=i,i.child=t)}if(d=t.child,!Nd(t,h)){var v=d.memoizedProps;if(a=a.compare,a=a!==null?a:al,a(v,l)&&t.ref===i.ref)return ur(t,i,h)}return i.flags|=1,t=ir(d,l),t.ref=i.ref,t.return=i,i.child=t}function sv(t,i,a,l,h){if(t!==null){var d=t.memoizedProps;if(al(d,l)&&t.ref===i.ref)if(Mt=!1,i.pendingProps=l=d,Nd(t,h))(t.flags&131072)!==0&&(Mt=!0);else return i.lanes=t.lanes,ur(t,i,h)}return Ad(t,i,a,l,h)}function av(t,i,a,l){var h=l.children,d=t!==null?t.memoizedState:null;if(t===null&&i.stateNode===null&&(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),l.mode==="hidden"){if((i.flags&128)!==0){if(d=d!==null?d.baseLanes|a:a,t!==null){for(l=i.child=t.child,h=0;l!==null;)h=h|l.lanes|l.childLanes,l=l.sibling;l=h&~d}else l=0,i.child=null;return ov(t,i,d,a,l)}if((a&536870912)!==0)i.memoizedState={baseLanes:0,cachePool:null},t!==null&&fc(i,d!==null?d.cachePool:null),d!==null?uy(i,d):ed(),cy(i);else return l=i.lanes=536870912,ov(t,i,d!==null?d.baseLanes|a:a,a,l)}else d!==null?(fc(i,d.cachePool),uy(i,d),Qr(),i.memoizedState=null):(t!==null&&fc(i,null),ed(),Qr());return en(t,i,h,a),i.child}function Tl(t,i){return t!==null&&t.tag===22||i.stateNode!==null||(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),i.sibling}function ov(t,i,a,l,h){var d=Yf();return d=d===null?null:{parent:Nt._currentValue,pool:d},i.memoizedState={baseLanes:a,cachePool:d},t!==null&&fc(i,null),ed(),cy(i),t!==null&&ja(t,i,l,!0),i.childLanes=h,null}function xc(t,i){return i=Dc({mode:i.mode,children:i.children},t.mode),i.ref=t.ref,t.child=i,i.return=t,i}function lv(t,i,a){return Js(i,t.child,null,a),t=xc(i,i.pendingProps),t.flags|=2,kn(i),i.memoizedState=null,t}function n1(t,i,a){var l=i.pendingProps,h=(i.flags&128)!==0;if(i.flags&=-129,t===null){if(Fe){if(l.mode==="hidden")return t=xc(i,l),i.lanes=536870912,Tl(null,t);if(nd(i),(t=ct)?(t=E_(t,Zn),t=t!==null&&t.data==="&"?t:null,t!==null&&(i.memoizedState={dehydrated:t,treeContext:Ur!==null?{id:Ui,overflow:zi}:null,retryLane:536870912,hydrationErrors:null},a=Gp(t),a.return=i,i.child=a,Jt=i,ct=null)):t=null,t===null)throw Br(i);return i.lanes=536870912,null}return xc(i,l)}var d=t.memoizedState;if(d!==null){var v=d.dehydrated;if(nd(i),h)if(i.flags&256)i.flags&=-257,i=lv(t,i,a);else if(i.memoizedState!==null)i.child=t.child,i.flags|=128,i=null;else throw Error(s(558));else if(Mt||ja(t,i,a,!1),h=(a&t.childLanes)!==0,Mt||h){if(l=ut,l!==null&&(v=qo(l,a),v!==0&&v!==d.retryLane))throw d.retryLane=v,Fs(t,v),Rn(l,t,v),Sd;Uc(),i=lv(t,i,a)}else t=d.treeContext,ct=ti(v.nextSibling),Jt=i,Fe=!0,zr=null,Zn=!1,t!==null&&Yp(i,t),i=xc(i,l),i.flags|=4096;return i}return t=ir(t.child,{mode:l.mode,children:l.children}),t.ref=i.ref,i.child=t,t.return=i,t}function Ic(t,i){var a=i.ref;if(a===null)t!==null&&t.ref!==null&&(i.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(s(284));(t===null||t.ref!==a)&&(i.flags|=4194816)}}function Ad(t,i,a,l,h){return Ys(i),a=rd(t,i,a,l,void 0,h),l=sd(),t!==null&&!Mt?(ad(t,i,h),ur(t,i,h)):(Fe&&l&&Uf(i),i.flags|=1,en(t,i,a,h),i.child)}function uv(t,i,a,l,h,d){return Ys(i),i.updateQueue=null,a=fy(i,l,a,h),hy(t),l=sd(),t!==null&&!Mt?(ad(t,i,d),ur(t,i,d)):(Fe&&l&&Uf(i),i.flags|=1,en(t,i,a,d),i.child)}function cv(t,i,a,l,h){if(Ys(i),i.stateNode===null){var d=Va,v=a.contextType;typeof v=="object"&&v!==null&&(d=Zt(v)),d=new a(l,d),i.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,d.updater=Td,i.stateNode=d,d._reactInternals=i,d=i.stateNode,d.props=l,d.state=i.memoizedState,d.refs={},Xf(i),v=a.contextType,d.context=typeof v=="object"&&v!==null?Zt(v):Va,d.state=i.memoizedState,v=a.getDerivedStateFromProps,typeof v=="function"&&(Ed(i,a,v,l),d.state=i.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof d.getSnapshotBeforeUpdate=="function"||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(v=d.state,typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount(),v!==d.state&&Td.enqueueReplaceState(d,d.state,null),pl(i,l,d,h),gl(),d.state=i.memoizedState),typeof d.componentDidMount=="function"&&(i.flags|=4194308),l=!0}else if(t===null){d=i.stateNode;var S=i.memoizedProps,M=ea(a,S);d.props=M;var G=d.context,te=a.contextType;v=Va,typeof te=="object"&&te!==null&&(v=Zt(te));var re=a.getDerivedStateFromProps;te=typeof re=="function"||typeof d.getSnapshotBeforeUpdate=="function",S=i.pendingProps!==S,te||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(S||G!==v)&&Xy(i,d,l,v),Hr=!1;var Q=i.memoizedState;d.state=Q,pl(i,l,d,h),gl(),G=i.memoizedState,S||Q!==G||Hr?(typeof re=="function"&&(Ed(i,a,re,l),G=i.memoizedState),(M=Hr||Ky(i,a,M,l,Q,G,v))?(te||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount()),typeof d.componentDidMount=="function"&&(i.flags|=4194308)):(typeof d.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=l,i.memoizedState=G),d.props=l,d.state=G,d.context=v,l=M):(typeof d.componentDidMount=="function"&&(i.flags|=4194308),l=!1)}else{d=i.stateNode,Wf(t,i),v=i.memoizedProps,te=ea(a,v),d.props=te,re=i.pendingProps,Q=d.context,G=a.contextType,M=Va,typeof G=="object"&&G!==null&&(M=Zt(G)),S=a.getDerivedStateFromProps,(G=typeof S=="function"||typeof d.getSnapshotBeforeUpdate=="function")||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(v!==re||Q!==M)&&Xy(i,d,l,M),Hr=!1,Q=i.memoizedState,d.state=Q,pl(i,l,d,h),gl();var X=i.memoizedState;v!==re||Q!==X||Hr||t!==null&&t.dependencies!==null&&cc(t.dependencies)?(typeof S=="function"&&(Ed(i,a,S,l),X=i.memoizedState),(te=Hr||Ky(i,a,te,l,Q,X,M)||t!==null&&t.dependencies!==null&&cc(t.dependencies))?(G||typeof d.UNSAFE_componentWillUpdate!="function"&&typeof d.componentWillUpdate!="function"||(typeof d.componentWillUpdate=="function"&&d.componentWillUpdate(l,X,M),typeof d.UNSAFE_componentWillUpdate=="function"&&d.UNSAFE_componentWillUpdate(l,X,M)),typeof d.componentDidUpdate=="function"&&(i.flags|=4),typeof d.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof d.componentDidUpdate!="function"||v===t.memoizedProps&&Q===t.memoizedState||(i.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||v===t.memoizedProps&&Q===t.memoizedState||(i.flags|=1024),i.memoizedProps=l,i.memoizedState=X),d.props=l,d.state=X,d.context=M,l=te):(typeof d.componentDidUpdate!="function"||v===t.memoizedProps&&Q===t.memoizedState||(i.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||v===t.memoizedProps&&Q===t.memoizedState||(i.flags|=1024),l=!1)}return d=l,Ic(t,i),l=(i.flags&128)!==0,d||l?(d=i.stateNode,a=l&&typeof a.getDerivedStateFromError!="function"?null:d.render(),i.flags|=1,t!==null&&l?(i.child=Js(i,t.child,null,h),i.child=Js(i,null,a,h)):en(t,i,a,h),i.memoizedState=d.state,t=i.child):t=ur(t,i,h),t}function hv(t,i,a,l){return $s(),i.flags|=256,en(t,i,a,l),i.child}var wd={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Rd(t){return{baseLanes:t,cachePool:ey()}}function Cd(t,i,a){return t=t!==null?t.childLanes&~a:0,i&&(t|=Ln),t}function fv(t,i,a){var l=i.pendingProps,h=!1,d=(i.flags&128)!==0,v;if((v=d)||(v=t!==null&&t.memoizedState===null?!1:(St.current&2)!==0),v&&(h=!0,i.flags&=-129),v=(i.flags&32)!==0,i.flags&=-33,t===null){if(Fe){if(h?$r(i):Qr(),(t=ct)?(t=E_(t,Zn),t=t!==null&&t.data!=="&"?t:null,t!==null&&(i.memoizedState={dehydrated:t,treeContext:Ur!==null?{id:Ui,overflow:zi}:null,retryLane:536870912,hydrationErrors:null},a=Gp(t),a.return=i,i.child=a,Jt=i,ct=null)):t=null,t===null)throw Br(i);return um(t)?i.lanes=32:i.lanes=536870912,null}var S=l.children;return l=l.fallback,h?(Qr(),h=i.mode,S=Dc({mode:"hidden",children:S},h),l=Gs(l,h,a,null),S.return=i,l.return=i,S.sibling=l,i.child=S,l=i.child,l.memoizedState=Rd(a),l.childLanes=Cd(t,v,a),i.memoizedState=wd,Tl(null,l)):($r(i),xd(i,S))}var M=t.memoizedState;if(M!==null&&(S=M.dehydrated,S!==null)){if(d)i.flags&256?($r(i),i.flags&=-257,i=Id(t,i,a)):i.memoizedState!==null?(Qr(),i.child=t.child,i.flags|=128,i=null):(Qr(),S=l.fallback,h=i.mode,l=Dc({mode:"visible",children:l.children},h),S=Gs(S,h,a,null),S.flags|=2,l.return=i,S.return=i,l.sibling=S,i.child=l,Js(i,t.child,null,a),l=i.child,l.memoizedState=Rd(a),l.childLanes=Cd(t,v,a),i.memoizedState=wd,i=Tl(null,l));else if($r(i),um(S)){if(v=S.nextSibling&&S.nextSibling.dataset,v)var G=v.dgst;v=G,l=Error(s(419)),l.stack="",l.digest=v,ul({value:l,source:null,stack:null}),i=Id(t,i,a)}else if(Mt||ja(t,i,a,!1),v=(a&t.childLanes)!==0,Mt||v){if(v=ut,v!==null&&(l=qo(v,a),l!==0&&l!==M.retryLane))throw M.retryLane=l,Fs(t,l),Rn(v,t,l),Sd;lm(S)||Uc(),i=Id(t,i,a)}else lm(S)?(i.flags|=192,i.child=t.child,i=null):(t=M.treeContext,ct=ti(S.nextSibling),Jt=i,Fe=!0,zr=null,Zn=!1,t!==null&&Yp(i,t),i=xd(i,l.children),i.flags|=4096);return i}return h?(Qr(),S=l.fallback,h=i.mode,M=t.child,G=M.sibling,l=ir(M,{mode:"hidden",children:l.children}),l.subtreeFlags=M.subtreeFlags&65011712,G!==null?S=ir(G,S):(S=Gs(S,h,a,null),S.flags|=2),S.return=i,l.return=i,l.sibling=S,i.child=l,Tl(null,l),l=i.child,S=t.child.memoizedState,S===null?S=Rd(a):(h=S.cachePool,h!==null?(M=Nt._currentValue,h=h.parent!==M?{parent:M,pool:M}:h):h=ey(),S={baseLanes:S.baseLanes|a,cachePool:h}),l.memoizedState=S,l.childLanes=Cd(t,v,a),i.memoizedState=wd,Tl(t.child,l)):($r(i),a=t.child,t=a.sibling,a=ir(a,{mode:"visible",children:l.children}),a.return=i,a.sibling=null,t!==null&&(v=i.deletions,v===null?(i.deletions=[t],i.flags|=16):v.push(t)),i.child=a,i.memoizedState=null,a)}function xd(t,i){return i=Dc({mode:"visible",children:i},t.mode),i.return=t,t.child=i}function Dc(t,i){return t=Mn(22,t,null,i),t.lanes=0,t}function Id(t,i,a){return Js(i,t.child,null,a),t=xd(i,i.pendingProps.children),t.flags|=2,i.memoizedState=null,t}function dv(t,i,a){t.lanes|=i;var l=t.alternate;l!==null&&(l.lanes|=i),Ff(t.return,i,a)}function Dd(t,i,a,l,h,d){var v=t.memoizedState;v===null?t.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:l,tail:a,tailMode:h,treeForkCount:d}:(v.isBackwards=i,v.rendering=null,v.renderingStartTime=0,v.last=l,v.tail=a,v.tailMode=h,v.treeForkCount=d)}function mv(t,i,a){var l=i.pendingProps,h=l.revealOrder,d=l.tail;l=l.children;var v=St.current,S=(v&2)!==0;if(S?(v=v&1|2,i.flags|=128):v&=1,ce(St,v),en(t,i,l,a),l=Fe?ll:0,!S&&t!==null&&(t.flags&128)!==0)e:for(t=i.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&dv(t,a,i);else if(t.tag===19)dv(t,a,i);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===i)break e;for(;t.sibling===null;){if(t.return===null||t.return===i)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}switch(h){case"forwards":for(a=i.child,h=null;a!==null;)t=a.alternate,t!==null&&vc(t)===null&&(h=a),a=a.sibling;a=h,a===null?(h=i.child,i.child=null):(h=a.sibling,a.sibling=null),Dd(i,!1,h,a,d,l);break;case"backwards":case"unstable_legacy-backwards":for(a=null,h=i.child,i.child=null;h!==null;){if(t=h.alternate,t!==null&&vc(t)===null){i.child=h;break}t=h.sibling,h.sibling=a,a=h,h=t}Dd(i,!0,a,null,d,l);break;case"together":Dd(i,!1,null,null,void 0,l);break;default:i.memoizedState=null}return i.child}function ur(t,i,a){if(t!==null&&(i.dependencies=t.dependencies),Xr|=i.lanes,(a&i.childLanes)===0)if(t!==null){if(ja(t,i,a,!1),(a&i.childLanes)===0)return null}else return null;if(t!==null&&i.child!==t.child)throw Error(s(153));if(i.child!==null){for(t=i.child,a=ir(t,t.pendingProps),i.child=a,a.return=i;t.sibling!==null;)t=t.sibling,a=a.sibling=ir(t,t.pendingProps),a.return=i;a.sibling=null}return i.child}function Nd(t,i){return(t.lanes&i)!==0?!0:(t=t.dependencies,!!(t!==null&&cc(t)))}function i1(t,i,a){switch(i.tag){case 3:Pe(i,i.stateNode.containerInfo),qr(i,Nt,t.memoizedState.cache),$s();break;case 27:case 5:dn(i);break;case 4:Pe(i,i.stateNode.containerInfo);break;case 10:qr(i,i.type,i.memoizedProps.value);break;case 31:if(i.memoizedState!==null)return i.flags|=128,nd(i),null;break;case 13:var l=i.memoizedState;if(l!==null)return l.dehydrated!==null?($r(i),i.flags|=128,null):(a&i.child.childLanes)!==0?fv(t,i,a):($r(i),t=ur(t,i,a),t!==null?t.sibling:null);$r(i);break;case 19:var h=(t.flags&128)!==0;if(l=(a&i.childLanes)!==0,l||(ja(t,i,a,!1),l=(a&i.childLanes)!==0),h){if(l)return mv(t,i,a);i.flags|=128}if(h=i.memoizedState,h!==null&&(h.rendering=null,h.tail=null,h.lastEffect=null),ce(St,St.current),l)break;return null;case 22:return i.lanes=0,av(t,i,a,i.pendingProps);case 24:qr(i,Nt,t.memoizedState.cache)}return ur(t,i,a)}function gv(t,i,a){if(t!==null)if(t.memoizedProps!==i.pendingProps)Mt=!0;else{if(!Nd(t,a)&&(i.flags&128)===0)return Mt=!1,i1(t,i,a);Mt=(t.flags&131072)!==0}else Mt=!1,Fe&&(i.flags&1048576)!==0&&Qp(i,ll,i.index);switch(i.lanes=0,i.tag){case 16:e:{var l=i.pendingProps;if(t=Xs(i.elementType),i.type=t,typeof t=="function")Pf(t)?(l=ea(t,l),i.tag=1,i=cv(null,i,t,l,a)):(i.tag=0,i=Ad(null,i,t,l,a));else{if(t!=null){var h=t.$$typeof;if(h===ge){i.tag=11,i=iv(null,i,t,l,a);break e}else if(h===O){i.tag=14,i=rv(null,i,t,l,a);break e}}throw i=Y(t)||t,Error(s(306,i,""))}}return i;case 0:return Ad(t,i,i.type,i.pendingProps,a);case 1:return l=i.type,h=ea(l,i.pendingProps),cv(t,i,l,h,a);case 3:e:{if(Pe(i,i.stateNode.containerInfo),t===null)throw Error(s(387));l=i.pendingProps;var d=i.memoizedState;h=d.element,Wf(t,i),pl(i,l,null,a);var v=i.memoizedState;if(l=v.cache,qr(i,Nt,l),l!==d.cache&&Gf(i,[Nt],a,!0),gl(),l=v.element,d.isDehydrated)if(d={element:l,isDehydrated:!1,cache:v.cache},i.updateQueue.baseState=d,i.memoizedState=d,i.flags&256){i=hv(t,i,l,a);break e}else if(l!==h){h=Xn(Error(s(424)),i),ul(h),i=hv(t,i,l,a);break e}else for(t=i.stateNode.containerInfo,t.nodeType===9?t=t.body:t=t.nodeName==="HTML"?t.ownerDocument.body:t,ct=ti(t.firstChild),Jt=i,Fe=!0,zr=null,Zn=!0,a=ay(i,null,l,a),i.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling;else{if($s(),l===h){i=ur(t,i,a);break e}en(t,i,l,a)}i=i.child}return i;case 26:return Ic(t,i),t===null?(a=R_(i.type,null,i.pendingProps,null))?i.memoizedState=a:Fe||(a=i.type,t=i.pendingProps,l=$c(Se.current).createElement(a),l[xt]=i,l[Ft]=t,tn(l,a,t),It(l),i.stateNode=l):i.memoizedState=R_(i.type,t.memoizedProps,i.pendingProps,t.memoizedState),null;case 27:return dn(i),t===null&&Fe&&(l=i.stateNode=S_(i.type,i.pendingProps,Se.current),Jt=i,Zn=!0,h=ct,ts(i.type)?(cm=h,ct=ti(l.firstChild)):ct=h),en(t,i,i.pendingProps.children,a),Ic(t,i),t===null&&(i.flags|=4194304),i.child;case 5:return t===null&&Fe&&((h=l=ct)&&(l=M1(l,i.type,i.pendingProps,Zn),l!==null?(i.stateNode=l,Jt=i,ct=ti(l.firstChild),Zn=!1,h=!0):h=!1),h||Br(i)),dn(i),h=i.type,d=i.pendingProps,v=t!==null?t.memoizedProps:null,l=d.children,sm(h,d)?l=null:v!==null&&sm(h,v)&&(i.flags|=32),i.memoizedState!==null&&(h=rd(t,i,YS,null,null,a),Pl._currentValue=h),Ic(t,i),en(t,i,l,a),i.child;case 6:return t===null&&Fe&&((t=a=ct)&&(a=V1(a,i.pendingProps,Zn),a!==null?(i.stateNode=a,Jt=i,ct=null,t=!0):t=!1),t||Br(i)),null;case 13:return fv(t,i,a);case 4:return Pe(i,i.stateNode.containerInfo),l=i.pendingProps,t===null?i.child=Js(i,null,l,a):en(t,i,l,a),i.child;case 11:return iv(t,i,i.type,i.pendingProps,a);case 7:return en(t,i,i.pendingProps,a),i.child;case 8:return en(t,i,i.pendingProps.children,a),i.child;case 12:return en(t,i,i.pendingProps.children,a),i.child;case 10:return l=i.pendingProps,qr(i,i.type,l.value),en(t,i,l.children,a),i.child;case 9:return h=i.type._context,l=i.pendingProps.children,Ys(i),h=Zt(h),l=l(h),i.flags|=1,en(t,i,l,a),i.child;case 14:return rv(t,i,i.type,i.pendingProps,a);case 15:return sv(t,i,i.type,i.pendingProps,a);case 19:return mv(t,i,a);case 31:return n1(t,i,a);case 22:return av(t,i,a,i.pendingProps);case 24:return Ys(i),l=Zt(Nt),t===null?(h=Yf(),h===null&&(h=ut,d=$f(),h.pooledCache=d,d.refCount++,d!==null&&(h.pooledCacheLanes|=a),h=d),i.memoizedState={parent:l,cache:h},Xf(i),qr(i,Nt,h)):((t.lanes&a)!==0&&(Wf(t,i),pl(i,null,null,a),gl()),h=t.memoizedState,d=i.memoizedState,h.parent!==l?(h={parent:l,cache:l},i.memoizedState=h,i.lanes===0&&(i.memoizedState=i.updateQueue.baseState=h),qr(i,Nt,l)):(l=d.cache,qr(i,Nt,l),l!==h.cache&&Gf(i,[Nt],a,!0))),en(t,i,i.pendingProps.children,a),i.child;case 29:throw i.pendingProps}throw Error(s(156,i.tag))}function cr(t){t.flags|=4}function Od(t,i,a,l,h){if((i=(t.mode&32)!==0)&&(i=!1),i){if(t.flags|=16777216,(h&335544128)===h)if(t.stateNode.complete)t.flags|=8192;else if(qv())t.flags|=8192;else throw Ws=mc,Kf}else t.flags&=-16777217}function pv(t,i){if(i.type!=="stylesheet"||(i.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!N_(i))if(qv())t.flags|=8192;else throw Ws=mc,Kf}function Nc(t,i){i!==null&&(t.flags|=4),t.flags&16384&&(i=t.tag!==22?Lu():536870912,t.lanes|=i,Xa|=i)}function bl(t,i){if(!Fe)switch(t.tailMode){case"hidden":i=t.tail;for(var a=null;i!==null;)i.alternate!==null&&(a=i),i=i.sibling;a===null?t.tail=null:a.sibling=null;break;case"collapsed":a=t.tail;for(var l=null;a!==null;)a.alternate!==null&&(l=a),a=a.sibling;l===null?i||t.tail===null?t.tail=null:t.tail.sibling=null:l.sibling=null}}function ht(t){var i=t.alternate!==null&&t.alternate.child===t.child,a=0,l=0;if(i)for(var h=t.child;h!==null;)a|=h.lanes|h.childLanes,l|=h.subtreeFlags&65011712,l|=h.flags&65011712,h.return=t,h=h.sibling;else for(h=t.child;h!==null;)a|=h.lanes|h.childLanes,l|=h.subtreeFlags,l|=h.flags,h.return=t,h=h.sibling;return t.subtreeFlags|=l,t.childLanes=a,i}function r1(t,i,a){var l=i.pendingProps;switch(zf(i),i.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ht(i),null;case 1:return ht(i),null;case 3:return a=i.stateNode,l=null,t!==null&&(l=t.memoizedState.cache),i.memoizedState.cache!==l&&(i.flags|=2048),ar(Nt),Ye(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(t===null||t.child===null)&&(La(i)?cr(i):t===null||t.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,qf())),ht(i),null;case 26:var h=i.type,d=i.memoizedState;return t===null?(cr(i),d!==null?(ht(i),pv(i,d)):(ht(i),Od(i,h,null,l,a))):d?d!==t.memoizedState?(cr(i),ht(i),pv(i,d)):(ht(i),i.flags&=-16777217):(t=t.memoizedProps,t!==l&&cr(i),ht(i),Od(i,h,t,l,a)),null;case 27:if(xn(i),a=Se.current,h=i.type,t!==null&&i.stateNode!=null)t.memoizedProps!==l&&cr(i);else{if(!l){if(i.stateNode===null)throw Error(s(166));return ht(i),null}t=de.current,La(i)?Kp(i):(t=S_(h,l,a),i.stateNode=t,cr(i))}return ht(i),null;case 5:if(xn(i),h=i.type,t!==null&&i.stateNode!=null)t.memoizedProps!==l&&cr(i);else{if(!l){if(i.stateNode===null)throw Error(s(166));return ht(i),null}if(d=de.current,La(i))Kp(i);else{var v=$c(Se.current);switch(d){case 1:d=v.createElementNS("http://www.w3.org/2000/svg",h);break;case 2:d=v.createElementNS("http://www.w3.org/1998/Math/MathML",h);break;default:switch(h){case"svg":d=v.createElementNS("http://www.w3.org/2000/svg",h);break;case"math":d=v.createElementNS("http://www.w3.org/1998/Math/MathML",h);break;case"script":d=v.createElement("div"),d.innerHTML="<script><\/script>",d=d.removeChild(d.firstChild);break;case"select":d=typeof l.is=="string"?v.createElement("select",{is:l.is}):v.createElement("select"),l.multiple?d.multiple=!0:l.size&&(d.size=l.size);break;default:d=typeof l.is=="string"?v.createElement(h,{is:l.is}):v.createElement(h)}}d[xt]=i,d[Ft]=l;e:for(v=i.child;v!==null;){if(v.tag===5||v.tag===6)d.appendChild(v.stateNode);else if(v.tag!==4&&v.tag!==27&&v.child!==null){v.child.return=v,v=v.child;continue}if(v===i)break e;for(;v.sibling===null;){if(v.return===null||v.return===i)break e;v=v.return}v.sibling.return=v.return,v=v.sibling}i.stateNode=d;e:switch(tn(d,h,l),h){case"button":case"input":case"select":case"textarea":l=!!l.autoFocus;break e;case"img":l=!0;break e;default:l=!1}l&&cr(i)}}return ht(i),Od(i,i.type,t===null?null:t.memoizedProps,i.pendingProps,a),null;case 6:if(t&&i.stateNode!=null)t.memoizedProps!==l&&cr(i);else{if(typeof l!="string"&&i.stateNode===null)throw Error(s(166));if(t=Se.current,La(i)){if(t=i.stateNode,a=i.memoizedProps,l=null,h=Jt,h!==null)switch(h.tag){case 27:case 5:l=h.memoizedProps}t[xt]=i,t=!!(t.nodeValue===a||l!==null&&l.suppressHydrationWarning===!0||f_(t.nodeValue,a)),t||Br(i,!0)}else t=$c(t).createTextNode(l),t[xt]=i,i.stateNode=t}return ht(i),null;case 31:if(a=i.memoizedState,t===null||t.memoizedState!==null){if(l=La(i),a!==null){if(t===null){if(!l)throw Error(s(318));if(t=i.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(s(557));t[xt]=i}else $s(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;ht(i),t=!1}else a=qf(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=a),t=!0;if(!t)return i.flags&256?(kn(i),i):(kn(i),null);if((i.flags&128)!==0)throw Error(s(558))}return ht(i),null;case 13:if(l=i.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(h=La(i),l!==null&&l.dehydrated!==null){if(t===null){if(!h)throw Error(s(318));if(h=i.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(s(317));h[xt]=i}else $s(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;ht(i),h=!1}else h=qf(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=h),h=!0;if(!h)return i.flags&256?(kn(i),i):(kn(i),null)}return kn(i),(i.flags&128)!==0?(i.lanes=a,i):(a=l!==null,t=t!==null&&t.memoizedState!==null,a&&(l=i.child,h=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(h=l.alternate.memoizedState.cachePool.pool),d=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(d=l.memoizedState.cachePool.pool),d!==h&&(l.flags|=2048)),a!==t&&a&&(i.child.flags|=8192),Nc(i,i.updateQueue),ht(i),null);case 4:return Ye(),t===null&&em(i.stateNode.containerInfo),ht(i),null;case 10:return ar(i.type),ht(i),null;case 19:if(ee(St),l=i.memoizedState,l===null)return ht(i),null;if(h=(i.flags&128)!==0,d=l.rendering,d===null)if(h)bl(l,!1);else{if(_t!==0||t!==null&&(t.flags&128)!==0)for(t=i.child;t!==null;){if(d=vc(t),d!==null){for(i.flags|=128,bl(l,!1),t=d.updateQueue,i.updateQueue=t,Nc(i,t),i.subtreeFlags=0,t=a,a=i.child;a!==null;)Fp(a,t),a=a.sibling;return ce(St,St.current&1|2),Fe&&rr(i,l.treeForkCount),i.child}t=t.sibling}l.tail!==null&&mn()>Pc&&(i.flags|=128,h=!0,bl(l,!1),i.lanes=4194304)}else{if(!h)if(t=vc(d),t!==null){if(i.flags|=128,h=!0,t=t.updateQueue,i.updateQueue=t,Nc(i,t),bl(l,!0),l.tail===null&&l.tailMode==="hidden"&&!d.alternate&&!Fe)return ht(i),null}else 2*mn()-l.renderingStartTime>Pc&&a!==536870912&&(i.flags|=128,h=!0,bl(l,!1),i.lanes=4194304);l.isBackwards?(d.sibling=i.child,i.child=d):(t=l.last,t!==null?t.sibling=d:i.child=d,l.last=d)}return l.tail!==null?(t=l.tail,l.rendering=t,l.tail=t.sibling,l.renderingStartTime=mn(),t.sibling=null,a=St.current,ce(St,h?a&1|2:a&1),Fe&&rr(i,l.treeForkCount),t):(ht(i),null);case 22:case 23:return kn(i),td(),l=i.memoizedState!==null,t!==null?t.memoizedState!==null!==l&&(i.flags|=8192):l&&(i.flags|=8192),l?(a&536870912)!==0&&(i.flags&128)===0&&(ht(i),i.subtreeFlags&6&&(i.flags|=8192)):ht(i),a=i.updateQueue,a!==null&&Nc(i,a.retryQueue),a=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),l=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(l=i.memoizedState.cachePool.pool),l!==a&&(i.flags|=2048),t!==null&&ee(Ks),null;case 24:return a=null,t!==null&&(a=t.memoizedState.cache),i.memoizedState.cache!==a&&(i.flags|=2048),ar(Nt),ht(i),null;case 25:return null;case 30:return null}throw Error(s(156,i.tag))}function s1(t,i){switch(zf(i),i.tag){case 1:return t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 3:return ar(Nt),Ye(),t=i.flags,(t&65536)!==0&&(t&128)===0?(i.flags=t&-65537|128,i):null;case 26:case 27:case 5:return xn(i),null;case 31:if(i.memoizedState!==null){if(kn(i),i.alternate===null)throw Error(s(340));$s()}return t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 13:if(kn(i),t=i.memoizedState,t!==null&&t.dehydrated!==null){if(i.alternate===null)throw Error(s(340));$s()}return t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 19:return ee(St),null;case 4:return Ye(),null;case 10:return ar(i.type),null;case 22:case 23:return kn(i),td(),t!==null&&ee(Ks),t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 24:return ar(Nt),null;case 25:return null;default:return null}}function yv(t,i){switch(zf(i),i.tag){case 3:ar(Nt),Ye();break;case 26:case 27:case 5:xn(i);break;case 4:Ye();break;case 31:i.memoizedState!==null&&kn(i);break;case 13:kn(i);break;case 19:ee(St);break;case 10:ar(i.type);break;case 22:case 23:kn(i),td(),t!==null&&ee(Ks);break;case 24:ar(Nt)}}function Sl(t,i){try{var a=i.updateQueue,l=a!==null?a.lastEffect:null;if(l!==null){var h=l.next;a=h;do{if((a.tag&t)===t){l=void 0;var d=a.create,v=a.inst;l=d(),v.destroy=l}a=a.next}while(a!==h)}}catch(S){nt(i,i.return,S)}}function Yr(t,i,a){try{var l=i.updateQueue,h=l!==null?l.lastEffect:null;if(h!==null){var d=h.next;l=d;do{if((l.tag&t)===t){var v=l.inst,S=v.destroy;if(S!==void 0){v.destroy=void 0,h=i;var M=a,G=S;try{G()}catch(te){nt(h,M,te)}}}l=l.next}while(l!==d)}}catch(te){nt(i,i.return,te)}}function vv(t){var i=t.updateQueue;if(i!==null){var a=t.stateNode;try{ly(i,a)}catch(l){nt(t,t.return,l)}}}function _v(t,i,a){a.props=ea(t.type,t.memoizedProps),a.state=t.memoizedState;try{a.componentWillUnmount()}catch(l){nt(t,i,l)}}function Al(t,i){try{var a=t.ref;if(a!==null){switch(t.tag){case 26:case 27:case 5:var l=t.stateNode;break;case 30:l=t.stateNode;break;default:l=t.stateNode}typeof a=="function"?t.refCleanup=a(l):a.current=l}}catch(h){nt(t,i,h)}}function Bi(t,i){var a=t.ref,l=t.refCleanup;if(a!==null)if(typeof l=="function")try{l()}catch(h){nt(t,i,h)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(h){nt(t,i,h)}else a.current=null}function Ev(t){var i=t.type,a=t.memoizedProps,l=t.stateNode;try{e:switch(i){case"button":case"input":case"select":case"textarea":a.autoFocus&&l.focus();break e;case"img":a.src?l.src=a.src:a.srcSet&&(l.srcset=a.srcSet)}}catch(h){nt(t,t.return,h)}}function Md(t,i,a){try{var l=t.stateNode;C1(l,t.type,a,i),l[Ft]=i}catch(h){nt(t,t.return,h)}}function Tv(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&ts(t.type)||t.tag===4}function Vd(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Tv(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&ts(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function kd(t,i,a){var l=t.tag;if(l===5||l===6)t=t.stateNode,i?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(t,i):(i=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,i.appendChild(t),a=a._reactRootContainer,a!=null||i.onclick!==null||(i.onclick=li));else if(l!==4&&(l===27&&ts(t.type)&&(a=t.stateNode,i=null),t=t.child,t!==null))for(kd(t,i,a),t=t.sibling;t!==null;)kd(t,i,a),t=t.sibling}function Oc(t,i,a){var l=t.tag;if(l===5||l===6)t=t.stateNode,i?a.insertBefore(t,i):a.appendChild(t);else if(l!==4&&(l===27&&ts(t.type)&&(a=t.stateNode),t=t.child,t!==null))for(Oc(t,i,a),t=t.sibling;t!==null;)Oc(t,i,a),t=t.sibling}function bv(t){var i=t.stateNode,a=t.memoizedProps;try{for(var l=t.type,h=i.attributes;h.length;)i.removeAttributeNode(h[0]);tn(i,l,a),i[xt]=t,i[Ft]=a}catch(d){nt(t,t.return,d)}}var hr=!1,Vt=!1,Pd=!1,Sv=typeof WeakSet=="function"?WeakSet:Set,$t=null;function a1(t,i){if(t=t.containerInfo,im=Zc,t=kp(t),If(t)){if("selectionStart"in t)var a={start:t.selectionStart,end:t.selectionEnd};else e:{a=(a=t.ownerDocument)&&a.defaultView||window;var l=a.getSelection&&a.getSelection();if(l&&l.rangeCount!==0){a=l.anchorNode;var h=l.anchorOffset,d=l.focusNode;l=l.focusOffset;try{a.nodeType,d.nodeType}catch{a=null;break e}var v=0,S=-1,M=-1,G=0,te=0,re=t,Q=null;t:for(;;){for(var X;re!==a||h!==0&&re.nodeType!==3||(S=v+h),re!==d||l!==0&&re.nodeType!==3||(M=v+l),re.nodeType===3&&(v+=re.nodeValue.length),(X=re.firstChild)!==null;)Q=re,re=X;for(;;){if(re===t)break t;if(Q===a&&++G===h&&(S=v),Q===d&&++te===l&&(M=v),(X=re.nextSibling)!==null)break;re=Q,Q=re.parentNode}re=X}a=S===-1||M===-1?null:{start:S,end:M}}else a=null}a=a||{start:0,end:0}}else a=null;for(rm={focusedElem:t,selectionRange:a},Zc=!1,$t=i;$t!==null;)if(i=$t,t=i.child,(i.subtreeFlags&1028)!==0&&t!==null)t.return=i,$t=t;else for(;$t!==null;){switch(i=$t,d=i.alternate,t=i.flags,i.tag){case 0:if((t&4)!==0&&(t=i.updateQueue,t=t!==null?t.events:null,t!==null))for(a=0;a<t.length;a++)h=t[a],h.ref.impl=h.nextImpl;break;case 11:case 15:break;case 1:if((t&1024)!==0&&d!==null){t=void 0,a=i,h=d.memoizedProps,d=d.memoizedState,l=a.stateNode;try{var ye=ea(a.type,h);t=l.getSnapshotBeforeUpdate(ye,d),l.__reactInternalSnapshotBeforeUpdate=t}catch(Re){nt(a,a.return,Re)}}break;case 3:if((t&1024)!==0){if(t=i.stateNode.containerInfo,a=t.nodeType,a===9)om(t);else if(a===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":om(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(s(163))}if(t=i.sibling,t!==null){t.return=i.return,$t=t;break}$t=i.return}}function Av(t,i,a){var l=a.flags;switch(a.tag){case 0:case 11:case 15:dr(t,a),l&4&&Sl(5,a);break;case 1:if(dr(t,a),l&4)if(t=a.stateNode,i===null)try{t.componentDidMount()}catch(v){nt(a,a.return,v)}else{var h=ea(a.type,i.memoizedProps);i=i.memoizedState;try{t.componentDidUpdate(h,i,t.__reactInternalSnapshotBeforeUpdate)}catch(v){nt(a,a.return,v)}}l&64&&vv(a),l&512&&Al(a,a.return);break;case 3:if(dr(t,a),l&64&&(t=a.updateQueue,t!==null)){if(i=null,a.child!==null)switch(a.child.tag){case 27:case 5:i=a.child.stateNode;break;case 1:i=a.child.stateNode}try{ly(t,i)}catch(v){nt(a,a.return,v)}}break;case 27:i===null&&l&4&&bv(a);case 26:case 5:dr(t,a),i===null&&l&4&&Ev(a),l&512&&Al(a,a.return);break;case 12:dr(t,a);break;case 31:dr(t,a),l&4&&Cv(t,a);break;case 13:dr(t,a),l&4&&xv(t,a),l&64&&(t=a.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(a=g1.bind(null,a),k1(t,a))));break;case 22:if(l=a.memoizedState!==null||hr,!l){i=i!==null&&i.memoizedState!==null||Vt,h=hr;var d=Vt;hr=l,(Vt=i)&&!d?mr(t,a,(a.subtreeFlags&8772)!==0):dr(t,a),hr=h,Vt=d}break;case 30:break;default:dr(t,a)}}function wv(t){var i=t.alternate;i!==null&&(t.alternate=null,wv(i)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(i=t.stateNode,i!==null&&Ea(i)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var mt=null,bn=!1;function fr(t,i,a){for(a=a.child;a!==null;)Rv(t,i,a),a=a.sibling}function Rv(t,i,a){if(Xt&&typeof Xt.onCommitFiberUnmount=="function")try{Xt.onCommitFiberUnmount(ri,a)}catch{}switch(a.tag){case 26:Vt||Bi(a,i),fr(t,i,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:Vt||Bi(a,i);var l=mt,h=bn;ts(a.type)&&(mt=a.stateNode,bn=!1),fr(t,i,a),Ml(a.stateNode),mt=l,bn=h;break;case 5:Vt||Bi(a,i);case 6:if(l=mt,h=bn,mt=null,fr(t,i,a),mt=l,bn=h,mt!==null)if(bn)try{(mt.nodeType===9?mt.body:mt.nodeName==="HTML"?mt.ownerDocument.body:mt).removeChild(a.stateNode)}catch(d){nt(a,i,d)}else try{mt.removeChild(a.stateNode)}catch(d){nt(a,i,d)}break;case 18:mt!==null&&(bn?(t=mt,v_(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,a.stateNode),ro(t)):v_(mt,a.stateNode));break;case 4:l=mt,h=bn,mt=a.stateNode.containerInfo,bn=!0,fr(t,i,a),mt=l,bn=h;break;case 0:case 11:case 14:case 15:Yr(2,a,i),Vt||Yr(4,a,i),fr(t,i,a);break;case 1:Vt||(Bi(a,i),l=a.stateNode,typeof l.componentWillUnmount=="function"&&_v(a,i,l)),fr(t,i,a);break;case 21:fr(t,i,a);break;case 22:Vt=(l=Vt)||a.memoizedState!==null,fr(t,i,a),Vt=l;break;default:fr(t,i,a)}}function Cv(t,i){if(i.memoizedState===null&&(t=i.alternate,t!==null&&(t=t.memoizedState,t!==null))){t=t.dehydrated;try{ro(t)}catch(a){nt(i,i.return,a)}}}function xv(t,i){if(i.memoizedState===null&&(t=i.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{ro(t)}catch(a){nt(i,i.return,a)}}function o1(t){switch(t.tag){case 31:case 13:case 19:var i=t.stateNode;return i===null&&(i=t.stateNode=new Sv),i;case 22:return t=t.stateNode,i=t._retryCache,i===null&&(i=t._retryCache=new Sv),i;default:throw Error(s(435,t.tag))}}function Mc(t,i){var a=o1(t);i.forEach(function(l){if(!a.has(l)){a.add(l);var h=p1.bind(null,t,l);l.then(h,h)}})}function Sn(t,i){var a=i.deletions;if(a!==null)for(var l=0;l<a.length;l++){var h=a[l],d=t,v=i,S=v;e:for(;S!==null;){switch(S.tag){case 27:if(ts(S.type)){mt=S.stateNode,bn=!1;break e}break;case 5:mt=S.stateNode,bn=!1;break e;case 3:case 4:mt=S.stateNode.containerInfo,bn=!0;break e}S=S.return}if(mt===null)throw Error(s(160));Rv(d,v,h),mt=null,bn=!1,d=h.alternate,d!==null&&(d.return=null),h.return=null}if(i.subtreeFlags&13886)for(i=i.child;i!==null;)Iv(i,t),i=i.sibling}var mi=null;function Iv(t,i){var a=t.alternate,l=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:Sn(i,t),An(t),l&4&&(Yr(3,t,t.return),Sl(3,t),Yr(5,t,t.return));break;case 1:Sn(i,t),An(t),l&512&&(Vt||a===null||Bi(a,a.return)),l&64&&hr&&(t=t.updateQueue,t!==null&&(l=t.callbacks,l!==null&&(a=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=a===null?l:a.concat(l))));break;case 26:var h=mi;if(Sn(i,t),An(t),l&512&&(Vt||a===null||Bi(a,a.return)),l&4){var d=a!==null?a.memoizedState:null;if(l=t.memoizedState,a===null)if(l===null)if(t.stateNode===null){e:{l=t.type,a=t.memoizedProps,h=h.ownerDocument||h;t:switch(l){case"title":d=h.getElementsByTagName("title")[0],(!d||d[Ci]||d[xt]||d.namespaceURI==="http://www.w3.org/2000/svg"||d.hasAttribute("itemprop"))&&(d=h.createElement(l),h.head.insertBefore(d,h.querySelector("head > title"))),tn(d,l,a),d[xt]=t,It(d),l=d;break e;case"link":var v=I_("link","href",h).get(l+(a.href||""));if(v){for(var S=0;S<v.length;S++)if(d=v[S],d.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&d.getAttribute("rel")===(a.rel==null?null:a.rel)&&d.getAttribute("title")===(a.title==null?null:a.title)&&d.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){v.splice(S,1);break t}}d=h.createElement(l),tn(d,l,a),h.head.appendChild(d);break;case"meta":if(v=I_("meta","content",h).get(l+(a.content||""))){for(S=0;S<v.length;S++)if(d=v[S],d.getAttribute("content")===(a.content==null?null:""+a.content)&&d.getAttribute("name")===(a.name==null?null:a.name)&&d.getAttribute("property")===(a.property==null?null:a.property)&&d.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&d.getAttribute("charset")===(a.charSet==null?null:a.charSet)){v.splice(S,1);break t}}d=h.createElement(l),tn(d,l,a),h.head.appendChild(d);break;default:throw Error(s(468,l))}d[xt]=t,It(d),l=d}t.stateNode=l}else D_(h,t.type,t.stateNode);else t.stateNode=x_(h,l,t.memoizedProps);else d!==l?(d===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):d.count--,l===null?D_(h,t.type,t.stateNode):x_(h,l,t.memoizedProps)):l===null&&t.stateNode!==null&&Md(t,t.memoizedProps,a.memoizedProps)}break;case 27:Sn(i,t),An(t),l&512&&(Vt||a===null||Bi(a,a.return)),a!==null&&l&4&&Md(t,t.memoizedProps,a.memoizedProps);break;case 5:if(Sn(i,t),An(t),l&512&&(Vt||a===null||Bi(a,a.return)),t.flags&32){h=t.stateNode;try{Tn(h,"")}catch(ye){nt(t,t.return,ye)}}l&4&&t.stateNode!=null&&(h=t.memoizedProps,Md(t,h,a!==null?a.memoizedProps:h)),l&1024&&(Pd=!0);break;case 6:if(Sn(i,t),An(t),l&4){if(t.stateNode===null)throw Error(s(162));l=t.memoizedProps,a=t.stateNode;try{a.nodeValue=l}catch(ye){nt(t,t.return,ye)}}break;case 3:if(Kc=null,h=mi,mi=Qc(i.containerInfo),Sn(i,t),mi=h,An(t),l&4&&a!==null&&a.memoizedState.isDehydrated)try{ro(i.containerInfo)}catch(ye){nt(t,t.return,ye)}Pd&&(Pd=!1,Dv(t));break;case 4:l=mi,mi=Qc(t.stateNode.containerInfo),Sn(i,t),An(t),mi=l;break;case 12:Sn(i,t),An(t);break;case 31:Sn(i,t),An(t),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,Mc(t,l)));break;case 13:Sn(i,t),An(t),t.child.flags&8192&&t.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(kc=mn()),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,Mc(t,l)));break;case 22:h=t.memoizedState!==null;var M=a!==null&&a.memoizedState!==null,G=hr,te=Vt;if(hr=G||h,Vt=te||M,Sn(i,t),Vt=te,hr=G,An(t),l&8192)e:for(i=t.stateNode,i._visibility=h?i._visibility&-2:i._visibility|1,h&&(a===null||M||hr||Vt||ta(t)),a=null,i=t;;){if(i.tag===5||i.tag===26){if(a===null){M=a=i;try{if(d=M.stateNode,h)v=d.style,typeof v.setProperty=="function"?v.setProperty("display","none","important"):v.display="none";else{S=M.stateNode;var re=M.memoizedProps.style,Q=re!=null&&re.hasOwnProperty("display")?re.display:null;S.style.display=Q==null||typeof Q=="boolean"?"":(""+Q).trim()}}catch(ye){nt(M,M.return,ye)}}}else if(i.tag===6){if(a===null){M=i;try{M.stateNode.nodeValue=h?"":M.memoizedProps}catch(ye){nt(M,M.return,ye)}}}else if(i.tag===18){if(a===null){M=i;try{var X=M.stateNode;h?__(X,!0):__(M.stateNode,!1)}catch(ye){nt(M,M.return,ye)}}}else if((i.tag!==22&&i.tag!==23||i.memoizedState===null||i===t)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===t)break e;for(;i.sibling===null;){if(i.return===null||i.return===t)break e;a===i&&(a=null),i=i.return}a===i&&(a=null),i.sibling.return=i.return,i=i.sibling}l&4&&(l=t.updateQueue,l!==null&&(a=l.retryQueue,a!==null&&(l.retryQueue=null,Mc(t,a))));break;case 19:Sn(i,t),An(t),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,Mc(t,l)));break;case 30:break;case 21:break;default:Sn(i,t),An(t)}}function An(t){var i=t.flags;if(i&2){try{for(var a,l=t.return;l!==null;){if(Tv(l)){a=l;break}l=l.return}if(a==null)throw Error(s(160));switch(a.tag){case 27:var h=a.stateNode,d=Vd(t);Oc(t,d,h);break;case 5:var v=a.stateNode;a.flags&32&&(Tn(v,""),a.flags&=-33);var S=Vd(t);Oc(t,S,v);break;case 3:case 4:var M=a.stateNode.containerInfo,G=Vd(t);kd(t,G,M);break;default:throw Error(s(161))}}catch(te){nt(t,t.return,te)}t.flags&=-3}i&4096&&(t.flags&=-4097)}function Dv(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var i=t;Dv(i),i.tag===5&&i.flags&1024&&i.stateNode.reset(),t=t.sibling}}function dr(t,i){if(i.subtreeFlags&8772)for(i=i.child;i!==null;)Av(t,i.alternate,i),i=i.sibling}function ta(t){for(t=t.child;t!==null;){var i=t;switch(i.tag){case 0:case 11:case 14:case 15:Yr(4,i,i.return),ta(i);break;case 1:Bi(i,i.return);var a=i.stateNode;typeof a.componentWillUnmount=="function"&&_v(i,i.return,a),ta(i);break;case 27:Ml(i.stateNode);case 26:case 5:Bi(i,i.return),ta(i);break;case 22:i.memoizedState===null&&ta(i);break;case 30:ta(i);break;default:ta(i)}t=t.sibling}}function mr(t,i,a){for(a=a&&(i.subtreeFlags&8772)!==0,i=i.child;i!==null;){var l=i.alternate,h=t,d=i,v=d.flags;switch(d.tag){case 0:case 11:case 15:mr(h,d,a),Sl(4,d);break;case 1:if(mr(h,d,a),l=d,h=l.stateNode,typeof h.componentDidMount=="function")try{h.componentDidMount()}catch(G){nt(l,l.return,G)}if(l=d,h=l.updateQueue,h!==null){var S=l.stateNode;try{var M=h.shared.hiddenCallbacks;if(M!==null)for(h.shared.hiddenCallbacks=null,h=0;h<M.length;h++)oy(M[h],S)}catch(G){nt(l,l.return,G)}}a&&v&64&&vv(d),Al(d,d.return);break;case 27:bv(d);case 26:case 5:mr(h,d,a),a&&l===null&&v&4&&Ev(d),Al(d,d.return);break;case 12:mr(h,d,a);break;case 31:mr(h,d,a),a&&v&4&&Cv(h,d);break;case 13:mr(h,d,a),a&&v&4&&xv(h,d);break;case 22:d.memoizedState===null&&mr(h,d,a),Al(d,d.return);break;case 30:break;default:mr(h,d,a)}i=i.sibling}}function Ld(t,i){var a=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),t=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(t=i.memoizedState.cachePool.pool),t!==a&&(t!=null&&t.refCount++,a!=null&&cl(a))}function jd(t,i){t=null,i.alternate!==null&&(t=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==t&&(i.refCount++,t!=null&&cl(t))}function gi(t,i,a,l){if(i.subtreeFlags&10256)for(i=i.child;i!==null;)Nv(t,i,a,l),i=i.sibling}function Nv(t,i,a,l){var h=i.flags;switch(i.tag){case 0:case 11:case 15:gi(t,i,a,l),h&2048&&Sl(9,i);break;case 1:gi(t,i,a,l);break;case 3:gi(t,i,a,l),h&2048&&(t=null,i.alternate!==null&&(t=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==t&&(i.refCount++,t!=null&&cl(t)));break;case 12:if(h&2048){gi(t,i,a,l),t=i.stateNode;try{var d=i.memoizedProps,v=d.id,S=d.onPostCommit;typeof S=="function"&&S(v,i.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(M){nt(i,i.return,M)}}else gi(t,i,a,l);break;case 31:gi(t,i,a,l);break;case 13:gi(t,i,a,l);break;case 23:break;case 22:d=i.stateNode,v=i.alternate,i.memoizedState!==null?d._visibility&2?gi(t,i,a,l):wl(t,i):d._visibility&2?gi(t,i,a,l):(d._visibility|=2,Qa(t,i,a,l,(i.subtreeFlags&10256)!==0||!1)),h&2048&&Ld(v,i);break;case 24:gi(t,i,a,l),h&2048&&jd(i.alternate,i);break;default:gi(t,i,a,l)}}function Qa(t,i,a,l,h){for(h=h&&((i.subtreeFlags&10256)!==0||!1),i=i.child;i!==null;){var d=t,v=i,S=a,M=l,G=v.flags;switch(v.tag){case 0:case 11:case 15:Qa(d,v,S,M,h),Sl(8,v);break;case 23:break;case 22:var te=v.stateNode;v.memoizedState!==null?te._visibility&2?Qa(d,v,S,M,h):wl(d,v):(te._visibility|=2,Qa(d,v,S,M,h)),h&&G&2048&&Ld(v.alternate,v);break;case 24:Qa(d,v,S,M,h),h&&G&2048&&jd(v.alternate,v);break;default:Qa(d,v,S,M,h)}i=i.sibling}}function wl(t,i){if(i.subtreeFlags&10256)for(i=i.child;i!==null;){var a=t,l=i,h=l.flags;switch(l.tag){case 22:wl(a,l),h&2048&&Ld(l.alternate,l);break;case 24:wl(a,l),h&2048&&jd(l.alternate,l);break;default:wl(a,l)}i=i.sibling}}var Rl=8192;function Ya(t,i,a){if(t.subtreeFlags&Rl)for(t=t.child;t!==null;)Ov(t,i,a),t=t.sibling}function Ov(t,i,a){switch(t.tag){case 26:Ya(t,i,a),t.flags&Rl&&t.memoizedState!==null&&Q1(a,mi,t.memoizedState,t.memoizedProps);break;case 5:Ya(t,i,a);break;case 3:case 4:var l=mi;mi=Qc(t.stateNode.containerInfo),Ya(t,i,a),mi=l;break;case 22:t.memoizedState===null&&(l=t.alternate,l!==null&&l.memoizedState!==null?(l=Rl,Rl=16777216,Ya(t,i,a),Rl=l):Ya(t,i,a));break;default:Ya(t,i,a)}}function Mv(t){var i=t.alternate;if(i!==null&&(t=i.child,t!==null)){i.child=null;do i=t.sibling,t.sibling=null,t=i;while(t!==null)}}function Cl(t){var i=t.deletions;if((t.flags&16)!==0){if(i!==null)for(var a=0;a<i.length;a++){var l=i[a];$t=l,kv(l,t)}Mv(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)Vv(t),t=t.sibling}function Vv(t){switch(t.tag){case 0:case 11:case 15:Cl(t),t.flags&2048&&Yr(9,t,t.return);break;case 3:Cl(t);break;case 12:Cl(t);break;case 22:var i=t.stateNode;t.memoizedState!==null&&i._visibility&2&&(t.return===null||t.return.tag!==13)?(i._visibility&=-3,Vc(t)):Cl(t);break;default:Cl(t)}}function Vc(t){var i=t.deletions;if((t.flags&16)!==0){if(i!==null)for(var a=0;a<i.length;a++){var l=i[a];$t=l,kv(l,t)}Mv(t)}for(t=t.child;t!==null;){switch(i=t,i.tag){case 0:case 11:case 15:Yr(8,i,i.return),Vc(i);break;case 22:a=i.stateNode,a._visibility&2&&(a._visibility&=-3,Vc(i));break;default:Vc(i)}t=t.sibling}}function kv(t,i){for(;$t!==null;){var a=$t;switch(a.tag){case 0:case 11:case 15:Yr(8,a,i);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var l=a.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:cl(a.memoizedState.cache)}if(l=a.child,l!==null)l.return=a,$t=l;else e:for(a=t;$t!==null;){l=$t;var h=l.sibling,d=l.return;if(wv(l),l===a){$t=null;break e}if(h!==null){h.return=d,$t=h;break e}$t=d}}}var l1={getCacheForType:function(t){var i=Zt(Nt),a=i.data.get(t);return a===void 0&&(a=t(),i.data.set(t,a)),a},cacheSignal:function(){return Zt(Nt).controller.signal}},u1=typeof WeakMap=="function"?WeakMap:Map,Ze=0,ut=null,Le=null,Ue=0,tt=0,Pn=null,Kr=!1,Ka=!1,Ud=!1,gr=0,_t=0,Xr=0,na=0,zd=0,Ln=0,Xa=0,xl=null,wn=null,Bd=!1,kc=0,Pv=0,Pc=1/0,Lc=null,Wr=null,qt=0,Jr=null,Wa=null,pr=0,qd=0,Hd=null,Lv=null,Il=0,Fd=null;function jn(){return(Ze&2)!==0&&Ue!==0?Ue&-Ue:z.T!==null?Xd():ju()}function jv(){if(Ln===0)if((Ue&536870912)===0||Fe){var t=Is;Is<<=1,(Is&3932160)===0&&(Is=262144),Ln=t}else Ln=536870912;return t=Vn.current,t!==null&&(t.flags|=32),Ln}function Rn(t,i,a){(t===ut&&(tt===2||tt===9)||t.cancelPendingCommit!==null)&&(Ja(t,0),Zr(t,Ue,Ln,!1)),Ds(t,a),((Ze&2)===0||t!==ut)&&(t===ut&&((Ze&2)===0&&(na|=a),_t===4&&Zr(t,Ue,Ln,!1)),qi(t))}function Uv(t,i,a){if((Ze&6)!==0)throw Error(s(327));var l=!a&&(i&127)===0&&(i&t.expiredLanes)===0||si(t,i),h=l?f1(t,i):$d(t,i,!0),d=l;do{if(h===0){Ka&&!l&&Zr(t,i,0,!1);break}else{if(a=t.current.alternate,d&&!c1(a)){h=$d(t,i,!1),d=!1;continue}if(h===2){if(d=i,t.errorRecoveryDisabledLanes&d)var v=0;else v=t.pendingLanes&-536870913,v=v!==0?v:v&536870912?536870912:0;if(v!==0){i=v;e:{var S=t;h=xl;var M=S.current.memoizedState.isDehydrated;if(M&&(Ja(S,v).flags|=256),v=$d(S,v,!1),v!==2){if(Ud&&!M){S.errorRecoveryDisabledLanes|=d,na|=d,h=4;break e}d=wn,wn=h,d!==null&&(wn===null?wn=d:wn.push.apply(wn,d))}h=v}if(d=!1,h!==2)continue}}if(h===1){Ja(t,0),Zr(t,i,0,!0);break}e:{switch(l=t,d=h,d){case 0:case 1:throw Error(s(345));case 4:if((i&4194048)!==i)break;case 6:Zr(l,i,Ln,!Kr);break e;case 2:wn=null;break;case 3:case 5:break;default:throw Error(s(329))}if((i&62914560)===i&&(h=kc+300-mn(),10<h)){if(Zr(l,i,Ln,!Kr),Ai(l,0,!0)!==0)break e;pr=i,l.timeoutHandle=p_(zv.bind(null,l,a,wn,Lc,Bd,i,Ln,na,Xa,Kr,d,"Throttled",-0,0),h);break e}zv(l,a,wn,Lc,Bd,i,Ln,na,Xa,Kr,d,null,-0,0)}}break}while(!0);qi(t)}function zv(t,i,a,l,h,d,v,S,M,G,te,re,Q,X){if(t.timeoutHandle=-1,re=i.subtreeFlags,re&8192||(re&16785408)===16785408){re={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:li},Ov(i,d,re);var ye=(d&62914560)===d?kc-mn():(d&4194048)===d?Pv-mn():0;if(ye=Y1(re,ye),ye!==null){pr=d,t.cancelPendingCommit=ye(Yv.bind(null,t,i,d,a,l,h,v,S,M,te,re,null,Q,X)),Zr(t,d,v,!G);return}}Yv(t,i,d,a,l,h,v,S,M)}function c1(t){for(var i=t;;){var a=i.tag;if((a===0||a===11||a===15)&&i.flags&16384&&(a=i.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var l=0;l<a.length;l++){var h=a[l],d=h.getSnapshot;h=h.value;try{if(!On(d(),h))return!1}catch{return!1}}if(a=i.child,i.subtreeFlags&16384&&a!==null)a.return=i,i=a;else{if(i===t)break;for(;i.sibling===null;){if(i.return===null||i.return===t)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function Zr(t,i,a,l){i&=~zd,i&=~na,t.suspendedLanes|=i,t.pingedLanes&=~i,l&&(t.warmLanes|=i),l=t.expirationTimes;for(var h=i;0<h;){var d=31-Tt(h),v=1<<d;l[d]=-1,h&=~v}a!==0&&Ns(t,a,i)}function jc(){return(Ze&6)===0?(Dl(0),!1):!0}function Gd(){if(Le!==null){if(tt===0)var t=Le.return;else t=Le,sr=Qs=null,od(t),qa=null,fl=0,t=Le;for(;t!==null;)yv(t.alternate,t),t=t.return;Le=null}}function Ja(t,i){var a=t.timeoutHandle;a!==-1&&(t.timeoutHandle=-1,D1(a)),a=t.cancelPendingCommit,a!==null&&(t.cancelPendingCommit=null,a()),pr=0,Gd(),ut=t,Le=a=ir(t.current,null),Ue=i,tt=0,Pn=null,Kr=!1,Ka=si(t,i),Ud=!1,Xa=Ln=zd=na=Xr=_t=0,wn=xl=null,Bd=!1,(i&8)!==0&&(i|=i&32);var l=t.entangledLanes;if(l!==0)for(t=t.entanglements,l&=i;0<l;){var h=31-Tt(l),d=1<<h;i|=t[h],l&=~d}return gr=i,sc(),a}function Bv(t,i){Ve=null,z.H=El,i===Ba||i===dc?(i=iy(),tt=3):i===Kf?(i=iy(),tt=4):tt=i===Sd?8:i!==null&&typeof i=="object"&&typeof i.then=="function"?6:1,Pn=i,Le===null&&(_t=1,Cc(t,Xn(i,t.current)))}function qv(){var t=Vn.current;return t===null?!0:(Ue&4194048)===Ue?ei===null:(Ue&62914560)===Ue||(Ue&536870912)!==0?t===ei:!1}function Hv(){var t=z.H;return z.H=El,t===null?El:t}function Fv(){var t=z.A;return z.A=l1,t}function Uc(){_t=4,Kr||(Ue&4194048)!==Ue&&Vn.current!==null||(Ka=!0),(Xr&134217727)===0&&(na&134217727)===0||ut===null||Zr(ut,Ue,Ln,!1)}function $d(t,i,a){var l=Ze;Ze|=2;var h=Hv(),d=Fv();(ut!==t||Ue!==i)&&(Lc=null,Ja(t,i)),i=!1;var v=_t;e:do try{if(tt!==0&&Le!==null){var S=Le,M=Pn;switch(tt){case 8:Gd(),v=6;break e;case 3:case 2:case 9:case 6:Vn.current===null&&(i=!0);var G=tt;if(tt=0,Pn=null,Za(t,S,M,G),a&&Ka){v=0;break e}break;default:G=tt,tt=0,Pn=null,Za(t,S,M,G)}}h1(),v=_t;break}catch(te){Bv(t,te)}while(!0);return i&&t.shellSuspendCounter++,sr=Qs=null,Ze=l,z.H=h,z.A=d,Le===null&&(ut=null,Ue=0,sc()),v}function h1(){for(;Le!==null;)Gv(Le)}function f1(t,i){var a=Ze;Ze|=2;var l=Hv(),h=Fv();ut!==t||Ue!==i?(Lc=null,Pc=mn()+500,Ja(t,i)):Ka=si(t,i);e:do try{if(tt!==0&&Le!==null){i=Le;var d=Pn;t:switch(tt){case 1:tt=0,Pn=null,Za(t,i,d,1);break;case 2:case 9:if(ty(d)){tt=0,Pn=null,$v(i);break}i=function(){tt!==2&&tt!==9||ut!==t||(tt=7),qi(t)},d.then(i,i);break e;case 3:tt=7;break e;case 4:tt=5;break e;case 7:ty(d)?(tt=0,Pn=null,$v(i)):(tt=0,Pn=null,Za(t,i,d,7));break;case 5:var v=null;switch(Le.tag){case 26:v=Le.memoizedState;case 5:case 27:var S=Le;if(v?N_(v):S.stateNode.complete){tt=0,Pn=null;var M=S.sibling;if(M!==null)Le=M;else{var G=S.return;G!==null?(Le=G,zc(G)):Le=null}break t}}tt=0,Pn=null,Za(t,i,d,5);break;case 6:tt=0,Pn=null,Za(t,i,d,6);break;case 8:Gd(),_t=6;break e;default:throw Error(s(462))}}d1();break}catch(te){Bv(t,te)}while(!0);return sr=Qs=null,z.H=l,z.A=h,Ze=a,Le!==null?0:(ut=null,Ue=0,sc(),_t)}function d1(){for(;Le!==null&&!bf();)Gv(Le)}function Gv(t){var i=gv(t.alternate,t,gr);t.memoizedProps=t.pendingProps,i===null?zc(t):Le=i}function $v(t){var i=t,a=i.alternate;switch(i.tag){case 15:case 0:i=uv(a,i,i.pendingProps,i.type,void 0,Ue);break;case 11:i=uv(a,i,i.pendingProps,i.type.render,i.ref,Ue);break;case 5:od(i);default:yv(a,i),i=Le=Fp(i,gr),i=gv(a,i,gr)}t.memoizedProps=t.pendingProps,i===null?zc(t):Le=i}function Za(t,i,a,l){sr=Qs=null,od(i),qa=null,fl=0;var h=i.return;try{if(t1(t,h,i,a,Ue)){_t=1,Cc(t,Xn(a,t.current)),Le=null;return}}catch(d){if(h!==null)throw Le=h,d;_t=1,Cc(t,Xn(a,t.current)),Le=null;return}i.flags&32768?(Fe||l===1?t=!0:Ka||(Ue&536870912)!==0?t=!1:(Kr=t=!0,(l===2||l===9||l===3||l===6)&&(l=Vn.current,l!==null&&l.tag===13&&(l.flags|=16384))),Qv(i,t)):zc(i)}function zc(t){var i=t;do{if((i.flags&32768)!==0){Qv(i,Kr);return}t=i.return;var a=r1(i.alternate,i,gr);if(a!==null){Le=a;return}if(i=i.sibling,i!==null){Le=i;return}Le=i=t}while(i!==null);_t===0&&(_t=5)}function Qv(t,i){do{var a=s1(t.alternate,t);if(a!==null){a.flags&=32767,Le=a;return}if(a=t.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!i&&(t=t.sibling,t!==null)){Le=t;return}Le=t=a}while(t!==null);_t=6,Le=null}function Yv(t,i,a,l,h,d,v,S,M){t.cancelPendingCommit=null;do Bc();while(qt!==0);if((Ze&6)!==0)throw Error(s(327));if(i!==null){if(i===t.current)throw Error(s(177));if(d=i.lanes|i.childLanes,d|=Vf,wf(t,a,d,v,S,M),t===ut&&(Le=ut=null,Ue=0),Wa=i,Jr=t,pr=a,qd=d,Hd=h,Lv=l,(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,y1(Ir,function(){return Zv(),null})):(t.callbackNode=null,t.callbackPriority=0),l=(i.flags&13878)!==0,(i.subtreeFlags&13878)!==0||l){l=z.T,z.T=null,h=oe.p,oe.p=2,v=Ze,Ze|=4;try{a1(t,i,a)}finally{Ze=v,oe.p=h,z.T=l}}qt=1,Kv(),Xv(),Wv()}}function Kv(){if(qt===1){qt=0;var t=Jr,i=Wa,a=(i.flags&13878)!==0;if((i.subtreeFlags&13878)!==0||a){a=z.T,z.T=null;var l=oe.p;oe.p=2;var h=Ze;Ze|=4;try{Iv(i,t);var d=rm,v=kp(t.containerInfo),S=d.focusedElem,M=d.selectionRange;if(v!==S&&S&&S.ownerDocument&&Vp(S.ownerDocument.documentElement,S)){if(M!==null&&If(S)){var G=M.start,te=M.end;if(te===void 0&&(te=G),"selectionStart"in S)S.selectionStart=G,S.selectionEnd=Math.min(te,S.value.length);else{var re=S.ownerDocument||document,Q=re&&re.defaultView||window;if(Q.getSelection){var X=Q.getSelection(),ye=S.textContent.length,Re=Math.min(M.start,ye),at=M.end===void 0?Re:Math.min(M.end,ye);!X.extend&&Re>at&&(v=at,at=Re,Re=v);var U=Mp(S,Re),L=Mp(S,at);if(U&&L&&(X.rangeCount!==1||X.anchorNode!==U.node||X.anchorOffset!==U.offset||X.focusNode!==L.node||X.focusOffset!==L.offset)){var F=re.createRange();F.setStart(U.node,U.offset),X.removeAllRanges(),Re>at?(X.addRange(F),X.extend(L.node,L.offset)):(F.setEnd(L.node,L.offset),X.addRange(F))}}}}for(re=[],X=S;X=X.parentNode;)X.nodeType===1&&re.push({element:X,left:X.scrollLeft,top:X.scrollTop});for(typeof S.focus=="function"&&S.focus(),S=0;S<re.length;S++){var ie=re[S];ie.element.scrollLeft=ie.left,ie.element.scrollTop=ie.top}}Zc=!!im,rm=im=null}finally{Ze=h,oe.p=l,z.T=a}}t.current=i,qt=2}}function Xv(){if(qt===2){qt=0;var t=Jr,i=Wa,a=(i.flags&8772)!==0;if((i.subtreeFlags&8772)!==0||a){a=z.T,z.T=null;var l=oe.p;oe.p=2;var h=Ze;Ze|=4;try{Av(t,i.alternate,i)}finally{Ze=h,oe.p=l,z.T=a}}qt=3}}function Wv(){if(qt===4||qt===3){qt=0,Nu();var t=Jr,i=Wa,a=pr,l=Lv;(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?qt=5:(qt=0,Wa=Jr=null,Jv(t,t.pendingLanes));var h=t.pendingLanes;if(h===0&&(Wr=null),Zi(a),i=i.stateNode,Xt&&typeof Xt.onCommitFiberRoot=="function")try{Xt.onCommitFiberRoot(ri,i,void 0,(i.current.flags&128)===128)}catch{}if(l!==null){i=z.T,h=oe.p,oe.p=2,z.T=null;try{for(var d=t.onRecoverableError,v=0;v<l.length;v++){var S=l[v];d(S.value,{componentStack:S.stack})}}finally{z.T=i,oe.p=h}}(pr&3)!==0&&Bc(),qi(t),h=t.pendingLanes,(a&261930)!==0&&(h&42)!==0?t===Fd?Il++:(Il=0,Fd=t):Il=0,Dl(0)}}function Jv(t,i){(t.pooledCacheLanes&=i)===0&&(i=t.pooledCache,i!=null&&(t.pooledCache=null,cl(i)))}function Bc(){return Kv(),Xv(),Wv(),Zv()}function Zv(){if(qt!==5)return!1;var t=Jr,i=qd;qd=0;var a=Zi(pr),l=z.T,h=oe.p;try{oe.p=32>a?32:a,z.T=null,a=Hd,Hd=null;var d=Jr,v=pr;if(qt=0,Wa=Jr=null,pr=0,(Ze&6)!==0)throw Error(s(331));var S=Ze;if(Ze|=4,Vv(d.current),Nv(d,d.current,v,a),Ze=S,Dl(0,!1),Xt&&typeof Xt.onPostCommitFiberRoot=="function")try{Xt.onPostCommitFiberRoot(ri,d)}catch{}return!0}finally{oe.p=h,z.T=l,Jv(t,i)}}function e_(t,i,a){i=Xn(a,i),i=bd(t.stateNode,i,2),t=Gr(t,i,2),t!==null&&(Ds(t,2),qi(t))}function nt(t,i,a){if(t.tag===3)e_(t,t,a);else for(;i!==null;){if(i.tag===3){e_(i,t,a);break}else if(i.tag===1){var l=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(Wr===null||!Wr.has(l))){t=Xn(a,t),a=tv(2),l=Gr(i,a,2),l!==null&&(nv(a,l,i,t),Ds(l,2),qi(l));break}}i=i.return}}function Qd(t,i,a){var l=t.pingCache;if(l===null){l=t.pingCache=new u1;var h=new Set;l.set(i,h)}else h=l.get(i),h===void 0&&(h=new Set,l.set(i,h));h.has(a)||(Ud=!0,h.add(a),t=m1.bind(null,t,i,a),i.then(t,t))}function m1(t,i,a){var l=t.pingCache;l!==null&&l.delete(i),t.pingedLanes|=t.suspendedLanes&a,t.warmLanes&=~a,ut===t&&(Ue&a)===a&&(_t===4||_t===3&&(Ue&62914560)===Ue&&300>mn()-kc?(Ze&2)===0&&Ja(t,0):zd|=a,Xa===Ue&&(Xa=0)),qi(t)}function t_(t,i){i===0&&(i=Lu()),t=Fs(t,i),t!==null&&(Ds(t,i),qi(t))}function g1(t){var i=t.memoizedState,a=0;i!==null&&(a=i.retryLane),t_(t,a)}function p1(t,i){var a=0;switch(t.tag){case 31:case 13:var l=t.stateNode,h=t.memoizedState;h!==null&&(a=h.retryLane);break;case 19:l=t.stateNode;break;case 22:l=t.stateNode._retryCache;break;default:throw Error(s(314))}l!==null&&l.delete(i),t_(t,a)}function y1(t,i){return Bt(t,i)}var qc=null,eo=null,Yd=!1,Hc=!1,Kd=!1,es=0;function qi(t){t!==eo&&t.next===null&&(eo===null?qc=eo=t:eo=eo.next=t),Hc=!0,Yd||(Yd=!0,_1())}function Dl(t,i){if(!Kd&&Hc){Kd=!0;do for(var a=!1,l=qc;l!==null;){if(t!==0){var h=l.pendingLanes;if(h===0)var d=0;else{var v=l.suspendedLanes,S=l.pingedLanes;d=(1<<31-Tt(42|t)+1)-1,d&=h&~(v&~S),d=d&201326741?d&201326741|1:d?d|2:0}d!==0&&(a=!0,s_(l,d))}else d=Ue,d=Ai(l,l===ut?d:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(d&3)===0||si(l,d)||(a=!0,s_(l,d));l=l.next}while(a);Kd=!1}}function v1(){n_()}function n_(){Hc=Yd=!1;var t=0;es!==0&&I1()&&(t=es);for(var i=mn(),a=null,l=qc;l!==null;){var h=l.next,d=i_(l,i);d===0?(l.next=null,a===null?qc=h:a.next=h,h===null&&(eo=a)):(a=l,(t!==0||(d&3)!==0)&&(Hc=!0)),l=h}qt!==0&&qt!==5||Dl(t),es!==0&&(es=0)}function i_(t,i){for(var a=t.suspendedLanes,l=t.pingedLanes,h=t.expirationTimes,d=t.pendingLanes&-62914561;0<d;){var v=31-Tt(d),S=1<<v,M=h[v];M===-1?((S&a)===0||(S&l)!==0)&&(h[v]=Af(S,i)):M<=i&&(t.expiredLanes|=S),d&=~S}if(i=ut,a=Ue,a=Ai(t,t===i?a:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l=t.callbackNode,a===0||t===i&&(tt===2||tt===9)||t.cancelPendingCommit!==null)return l!==null&&l!==null&&xr(l),t.callbackNode=null,t.callbackPriority=0;if((a&3)===0||si(t,a)){if(i=a&-a,i===t.callbackPriority)return i;switch(l!==null&&xr(l),Zi(a)){case 2:case 8:a=zo;break;case 32:a=Ir;break;case 268435456:a=Ou;break;default:a=Ir}return l=r_.bind(null,t),a=Bt(a,l),t.callbackPriority=i,t.callbackNode=a,i}return l!==null&&l!==null&&xr(l),t.callbackPriority=2,t.callbackNode=null,2}function r_(t,i){if(qt!==0&&qt!==5)return t.callbackNode=null,t.callbackPriority=0,null;var a=t.callbackNode;if(Bc()&&t.callbackNode!==a)return null;var l=Ue;return l=Ai(t,t===ut?l:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l===0?null:(Uv(t,l,i),i_(t,mn()),t.callbackNode!=null&&t.callbackNode===a?r_.bind(null,t):null)}function s_(t,i){if(Bc())return null;Uv(t,i,!0)}function _1(){N1(function(){(Ze&6)!==0?Bt(Uo,v1):n_()})}function Xd(){if(es===0){var t=Ua;t===0&&(t=bi,bi<<=1,(bi&261888)===0&&(bi=256)),es=t}return es}function a_(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:Aa(""+t)}function o_(t,i){var a=i.ownerDocument.createElement("input");return a.name=i.name,a.value=i.value,t.id&&a.setAttribute("form",t.id),i.parentNode.insertBefore(a,i),t=new FormData(t),a.parentNode.removeChild(a),t}function E1(t,i,a,l,h){if(i==="submit"&&a&&a.stateNode===h){var d=a_((h[Ft]||null).action),v=l.submitter;v&&(i=(i=v[Ft]||null)?a_(i.formAction):v.getAttribute("formAction"),i!==null&&(d=i,v=null));var S=new ki("action","action",null,l,h);t.push({event:S,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(es!==0){var M=v?o_(h,v):new FormData(h);pd(a,{pending:!0,data:M,method:h.method,action:d},null,M)}}else typeof d=="function"&&(S.preventDefault(),M=v?o_(h,v):new FormData(h),pd(a,{pending:!0,data:M,method:h.method,action:d},d,M))},currentTarget:h}]})}}for(var Wd=0;Wd<Mf.length;Wd++){var Jd=Mf[Wd],T1=Jd.toLowerCase(),b1=Jd[0].toUpperCase()+Jd.slice(1);di(T1,"on"+b1)}di(jp,"onAnimationEnd"),di(Up,"onAnimationIteration"),di(zp,"onAnimationStart"),di("dblclick","onDoubleClick"),di("focusin","onFocus"),di("focusout","onBlur"),di(jS,"onTransitionRun"),di(US,"onTransitionStart"),di(zS,"onTransitionCancel"),di(Bp,"onTransitionEnd"),Ni("onMouseEnter",["mouseout","mouseover"]),Ni("onMouseLeave",["mouseout","mouseover"]),Ni("onPointerEnter",["pointerout","pointerover"]),Ni("onPointerLeave",["pointerout","pointerover"]),Di("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Di("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Di("onBeforeInput",["compositionend","keypress","textInput","paste"]),Di("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Di("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Di("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Nl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),S1=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Nl));function l_(t,i){i=(i&4)!==0;for(var a=0;a<t.length;a++){var l=t[a],h=l.event;l=l.listeners;e:{var d=void 0;if(i)for(var v=l.length-1;0<=v;v--){var S=l[v],M=S.instance,G=S.currentTarget;if(S=S.listener,M!==d&&h.isPropagationStopped())break e;d=S,h.currentTarget=G;try{d(h)}catch(te){rc(te)}h.currentTarget=null,d=M}else for(v=0;v<l.length;v++){if(S=l[v],M=S.instance,G=S.currentTarget,S=S.listener,M!==d&&h.isPropagationStopped())break e;d=S,h.currentTarget=G;try{d(h)}catch(te){rc(te)}h.currentTarget=null,d=M}}}}function je(t,i){var a=i[_a];a===void 0&&(a=i[_a]=new Set);var l=t+"__bubble";a.has(l)||(u_(i,t,2,!1),a.add(l))}function Zd(t,i,a){var l=0;i&&(l|=4),u_(a,t,l,i)}var Fc="_reactListening"+Math.random().toString(36).slice(2);function em(t){if(!t[Fc]){t[Fc]=!0,Ho.forEach(function(a){a!=="selectionchange"&&(S1.has(a)||Zd(a,!1,t),Zd(a,!0,t))});var i=t.nodeType===9?t:t.ownerDocument;i===null||i[Fc]||(i[Fc]=!0,Zd("selectionchange",!1,i))}}function u_(t,i,a,l){switch(j_(i)){case 2:var h=W1;break;case 8:h=J1;break;default:h=gm}a=h.bind(null,i,a,t),h=void 0,!Ps||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(h=!0),l?h!==void 0?t.addEventListener(i,a,{capture:!0,passive:h}):t.addEventListener(i,a,!0):h!==void 0?t.addEventListener(i,a,{passive:h}):t.addEventListener(i,a,!1)}function tm(t,i,a,l,h){var d=l;if((i&1)===0&&(i&2)===0&&l!==null)e:for(;;){if(l===null)return;var v=l.tag;if(v===3||v===4){var S=l.stateNode.containerInfo;if(S===h)break;if(v===4)for(v=l.return;v!==null;){var M=v.tag;if((M===3||M===4)&&v.stateNode.containerInfo===h)return;v=v.return}for(;S!==null;){if(v=xi(S),v===null)return;if(M=v.tag,M===5||M===6||M===26||M===27){l=d=v;continue e}S=S.parentNode}}l=l.return}kr(function(){var G=d,te=$n(a),re=[];e:{var Q=qp.get(t);if(Q!==void 0){var X=ki,ye=t;switch(t){case"keypress":if(js(a)===0)break e;case"keydown":case"keyup":X=tc;break;case"focusin":ye="focus",X=zs;break;case"focusout":ye="blur",X=zs;break;case"beforeblur":case"afterblur":X=zs;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":X=nl;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":X=$u;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":X=y;break;case jp:case Up:case zp:X=Yu;break;case Bp:X=C;break;case"scroll":case"scrollend":X=tl;break;case"wheel":X=K;break;case"copy":case"cut":case"paste":X=Ku;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":X=nr;break;case"toggle":case"beforetoggle":X=Me}var Re=(i&4)!==0,at=!Re&&(t==="scroll"||t==="scrollend"),U=Re?Q!==null?Q+"Capture":null:Q;Re=[];for(var L=G,F;L!==null;){var ie=L;if(F=ie.stateNode,ie=ie.tag,ie!==5&&ie!==26&&ie!==27||F===null||U===null||(ie=ui(L,U),ie!=null&&Re.push(Ol(L,ie,F))),at)break;L=L.return}0<Re.length&&(Q=new X(Q,ye,null,a,te),re.push({event:Q,listeners:Re}))}}if((i&7)===0){e:{if(Q=t==="mouseover"||t==="pointerover",X=t==="mouseout"||t==="pointerout",Q&&a!==Jo&&(ye=a.relatedTarget||a.fromElement)&&(xi(ye)||ye[Ri]))break e;if((X||Q)&&(Q=te.window===te?te:(Q=te.ownerDocument)?Q.defaultView||Q.parentWindow:window,X?(ye=a.relatedTarget||a.toElement,X=G,ye=ye?xi(ye):null,ye!==null&&(at=u(ye),Re=ye.tag,ye!==at||Re!==5&&Re!==27&&Re!==6)&&(ye=null)):(X=null,ye=G),X!==ye)){if(Re=nl,ie="onMouseLeave",U="onMouseEnter",L="mouse",(t==="pointerout"||t==="pointerover")&&(Re=nr,ie="onPointerLeave",U="onPointerEnter",L="pointer"),at=X==null?Q:Dn(X),F=ye==null?Q:Dn(ye),Q=new Re(ie,L+"leave",X,a,te),Q.target=at,Q.relatedTarget=F,ie=null,xi(te)===G&&(Re=new Re(U,L+"enter",ye,a,te),Re.target=F,Re.relatedTarget=at,ie=Re),at=ie,X&&ye)t:{for(Re=A1,U=X,L=ye,F=0,ie=U;ie;ie=Re(ie))F++;ie=0;for(var be=L;be;be=Re(be))ie++;for(;0<F-ie;)U=Re(U),F--;for(;0<ie-F;)L=Re(L),ie--;for(;F--;){if(U===L||L!==null&&U===L.alternate){Re=U;break t}U=Re(U),L=Re(L)}Re=null}else Re=null;X!==null&&c_(re,Q,X,Re,!1),ye!==null&&at!==null&&c_(re,at,ye,Re,!0)}}e:{if(Q=G?Dn(G):window,X=Q.nodeName&&Q.nodeName.toLowerCase(),X==="select"||X==="input"&&Q.type==="file")var Ke=Cp;else if(wp(Q))if(xp)Ke=kS;else{Ke=MS;var ve=OS}else X=Q.nodeName,!X||X.toLowerCase()!=="input"||Q.type!=="checkbox"&&Q.type!=="radio"?G&&Sa(G.elementType)&&(Ke=Cp):Ke=VS;if(Ke&&(Ke=Ke(t,G))){Rp(re,Ke,a,te);break e}ve&&ve(t,Q,G),t==="focusout"&&G&&Q.type==="number"&&G.memoizedProps.value!=null&&Ko(Q,"number",Q.value)}switch(ve=G?Dn(G):window,t){case"focusin":(wp(ve)||ve.contentEditable==="true")&&(Na=ve,Df=G,ol=null);break;case"focusout":ol=Df=Na=null;break;case"mousedown":Nf=!0;break;case"contextmenu":case"mouseup":case"dragend":Nf=!1,Pp(re,a,te);break;case"selectionchange":if(LS)break;case"keydown":case"keyup":Pp(re,a,te)}var ke;if(Je)e:{switch(t){case"compositionstart":var ze="onCompositionStart";break e;case"compositionend":ze="onCompositionEnd";break e;case"compositionupdate":ze="onCompositionUpdate";break e}ze=void 0}else Da?Bs(t,a)&&(ze="onCompositionEnd"):t==="keydown"&&a.keyCode===229&&(ze="onCompositionStart");ze&&(ji&&a.locale!=="ko"&&(Da||ze!=="onCompositionStart"?ze==="onCompositionEnd"&&Da&&(ke=el()):(Vi=te,Zo="value"in Vi?Vi.value:Vi.textContent,Da=!0)),ve=Gc(G,ze),0<ve.length&&(ze=new Li(ze,t,null,a,te),re.push({event:ze,listeners:ve}),ke?ze.data=ke:(ke=Ia(a),ke!==null&&(ze.data=ke)))),(ke=Yn?xS(t,a):IS(t,a))&&(ze=Gc(G,"onBeforeInput"),0<ze.length&&(ve=new Li("onBeforeInput","beforeinput",null,a,te),re.push({event:ve,listeners:ze}),ve.data=ke)),E1(re,t,G,a,te)}l_(re,i)})}function Ol(t,i,a){return{instance:t,listener:i,currentTarget:a}}function Gc(t,i){for(var a=i+"Capture",l=[];t!==null;){var h=t,d=h.stateNode;if(h=h.tag,h!==5&&h!==26&&h!==27||d===null||(h=ui(t,a),h!=null&&l.unshift(Ol(t,h,d)),h=ui(t,i),h!=null&&l.push(Ol(t,h,d))),t.tag===3)return l;t=t.return}return[]}function A1(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function c_(t,i,a,l,h){for(var d=i._reactName,v=[];a!==null&&a!==l;){var S=a,M=S.alternate,G=S.stateNode;if(S=S.tag,M!==null&&M===l)break;S!==5&&S!==26&&S!==27||G===null||(M=G,h?(G=ui(a,d),G!=null&&v.unshift(Ol(a,G,M))):h||(G=ui(a,d),G!=null&&v.push(Ol(a,G,M)))),a=a.return}v.length!==0&&t.push({event:i,listeners:v})}var w1=/\r\n?/g,R1=/\u0000|\uFFFD/g;function h_(t){return(typeof t=="string"?t:""+t).replace(w1,`
`).replace(R1,"")}function f_(t,i){return i=h_(i),h_(t)===i}function st(t,i,a,l,h,d){switch(a){case"children":typeof l=="string"?i==="body"||i==="textarea"&&l===""||Tn(t,l):(typeof l=="number"||typeof l=="bigint")&&i!=="body"&&Tn(t,""+l);break;case"className":Nn(t,"class",l);break;case"tabIndex":Nn(t,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":Nn(t,a,l);break;case"style":Wo(t,l,d);break;case"data":if(i!=="object"){Nn(t,"data",l);break}case"src":case"href":if(l===""&&(i!=="a"||a!=="href")){t.removeAttribute(a);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(a);break}l=Aa(""+l),t.setAttribute(a,l);break;case"action":case"formAction":if(typeof l=="function"){t.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof d=="function"&&(a==="formAction"?(i!=="input"&&st(t,i,"name",h.name,h,null),st(t,i,"formEncType",h.formEncType,h,null),st(t,i,"formMethod",h.formMethod,h,null),st(t,i,"formTarget",h.formTarget,h,null)):(st(t,i,"encType",h.encType,h,null),st(t,i,"method",h.method,h,null),st(t,i,"target",h.target,h,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(a);break}l=Aa(""+l),t.setAttribute(a,l);break;case"onClick":l!=null&&(t.onclick=li);break;case"onScroll":l!=null&&je("scroll",t);break;case"onScrollEnd":l!=null&&je("scrollend",t);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(s(61));if(a=l.__html,a!=null){if(h.children!=null)throw Error(s(60));t.innerHTML=a}}break;case"multiple":t.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":t.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){t.removeAttribute("xlink:href");break}a=Aa(""+l),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,""+l):t.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,""):t.removeAttribute(a);break;case"capture":case"download":l===!0?t.setAttribute(a,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,l):t.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?t.setAttribute(a,l):t.removeAttribute(a);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?t.removeAttribute(a):t.setAttribute(a,l);break;case"popover":je("beforetoggle",t),je("toggle",t),Ta(t,"popover",l);break;case"xlinkActuate":Dt(t,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":Dt(t,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":Dt(t,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":Dt(t,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":Dt(t,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":Dt(t,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":Dt(t,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":Dt(t,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":Dt(t,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":Ta(t,"is",l);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=Gu.get(a)||a,Ta(t,a,l))}}function nm(t,i,a,l,h,d){switch(a){case"style":Wo(t,l,d);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(s(61));if(a=l.__html,a!=null){if(h.children!=null)throw Error(s(60));t.innerHTML=a}}break;case"children":typeof l=="string"?Tn(t,l):(typeof l=="number"||typeof l=="bigint")&&Tn(t,""+l);break;case"onScroll":l!=null&&je("scroll",t);break;case"onScrollEnd":l!=null&&je("scrollend",t);break;case"onClick":l!=null&&(t.onclick=li);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Fo.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(h=a.endsWith("Capture"),i=a.slice(2,h?a.length-7:void 0),d=t[Ft]||null,d=d!=null?d[a]:null,typeof d=="function"&&t.removeEventListener(i,d,h),typeof l=="function")){typeof d!="function"&&d!==null&&(a in t?t[a]=null:t.hasAttribute(a)&&t.removeAttribute(a)),t.addEventListener(i,l,h);break e}a in t?t[a]=l:l===!0?t.setAttribute(a,""):Ta(t,a,l)}}}function tn(t,i,a){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":je("error",t),je("load",t);var l=!1,h=!1,d;for(d in a)if(a.hasOwnProperty(d)){var v=a[d];if(v!=null)switch(d){case"src":l=!0;break;case"srcSet":h=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,i));default:st(t,i,d,v,a,null)}}h&&st(t,i,"srcSet",a.srcSet,a,null),l&&st(t,i,"src",a.src,a,null);return;case"input":je("invalid",t);var S=d=v=h=null,M=null,G=null;for(l in a)if(a.hasOwnProperty(l)){var te=a[l];if(te!=null)switch(l){case"name":h=te;break;case"type":v=te;break;case"checked":M=te;break;case"defaultChecked":G=te;break;case"value":d=te;break;case"defaultValue":S=te;break;case"children":case"dangerouslySetInnerHTML":if(te!=null)throw Error(s(137,i));break;default:st(t,i,l,te,a,null)}}qu(t,d,S,M,G,v,h,!1);return;case"select":je("invalid",t),l=v=d=null;for(h in a)if(a.hasOwnProperty(h)&&(S=a[h],S!=null))switch(h){case"value":d=S;break;case"defaultValue":v=S;break;case"multiple":l=S;default:st(t,i,h,S,a,null)}i=d,a=v,t.multiple=!!l,i!=null?Nr(t,!!l,i,!1):a!=null&&Nr(t,!!l,a,!0);return;case"textarea":je("invalid",t),d=h=l=null;for(v in a)if(a.hasOwnProperty(v)&&(S=a[v],S!=null))switch(v){case"value":l=S;break;case"defaultValue":h=S;break;case"children":d=S;break;case"dangerouslySetInnerHTML":if(S!=null)throw Error(s(91));break;default:st(t,i,v,S,a,null)}Or(t,l,h,d);return;case"option":for(M in a)a.hasOwnProperty(M)&&(l=a[M],l!=null)&&(M==="selected"?t.selected=l&&typeof l!="function"&&typeof l!="symbol":st(t,i,M,l,a,null));return;case"dialog":je("beforetoggle",t),je("toggle",t),je("cancel",t),je("close",t);break;case"iframe":case"object":je("load",t);break;case"video":case"audio":for(l=0;l<Nl.length;l++)je(Nl[l],t);break;case"image":je("error",t),je("load",t);break;case"details":je("toggle",t);break;case"embed":case"source":case"link":je("error",t),je("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(G in a)if(a.hasOwnProperty(G)&&(l=a[G],l!=null))switch(G){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,i));default:st(t,i,G,l,a,null)}return;default:if(Sa(i)){for(te in a)a.hasOwnProperty(te)&&(l=a[te],l!==void 0&&nm(t,i,te,l,a,void 0));return}}for(S in a)a.hasOwnProperty(S)&&(l=a[S],l!=null&&st(t,i,S,l,a,null))}function C1(t,i,a,l){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var h=null,d=null,v=null,S=null,M=null,G=null,te=null;for(X in a){var re=a[X];if(a.hasOwnProperty(X)&&re!=null)switch(X){case"checked":break;case"value":break;case"defaultValue":M=re;default:l.hasOwnProperty(X)||st(t,i,X,null,l,re)}}for(var Q in l){var X=l[Q];if(re=a[Q],l.hasOwnProperty(Q)&&(X!=null||re!=null))switch(Q){case"type":d=X;break;case"name":h=X;break;case"checked":G=X;break;case"defaultChecked":te=X;break;case"value":v=X;break;case"defaultValue":S=X;break;case"children":case"dangerouslySetInnerHTML":if(X!=null)throw Error(s(137,i));break;default:X!==re&&st(t,i,Q,X,l,re)}}ba(t,v,S,M,G,te,d,h);return;case"select":X=v=S=Q=null;for(d in a)if(M=a[d],a.hasOwnProperty(d)&&M!=null)switch(d){case"value":break;case"multiple":X=M;default:l.hasOwnProperty(d)||st(t,i,d,null,l,M)}for(h in l)if(d=l[h],M=a[h],l.hasOwnProperty(h)&&(d!=null||M!=null))switch(h){case"value":Q=d;break;case"defaultValue":S=d;break;case"multiple":v=d;default:d!==M&&st(t,i,h,d,l,M)}i=S,a=v,l=X,Q!=null?Nr(t,!!a,Q,!1):!!l!=!!a&&(i!=null?Nr(t,!!a,i,!0):Nr(t,!!a,a?[]:"",!1));return;case"textarea":X=Q=null;for(S in a)if(h=a[S],a.hasOwnProperty(S)&&h!=null&&!l.hasOwnProperty(S))switch(S){case"value":break;case"children":break;default:st(t,i,S,null,l,h)}for(v in l)if(h=l[v],d=a[v],l.hasOwnProperty(v)&&(h!=null||d!=null))switch(v){case"value":Q=h;break;case"defaultValue":X=h;break;case"children":break;case"dangerouslySetInnerHTML":if(h!=null)throw Error(s(91));break;default:h!==d&&st(t,i,v,h,l,d)}Hu(t,Q,X);return;case"option":for(var ye in a)Q=a[ye],a.hasOwnProperty(ye)&&Q!=null&&!l.hasOwnProperty(ye)&&(ye==="selected"?t.selected=!1:st(t,i,ye,null,l,Q));for(M in l)Q=l[M],X=a[M],l.hasOwnProperty(M)&&Q!==X&&(Q!=null||X!=null)&&(M==="selected"?t.selected=Q&&typeof Q!="function"&&typeof Q!="symbol":st(t,i,M,Q,l,X));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Re in a)Q=a[Re],a.hasOwnProperty(Re)&&Q!=null&&!l.hasOwnProperty(Re)&&st(t,i,Re,null,l,Q);for(G in l)if(Q=l[G],X=a[G],l.hasOwnProperty(G)&&Q!==X&&(Q!=null||X!=null))switch(G){case"children":case"dangerouslySetInnerHTML":if(Q!=null)throw Error(s(137,i));break;default:st(t,i,G,Q,l,X)}return;default:if(Sa(i)){for(var at in a)Q=a[at],a.hasOwnProperty(at)&&Q!==void 0&&!l.hasOwnProperty(at)&&nm(t,i,at,void 0,l,Q);for(te in l)Q=l[te],X=a[te],!l.hasOwnProperty(te)||Q===X||Q===void 0&&X===void 0||nm(t,i,te,Q,l,X);return}}for(var U in a)Q=a[U],a.hasOwnProperty(U)&&Q!=null&&!l.hasOwnProperty(U)&&st(t,i,U,null,l,Q);for(re in l)Q=l[re],X=a[re],!l.hasOwnProperty(re)||Q===X||Q==null&&X==null||st(t,i,re,Q,l,X)}function d_(t){switch(t){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function x1(){if(typeof performance.getEntriesByType=="function"){for(var t=0,i=0,a=performance.getEntriesByType("resource"),l=0;l<a.length;l++){var h=a[l],d=h.transferSize,v=h.initiatorType,S=h.duration;if(d&&S&&d_(v)){for(v=0,S=h.responseEnd,l+=1;l<a.length;l++){var M=a[l],G=M.startTime;if(G>S)break;var te=M.transferSize,re=M.initiatorType;te&&d_(re)&&(M=M.responseEnd,v+=te*(M<S?1:(S-G)/(M-G)))}if(--l,i+=8*(d+v)/(h.duration/1e3),t++,10<t)break}}if(0<t)return i/t/1e6}return navigator.connection&&(t=navigator.connection.downlink,typeof t=="number")?t:5}var im=null,rm=null;function $c(t){return t.nodeType===9?t:t.ownerDocument}function m_(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function g_(t,i){if(t===0)switch(i){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&i==="foreignObject"?0:t}function sm(t,i){return t==="textarea"||t==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.children=="bigint"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var am=null;function I1(){var t=window.event;return t&&t.type==="popstate"?t===am?!1:(am=t,!0):(am=null,!1)}var p_=typeof setTimeout=="function"?setTimeout:void 0,D1=typeof clearTimeout=="function"?clearTimeout:void 0,y_=typeof Promise=="function"?Promise:void 0,N1=typeof queueMicrotask=="function"?queueMicrotask:typeof y_<"u"?function(t){return y_.resolve(null).then(t).catch(O1)}:p_;function O1(t){setTimeout(function(){throw t})}function ts(t){return t==="head"}function v_(t,i){var a=i,l=0;do{var h=a.nextSibling;if(t.removeChild(a),h&&h.nodeType===8)if(a=h.data,a==="/$"||a==="/&"){if(l===0){t.removeChild(h),ro(i);return}l--}else if(a==="$"||a==="$?"||a==="$~"||a==="$!"||a==="&")l++;else if(a==="html")Ml(t.ownerDocument.documentElement);else if(a==="head"){a=t.ownerDocument.head,Ml(a);for(var d=a.firstChild;d;){var v=d.nextSibling,S=d.nodeName;d[Ci]||S==="SCRIPT"||S==="STYLE"||S==="LINK"&&d.rel.toLowerCase()==="stylesheet"||a.removeChild(d),d=v}}else a==="body"&&Ml(t.ownerDocument.body);a=h}while(a);ro(i)}function __(t,i){var a=t;t=0;do{var l=a.nextSibling;if(a.nodeType===1?i?(a._stashedDisplay=a.style.display,a.style.display="none"):(a.style.display=a._stashedDisplay||"",a.getAttribute("style")===""&&a.removeAttribute("style")):a.nodeType===3&&(i?(a._stashedText=a.nodeValue,a.nodeValue=""):a.nodeValue=a._stashedText||""),l&&l.nodeType===8)if(a=l.data,a==="/$"){if(t===0)break;t--}else a!=="$"&&a!=="$?"&&a!=="$~"&&a!=="$!"||t++;a=l}while(a)}function om(t){var i=t.firstChild;for(i&&i.nodeType===10&&(i=i.nextSibling);i;){var a=i;switch(i=i.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":om(a),Ea(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}t.removeChild(a)}}function M1(t,i,a,l){for(;t.nodeType===1;){var h=a;if(t.nodeName.toLowerCase()!==i.toLowerCase()){if(!l&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(l){if(!t[Ci])switch(i){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(d=t.getAttribute("rel"),d==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(d!==h.rel||t.getAttribute("href")!==(h.href==null||h.href===""?null:h.href)||t.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin)||t.getAttribute("title")!==(h.title==null?null:h.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(d=t.getAttribute("src"),(d!==(h.src==null?null:h.src)||t.getAttribute("type")!==(h.type==null?null:h.type)||t.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin))&&d&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(i==="input"&&t.type==="hidden"){var d=h.name==null?null:""+h.name;if(h.type==="hidden"&&t.getAttribute("name")===d)return t}else return t;if(t=ti(t.nextSibling),t===null)break}return null}function V1(t,i,a){if(i==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!a||(t=ti(t.nextSibling),t===null))return null;return t}function E_(t,i){for(;t.nodeType!==8;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!i||(t=ti(t.nextSibling),t===null))return null;return t}function lm(t){return t.data==="$?"||t.data==="$~"}function um(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState!=="loading"}function k1(t,i){var a=t.ownerDocument;if(t.data==="$~")t._reactRetry=i;else if(t.data!=="$?"||a.readyState!=="loading")i();else{var l=function(){i(),a.removeEventListener("DOMContentLoaded",l)};a.addEventListener("DOMContentLoaded",l),t._reactRetry=l}}function ti(t){for(;t!=null;t=t.nextSibling){var i=t.nodeType;if(i===1||i===3)break;if(i===8){if(i=t.data,i==="$"||i==="$!"||i==="$?"||i==="$~"||i==="&"||i==="F!"||i==="F")break;if(i==="/$"||i==="/&")return null}}return t}var cm=null;function T_(t){t=t.nextSibling;for(var i=0;t;){if(t.nodeType===8){var a=t.data;if(a==="/$"||a==="/&"){if(i===0)return ti(t.nextSibling);i--}else a!=="$"&&a!=="$!"&&a!=="$?"&&a!=="$~"&&a!=="&"||i++}t=t.nextSibling}return null}function b_(t){t=t.previousSibling;for(var i=0;t;){if(t.nodeType===8){var a=t.data;if(a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"){if(i===0)return t;i--}else a!=="/$"&&a!=="/&"||i++}t=t.previousSibling}return null}function S_(t,i,a){switch(i=$c(a),t){case"html":if(t=i.documentElement,!t)throw Error(s(452));return t;case"head":if(t=i.head,!t)throw Error(s(453));return t;case"body":if(t=i.body,!t)throw Error(s(454));return t;default:throw Error(s(451))}}function Ml(t){for(var i=t.attributes;i.length;)t.removeAttributeNode(i[0]);Ea(t)}var ni=new Map,A_=new Set;function Qc(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var yr=oe.d;oe.d={f:P1,r:L1,D:j1,C:U1,L:z1,m:B1,X:H1,S:q1,M:F1};function P1(){var t=yr.f(),i=jc();return t||i}function L1(t){var i=Gn(t);i!==null&&i.tag===5&&i.type==="form"?By(i):yr.r(t)}var to=typeof document>"u"?null:document;function w_(t,i,a){var l=to;if(l&&typeof i=="string"&&i){var h=En(i);h='link[rel="'+t+'"][href="'+h+'"]',typeof a=="string"&&(h+='[crossorigin="'+a+'"]'),A_.has(h)||(A_.add(h),t={rel:t,crossOrigin:a,href:i},l.querySelector(h)===null&&(i=l.createElement("link"),tn(i,"link",t),It(i),l.head.appendChild(i)))}}function j1(t){yr.D(t),w_("dns-prefetch",t,null)}function U1(t,i){yr.C(t,i),w_("preconnect",t,i)}function z1(t,i,a){yr.L(t,i,a);var l=to;if(l&&t&&i){var h='link[rel="preload"][as="'+En(i)+'"]';i==="image"&&a&&a.imageSrcSet?(h+='[imagesrcset="'+En(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(h+='[imagesizes="'+En(a.imageSizes)+'"]')):h+='[href="'+En(t)+'"]';var d=h;switch(i){case"style":d=no(t);break;case"script":d=io(t)}ni.has(d)||(t=T({rel:"preload",href:i==="image"&&a&&a.imageSrcSet?void 0:t,as:i},a),ni.set(d,t),l.querySelector(h)!==null||i==="style"&&l.querySelector(Vl(d))||i==="script"&&l.querySelector(kl(d))||(i=l.createElement("link"),tn(i,"link",t),It(i),l.head.appendChild(i)))}}function B1(t,i){yr.m(t,i);var a=to;if(a&&t){var l=i&&typeof i.as=="string"?i.as:"script",h='link[rel="modulepreload"][as="'+En(l)+'"][href="'+En(t)+'"]',d=h;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":d=io(t)}if(!ni.has(d)&&(t=T({rel:"modulepreload",href:t},i),ni.set(d,t),a.querySelector(h)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(kl(d)))return}l=a.createElement("link"),tn(l,"link",t),It(l),a.head.appendChild(l)}}}function q1(t,i,a){yr.S(t,i,a);var l=to;if(l&&t){var h=Ii(l).hoistableStyles,d=no(t);i=i||"default";var v=h.get(d);if(!v){var S={loading:0,preload:null};if(v=l.querySelector(Vl(d)))S.loading=5;else{t=T({rel:"stylesheet",href:t,"data-precedence":i},a),(a=ni.get(d))&&hm(t,a);var M=v=l.createElement("link");It(M),tn(M,"link",t),M._p=new Promise(function(G,te){M.onload=G,M.onerror=te}),M.addEventListener("load",function(){S.loading|=1}),M.addEventListener("error",function(){S.loading|=2}),S.loading|=4,Yc(v,i,l)}v={type:"stylesheet",instance:v,count:1,state:S},h.set(d,v)}}}function H1(t,i){yr.X(t,i);var a=to;if(a&&t){var l=Ii(a).hoistableScripts,h=io(t),d=l.get(h);d||(d=a.querySelector(kl(h)),d||(t=T({src:t,async:!0},i),(i=ni.get(h))&&fm(t,i),d=a.createElement("script"),It(d),tn(d,"link",t),a.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},l.set(h,d))}}function F1(t,i){yr.M(t,i);var a=to;if(a&&t){var l=Ii(a).hoistableScripts,h=io(t),d=l.get(h);d||(d=a.querySelector(kl(h)),d||(t=T({src:t,async:!0,type:"module"},i),(i=ni.get(h))&&fm(t,i),d=a.createElement("script"),It(d),tn(d,"link",t),a.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},l.set(h,d))}}function R_(t,i,a,l){var h=(h=Se.current)?Qc(h):null;if(!h)throw Error(s(446));switch(t){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(i=no(a.href),a=Ii(h).hoistableStyles,l=a.get(i),l||(l={type:"style",instance:null,count:0,state:null},a.set(i,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){t=no(a.href);var d=Ii(h).hoistableStyles,v=d.get(t);if(v||(h=h.ownerDocument||h,v={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},d.set(t,v),(d=h.querySelector(Vl(t)))&&!d._p&&(v.instance=d,v.state.loading=5),ni.has(t)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},ni.set(t,a),d||G1(h,t,a,v.state))),i&&l===null)throw Error(s(528,""));return v}if(i&&l!==null)throw Error(s(529,""));return null;case"script":return i=a.async,a=a.src,typeof a=="string"&&i&&typeof i!="function"&&typeof i!="symbol"?(i=io(a),a=Ii(h).hoistableScripts,l=a.get(i),l||(l={type:"script",instance:null,count:0,state:null},a.set(i,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,t))}}function no(t){return'href="'+En(t)+'"'}function Vl(t){return'link[rel="stylesheet"]['+t+"]"}function C_(t){return T({},t,{"data-precedence":t.precedence,precedence:null})}function G1(t,i,a,l){t.querySelector('link[rel="preload"][as="style"]['+i+"]")?l.loading=1:(i=t.createElement("link"),l.preload=i,i.addEventListener("load",function(){return l.loading|=1}),i.addEventListener("error",function(){return l.loading|=2}),tn(i,"link",a),It(i),t.head.appendChild(i))}function io(t){return'[src="'+En(t)+'"]'}function kl(t){return"script[async]"+t}function x_(t,i,a){if(i.count++,i.instance===null)switch(i.type){case"style":var l=t.querySelector('style[data-href~="'+En(a.href)+'"]');if(l)return i.instance=l,It(l),l;var h=T({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return l=(t.ownerDocument||t).createElement("style"),It(l),tn(l,"style",h),Yc(l,a.precedence,t),i.instance=l;case"stylesheet":h=no(a.href);var d=t.querySelector(Vl(h));if(d)return i.state.loading|=4,i.instance=d,It(d),d;l=C_(a),(h=ni.get(h))&&hm(l,h),d=(t.ownerDocument||t).createElement("link"),It(d);var v=d;return v._p=new Promise(function(S,M){v.onload=S,v.onerror=M}),tn(d,"link",l),i.state.loading|=4,Yc(d,a.precedence,t),i.instance=d;case"script":return d=io(a.src),(h=t.querySelector(kl(d)))?(i.instance=h,It(h),h):(l=a,(h=ni.get(d))&&(l=T({},a),fm(l,h)),t=t.ownerDocument||t,h=t.createElement("script"),It(h),tn(h,"link",l),t.head.appendChild(h),i.instance=h);case"void":return null;default:throw Error(s(443,i.type))}else i.type==="stylesheet"&&(i.state.loading&4)===0&&(l=i.instance,i.state.loading|=4,Yc(l,a.precedence,t));return i.instance}function Yc(t,i,a){for(var l=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),h=l.length?l[l.length-1]:null,d=h,v=0;v<l.length;v++){var S=l[v];if(S.dataset.precedence===i)d=S;else if(d!==h)break}d?d.parentNode.insertBefore(t,d.nextSibling):(i=a.nodeType===9?a.head:a,i.insertBefore(t,i.firstChild))}function hm(t,i){t.crossOrigin==null&&(t.crossOrigin=i.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=i.referrerPolicy),t.title==null&&(t.title=i.title)}function fm(t,i){t.crossOrigin==null&&(t.crossOrigin=i.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=i.referrerPolicy),t.integrity==null&&(t.integrity=i.integrity)}var Kc=null;function I_(t,i,a){if(Kc===null){var l=new Map,h=Kc=new Map;h.set(a,l)}else h=Kc,l=h.get(a),l||(l=new Map,h.set(a,l));if(l.has(t))return l;for(l.set(t,null),a=a.getElementsByTagName(t),h=0;h<a.length;h++){var d=a[h];if(!(d[Ci]||d[xt]||t==="link"&&d.getAttribute("rel")==="stylesheet")&&d.namespaceURI!=="http://www.w3.org/2000/svg"){var v=d.getAttribute(i)||"";v=t+v;var S=l.get(v);S?S.push(d):l.set(v,[d])}}return l}function D_(t,i,a){t=t.ownerDocument||t,t.head.insertBefore(a,i==="title"?t.querySelector("head > title"):null)}function $1(t,i,a){if(a===1||i.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof i.precedence!="string"||typeof i.href!="string"||i.href==="")break;return!0;case"link":if(typeof i.rel!="string"||typeof i.href!="string"||i.href===""||i.onLoad||i.onError)break;return i.rel==="stylesheet"?(t=i.disabled,typeof i.precedence=="string"&&t==null):!0;case"script":if(i.async&&typeof i.async!="function"&&typeof i.async!="symbol"&&!i.onLoad&&!i.onError&&i.src&&typeof i.src=="string")return!0}return!1}function N_(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}function Q1(t,i,a,l){if(a.type==="stylesheet"&&(typeof l.media!="string"||matchMedia(l.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var h=no(l.href),d=i.querySelector(Vl(h));if(d){i=d._p,i!==null&&typeof i=="object"&&typeof i.then=="function"&&(t.count++,t=Xc.bind(t),i.then(t,t)),a.state.loading|=4,a.instance=d,It(d);return}d=i.ownerDocument||i,l=C_(l),(h=ni.get(h))&&hm(l,h),d=d.createElement("link"),It(d);var v=d;v._p=new Promise(function(S,M){v.onload=S,v.onerror=M}),tn(d,"link",l),a.instance=d}t.stylesheets===null&&(t.stylesheets=new Map),t.stylesheets.set(a,i),(i=a.state.preload)&&(a.state.loading&3)===0&&(t.count++,a=Xc.bind(t),i.addEventListener("load",a),i.addEventListener("error",a))}}var dm=0;function Y1(t,i){return t.stylesheets&&t.count===0&&Jc(t,t.stylesheets),0<t.count||0<t.imgCount?function(a){var l=setTimeout(function(){if(t.stylesheets&&Jc(t,t.stylesheets),t.unsuspend){var d=t.unsuspend;t.unsuspend=null,d()}},6e4+i);0<t.imgBytes&&dm===0&&(dm=62500*x1());var h=setTimeout(function(){if(t.waitingForImages=!1,t.count===0&&(t.stylesheets&&Jc(t,t.stylesheets),t.unsuspend)){var d=t.unsuspend;t.unsuspend=null,d()}},(t.imgBytes>dm?50:800)+i);return t.unsuspend=a,function(){t.unsuspend=null,clearTimeout(l),clearTimeout(h)}}:null}function Xc(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Jc(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var Wc=null;function Jc(t,i){t.stylesheets=null,t.unsuspend!==null&&(t.count++,Wc=new Map,i.forEach(K1,t),Wc=null,Xc.call(t))}function K1(t,i){if(!(i.state.loading&4)){var a=Wc.get(t);if(a)var l=a.get(null);else{a=new Map,Wc.set(t,a);for(var h=t.querySelectorAll("link[data-precedence],style[data-precedence]"),d=0;d<h.length;d++){var v=h[d];(v.nodeName==="LINK"||v.getAttribute("media")!=="not all")&&(a.set(v.dataset.precedence,v),l=v)}l&&a.set(null,l)}h=i.instance,v=h.getAttribute("data-precedence"),d=a.get(v)||l,d===l&&a.set(null,h),a.set(v,h),this.count++,l=Xc.bind(this),h.addEventListener("load",l),h.addEventListener("error",l),d?d.parentNode.insertBefore(h,d.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(h,t.firstChild)),i.state.loading|=4}}var Pl={$$typeof:q,Provider:null,Consumer:null,_currentValue:W,_currentValue2:W,_threadCount:0};function X1(t,i,a,l,h,d,v,S,M){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=wi(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=wi(0),this.hiddenUpdates=wi(null),this.identifierPrefix=l,this.onUncaughtError=h,this.onCaughtError=d,this.onRecoverableError=v,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=M,this.incompleteTransitions=new Map}function O_(t,i,a,l,h,d,v,S,M,G,te,re){return t=new X1(t,i,a,v,M,G,te,re,S),i=1,d===!0&&(i|=24),d=Mn(3,null,null,i),t.current=d,d.stateNode=t,i=$f(),i.refCount++,t.pooledCache=i,i.refCount++,d.memoizedState={element:l,isDehydrated:a,cache:i},Xf(d),t}function M_(t){return t?(t=Va,t):Va}function V_(t,i,a,l,h,d){h=M_(h),l.context===null?l.context=h:l.pendingContext=h,l=Fr(i),l.payload={element:a},d=d===void 0?null:d,d!==null&&(l.callback=d),a=Gr(t,l,i),a!==null&&(Rn(a,t,i),ml(a,t,i))}function k_(t,i){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var a=t.retryLane;t.retryLane=a!==0&&a<i?a:i}}function mm(t,i){k_(t,i),(t=t.alternate)&&k_(t,i)}function P_(t){if(t.tag===13||t.tag===31){var i=Fs(t,67108864);i!==null&&Rn(i,t,67108864),mm(t,67108864)}}function L_(t){if(t.tag===13||t.tag===31){var i=jn();i=Os(i);var a=Fs(t,i);a!==null&&Rn(a,t,i),mm(t,i)}}var Zc=!0;function W1(t,i,a,l){var h=z.T;z.T=null;var d=oe.p;try{oe.p=2,gm(t,i,a,l)}finally{oe.p=d,z.T=h}}function J1(t,i,a,l){var h=z.T;z.T=null;var d=oe.p;try{oe.p=8,gm(t,i,a,l)}finally{oe.p=d,z.T=h}}function gm(t,i,a,l){if(Zc){var h=pm(l);if(h===null)tm(t,i,l,eh,a),U_(t,l);else if(eA(h,t,i,a,l))l.stopPropagation();else if(U_(t,l),i&4&&-1<Z1.indexOf(t)){for(;h!==null;){var d=Gn(h);if(d!==null)switch(d.tag){case 3:if(d=d.stateNode,d.current.memoizedState.isDehydrated){var v=Si(d.pendingLanes);if(v!==0){var S=d;for(S.pendingLanes|=2,S.entangledLanes|=2;v;){var M=1<<31-Tt(v);S.entanglements[1]|=M,v&=~M}qi(d),(Ze&6)===0&&(Pc=mn()+500,Dl(0))}}break;case 31:case 13:S=Fs(d,2),S!==null&&Rn(S,d,2),jc(),mm(d,2)}if(d=pm(l),d===null&&tm(t,i,l,eh,a),d===h)break;h=d}h!==null&&l.stopPropagation()}else tm(t,i,l,null,a)}}function pm(t){return t=$n(t),ym(t)}var eh=null;function ym(t){if(eh=null,t=xi(t),t!==null){var i=u(t);if(i===null)t=null;else{var a=i.tag;if(a===13){if(t=f(i),t!==null)return t;t=null}else if(a===31){if(t=m(i),t!==null)return t;t=null}else if(a===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;t=null}else i!==t&&(t=null)}}return eh=t,null}function j_(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(xs()){case Uo:return 2;case zo:return 8;case Ir:case Sf:return 32;case Ou:return 268435456;default:return 32}default:return 32}}var vm=!1,ns=null,is=null,rs=null,Ll=new Map,jl=new Map,ss=[],Z1="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function U_(t,i){switch(t){case"focusin":case"focusout":ns=null;break;case"dragenter":case"dragleave":is=null;break;case"mouseover":case"mouseout":rs=null;break;case"pointerover":case"pointerout":Ll.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":jl.delete(i.pointerId)}}function Ul(t,i,a,l,h,d){return t===null||t.nativeEvent!==d?(t={blockedOn:i,domEventName:a,eventSystemFlags:l,nativeEvent:d,targetContainers:[h]},i!==null&&(i=Gn(i),i!==null&&P_(i)),t):(t.eventSystemFlags|=l,i=t.targetContainers,h!==null&&i.indexOf(h)===-1&&i.push(h),t)}function eA(t,i,a,l,h){switch(i){case"focusin":return ns=Ul(ns,t,i,a,l,h),!0;case"dragenter":return is=Ul(is,t,i,a,l,h),!0;case"mouseover":return rs=Ul(rs,t,i,a,l,h),!0;case"pointerover":var d=h.pointerId;return Ll.set(d,Ul(Ll.get(d)||null,t,i,a,l,h)),!0;case"gotpointercapture":return d=h.pointerId,jl.set(d,Ul(jl.get(d)||null,t,i,a,l,h)),!0}return!1}function z_(t){var i=xi(t.target);if(i!==null){var a=u(i);if(a!==null){if(i=a.tag,i===13){if(i=f(a),i!==null){t.blockedOn=i,ai(t.priority,function(){L_(a)});return}}else if(i===31){if(i=m(a),i!==null){t.blockedOn=i,ai(t.priority,function(){L_(a)});return}}else if(i===3&&a.stateNode.current.memoizedState.isDehydrated){t.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}t.blockedOn=null}function th(t){if(t.blockedOn!==null)return!1;for(var i=t.targetContainers;0<i.length;){var a=pm(t.nativeEvent);if(a===null){a=t.nativeEvent;var l=new a.constructor(a.type,a);Jo=l,a.target.dispatchEvent(l),Jo=null}else return i=Gn(a),i!==null&&P_(i),t.blockedOn=a,!1;i.shift()}return!0}function B_(t,i,a){th(t)&&a.delete(i)}function tA(){vm=!1,ns!==null&&th(ns)&&(ns=null),is!==null&&th(is)&&(is=null),rs!==null&&th(rs)&&(rs=null),Ll.forEach(B_),jl.forEach(B_)}function nh(t,i){t.blockedOn===i&&(t.blockedOn=null,vm||(vm=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,tA)))}var ih=null;function q_(t){ih!==t&&(ih=t,r.unstable_scheduleCallback(r.unstable_NormalPriority,function(){ih===t&&(ih=null);for(var i=0;i<t.length;i+=3){var a=t[i],l=t[i+1],h=t[i+2];if(typeof l!="function"){if(ym(l||a)===null)continue;break}var d=Gn(a);d!==null&&(t.splice(i,3),i-=3,pd(d,{pending:!0,data:h,method:a.method,action:l},l,h))}}))}function ro(t){function i(M){return nh(M,t)}ns!==null&&nh(ns,t),is!==null&&nh(is,t),rs!==null&&nh(rs,t),Ll.forEach(i),jl.forEach(i);for(var a=0;a<ss.length;a++){var l=ss[a];l.blockedOn===t&&(l.blockedOn=null)}for(;0<ss.length&&(a=ss[0],a.blockedOn===null);)z_(a),a.blockedOn===null&&ss.shift();if(a=(t.ownerDocument||t).$$reactFormReplay,a!=null)for(l=0;l<a.length;l+=3){var h=a[l],d=a[l+1],v=h[Ft]||null;if(typeof d=="function")v||q_(a);else if(v){var S=null;if(d&&d.hasAttribute("formAction")){if(h=d,v=d[Ft]||null)S=v.formAction;else if(ym(h)!==null)continue}else S=v.action;typeof S=="function"?a[l+1]=S:(a.splice(l,3),l-=3),q_(a)}}}function H_(){function t(d){d.canIntercept&&d.info==="react-transition"&&d.intercept({handler:function(){return new Promise(function(v){return h=v})},focusReset:"manual",scroll:"manual"})}function i(){h!==null&&(h(),h=null),l||setTimeout(a,20)}function a(){if(!l&&!navigation.transition){var d=navigation.currentEntry;d&&d.url!=null&&navigation.navigate(d.url,{state:d.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var l=!1,h=null;return navigation.addEventListener("navigate",t),navigation.addEventListener("navigatesuccess",i),navigation.addEventListener("navigateerror",i),setTimeout(a,100),function(){l=!0,navigation.removeEventListener("navigate",t),navigation.removeEventListener("navigatesuccess",i),navigation.removeEventListener("navigateerror",i),h!==null&&(h(),h=null)}}}function _m(t){this._internalRoot=t}rh.prototype.render=_m.prototype.render=function(t){var i=this._internalRoot;if(i===null)throw Error(s(409));var a=i.current,l=jn();V_(a,l,t,i,null,null)},rh.prototype.unmount=_m.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var i=t.containerInfo;V_(t.current,2,null,t,null,null),jc(),i[Ri]=null}};function rh(t){this._internalRoot=t}rh.prototype.unstable_scheduleHydration=function(t){if(t){var i=ju();t={blockedOn:null,target:t,priority:i};for(var a=0;a<ss.length&&i!==0&&i<ss[a].priority;a++);ss.splice(a,0,t),a===0&&z_(t)}};var F_=e.version;if(F_!=="19.2.3")throw Error(s(527,F_,"19.2.3"));oe.findDOMNode=function(t){var i=t._reactInternals;if(i===void 0)throw typeof t.render=="function"?Error(s(188)):(t=Object.keys(t).join(","),Error(s(268,t)));return t=p(i),t=t!==null?E(t):null,t=t===null?null:t.stateNode,t};var nA={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:z,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var sh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!sh.isDisabled&&sh.supportsFiber)try{ri=sh.inject(nA),Xt=sh}catch{}}return Bl.createRoot=function(t,i){if(!o(t))throw Error(s(299));var a=!1,l="",h=Wy,d=Jy,v=Zy;return i!=null&&(i.unstable_strictMode===!0&&(a=!0),i.identifierPrefix!==void 0&&(l=i.identifierPrefix),i.onUncaughtError!==void 0&&(h=i.onUncaughtError),i.onCaughtError!==void 0&&(d=i.onCaughtError),i.onRecoverableError!==void 0&&(v=i.onRecoverableError)),i=O_(t,1,!1,null,null,a,l,null,h,d,v,H_),t[Ri]=i.current,em(t),new _m(i)},Bl.hydrateRoot=function(t,i,a){if(!o(t))throw Error(s(299));var l=!1,h="",d=Wy,v=Jy,S=Zy,M=null;return a!=null&&(a.unstable_strictMode===!0&&(l=!0),a.identifierPrefix!==void 0&&(h=a.identifierPrefix),a.onUncaughtError!==void 0&&(d=a.onUncaughtError),a.onCaughtError!==void 0&&(v=a.onCaughtError),a.onRecoverableError!==void 0&&(S=a.onRecoverableError),a.formState!==void 0&&(M=a.formState)),i=O_(t,1,!0,i,a??null,l,h,M,d,v,S,H_),i.context=M_(null),a=i.current,l=jn(),l=Os(l),h=Fr(l),h.callback=null,Gr(a,h,l),a=l,i.current.lanes=a,Ds(i,a),qi(i),t[Ri]=i.current,em(t),new rh(i)},Bl.version="19.2.3",Bl}var e0;function dA(){if(e0)return bm.exports;e0=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),bm.exports=fA(),bm.exports}var mA=dA();var t0="popstate";function gA(r={}){function e(s,o){let{pathname:u,search:f,hash:m}=s.location;return Fm("",{pathname:u,search:f,hash:m},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function n(s,o){return typeof o=="string"?o:eu(o)}return yA(e,n,null,r)}function gt(r,e){if(r===!1||r===null||typeof r>"u")throw new Error(e)}function ii(r,e){if(!r){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function pA(){return Math.random().toString(36).substring(2,10)}function n0(r,e){return{usr:r.state,key:r.key,idx:e}}function Fm(r,e,n=null,s){return{pathname:typeof r=="string"?r:r.pathname,search:"",hash:"",...typeof e=="string"?Ro(e):e,state:n,key:e&&e.key||s||pA()}}function eu({pathname:r="/",search:e="",hash:n=""}){return e&&e!=="?"&&(r+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(r+=n.charAt(0)==="#"?n:"#"+n),r}function Ro(r){let e={};if(r){let n=r.indexOf("#");n>=0&&(e.hash=r.substring(n),r=r.substring(0,n));let s=r.indexOf("?");s>=0&&(e.search=r.substring(s),r=r.substring(0,s)),r&&(e.pathname=r)}return e}function yA(r,e,n,s={}){let{window:o=document.defaultView,v5Compat:u=!1}=s,f=o.history,m="POP",g=null,p=E();p==null&&(p=0,f.replaceState({...f.state,idx:p},""));function E(){return(f.state||{idx:null}).idx}function T(){m="POP";let B=E(),Z=B==null?null:B-p;p=B,g&&g({action:m,location:$.location,delta:Z})}function I(B,Z){m="PUSH";let J=Fm($.location,B,Z);p=E()+1;let q=n0(J,p),ge=$.createHref(J);try{f.pushState(q,"",ge)}catch(_e){if(_e instanceof DOMException&&_e.name==="DataCloneError")throw _e;o.location.assign(ge)}u&&g&&g({action:m,location:$.location,delta:1})}function P(B,Z){m="REPLACE";let J=Fm($.location,B,Z);p=E();let q=n0(J,p),ge=$.createHref(J);f.replaceState(q,"",ge),u&&g&&g({action:m,location:$.location,delta:0})}function j(B){return vA(B)}let $={get action(){return m},get location(){return r(o,f)},listen(B){if(g)throw new Error("A history only accepts one active listener");return o.addEventListener(t0,T),g=B,()=>{o.removeEventListener(t0,T),g=null}},createHref(B){return e(o,B)},createURL:j,encodeLocation(B){let Z=j(B);return{pathname:Z.pathname,search:Z.search,hash:Z.hash}},push:I,replace:P,go(B){return f.go(B)}};return $}function vA(r,e=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),gt(n,"No window.location.(origin|href) available to create URL");let s=typeof r=="string"?r:eu(r);return s=s.replace(/ $/,"%20"),!e&&s.startsWith("//")&&(s=n+s),new URL(s,n)}function PE(r,e,n="/"){return _A(r,e,n,!1)}function _A(r,e,n,s){let o=typeof e=="string"?Ro(e):e,u=br(o.pathname||"/",n);if(u==null)return null;let f=LE(r);EA(f);let m=null;for(let g=0;m==null&&g<f.length;++g){let p=NA(u);m=IA(f[g],p,s)}return m}function LE(r,e=[],n=[],s="",o=!1){let u=(f,m,g=o,p)=>{let E={relativePath:p===void 0?f.path||"":p,caseSensitive:f.caseSensitive===!0,childrenIndex:m,route:f};if(E.relativePath.startsWith("/")){if(!E.relativePath.startsWith(s)&&g)return;gt(E.relativePath.startsWith(s),`Absolute route path "${E.relativePath}" nested under path "${s}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),E.relativePath=E.relativePath.slice(s.length)}let T=Tr([s,E.relativePath]),I=n.concat(E);f.children&&f.children.length>0&&(gt(f.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${T}".`),LE(f.children,e,I,T,g)),!(f.path==null&&!f.index)&&e.push({path:T,score:CA(T,f.index),routesMeta:I})};return r.forEach((f,m)=>{if(f.path===""||!f.path?.includes("?"))u(f,m);else for(let g of jE(f.path))u(f,m,!0,g)}),e}function jE(r){let e=r.split("/");if(e.length===0)return[];let[n,...s]=e,o=n.endsWith("?"),u=n.replace(/\?$/,"");if(s.length===0)return o?[u,""]:[u];let f=jE(s.join("/")),m=[];return m.push(...f.map(g=>g===""?u:[u,g].join("/"))),o&&m.push(...f),m.map(g=>r.startsWith("/")&&g===""?"/":g)}function EA(r){r.sort((e,n)=>e.score!==n.score?n.score-e.score:xA(e.routesMeta.map(s=>s.childrenIndex),n.routesMeta.map(s=>s.childrenIndex)))}var TA=/^:[\w-]+$/,bA=3,SA=2,AA=1,wA=10,RA=-2,i0=r=>r==="*";function CA(r,e){let n=r.split("/"),s=n.length;return n.some(i0)&&(s+=RA),e&&(s+=SA),n.filter(o=>!i0(o)).reduce((o,u)=>o+(TA.test(u)?bA:u===""?AA:wA),s)}function xA(r,e){return r.length===e.length&&r.slice(0,-1).every((s,o)=>s===e[o])?r[r.length-1]-e[e.length-1]:0}function IA(r,e,n=!1){let{routesMeta:s}=r,o={},u="/",f=[];for(let m=0;m<s.length;++m){let g=s[m],p=m===s.length-1,E=u==="/"?e:e.slice(u.length)||"/",T=Ch({path:g.relativePath,caseSensitive:g.caseSensitive,end:p},E),I=g.route;if(!T&&p&&n&&!s[s.length-1].route.index&&(T=Ch({path:g.relativePath,caseSensitive:g.caseSensitive,end:!1},E)),!T)return null;Object.assign(o,T.params),f.push({params:o,pathname:Tr([u,T.pathname]),pathnameBase:kA(Tr([u,T.pathnameBase])),route:I}),T.pathnameBase!=="/"&&(u=Tr([u,T.pathnameBase]))}return f}function Ch(r,e){typeof r=="string"&&(r={path:r,caseSensitive:!1,end:!0});let[n,s]=DA(r.path,r.caseSensitive,r.end),o=e.match(n);if(!o)return null;let u=o[0],f=u.replace(/(.)\/+$/,"$1"),m=o.slice(1);return{params:s.reduce((p,{paramName:E,isOptional:T},I)=>{if(E==="*"){let j=m[I]||"";f=u.slice(0,u.length-j.length).replace(/(.)\/+$/,"$1")}const P=m[I];return T&&!P?p[E]=void 0:p[E]=(P||"").replace(/%2F/g,"/"),p},{}),pathname:u,pathnameBase:f,pattern:r}}function DA(r,e=!1,n=!0){ii(r==="*"||!r.endsWith("*")||r.endsWith("/*"),`Route path "${r}" will be treated as if it were "${r.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${r.replace(/\*$/,"/*")}".`);let s=[],o="^"+r.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(f,m,g)=>(s.push({paramName:m,isOptional:g!=null}),g?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return r.endsWith("*")?(s.push({paramName:"*"}),o+=r==="*"||r==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?o+="\\/*$":r!==""&&r!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,e?void 0:"i"),s]}function NA(r){try{return r.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return ii(!1,`The URL path "${r}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),r}}function br(r,e){if(e==="/")return r;if(!r.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,s=r.charAt(n);return s&&s!=="/"?null:r.slice(n)||"/"}var UE=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,OA=r=>UE.test(r);function MA(r,e="/"){let{pathname:n,search:s="",hash:o=""}=typeof r=="string"?Ro(r):r,u;if(n)if(OA(n))u=n;else{if(n.includes("//")){let f=n;n=n.replace(/\/\/+/g,"/"),ii(!1,`Pathnames cannot have embedded double slashes - normalizing ${f} -> ${n}`)}n.startsWith("/")?u=r0(n.substring(1),"/"):u=r0(n,e)}else u=e;return{pathname:u,search:PA(s),hash:LA(o)}}function r0(r,e){let n=e.replace(/\/+$/,"").split("/");return r.split("/").forEach(o=>{o===".."?n.length>1&&n.pop():o!=="."&&n.push(o)}),n.length>1?n.join("/"):"/"}function Rm(r,e,n,s){return`Cannot include a '${r}' character in a manually specified \`to.${e}\` field [${JSON.stringify(s)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function VA(r){return r.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function _g(r){let e=VA(r);return e.map((n,s)=>s===e.length-1?n.pathname:n.pathnameBase)}function Eg(r,e,n,s=!1){let o;typeof r=="string"?o=Ro(r):(o={...r},gt(!o.pathname||!o.pathname.includes("?"),Rm("?","pathname","search",o)),gt(!o.pathname||!o.pathname.includes("#"),Rm("#","pathname","hash",o)),gt(!o.search||!o.search.includes("#"),Rm("#","search","hash",o)));let u=r===""||o.pathname==="",f=u?"/":o.pathname,m;if(f==null)m=n;else{let T=e.length-1;if(!s&&f.startsWith("..")){let I=f.split("/");for(;I[0]==="..";)I.shift(),T-=1;o.pathname=I.join("/")}m=T>=0?e[T]:"/"}let g=MA(o,m),p=f&&f!=="/"&&f.endsWith("/"),E=(u||f===".")&&n.endsWith("/");return!g.pathname.endsWith("/")&&(p||E)&&(g.pathname+="/"),g}var Tr=r=>r.join("/").replace(/\/\/+/g,"/"),kA=r=>r.replace(/\/+$/,"").replace(/^\/*/,"/"),PA=r=>!r||r==="?"?"":r.startsWith("?")?r:"?"+r,LA=r=>!r||r==="#"?"":r.startsWith("#")?r:"#"+r,jA=class{constructor(r,e,n,s=!1){this.status=r,this.statusText=e||"",this.internal=s,n instanceof Error?(this.data=n.toString(),this.error=n):this.data=n}};function UA(r){return r!=null&&typeof r.status=="number"&&typeof r.statusText=="string"&&typeof r.internal=="boolean"&&"data"in r}function zA(r){return r.map(e=>e.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var zE=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function BE(r,e){let n=r;if(typeof n!="string"||!UE.test(n))return{absoluteURL:void 0,isExternal:!1,to:n};let s=n,o=!1;if(zE)try{let u=new URL(window.location.href),f=n.startsWith("//")?new URL(u.protocol+n):new URL(n),m=br(f.pathname,e);f.origin===u.origin&&m!=null?n=m+f.search+f.hash:o=!0}catch{ii(!1,`<Link to="${n}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:s,isExternal:o,to:n}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var qE=["POST","PUT","PATCH","DELETE"];new Set(qE);var BA=["GET",...qE];new Set(BA);var Co=V.createContext(null);Co.displayName="DataRouter";var Kh=V.createContext(null);Kh.displayName="DataRouterState";var qA=V.createContext(!1),HE=V.createContext({isTransitioning:!1});HE.displayName="ViewTransition";var HA=V.createContext(new Map);HA.displayName="Fetchers";var FA=V.createContext(null);FA.displayName="Await";var Hn=V.createContext(null);Hn.displayName="Navigation";var hu=V.createContext(null);hu.displayName="Location";var Ti=V.createContext({outlet:null,matches:[],isDataRoute:!1});Ti.displayName="Route";var Tg=V.createContext(null);Tg.displayName="RouteError";var FE="REACT_ROUTER_ERROR",GA="REDIRECT",$A="ROUTE_ERROR_RESPONSE";function QA(r){if(r.startsWith(`${FE}:${GA}:{`))try{let e=JSON.parse(r.slice(28));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.location=="string"&&typeof e.reloadDocument=="boolean"&&typeof e.replace=="boolean")return e}catch{}}function YA(r){if(r.startsWith(`${FE}:${$A}:{`))try{let e=JSON.parse(r.slice(40));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string")return new jA(e.status,e.statusText,e.data)}catch{}}function KA(r,{relative:e}={}){gt(xo(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:s}=V.useContext(Hn),{hash:o,pathname:u,search:f}=fu(r,{relative:e}),m=u;return n!=="/"&&(m=u==="/"?n:Tr([n,u])),s.createHref({pathname:m,search:f,hash:o})}function xo(){return V.useContext(hu)!=null}function ws(){return gt(xo(),"useLocation() may be used only in the context of a <Router> component."),V.useContext(hu).location}var GE="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function $E(r){V.useContext(Hn).static||V.useLayoutEffect(r)}function Io(){let{isDataRoute:r}=V.useContext(Ti);return r?uw():XA()}function XA(){gt(xo(),"useNavigate() may be used only in the context of a <Router> component.");let r=V.useContext(Co),{basename:e,navigator:n}=V.useContext(Hn),{matches:s}=V.useContext(Ti),{pathname:o}=ws(),u=JSON.stringify(_g(s)),f=V.useRef(!1);return $E(()=>{f.current=!0}),V.useCallback((g,p={})=>{if(ii(f.current,GE),!f.current)return;if(typeof g=="number"){n.go(g);return}let E=Eg(g,JSON.parse(u),o,p.relative==="path");r==null&&e!=="/"&&(E.pathname=E.pathname==="/"?e:Tr([e,E.pathname])),(p.replace?n.replace:n.push)(E,p.state,p)},[e,n,u,o,r])}V.createContext(null);function WA(){let{matches:r}=V.useContext(Ti),e=r[r.length-1];return e?e.params:{}}function fu(r,{relative:e}={}){let{matches:n}=V.useContext(Ti),{pathname:s}=ws(),o=JSON.stringify(_g(n));return V.useMemo(()=>Eg(r,JSON.parse(o),s,e==="path"),[r,o,s,e])}function JA(r,e){return QE(r,e)}function QE(r,e,n,s,o){gt(xo(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:u}=V.useContext(Hn),{matches:f}=V.useContext(Ti),m=f[f.length-1],g=m?m.params:{},p=m?m.pathname:"/",E=m?m.pathnameBase:"/",T=m&&m.route;{let J=T&&T.path||"";KE(p,!T||J.endsWith("*")||J.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${p}" (under <Route path="${J}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${J}"> to <Route path="${J==="/"?"*":`${J}/*`}">.`)}let I=ws(),P;if(e){let J=typeof e=="string"?Ro(e):e;gt(E==="/"||J.pathname?.startsWith(E),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${E}" but pathname "${J.pathname}" was given in the \`location\` prop.`),P=J}else P=I;let j=P.pathname||"/",$=j;if(E!=="/"){let J=E.replace(/^\//,"").split("/");$="/"+j.replace(/^\//,"").split("/").slice(J.length).join("/")}let B=PE(r,{pathname:$});ii(T||B!=null,`No routes matched location "${P.pathname}${P.search}${P.hash}" `),ii(B==null||B[B.length-1].route.element!==void 0||B[B.length-1].route.Component!==void 0||B[B.length-1].route.lazy!==void 0,`Matched leaf route at location "${P.pathname}${P.search}${P.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let Z=iw(B&&B.map(J=>Object.assign({},J,{params:Object.assign({},g,J.params),pathname:Tr([E,u.encodeLocation?u.encodeLocation(J.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:J.pathname]),pathnameBase:J.pathnameBase==="/"?E:Tr([E,u.encodeLocation?u.encodeLocation(J.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:J.pathnameBase])})),f,n,s,o);return e&&Z?V.createElement(hu.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...P},navigationType:"POP"}},Z):Z}function ZA(){let r=lw(),e=UA(r)?`${r.status} ${r.statusText}`:r instanceof Error?r.message:JSON.stringify(r),n=r instanceof Error?r.stack:null,s="rgba(200,200,200, 0.5)",o={padding:"0.5rem",backgroundColor:s},u={padding:"2px 4px",backgroundColor:s},f=null;return console.error("Error handled by React Router default ErrorBoundary:",r),f=V.createElement(V.Fragment,null,V.createElement("p",null," Hey developer "),V.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",V.createElement("code",{style:u},"ErrorBoundary")," or"," ",V.createElement("code",{style:u},"errorElement")," prop on your route.")),V.createElement(V.Fragment,null,V.createElement("h2",null,"Unexpected Application Error!"),V.createElement("h3",{style:{fontStyle:"italic"}},e),n?V.createElement("pre",{style:o},n):null,f)}var ew=V.createElement(ZA,null),YE=class extends V.Component{constructor(r){super(r),this.state={location:r.location,revalidation:r.revalidation,error:r.error}}static getDerivedStateFromError(r){return{error:r}}static getDerivedStateFromProps(r,e){return e.location!==r.location||e.revalidation!=="idle"&&r.revalidation==="idle"?{error:r.error,location:r.location,revalidation:r.revalidation}:{error:r.error!==void 0?r.error:e.error,location:e.location,revalidation:r.revalidation||e.revalidation}}componentDidCatch(r,e){this.props.onError?this.props.onError(r,e):console.error("React Router caught the following error during render",r)}render(){let r=this.state.error;if(this.context&&typeof r=="object"&&r&&"digest"in r&&typeof r.digest=="string"){const n=YA(r.digest);n&&(r=n)}let e=r!==void 0?V.createElement(Ti.Provider,{value:this.props.routeContext},V.createElement(Tg.Provider,{value:r,children:this.props.component})):this.props.children;return this.context?V.createElement(tw,{error:r},e):e}};YE.contextType=qA;var Cm=new WeakMap;function tw({children:r,error:e}){let{basename:n}=V.useContext(Hn);if(typeof e=="object"&&e&&"digest"in e&&typeof e.digest=="string"){let s=QA(e.digest);if(s){let o=Cm.get(e);if(o)throw o;let u=BE(s.location,n);if(zE&&!Cm.get(e))if(u.isExternal||s.reloadDocument)window.location.href=u.absoluteURL||u.to;else{const f=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(u.to,{replace:s.replace}));throw Cm.set(e,f),f}return V.createElement("meta",{httpEquiv:"refresh",content:`0;url=${u.absoluteURL||u.to}`})}}return r}function nw({routeContext:r,match:e,children:n}){let s=V.useContext(Co);return s&&s.static&&s.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=e.route.id),V.createElement(Ti.Provider,{value:r},n)}function iw(r,e=[],n=null,s=null,o=null){if(r==null){if(!n)return null;if(n.errors)r=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)r=n.matches;else return null}let u=r,f=n?.errors;if(f!=null){let E=u.findIndex(T=>T.route.id&&f?.[T.route.id]!==void 0);gt(E>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(f).join(",")}`),u=u.slice(0,Math.min(u.length,E+1))}let m=!1,g=-1;if(n)for(let E=0;E<u.length;E++){let T=u[E];if((T.route.HydrateFallback||T.route.hydrateFallbackElement)&&(g=E),T.route.id){let{loaderData:I,errors:P}=n,j=T.route.loader&&!I.hasOwnProperty(T.route.id)&&(!P||P[T.route.id]===void 0);if(T.route.lazy||j){m=!0,g>=0?u=u.slice(0,g+1):u=[u[0]];break}}}let p=n&&s?(E,T)=>{s(E,{location:n.location,params:n.matches?.[0]?.params??{},unstable_pattern:zA(n.matches),errorInfo:T})}:void 0;return u.reduceRight((E,T,I)=>{let P,j=!1,$=null,B=null;n&&(P=f&&T.route.id?f[T.route.id]:void 0,$=T.route.errorElement||ew,m&&(g<0&&I===0?(KE("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),j=!0,B=null):g===I&&(j=!0,B=T.route.hydrateFallbackElement||null)));let Z=e.concat(u.slice(0,I+1)),J=()=>{let q;return P?q=$:j?q=B:T.route.Component?q=V.createElement(T.route.Component,null):T.route.element?q=T.route.element:q=E,V.createElement(nw,{match:T,routeContext:{outlet:E,matches:Z,isDataRoute:n!=null},children:q})};return n&&(T.route.ErrorBoundary||T.route.errorElement||I===0)?V.createElement(YE,{location:n.location,revalidation:n.revalidation,component:$,error:P,children:J(),routeContext:{outlet:null,matches:Z,isDataRoute:!0},onError:p}):J()},null)}function bg(r){return`${r} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function rw(r){let e=V.useContext(Co);return gt(e,bg(r)),e}function sw(r){let e=V.useContext(Kh);return gt(e,bg(r)),e}function aw(r){let e=V.useContext(Ti);return gt(e,bg(r)),e}function Sg(r){let e=aw(r),n=e.matches[e.matches.length-1];return gt(n.route.id,`${r} can only be used on routes that contain a unique "id"`),n.route.id}function ow(){return Sg("useRouteId")}function lw(){let r=V.useContext(Tg),e=sw("useRouteError"),n=Sg("useRouteError");return r!==void 0?r:e.errors?.[n]}function uw(){let{router:r}=rw("useNavigate"),e=Sg("useNavigate"),n=V.useRef(!1);return $E(()=>{n.current=!0}),V.useCallback(async(o,u={})=>{ii(n.current,GE),n.current&&(typeof o=="number"?await r.navigate(o):await r.navigate(o,{fromRouteId:e,...u}))},[r,e])}var s0={};function KE(r,e,n){!e&&!s0[r]&&(s0[r]=!0,ii(!1,n))}V.memo(cw);function cw({routes:r,future:e,state:n,onError:s}){return QE(r,void 0,n,s,e)}function hw({to:r,replace:e,state:n,relative:s}){gt(xo(),"<Navigate> may be used only in the context of a <Router> component.");let{static:o}=V.useContext(Hn);ii(!o,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:u}=V.useContext(Ti),{pathname:f}=ws(),m=Io(),g=Eg(r,_g(u),f,s==="path"),p=JSON.stringify(g);return V.useEffect(()=>{m(JSON.parse(p),{replace:e,state:n,relative:s})},[m,p,s,e,n]),null}function so(r){gt(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function fw({basename:r="/",children:e=null,location:n,navigationType:s="POP",navigator:o,static:u=!1,unstable_useTransitions:f}){gt(!xo(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let m=r.replace(/^\/*/,"/"),g=V.useMemo(()=>({basename:m,navigator:o,static:u,unstable_useTransitions:f,future:{}}),[m,o,u,f]);typeof n=="string"&&(n=Ro(n));let{pathname:p="/",search:E="",hash:T="",state:I=null,key:P="default"}=n,j=V.useMemo(()=>{let $=br(p,m);return $==null?null:{location:{pathname:$,search:E,hash:T,state:I,key:P},navigationType:s}},[m,p,E,T,I,P,s]);return ii(j!=null,`<Router basename="${m}"> is not able to match the URL "${p}${E}${T}" because it does not start with the basename, so the <Router> won't render anything.`),j==null?null:V.createElement(Hn.Provider,{value:g},V.createElement(hu.Provider,{children:e,value:j}))}function dw({children:r,location:e}){return JA(Gm(r),e)}function Gm(r,e=[]){let n=[];return V.Children.forEach(r,(s,o)=>{if(!V.isValidElement(s))return;let u=[...e,o];if(s.type===V.Fragment){n.push.apply(n,Gm(s.props.children,u));return}gt(s.type===so,`[${typeof s.type=="string"?s.type:s.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),gt(!s.props.index||!s.props.children,"An index route cannot have child routes.");let f={id:s.props.id||u.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,middleware:s.props.middleware,loader:s.props.loader,action:s.props.action,hydrateFallbackElement:s.props.hydrateFallbackElement,HydrateFallback:s.props.HydrateFallback,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.hasErrorBoundary===!0||s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(f.children=Gm(s.props.children,u)),n.push(f)}),n}var mh="get",gh="application/x-www-form-urlencoded";function Xh(r){return typeof HTMLElement<"u"&&r instanceof HTMLElement}function mw(r){return Xh(r)&&r.tagName.toLowerCase()==="button"}function gw(r){return Xh(r)&&r.tagName.toLowerCase()==="form"}function pw(r){return Xh(r)&&r.tagName.toLowerCase()==="input"}function yw(r){return!!(r.metaKey||r.altKey||r.ctrlKey||r.shiftKey)}function vw(r,e){return r.button===0&&(!e||e==="_self")&&!yw(r)}var ah=null;function _w(){if(ah===null)try{new FormData(document.createElement("form"),0),ah=!1}catch{ah=!0}return ah}var Ew=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function xm(r){return r!=null&&!Ew.has(r)?(ii(!1,`"${r}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${gh}"`),null):r}function Tw(r,e){let n,s,o,u,f;if(gw(r)){let m=r.getAttribute("action");s=m?br(m,e):null,n=r.getAttribute("method")||mh,o=xm(r.getAttribute("enctype"))||gh,u=new FormData(r)}else if(mw(r)||pw(r)&&(r.type==="submit"||r.type==="image")){let m=r.form;if(m==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let g=r.getAttribute("formaction")||m.getAttribute("action");if(s=g?br(g,e):null,n=r.getAttribute("formmethod")||m.getAttribute("method")||mh,o=xm(r.getAttribute("formenctype"))||xm(m.getAttribute("enctype"))||gh,u=new FormData(m,r),!_w()){let{name:p,type:E,value:T}=r;if(E==="image"){let I=p?`${p}.`:"";u.append(`${I}x`,"0"),u.append(`${I}y`,"0")}else p&&u.append(p,T)}}else{if(Xh(r))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=mh,s=null,o=gh,f=r}return u&&o==="text/plain"&&(f=u,u=void 0),{action:s,method:n.toLowerCase(),encType:o,formData:u,body:f}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Ag(r,e){if(r===!1||r===null||typeof r>"u")throw new Error(e)}function bw(r,e,n){let s=typeof r=="string"?new URL(r,typeof window>"u"?"server://singlefetch/":window.location.origin):r;return s.pathname==="/"?s.pathname=`_root.${n}`:e&&br(s.pathname,e)==="/"?s.pathname=`${e.replace(/\/$/,"")}/_root.${n}`:s.pathname=`${s.pathname.replace(/\/$/,"")}.${n}`,s}async function Sw(r,e){if(r.id in e)return e[r.id];try{let n=await import(r.module);return e[r.id]=n,n}catch(n){return console.error(`Error loading route module \`${r.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function Aw(r){return r==null?!1:r.href==null?r.rel==="preload"&&typeof r.imageSrcSet=="string"&&typeof r.imageSizes=="string":typeof r.rel=="string"&&typeof r.href=="string"}async function ww(r,e,n){let s=await Promise.all(r.map(async o=>{let u=e.routes[o.route.id];if(u){let f=await Sw(u,n);return f.links?f.links():[]}return[]}));return Iw(s.flat(1).filter(Aw).filter(o=>o.rel==="stylesheet"||o.rel==="preload").map(o=>o.rel==="stylesheet"?{...o,rel:"prefetch",as:"style"}:{...o,rel:"prefetch"}))}function a0(r,e,n,s,o,u){let f=(g,p)=>n[p]?g.route.id!==n[p].route.id:!0,m=(g,p)=>n[p].pathname!==g.pathname||n[p].route.path?.endsWith("*")&&n[p].params["*"]!==g.params["*"];return u==="assets"?e.filter((g,p)=>f(g,p)||m(g,p)):u==="data"?e.filter((g,p)=>{let E=s.routes[g.route.id];if(!E||!E.hasLoader)return!1;if(f(g,p)||m(g,p))return!0;if(g.route.shouldRevalidate){let T=g.route.shouldRevalidate({currentUrl:new URL(o.pathname+o.search+o.hash,window.origin),currentParams:n[0]?.params||{},nextUrl:new URL(r,window.origin),nextParams:g.params,defaultShouldRevalidate:!0});if(typeof T=="boolean")return T}return!0}):[]}function Rw(r,e,{includeHydrateFallback:n}={}){return Cw(r.map(s=>{let o=e.routes[s.route.id];if(!o)return[];let u=[o.module];return o.clientActionModule&&(u=u.concat(o.clientActionModule)),o.clientLoaderModule&&(u=u.concat(o.clientLoaderModule)),n&&o.hydrateFallbackModule&&(u=u.concat(o.hydrateFallbackModule)),o.imports&&(u=u.concat(o.imports)),u}).flat(1))}function Cw(r){return[...new Set(r)]}function xw(r){let e={},n=Object.keys(r).sort();for(let s of n)e[s]=r[s];return e}function Iw(r,e){let n=new Set;return new Set(e),r.reduce((s,o)=>{let u=JSON.stringify(xw(o));return n.has(u)||(n.add(u),s.push({key:u,link:o})),s},[])}function XE(){let r=V.useContext(Co);return Ag(r,"You must render this element inside a <DataRouterContext.Provider> element"),r}function Dw(){let r=V.useContext(Kh);return Ag(r,"You must render this element inside a <DataRouterStateContext.Provider> element"),r}var wg=V.createContext(void 0);wg.displayName="FrameworkContext";function WE(){let r=V.useContext(wg);return Ag(r,"You must render this element inside a <HydratedRouter> element"),r}function Nw(r,e){let n=V.useContext(wg),[s,o]=V.useState(!1),[u,f]=V.useState(!1),{onFocus:m,onBlur:g,onMouseEnter:p,onMouseLeave:E,onTouchStart:T}=e,I=V.useRef(null);V.useEffect(()=>{if(r==="render"&&f(!0),r==="viewport"){let $=Z=>{Z.forEach(J=>{f(J.isIntersecting)})},B=new IntersectionObserver($,{threshold:.5});return I.current&&B.observe(I.current),()=>{B.disconnect()}}},[r]),V.useEffect(()=>{if(s){let $=setTimeout(()=>{f(!0)},100);return()=>{clearTimeout($)}}},[s]);let P=()=>{o(!0)},j=()=>{o(!1),f(!1)};return n?r!=="intent"?[u,I,{}]:[u,I,{onFocus:ql(m,P),onBlur:ql(g,j),onMouseEnter:ql(p,P),onMouseLeave:ql(E,j),onTouchStart:ql(T,P)}]:[!1,I,{}]}function ql(r,e){return n=>{r&&r(n),n.defaultPrevented||e(n)}}function Ow({page:r,...e}){let{router:n}=XE(),s=V.useMemo(()=>PE(n.routes,r,n.basename),[n.routes,r,n.basename]);return s?V.createElement(Vw,{page:r,matches:s,...e}):null}function Mw(r){let{manifest:e,routeModules:n}=WE(),[s,o]=V.useState([]);return V.useEffect(()=>{let u=!1;return ww(r,e,n).then(f=>{u||o(f)}),()=>{u=!0}},[r,e,n]),s}function Vw({page:r,matches:e,...n}){let s=ws(),{manifest:o,routeModules:u}=WE(),{basename:f}=XE(),{loaderData:m,matches:g}=Dw(),p=V.useMemo(()=>a0(r,e,g,o,s,"data"),[r,e,g,o,s]),E=V.useMemo(()=>a0(r,e,g,o,s,"assets"),[r,e,g,o,s]),T=V.useMemo(()=>{if(r===s.pathname+s.search+s.hash)return[];let j=new Set,$=!1;if(e.forEach(Z=>{let J=o.routes[Z.route.id];!J||!J.hasLoader||(!p.some(q=>q.route.id===Z.route.id)&&Z.route.id in m&&u[Z.route.id]?.shouldRevalidate||J.hasClientLoader?$=!0:j.add(Z.route.id))}),j.size===0)return[];let B=bw(r,f,"data");return $&&j.size>0&&B.searchParams.set("_routes",e.filter(Z=>j.has(Z.route.id)).map(Z=>Z.route.id).join(",")),[B.pathname+B.search]},[f,m,s,o,p,e,r,u]),I=V.useMemo(()=>Rw(E,o),[E,o]),P=Mw(E);return V.createElement(V.Fragment,null,T.map(j=>V.createElement("link",{key:j,rel:"prefetch",as:"fetch",href:j,...n})),I.map(j=>V.createElement("link",{key:j,rel:"modulepreload",href:j,...n})),P.map(({key:j,link:$})=>V.createElement("link",{key:j,nonce:n.nonce,...$})))}function kw(...r){return e=>{r.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var Pw=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{Pw&&(window.__reactRouterVersion="7.11.0")}catch{}function Lw({basename:r,children:e,unstable_useTransitions:n,window:s}){let o=V.useRef();o.current==null&&(o.current=gA({window:s,v5Compat:!0}));let u=o.current,[f,m]=V.useState({action:u.action,location:u.location}),g=V.useCallback(p=>{n===!1?m(p):V.startTransition(()=>m(p))},[n]);return V.useLayoutEffect(()=>u.listen(g),[u,g]),V.createElement(fw,{basename:r,children:e,location:f.location,navigationType:f.action,navigator:u,unstable_useTransitions:n})}var JE=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,ZE=V.forwardRef(function({onClick:e,discover:n="render",prefetch:s="none",relative:o,reloadDocument:u,replace:f,state:m,target:g,to:p,preventScrollReset:E,viewTransition:T,unstable_defaultShouldRevalidate:I,...P},j){let{basename:$,unstable_useTransitions:B}=V.useContext(Hn),Z=typeof p=="string"&&JE.test(p),J=BE(p,$);p=J.to;let q=KA(p,{relative:o}),[ge,_e,Ee]=Nw(s,P),O=Bw(p,{replace:f,state:m,target:g,preventScrollReset:E,relative:o,viewTransition:T,unstable_defaultShouldRevalidate:I,unstable_useTransitions:B});function x(D){e&&e(D),D.defaultPrevented||O(D)}let w=V.createElement("a",{...P,...Ee,href:J.absoluteURL||q,onClick:J.isExternal||u?e:x,ref:kw(j,_e),target:g,"data-discover":!Z&&n==="render"?"true":void 0});return ge&&!Z?V.createElement(V.Fragment,null,w,V.createElement(Ow,{page:q})):w});ZE.displayName="Link";var jw=V.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:s="",end:o=!1,style:u,to:f,viewTransition:m,children:g,...p},E){let T=fu(f,{relative:p.relative}),I=ws(),P=V.useContext(Kh),{navigator:j,basename:$}=V.useContext(Hn),B=P!=null&&$w(T)&&m===!0,Z=j.encodeLocation?j.encodeLocation(T).pathname:T.pathname,J=I.pathname,q=P&&P.navigation&&P.navigation.location?P.navigation.location.pathname:null;n||(J=J.toLowerCase(),q=q?q.toLowerCase():null,Z=Z.toLowerCase()),q&&$&&(q=br(q,$)||q);const ge=Z!=="/"&&Z.endsWith("/")?Z.length-1:Z.length;let _e=J===Z||!o&&J.startsWith(Z)&&J.charAt(ge)==="/",Ee=q!=null&&(q===Z||!o&&q.startsWith(Z)&&q.charAt(Z.length)==="/"),O={isActive:_e,isPending:Ee,isTransitioning:B},x=_e?e:void 0,w;typeof s=="function"?w=s(O):w=[s,_e?"active":null,Ee?"pending":null,B?"transitioning":null].filter(Boolean).join(" ");let D=typeof u=="function"?u(O):u;return V.createElement(ZE,{...p,"aria-current":x,className:w,ref:E,style:D,to:f,viewTransition:m},typeof g=="function"?g(O):g)});jw.displayName="NavLink";var Uw=V.forwardRef(({discover:r="render",fetcherKey:e,navigate:n,reloadDocument:s,replace:o,state:u,method:f=mh,action:m,onSubmit:g,relative:p,preventScrollReset:E,viewTransition:T,unstable_defaultShouldRevalidate:I,...P},j)=>{let{unstable_useTransitions:$}=V.useContext(Hn),B=Fw(),Z=Gw(m,{relative:p}),J=f.toLowerCase()==="get"?"get":"post",q=typeof m=="string"&&JE.test(m),ge=_e=>{if(g&&g(_e),_e.defaultPrevented)return;_e.preventDefault();let Ee=_e.nativeEvent.submitter,O=Ee?.getAttribute("formmethod")||f,x=()=>B(Ee||_e.currentTarget,{fetcherKey:e,method:O,navigate:n,replace:o,state:u,relative:p,preventScrollReset:E,viewTransition:T,unstable_defaultShouldRevalidate:I});$&&n!==!1?V.startTransition(()=>x()):x()};return V.createElement("form",{ref:j,method:J,action:Z,onSubmit:s?g:ge,...P,"data-discover":!q&&r==="render"?"true":void 0})});Uw.displayName="Form";function zw(r){return`${r} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function eT(r){let e=V.useContext(Co);return gt(e,zw(r)),e}function Bw(r,{target:e,replace:n,state:s,preventScrollReset:o,relative:u,viewTransition:f,unstable_defaultShouldRevalidate:m,unstable_useTransitions:g}={}){let p=Io(),E=ws(),T=fu(r,{relative:u});return V.useCallback(I=>{if(vw(I,e)){I.preventDefault();let P=n!==void 0?n:eu(E)===eu(T),j=()=>p(r,{replace:P,state:s,preventScrollReset:o,relative:u,viewTransition:f,unstable_defaultShouldRevalidate:m});g?V.startTransition(()=>j()):j()}},[E,p,T,n,s,e,r,o,u,f,m,g])}var qw=0,Hw=()=>`__${String(++qw)}__`;function Fw(){let{router:r}=eT("useSubmit"),{basename:e}=V.useContext(Hn),n=ow(),s=r.fetch,o=r.navigate;return V.useCallback(async(u,f={})=>{let{action:m,method:g,encType:p,formData:E,body:T}=Tw(u,e);if(f.navigate===!1){let I=f.fetcherKey||Hw();await s(I,n,f.action||m,{unstable_defaultShouldRevalidate:f.unstable_defaultShouldRevalidate,preventScrollReset:f.preventScrollReset,formData:E,body:T,formMethod:f.method||g,formEncType:f.encType||p,flushSync:f.flushSync})}else await o(f.action||m,{unstable_defaultShouldRevalidate:f.unstable_defaultShouldRevalidate,preventScrollReset:f.preventScrollReset,formData:E,body:T,formMethod:f.method||g,formEncType:f.encType||p,replace:f.replace,state:f.state,fromRouteId:n,flushSync:f.flushSync,viewTransition:f.viewTransition})},[s,o,e,n])}function Gw(r,{relative:e}={}){let{basename:n}=V.useContext(Hn),s=V.useContext(Ti);gt(s,"useFormAction must be used inside a RouteContext");let[o]=s.matches.slice(-1),u={...fu(r||".",{relative:e})},f=ws();if(r==null){u.search=f.search;let m=new URLSearchParams(u.search),g=m.getAll("index");if(g.some(E=>E==="")){m.delete("index"),g.filter(T=>T).forEach(T=>m.append("index",T));let E=m.toString();u.search=E?`?${E}`:""}}return(!r||r===".")&&o.route.index&&(u.search=u.search?u.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(u.pathname=u.pathname==="/"?n:Tr([n,u.pathname])),eu(u)}function $w(r,{relative:e}={}){let n=V.useContext(HE);gt(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:s}=eT("useViewTransitionState"),o=fu(r,{relative:e});if(!n.isTransitioning)return!1;let u=br(n.currentLocation.pathname,s)||n.currentLocation.pathname,f=br(n.nextLocation.pathname,s)||n.nextLocation.pathname;return Ch(o.pathname,f)!=null||Ch(o.pathname,u)!=null}const Qw=()=>{};var o0={};const tT=function(r){const e=[];let n=0;for(let s=0;s<r.length;s++){let o=r.charCodeAt(s);o<128?e[n++]=o:o<2048?(e[n++]=o>>6|192,e[n++]=o&63|128):(o&64512)===55296&&s+1<r.length&&(r.charCodeAt(s+1)&64512)===56320?(o=65536+((o&1023)<<10)+(r.charCodeAt(++s)&1023),e[n++]=o>>18|240,e[n++]=o>>12&63|128,e[n++]=o>>6&63|128,e[n++]=o&63|128):(e[n++]=o>>12|224,e[n++]=o>>6&63|128,e[n++]=o&63|128)}return e},Yw=function(r){const e=[];let n=0,s=0;for(;n<r.length;){const o=r[n++];if(o<128)e[s++]=String.fromCharCode(o);else if(o>191&&o<224){const u=r[n++];e[s++]=String.fromCharCode((o&31)<<6|u&63)}else if(o>239&&o<365){const u=r[n++],f=r[n++],m=r[n++],g=((o&7)<<18|(u&63)<<12|(f&63)<<6|m&63)-65536;e[s++]=String.fromCharCode(55296+(g>>10)),e[s++]=String.fromCharCode(56320+(g&1023))}else{const u=r[n++],f=r[n++];e[s++]=String.fromCharCode((o&15)<<12|(u&63)<<6|f&63)}}return e.join("")},nT={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(r,e){if(!Array.isArray(r))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let o=0;o<r.length;o+=3){const u=r[o],f=o+1<r.length,m=f?r[o+1]:0,g=o+2<r.length,p=g?r[o+2]:0,E=u>>2,T=(u&3)<<4|m>>4;let I=(m&15)<<2|p>>6,P=p&63;g||(P=64,f||(I=64)),s.push(n[E],n[T],n[I],n[P])}return s.join("")},encodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(r):this.encodeByteArray(tT(r),e)},decodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(r):Yw(this.decodeStringToByteArray(r,e))},decodeStringToByteArray(r,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let o=0;o<r.length;){const u=n[r.charAt(o++)],m=o<r.length?n[r.charAt(o)]:0;++o;const p=o<r.length?n[r.charAt(o)]:64;++o;const T=o<r.length?n[r.charAt(o)]:64;if(++o,u==null||m==null||p==null||T==null)throw new Kw;const I=u<<2|m>>4;if(s.push(I),p!==64){const P=m<<4&240|p>>2;if(s.push(P),T!==64){const j=p<<6&192|T;s.push(j)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let r=0;r<this.ENCODED_VALS.length;r++)this.byteToCharMap_[r]=this.ENCODED_VALS.charAt(r),this.charToByteMap_[this.byteToCharMap_[r]]=r,this.byteToCharMapWebSafe_[r]=this.ENCODED_VALS_WEBSAFE.charAt(r),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[r]]=r,r>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(r)]=r,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(r)]=r)}}};class Kw extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Xw=function(r){const e=tT(r);return nT.encodeByteArray(e,!0)},xh=function(r){return Xw(r).replace(/\./g,"")},iT=function(r){try{return nT.decodeString(r,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function Ww(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const Jw=()=>Ww().__FIREBASE_DEFAULTS__,Zw=()=>{if(typeof process>"u"||typeof o0>"u")return;const r=o0.__FIREBASE_DEFAULTS__;if(r)return JSON.parse(r)},eR=()=>{if(typeof document>"u")return;let r;try{r=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=r&&iT(r[1]);return e&&JSON.parse(e)},Wh=()=>{try{return Qw()||Jw()||Zw()||eR()}catch(r){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${r}`);return}},rT=r=>Wh()?.emulatorHosts?.[r],tR=r=>{const e=rT(r);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),s]:[e.substring(0,n),s]},sT=()=>Wh()?.config,aT=r=>Wh()?.[`_${r}`];class nR{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,s)=>{n?this.reject(n):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,s))}}}function Do(r){try{return(r.startsWith("http://")||r.startsWith("https://")?new URL(r).hostname:r).endsWith(".cloudworkstations.dev")}catch{return!1}}async function oT(r){return(await fetch(r,{credentials:"include"})).ok}function iR(r,e){if(r.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},s=e||"demo-project",o=r.iat||0,u=r.sub||r.user_id;if(!u)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const f={iss:`https://securetoken.google.com/${s}`,aud:s,iat:o,exp:o+3600,auth_time:o,sub:u,user_id:u,firebase:{sign_in_provider:"custom",identities:{}},...r};return[xh(JSON.stringify(n)),xh(JSON.stringify(f)),""].join(".")}const Ql={};function rR(){const r={prod:[],emulator:[]};for(const e of Object.keys(Ql))Ql[e]?r.emulator.push(e):r.prod.push(e);return r}function sR(r){let e=document.getElementById(r),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",r),n=!0),{created:n,element:e}}let l0=!1;function lT(r,e){if(typeof window>"u"||typeof document>"u"||!Do(window.location.host)||Ql[r]===e||Ql[r]||l0)return;Ql[r]=e;function n(I){return`__firebase__banner__${I}`}const s="__firebase__banner",u=rR().prod.length>0;function f(){const I=document.getElementById(s);I&&I.remove()}function m(I){I.style.display="flex",I.style.background="#7faaf0",I.style.position="fixed",I.style.bottom="5px",I.style.left="5px",I.style.padding=".5em",I.style.borderRadius="5px",I.style.alignItems="center"}function g(I,P){I.setAttribute("width","24"),I.setAttribute("id",P),I.setAttribute("height","24"),I.setAttribute("viewBox","0 0 24 24"),I.setAttribute("fill","none"),I.style.marginLeft="-6px"}function p(){const I=document.createElement("span");return I.style.cursor="pointer",I.style.marginLeft="16px",I.style.fontSize="24px",I.innerHTML=" &times;",I.onclick=()=>{l0=!0,f()},I}function E(I,P){I.setAttribute("id",P),I.innerText="Learn more",I.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",I.setAttribute("target","__blank"),I.style.paddingLeft="5px",I.style.textDecoration="underline"}function T(){const I=sR(s),P=n("text"),j=document.getElementById(P)||document.createElement("span"),$=n("learnmore"),B=document.getElementById($)||document.createElement("a"),Z=n("preprendIcon"),J=document.getElementById(Z)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(I.created){const q=I.element;m(q),E(B,$);const ge=p();g(J,Z),q.append(J,j,B,ge),document.body.appendChild(q)}u?(j.innerText="Preview backend disconnected.",J.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(J.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,j.innerText="Preview backend running in this workspace."),j.setAttribute("id",P)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",T):T()}function fn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function aR(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(fn())}function oR(){const r=Wh()?.forceEnvironment;if(r==="node")return!0;if(r==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function lR(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function uR(){const r=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof r=="object"&&r.id!==void 0}function cR(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function hR(){const r=fn();return r.indexOf("MSIE ")>=0||r.indexOf("Trident/")>=0}function fR(){return!oR()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function dR(){try{return typeof indexedDB=="object"}catch{return!1}}function mR(){return new Promise((r,e)=>{try{let n=!0;const s="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(s);o.onsuccess=()=>{o.result.close(),n||self.indexedDB.deleteDatabase(s),r(!0)},o.onupgradeneeded=()=>{n=!1},o.onerror=()=>{e(o.error?.message||"")}}catch(n){e(n)}})}const gR="FirebaseError";class Cr extends Error{constructor(e,n,s){super(n),this.code=e,this.customData=s,this.name=gR,Object.setPrototypeOf(this,Cr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,du.prototype.create)}}class du{constructor(e,n,s){this.service=e,this.serviceName=n,this.errors=s}create(e,...n){const s=n[0]||{},o=`${this.service}/${e}`,u=this.errors[e],f=u?pR(u,s):"Error",m=`${this.serviceName}: ${f} (${o}).`;return new Cr(o,m,s)}}function pR(r,e){return r.replace(yR,(n,s)=>{const o=e[s];return o!=null?String(o):`<${s}?>`})}const yR=/\{\$([^}]+)}/g;function vR(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}function ua(r,e){if(r===e)return!0;const n=Object.keys(r),s=Object.keys(e);for(const o of n){if(!s.includes(o))return!1;const u=r[o],f=e[o];if(u0(u)&&u0(f)){if(!ua(u,f))return!1}else if(u!==f)return!1}for(const o of s)if(!n.includes(o))return!1;return!0}function u0(r){return r!==null&&typeof r=="object"}function mu(r){const e=[];for(const[n,s]of Object.entries(r))Array.isArray(s)?s.forEach(o=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}function _R(r,e){const n=new ER(r,e);return n.subscribe.bind(n)}class ER{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(s=>{this.error(s)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,s){let o;if(e===void 0&&n===void 0&&s===void 0)throw new Error("Missing Observer.");TR(e,["next","error","complete"])?o=e:o={next:e,error:n,complete:s},o.next===void 0&&(o.next=Im),o.error===void 0&&(o.error=Im),o.complete===void 0&&(o.complete=Im);const u=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),u}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function TR(r,e){if(typeof r!="object"||r===null)return!1;for(const n of e)if(n in r&&typeof r[n]=="function")return!0;return!1}function Im(){}function zt(r){return r&&r._delegate?r._delegate:r}class ca{constructor(e,n,s){this.name=e,this.instanceFactory=n,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const ia="[DEFAULT]";class bR{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const s=new nR;if(this.instancesDeferred.set(n,s),this.isInitialized(n)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:n});o&&s.resolve(o)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e?.identifier),s=e?.optional??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(o){if(s)return null;throw o}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(AR(e))try{this.getOrInitializeService({instanceIdentifier:ia})}catch{}for(const[n,s]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(n);try{const u=this.getOrInitializeService({instanceIdentifier:o});s.resolve(u)}catch{}}}}clearInstance(e=ia){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ia){return this.instances.has(e)}getOptions(e=ia){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:s,options:n});for(const[u,f]of this.instancesDeferred.entries()){const m=this.normalizeInstanceIdentifier(u);s===m&&f.resolve(o)}return o}onInit(e,n){const s=this.normalizeInstanceIdentifier(n),o=this.onInitCallbacks.get(s)??new Set;o.add(e),this.onInitCallbacks.set(s,o);const u=this.instances.get(s);return u&&e(u,s),()=>{o.delete(e)}}invokeOnInitCallbacks(e,n){const s=this.onInitCallbacks.get(n);if(s)for(const o of s)try{o(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:SR(e),options:n}),this.instances.set(e,s),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=ia){return this.component?this.component.multipleInstances?e:ia:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function SR(r){return r===ia?void 0:r}function AR(r){return r.instantiationMode==="EAGER"}class wR{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new bR(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}var Be;(function(r){r[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT"})(Be||(Be={}));const RR={debug:Be.DEBUG,verbose:Be.VERBOSE,info:Be.INFO,warn:Be.WARN,error:Be.ERROR,silent:Be.SILENT},CR=Be.INFO,xR={[Be.DEBUG]:"log",[Be.VERBOSE]:"log",[Be.INFO]:"info",[Be.WARN]:"warn",[Be.ERROR]:"error"},IR=(r,e,...n)=>{if(e<r.logLevel)return;const s=new Date().toISOString(),o=xR[e];if(o)console[o](`[${s}]  ${r.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Rg{constructor(e){this.name=e,this._logLevel=CR,this._logHandler=IR,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Be))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?RR[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Be.DEBUG,...e),this._logHandler(this,Be.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Be.VERBOSE,...e),this._logHandler(this,Be.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Be.INFO,...e),this._logHandler(this,Be.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Be.WARN,...e),this._logHandler(this,Be.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Be.ERROR,...e),this._logHandler(this,Be.ERROR,...e)}}const DR=(r,e)=>e.some(n=>r instanceof n);let c0,h0;function NR(){return c0||(c0=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function OR(){return h0||(h0=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const uT=new WeakMap,$m=new WeakMap,cT=new WeakMap,Dm=new WeakMap,Cg=new WeakMap;function MR(r){const e=new Promise((n,s)=>{const o=()=>{r.removeEventListener("success",u),r.removeEventListener("error",f)},u=()=>{n(fs(r.result)),o()},f=()=>{s(r.error),o()};r.addEventListener("success",u),r.addEventListener("error",f)});return e.then(n=>{n instanceof IDBCursor&&uT.set(n,r)}).catch(()=>{}),Cg.set(e,r),e}function VR(r){if($m.has(r))return;const e=new Promise((n,s)=>{const o=()=>{r.removeEventListener("complete",u),r.removeEventListener("error",f),r.removeEventListener("abort",f)},u=()=>{n(),o()},f=()=>{s(r.error||new DOMException("AbortError","AbortError")),o()};r.addEventListener("complete",u),r.addEventListener("error",f),r.addEventListener("abort",f)});$m.set(r,e)}let Qm={get(r,e,n){if(r instanceof IDBTransaction){if(e==="done")return $m.get(r);if(e==="objectStoreNames")return r.objectStoreNames||cT.get(r);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return fs(r[e])},set(r,e,n){return r[e]=n,!0},has(r,e){return r instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in r}};function kR(r){Qm=r(Qm)}function PR(r){return r===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const s=r.call(Nm(this),e,...n);return cT.set(s,e.sort?e.sort():[e]),fs(s)}:OR().includes(r)?function(...e){return r.apply(Nm(this),e),fs(uT.get(this))}:function(...e){return fs(r.apply(Nm(this),e))}}function LR(r){return typeof r=="function"?PR(r):(r instanceof IDBTransaction&&VR(r),DR(r,NR())?new Proxy(r,Qm):r)}function fs(r){if(r instanceof IDBRequest)return MR(r);if(Dm.has(r))return Dm.get(r);const e=LR(r);return e!==r&&(Dm.set(r,e),Cg.set(e,r)),e}const Nm=r=>Cg.get(r);function jR(r,e,{blocked:n,upgrade:s,blocking:o,terminated:u}={}){const f=indexedDB.open(r,e),m=fs(f);return s&&f.addEventListener("upgradeneeded",g=>{s(fs(f.result),g.oldVersion,g.newVersion,fs(f.transaction),g)}),n&&f.addEventListener("blocked",g=>n(g.oldVersion,g.newVersion,g)),m.then(g=>{u&&g.addEventListener("close",()=>u()),o&&g.addEventListener("versionchange",p=>o(p.oldVersion,p.newVersion,p))}).catch(()=>{}),m}const UR=["get","getKey","getAll","getAllKeys","count"],zR=["put","add","delete","clear"],Om=new Map;function f0(r,e){if(!(r instanceof IDBDatabase&&!(e in r)&&typeof e=="string"))return;if(Om.get(e))return Om.get(e);const n=e.replace(/FromIndex$/,""),s=e!==n,o=zR.includes(n);if(!(n in(s?IDBIndex:IDBObjectStore).prototype)||!(o||UR.includes(n)))return;const u=async function(f,...m){const g=this.transaction(f,o?"readwrite":"readonly");let p=g.store;return s&&(p=p.index(m.shift())),(await Promise.all([p[n](...m),o&&g.done]))[0]};return Om.set(e,u),u}kR(r=>({...r,get:(e,n,s)=>f0(e,n)||r.get(e,n,s),has:(e,n)=>!!f0(e,n)||r.has(e,n)}));class BR{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(qR(n)){const s=n.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(n=>n).join(" ")}}function qR(r){return r.getComponent()?.type==="VERSION"}const Ym="@firebase/app",d0="0.14.6";const Sr=new Rg("@firebase/app"),HR="@firebase/app-compat",FR="@firebase/analytics-compat",GR="@firebase/analytics",$R="@firebase/app-check-compat",QR="@firebase/app-check",YR="@firebase/auth",KR="@firebase/auth-compat",XR="@firebase/database",WR="@firebase/data-connect",JR="@firebase/database-compat",ZR="@firebase/functions",eC="@firebase/functions-compat",tC="@firebase/installations",nC="@firebase/installations-compat",iC="@firebase/messaging",rC="@firebase/messaging-compat",sC="@firebase/performance",aC="@firebase/performance-compat",oC="@firebase/remote-config",lC="@firebase/remote-config-compat",uC="@firebase/storage",cC="@firebase/storage-compat",hC="@firebase/firestore",fC="@firebase/ai",dC="@firebase/firestore-compat",mC="firebase",gC="12.6.0";const Km="[DEFAULT]",pC={[Ym]:"fire-core",[HR]:"fire-core-compat",[GR]:"fire-analytics",[FR]:"fire-analytics-compat",[QR]:"fire-app-check",[$R]:"fire-app-check-compat",[YR]:"fire-auth",[KR]:"fire-auth-compat",[XR]:"fire-rtdb",[WR]:"fire-data-connect",[JR]:"fire-rtdb-compat",[ZR]:"fire-fn",[eC]:"fire-fn-compat",[tC]:"fire-iid",[nC]:"fire-iid-compat",[iC]:"fire-fcm",[rC]:"fire-fcm-compat",[sC]:"fire-perf",[aC]:"fire-perf-compat",[oC]:"fire-rc",[lC]:"fire-rc-compat",[uC]:"fire-gcs",[cC]:"fire-gcs-compat",[hC]:"fire-fst",[dC]:"fire-fst-compat",[fC]:"fire-vertex","fire-js":"fire-js",[mC]:"fire-js-all"};const Ih=new Map,yC=new Map,Xm=new Map;function m0(r,e){try{r.container.addComponent(e)}catch(n){Sr.debug(`Component ${e.name} failed to register with FirebaseApp ${r.name}`,n)}}function yo(r){const e=r.name;if(Xm.has(e))return Sr.debug(`There were multiple attempts to register component ${e}.`),!1;Xm.set(e,r);for(const n of Ih.values())m0(n,r);for(const n of yC.values())m0(n,r);return!0}function xg(r,e){const n=r.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),r.container.getProvider(e)}function pi(r){return r==null?!1:r.settings!==void 0}const vC={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ds=new du("app","Firebase",vC);class _C{constructor(e,n,s){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new ca("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ds.create("app-deleted",{appName:this._name})}}const No=gC;function hT(r,e={}){let n=r;typeof e!="object"&&(e={name:e});const s={name:Km,automaticDataCollectionEnabled:!0,...e},o=s.name;if(typeof o!="string"||!o)throw ds.create("bad-app-name",{appName:String(o)});if(n||(n=sT()),!n)throw ds.create("no-options");const u=Ih.get(o);if(u){if(ua(n,u.options)&&ua(s,u.config))return u;throw ds.create("duplicate-app",{appName:o})}const f=new wR(o);for(const g of Xm.values())f.addComponent(g);const m=new _C(n,s,f);return Ih.set(o,m),m}function fT(r=Km){const e=Ih.get(r);if(!e&&r===Km&&sT())return hT();if(!e)throw ds.create("no-app",{appName:r});return e}function ms(r,e,n){let s=pC[r]??r;n&&(s+=`-${n}`);const o=s.match(/\s|\//),u=e.match(/\s|\//);if(o||u){const f=[`Unable to register library "${s}" with version "${e}":`];o&&f.push(`library name "${s}" contains illegal characters (whitespace or "/")`),o&&u&&f.push("and"),u&&f.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Sr.warn(f.join(" "));return}yo(new ca(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}const EC="firebase-heartbeat-database",TC=1,tu="firebase-heartbeat-store";let Mm=null;function dT(){return Mm||(Mm=jR(EC,TC,{upgrade:(r,e)=>{switch(e){case 0:try{r.createObjectStore(tu)}catch(n){console.warn(n)}}}}).catch(r=>{throw ds.create("idb-open",{originalErrorMessage:r.message})})),Mm}async function bC(r){try{const n=(await dT()).transaction(tu),s=await n.objectStore(tu).get(mT(r));return await n.done,s}catch(e){if(e instanceof Cr)Sr.warn(e.message);else{const n=ds.create("idb-get",{originalErrorMessage:e?.message});Sr.warn(n.message)}}}async function g0(r,e){try{const s=(await dT()).transaction(tu,"readwrite");await s.objectStore(tu).put(e,mT(r)),await s.done}catch(n){if(n instanceof Cr)Sr.warn(n.message);else{const s=ds.create("idb-set",{originalErrorMessage:n?.message});Sr.warn(s.message)}}}function mT(r){return`${r.name}!${r.options.appId}`}const SC=1024,AC=30;class wC{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new CC(n),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=p0();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:n}),this._heartbeatsCache.heartbeats.length>AC){const o=xC(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){Sr.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=p0(),{heartbeatsToSend:n,unsentEntries:s}=RC(this._heartbeatsCache.heartbeats),o=xh(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(e){return Sr.warn(e),""}}}function p0(){return new Date().toISOString().substring(0,10)}function RC(r,e=SC){const n=[];let s=r.slice();for(const o of r){const u=n.find(f=>f.agent===o.agent);if(u){if(u.dates.push(o.date),y0(n)>e){u.dates.pop();break}}else if(n.push({agent:o.agent,dates:[o.date]}),y0(n)>e){n.pop();break}s=s.slice(1)}return{heartbeatsToSend:n,unsentEntries:s}}class CC{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return dR()?mR().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await bC(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return g0(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return g0(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function y0(r){return xh(JSON.stringify({version:2,heartbeats:r})).length}function xC(r){if(r.length===0)return-1;let e=0,n=r[0].date;for(let s=1;s<r.length;s++)r[s].date<n&&(n=r[s].date,e=s);return e}function IC(r){yo(new ca("platform-logger",e=>new BR(e),"PRIVATE")),yo(new ca("heartbeat",e=>new wC(e),"PRIVATE")),ms(Ym,d0,r),ms(Ym,d0,"esm2020"),ms("fire-js","")}IC("");function gT(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const DC=gT,pT=new du("auth","Firebase",gT());const Dh=new Rg("@firebase/auth");function NC(r,...e){Dh.logLevel<=Be.WARN&&Dh.warn(`Auth (${No}): ${r}`,...e)}function ph(r,...e){Dh.logLevel<=Be.ERROR&&Dh.error(`Auth (${No}): ${r}`,...e)}function Ki(r,...e){throw Dg(r,...e)}function _i(r,...e){return Dg(r,...e)}function Ig(r,e,n){const s={...DC(),[e]:n};return new du("auth","Firebase",s).create(e,{appName:r.name})}function oa(r){return Ig(r,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function OC(r,e,n){const s=n;if(!(e instanceof s))throw s.name!==e.constructor.name&&Ki(r,"argument-error"),Ig(r,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Dg(r,...e){if(typeof r!="string"){const n=e[0],s=[...e.slice(1)];return s[0]&&(s[0].appName=r.name),r._errorFactory.create(n,...s)}return pT.create(r,...e)}function Ie(r,e,...n){if(!r)throw Dg(e,...n)}function _r(r){const e="INTERNAL ASSERTION FAILED: "+r;throw ph(e),new Error(e)}function Ar(r,e){r||_r(e)}function Wm(){return typeof self<"u"&&self.location?.href||""}function MC(){return v0()==="http:"||v0()==="https:"}function v0(){return typeof self<"u"&&self.location?.protocol||null}function VC(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(MC()||uR()||"connection"in navigator)?navigator.onLine:!0}function kC(){if(typeof navigator>"u")return null;const r=navigator;return r.languages&&r.languages[0]||r.language||null}class gu{constructor(e,n){this.shortDelay=e,this.longDelay=n,Ar(n>e,"Short delay should be less than long delay!"),this.isMobile=aR()||cR()}get(){return VC()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Ng(r,e){Ar(r.emulator,"Emulator should always be set here");const{url:n}=r.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}class yT{static initialize(e,n,s){this.fetchImpl=e,n&&(this.headersImpl=n),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;_r("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;_r("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;_r("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const PC={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const LC=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],jC=new gu(3e4,6e4);function Og(r,e){return r.tenantId&&!e.tenantId?{...e,tenantId:r.tenantId}:e}async function Oo(r,e,n,s,o={}){return vT(r,o,async()=>{let u={},f={};s&&(e==="GET"?f=s:u={body:JSON.stringify(s)});const m=mu({key:r.config.apiKey,...f}).slice(1),g=await r._getAdditionalHeaders();g["Content-Type"]="application/json",r.languageCode&&(g["X-Firebase-Locale"]=r.languageCode);const p={method:e,headers:g,...u};return lR()||(p.referrerPolicy="no-referrer"),r.emulatorConfig&&Do(r.emulatorConfig.host)&&(p.credentials="include"),yT.fetch()(await _T(r,r.config.apiHost,n,m),p)})}async function vT(r,e,n){r._canInitEmulator=!1;const s={...PC,...e};try{const o=new zC(r),u=await Promise.race([n(),o.promise]);o.clearNetworkTimeout();const f=await u.json();if("needConfirmation"in f)throw oh(r,"account-exists-with-different-credential",f);if(u.ok&&!("errorMessage"in f))return f;{const m=u.ok?f.errorMessage:f.error.message,[g,p]=m.split(" : ");if(g==="FEDERATED_USER_ID_ALREADY_LINKED")throw oh(r,"credential-already-in-use",f);if(g==="EMAIL_EXISTS")throw oh(r,"email-already-in-use",f);if(g==="USER_DISABLED")throw oh(r,"user-disabled",f);const E=s[g]||g.toLowerCase().replace(/[_\s]+/g,"-");if(p)throw Ig(r,E,p);Ki(r,E)}}catch(o){if(o instanceof Cr)throw o;Ki(r,"network-request-failed",{message:String(o)})}}async function UC(r,e,n,s,o={}){const u=await Oo(r,e,n,s,o);return"mfaPendingCredential"in u&&Ki(r,"multi-factor-auth-required",{_serverResponse:u}),u}async function _T(r,e,n,s){const o=`${e}${n}?${s}`,u=r,f=u.config.emulator?Ng(r.config,o):`${r.config.apiScheme}://${o}`;return LC.includes(n)&&(await u._persistenceManagerAvailable,u._getPersistenceType()==="COOKIE")?u._getPersistence()._getFinalTarget(f).toString():f}class zC{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,s)=>{this.timer=setTimeout(()=>s(_i(this.auth,"network-request-failed")),jC.get())})}}function oh(r,e,n){const s={appName:r.name};n.email&&(s.email=n.email),n.phoneNumber&&(s.phoneNumber=n.phoneNumber);const o=_i(r,e,s);return o.customData._tokenResponse=n,o}async function BC(r,e){return Oo(r,"POST","/v1/accounts:delete",e)}async function Nh(r,e){return Oo(r,"POST","/v1/accounts:lookup",e)}function Yl(r){if(r)try{const e=new Date(Number(r));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function qC(r,e=!1){const n=zt(r),s=await n.getIdToken(e),o=Mg(s);Ie(o&&o.exp&&o.auth_time&&o.iat,n.auth,"internal-error");const u=typeof o.firebase=="object"?o.firebase:void 0,f=u?.sign_in_provider;return{claims:o,token:s,authTime:Yl(Vm(o.auth_time)),issuedAtTime:Yl(Vm(o.iat)),expirationTime:Yl(Vm(o.exp)),signInProvider:f||null,signInSecondFactor:u?.sign_in_second_factor||null}}function Vm(r){return Number(r)*1e3}function Mg(r){const[e,n,s]=r.split(".");if(e===void 0||n===void 0||s===void 0)return ph("JWT malformed, contained fewer than 3 sections"),null;try{const o=iT(n);return o?JSON.parse(o):(ph("Failed to decode base64 JWT payload"),null)}catch(o){return ph("Caught error parsing JWT payload as JSON",o?.toString()),null}}function _0(r){const e=Mg(r);return Ie(e,"internal-error"),Ie(typeof e.exp<"u","internal-error"),Ie(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function nu(r,e,n=!1){if(n)return e;try{return await e}catch(s){throw s instanceof Cr&&HC(s)&&r.auth.currentUser===r&&await r.auth.signOut(),s}}function HC({code:r}){return r==="auth/user-disabled"||r==="auth/user-token-expired"}class FC{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const s=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class Jm{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Yl(this.lastLoginAt),this.creationTime=Yl(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function Oh(r){const e=r.auth,n=await r.getIdToken(),s=await nu(r,Nh(e,{idToken:n}));Ie(s?.users.length,e,"internal-error");const o=s.users[0];r._notifyReloadListener(o);const u=o.providerUserInfo?.length?ET(o.providerUserInfo):[],f=$C(r.providerData,u),m=r.isAnonymous,g=!(r.email&&o.passwordHash)&&!f?.length,p=m?g:!1,E={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:f,metadata:new Jm(o.createdAt,o.lastLoginAt),isAnonymous:p};Object.assign(r,E)}async function GC(r){const e=zt(r);await Oh(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function $C(r,e){return[...r.filter(s=>!e.some(o=>o.providerId===s.providerId)),...e]}function ET(r){return r.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}async function QC(r,e){const n=await vT(r,{},async()=>{const s=mu({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:u}=r.config,f=await _T(r,o,"/v1/token",`key=${u}`),m=await r._getAdditionalHeaders();m["Content-Type"]="application/x-www-form-urlencoded";const g={method:"POST",headers:m,body:s};return r.emulatorConfig&&Do(r.emulatorConfig.host)&&(g.credentials="include"),yT.fetch()(f,g)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function YC(r,e){return Oo(r,"POST","/v2/accounts:revokeToken",Og(r,e))}class fo{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ie(e.idToken,"internal-error"),Ie(typeof e.idToken<"u","internal-error"),Ie(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):_0(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Ie(e.length!==0,"internal-error");const n=_0(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Ie(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:s,refreshToken:o,expiresIn:u}=await QC(e,n);this.updateTokensAndExpiration(s,o,Number(u))}updateTokensAndExpiration(e,n,s){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(e,n){const{refreshToken:s,accessToken:o,expirationTime:u}=n,f=new fo;return s&&(Ie(typeof s=="string","internal-error",{appName:e}),f.refreshToken=s),o&&(Ie(typeof o=="string","internal-error",{appName:e}),f.accessToken=o),u&&(Ie(typeof u=="number","internal-error",{appName:e}),f.expirationTime=u),f}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new fo,this.toJSON())}_performRefresh(){return _r("not implemented")}}function os(r,e){Ie(typeof r=="string"||typeof r>"u","internal-error",{appName:e})}class yi{constructor({uid:e,auth:n,stsTokenManager:s,...o}){this.providerId="firebase",this.proactiveRefresh=new FC(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new Jm(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const n=await nu(this,this.stsTokenManager.getToken(this.auth,e));return Ie(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return qC(this,e)}reload(){return GC(this)}_assign(e){this!==e&&(Ie(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new yi({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){Ie(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let s=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),s=!0),n&&await Oh(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(pi(this.auth.app))return Promise.reject(oa(this.auth));const e=await this.getIdToken();return await nu(this,BC(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const s=n.displayName??void 0,o=n.email??void 0,u=n.phoneNumber??void 0,f=n.photoURL??void 0,m=n.tenantId??void 0,g=n._redirectEventId??void 0,p=n.createdAt??void 0,E=n.lastLoginAt??void 0,{uid:T,emailVerified:I,isAnonymous:P,providerData:j,stsTokenManager:$}=n;Ie(T&&$,e,"internal-error");const B=fo.fromJSON(this.name,$);Ie(typeof T=="string",e,"internal-error"),os(s,e.name),os(o,e.name),Ie(typeof I=="boolean",e,"internal-error"),Ie(typeof P=="boolean",e,"internal-error"),os(u,e.name),os(f,e.name),os(m,e.name),os(g,e.name),os(p,e.name),os(E,e.name);const Z=new yi({uid:T,auth:e,email:o,emailVerified:I,displayName:s,isAnonymous:P,photoURL:f,phoneNumber:u,tenantId:m,stsTokenManager:B,createdAt:p,lastLoginAt:E});return j&&Array.isArray(j)&&(Z.providerData=j.map(J=>({...J}))),g&&(Z._redirectEventId=g),Z}static async _fromIdTokenResponse(e,n,s=!1){const o=new fo;o.updateFromServerResponse(n);const u=new yi({uid:n.localId,auth:e,stsTokenManager:o,isAnonymous:s});return await Oh(u),u}static async _fromGetAccountInfoResponse(e,n,s){const o=n.users[0];Ie(o.localId!==void 0,"internal-error");const u=o.providerUserInfo!==void 0?ET(o.providerUserInfo):[],f=!(o.email&&o.passwordHash)&&!u?.length,m=new fo;m.updateFromIdToken(s);const g=new yi({uid:o.localId,auth:e,stsTokenManager:m,isAnonymous:f}),p={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:u,metadata:new Jm(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!u?.length};return Object.assign(g,p),g}}const E0=new Map;function Er(r){Ar(r instanceof Function,"Expected a class definition");let e=E0.get(r);return e?(Ar(e instanceof r,"Instance stored in cache mismatched with class"),e):(e=new r,E0.set(r,e),e)}class TT{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}TT.type="NONE";const T0=TT;function yh(r,e,n){return`firebase:${r}:${e}:${n}`}class mo{constructor(e,n,s){this.persistence=e,this.auth=n,this.userKey=s;const{config:o,name:u}=this.auth;this.fullUserKey=yh(this.userKey,o.apiKey,u),this.fullPersistenceKey=yh("persistence",o.apiKey,u),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await Nh(this.auth,{idToken:e}).catch(()=>{});return n?yi._fromGetAccountInfoResponse(this.auth,n,e):null}return yi._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,s="authUser"){if(!n.length)return new mo(Er(T0),e,s);const o=(await Promise.all(n.map(async p=>{if(await p._isAvailable())return p}))).filter(p=>p);let u=o[0]||Er(T0);const f=yh(s,e.config.apiKey,e.name);let m=null;for(const p of n)try{const E=await p._get(f);if(E){let T;if(typeof E=="string"){const I=await Nh(e,{idToken:E}).catch(()=>{});if(!I)break;T=await yi._fromGetAccountInfoResponse(e,I,E)}else T=yi._fromJSON(e,E);p!==u&&(m=T),u=p;break}}catch{}const g=o.filter(p=>p._shouldAllowMigration);return!u._shouldAllowMigration||!g.length?new mo(u,e,s):(u=g[0],m&&await u._set(f,m.toJSON()),await Promise.all(n.map(async p=>{if(p!==u)try{await p._remove(f)}catch{}})),new mo(u,e,s))}}function b0(r){const e=r.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(wT(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(bT(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(CT(e))return"Blackberry";if(xT(e))return"Webos";if(ST(e))return"Safari";if((e.includes("chrome/")||AT(e))&&!e.includes("edge/"))return"Chrome";if(RT(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=r.match(n);if(s?.length===2)return s[1]}return"Other"}function bT(r=fn()){return/firefox\//i.test(r)}function ST(r=fn()){const e=r.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function AT(r=fn()){return/crios\//i.test(r)}function wT(r=fn()){return/iemobile/i.test(r)}function RT(r=fn()){return/android/i.test(r)}function CT(r=fn()){return/blackberry/i.test(r)}function xT(r=fn()){return/webos/i.test(r)}function Vg(r=fn()){return/iphone|ipad|ipod/i.test(r)||/macintosh/i.test(r)&&/mobile/i.test(r)}function KC(r=fn()){return Vg(r)&&!!window.navigator?.standalone}function XC(){return hR()&&document.documentMode===10}function IT(r=fn()){return Vg(r)||RT(r)||xT(r)||CT(r)||/windows phone/i.test(r)||wT(r)}function DT(r,e=[]){let n;switch(r){case"Browser":n=b0(fn());break;case"Worker":n=`${b0(fn())}-${r}`;break;default:n=r}const s=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${No}/${s}`}class WC{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const s=u=>new Promise((f,m)=>{try{const g=e(u);f(g)}catch(g){m(g)}});s.onAbort=n,this.queue.push(s);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const s of this.queue)await s(e),s.onAbort&&n.push(s.onAbort)}catch(s){n.reverse();for(const o of n)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s?.message})}}}async function JC(r,e={}){return Oo(r,"GET","/v2/passwordPolicy",Og(r,e))}const ZC=6;class ex{constructor(e){const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??ZC,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const s=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;s&&(n.meetsMinPasswordLength=e.length>=s),o&&(n.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let s;for(let o=0;o<e.length;o++)s=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(n,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(e,n,s,o,u){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=u))}}class tx{constructor(e,n,s,o){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=s,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new S0(this),this.idTokenSubscription=new S0(this),this.beforeStateQueue=new WC(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=pT,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(u=>this._resolvePersistenceManagerAvailable=u)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Er(n)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await mo.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Nh(this,{idToken:e}),s=await yi._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(s)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(pi(this.app)){const u=this.app.settings.authIdToken;return u?new Promise(f=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(u).then(f,f))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let s=n,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const u=this.redirectUser?._redirectEventId,f=s?._redirectEventId,m=await this.tryRedirectSignIn(e);(!u||u===f)&&m?.user&&(s=m.user,o=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(s)}catch(u){s=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(u))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return Ie(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Oh(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=kC()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(pi(this.app))return Promise.reject(oa(this));const n=e?zt(e):null;return n&&Ie(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Ie(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return pi(this.app)?Promise.reject(oa(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return pi(this.app)?Promise.reject(oa(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Er(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await JC(this),n=new ex(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new du("auth","Firebase",e())}onAuthStateChanged(e,n,s){return this.registerStateListener(this.authStateSubscription,e,n,s)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,s){return this.registerStateListener(this.idTokenSubscription,e,n,s)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const s=this.onAuthStateChanged(()=>{s(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(s.tenantId=this.tenantId),await YC(this,s)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,n){const s=await this.getOrInitRedirectPersistenceManager(n);return e===null?s.removeCurrentUser():s.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Er(e)||this._popupRedirectResolver;Ie(n,this,"argument-error"),this.redirectPersistenceManager=await mo.create(this,[Er(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,s,o){if(this._deleted)return()=>{};const u=typeof n=="function"?n:n.next.bind(n);let f=!1;const m=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ie(m,this,"internal-error"),m.then(()=>{f||u(this.currentUser)}),typeof n=="function"){const g=e.addObserver(n,s,o);return()=>{f=!0,g()}}else{const g=e.addObserver(n);return()=>{f=!0,g()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ie(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=DT(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();n&&(e["X-Firebase-Client"]=n);const s=await this._getAppCheckToken();return s&&(e["X-Firebase-AppCheck"]=s),e}async _getAppCheckToken(){if(pi(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&NC(`Error while retrieving App Check token: ${e.error}`),e?.token}}function Jh(r){return zt(r)}class S0{constructor(e){this.auth=e,this.observer=null,this.addObserver=_R(n=>this.observer=n)}get next(){return Ie(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let kg={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function nx(r){kg=r}function ix(r){return kg.loadJS(r)}function rx(){return kg.gapiScript}function sx(r){return`__${r}${Math.floor(Math.random()*1e6)}`}function ax(r,e){const n=xg(r,"auth");if(n.isInitialized()){const o=n.getImmediate(),u=n.getOptions();if(ua(u,e??{}))return o;Ki(o,"already-initialized")}return n.initialize({options:e})}function ox(r,e){const n=e?.persistence||[],s=(Array.isArray(n)?n:[n]).map(Er);e?.errorMap&&r._updateErrorMap(e.errorMap),r._initializeWithPersistence(s,e?.popupRedirectResolver)}function lx(r,e,n){const s=Jh(r);Ie(/^https?:\/\//.test(e),s,"invalid-emulator-scheme");const o=!1,u=NT(e),{host:f,port:m}=ux(e),g=m===null?"":`:${m}`,p={url:`${u}//${f}${g}/`},E=Object.freeze({host:f,port:m,protocol:u.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!s._canInitEmulator){Ie(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),Ie(ua(p,s.config.emulator)&&ua(E,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=p,s.emulatorConfig=E,s.settings.appVerificationDisabledForTesting=!0,Do(f)?(oT(`${u}//${f}${g}`),lT("Auth",!0)):cx()}function NT(r){const e=r.indexOf(":");return e<0?"":r.substr(0,e+1)}function ux(r){const e=NT(r),n=/(\/\/)?([^?#/]+)/.exec(r.substr(e.length));if(!n)return{host:"",port:null};const s=n[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(s);if(o){const u=o[1];return{host:u,port:A0(s.substr(u.length+1))}}else{const[u,f]=s.split(":");return{host:u,port:A0(f)}}}function A0(r){if(!r)return null;const e=Number(r);return isNaN(e)?null:e}function cx(){function r(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",r):r())}class OT{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return _r("not implemented")}_getIdTokenResponse(e){return _r("not implemented")}_linkToIdToken(e,n){return _r("not implemented")}_getReauthenticationResolver(e){return _r("not implemented")}}async function go(r,e){return UC(r,"POST","/v1/accounts:signInWithIdp",Og(r,e))}const hx="http://localhost";class ha extends OT{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new ha(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Ki("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:s,signInMethod:o,...u}=n;if(!s||!o)return null;const f=new ha(s,o);return f.idToken=u.idToken||void 0,f.accessToken=u.accessToken||void 0,f.secret=u.secret,f.nonce=u.nonce,f.pendingToken=u.pendingToken||null,f}_getIdTokenResponse(e){const n=this.buildRequest();return go(e,n)}_linkToIdToken(e,n){const s=this.buildRequest();return s.idToken=n,go(e,s)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,go(e,n)}buildRequest(){const e={requestUri:hx,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=mu(n)}return e}}class Pg{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class pu extends Pg{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class ls extends pu{constructor(){super("facebook.com")}static credential(e){return ha._fromParams({providerId:ls.PROVIDER_ID,signInMethod:ls.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ls.credentialFromTaggedObject(e)}static credentialFromError(e){return ls.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ls.credential(e.oauthAccessToken)}catch{return null}}}ls.FACEBOOK_SIGN_IN_METHOD="facebook.com";ls.PROVIDER_ID="facebook.com";class vr extends pu{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return ha._fromParams({providerId:vr.PROVIDER_ID,signInMethod:vr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return vr.credentialFromTaggedObject(e)}static credentialFromError(e){return vr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:s}=e;if(!n&&!s)return null;try{return vr.credential(n,s)}catch{return null}}}vr.GOOGLE_SIGN_IN_METHOD="google.com";vr.PROVIDER_ID="google.com";class us extends pu{constructor(){super("github.com")}static credential(e){return ha._fromParams({providerId:us.PROVIDER_ID,signInMethod:us.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return us.credentialFromTaggedObject(e)}static credentialFromError(e){return us.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return us.credential(e.oauthAccessToken)}catch{return null}}}us.GITHUB_SIGN_IN_METHOD="github.com";us.PROVIDER_ID="github.com";class cs extends pu{constructor(){super("twitter.com")}static credential(e,n){return ha._fromParams({providerId:cs.PROVIDER_ID,signInMethod:cs.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return cs.credentialFromTaggedObject(e)}static credentialFromError(e){return cs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:s}=e;if(!n||!s)return null;try{return cs.credential(n,s)}catch{return null}}}cs.TWITTER_SIGN_IN_METHOD="twitter.com";cs.PROVIDER_ID="twitter.com";class vo{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,s,o=!1){const u=await yi._fromIdTokenResponse(e,s,o),f=w0(s);return new vo({user:u,providerId:f,_tokenResponse:s,operationType:n})}static async _forOperation(e,n,s){await e._updateTokensIfNecessary(s,!0);const o=w0(s);return new vo({user:e,providerId:o,_tokenResponse:s,operationType:n})}}function w0(r){return r.providerId?r.providerId:"phoneNumber"in r?"phone":null}class Mh extends Cr{constructor(e,n,s,o){super(n.code,n.message),this.operationType=s,this.user=o,Object.setPrototypeOf(this,Mh.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(e,n,s,o){return new Mh(e,n,s,o)}}function MT(r,e,n,s){return(e==="reauthenticate"?n._getReauthenticationResolver(r):n._getIdTokenResponse(r)).catch(u=>{throw u.code==="auth/multi-factor-auth-required"?Mh._fromErrorAndOperation(r,u,e,s):u})}async function fx(r,e,n=!1){const s=await nu(r,e._linkToIdToken(r.auth,await r.getIdToken()),n);return vo._forOperation(r,"link",s)}async function dx(r,e,n=!1){const{auth:s}=r;if(pi(s.app))return Promise.reject(oa(s));const o="reauthenticate";try{const u=await nu(r,MT(s,o,e,r),n);Ie(u.idToken,s,"internal-error");const f=Mg(u.idToken);Ie(f,s,"internal-error");const{sub:m}=f;return Ie(r.uid===m,s,"user-mismatch"),vo._forOperation(r,o,u)}catch(u){throw u?.code==="auth/user-not-found"&&Ki(s,"user-mismatch"),u}}async function mx(r,e,n=!1){if(pi(r.app))return Promise.reject(oa(r));const s="signIn",o=await MT(r,s,e),u=await vo._fromIdTokenResponse(r,s,o);return n||await r._updateCurrentUser(u.user),u}function gx(r,e,n,s){return zt(r).onIdTokenChanged(e,n,s)}function px(r,e,n){return zt(r).beforeAuthStateChanged(e,n)}function yx(r,e,n,s){return zt(r).onAuthStateChanged(e,n,s)}function vx(r){return zt(r).signOut()}const Vh="__sak";class VT{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Vh,"1"),this.storage.removeItem(Vh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const _x=1e3,Ex=10;class kT extends VT{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=IT(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const s=this.storage.getItem(n),o=this.localCache[n];s!==o&&e(n,o,s)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((f,m,g)=>{this.notifyListeners(f,g)});return}const s=e.key;n?this.detachListener():this.stopPolling();const o=()=>{const f=this.storage.getItem(s);!n&&this.localCache[s]===f||this.notifyListeners(s,f)},u=this.storage.getItem(s);XC()&&u!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,Ex):o()}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const o of Array.from(s))o(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:s}),!0)})},_x)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}kT.type="LOCAL";const Tx=kT;class PT extends VT{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}PT.type="SESSION";const LT=PT;function bx(r){return Promise.all(r.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}class Zh{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(o=>o.isListeningto(e));if(n)return n;const s=new Zh(e);return this.receivers.push(s),s}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:s,eventType:o,data:u}=n.data,f=this.handlersMap[o];if(!f?.size)return;n.ports[0].postMessage({status:"ack",eventId:s,eventType:o});const m=Array.from(f).map(async p=>p(n.origin,u)),g=await bx(m);n.ports[0].postMessage({status:"done",eventId:s,eventType:o,response:g})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Zh.receivers=[];function Lg(r="",e=10){let n="";for(let s=0;s<e;s++)n+=Math.floor(Math.random()*10);return r+n}class Sx{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,s=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let u,f;return new Promise((m,g)=>{const p=Lg("",20);o.port1.start();const E=setTimeout(()=>{g(new Error("unsupported_event"))},s);f={messageChannel:o,onMessage(T){const I=T;if(I.data.eventId===p)switch(I.data.status){case"ack":clearTimeout(E),u=setTimeout(()=>{g(new Error("timeout"))},3e3);break;case"done":clearTimeout(u),m(I.data.response);break;default:clearTimeout(E),clearTimeout(u),g(new Error("invalid_response"));break}}},this.handlers.add(f),o.port1.addEventListener("message",f.onMessage),this.target.postMessage({eventType:e,eventId:p,data:n},[o.port2])}).finally(()=>{f&&this.removeMessageHandler(f)})}}function Fi(){return window}function Ax(r){Fi().location.href=r}function jT(){return typeof Fi().WorkerGlobalScope<"u"&&typeof Fi().importScripts=="function"}async function wx(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function Rx(){return navigator?.serviceWorker?.controller||null}function Cx(){return jT()?self:null}const UT="firebaseLocalStorageDb",xx=1,kh="firebaseLocalStorage",zT="fbase_key";class yu{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function ef(r,e){return r.transaction([kh],e?"readwrite":"readonly").objectStore(kh)}function Ix(){const r=indexedDB.deleteDatabase(UT);return new yu(r).toPromise()}function Zm(){const r=indexedDB.open(UT,xx);return new Promise((e,n)=>{r.addEventListener("error",()=>{n(r.error)}),r.addEventListener("upgradeneeded",()=>{const s=r.result;try{s.createObjectStore(kh,{keyPath:zT})}catch(o){n(o)}}),r.addEventListener("success",async()=>{const s=r.result;s.objectStoreNames.contains(kh)?e(s):(s.close(),await Ix(),e(await Zm()))})})}async function R0(r,e,n){const s=ef(r,!0).put({[zT]:e,value:n});return new yu(s).toPromise()}async function Dx(r,e){const n=ef(r,!1).get(e),s=await new yu(n).toPromise();return s===void 0?null:s.value}function C0(r,e){const n=ef(r,!0).delete(e);return new yu(n).toPromise()}const Nx=800,Ox=3;class BT{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Zm(),this.db)}async _withRetries(e){let n=0;for(;;)try{const s=await this._openDb();return await e(s)}catch(s){if(n++>Ox)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return jT()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Zh._getInstance(Cx()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await wx(),!this.activeServiceWorker)return;this.sender=new Sx(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||Rx()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Zm();return await R0(e,Vh,"1"),await C0(e,Vh),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(s=>R0(s,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(s=>Dx(s,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>C0(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const u=ef(o,!1).getAll();return new yu(u).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],s=new Set;if(e.length!==0)for(const{fbase_key:o,value:u}of e)s.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(u)&&(this.notifyListeners(o,u),n.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!s.has(o)&&(this.notifyListeners(o,null),n.push(o));return n}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const o of Array.from(s))o(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),Nx)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}BT.type="LOCAL";const Mx=BT;new gu(3e4,6e4);function qT(r,e){return e?Er(e):(Ie(r._popupRedirectResolver,r,"argument-error"),r._popupRedirectResolver)}class jg extends OT{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return go(e,this._buildIdpRequest())}_linkToIdToken(e,n){return go(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return go(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function Vx(r){return mx(r.auth,new jg(r),r.bypassAuthState)}function kx(r){const{auth:e,user:n}=r;return Ie(n,e,"internal-error"),dx(n,new jg(r),r.bypassAuthState)}async function Px(r){const{auth:e,user:n}=r;return Ie(n,e,"internal-error"),fx(n,new jg(r),r.bypassAuthState)}class HT{constructor(e,n,s,o,u=!1){this.auth=e,this.resolver=s,this.user=o,this.bypassAuthState=u,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:s,postBody:o,tenantId:u,error:f,type:m}=e;if(f){this.reject(f);return}const g={auth:this.auth,requestUri:n,sessionId:s,tenantId:u||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(m)(g))}catch(p){this.reject(p)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Vx;case"linkViaPopup":case"linkViaRedirect":return Px;case"reauthViaPopup":case"reauthViaRedirect":return kx;default:Ki(this.auth,"internal-error")}}resolve(e){Ar(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Ar(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Lx=new gu(2e3,1e4);async function jx(r,e,n){if(pi(r.app))return Promise.reject(_i(r,"operation-not-supported-in-this-environment"));const s=Jh(r);OC(r,e,Pg);const o=qT(s,n);return new ra(s,"signInViaPopup",e,o).executeNotNull()}class ra extends HT{constructor(e,n,s,o,u){super(e,n,o,u),this.provider=s,this.authWindow=null,this.pollId=null,ra.currentPopupAction&&ra.currentPopupAction.cancel(),ra.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ie(e,this.auth,"internal-error"),e}async onExecution(){Ar(this.filter.length===1,"Popup operations only handle one event");const e=Lg();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(_i(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(_i(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ra.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(_i(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,Lx.get())};e()}}ra.currentPopupAction=null;const Ux="pendingRedirect",vh=new Map;class zx extends HT{constructor(e,n,s=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,s),this.eventId=null}async execute(){let e=vh.get(this.auth._key());if(!e){try{const s=await Bx(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(s)}catch(n){e=()=>Promise.reject(n)}vh.set(this.auth._key(),e)}return this.bypassAuthState||vh.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function Bx(r,e){const n=Fx(e),s=Hx(r);if(!await s._isAvailable())return!1;const o=await s._get(n)==="true";return await s._remove(n),o}function qx(r,e){vh.set(r._key(),e)}function Hx(r){return Er(r._redirectPersistence)}function Fx(r){return yh(Ux,r.config.apiKey,r.name)}async function Gx(r,e,n=!1){if(pi(r.app))return Promise.reject(oa(r));const s=Jh(r),o=qT(s,e),f=await new zx(s,o,n).execute();return f&&!n&&(delete f.user._redirectEventId,await s._persistUserIfCurrent(f.user),await s._setRedirectUser(null,e)),f}const $x=600*1e3;class Qx{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(e,s)&&(n=!0,this.sendToConsumer(e,s),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!Yx(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){if(e.error&&!FT(e)){const s=e.error.code?.split("auth/")[1]||"internal-error";n.onError(_i(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const s=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&s}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=$x&&this.cachedEventUids.clear(),this.cachedEventUids.has(x0(e))}saveEventToCache(e){this.cachedEventUids.add(x0(e)),this.lastProcessedEventTime=Date.now()}}function x0(r){return[r.type,r.eventId,r.sessionId,r.tenantId].filter(e=>e).join("-")}function FT({type:r,error:e}){return r==="unknown"&&e?.code==="auth/no-auth-event"}function Yx(r){switch(r.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return FT(r);default:return!1}}async function Kx(r,e={}){return Oo(r,"GET","/v1/projects",e)}const Xx=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Wx=/^https?/;async function Jx(r){if(r.config.emulator)return;const{authorizedDomains:e}=await Kx(r);for(const n of e)try{if(Zx(n))return}catch{}Ki(r,"unauthorized-domain")}function Zx(r){const e=Wm(),{protocol:n,hostname:s}=new URL(e);if(r.startsWith("chrome-extension://")){const f=new URL(r);return f.hostname===""&&s===""?n==="chrome-extension:"&&r.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&f.hostname===s}if(!Wx.test(n))return!1;if(Xx.test(r))return s===r;const o=r.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(s)}const e2=new gu(3e4,6e4);function I0(){const r=Fi().___jsl;if(r?.H){for(const e of Object.keys(r.H))if(r.H[e].r=r.H[e].r||[],r.H[e].L=r.H[e].L||[],r.H[e].r=[...r.H[e].L],r.CP)for(let n=0;n<r.CP.length;n++)r.CP[n]=null}}function t2(r){return new Promise((e,n)=>{function s(){I0(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{I0(),n(_i(r,"network-request-failed"))},timeout:e2.get()})}if(Fi().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(Fi().gapi?.load)s();else{const o=sx("iframefcb");return Fi()[o]=()=>{gapi.load?s():n(_i(r,"network-request-failed"))},ix(`${rx()}?onload=${o}`).catch(u=>n(u))}}).catch(e=>{throw _h=null,e})}let _h=null;function n2(r){return _h=_h||t2(r),_h}const i2=new gu(5e3,15e3),r2="__/auth/iframe",s2="emulator/auth/iframe",a2={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},o2=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function l2(r){const e=r.config;Ie(e.authDomain,r,"auth-domain-config-required");const n=e.emulator?Ng(e,s2):`https://${r.config.authDomain}/${r2}`,s={apiKey:e.apiKey,appName:r.name,v:No},o=o2.get(r.config.apiHost);o&&(s.eid=o);const u=r._getFrameworks();return u.length&&(s.fw=u.join(",")),`${n}?${mu(s).slice(1)}`}async function u2(r){const e=await n2(r),n=Fi().gapi;return Ie(n,r,"internal-error"),e.open({where:document.body,url:l2(r),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:a2,dontclear:!0},s=>new Promise(async(o,u)=>{await s.restyle({setHideOnLeave:!1});const f=_i(r,"network-request-failed"),m=Fi().setTimeout(()=>{u(f)},i2.get());function g(){Fi().clearTimeout(m),o(s)}s.ping(g).then(g,()=>{u(f)})}))}const c2={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},h2=500,f2=600,d2="_blank",m2="http://localhost";class D0{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function g2(r,e,n,s=h2,o=f2){const u=Math.max((window.screen.availHeight-o)/2,0).toString(),f=Math.max((window.screen.availWidth-s)/2,0).toString();let m="";const g={...c2,width:s.toString(),height:o.toString(),top:u,left:f},p=fn().toLowerCase();n&&(m=AT(p)?d2:n),bT(p)&&(e=e||m2,g.scrollbars="yes");const E=Object.entries(g).reduce((I,[P,j])=>`${I}${P}=${j},`,"");if(KC(p)&&m!=="_self")return p2(e||"",m),new D0(null);const T=window.open(e||"",m,E);Ie(T,r,"popup-blocked");try{T.focus()}catch{}return new D0(T)}function p2(r,e){const n=document.createElement("a");n.href=r,n.target=e;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(s)}const y2="__/auth/handler",v2="emulator/auth/handler",_2=encodeURIComponent("fac");async function N0(r,e,n,s,o,u){Ie(r.config.authDomain,r,"auth-domain-config-required"),Ie(r.config.apiKey,r,"invalid-api-key");const f={apiKey:r.config.apiKey,appName:r.name,authType:n,redirectUrl:s,v:No,eventId:o};if(e instanceof Pg){e.setDefaultLanguage(r.languageCode),f.providerId=e.providerId||"",vR(e.getCustomParameters())||(f.customParameters=JSON.stringify(e.getCustomParameters()));for(const[E,T]of Object.entries({}))f[E]=T}if(e instanceof pu){const E=e.getScopes().filter(T=>T!=="");E.length>0&&(f.scopes=E.join(","))}r.tenantId&&(f.tid=r.tenantId);const m=f;for(const E of Object.keys(m))m[E]===void 0&&delete m[E];const g=await r._getAppCheckToken(),p=g?`#${_2}=${encodeURIComponent(g)}`:"";return`${E2(r)}?${mu(m).slice(1)}${p}`}function E2({config:r}){return r.emulator?Ng(r,v2):`https://${r.authDomain}/${y2}`}const km="webStorageSupport";class T2{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=LT,this._completeRedirectFn=Gx,this._overrideRedirectResult=qx}async _openPopup(e,n,s,o){Ar(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const u=await N0(e,n,s,Wm(),o);return g2(e,u,Lg())}async _openRedirect(e,n,s,o){await this._originValidation(e);const u=await N0(e,n,s,Wm(),o);return Ax(u),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:o,promise:u}=this.eventManagers[n];return o?Promise.resolve(o):(Ar(u,"If manager is not set, promise should be"),u)}const s=this.initAndGetManager(e);return this.eventManagers[n]={promise:s},s.catch(()=>{delete this.eventManagers[n]}),s}async initAndGetManager(e){const n=await u2(e),s=new Qx(e);return n.register("authEvent",o=>(Ie(o?.authEvent,e,"invalid-auth-event"),{status:s.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:s},this.iframes[e._key()]=n,s}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(km,{type:km},o=>{const u=o?.[0]?.[km];u!==void 0&&n(!!u),Ki(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=Jx(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return IT()||ST()||Vg()}}const b2=T2;var O0="@firebase/auth",M0="1.12.0";class S2{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(s=>{e(s?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Ie(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function A2(r){switch(r){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function w2(r){yo(new ca("auth",(e,{options:n})=>{const s=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),u=e.getProvider("app-check-internal"),{apiKey:f,authDomain:m}=s.options;Ie(f&&!f.includes(":"),"invalid-api-key",{appName:s.name});const g={apiKey:f,authDomain:m,clientPlatform:r,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:DT(r)},p=new tx(s,o,u,g);return ox(p,n),p},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,s)=>{e.getProvider("auth-internal").initialize()})),yo(new ca("auth-internal",e=>{const n=Jh(e.getProvider("auth").getImmediate());return(s=>new S2(s))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),ms(O0,M0,A2(r)),ms(O0,M0,"esm2020")}const R2=300,C2=aT("authIdTokenMaxAge")||R2;let V0=null;const x2=r=>async e=>{const n=e&&await e.getIdTokenResult(),s=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(s&&s>C2)return;const o=n?.token;V0!==o&&(V0=o,await fetch(r,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function I2(r=fT()){const e=xg(r,"auth");if(e.isInitialized())return e.getImmediate();const n=ax(r,{popupRedirectResolver:b2,persistence:[Mx,Tx,LT]}),s=aT("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const u=new URL(s,location.origin);if(location.origin===u.origin){const f=x2(u.toString());px(n,f,()=>f(n.currentUser)),gx(n,m=>f(m))}}const o=rT("auth");return o&&lx(n,`http://${o}`),n}function D2(){return document.getElementsByTagName("head")?.[0]??document}nx({loadJS(r){return new Promise((e,n)=>{const s=document.createElement("script");s.setAttribute("src",r),s.onload=e,s.onerror=o=>{const u=_i("internal-error");u.customData=o,n(u)},s.type="text/javascript",s.charset="UTF-8",D2().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});w2("Browser");var N2="firebase",O2="12.7.0";ms(N2,O2,"app");var k0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var gs,GT;(function(){var r;function e(O,x){function w(){}w.prototype=x.prototype,O.F=x.prototype,O.prototype=new w,O.prototype.constructor=O,O.D=function(D,R,N){for(var A=Array(arguments.length-2),Y=2;Y<arguments.length;Y++)A[Y-2]=arguments[Y];return x.prototype[R].apply(D,A)}}function n(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(s,n),s.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(O,x,w){w||(w=0);const D=Array(16);if(typeof x=="string")for(var R=0;R<16;++R)D[R]=x.charCodeAt(w++)|x.charCodeAt(w++)<<8|x.charCodeAt(w++)<<16|x.charCodeAt(w++)<<24;else for(R=0;R<16;++R)D[R]=x[w++]|x[w++]<<8|x[w++]<<16|x[w++]<<24;x=O.g[0],w=O.g[1],R=O.g[2];let N=O.g[3],A;A=x+(N^w&(R^N))+D[0]+3614090360&4294967295,x=w+(A<<7&4294967295|A>>>25),A=N+(R^x&(w^R))+D[1]+3905402710&4294967295,N=x+(A<<12&4294967295|A>>>20),A=R+(w^N&(x^w))+D[2]+606105819&4294967295,R=N+(A<<17&4294967295|A>>>15),A=w+(x^R&(N^x))+D[3]+3250441966&4294967295,w=R+(A<<22&4294967295|A>>>10),A=x+(N^w&(R^N))+D[4]+4118548399&4294967295,x=w+(A<<7&4294967295|A>>>25),A=N+(R^x&(w^R))+D[5]+1200080426&4294967295,N=x+(A<<12&4294967295|A>>>20),A=R+(w^N&(x^w))+D[6]+2821735955&4294967295,R=N+(A<<17&4294967295|A>>>15),A=w+(x^R&(N^x))+D[7]+4249261313&4294967295,w=R+(A<<22&4294967295|A>>>10),A=x+(N^w&(R^N))+D[8]+1770035416&4294967295,x=w+(A<<7&4294967295|A>>>25),A=N+(R^x&(w^R))+D[9]+2336552879&4294967295,N=x+(A<<12&4294967295|A>>>20),A=R+(w^N&(x^w))+D[10]+4294925233&4294967295,R=N+(A<<17&4294967295|A>>>15),A=w+(x^R&(N^x))+D[11]+2304563134&4294967295,w=R+(A<<22&4294967295|A>>>10),A=x+(N^w&(R^N))+D[12]+1804603682&4294967295,x=w+(A<<7&4294967295|A>>>25),A=N+(R^x&(w^R))+D[13]+4254626195&4294967295,N=x+(A<<12&4294967295|A>>>20),A=R+(w^N&(x^w))+D[14]+2792965006&4294967295,R=N+(A<<17&4294967295|A>>>15),A=w+(x^R&(N^x))+D[15]+1236535329&4294967295,w=R+(A<<22&4294967295|A>>>10),A=x+(R^N&(w^R))+D[1]+4129170786&4294967295,x=w+(A<<5&4294967295|A>>>27),A=N+(w^R&(x^w))+D[6]+3225465664&4294967295,N=x+(A<<9&4294967295|A>>>23),A=R+(x^w&(N^x))+D[11]+643717713&4294967295,R=N+(A<<14&4294967295|A>>>18),A=w+(N^x&(R^N))+D[0]+3921069994&4294967295,w=R+(A<<20&4294967295|A>>>12),A=x+(R^N&(w^R))+D[5]+3593408605&4294967295,x=w+(A<<5&4294967295|A>>>27),A=N+(w^R&(x^w))+D[10]+38016083&4294967295,N=x+(A<<9&4294967295|A>>>23),A=R+(x^w&(N^x))+D[15]+3634488961&4294967295,R=N+(A<<14&4294967295|A>>>18),A=w+(N^x&(R^N))+D[4]+3889429448&4294967295,w=R+(A<<20&4294967295|A>>>12),A=x+(R^N&(w^R))+D[9]+568446438&4294967295,x=w+(A<<5&4294967295|A>>>27),A=N+(w^R&(x^w))+D[14]+3275163606&4294967295,N=x+(A<<9&4294967295|A>>>23),A=R+(x^w&(N^x))+D[3]+4107603335&4294967295,R=N+(A<<14&4294967295|A>>>18),A=w+(N^x&(R^N))+D[8]+1163531501&4294967295,w=R+(A<<20&4294967295|A>>>12),A=x+(R^N&(w^R))+D[13]+2850285829&4294967295,x=w+(A<<5&4294967295|A>>>27),A=N+(w^R&(x^w))+D[2]+4243563512&4294967295,N=x+(A<<9&4294967295|A>>>23),A=R+(x^w&(N^x))+D[7]+1735328473&4294967295,R=N+(A<<14&4294967295|A>>>18),A=w+(N^x&(R^N))+D[12]+2368359562&4294967295,w=R+(A<<20&4294967295|A>>>12),A=x+(w^R^N)+D[5]+4294588738&4294967295,x=w+(A<<4&4294967295|A>>>28),A=N+(x^w^R)+D[8]+2272392833&4294967295,N=x+(A<<11&4294967295|A>>>21),A=R+(N^x^w)+D[11]+1839030562&4294967295,R=N+(A<<16&4294967295|A>>>16),A=w+(R^N^x)+D[14]+4259657740&4294967295,w=R+(A<<23&4294967295|A>>>9),A=x+(w^R^N)+D[1]+2763975236&4294967295,x=w+(A<<4&4294967295|A>>>28),A=N+(x^w^R)+D[4]+1272893353&4294967295,N=x+(A<<11&4294967295|A>>>21),A=R+(N^x^w)+D[7]+4139469664&4294967295,R=N+(A<<16&4294967295|A>>>16),A=w+(R^N^x)+D[10]+3200236656&4294967295,w=R+(A<<23&4294967295|A>>>9),A=x+(w^R^N)+D[13]+681279174&4294967295,x=w+(A<<4&4294967295|A>>>28),A=N+(x^w^R)+D[0]+3936430074&4294967295,N=x+(A<<11&4294967295|A>>>21),A=R+(N^x^w)+D[3]+3572445317&4294967295,R=N+(A<<16&4294967295|A>>>16),A=w+(R^N^x)+D[6]+76029189&4294967295,w=R+(A<<23&4294967295|A>>>9),A=x+(w^R^N)+D[9]+3654602809&4294967295,x=w+(A<<4&4294967295|A>>>28),A=N+(x^w^R)+D[12]+3873151461&4294967295,N=x+(A<<11&4294967295|A>>>21),A=R+(N^x^w)+D[15]+530742520&4294967295,R=N+(A<<16&4294967295|A>>>16),A=w+(R^N^x)+D[2]+3299628645&4294967295,w=R+(A<<23&4294967295|A>>>9),A=x+(R^(w|~N))+D[0]+4096336452&4294967295,x=w+(A<<6&4294967295|A>>>26),A=N+(w^(x|~R))+D[7]+1126891415&4294967295,N=x+(A<<10&4294967295|A>>>22),A=R+(x^(N|~w))+D[14]+2878612391&4294967295,R=N+(A<<15&4294967295|A>>>17),A=w+(N^(R|~x))+D[5]+4237533241&4294967295,w=R+(A<<21&4294967295|A>>>11),A=x+(R^(w|~N))+D[12]+1700485571&4294967295,x=w+(A<<6&4294967295|A>>>26),A=N+(w^(x|~R))+D[3]+2399980690&4294967295,N=x+(A<<10&4294967295|A>>>22),A=R+(x^(N|~w))+D[10]+4293915773&4294967295,R=N+(A<<15&4294967295|A>>>17),A=w+(N^(R|~x))+D[1]+2240044497&4294967295,w=R+(A<<21&4294967295|A>>>11),A=x+(R^(w|~N))+D[8]+1873313359&4294967295,x=w+(A<<6&4294967295|A>>>26),A=N+(w^(x|~R))+D[15]+4264355552&4294967295,N=x+(A<<10&4294967295|A>>>22),A=R+(x^(N|~w))+D[6]+2734768916&4294967295,R=N+(A<<15&4294967295|A>>>17),A=w+(N^(R|~x))+D[13]+1309151649&4294967295,w=R+(A<<21&4294967295|A>>>11),A=x+(R^(w|~N))+D[4]+4149444226&4294967295,x=w+(A<<6&4294967295|A>>>26),A=N+(w^(x|~R))+D[11]+3174756917&4294967295,N=x+(A<<10&4294967295|A>>>22),A=R+(x^(N|~w))+D[2]+718787259&4294967295,R=N+(A<<15&4294967295|A>>>17),A=w+(N^(R|~x))+D[9]+3951481745&4294967295,O.g[0]=O.g[0]+x&4294967295,O.g[1]=O.g[1]+(R+(A<<21&4294967295|A>>>11))&4294967295,O.g[2]=O.g[2]+R&4294967295,O.g[3]=O.g[3]+N&4294967295}s.prototype.v=function(O,x){x===void 0&&(x=O.length);const w=x-this.blockSize,D=this.C;let R=this.h,N=0;for(;N<x;){if(R==0)for(;N<=w;)o(this,O,N),N+=this.blockSize;if(typeof O=="string"){for(;N<x;)if(D[R++]=O.charCodeAt(N++),R==this.blockSize){o(this,D),R=0;break}}else for(;N<x;)if(D[R++]=O[N++],R==this.blockSize){o(this,D),R=0;break}}this.h=R,this.o+=x},s.prototype.A=function(){var O=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);O[0]=128;for(var x=1;x<O.length-8;++x)O[x]=0;x=this.o*8;for(var w=O.length-8;w<O.length;++w)O[w]=x&255,x/=256;for(this.v(O),O=Array(16),x=0,w=0;w<4;++w)for(let D=0;D<32;D+=8)O[x++]=this.g[w]>>>D&255;return O};function u(O,x){var w=m;return Object.prototype.hasOwnProperty.call(w,O)?w[O]:w[O]=x(O)}function f(O,x){this.h=x;const w=[];let D=!0;for(let R=O.length-1;R>=0;R--){const N=O[R]|0;D&&N==x||(w[R]=N,D=!1)}this.g=w}var m={};function g(O){return-128<=O&&O<128?u(O,function(x){return new f([x|0],x<0?-1:0)}):new f([O|0],O<0?-1:0)}function p(O){if(isNaN(O)||!isFinite(O))return T;if(O<0)return B(p(-O));const x=[];let w=1;for(let D=0;O>=w;D++)x[D]=O/w|0,w*=4294967296;return new f(x,0)}function E(O,x){if(O.length==0)throw Error("number format error: empty string");if(x=x||10,x<2||36<x)throw Error("radix out of range: "+x);if(O.charAt(0)=="-")return B(E(O.substring(1),x));if(O.indexOf("-")>=0)throw Error('number format error: interior "-" character');const w=p(Math.pow(x,8));let D=T;for(let N=0;N<O.length;N+=8){var R=Math.min(8,O.length-N);const A=parseInt(O.substring(N,N+R),x);R<8?(R=p(Math.pow(x,R)),D=D.j(R).add(p(A))):(D=D.j(w),D=D.add(p(A)))}return D}var T=g(0),I=g(1),P=g(16777216);r=f.prototype,r.m=function(){if($(this))return-B(this).m();let O=0,x=1;for(let w=0;w<this.g.length;w++){const D=this.i(w);O+=(D>=0?D:4294967296+D)*x,x*=4294967296}return O},r.toString=function(O){if(O=O||10,O<2||36<O)throw Error("radix out of range: "+O);if(j(this))return"0";if($(this))return"-"+B(this).toString(O);const x=p(Math.pow(O,6));var w=this;let D="";for(;;){const R=ge(w,x).g;w=Z(w,R.j(x));let N=((w.g.length>0?w.g[0]:w.h)>>>0).toString(O);if(w=R,j(w))return N+D;for(;N.length<6;)N="0"+N;D=N+D}},r.i=function(O){return O<0?0:O<this.g.length?this.g[O]:this.h};function j(O){if(O.h!=0)return!1;for(let x=0;x<O.g.length;x++)if(O.g[x]!=0)return!1;return!0}function $(O){return O.h==-1}r.l=function(O){return O=Z(this,O),$(O)?-1:j(O)?0:1};function B(O){const x=O.g.length,w=[];for(let D=0;D<x;D++)w[D]=~O.g[D];return new f(w,~O.h).add(I)}r.abs=function(){return $(this)?B(this):this},r.add=function(O){const x=Math.max(this.g.length,O.g.length),w=[];let D=0;for(let R=0;R<=x;R++){let N=D+(this.i(R)&65535)+(O.i(R)&65535),A=(N>>>16)+(this.i(R)>>>16)+(O.i(R)>>>16);D=A>>>16,N&=65535,A&=65535,w[R]=A<<16|N}return new f(w,w[w.length-1]&-2147483648?-1:0)};function Z(O,x){return O.add(B(x))}r.j=function(O){if(j(this)||j(O))return T;if($(this))return $(O)?B(this).j(B(O)):B(B(this).j(O));if($(O))return B(this.j(B(O)));if(this.l(P)<0&&O.l(P)<0)return p(this.m()*O.m());const x=this.g.length+O.g.length,w=[];for(var D=0;D<2*x;D++)w[D]=0;for(D=0;D<this.g.length;D++)for(let R=0;R<O.g.length;R++){const N=this.i(D)>>>16,A=this.i(D)&65535,Y=O.i(R)>>>16,he=O.i(R)&65535;w[2*D+2*R]+=A*he,J(w,2*D+2*R),w[2*D+2*R+1]+=N*he,J(w,2*D+2*R+1),w[2*D+2*R+1]+=A*Y,J(w,2*D+2*R+1),w[2*D+2*R+2]+=N*Y,J(w,2*D+2*R+2)}for(O=0;O<x;O++)w[O]=w[2*O+1]<<16|w[2*O];for(O=x;O<2*x;O++)w[O]=0;return new f(w,0)};function J(O,x){for(;(O[x]&65535)!=O[x];)O[x+1]+=O[x]>>>16,O[x]&=65535,x++}function q(O,x){this.g=O,this.h=x}function ge(O,x){if(j(x))throw Error("division by zero");if(j(O))return new q(T,T);if($(O))return x=ge(B(O),x),new q(B(x.g),B(x.h));if($(x))return x=ge(O,B(x)),new q(B(x.g),x.h);if(O.g.length>30){if($(O)||$(x))throw Error("slowDivide_ only works with positive integers.");for(var w=I,D=x;D.l(O)<=0;)w=_e(w),D=_e(D);var R=Ee(w,1),N=Ee(D,1);for(D=Ee(D,2),w=Ee(w,2);!j(D);){var A=N.add(D);A.l(O)<=0&&(R=R.add(w),N=A),D=Ee(D,1),w=Ee(w,1)}return x=Z(O,R.j(x)),new q(R,x)}for(R=T;O.l(x)>=0;){for(w=Math.max(1,Math.floor(O.m()/x.m())),D=Math.ceil(Math.log(w)/Math.LN2),D=D<=48?1:Math.pow(2,D-48),N=p(w),A=N.j(x);$(A)||A.l(O)>0;)w-=D,N=p(w),A=N.j(x);j(N)&&(N=I),R=R.add(N),O=Z(O,A)}return new q(R,O)}r.B=function(O){return ge(this,O).h},r.and=function(O){const x=Math.max(this.g.length,O.g.length),w=[];for(let D=0;D<x;D++)w[D]=this.i(D)&O.i(D);return new f(w,this.h&O.h)},r.or=function(O){const x=Math.max(this.g.length,O.g.length),w=[];for(let D=0;D<x;D++)w[D]=this.i(D)|O.i(D);return new f(w,this.h|O.h)},r.xor=function(O){const x=Math.max(this.g.length,O.g.length),w=[];for(let D=0;D<x;D++)w[D]=this.i(D)^O.i(D);return new f(w,this.h^O.h)};function _e(O){const x=O.g.length+1,w=[];for(let D=0;D<x;D++)w[D]=O.i(D)<<1|O.i(D-1)>>>31;return new f(w,O.h)}function Ee(O,x){const w=x>>5;x%=32;const D=O.g.length-w,R=[];for(let N=0;N<D;N++)R[N]=x>0?O.i(N+w)>>>x|O.i(N+w+1)<<32-x:O.i(N+w);return new f(R,O.h)}s.prototype.digest=s.prototype.A,s.prototype.reset=s.prototype.u,s.prototype.update=s.prototype.v,GT=s,f.prototype.add=f.prototype.add,f.prototype.multiply=f.prototype.j,f.prototype.modulo=f.prototype.B,f.prototype.compare=f.prototype.l,f.prototype.toNumber=f.prototype.m,f.prototype.toString=f.prototype.toString,f.prototype.getBits=f.prototype.i,f.fromNumber=p,f.fromString=E,gs=f}).apply(typeof k0<"u"?k0:typeof self<"u"?self:typeof window<"u"?window:{});var lh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var $T,Hl,QT,Eh,eg,YT,KT,XT;(function(){var r,e=Object.defineProperty;function n(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof lh=="object"&&lh];for(var y=0;y<c.length;++y){var _=c[y];if(_&&_.Math==Math)return _}throw Error("Cannot find global object")}var s=n(this);function o(c,y){if(y)e:{var _=s;c=c.split(".");for(var C=0;C<c.length-1;C++){var H=c[C];if(!(H in _))break e;_=_[H]}c=c[c.length-1],C=_[c],y=y(C),y!=C&&y!=null&&e(_,c,{configurable:!0,writable:!0,value:y})}}o("Symbol.dispose",function(c){return c||Symbol("Symbol.dispose")}),o("Array.prototype.values",function(c){return c||function(){return this[Symbol.iterator]()}}),o("Object.entries",function(c){return c||function(y){var _=[],C;for(C in y)Object.prototype.hasOwnProperty.call(y,C)&&_.push([C,y[C]]);return _}});var u=u||{},f=this||self;function m(c){var y=typeof c;return y=="object"&&c!=null||y=="function"}function g(c,y,_){return c.call.apply(c.bind,arguments)}function p(c,y,_){return p=g,p.apply(null,arguments)}function E(c,y){var _=Array.prototype.slice.call(arguments,1);return function(){var C=_.slice();return C.push.apply(C,arguments),c.apply(this,C)}}function T(c,y){function _(){}_.prototype=y.prototype,c.Z=y.prototype,c.prototype=new _,c.prototype.constructor=c,c.Ob=function(C,H,K){for(var fe=Array(arguments.length-2),Me=2;Me<arguments.length;Me++)fe[Me-2]=arguments[Me];return y.prototype[H].apply(C,fe)}}var I=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?c=>c&&AsyncContext.Snapshot.wrap(c):c=>c;function P(c){const y=c.length;if(y>0){const _=Array(y);for(let C=0;C<y;C++)_[C]=c[C];return _}return[]}function j(c,y){for(let C=1;C<arguments.length;C++){const H=arguments[C];var _=typeof H;if(_=_!="object"?_:H?Array.isArray(H)?"array":_:"null",_=="array"||_=="object"&&typeof H.length=="number"){_=c.length||0;const K=H.length||0;c.length=_+K;for(let fe=0;fe<K;fe++)c[_+fe]=H[fe]}else c.push(H)}}class ${constructor(y,_){this.i=y,this.j=_,this.h=0,this.g=null}get(){let y;return this.h>0?(this.h--,y=this.g,this.g=y.next,y.next=null):y=this.i(),y}}function B(c){f.setTimeout(()=>{throw c},0)}function Z(){var c=O;let y=null;return c.g&&(y=c.g,c.g=c.g.next,c.g||(c.h=null),y.next=null),y}class J{constructor(){this.h=this.g=null}add(y,_){const C=q.get();C.set(y,_),this.h?this.h.next=C:this.g=C,this.h=C}}var q=new $(()=>new ge,c=>c.reset());class ge{constructor(){this.next=this.g=this.h=null}set(y,_){this.h=y,this.g=_,this.next=null}reset(){this.next=this.g=this.h=null}}let _e,Ee=!1,O=new J,x=()=>{const c=Promise.resolve(void 0);_e=()=>{c.then(w)}};function w(){for(var c;c=Z();){try{c.h.call(c.g)}catch(_){B(_)}var y=q;y.j(c),y.h<100&&(y.h++,c.next=y.g,y.g=c)}Ee=!1}function D(){this.u=this.u,this.C=this.C}D.prototype.u=!1,D.prototype.dispose=function(){this.u||(this.u=!0,this.N())},D.prototype[Symbol.dispose]=function(){this.dispose()},D.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function R(c,y){this.type=c,this.g=this.target=y,this.defaultPrevented=!1}R.prototype.h=function(){this.defaultPrevented=!0};var N=(function(){if(!f.addEventListener||!Object.defineProperty)return!1;var c=!1,y=Object.defineProperty({},"passive",{get:function(){c=!0}});try{const _=()=>{};f.addEventListener("test",_,y),f.removeEventListener("test",_,y)}catch{}return c})();function A(c){return/^[\s\xa0]*$/.test(c)}function Y(c,y){R.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c&&this.init(c,y)}T(Y,R),Y.prototype.init=function(c,y){const _=this.type=c.type,C=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;this.target=c.target||c.srcElement,this.g=y,y=c.relatedTarget,y||(_=="mouseover"?y=c.fromElement:_=="mouseout"&&(y=c.toElement)),this.relatedTarget=y,C?(this.clientX=C.clientX!==void 0?C.clientX:C.pageX,this.clientY=C.clientY!==void 0?C.clientY:C.pageY,this.screenX=C.screenX||0,this.screenY=C.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=c.pointerType,this.state=c.state,this.i=c,c.defaultPrevented&&Y.Z.h.call(this)},Y.prototype.h=function(){Y.Z.h.call(this);const c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var he="closure_listenable_"+(Math.random()*1e6|0),z=0;function oe(c,y,_,C,H){this.listener=c,this.proxy=null,this.src=y,this.type=_,this.capture=!!C,this.ha=H,this.key=++z,this.da=this.fa=!1}function W(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function ue(c,y,_){for(const C in c)y.call(_,c[C],C,c)}function le(c,y){for(const _ in c)y.call(void 0,c[_],_,c)}function k(c){const y={};for(const _ in c)y[_]=c[_];return y}const ee="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ce(c,y){let _,C;for(let H=1;H<arguments.length;H++){C=arguments[H];for(_ in C)c[_]=C[_];for(let K=0;K<ee.length;K++)_=ee[K],Object.prototype.hasOwnProperty.call(C,_)&&(c[_]=C[_])}}function de(c){this.src=c,this.g={},this.h=0}de.prototype.add=function(c,y,_,C,H){const K=c.toString();c=this.g[K],c||(c=this.g[K]=[],this.h++);const fe=Se(c,y,C,H);return fe>-1?(y=c[fe],_||(y.fa=!1)):(y=new oe(y,this.src,K,!!C,H),y.fa=_,c.push(y)),y};function we(c,y){const _=y.type;if(_ in c.g){var C=c.g[_],H=Array.prototype.indexOf.call(C,y,void 0),K;(K=H>=0)&&Array.prototype.splice.call(C,H,1),K&&(W(y),c.g[_].length==0&&(delete c.g[_],c.h--))}}function Se(c,y,_,C){for(let H=0;H<c.length;++H){const K=c[H];if(!K.da&&K.listener==y&&K.capture==!!_&&K.ha==C)return H}return-1}var Ce="closure_lm_"+(Math.random()*1e6|0),Pe={};function Ye(c,y,_,C,H){if(Array.isArray(y)){for(let K=0;K<y.length;K++)Ye(c,y[K],_,C,H);return null}return _=jo(_),c&&c[he]?c.J(y,_,m(C)?!!C.capture:!1,H):dn(c,y,_,!1,C,H)}function dn(c,y,_,C,H,K){if(!y)throw Error("Invalid event type");const fe=m(H)?!!H.capture:!!H;let Me=Kt(c);if(Me||(c[Ce]=Me=new de(c)),_=Me.add(y,_,C,fe,K),_.proxy)return _;if(C=xn(),_.proxy=C,C.src=c,C.listener=_,c.addEventListener)N||(H=fe),H===void 0&&(H=!1),c.addEventListener(y.toString(),C,H);else if(c.attachEvent)c.attachEvent(ln(y.toString()),C);else if(c.addListener&&c.removeListener)c.addListener(C);else throw Error("addEventListener and attachEvent are unavailable.");return _}function xn(){function c(_){return y.call(c.src,c.listener,_)}const y=In;return c}function on(c,y,_,C,H){if(Array.isArray(y))for(var K=0;K<y.length;K++)on(c,y[K],_,C,H);else C=m(C)?!!C.capture:!!C,_=jo(_),c&&c[he]?(c=c.i,K=String(y).toString(),K in c.g&&(y=c.g[K],_=Se(y,_,C,H),_>-1&&(W(y[_]),Array.prototype.splice.call(y,_,1),y.length==0&&(delete c.g[K],c.h--)))):c&&(c=Kt(c))&&(y=c.g[y.toString()],c=-1,y&&(c=Se(y,_,C,H)),(_=c>-1?y[c]:null)&&Ji(_))}function Ji(c){if(typeof c!="number"&&c&&!c.da){var y=c.src;if(y&&y[he])we(y.i,c);else{var _=c.type,C=c.proxy;y.removeEventListener?y.removeEventListener(_,C,c.capture):y.detachEvent?y.detachEvent(ln(_),C):y.addListener&&y.removeListener&&y.removeListener(C),(_=Kt(y))?(we(_,c),_.h==0&&(_.src=null,y[Ce]=null)):W(c)}}}function ln(c){return c in Pe?Pe[c]:Pe[c]="on"+c}function In(c,y){if(c.da)c=!0;else{y=new Y(y,this);const _=c.listener,C=c.ha||c.src;c.fa&&Ji(c),c=_.call(C,y)}return c}function Kt(c){return c=c[Ce],c instanceof de?c:null}var Lo="__closure_events_fn_"+(Math.random()*1e9>>>0);function jo(c){return typeof c=="function"?c:(c[Lo]||(c[Lo]=function(y){return c.handleEvent(y)}),c[Lo])}function Rt(){D.call(this),this.i=new de(this),this.M=this,this.G=null}T(Rt,D),Rt.prototype[he]=!0,Rt.prototype.removeEventListener=function(c,y,_,C){on(this,c,y,_,C)};function Bt(c,y){var _,C=c.G;if(C)for(_=[];C;C=C.G)_.push(C);if(c=c.M,C=y.type||y,typeof y=="string")y=new R(y,c);else if(y instanceof R)y.target=y.target||c;else{var H=y;y=new R(C,c),ce(y,H)}H=!0;let K,fe;if(_)for(fe=_.length-1;fe>=0;fe--)K=y.g=_[fe],H=xr(K,C,!0,y)&&H;if(K=y.g=c,H=xr(K,C,!0,y)&&H,H=xr(K,C,!1,y)&&H,_)for(fe=0;fe<_.length;fe++)K=y.g=_[fe],H=xr(K,C,!1,y)&&H}Rt.prototype.N=function(){if(Rt.Z.N.call(this),this.i){var c=this.i;for(const y in c.g){const _=c.g[y];for(let C=0;C<_.length;C++)W(_[C]);delete c.g[y],c.h--}}this.G=null},Rt.prototype.J=function(c,y,_,C){return this.i.add(String(c),y,!1,_,C)},Rt.prototype.K=function(c,y,_,C){return this.i.add(String(c),y,!0,_,C)};function xr(c,y,_,C){if(y=c.i.g[String(y)],!y)return!0;y=y.concat();let H=!0;for(let K=0;K<y.length;++K){const fe=y[K];if(fe&&!fe.da&&fe.capture==_){const Me=fe.listener,bt=fe.ha||fe.src;fe.fa&&we(c.i,fe),H=Me.call(bt,C)!==!1&&H}}return H&&!C.defaultPrevented}function bf(c,y){if(typeof c!="function")if(c&&typeof c.handleEvent=="function")c=p(c.handleEvent,c);else throw Error("Invalid listener argument");return Number(y)>2147483647?-1:f.setTimeout(c,y||0)}function Nu(c){c.g=bf(()=>{c.g=null,c.i&&(c.i=!1,Nu(c))},c.l);const y=c.h;c.h=null,c.m.apply(null,y)}class mn extends D{constructor(y,_){super(),this.m=y,this.l=_,this.h=null,this.i=!1,this.g=null}j(y){this.h=arguments,this.g?this.i=!0:Nu(this)}N(){super.N(),this.g&&(f.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function xs(c){D.call(this),this.h=c,this.g={}}T(xs,D);var Uo=[];function zo(c){ue(c.g,function(y,_){this.g.hasOwnProperty(_)&&Ji(y)},c),c.g={}}xs.prototype.N=function(){xs.Z.N.call(this),zo(this)},xs.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Ir=f.JSON.stringify,Sf=f.JSON.parse,Ou=class{stringify(c){return f.JSON.stringify(c,void 0)}parse(c){return f.JSON.parse(c,void 0)}};function Mu(){}function Vu(){}var ri={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Xt(){R.call(this,"d")}T(Xt,R);function Fn(){R.call(this,"c")}T(Fn,R);var Tt={},ku=null;function va(){return ku=ku||new Rt}Tt.Ia="serverreachability";function Pu(c){R.call(this,Tt.Ia,c)}T(Pu,R);function bi(c){const y=va();Bt(y,new Pu(y))}Tt.STAT_EVENT="statevent";function Is(c,y){R.call(this,Tt.STAT_EVENT,c),this.stat=y}T(Is,R);function Ct(c){const y=va();Bt(y,new Is(y,c))}Tt.Ja="timingevent";function Si(c,y){R.call(this,Tt.Ja,c),this.size=y}T(Si,R);function Ai(c,y){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return f.setTimeout(function(){c()},y)}function si(){this.g=!0}si.prototype.ua=function(){this.g=!1};function Af(c,y,_,C,H,K){c.info(function(){if(c.g)if(K){var fe="",Me=K.split("&");for(let Je=0;Je<Me.length;Je++){var bt=Me[Je].split("=");if(bt.length>1){const dt=bt[0];bt=bt[1];const Yn=dt.split("_");fe=Yn.length>=2&&Yn[1]=="type"?fe+(dt+"="+bt+"&"):fe+(dt+"=redacted&")}}}else fe=null;else fe=K;return"XMLHTTP REQ ("+C+") [attempt "+H+"]: "+y+`
`+_+`
`+fe})}function Lu(c,y,_,C,H,K,fe){c.info(function(){return"XMLHTTP RESP ("+C+") [ attempt "+H+"]: "+y+`
`+_+`
`+K+" "+fe})}function wi(c,y,_,C){c.info(function(){return"XMLHTTP TEXT ("+y+"): "+wf(c,_)+(C?" "+C:"")})}function Ds(c,y){c.info(function(){return"TIMEOUT: "+y})}si.prototype.info=function(){};function wf(c,y){if(!c.g)return y;if(!y)return null;try{const K=JSON.parse(y);if(K){for(c=0;c<K.length;c++)if(Array.isArray(K[c])){var _=K[c];if(!(_.length<2)){var C=_[1];if(Array.isArray(C)&&!(C.length<1)){var H=C[0];if(H!="noop"&&H!="stop"&&H!="close")for(let fe=1;fe<C.length;fe++)C[fe]=""}}}}return Ir(K)}catch{return y}}var Ns={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Bo={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},qo;function Os(){}T(Os,Mu),Os.prototype.g=function(){return new XMLHttpRequest},qo=new Os;function Zi(c){return encodeURIComponent(String(c))}function ju(c){var y=1;c=c.split(":");const _=[];for(;y>0&&c.length;)_.push(c.shift()),y--;return c.length&&_.push(c.join(":")),_}function ai(c,y,_,C){this.j=c,this.i=y,this.l=_,this.S=C||1,this.V=new xs(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new oi}function oi(){this.i=null,this.g="",this.h=!1}var xt={},Ft={};function Ri(c,y,_){c.M=1,c.A=Ms(Dt(y)),c.u=_,c.R=!0,_a(c,null)}function _a(c,y){c.F=Date.now(),Ci(c),c.B=Dt(c.A);var _=c.B,C=c.S;Array.isArray(C)||(C=[String(C)]),Sa(_.i,"t",C),c.C=0,_=c.j.L,c.h=new oi,c.g=Zu(c.j,_?y:null,!c.u),c.P>0&&(c.O=new mn(p(c.Y,c,c.g),c.P)),y=c.V,_=c.g,C=c.ba;var H="readystatechange";Array.isArray(H)||(H&&(Uo[0]=H.toString()),H=Uo);for(let K=0;K<H.length;K++){const fe=Ye(_,H[K],C||y.handleEvent,!1,y.h||y);if(!fe)break;y.g[fe.key]=fe}y=c.J?k(c.J):{},c.u?(c.v||(c.v="POST"),y["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.B,c.v,c.u,y)):(c.v="GET",c.g.ea(c.B,c.v,null,y)),bi(),Af(c.i,c.v,c.B,c.l,c.S,c.u)}ai.prototype.ba=function(c){c=c.target;const y=this.O;y&&ci(c)==3?y.j():this.Y(c)},ai.prototype.Y=function(c){try{if(c==this.g)e:{const Me=ci(this.g),bt=this.g.ya(),Je=this.g.ca();if(!(Me<3)&&(Me!=3||this.g&&(this.h.h||this.g.la()||Wt(this.g)))){this.K||Me!=4||bt==7||(bt==8||Je<=0?bi(3):bi(2)),xi(this);var y=this.g.ca();this.X=y;var _=Rf(this);if(this.o=y==200,Lu(this.i,this.v,this.B,this.l,this.S,Me,y),this.o){if(this.U&&!this.L){t:{if(this.g){var C,H=this.g;if((C=H.g?H.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!A(C)){var K=C;break t}}K=null}if(c=K)wi(this.i,this.l,c,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Ii(this,c);else{this.o=!1,this.m=3,Ct(12),Dn(this),Gn(this);break e}}if(this.R){c=!0;let dt;for(;!this.K&&this.C<_.length;)if(dt=zu(this,_),dt==Ft){Me==4&&(this.m=4,Ct(14),c=!1),wi(this.i,this.l,null,"[Incomplete Response]");break}else if(dt==xt){this.m=4,Ct(15),wi(this.i,this.l,_,"[Invalid Chunk]"),c=!1;break}else wi(this.i,this.l,dt,null),Ii(this,dt);if(Uu(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Me!=4||_.length!=0||this.h.h||(this.m=1,Ct(16),c=!1),this.o=this.o&&c,!c)wi(this.i,this.l,_,"[Invalid Chunked Response]"),Dn(this),Gn(this);else if(_.length>0&&!this.W){this.W=!0;var fe=this.j;fe.g==this&&fe.aa&&!fe.P&&(fe.j.info("Great, no buffering proxy detected. Bytes received: "+_.length),il(fe),fe.P=!0,Ct(11))}}else wi(this.i,this.l,_,null),Ii(this,_);Me==4&&Dn(this),this.o&&!this.K&&(Me==4?Ku(this.j,this):(this.o=!1,Ci(this)))}else tr(this.g),y==400&&_.indexOf("Unknown SID")>0?(this.m=3,Ct(12)):(this.m=0,Ct(13)),Dn(this),Gn(this)}}}catch{}};function Rf(c){if(!Uu(c))return c.g.la();const y=Wt(c.g);if(y==="")return"";let _="";const C=y.length,H=ci(c.g)==4;if(!c.h.i){if(typeof TextDecoder>"u")return Dn(c),Gn(c),"";c.h.i=new f.TextDecoder}for(let K=0;K<C;K++)c.h.h=!0,_+=c.h.i.decode(y[K],{stream:!(H&&K==C-1)});return y.length=0,c.h.g+=_,c.C=0,c.h.g}function Uu(c){return c.g?c.v=="GET"&&c.M!=2&&c.j.Aa:!1}function zu(c,y){var _=c.C,C=y.indexOf(`
`,_);return C==-1?Ft:(_=Number(y.substring(_,C)),isNaN(_)?xt:(C+=1,C+_>y.length?Ft:(y=y.slice(C,C+_),c.C=C+_,y)))}ai.prototype.cancel=function(){this.K=!0,Dn(this)};function Ci(c){c.T=Date.now()+c.H,Ea(c,c.H)}function Ea(c,y){if(c.D!=null)throw Error("WatchDog timer not null");c.D=Ai(p(c.aa,c),y)}function xi(c){c.D&&(f.clearTimeout(c.D),c.D=null)}ai.prototype.aa=function(){this.D=null;const c=Date.now();c-this.T>=0?(Ds(this.i,this.B),this.M!=2&&(bi(),Ct(17)),Dn(this),this.m=2,Gn(this)):Ea(this,this.T-c)};function Gn(c){c.j.I==0||c.K||Ku(c.j,c)}function Dn(c){xi(c);var y=c.O;y&&typeof y.dispose=="function"&&y.dispose(),c.O=null,zo(c.V),c.g&&(y=c.g,c.g=null,y.abort(),y.dispose())}function Ii(c,y){try{var _=c.j;if(_.I!=0&&(_.g==c||Ni(_.h,c))){if(!c.L&&Ni(_.h,c)&&_.I==3){try{var C=_.Ba.g.parse(y)}catch{C=null}if(Array.isArray(C)&&C.length==3){var H=C;if(H[0]==0){e:if(!_.v){if(_.g)if(_.g.F+3e3<c.F)xa(_),Lr(_);else break e;zs(_),Ct(18)}}else _.xa=H[1],0<_.xa-_.K&&H[2]<37500&&_.F&&_.A==0&&!_.C&&(_.C=Ai(p(_.Va,_),6e3));Di(_.h)<=1&&_.ta&&(_.ta=void 0)}else Li(_,11)}else if((c.L||_.g==c)&&xa(_),!A(y))for(H=_.Ba.g.parse(y),y=0;y<H.length;y++){let Je=H[y];const dt=Je[0];if(!(dt<=_.K))if(_.K=dt,Je=Je[1],_.I==2)if(Je[0]=="c"){_.M=Je[1],_.ba=Je[2];const Yn=Je[3];Yn!=null&&(_.ka=Yn,_.j.info("VER="+_.ka));const ji=Je[4];ji!=null&&(_.za=ji,_.j.info("SVER="+_.za));const hi=Je[5];hi!=null&&typeof hi=="number"&&hi>0&&(C=1.5*hi,_.O=C,_.j.info("backChannelRequestTimeoutMs_="+C)),C=_;const fi=c.g;if(fi){const Bs=fi.g?fi.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Bs){var K=C.h;K.g||Bs.indexOf("spdy")==-1&&Bs.indexOf("quic")==-1&&Bs.indexOf("h2")==-1||(K.j=K.l,K.g=new Set,K.h&&(Go(K,K.h),K.h=null))}if(C.G){const Ia=fi.g?fi.g.getResponseHeader("X-HTTP-Session-Id"):null;Ia&&(C.wa=Ia,et(C.J,C.G,Ia))}}_.I=3,_.l&&_.l.ra(),_.aa&&(_.T=Date.now()-c.F,_.j.info("Handshake RTT: "+_.T+"ms")),C=_;var fe=c;if(C.na=Ju(C,C.L?C.ba:null,C.W),fe.L){$o(C.h,fe);var Me=fe,bt=C.O;bt&&(Me.H=bt),Me.D&&(xi(Me),Ci(Me)),C.g=fe}else Qu(C);_.i.length>0&&Pi(_)}else Je[0]!="stop"&&Je[0]!="close"||Li(_,7);else _.I==3&&(Je[0]=="stop"||Je[0]=="close"?Je[0]=="stop"?Li(_,7):tl(_):Je[0]!="noop"&&_.l&&_.l.qa(Je),_.A=0)}}bi(4)}catch{}}var It=class{constructor(c,y){this.g=c,this.map=y}};function Ho(c){this.l=c||10,f.PerformanceNavigationTiming?(c=f.performance.getEntriesByType("navigation"),c=c.length>0&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(f.chrome&&f.chrome.loadTimes&&f.chrome.loadTimes()&&f.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Fo(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function Di(c){return c.h?1:c.g?c.g.size:0}function Ni(c,y){return c.h?c.h==y:c.g?c.g.has(y):!1}function Go(c,y){c.g?c.g.add(y):c.h=y}function $o(c,y){c.h&&c.h==y?c.h=null:c.g&&c.g.has(y)&&c.g.delete(y)}Ho.prototype.cancel=function(){if(this.i=Qo(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const c of this.g.values())c.cancel();this.g.clear()}};function Qo(c){if(c.h!=null)return c.i.concat(c.h.G);if(c.g!=null&&c.g.size!==0){let y=c.i;for(const _ of c.g.values())y=y.concat(_.G);return y}return P(c.i)}var Bu=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ta(c,y){if(c){c=c.split("&");for(let _=0;_<c.length;_++){const C=c[_].indexOf("=");let H,K=null;C>=0?(H=c[_].substring(0,C),K=c[_].substring(C+1)):H=c[_],y(H,K?decodeURIComponent(K.replace(/\+/g," ")):"")}}}function Nn(c){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let y;c instanceof Nn?(this.l=c.l,Gt(this,c.j),this.o=c.o,this.g=c.g,Dr(this,c.u),this.h=c.h,Yo(this,Gu(c.i)),this.m=c.m):c&&(y=String(c).match(Bu))?(this.l=!1,Gt(this,y[1]||"",!0),this.o=Oi(y[2]||""),this.g=Oi(y[3]||"",!0),Dr(this,y[4]),this.h=Oi(y[5]||"",!0),Yo(this,y[6]||"",!0),this.m=Oi(y[7]||"")):(this.l=!1,this.i=new Or(null,this.l))}Nn.prototype.toString=function(){const c=[];var y=this.j;y&&c.push(Vs(y,ba,!0),":");var _=this.g;return(_||y=="file")&&(c.push("//"),(y=this.o)&&c.push(Vs(y,ba,!0),"@"),c.push(Zi(_).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),_=this.u,_!=null&&c.push(":",String(_))),(_=this.h)&&(this.g&&_.charAt(0)!="/"&&c.push("/"),c.push(Vs(_,_.charAt(0)=="/"?Ko:qu,!0))),(_=this.i.toString())&&c.push("?",_),(_=this.m)&&c.push("#",Vs(_,Hu)),c.join("")},Nn.prototype.resolve=function(c){const y=Dt(this);let _=!!c.j;_?Gt(y,c.j):_=!!c.o,_?y.o=c.o:_=!!c.g,_?y.g=c.g:_=c.u!=null;var C=c.h;if(_)Dr(y,c.u);else if(_=!!c.h){if(C.charAt(0)!="/")if(this.g&&!this.h)C="/"+C;else{var H=y.h.lastIndexOf("/");H!=-1&&(C=y.h.slice(0,H+1)+C)}if(H=C,H==".."||H==".")C="";else if(H.indexOf("./")!=-1||H.indexOf("/.")!=-1){C=H.lastIndexOf("/",0)==0,H=H.split("/");const K=[];for(let fe=0;fe<H.length;){const Me=H[fe++];Me=="."?C&&fe==H.length&&K.push(""):Me==".."?((K.length>1||K.length==1&&K[0]!="")&&K.pop(),C&&fe==H.length&&K.push("")):(K.push(Me),C=!0)}C=K.join("/")}else C=H}return _?y.h=C:_=c.i.toString()!=="",_?Yo(y,Gu(c.i)):_=!!c.m,_&&(y.m=c.m),y};function Dt(c){return new Nn(c)}function Gt(c,y,_){c.j=_?Oi(y,!0):y,c.j&&(c.j=c.j.replace(/:$/,""))}function Dr(c,y){if(y){if(y=Number(y),isNaN(y)||y<0)throw Error("Bad port number "+y);c.u=y}else c.u=null}function Yo(c,y,_){y instanceof Or?(c.i=y,Aa(c.i,c.l)):(_||(y=Vs(y,Nr)),c.i=new Or(y,c.l))}function et(c,y,_){c.i.set(y,_)}function Ms(c){return et(c,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),c}function Oi(c,y){return c?y?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function Vs(c,y,_){return typeof c=="string"?(c=encodeURI(c).replace(y,En),_&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function En(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var ba=/[#\/\?@]/g,qu=/[#\?:]/g,Ko=/[#\?]/g,Nr=/[#\?@]/g,Hu=/#/g;function Or(c,y){this.h=this.g=null,this.i=c||null,this.j=!!y}function Tn(c){c.g||(c.g=new Map,c.h=0,c.i&&Ta(c.i,function(y,_){c.add(decodeURIComponent(y.replace(/\+/g," ")),_)}))}r=Or.prototype,r.add=function(c,y){Tn(this),this.i=null,c=Mr(this,c);let _=this.g.get(c);return _||this.g.set(c,_=[]),_.push(y),this.h+=1,this};function Fu(c,y){Tn(c),y=Mr(c,y),c.g.has(y)&&(c.i=null,c.h-=c.g.get(y).length,c.g.delete(y))}function Xo(c,y){return Tn(c),y=Mr(c,y),c.g.has(y)}r.forEach=function(c,y){Tn(this),this.g.forEach(function(_,C){_.forEach(function(H){c.call(y,H,C,this)},this)},this)};function Wo(c,y){Tn(c);let _=[];if(typeof y=="string")Xo(c,y)&&(_=_.concat(c.g.get(Mr(c,y))));else for(c=Array.from(c.g.values()),y=0;y<c.length;y++)_=_.concat(c[y]);return _}r.set=function(c,y){return Tn(this),this.i=null,c=Mr(this,c),Xo(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[y]),this.h+=1,this},r.get=function(c,y){return c?(c=Wo(this,c),c.length>0?String(c[0]):y):y};function Sa(c,y,_){Fu(c,y),_.length>0&&(c.i=null,c.g.set(Mr(c,y),P(_)),c.h+=_.length)}r.toString=function(){if(this.i)return this.i;if(!this.g)return"";const c=[],y=Array.from(this.g.keys());for(let C=0;C<y.length;C++){var _=y[C];const H=Zi(_);_=Wo(this,_);for(let K=0;K<_.length;K++){let fe=H;_[K]!==""&&(fe+="="+Zi(_[K])),c.push(fe)}}return this.i=c.join("&")};function Gu(c){const y=new Or;return y.i=c.i,c.g&&(y.g=new Map(c.g),y.h=c.h),y}function Mr(c,y){return y=String(y),c.j&&(y=y.toLowerCase()),y}function Aa(c,y){y&&!c.j&&(Tn(c),c.i=null,c.g.forEach(function(_,C){const H=C.toLowerCase();C!=H&&(Fu(this,C),Sa(this,H,_))},c)),c.j=y}function li(c,y){const _=new si;if(f.Image){const C=new Image;C.onload=E($n,_,"TestLoadImage: loaded",!0,y,C),C.onerror=E($n,_,"TestLoadImage: error",!1,y,C),C.onabort=E($n,_,"TestLoadImage: abort",!1,y,C),C.ontimeout=E($n,_,"TestLoadImage: timeout",!1,y,C),f.setTimeout(function(){C.ontimeout&&C.ontimeout()},1e4),C.src=c}else y(!1)}function Jo(c,y){const _=new si,C=new AbortController,H=setTimeout(()=>{C.abort(),$n(_,"TestPingServer: timeout",!1,y)},1e4);fetch(c,{signal:C.signal}).then(K=>{clearTimeout(H),K.ok?$n(_,"TestPingServer: ok",!0,y):$n(_,"TestPingServer: server error",!1,y)}).catch(()=>{clearTimeout(H),$n(_,"TestPingServer: error",!1,y)})}function $n(c,y,_,C,H){try{H&&(H.onload=null,H.onerror=null,H.onabort=null,H.ontimeout=null),C(_)}catch{}}function Vr(){this.g=new Ou}function Mi(c){this.i=c.Sb||null,this.h=c.ab||!1}T(Mi,Mu),Mi.prototype.g=function(){return new ks(this.i,this.h)};function ks(c,y){Rt.call(this),this.H=c,this.o=y,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}T(ks,Rt),r=ks.prototype,r.open=function(c,y){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=c,this.D=y,this.readyState=1,ui(this)},r.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const y={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};c&&(y.body=c),(this.H||f).fetch(new Request(this.D,y)).then(this.Pa.bind(this),this.ga.bind(this))},r.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,kr(this)),this.readyState=0},r.Pa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,ui(this)),this.g&&(this.readyState=3,ui(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof f.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;wa(this)}else c.text().then(this.Oa.bind(this),this.ga.bind(this))};function wa(c){c.j.read().then(c.Ma.bind(c)).catch(c.ga.bind(c))}r.Ma=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var y=c.value?c.value:new Uint8Array(0);(y=this.B.decode(y,{stream:!c.done}))&&(this.response=this.responseText+=y)}c.done?kr(this):ui(this),this.readyState==3&&wa(this)}},r.Oa=function(c){this.g&&(this.response=this.responseText=c,kr(this))},r.Na=function(c){this.g&&(this.response=c,kr(this))},r.ga=function(){this.g&&kr(this)};function kr(c){c.readyState=4,c.l=null,c.j=null,c.B=null,ui(c)}r.setRequestHeader=function(c,y){this.A.append(c,y)},r.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},r.getAllResponseHeaders=function(){if(!this.h)return"";const c=[],y=this.h.entries();for(var _=y.next();!_.done;)_=_.value,c.push(_[0]+": "+_[1]),_=y.next();return c.join(`\r
`)};function ui(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(ks.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function Qn(c){let y="";return ue(c,function(_,C){y+=C,y+=":",y+=_,y+=`\r
`}),y}function Ps(c,y,_){e:{for(C in _){var C=!1;break e}C=!0}C||(_=Qn(_),typeof c=="string"?_!=null&&Zi(_):et(c,y,_))}function it(c){Rt.call(this),this.headers=new Map,this.L=c||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}T(it,Rt);var Vi=/^https?$/i,Zo=["POST","PUT"];r=it.prototype,r.Fa=function(c){this.H=c},r.ea=function(c,y,_,C){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);y=y?y.toUpperCase():"GET",this.D=c,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():qo.g(),this.g.onreadystatechange=I(p(this.Ca,this));try{this.B=!0,this.g.open(y,String(c),!0),this.B=!1}catch(K){Ls(this,K);return}if(c=_||"",_=new Map(this.headers),C)if(Object.getPrototypeOf(C)===Object.prototype)for(var H in C)_.set(H,C[H]);else if(typeof C.keys=="function"&&typeof C.get=="function")for(const K of C.keys())_.set(K,C.get(K));else throw Error("Unknown input type for opt_headers: "+String(C));C=Array.from(_.keys()).find(K=>K.toLowerCase()=="content-type"),H=f.FormData&&c instanceof f.FormData,!(Array.prototype.indexOf.call(Zo,y,void 0)>=0)||C||H||_.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[K,fe]of _)this.g.setRequestHeader(K,fe);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(c),this.v=!1}catch(K){Ls(this,K)}};function Ls(c,y){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=y,c.o=5,el(c),er(c)}function el(c){c.A||(c.A=!0,Bt(c,"complete"),Bt(c,"error"))}r.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=c||7,Bt(this,"complete"),Bt(this,"abort"),er(this))},r.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),er(this,!0)),it.Z.N.call(this)},r.Ca=function(){this.u||(this.B||this.v||this.j?js(this):this.Xa())},r.Xa=function(){js(this)};function js(c){if(c.h&&typeof u<"u"){if(c.v&&ci(c)==4)setTimeout(c.Ca.bind(c),0);else if(Bt(c,"readystatechange"),ci(c)==4){c.h=!1;try{const K=c.ca();e:switch(K){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var y=!0;break e;default:y=!1}var _;if(!(_=y)){var C;if(C=K===0){let fe=String(c.D).match(Bu)[1]||null;!fe&&f.self&&f.self.location&&(fe=f.self.location.protocol.slice(0,-1)),C=!Vi.test(fe?fe.toLowerCase():"")}_=C}if(_)Bt(c,"complete"),Bt(c,"success");else{c.o=6;try{var H=ci(c)>2?c.g.statusText:""}catch{H=""}c.l=H+" ["+c.ca()+"]",el(c)}}finally{er(c)}}}}function er(c,y){if(c.g){c.m&&(clearTimeout(c.m),c.m=null);const _=c.g;c.g=null,y||Bt(c,"ready");try{_.onreadystatechange=null}catch{}}}r.isActive=function(){return!!this.g};function ci(c){return c.g?c.g.readyState:0}r.ca=function(){try{return ci(this)>2?this.g.status:-1}catch{return-1}},r.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},r.La=function(c){if(this.g){var y=this.g.responseText;return c&&y.indexOf(c)==0&&(y=y.substring(c.length)),Sf(y)}};function Wt(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.F){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function tr(c){const y={};c=(c.g&&ci(c)>=2&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let C=0;C<c.length;C++){if(A(c[C]))continue;var _=ju(c[C]);const H=_[0];if(_=_[1],typeof _!="string")continue;_=_.trim();const K=y[H]||[];y[H]=K,K.push(_)}le(y,function(C){return C.join(", ")})}r.ya=function(){return this.o},r.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function ki(c,y,_){return _&&_.internalChannelParams&&_.internalChannelParams[c]||y}function Pr(c){this.za=0,this.i=[],this.j=new si,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=ki("failFast",!1,c),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=ki("baseRetryDelayMs",5e3,c),this.Za=ki("retryDelaySeedMs",1e4,c),this.Ta=ki("forwardChannelMaxRetries",2,c),this.va=ki("forwardChannelRequestTimeoutMs",2e4,c),this.ma=c&&c.xmlHttpFactory||void 0,this.Ua=c&&c.Rb||void 0,this.Aa=c&&c.useFetchStreams||!1,this.O=void 0,this.L=c&&c.supportsCrossDomainXhr||!1,this.M="",this.h=new Ho(c&&c.concurrentRequestLimit),this.Ba=new Vr,this.S=c&&c.fastHandshake||!1,this.R=c&&c.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=c&&c.Pb||!1,c&&c.ua&&this.j.ua(),c&&c.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&c&&c.detectBufferingProxy||!1,this.ia=void 0,c&&c.longPollingTimeout&&c.longPollingTimeout>0&&(this.ia=c.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}r=Pr.prototype,r.ka=8,r.I=1,r.connect=function(c,y,_,C){Ct(0),this.W=c,this.H=y||{},_&&C!==void 0&&(this.H.OSID=_,this.H.OAID=C),this.F=this.X,this.J=Ju(this,null,this.W),Pi(this)};function tl(c){if(Ra(c),c.I==3){var y=c.V++,_=Dt(c.J);if(et(_,"SID",c.M),et(_,"RID",y),et(_,"TYPE","terminate"),Us(c,_),y=new ai(c,c.j,y),y.M=2,y.A=Ms(Dt(_)),_=!1,f.navigator&&f.navigator.sendBeacon)try{_=f.navigator.sendBeacon(y.A.toString(),"")}catch{}!_&&f.Image&&(new Image().src=y.A,_=!0),_||(y.g=Zu(y.j,null),y.g.ea(y.A)),y.F=Date.now(),Ci(y)}Wu(c)}function Lr(c){c.g&&(il(c),c.g.cancel(),c.g=null)}function Ra(c){Lr(c),c.v&&(f.clearTimeout(c.v),c.v=null),xa(c),c.h.cancel(),c.m&&(typeof c.m=="number"&&f.clearTimeout(c.m),c.m=null)}function Pi(c){if(!Fo(c.h)&&!c.m){c.m=!0;var y=c.Ea;_e||x(),Ee||(_e(),Ee=!0),O.add(y,c),c.D=0}}function Ca(c,y){return Di(c.h)>=c.h.j-(c.m?1:0)?!1:c.m?(c.i=y.G.concat(c.i),!0):c.I==1||c.I==2||c.D>=(c.Sa?0:c.Ta)?!1:(c.m=Ai(p(c.Ea,c,y),Xu(c,c.D)),c.D++,!0)}r.Ea=function(c){if(this.m)if(this.m=null,this.I==1){if(!c){this.V=Math.floor(Math.random()*1e5),c=this.V++;const H=new ai(this,this.j,c);let K=this.o;if(this.U&&(K?(K=k(K),ce(K,this.U)):K=this.U),this.u!==null||this.R||(H.J=K,K=null),this.S)e:{for(var y=0,_=0;_<this.i.length;_++){t:{var C=this.i[_];if("__data__"in C.map&&(C=C.map.__data__,typeof C=="string")){C=C.length;break t}C=void 0}if(C===void 0)break;if(y+=C,y>4096){y=_;break e}if(y===4096||_===this.i.length-1){y=_+1;break e}}y=1e3}else y=1e3;y=$u(this,H,y),_=Dt(this.J),et(_,"RID",c),et(_,"CVER",22),this.G&&et(_,"X-HTTP-Session-Id",this.G),Us(this,_),K&&(this.R?y="headers="+Zi(Qn(K))+"&"+y:this.u&&Ps(_,this.u,K)),Go(this.h,H),this.Ra&&et(_,"TYPE","init"),this.S?(et(_,"$req",y),et(_,"SID","null"),H.U=!0,Ri(H,_,null)):Ri(H,_,y),this.I=2}}else this.I==3&&(c?nl(this,c):this.i.length==0||Fo(this.h)||nl(this))};function nl(c,y){var _;y?_=y.l:_=c.V++;const C=Dt(c.J);et(C,"SID",c.M),et(C,"RID",_),et(C,"AID",c.K),Us(c,C),c.u&&c.o&&Ps(C,c.u,c.o),_=new ai(c,c.j,_,c.D+1),c.u===null&&(_.J=c.o),y&&(c.i=y.G.concat(c.i)),y=$u(c,_,1e3),_.H=Math.round(c.va*.5)+Math.round(c.va*.5*Math.random()),Go(c.h,_),Ri(_,C,y)}function Us(c,y){c.H&&ue(c.H,function(_,C){et(y,C,_)}),c.l&&ue({},function(_,C){et(y,C,_)})}function $u(c,y,_){_=Math.min(c.i.length,_);const C=c.l?p(c.l.Ka,c.l,c):null;e:{var H=c.i;let Me=-1;for(;;){const bt=["count="+_];Me==-1?_>0?(Me=H[0].g,bt.push("ofs="+Me)):Me=0:bt.push("ofs="+Me);let Je=!0;for(let dt=0;dt<_;dt++){var K=H[dt].g;const Yn=H[dt].map;if(K-=Me,K<0)Me=Math.max(0,H[dt].g-100),Je=!1;else try{K="req"+K+"_"||"";try{var fe=Yn instanceof Map?Yn:Object.entries(Yn);for(const[ji,hi]of fe){let fi=hi;m(hi)&&(fi=Ir(hi)),bt.push(K+ji+"="+encodeURIComponent(fi))}}catch(ji){throw bt.push(K+"type="+encodeURIComponent("_badmap")),ji}}catch{C&&C(Yn)}}if(Je){fe=bt.join("&");break e}}fe=void 0}return c=c.i.splice(0,_),y.G=c,fe}function Qu(c){if(!c.g&&!c.v){c.Y=1;var y=c.Da;_e||x(),Ee||(_e(),Ee=!0),O.add(y,c),c.A=0}}function zs(c){return c.g||c.v||c.A>=3?!1:(c.Y++,c.v=Ai(p(c.Da,c),Xu(c,c.A)),c.A++,!0)}r.Da=function(){if(this.v=null,Yu(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var c=4*this.T;this.j.info("BP detection timer enabled: "+c),this.B=Ai(p(this.Wa,this),c)}},r.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Ct(10),Lr(this),Yu(this))};function il(c){c.B!=null&&(f.clearTimeout(c.B),c.B=null)}function Yu(c){c.g=new ai(c,c.j,"rpc",c.Y),c.u===null&&(c.g.J=c.o),c.g.P=0;var y=Dt(c.na);et(y,"RID","rpc"),et(y,"SID",c.M),et(y,"AID",c.K),et(y,"CI",c.F?"0":"1"),!c.F&&c.ia&&et(y,"TO",c.ia),et(y,"TYPE","xmlhttp"),Us(c,y),c.u&&c.o&&Ps(y,c.u,c.o),c.O&&(c.g.H=c.O);var _=c.g;c=c.ba,_.M=1,_.A=Ms(Dt(y)),_.u=null,_.R=!0,_a(_,c)}r.Va=function(){this.C!=null&&(this.C=null,Lr(this),zs(this),Ct(19))};function xa(c){c.C!=null&&(f.clearTimeout(c.C),c.C=null)}function Ku(c,y){var _=null;if(c.g==y){xa(c),il(c),c.g=null;var C=2}else if(Ni(c.h,y))_=y.G,$o(c.h,y),C=1;else return;if(c.I!=0){if(y.o)if(C==1){_=y.u?y.u.length:0,y=Date.now()-y.F;var H=c.D;C=va(),Bt(C,new Si(C,_)),Pi(c)}else Qu(c);else if(H=y.m,H==3||H==0&&y.X>0||!(C==1&&Ca(c,y)||C==2&&zs(c)))switch(_&&_.length>0&&(y=c.h,y.i=y.i.concat(_)),H){case 1:Li(c,5);break;case 4:Li(c,10);break;case 3:Li(c,6);break;default:Li(c,2)}}}function Xu(c,y){let _=c.Qa+Math.floor(Math.random()*c.Za);return c.isActive()||(_*=2),_*y}function Li(c,y){if(c.j.info("Error code "+y),y==2){var _=p(c.bb,c),C=c.Ua;const H=!C;C=new Nn(C||"//www.google.com/images/cleardot.gif"),f.location&&f.location.protocol=="http"||Gt(C,"https"),Ms(C),H?li(C.toString(),_):Jo(C.toString(),_)}else Ct(2);c.I=0,c.l&&c.l.pa(y),Wu(c),Ra(c)}r.bb=function(c){c?(this.j.info("Successfully pinged google.com"),Ct(2)):(this.j.info("Failed to ping google.com"),Ct(1))};function Wu(c){if(c.I=0,c.ja=[],c.l){const y=Qo(c.h);(y.length!=0||c.i.length!=0)&&(j(c.ja,y),j(c.ja,c.i),c.h.i.length=0,P(c.i),c.i.length=0),c.l.oa()}}function Ju(c,y,_){var C=_ instanceof Nn?Dt(_):new Nn(_);if(C.g!="")y&&(C.g=y+"."+C.g),Dr(C,C.u);else{var H=f.location;C=H.protocol,y=y?y+"."+H.hostname:H.hostname,H=+H.port;const K=new Nn(null);C&&Gt(K,C),y&&(K.g=y),H&&Dr(K,H),_&&(K.h=_),C=K}return _=c.G,y=c.wa,_&&y&&et(C,_,y),et(C,"VER",c.ka),Us(c,C),C}function Zu(c,y,_){if(y&&!c.L)throw Error("Can't create secondary domain capable XhrIo object.");return y=c.Aa&&!c.ma?new it(new Mi({ab:_})):new it(c.ma),y.Fa(c.L),y}r.isActive=function(){return!!this.l&&this.l.isActive(this)};function ec(){}r=ec.prototype,r.ra=function(){},r.qa=function(){},r.pa=function(){},r.oa=function(){},r.isActive=function(){return!0},r.Ka=function(){};function jr(){}jr.prototype.g=function(c,y){return new gn(c,y)};function gn(c,y){Rt.call(this),this.g=new Pr(y),this.l=c,this.h=y&&y.messageUrlParams||null,c=y&&y.messageHeaders||null,y&&y.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=y&&y.initMessageHeaders||null,y&&y.messageContentType&&(c?c["X-WebChannel-Content-Type"]=y.messageContentType:c={"X-WebChannel-Content-Type":y.messageContentType}),y&&y.sa&&(c?c["X-WebChannel-Client-Profile"]=y.sa:c={"X-WebChannel-Client-Profile":y.sa}),this.g.U=c,(c=y&&y.Qb)&&!A(c)&&(this.g.u=c),this.A=y&&y.supportsCrossDomainXhr||!1,this.v=y&&y.sendRawJson||!1,(y=y&&y.httpSessionIdParam)&&!A(y)&&(this.g.G=y,c=this.h,c!==null&&y in c&&(c=this.h,y in c&&delete c[y])),this.j=new nr(this)}T(gn,Rt),gn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},gn.prototype.close=function(){tl(this.g)},gn.prototype.o=function(c){var y=this.g;if(typeof c=="string"){var _={};_.__data__=c,c=_}else this.v&&(_={},_.__data__=Ir(c),c=_);y.i.push(new It(y.Ya++,c)),y.I==3&&Pi(y)},gn.prototype.N=function(){this.g.l=null,delete this.j,tl(this.g),delete this.g,gn.Z.N.call(this)};function tc(c){Xt.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var y=c.__sm__;if(y){e:{for(const _ in y){c=_;break e}c=void 0}(this.i=c)&&(c=this.i,y=y!==null&&c in y?y[c]:void 0),this.data=y}else this.data=c}T(tc,Xt);function nc(){Fn.call(this),this.status=1}T(nc,Fn);function nr(c){this.g=c}T(nr,ec),nr.prototype.ra=function(){Bt(this.g,"a")},nr.prototype.qa=function(c){Bt(this.g,new tc(c))},nr.prototype.pa=function(c){Bt(this.g,new nc)},nr.prototype.oa=function(){Bt(this.g,"b")},jr.prototype.createWebChannel=jr.prototype.g,gn.prototype.send=gn.prototype.o,gn.prototype.open=gn.prototype.m,gn.prototype.close=gn.prototype.close,XT=function(){return new jr},KT=function(){return va()},YT=Tt,eg={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Ns.NO_ERROR=0,Ns.TIMEOUT=8,Ns.HTTP_ERROR=6,Eh=Ns,Bo.COMPLETE="complete",QT=Bo,Vu.EventType=ri,ri.OPEN="a",ri.CLOSE="b",ri.ERROR="c",ri.MESSAGE="d",Rt.prototype.listen=Rt.prototype.J,Hl=Vu,it.prototype.listenOnce=it.prototype.K,it.prototype.getLastError=it.prototype.Ha,it.prototype.getLastErrorCode=it.prototype.ya,it.prototype.getStatus=it.prototype.ca,it.prototype.getResponseJson=it.prototype.La,it.prototype.getResponseText=it.prototype.la,it.prototype.send=it.prototype.ea,it.prototype.setWithCredentials=it.prototype.Fa,$T=it}).apply(typeof lh<"u"?lh:typeof self<"u"?self:typeof window<"u"?window:{});const P0="@firebase/firestore",L0="4.9.3";class hn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}hn.UNAUTHENTICATED=new hn(null),hn.GOOGLE_CREDENTIALS=new hn("google-credentials-uid"),hn.FIRST_PARTY=new hn("first-party-uid"),hn.MOCK_USER=new hn("mock-user");let Mo="12.7.0";const fa=new Rg("@firebase/firestore");function ao(){return fa.logLevel}function pe(r,...e){if(fa.logLevel<=Be.DEBUG){const n=e.map(Ug);fa.debug(`Firestore (${Mo}): ${r}`,...n)}}function wr(r,...e){if(fa.logLevel<=Be.ERROR){const n=e.map(Ug);fa.error(`Firestore (${Mo}): ${r}`,...n)}}function _o(r,...e){if(fa.logLevel<=Be.WARN){const n=e.map(Ug);fa.warn(`Firestore (${Mo}): ${r}`,...n)}}function Ug(r){if(typeof r=="string")return r;try{return(function(n){return JSON.stringify(n)})(r)}catch{return r}}function Ae(r,e,n){let s="Unexpected state";typeof e=="string"?s=e:n=e,WT(r,s,n)}function WT(r,e,n){let s=`FIRESTORE (${Mo}) INTERNAL ASSERTION FAILED: ${e} (ID: ${r.toString(16)})`;if(n!==void 0)try{s+=" CONTEXT: "+JSON.stringify(n)}catch{s+=" CONTEXT: "+n}throw wr(s),new Error(s)}function Qe(r,e,n,s){let o="Unexpected state";typeof n=="string"?o=n:s=n,r||WT(e,o,s)}function De(r,e){return r}const ne={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class me extends Cr{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Gi{constructor(){this.promise=new Promise(((e,n)=>{this.resolve=e,this.reject=n}))}}class JT{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class M2{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable((()=>n(hn.UNAUTHENTICATED)))}shutdown(){}}class V2{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class k2{constructor(e){this.t=e,this.currentUser=hn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Qe(this.o===void 0,42304);let s=this.i;const o=g=>this.i!==s?(s=this.i,n(g)):Promise.resolve();let u=new Gi;this.o=()=>{this.i++,this.currentUser=this.u(),u.resolve(),u=new Gi,e.enqueueRetryable((()=>o(this.currentUser)))};const f=()=>{const g=u;e.enqueueRetryable((async()=>{await g.promise,await o(this.currentUser)}))},m=g=>{pe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=g,this.o&&(this.auth.addAuthTokenListener(this.o),f())};this.t.onInit((g=>m(g))),setTimeout((()=>{if(!this.auth){const g=this.t.getImmediate({optional:!0});g?m(g):(pe("FirebaseAuthCredentialsProvider","Auth not yet detected"),u.resolve(),u=new Gi)}}),0),f()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((s=>this.i!==e?(pe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(Qe(typeof s.accessToken=="string",31837,{l:s}),new JT(s.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Qe(e===null||typeof e=="string",2055,{h:e}),new hn(e)}}class P2{constructor(e,n,s){this.P=e,this.T=n,this.I=s,this.type="FirstParty",this.user=hn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class L2{constructor(e,n,s){this.P=e,this.T=n,this.I=s}getToken(){return Promise.resolve(new P2(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable((()=>n(hn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class j0{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class j2{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,pi(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){Qe(this.o===void 0,3512);const s=u=>{u.error!=null&&pe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const f=u.token!==this.m;return this.m=u.token,pe("FirebaseAppCheckTokenProvider",`Received ${f?"new":"existing"} token.`),f?n(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable((()=>s(u)))};const o=u=>{pe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((u=>o(u))),setTimeout((()=>{if(!this.appCheck){const u=this.V.getImmediate({optional:!0});u?o(u):pe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new j0(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((n=>n?(Qe(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new j0(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function U2(r){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(r);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let s=0;s<r;s++)n[s]=Math.floor(256*Math.random());return n}class zg{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const o=U2(40);for(let u=0;u<o.length;++u)s.length<20&&o[u]<n&&(s+=e.charAt(o[u]%62))}return s}}function qe(r,e){return r<e?-1:r>e?1:0}function tg(r,e){const n=Math.min(r.length,e.length);for(let s=0;s<n;s++){const o=r.charAt(s),u=e.charAt(s);if(o!==u)return Pm(o)===Pm(u)?qe(o,u):Pm(o)?1:-1}return qe(r.length,e.length)}const z2=55296,B2=57343;function Pm(r){const e=r.charCodeAt(0);return e>=z2&&e<=B2}function Eo(r,e,n){return r.length===e.length&&r.every(((s,o)=>n(s,e[o])))}const U0="__name__";class Hi{constructor(e,n,s){n===void 0?n=0:n>e.length&&Ae(637,{offset:n,range:e.length}),s===void 0?s=e.length-n:s>e.length-n&&Ae(1746,{length:s,range:e.length-n}),this.segments=e,this.offset=n,this.len=s}get length(){return this.len}isEqual(e){return Hi.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Hi?e.forEach((s=>{n.push(s)})):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,s=this.limit();n<s;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const s=Math.min(e.length,n.length);for(let o=0;o<s;o++){const u=Hi.compareSegments(e.get(o),n.get(o));if(u!==0)return u}return qe(e.length,n.length)}static compareSegments(e,n){const s=Hi.isNumericId(e),o=Hi.isNumericId(n);return s&&!o?-1:!s&&o?1:s&&o?Hi.extractNumericId(e).compare(Hi.extractNumericId(n)):tg(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return gs.fromString(e.substring(4,e.length-2))}}class lt extends Hi{construct(e,n,s){return new lt(e,n,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const s of e){if(s.indexOf("//")>=0)throw new me(ne.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);n.push(...s.split("/").filter((o=>o.length>0)))}return new lt(n)}static emptyPath(){return new lt([])}}const q2=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class rn extends Hi{construct(e,n,s){return new rn(e,n,s)}static isValidIdentifier(e){return q2.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),rn.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===U0}static keyField(){return new rn([U0])}static fromServerFormat(e){const n=[];let s="",o=0;const u=()=>{if(s.length===0)throw new me(ne.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(s),s=""};let f=!1;for(;o<e.length;){const m=e[o];if(m==="\\"){if(o+1===e.length)throw new me(ne.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const g=e[o+1];if(g!=="\\"&&g!=="."&&g!=="`")throw new me(ne.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=g,o+=2}else m==="`"?(f=!f,o++):m!=="."||f?(s+=m,o++):(u(),o++)}if(u(),f)throw new me(ne.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new rn(n)}static emptyPath(){return new rn([])}}class Te{constructor(e){this.path=e}static fromPath(e){return new Te(lt.fromString(e))}static fromName(e){return new Te(lt.fromString(e).popFirst(5))}static empty(){return new Te(lt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&lt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return lt.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Te(new lt(e.slice()))}}function ZT(r,e,n){if(!n)throw new me(ne.INVALID_ARGUMENT,`Function ${r}() cannot be called with an empty ${e}.`)}function H2(r,e,n,s){if(e===!0&&s===!0)throw new me(ne.INVALID_ARGUMENT,`${r} and ${n} cannot be used together.`)}function z0(r){if(!Te.isDocumentKey(r))throw new me(ne.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${r} has ${r.length}.`)}function B0(r){if(Te.isDocumentKey(r))throw new me(ne.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${r} has ${r.length}.`)}function eb(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}function tf(r){if(r===void 0)return"undefined";if(r===null)return"null";if(typeof r=="string")return r.length>20&&(r=`${r.substring(0,20)}...`),JSON.stringify(r);if(typeof r=="number"||typeof r=="boolean")return""+r;if(typeof r=="object"){if(r instanceof Array)return"an array";{const e=(function(s){return s.constructor?s.constructor.name:null})(r);return e?`a custom ${e} object`:"an object"}}return typeof r=="function"?"a function":Ae(12329,{type:typeof r})}function _n(r,e){if("_delegate"in r&&(r=r._delegate),!(r instanceof e)){if(e.name===r.constructor.name)throw new me(ne.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=tf(r);throw new me(ne.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return r}function Ut(r,e){const n={typeString:r};return e&&(n.value=e),n}function vu(r,e){if(!eb(r))throw new me(ne.INVALID_ARGUMENT,"JSON must be an object");let n;for(const s in e)if(e[s]){const o=e[s].typeString,u="value"in e[s]?{value:e[s].value}:void 0;if(!(s in r)){n=`JSON missing required field: '${s}'`;break}const f=r[s];if(o&&typeof f!==o){n=`JSON field '${s}' must be a ${o}.`;break}if(u!==void 0&&f!==u.value){n=`Expected '${s}' field to equal '${u.value}'`;break}}if(n)throw new me(ne.INVALID_ARGUMENT,n);return!0}const q0=-62135596800,H0=1e6;class ft{static now(){return ft.fromMillis(Date.now())}static fromDate(e){return ft.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),s=Math.floor((e-1e3*n)*H0);return new ft(n,s)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new me(ne.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new me(ne.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<q0)throw new me(ne.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new me(ne.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/H0}_compareTo(e){return this.seconds===e.seconds?qe(this.nanoseconds,e.nanoseconds):qe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:ft._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(vu(e,ft._jsonSchema))return new ft(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-q0;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}ft._jsonSchemaVersion="firestore/timestamp/1.0",ft._jsonSchema={type:Ut("string",ft._jsonSchemaVersion),seconds:Ut("number"),nanoseconds:Ut("number")};class xe{static fromTimestamp(e){return new xe(e)}static min(){return new xe(new ft(0,0))}static max(){return new xe(new ft(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const iu=-1;function F2(r,e){const n=r.toTimestamp().seconds,s=r.toTimestamp().nanoseconds+1,o=xe.fromTimestamp(s===1e9?new ft(n+1,0):new ft(n,s));return new _s(o,Te.empty(),e)}function G2(r){return new _s(r.readTime,r.key,iu)}class _s{constructor(e,n,s){this.readTime=e,this.documentKey=n,this.largestBatchId=s}static min(){return new _s(xe.min(),Te.empty(),iu)}static max(){return new _s(xe.max(),Te.empty(),iu)}}function $2(r,e){let n=r.readTime.compareTo(e.readTime);return n!==0?n:(n=Te.comparator(r.documentKey,e.documentKey),n!==0?n:qe(r.largestBatchId,e.largestBatchId))}const Q2="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Y2{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function Vo(r){if(r.code!==ne.FAILED_PRECONDITION||r.message!==Q2)throw r;pe("LocalStore","Unexpectedly lost primary lease")}class se{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Ae(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new se(((s,o)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(s,o)},this.catchCallback=u=>{this.wrapFailure(n,u).next(s,o)}}))}toPromise(){return new Promise(((e,n)=>{this.next(e,n)}))}wrapUserFunction(e){try{const n=e();return n instanceof se?n:se.resolve(n)}catch(n){return se.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction((()=>e(n))):se.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction((()=>e(n))):se.reject(n)}static resolve(e){return new se(((n,s)=>{n(e)}))}static reject(e){return new se(((n,s)=>{s(e)}))}static waitFor(e){return new se(((n,s)=>{let o=0,u=0,f=!1;e.forEach((m=>{++o,m.next((()=>{++u,f&&u===o&&n()}),(g=>s(g)))})),f=!0,u===o&&n()}))}static or(e){let n=se.resolve(!1);for(const s of e)n=n.next((o=>o?se.resolve(o):s()));return n}static forEach(e,n){const s=[];return e.forEach(((o,u)=>{s.push(n.call(this,o,u))})),this.waitFor(s)}static mapArray(e,n){return new se(((s,o)=>{const u=e.length,f=new Array(u);let m=0;for(let g=0;g<u;g++){const p=g;n(e[p]).next((E=>{f[p]=E,++m,m===u&&s(f)}),(E=>o(E)))}}))}static doWhile(e,n){return new se(((s,o)=>{const u=()=>{e()===!0?n().next((()=>{u()}),o):s()};u()}))}}function K2(r){const e=r.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function ko(r){return r.name==="IndexedDbTransactionError"}class nf{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=s=>this.ae(s),this.ue=s=>n.writeSequenceNumber(s))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}nf.ce=-1;const Bg=-1;function _u(r){return r==null}function Ph(r){return r===0&&1/r==-1/0}function X2(r){return typeof r=="number"&&Number.isInteger(r)&&!Ph(r)&&r<=Number.MAX_SAFE_INTEGER&&r>=Number.MIN_SAFE_INTEGER}const tb="";function W2(r){let e="";for(let n=0;n<r.length;n++)e.length>0&&(e=F0(e)),e=J2(r.get(n),e);return F0(e)}function J2(r,e){let n=e;const s=r.length;for(let o=0;o<s;o++){const u=r.charAt(o);switch(u){case"\0":n+="";break;case tb:n+="";break;default:n+=u}}return n}function F0(r){return r+tb+""}function G0(r){let e=0;for(const n in r)Object.prototype.hasOwnProperty.call(r,n)&&e++;return e}function Rs(r,e){for(const n in r)Object.prototype.hasOwnProperty.call(r,n)&&e(n,r[n])}function nb(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}class yt{constructor(e,n){this.comparator=e,this.root=n||nn.EMPTY}insert(e,n){return new yt(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,nn.BLACK,null,null))}remove(e){return new yt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,nn.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const s=this.comparator(e,n.key);if(s===0)return n.value;s<0?n=n.left:s>0&&(n=n.right)}return null}indexOf(e){let n=0,s=this.root;for(;!s.isEmpty();){const o=this.comparator(e,s.key);if(o===0)return n+s.left.size;o<0?s=s.left:(n+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((n,s)=>(e(n,s),!1)))}toString(){const e=[];return this.inorderTraversal(((n,s)=>(e.push(`${n}:${s}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new uh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new uh(this.root,e,this.comparator,!1)}getReverseIterator(){return new uh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new uh(this.root,e,this.comparator,!0)}}class uh{constructor(e,n,s,o){this.isReverse=o,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=n?s(e.key,n):1,n&&o&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(u===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class nn{constructor(e,n,s,o,u){this.key=e,this.value=n,this.color=s??nn.RED,this.left=o??nn.EMPTY,this.right=u??nn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,s,o,u){return new nn(e??this.key,n??this.value,s??this.color,o??this.left,u??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,s){let o=this;const u=s(e,o.key);return o=u<0?o.copy(null,null,null,o.left.insert(e,n,s),null):u===0?o.copy(null,n,null,null,null):o.copy(null,null,null,null,o.right.insert(e,n,s)),o.fixUp()}removeMin(){if(this.left.isEmpty())return nn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let s,o=this;if(n(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,n),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),n(e,o.key)===0){if(o.right.isEmpty())return nn.EMPTY;s=o.right.min(),o=o.copy(s.key,s.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,n))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,nn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,nn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ae(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Ae(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Ae(27949);return e+(this.isRed()?0:1)}}nn.EMPTY=null,nn.RED=!0,nn.BLACK=!1;nn.EMPTY=new class{constructor(){this.size=0}get key(){throw Ae(57766)}get value(){throw Ae(16141)}get color(){throw Ae(16727)}get left(){throw Ae(29726)}get right(){throw Ae(36894)}copy(e,n,s,o,u){return this}insert(e,n,s){return new nn(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Ht{constructor(e){this.comparator=e,this.data=new yt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((n,s)=>(e(n),!1)))}forEachInRange(e,n){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const o=s.getNext();if(this.comparator(o.key,e[1])>=0)return;n(o.key)}}forEachWhile(e,n){let s;for(s=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new $0(this.data.getIterator())}getIteratorFrom(e){return new $0(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach((s=>{n=n.add(s)})),n}isEqual(e){if(!(e instanceof Ht)||this.size!==e.size)return!1;const n=this.data.getIterator(),s=e.data.getIterator();for(;n.hasNext();){const o=n.getNext().key,u=s.getNext().key;if(this.comparator(o,u)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((n=>{e.push(n)})),e}toString(){const e=[];return this.forEach((n=>e.push(n))),"SortedSet("+e.toString()+")"}copy(e){const n=new Ht(this.comparator);return n.data=e,n}}class $0{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class Bn{constructor(e){this.fields=e,e.sort(rn.comparator)}static empty(){return new Bn([])}unionWith(e){let n=new Ht(rn.comparator);for(const s of this.fields)n=n.add(s);for(const s of e)n=n.add(s);return new Bn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Eo(this.fields,e.fields,((n,s)=>n.isEqual(s)))}}class ib extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class an{constructor(e){this.binaryString=e}static fromBase64String(e){const n=(function(o){try{return atob(o)}catch(u){throw typeof DOMException<"u"&&u instanceof DOMException?new ib("Invalid base64 string: "+u):u}})(e);return new an(n)}static fromUint8Array(e){const n=(function(o){let u="";for(let f=0;f<o.length;++f)u+=String.fromCharCode(o[f]);return u})(e);return new an(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const s=new Uint8Array(n.length);for(let o=0;o<n.length;o++)s[o]=n.charCodeAt(o);return s})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return qe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}an.EMPTY_BYTE_STRING=new an("");const Z2=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Es(r){if(Qe(!!r,39018),typeof r=="string"){let e=0;const n=Z2.exec(r);if(Qe(!!n,46558,{timestamp:r}),n[1]){let o=n[1];o=(o+"000000000").substr(0,9),e=Number(o)}const s=new Date(r);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:wt(r.seconds),nanos:wt(r.nanos)}}function wt(r){return typeof r=="number"?r:typeof r=="string"?Number(r):0}function Ts(r){return typeof r=="string"?an.fromBase64String(r):an.fromUint8Array(r)}const rb="server_timestamp",sb="__type__",ab="__previous_value__",ob="__local_write_time__";function qg(r){return(r?.mapValue?.fields||{})[sb]?.stringValue===rb}function rf(r){const e=r.mapValue.fields[ab];return qg(e)?rf(e):e}function ru(r){const e=Es(r.mapValue.fields[ob].timestampValue);return new ft(e.seconds,e.nanos)}class eI{constructor(e,n,s,o,u,f,m,g,p,E){this.databaseId=e,this.appId=n,this.persistenceKey=s,this.host=o,this.ssl=u,this.forceLongPolling=f,this.autoDetectLongPolling=m,this.longPollingOptions=g,this.useFetchStreams=p,this.isUsingEmulator=E}}const Lh="(default)";class su{constructor(e,n){this.projectId=e,this.database=n||Lh}static empty(){return new su("","")}get isDefaultDatabase(){return this.database===Lh}isEqual(e){return e instanceof su&&e.projectId===this.projectId&&e.database===this.database}}const lb="__type__",tI="__max__",ch={mapValue:{}},ub="__vector__",jh="value";function bs(r){return"nullValue"in r?0:"booleanValue"in r?1:"integerValue"in r||"doubleValue"in r?2:"timestampValue"in r?3:"stringValue"in r?5:"bytesValue"in r?6:"referenceValue"in r?7:"geoPointValue"in r?8:"arrayValue"in r?9:"mapValue"in r?qg(r)?4:iI(r)?9007199254740991:nI(r)?10:11:Ae(28295,{value:r})}function Xi(r,e){if(r===e)return!0;const n=bs(r);if(n!==bs(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return r.booleanValue===e.booleanValue;case 4:return ru(r).isEqual(ru(e));case 3:return(function(o,u){if(typeof o.timestampValue=="string"&&typeof u.timestampValue=="string"&&o.timestampValue.length===u.timestampValue.length)return o.timestampValue===u.timestampValue;const f=Es(o.timestampValue),m=Es(u.timestampValue);return f.seconds===m.seconds&&f.nanos===m.nanos})(r,e);case 5:return r.stringValue===e.stringValue;case 6:return(function(o,u){return Ts(o.bytesValue).isEqual(Ts(u.bytesValue))})(r,e);case 7:return r.referenceValue===e.referenceValue;case 8:return(function(o,u){return wt(o.geoPointValue.latitude)===wt(u.geoPointValue.latitude)&&wt(o.geoPointValue.longitude)===wt(u.geoPointValue.longitude)})(r,e);case 2:return(function(o,u){if("integerValue"in o&&"integerValue"in u)return wt(o.integerValue)===wt(u.integerValue);if("doubleValue"in o&&"doubleValue"in u){const f=wt(o.doubleValue),m=wt(u.doubleValue);return f===m?Ph(f)===Ph(m):isNaN(f)&&isNaN(m)}return!1})(r,e);case 9:return Eo(r.arrayValue.values||[],e.arrayValue.values||[],Xi);case 10:case 11:return(function(o,u){const f=o.mapValue.fields||{},m=u.mapValue.fields||{};if(G0(f)!==G0(m))return!1;for(const g in f)if(f.hasOwnProperty(g)&&(m[g]===void 0||!Xi(f[g],m[g])))return!1;return!0})(r,e);default:return Ae(52216,{left:r})}}function au(r,e){return(r.values||[]).find((n=>Xi(n,e)))!==void 0}function To(r,e){if(r===e)return 0;const n=bs(r),s=bs(e);if(n!==s)return qe(n,s);switch(n){case 0:case 9007199254740991:return 0;case 1:return qe(r.booleanValue,e.booleanValue);case 2:return(function(u,f){const m=wt(u.integerValue||u.doubleValue),g=wt(f.integerValue||f.doubleValue);return m<g?-1:m>g?1:m===g?0:isNaN(m)?isNaN(g)?0:-1:1})(r,e);case 3:return Q0(r.timestampValue,e.timestampValue);case 4:return Q0(ru(r),ru(e));case 5:return tg(r.stringValue,e.stringValue);case 6:return(function(u,f){const m=Ts(u),g=Ts(f);return m.compareTo(g)})(r.bytesValue,e.bytesValue);case 7:return(function(u,f){const m=u.split("/"),g=f.split("/");for(let p=0;p<m.length&&p<g.length;p++){const E=qe(m[p],g[p]);if(E!==0)return E}return qe(m.length,g.length)})(r.referenceValue,e.referenceValue);case 8:return(function(u,f){const m=qe(wt(u.latitude),wt(f.latitude));return m!==0?m:qe(wt(u.longitude),wt(f.longitude))})(r.geoPointValue,e.geoPointValue);case 9:return Y0(r.arrayValue,e.arrayValue);case 10:return(function(u,f){const m=u.fields||{},g=f.fields||{},p=m[jh]?.arrayValue,E=g[jh]?.arrayValue,T=qe(p?.values?.length||0,E?.values?.length||0);return T!==0?T:Y0(p,E)})(r.mapValue,e.mapValue);case 11:return(function(u,f){if(u===ch.mapValue&&f===ch.mapValue)return 0;if(u===ch.mapValue)return 1;if(f===ch.mapValue)return-1;const m=u.fields||{},g=Object.keys(m),p=f.fields||{},E=Object.keys(p);g.sort(),E.sort();for(let T=0;T<g.length&&T<E.length;++T){const I=tg(g[T],E[T]);if(I!==0)return I;const P=To(m[g[T]],p[E[T]]);if(P!==0)return P}return qe(g.length,E.length)})(r.mapValue,e.mapValue);default:throw Ae(23264,{he:n})}}function Q0(r,e){if(typeof r=="string"&&typeof e=="string"&&r.length===e.length)return qe(r,e);const n=Es(r),s=Es(e),o=qe(n.seconds,s.seconds);return o!==0?o:qe(n.nanos,s.nanos)}function Y0(r,e){const n=r.values||[],s=e.values||[];for(let o=0;o<n.length&&o<s.length;++o){const u=To(n[o],s[o]);if(u)return u}return qe(n.length,s.length)}function bo(r){return ng(r)}function ng(r){return"nullValue"in r?"null":"booleanValue"in r?""+r.booleanValue:"integerValue"in r?""+r.integerValue:"doubleValue"in r?""+r.doubleValue:"timestampValue"in r?(function(n){const s=Es(n);return`time(${s.seconds},${s.nanos})`})(r.timestampValue):"stringValue"in r?r.stringValue:"bytesValue"in r?(function(n){return Ts(n).toBase64()})(r.bytesValue):"referenceValue"in r?(function(n){return Te.fromName(n).toString()})(r.referenceValue):"geoPointValue"in r?(function(n){return`geo(${n.latitude},${n.longitude})`})(r.geoPointValue):"arrayValue"in r?(function(n){let s="[",o=!0;for(const u of n.values||[])o?o=!1:s+=",",s+=ng(u);return s+"]"})(r.arrayValue):"mapValue"in r?(function(n){const s=Object.keys(n.fields||{}).sort();let o="{",u=!0;for(const f of s)u?u=!1:o+=",",o+=`${f}:${ng(n.fields[f])}`;return o+"}"})(r.mapValue):Ae(61005,{value:r})}function Th(r){switch(bs(r)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=rf(r);return e?16+Th(e):16;case 5:return 2*r.stringValue.length;case 6:return Ts(r.bytesValue).approximateByteSize();case 7:return r.referenceValue.length;case 9:return(function(s){return(s.values||[]).reduce(((o,u)=>o+Th(u)),0)})(r.arrayValue);case 10:case 11:return(function(s){let o=0;return Rs(s.fields,((u,f)=>{o+=u.length+Th(f)})),o})(r.mapValue);default:throw Ae(13486,{value:r})}}function K0(r,e){return{referenceValue:`projects/${r.projectId}/databases/${r.database}/documents/${e.path.canonicalString()}`}}function ig(r){return!!r&&"integerValue"in r}function Hg(r){return!!r&&"arrayValue"in r}function X0(r){return!!r&&"nullValue"in r}function W0(r){return!!r&&"doubleValue"in r&&isNaN(Number(r.doubleValue))}function bh(r){return!!r&&"mapValue"in r}function nI(r){return(r?.mapValue?.fields||{})[lb]?.stringValue===ub}function Kl(r){if(r.geoPointValue)return{geoPointValue:{...r.geoPointValue}};if(r.timestampValue&&typeof r.timestampValue=="object")return{timestampValue:{...r.timestampValue}};if(r.mapValue){const e={mapValue:{fields:{}}};return Rs(r.mapValue.fields,((n,s)=>e.mapValue.fields[n]=Kl(s))),e}if(r.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(r.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Kl(r.arrayValue.values[n]);return e}return{...r}}function iI(r){return(((r.mapValue||{}).fields||{}).__type__||{}).stringValue===tI}class yn{constructor(e){this.value=e}static empty(){return new yn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let s=0;s<e.length-1;++s)if(n=(n.mapValue.fields||{})[e.get(s)],!bh(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Kl(n)}setAll(e){let n=rn.emptyPath(),s={},o=[];e.forEach(((f,m)=>{if(!n.isImmediateParentOf(m)){const g=this.getFieldsMap(n);this.applyChanges(g,s,o),s={},o=[],n=m.popLast()}f?s[m.lastSegment()]=Kl(f):o.push(m.lastSegment())}));const u=this.getFieldsMap(n);this.applyChanges(u,s,o)}delete(e){const n=this.field(e.popLast());bh(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Xi(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let s=0;s<e.length;++s){let o=n.mapValue.fields[e.get(s)];bh(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},n.mapValue.fields[e.get(s)]=o),n=o}return n.mapValue.fields}applyChanges(e,n,s){Rs(n,((o,u)=>e[o]=u));for(const o of s)delete e[o]}clone(){return new yn(Kl(this.value))}}function cb(r){const e=[];return Rs(r.fields,((n,s)=>{const o=new rn([n]);if(bh(s)){const u=cb(s.mapValue).fields;if(u.length===0)e.push(o);else for(const f of u)e.push(o.child(f))}else e.push(o)})),new Bn(e)}class Yt{constructor(e,n,s,o,u,f,m){this.key=e,this.documentType=n,this.version=s,this.readTime=o,this.createTime=u,this.data=f,this.documentState=m}static newInvalidDocument(e){return new Yt(e,0,xe.min(),xe.min(),xe.min(),yn.empty(),0)}static newFoundDocument(e,n,s,o){return new Yt(e,1,n,xe.min(),s,o,0)}static newNoDocument(e,n){return new Yt(e,2,n,xe.min(),xe.min(),yn.empty(),0)}static newUnknownDocument(e,n){return new Yt(e,3,n,xe.min(),xe.min(),yn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(xe.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=yn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=yn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=xe.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Yt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Yt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Uh{constructor(e,n){this.position=e,this.inclusive=n}}function J0(r,e,n){let s=0;for(let o=0;o<r.position.length;o++){const u=e[o],f=r.position[o];if(u.field.isKeyField()?s=Te.comparator(Te.fromName(f.referenceValue),n.key):s=To(f,n.data.field(u.field)),u.dir==="desc"&&(s*=-1),s!==0)break}return s}function Z0(r,e){if(r===null)return e===null;if(e===null||r.inclusive!==e.inclusive||r.position.length!==e.position.length)return!1;for(let n=0;n<r.position.length;n++)if(!Xi(r.position[n],e.position[n]))return!1;return!0}class zh{constructor(e,n="asc"){this.field=e,this.dir=n}}function rI(r,e){return r.dir===e.dir&&r.field.isEqual(e.field)}class hb{}class jt extends hb{constructor(e,n,s){super(),this.field=e,this.op=n,this.value=s}static create(e,n,s){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,s):new aI(e,n,s):n==="array-contains"?new uI(e,s):n==="in"?new cI(e,s):n==="not-in"?new hI(e,s):n==="array-contains-any"?new fI(e,s):new jt(e,n,s)}static createKeyFieldInFilter(e,n,s){return n==="in"?new oI(e,s):new lI(e,s)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(To(n,this.value)):n!==null&&bs(this.value)===bs(n)&&this.matchesComparison(To(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ae(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Ei extends hb{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new Ei(e,n)}matches(e){return fb(this)?this.filters.find((n=>!n.matches(e)))===void 0:this.filters.find((n=>n.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,n)=>e.concat(n.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function fb(r){return r.op==="and"}function db(r){return sI(r)&&fb(r)}function sI(r){for(const e of r.filters)if(e instanceof Ei)return!1;return!0}function rg(r){if(r instanceof jt)return r.field.canonicalString()+r.op.toString()+bo(r.value);if(db(r))return r.filters.map((e=>rg(e))).join(",");{const e=r.filters.map((n=>rg(n))).join(",");return`${r.op}(${e})`}}function mb(r,e){return r instanceof jt?(function(s,o){return o instanceof jt&&s.op===o.op&&s.field.isEqual(o.field)&&Xi(s.value,o.value)})(r,e):r instanceof Ei?(function(s,o){return o instanceof Ei&&s.op===o.op&&s.filters.length===o.filters.length?s.filters.reduce(((u,f,m)=>u&&mb(f,o.filters[m])),!0):!1})(r,e):void Ae(19439)}function gb(r){return r instanceof jt?(function(n){return`${n.field.canonicalString()} ${n.op} ${bo(n.value)}`})(r):r instanceof Ei?(function(n){return n.op.toString()+" {"+n.getFilters().map(gb).join(" ,")+"}"})(r):"Filter"}class aI extends jt{constructor(e,n,s){super(e,n,s),this.key=Te.fromName(s.referenceValue)}matches(e){const n=Te.comparator(e.key,this.key);return this.matchesComparison(n)}}class oI extends jt{constructor(e,n){super(e,"in",n),this.keys=pb("in",n)}matches(e){return this.keys.some((n=>n.isEqual(e.key)))}}class lI extends jt{constructor(e,n){super(e,"not-in",n),this.keys=pb("not-in",n)}matches(e){return!this.keys.some((n=>n.isEqual(e.key)))}}function pb(r,e){return(e.arrayValue?.values||[]).map((n=>Te.fromName(n.referenceValue)))}class uI extends jt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Hg(n)&&au(n.arrayValue,this.value)}}class cI extends jt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&au(this.value.arrayValue,n)}}class hI extends jt{constructor(e,n){super(e,"not-in",n)}matches(e){if(au(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!au(this.value.arrayValue,n)}}class fI extends jt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Hg(n)||!n.arrayValue.values)&&n.arrayValue.values.some((s=>au(this.value.arrayValue,s)))}}class dI{constructor(e,n=null,s=[],o=[],u=null,f=null,m=null){this.path=e,this.collectionGroup=n,this.orderBy=s,this.filters=o,this.limit=u,this.startAt=f,this.endAt=m,this.Te=null}}function eE(r,e=null,n=[],s=[],o=null,u=null,f=null){return new dI(r,e,n,s,o,u,f)}function Fg(r){const e=De(r);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((s=>rg(s))).join(","),n+="|ob:",n+=e.orderBy.map((s=>(function(u){return u.field.canonicalString()+u.dir})(s))).join(","),_u(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((s=>bo(s))).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((s=>bo(s))).join(",")),e.Te=n}return e.Te}function Gg(r,e){if(r.limit!==e.limit||r.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<r.orderBy.length;n++)if(!rI(r.orderBy[n],e.orderBy[n]))return!1;if(r.filters.length!==e.filters.length)return!1;for(let n=0;n<r.filters.length;n++)if(!mb(r.filters[n],e.filters[n]))return!1;return r.collectionGroup===e.collectionGroup&&!!r.path.isEqual(e.path)&&!!Z0(r.startAt,e.startAt)&&Z0(r.endAt,e.endAt)}function sg(r){return Te.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}class Eu{constructor(e,n=null,s=[],o=[],u=null,f="F",m=null,g=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=s,this.filters=o,this.limit=u,this.limitType=f,this.startAt=m,this.endAt=g,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function mI(r,e,n,s,o,u,f,m){return new Eu(r,e,n,s,o,u,f,m)}function sf(r){return new Eu(r)}function tE(r){return r.filters.length===0&&r.limit===null&&r.startAt==null&&r.endAt==null&&(r.explicitOrderBy.length===0||r.explicitOrderBy.length===1&&r.explicitOrderBy[0].field.isKeyField())}function yb(r){return r.collectionGroup!==null}function Xl(r){const e=De(r);if(e.Ie===null){e.Ie=[];const n=new Set;for(const u of e.explicitOrderBy)e.Ie.push(u),n.add(u.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(f){let m=new Ht(rn.comparator);return f.filters.forEach((g=>{g.getFlattenedFilters().forEach((p=>{p.isInequality()&&(m=m.add(p.field))}))})),m})(e).forEach((u=>{n.has(u.canonicalString())||u.isKeyField()||e.Ie.push(new zh(u,s))})),n.has(rn.keyField().canonicalString())||e.Ie.push(new zh(rn.keyField(),s))}return e.Ie}function $i(r){const e=De(r);return e.Ee||(e.Ee=gI(e,Xl(r))),e.Ee}function gI(r,e){if(r.limitType==="F")return eE(r.path,r.collectionGroup,e,r.filters,r.limit,r.startAt,r.endAt);{e=e.map((o=>{const u=o.dir==="desc"?"asc":"desc";return new zh(o.field,u)}));const n=r.endAt?new Uh(r.endAt.position,r.endAt.inclusive):null,s=r.startAt?new Uh(r.startAt.position,r.startAt.inclusive):null;return eE(r.path,r.collectionGroup,e,r.filters,r.limit,n,s)}}function ag(r,e){const n=r.filters.concat([e]);return new Eu(r.path,r.collectionGroup,r.explicitOrderBy.slice(),n,r.limit,r.limitType,r.startAt,r.endAt)}function og(r,e,n){return new Eu(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),e,n,r.startAt,r.endAt)}function af(r,e){return Gg($i(r),$i(e))&&r.limitType===e.limitType}function vb(r){return`${Fg($i(r))}|lt:${r.limitType}`}function oo(r){return`Query(target=${(function(n){let s=n.path.canonicalString();return n.collectionGroup!==null&&(s+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(s+=`, filters: [${n.filters.map((o=>gb(o))).join(", ")}]`),_u(n.limit)||(s+=", limit: "+n.limit),n.orderBy.length>0&&(s+=`, orderBy: [${n.orderBy.map((o=>(function(f){return`${f.field.canonicalString()} (${f.dir})`})(o))).join(", ")}]`),n.startAt&&(s+=", startAt: ",s+=n.startAt.inclusive?"b:":"a:",s+=n.startAt.position.map((o=>bo(o))).join(",")),n.endAt&&(s+=", endAt: ",s+=n.endAt.inclusive?"a:":"b:",s+=n.endAt.position.map((o=>bo(o))).join(",")),`Target(${s})`})($i(r))}; limitType=${r.limitType})`}function of(r,e){return e.isFoundDocument()&&(function(s,o){const u=o.key.path;return s.collectionGroup!==null?o.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(u):Te.isDocumentKey(s.path)?s.path.isEqual(u):s.path.isImmediateParentOf(u)})(r,e)&&(function(s,o){for(const u of Xl(s))if(!u.field.isKeyField()&&o.data.field(u.field)===null)return!1;return!0})(r,e)&&(function(s,o){for(const u of s.filters)if(!u.matches(o))return!1;return!0})(r,e)&&(function(s,o){return!(s.startAt&&!(function(f,m,g){const p=J0(f,m,g);return f.inclusive?p<=0:p<0})(s.startAt,Xl(s),o)||s.endAt&&!(function(f,m,g){const p=J0(f,m,g);return f.inclusive?p>=0:p>0})(s.endAt,Xl(s),o))})(r,e)}function pI(r){return r.collectionGroup||(r.path.length%2==1?r.path.lastSegment():r.path.get(r.path.length-2))}function _b(r){return(e,n)=>{let s=!1;for(const o of Xl(r)){const u=yI(o,e,n);if(u!==0)return u;s=s||o.field.isKeyField()}return 0}}function yI(r,e,n){const s=r.field.isKeyField()?Te.comparator(e.key,n.key):(function(u,f,m){const g=f.data.field(u),p=m.data.field(u);return g!==null&&p!==null?To(g,p):Ae(42886)})(r.field,e,n);switch(r.dir){case"asc":return s;case"desc":return-1*s;default:return Ae(19790,{direction:r.dir})}}class ma{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s!==void 0){for(const[o,u]of s)if(this.equalsFn(o,e))return u}}has(e){return this.get(e)!==void 0}set(e,n){const s=this.mapKeyFn(e),o=this.inner[s];if(o===void 0)return this.inner[s]=[[e,n]],void this.innerSize++;for(let u=0;u<o.length;u++)if(this.equalsFn(o[u][0],e))return void(o[u]=[e,n]);o.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s===void 0)return!1;for(let o=0;o<s.length;o++)if(this.equalsFn(s[o][0],e))return s.length===1?delete this.inner[n]:s.splice(o,1),this.innerSize--,!0;return!1}forEach(e){Rs(this.inner,((n,s)=>{for(const[o,u]of s)e(o,u)}))}isEmpty(){return nb(this.inner)}size(){return this.innerSize}}const vI=new yt(Te.comparator);function Rr(){return vI}const Eb=new yt(Te.comparator);function Fl(...r){let e=Eb;for(const n of r)e=e.insert(n.key,n);return e}function Tb(r){let e=Eb;return r.forEach(((n,s)=>e=e.insert(n,s.overlayedDocument))),e}function sa(){return Wl()}function bb(){return Wl()}function Wl(){return new ma((r=>r.toString()),((r,e)=>r.isEqual(e)))}const _I=new yt(Te.comparator),EI=new Ht(Te.comparator);function He(...r){let e=EI;for(const n of r)e=e.add(n);return e}const TI=new Ht(qe);function bI(){return TI}function $g(r,e){if(r.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ph(e)?"-0":e}}function Sb(r){return{integerValue:""+r}}function Ab(r,e){return X2(e)?Sb(e):$g(r,e)}class lf{constructor(){this._=void 0}}function SI(r,e,n){return r instanceof ou?(function(o,u){const f={fields:{[sb]:{stringValue:rb},[ob]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return u&&qg(u)&&(u=rf(u)),u&&(f.fields[ab]=u),{mapValue:f}})(n,e):r instanceof lu?Rb(r,e):r instanceof uu?Cb(r,e):(function(o,u){const f=wb(o,u),m=nE(f)+nE(o.Ae);return ig(f)&&ig(o.Ae)?Sb(m):$g(o.serializer,m)})(r,e)}function AI(r,e,n){return r instanceof lu?Rb(r,e):r instanceof uu?Cb(r,e):n}function wb(r,e){return r instanceof cu?(function(s){return ig(s)||(function(u){return!!u&&"doubleValue"in u})(s)})(e)?e:{integerValue:0}:null}class ou extends lf{}class lu extends lf{constructor(e){super(),this.elements=e}}function Rb(r,e){const n=xb(e);for(const s of r.elements)n.some((o=>Xi(o,s)))||n.push(s);return{arrayValue:{values:n}}}class uu extends lf{constructor(e){super(),this.elements=e}}function Cb(r,e){let n=xb(e);for(const s of r.elements)n=n.filter((o=>!Xi(o,s)));return{arrayValue:{values:n}}}class cu extends lf{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function nE(r){return wt(r.integerValue||r.doubleValue)}function xb(r){return Hg(r)&&r.arrayValue.values?r.arrayValue.values.slice():[]}class Ib{constructor(e,n){this.field=e,this.transform=n}}function wI(r,e){return r.field.isEqual(e.field)&&(function(s,o){return s instanceof lu&&o instanceof lu||s instanceof uu&&o instanceof uu?Eo(s.elements,o.elements,Xi):s instanceof cu&&o instanceof cu?Xi(s.Ae,o.Ae):s instanceof ou&&o instanceof ou})(r.transform,e.transform)}class RI{constructor(e,n){this.version=e,this.transformResults=n}}class sn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new sn}static exists(e){return new sn(void 0,e)}static updateTime(e){return new sn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Sh(r,e){return r.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(r.updateTime):r.exists===void 0||r.exists===e.isFoundDocument()}class uf{}function Db(r,e){if(!r.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return r.isNoDocument()?new cf(r.key,sn.none()):new Tu(r.key,r.data,sn.none());{const n=r.data,s=yn.empty();let o=new Ht(rn.comparator);for(let u of e.fields)if(!o.has(u)){let f=n.field(u);f===null&&u.length>1&&(u=u.popLast(),f=n.field(u)),f===null?s.delete(u):s.set(u,f),o=o.add(u)}return new Cs(r.key,s,new Bn(o.toArray()),sn.none())}}function CI(r,e,n){r instanceof Tu?(function(o,u,f){const m=o.value.clone(),g=rE(o.fieldTransforms,u,f.transformResults);m.setAll(g),u.convertToFoundDocument(f.version,m).setHasCommittedMutations()})(r,e,n):r instanceof Cs?(function(o,u,f){if(!Sh(o.precondition,u))return void u.convertToUnknownDocument(f.version);const m=rE(o.fieldTransforms,u,f.transformResults),g=u.data;g.setAll(Nb(o)),g.setAll(m),u.convertToFoundDocument(f.version,g).setHasCommittedMutations()})(r,e,n):(function(o,u,f){u.convertToNoDocument(f.version).setHasCommittedMutations()})(0,e,n)}function Jl(r,e,n,s){return r instanceof Tu?(function(u,f,m,g){if(!Sh(u.precondition,f))return m;const p=u.value.clone(),E=sE(u.fieldTransforms,g,f);return p.setAll(E),f.convertToFoundDocument(f.version,p).setHasLocalMutations(),null})(r,e,n,s):r instanceof Cs?(function(u,f,m,g){if(!Sh(u.precondition,f))return m;const p=sE(u.fieldTransforms,g,f),E=f.data;return E.setAll(Nb(u)),E.setAll(p),f.convertToFoundDocument(f.version,E).setHasLocalMutations(),m===null?null:m.unionWith(u.fieldMask.fields).unionWith(u.fieldTransforms.map((T=>T.field)))})(r,e,n,s):(function(u,f,m){return Sh(u.precondition,f)?(f.convertToNoDocument(f.version).setHasLocalMutations(),null):m})(r,e,n)}function xI(r,e){let n=null;for(const s of r.fieldTransforms){const o=e.data.field(s.field),u=wb(s.transform,o||null);u!=null&&(n===null&&(n=yn.empty()),n.set(s.field,u))}return n||null}function iE(r,e){return r.type===e.type&&!!r.key.isEqual(e.key)&&!!r.precondition.isEqual(e.precondition)&&!!(function(s,o){return s===void 0&&o===void 0||!(!s||!o)&&Eo(s,o,((u,f)=>wI(u,f)))})(r.fieldTransforms,e.fieldTransforms)&&(r.type===0?r.value.isEqual(e.value):r.type!==1||r.data.isEqual(e.data)&&r.fieldMask.isEqual(e.fieldMask))}class Tu extends uf{constructor(e,n,s,o=[]){super(),this.key=e,this.value=n,this.precondition=s,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class Cs extends uf{constructor(e,n,s,o,u=[]){super(),this.key=e,this.data=n,this.fieldMask=s,this.precondition=o,this.fieldTransforms=u,this.type=1}getFieldMask(){return this.fieldMask}}function Nb(r){const e=new Map;return r.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const s=r.data.field(n);e.set(n,s)}})),e}function rE(r,e,n){const s=new Map;Qe(r.length===n.length,32656,{Re:n.length,Ve:r.length});for(let o=0;o<n.length;o++){const u=r[o],f=u.transform,m=e.data.field(u.field);s.set(u.field,AI(f,m,n[o]))}return s}function sE(r,e,n){const s=new Map;for(const o of r){const u=o.transform,f=n.data.field(o.field);s.set(o.field,SI(u,f,e))}return s}class cf extends uf{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Ob extends uf{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class II{constructor(e,n,s,o){this.batchId=e,this.localWriteTime=n,this.baseMutations=s,this.mutations=o}applyToRemoteDocument(e,n){const s=n.mutationResults;for(let o=0;o<this.mutations.length;o++){const u=this.mutations[o];u.key.isEqual(e.key)&&CI(u,e,s[o])}}applyToLocalView(e,n){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(n=Jl(s,e,n,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(n=Jl(s,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const s=bb();return this.mutations.forEach((o=>{const u=e.get(o.key),f=u.overlayedDocument;let m=this.applyToLocalView(f,u.mutatedFields);m=n.has(o.key)?null:m;const g=Db(f,m);g!==null&&s.set(o.key,g),f.isValidDocument()||f.convertToNoDocument(xe.min())})),s}keys(){return this.mutations.reduce(((e,n)=>e.add(n.key)),He())}isEqual(e){return this.batchId===e.batchId&&Eo(this.mutations,e.mutations,((n,s)=>iE(n,s)))&&Eo(this.baseMutations,e.baseMutations,((n,s)=>iE(n,s)))}}class Qg{constructor(e,n,s,o){this.batch=e,this.commitVersion=n,this.mutationResults=s,this.docVersions=o}static from(e,n,s){Qe(e.mutations.length===s.length,58842,{me:e.mutations.length,fe:s.length});let o=(function(){return _I})();const u=e.mutations;for(let f=0;f<u.length;f++)o=o.insert(u[f].key,s[f].version);return new Qg(e,n,s,o)}}class DI{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class NI{constructor(e,n){this.count=e,this.unchangedNames=n}}var Pt,$e;function Mb(r){switch(r){case ne.OK:return Ae(64938);case ne.CANCELLED:case ne.UNKNOWN:case ne.DEADLINE_EXCEEDED:case ne.RESOURCE_EXHAUSTED:case ne.INTERNAL:case ne.UNAVAILABLE:case ne.UNAUTHENTICATED:return!1;case ne.INVALID_ARGUMENT:case ne.NOT_FOUND:case ne.ALREADY_EXISTS:case ne.PERMISSION_DENIED:case ne.FAILED_PRECONDITION:case ne.ABORTED:case ne.OUT_OF_RANGE:case ne.UNIMPLEMENTED:case ne.DATA_LOSS:return!0;default:return Ae(15467,{code:r})}}function Vb(r){if(r===void 0)return wr("GRPC error has no .code"),ne.UNKNOWN;switch(r){case Pt.OK:return ne.OK;case Pt.CANCELLED:return ne.CANCELLED;case Pt.UNKNOWN:return ne.UNKNOWN;case Pt.DEADLINE_EXCEEDED:return ne.DEADLINE_EXCEEDED;case Pt.RESOURCE_EXHAUSTED:return ne.RESOURCE_EXHAUSTED;case Pt.INTERNAL:return ne.INTERNAL;case Pt.UNAVAILABLE:return ne.UNAVAILABLE;case Pt.UNAUTHENTICATED:return ne.UNAUTHENTICATED;case Pt.INVALID_ARGUMENT:return ne.INVALID_ARGUMENT;case Pt.NOT_FOUND:return ne.NOT_FOUND;case Pt.ALREADY_EXISTS:return ne.ALREADY_EXISTS;case Pt.PERMISSION_DENIED:return ne.PERMISSION_DENIED;case Pt.FAILED_PRECONDITION:return ne.FAILED_PRECONDITION;case Pt.ABORTED:return ne.ABORTED;case Pt.OUT_OF_RANGE:return ne.OUT_OF_RANGE;case Pt.UNIMPLEMENTED:return ne.UNIMPLEMENTED;case Pt.DATA_LOSS:return ne.DATA_LOSS;default:return Ae(39323,{code:r})}}($e=Pt||(Pt={}))[$e.OK=0]="OK",$e[$e.CANCELLED=1]="CANCELLED",$e[$e.UNKNOWN=2]="UNKNOWN",$e[$e.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",$e[$e.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",$e[$e.NOT_FOUND=5]="NOT_FOUND",$e[$e.ALREADY_EXISTS=6]="ALREADY_EXISTS",$e[$e.PERMISSION_DENIED=7]="PERMISSION_DENIED",$e[$e.UNAUTHENTICATED=16]="UNAUTHENTICATED",$e[$e.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",$e[$e.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",$e[$e.ABORTED=10]="ABORTED",$e[$e.OUT_OF_RANGE=11]="OUT_OF_RANGE",$e[$e.UNIMPLEMENTED=12]="UNIMPLEMENTED",$e[$e.INTERNAL=13]="INTERNAL",$e[$e.UNAVAILABLE=14]="UNAVAILABLE",$e[$e.DATA_LOSS=15]="DATA_LOSS";function OI(){return new TextEncoder}const MI=new gs([4294967295,4294967295],0);function aE(r){const e=OI().encode(r),n=new GT;return n.update(e),new Uint8Array(n.digest())}function oE(r){const e=new DataView(r.buffer),n=e.getUint32(0,!0),s=e.getUint32(4,!0),o=e.getUint32(8,!0),u=e.getUint32(12,!0);return[new gs([n,s],0),new gs([o,u],0)]}class Yg{constructor(e,n,s){if(this.bitmap=e,this.padding=n,this.hashCount=s,n<0||n>=8)throw new Gl(`Invalid padding: ${n}`);if(s<0)throw new Gl(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new Gl(`Invalid hash count: ${s}`);if(e.length===0&&n!==0)throw new Gl(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=gs.fromNumber(this.ge)}ye(e,n,s){let o=e.add(n.multiply(gs.fromNumber(s)));return o.compare(MI)===1&&(o=new gs([o.getBits(0),o.getBits(1)],0)),o.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=aE(e),[s,o]=oE(n);for(let u=0;u<this.hashCount;u++){const f=this.ye(s,o,u);if(!this.we(f))return!1}return!0}static create(e,n,s){const o=e%8==0?0:8-e%8,u=new Uint8Array(Math.ceil(e/8)),f=new Yg(u,o,n);return s.forEach((m=>f.insert(m))),f}insert(e){if(this.ge===0)return;const n=aE(e),[s,o]=oE(n);for(let u=0;u<this.hashCount;u++){const f=this.ye(s,o,u);this.Se(f)}}Se(e){const n=Math.floor(e/8),s=e%8;this.bitmap[n]|=1<<s}}class Gl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class hf{constructor(e,n,s,o,u){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=s,this.documentUpdates=o,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,n,s){const o=new Map;return o.set(e,bu.createSynthesizedTargetChangeForCurrentChange(e,n,s)),new hf(xe.min(),o,new yt(qe),Rr(),He())}}class bu{constructor(e,n,s,o,u){this.resumeToken=e,this.current=n,this.addedDocuments=s,this.modifiedDocuments=o,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,n,s){return new bu(s,n,He(),He(),He())}}class Ah{constructor(e,n,s,o){this.be=e,this.removedTargetIds=n,this.key=s,this.De=o}}class kb{constructor(e,n){this.targetId=e,this.Ce=n}}class Pb{constructor(e,n,s=an.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=n,this.resumeToken=s,this.cause=o}}class lE{constructor(){this.ve=0,this.Fe=uE(),this.Me=an.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=He(),n=He(),s=He();return this.Fe.forEach(((o,u)=>{switch(u){case 0:e=e.add(o);break;case 2:n=n.add(o);break;case 1:s=s.add(o);break;default:Ae(38017,{changeType:u})}})),new bu(this.Me,this.xe,e,n,s)}qe(){this.Oe=!1,this.Fe=uE()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Qe(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class VI{constructor(e){this.Ge=e,this.ze=new Map,this.je=Rr(),this.Je=hh(),this.He=hh(),this.Ye=new yt(qe)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,(n=>{const s=this.nt(n);switch(e.state){case 0:this.rt(n)&&s.Le(e.resumeToken);break;case 1:s.Ke(),s.Ne||s.qe(),s.Le(e.resumeToken);break;case 2:s.Ke(),s.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(s.We(),s.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),s.Le(e.resumeToken));break;default:Ae(56790,{state:e.state})}}))}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach(((s,o)=>{this.rt(o)&&n(o)}))}st(e){const n=e.targetId,s=e.Ce.count,o=this.ot(n);if(o){const u=o.target;if(sg(u))if(s===0){const f=new Te(u.path);this.et(n,f,Yt.newNoDocument(f,xe.min()))}else Qe(s===1,20013,{expectedCount:s});else{const f=this._t(n);if(f!==s){const m=this.ut(e),g=m?this.ct(m,e,f):1;if(g!==0){this.it(n);const p=g===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,p)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:s="",padding:o=0},hashCount:u=0}=n;let f,m;try{f=Ts(s).toUint8Array()}catch(g){if(g instanceof ib)return _o("Decoding the base64 bloom filter in existence filter failed ("+g.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw g}try{m=new Yg(f,o,u)}catch(g){return _o(g instanceof Gl?"BloomFilter error: ":"Applying bloom filter failed: ",g),null}return m.ge===0?null:m}ct(e,n,s){return n.Ce.count===s-this.Pt(e,n.targetId)?0:2}Pt(e,n){const s=this.Ge.getRemoteKeysForTarget(n);let o=0;return s.forEach((u=>{const f=this.Ge.ht(),m=`projects/${f.projectId}/databases/${f.database}/documents/${u.path.canonicalString()}`;e.mightContain(m)||(this.et(n,u,null),o++)})),o}Tt(e){const n=new Map;this.ze.forEach(((u,f)=>{const m=this.ot(f);if(m){if(u.current&&sg(m.target)){const g=new Te(m.target.path);this.It(g).has(f)||this.Et(f,g)||this.et(f,g,Yt.newNoDocument(g,e))}u.Be&&(n.set(f,u.ke()),u.qe())}}));let s=He();this.He.forEach(((u,f)=>{let m=!0;f.forEachWhile((g=>{const p=this.ot(g);return!p||p.purpose==="TargetPurposeLimboResolution"||(m=!1,!1)})),m&&(s=s.add(u))})),this.je.forEach(((u,f)=>f.setReadTime(e)));const o=new hf(e,n,this.Ye,this.je,s);return this.je=Rr(),this.Je=hh(),this.He=hh(),this.Ye=new yt(qe),o}Xe(e,n){if(!this.rt(e))return;const s=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,s),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,s){if(!this.rt(e))return;const o=this.nt(e);this.Et(e,n)?o.Qe(n,1):o.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),s&&(this.je=this.je.insert(n,s))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new lE,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new Ht(qe),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new Ht(qe),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||pe("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new lE),this.Ge.getRemoteKeysForTarget(e).forEach((n=>{this.et(e,n,null)}))}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function hh(){return new yt(Te.comparator)}function uE(){return new yt(Te.comparator)}const kI={asc:"ASCENDING",desc:"DESCENDING"},PI={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},LI={and:"AND",or:"OR"};class jI{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function lg(r,e){return r.useProto3Json||_u(e)?e:{value:e}}function Bh(r,e){return r.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Lb(r,e){return r.useProto3Json?e.toBase64():e.toUint8Array()}function UI(r,e){return Bh(r,e.toTimestamp())}function qn(r){return Qe(!!r,49232),xe.fromTimestamp((function(n){const s=Es(n);return new ft(s.seconds,s.nanos)})(r))}function Kg(r,e){return ug(r,e).canonicalString()}function ug(r,e){const n=(function(o){return new lt(["projects",o.projectId,"databases",o.database])})(r).child("documents");return e===void 0?n:n.child(e)}function jb(r){const e=lt.fromString(r);return Qe(Fb(e),10190,{key:e.toString()}),e}function qh(r,e){return Kg(r.databaseId,e.path)}function Zl(r,e){const n=jb(e);if(n.get(1)!==r.databaseId.projectId)throw new me(ne.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+r.databaseId.projectId);if(n.get(3)!==r.databaseId.database)throw new me(ne.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+r.databaseId.database);return new Te(zb(n))}function Ub(r,e){return Kg(r.databaseId,e)}function zI(r){const e=jb(r);return e.length===4?lt.emptyPath():zb(e)}function cg(r){return new lt(["projects",r.databaseId.projectId,"databases",r.databaseId.database]).canonicalString()}function zb(r){return Qe(r.length>4&&r.get(4)==="documents",29091,{key:r.toString()}),r.popFirst(5)}function cE(r,e,n){return{name:qh(r,e),fields:n.value.mapValue.fields}}function BI(r,e){return"found"in e?(function(s,o){Qe(!!o.found,43571),o.found.name,o.found.updateTime;const u=Zl(s,o.found.name),f=qn(o.found.updateTime),m=o.found.createTime?qn(o.found.createTime):xe.min(),g=new yn({mapValue:{fields:o.found.fields}});return Yt.newFoundDocument(u,f,m,g)})(r,e):"missing"in e?(function(s,o){Qe(!!o.missing,3894),Qe(!!o.readTime,22933);const u=Zl(s,o.missing),f=qn(o.readTime);return Yt.newNoDocument(u,f)})(r,e):Ae(7234,{result:e})}function qI(r,e){let n;if("targetChange"in e){e.targetChange;const s=(function(p){return p==="NO_CHANGE"?0:p==="ADD"?1:p==="REMOVE"?2:p==="CURRENT"?3:p==="RESET"?4:Ae(39313,{state:p})})(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],u=(function(p,E){return p.useProto3Json?(Qe(E===void 0||typeof E=="string",58123),an.fromBase64String(E||"")):(Qe(E===void 0||E instanceof Buffer||E instanceof Uint8Array,16193),an.fromUint8Array(E||new Uint8Array))})(r,e.targetChange.resumeToken),f=e.targetChange.cause,m=f&&(function(p){const E=p.code===void 0?ne.UNKNOWN:Vb(p.code);return new me(E,p.message||"")})(f);n=new Pb(s,o,u,m||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const o=Zl(r,s.document.name),u=qn(s.document.updateTime),f=s.document.createTime?qn(s.document.createTime):xe.min(),m=new yn({mapValue:{fields:s.document.fields}}),g=Yt.newFoundDocument(o,u,f,m),p=s.targetIds||[],E=s.removedTargetIds||[];n=new Ah(p,E,g.key,g)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const o=Zl(r,s.document),u=s.readTime?qn(s.readTime):xe.min(),f=Yt.newNoDocument(o,u),m=s.removedTargetIds||[];n=new Ah([],m,f.key,f)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const o=Zl(r,s.document),u=s.removedTargetIds||[];n=new Ah([],u,o,null)}else{if(!("filter"in e))return Ae(11601,{Rt:e});{e.filter;const s=e.filter;s.targetId;const{count:o=0,unchangedNames:u}=s,f=new NI(o,u),m=s.targetId;n=new kb(m,f)}}return n}function Bb(r,e){let n;if(e instanceof Tu)n={update:cE(r,e.key,e.value)};else if(e instanceof cf)n={delete:qh(r,e.key)};else if(e instanceof Cs)n={update:cE(r,e.key,e.data),updateMask:WI(e.fieldMask)};else{if(!(e instanceof Ob))return Ae(16599,{Vt:e.type});n={verify:qh(r,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((s=>(function(u,f){const m=f.transform;if(m instanceof ou)return{fieldPath:f.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(m instanceof lu)return{fieldPath:f.field.canonicalString(),appendMissingElements:{values:m.elements}};if(m instanceof uu)return{fieldPath:f.field.canonicalString(),removeAllFromArray:{values:m.elements}};if(m instanceof cu)return{fieldPath:f.field.canonicalString(),increment:m.Ae};throw Ae(20930,{transform:f.transform})})(0,s)))),e.precondition.isNone||(n.currentDocument=(function(o,u){return u.updateTime!==void 0?{updateTime:UI(o,u.updateTime)}:u.exists!==void 0?{exists:u.exists}:Ae(27497)})(r,e.precondition)),n}function HI(r,e){return r&&r.length>0?(Qe(e!==void 0,14353),r.map((n=>(function(o,u){let f=o.updateTime?qn(o.updateTime):qn(u);return f.isEqual(xe.min())&&(f=qn(u)),new RI(f,o.transformResults||[])})(n,e)))):[]}function FI(r,e){return{documents:[Ub(r,e.path)]}}function GI(r,e){const n={structuredQuery:{}},s=e.path;let o;e.collectionGroup!==null?(o=s,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=s.popLast(),n.structuredQuery.from=[{collectionId:s.lastSegment()}]),n.parent=Ub(r,o);const u=(function(p){if(p.length!==0)return Hb(Ei.create(p,"and"))})(e.filters);u&&(n.structuredQuery.where=u);const f=(function(p){if(p.length!==0)return p.map((E=>(function(I){return{field:lo(I.field),direction:YI(I.dir)}})(E)))})(e.orderBy);f&&(n.structuredQuery.orderBy=f);const m=lg(r,e.limit);return m!==null&&(n.structuredQuery.limit=m),e.startAt&&(n.structuredQuery.startAt=(function(p){return{before:p.inclusive,values:p.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(p){return{before:!p.inclusive,values:p.position}})(e.endAt)),{ft:n,parent:o}}function $I(r){let e=zI(r.parent);const n=r.structuredQuery,s=n.from?n.from.length:0;let o=null;if(s>0){Qe(s===1,65062);const E=n.from[0];E.allDescendants?o=E.collectionId:e=e.child(E.collectionId)}let u=[];n.where&&(u=(function(T){const I=qb(T);return I instanceof Ei&&db(I)?I.getFilters():[I]})(n.where));let f=[];n.orderBy&&(f=(function(T){return T.map((I=>(function(j){return new zh(uo(j.field),(function(B){switch(B){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(j.direction))})(I)))})(n.orderBy));let m=null;n.limit&&(m=(function(T){let I;return I=typeof T=="object"?T.value:T,_u(I)?null:I})(n.limit));let g=null;n.startAt&&(g=(function(T){const I=!!T.before,P=T.values||[];return new Uh(P,I)})(n.startAt));let p=null;return n.endAt&&(p=(function(T){const I=!T.before,P=T.values||[];return new Uh(P,I)})(n.endAt)),mI(e,o,f,u,m,"F",g,p)}function QI(r,e){const n=(function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ae(28987,{purpose:o})}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function qb(r){return r.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const s=uo(n.unaryFilter.field);return jt.create(s,"==",{doubleValue:NaN});case"IS_NULL":const o=uo(n.unaryFilter.field);return jt.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const u=uo(n.unaryFilter.field);return jt.create(u,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const f=uo(n.unaryFilter.field);return jt.create(f,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Ae(61313);default:return Ae(60726)}})(r):r.fieldFilter!==void 0?(function(n){return jt.create(uo(n.fieldFilter.field),(function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Ae(58110);default:return Ae(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(r):r.compositeFilter!==void 0?(function(n){return Ei.create(n.compositeFilter.filters.map((s=>qb(s))),(function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return Ae(1026)}})(n.compositeFilter.op))})(r):Ae(30097,{filter:r})}function YI(r){return kI[r]}function KI(r){return PI[r]}function XI(r){return LI[r]}function lo(r){return{fieldPath:r.canonicalString()}}function uo(r){return rn.fromServerFormat(r.fieldPath)}function Hb(r){return r instanceof jt?(function(n){if(n.op==="=="){if(W0(n.value))return{unaryFilter:{field:lo(n.field),op:"IS_NAN"}};if(X0(n.value))return{unaryFilter:{field:lo(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(W0(n.value))return{unaryFilter:{field:lo(n.field),op:"IS_NOT_NAN"}};if(X0(n.value))return{unaryFilter:{field:lo(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:lo(n.field),op:KI(n.op),value:n.value}}})(r):r instanceof Ei?(function(n){const s=n.getFilters().map((o=>Hb(o)));return s.length===1?s[0]:{compositeFilter:{op:XI(n.op),filters:s}}})(r):Ae(54877,{filter:r})}function WI(r){const e=[];return r.fields.forEach((n=>e.push(n.canonicalString()))),{fieldPaths:e}}function Fb(r){return r.length>=4&&r.get(0)==="projects"&&r.get(2)==="databases"}class hs{constructor(e,n,s,o,u=xe.min(),f=xe.min(),m=an.EMPTY_BYTE_STRING,g=null){this.target=e,this.targetId=n,this.purpose=s,this.sequenceNumber=o,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=f,this.resumeToken=m,this.expectedCount=g}withSequenceNumber(e){return new hs(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new hs(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new hs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new hs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class JI{constructor(e){this.yt=e}}function ZI(r){const e=$I({parent:r.parent,structuredQuery:r.structuredQuery});return r.limitType==="LAST"?og(e,e.limit,"L"):e}class eD{constructor(){this.Cn=new tD}addToCollectionParentIndex(e,n){return this.Cn.add(n),se.resolve()}getCollectionParents(e,n){return se.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return se.resolve()}deleteFieldIndex(e,n){return se.resolve()}deleteAllFieldIndexes(e){return se.resolve()}createTargetIndexes(e,n){return se.resolve()}getDocumentsMatchingTarget(e,n){return se.resolve(null)}getIndexType(e,n){return se.resolve(0)}getFieldIndexes(e,n){return se.resolve([])}getNextCollectionGroupToUpdate(e){return se.resolve(null)}getMinOffset(e,n){return se.resolve(_s.min())}getMinOffsetFromCollectionGroup(e,n){return se.resolve(_s.min())}updateCollectionGroup(e,n,s){return se.resolve()}updateIndexEntries(e,n){return se.resolve()}}class tD{constructor(){this.index={}}add(e){const n=e.lastSegment(),s=e.popLast(),o=this.index[n]||new Ht(lt.comparator),u=!o.has(s);return this.index[n]=o.add(s),u}has(e){const n=e.lastSegment(),s=e.popLast(),o=this.index[n];return o&&o.has(s)}getEntries(e){return(this.index[e]||new Ht(lt.comparator)).toArray()}}const hE={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Gb=41943040;class Cn{static withCacheSize(e){return new Cn(e,Cn.DEFAULT_COLLECTION_PERCENTILE,Cn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=s}}Cn.DEFAULT_COLLECTION_PERCENTILE=10,Cn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Cn.DEFAULT=new Cn(Gb,Cn.DEFAULT_COLLECTION_PERCENTILE,Cn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Cn.DISABLED=new Cn(-1,0,0);class So{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new So(0)}static cr(){return new So(-1)}}const fE="LruGarbageCollector",nD=1048576;function dE([r,e],[n,s]){const o=qe(r,n);return o===0?qe(e,s):o}class iD{constructor(e){this.Ir=e,this.buffer=new Ht(dE),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const s=this.buffer.last();dE(n,s)<0&&(this.buffer=this.buffer.delete(s).add(n))}}get maxValue(){return this.buffer.last()[0]}}class rD{constructor(e,n,s){this.garbageCollector=e,this.asyncQueue=n,this.localStore=s,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){pe(fE,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){ko(n)?pe(fE,"Ignoring IndexedDB error during garbage collection: ",n):await Vo(n)}await this.Vr(3e5)}))}}class sD{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next((s=>Math.floor(n/100*s)))}nthSequenceNumber(e,n){if(n===0)return se.resolve(nf.ce);const s=new iD(n);return this.mr.forEachTarget(e,(o=>s.Ar(o.sequenceNumber))).next((()=>this.mr.pr(e,(o=>s.Ar(o))))).next((()=>s.maxValue))}removeTargets(e,n,s){return this.mr.removeTargets(e,n,s)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(pe("LruGarbageCollector","Garbage collection skipped; disabled"),se.resolve(hE)):this.getCacheSize(e).next((s=>s<this.params.cacheSizeCollectionThreshold?(pe("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),hE):this.yr(e,n)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let s,o,u,f,m,g,p;const E=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((T=>(T>this.params.maximumSequenceNumbersToCollect?(pe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${T}`),o=this.params.maximumSequenceNumbersToCollect):o=T,f=Date.now(),this.nthSequenceNumber(e,o)))).next((T=>(s=T,m=Date.now(),this.removeTargets(e,s,n)))).next((T=>(u=T,g=Date.now(),this.removeOrphanedDocuments(e,s)))).next((T=>(p=Date.now(),ao()<=Be.DEBUG&&pe("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${f-E}ms
	Determined least recently used ${o} in `+(m-f)+`ms
	Removed ${u} targets in `+(g-m)+`ms
	Removed ${T} documents in `+(p-g)+`ms
Total Duration: ${p-E}ms`),se.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:u,documentsRemoved:T}))))}}function aD(r,e){return new sD(r,e)}class oD{constructor(){this.changes=new ma((e=>e.toString()),((e,n)=>e.isEqual(n))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Yt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const s=this.changes.get(n);return s!==void 0?se.resolve(s):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class lD{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}class uD{constructor(e,n,s,o){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=s,this.indexManager=o}getDocument(e,n){let s=null;return this.documentOverlayCache.getOverlay(e,n).next((o=>(s=o,this.remoteDocumentCache.getEntry(e,n)))).next((o=>(s!==null&&Jl(s.mutation,o,Bn.empty(),ft.now()),o)))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next((s=>this.getLocalViewOfDocuments(e,s,He()).next((()=>s))))}getLocalViewOfDocuments(e,n,s=He()){const o=sa();return this.populateOverlays(e,o,n).next((()=>this.computeViews(e,n,o,s).next((u=>{let f=Fl();return u.forEach(((m,g)=>{f=f.insert(m,g.overlayedDocument)})),f}))))}getOverlayedDocuments(e,n){const s=sa();return this.populateOverlays(e,s,n).next((()=>this.computeViews(e,n,s,He())))}populateOverlays(e,n,s){const o=[];return s.forEach((u=>{n.has(u)||o.push(u)})),this.documentOverlayCache.getOverlays(e,o).next((u=>{u.forEach(((f,m)=>{n.set(f,m)}))}))}computeViews(e,n,s,o){let u=Rr();const f=Wl(),m=(function(){return Wl()})();return n.forEach(((g,p)=>{const E=s.get(p.key);o.has(p.key)&&(E===void 0||E.mutation instanceof Cs)?u=u.insert(p.key,p):E!==void 0?(f.set(p.key,E.mutation.getFieldMask()),Jl(E.mutation,p,E.mutation.getFieldMask(),ft.now())):f.set(p.key,Bn.empty())})),this.recalculateAndSaveOverlays(e,u).next((g=>(g.forEach(((p,E)=>f.set(p,E))),n.forEach(((p,E)=>m.set(p,new lD(E,f.get(p)??null)))),m)))}recalculateAndSaveOverlays(e,n){const s=Wl();let o=new yt(((f,m)=>f-m)),u=He();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next((f=>{for(const m of f)m.keys().forEach((g=>{const p=n.get(g);if(p===null)return;let E=s.get(g)||Bn.empty();E=m.applyToLocalView(p,E),s.set(g,E);const T=(o.get(m.batchId)||He()).add(g);o=o.insert(m.batchId,T)}))})).next((()=>{const f=[],m=o.getReverseIterator();for(;m.hasNext();){const g=m.getNext(),p=g.key,E=g.value,T=bb();E.forEach((I=>{if(!u.has(I)){const P=Db(n.get(I),s.get(I));P!==null&&T.set(I,P),u=u.add(I)}})),f.push(this.documentOverlayCache.saveOverlays(e,p,T))}return se.waitFor(f)})).next((()=>s))}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next((s=>this.recalculateAndSaveOverlays(e,s)))}getDocumentsMatchingQuery(e,n,s,o){return(function(f){return Te.isDocumentKey(f.path)&&f.collectionGroup===null&&f.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):yb(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,s,o):this.getDocumentsMatchingCollectionQuery(e,n,s,o)}getNextDocuments(e,n,s,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,s,o).next((u=>{const f=o-u.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,s.largestBatchId,o-u.size):se.resolve(sa());let m=iu,g=u;return f.next((p=>se.forEach(p,((E,T)=>(m<T.largestBatchId&&(m=T.largestBatchId),u.get(E)?se.resolve():this.remoteDocumentCache.getEntry(e,E).next((I=>{g=g.insert(E,I)}))))).next((()=>this.populateOverlays(e,p,u))).next((()=>this.computeViews(e,g,p,He()))).next((E=>({batchId:m,changes:Tb(E)})))))}))}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Te(n)).next((s=>{let o=Fl();return s.isFoundDocument()&&(o=o.insert(s.key,s)),o}))}getDocumentsMatchingCollectionGroupQuery(e,n,s,o){const u=n.collectionGroup;let f=Fl();return this.indexManager.getCollectionParents(e,u).next((m=>se.forEach(m,(g=>{const p=(function(T,I){return new Eu(I,null,T.explicitOrderBy.slice(),T.filters.slice(),T.limit,T.limitType,T.startAt,T.endAt)})(n,g.child(u));return this.getDocumentsMatchingCollectionQuery(e,p,s,o).next((E=>{E.forEach(((T,I)=>{f=f.insert(T,I)}))}))})).next((()=>f))))}getDocumentsMatchingCollectionQuery(e,n,s,o){let u;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,s.largestBatchId).next((f=>(u=f,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,s,u,o)))).next((f=>{u.forEach(((g,p)=>{const E=p.getKey();f.get(E)===null&&(f=f.insert(E,Yt.newInvalidDocument(E)))}));let m=Fl();return f.forEach(((g,p)=>{const E=u.get(g);E!==void 0&&Jl(E.mutation,p,Bn.empty(),ft.now()),of(n,p)&&(m=m.insert(g,p))})),m}))}}class cD{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return se.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,(function(o){return{id:o.id,version:o.version,createTime:qn(o.createTime)}})(n)),se.resolve()}getNamedQuery(e,n){return se.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,(function(o){return{name:o.name,query:ZI(o.bundledQuery),readTime:qn(o.readTime)}})(n)),se.resolve()}}class hD{constructor(){this.overlays=new yt(Te.comparator),this.qr=new Map}getOverlay(e,n){return se.resolve(this.overlays.get(n))}getOverlays(e,n){const s=sa();return se.forEach(n,(o=>this.getOverlay(e,o).next((u=>{u!==null&&s.set(o,u)})))).next((()=>s))}saveOverlays(e,n,s){return s.forEach(((o,u)=>{this.St(e,n,u)})),se.resolve()}removeOverlaysForBatchId(e,n,s){const o=this.qr.get(s);return o!==void 0&&(o.forEach((u=>this.overlays=this.overlays.remove(u))),this.qr.delete(s)),se.resolve()}getOverlaysForCollection(e,n,s){const o=sa(),u=n.length+1,f=new Te(n.child("")),m=this.overlays.getIteratorFrom(f);for(;m.hasNext();){const g=m.getNext().value,p=g.getKey();if(!n.isPrefixOf(p.path))break;p.path.length===u&&g.largestBatchId>s&&o.set(g.getKey(),g)}return se.resolve(o)}getOverlaysForCollectionGroup(e,n,s,o){let u=new yt(((p,E)=>p-E));const f=this.overlays.getIterator();for(;f.hasNext();){const p=f.getNext().value;if(p.getKey().getCollectionGroup()===n&&p.largestBatchId>s){let E=u.get(p.largestBatchId);E===null&&(E=sa(),u=u.insert(p.largestBatchId,E)),E.set(p.getKey(),p)}}const m=sa(),g=u.getIterator();for(;g.hasNext()&&(g.getNext().value.forEach(((p,E)=>m.set(p,E))),!(m.size()>=o)););return se.resolve(m)}St(e,n,s){const o=this.overlays.get(s.key);if(o!==null){const f=this.qr.get(o.largestBatchId).delete(s.key);this.qr.set(o.largestBatchId,f)}this.overlays=this.overlays.insert(s.key,new DI(n,s));let u=this.qr.get(n);u===void 0&&(u=He(),this.qr.set(n,u)),this.qr.set(n,u.add(s.key))}}class fD{constructor(){this.sessionToken=an.EMPTY_BYTE_STRING}getSessionToken(e){return se.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,se.resolve()}}class Xg{constructor(){this.Qr=new Ht(Qt.$r),this.Ur=new Ht(Qt.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const s=new Qt(e,n);this.Qr=this.Qr.add(s),this.Ur=this.Ur.add(s)}Wr(e,n){e.forEach((s=>this.addReference(s,n)))}removeReference(e,n){this.Gr(new Qt(e,n))}zr(e,n){e.forEach((s=>this.removeReference(s,n)))}jr(e){const n=new Te(new lt([])),s=new Qt(n,e),o=new Qt(n,e+1),u=[];return this.Ur.forEachInRange([s,o],(f=>{this.Gr(f),u.push(f.key)})),u}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new Te(new lt([])),s=new Qt(n,e),o=new Qt(n,e+1);let u=He();return this.Ur.forEachInRange([s,o],(f=>{u=u.add(f.key)})),u}containsKey(e){const n=new Qt(e,0),s=this.Qr.firstAfterOrEqual(n);return s!==null&&e.isEqual(s.key)}}class Qt{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return Te.comparator(e.key,n.key)||qe(e.Yr,n.Yr)}static Kr(e,n){return qe(e.Yr,n.Yr)||Te.comparator(e.key,n.key)}}class dD{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new Ht(Qt.$r)}checkEmpty(e){return se.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,s,o){const u=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const f=new II(u,n,s,o);this.mutationQueue.push(f);for(const m of o)this.Zr=this.Zr.add(new Qt(m.key,u)),this.indexManager.addToCollectionParentIndex(e,m.key.path.popLast());return se.resolve(f)}lookupMutationBatch(e,n){return se.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const s=n+1,o=this.ei(s),u=o<0?0:o;return se.resolve(this.mutationQueue.length>u?this.mutationQueue[u]:null)}getHighestUnacknowledgedBatchId(){return se.resolve(this.mutationQueue.length===0?Bg:this.tr-1)}getAllMutationBatches(e){return se.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const s=new Qt(n,0),o=new Qt(n,Number.POSITIVE_INFINITY),u=[];return this.Zr.forEachInRange([s,o],(f=>{const m=this.Xr(f.Yr);u.push(m)})),se.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,n){let s=new Ht(qe);return n.forEach((o=>{const u=new Qt(o,0),f=new Qt(o,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([u,f],(m=>{s=s.add(m.Yr)}))})),se.resolve(this.ti(s))}getAllMutationBatchesAffectingQuery(e,n){const s=n.path,o=s.length+1;let u=s;Te.isDocumentKey(u)||(u=u.child(""));const f=new Qt(new Te(u),0);let m=new Ht(qe);return this.Zr.forEachWhile((g=>{const p=g.key.path;return!!s.isPrefixOf(p)&&(p.length===o&&(m=m.add(g.Yr)),!0)}),f),se.resolve(this.ti(m))}ti(e){const n=[];return e.forEach((s=>{const o=this.Xr(s);o!==null&&n.push(o)})),n}removeMutationBatch(e,n){Qe(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Zr;return se.forEach(n.mutations,(o=>{const u=new Qt(o.key,n.batchId);return s=s.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)})).next((()=>{this.Zr=s}))}ir(e){}containsKey(e,n){const s=new Qt(n,0),o=this.Zr.firstAfterOrEqual(s);return se.resolve(n.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,se.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}class mD{constructor(e){this.ri=e,this.docs=(function(){return new yt(Te.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const s=n.key,o=this.docs.get(s),u=o?o.size:0,f=this.ri(n);return this.docs=this.docs.insert(s,{document:n.mutableCopy(),size:f}),this.size+=f-u,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const s=this.docs.get(n);return se.resolve(s?s.document.mutableCopy():Yt.newInvalidDocument(n))}getEntries(e,n){let s=Rr();return n.forEach((o=>{const u=this.docs.get(o);s=s.insert(o,u?u.document.mutableCopy():Yt.newInvalidDocument(o))})),se.resolve(s)}getDocumentsMatchingQuery(e,n,s,o){let u=Rr();const f=n.path,m=new Te(f.child("__id-9223372036854775808__")),g=this.docs.getIteratorFrom(m);for(;g.hasNext();){const{key:p,value:{document:E}}=g.getNext();if(!f.isPrefixOf(p.path))break;p.path.length>f.length+1||$2(G2(E),s)<=0||(o.has(E.key)||of(n,E))&&(u=u.insert(E.key,E.mutableCopy()))}return se.resolve(u)}getAllFromCollectionGroup(e,n,s,o){Ae(9500)}ii(e,n){return se.forEach(this.docs,(s=>n(s)))}newChangeBuffer(e){return new gD(this)}getSize(e){return se.resolve(this.size)}}class gD extends oD{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach(((s,o)=>{o.isValidDocument()?n.push(this.Nr.addEntry(e,o)):this.Nr.removeEntry(s)})),se.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}class pD{constructor(e){this.persistence=e,this.si=new ma((n=>Fg(n)),Gg),this.lastRemoteSnapshotVersion=xe.min(),this.highestTargetId=0,this.oi=0,this._i=new Xg,this.targetCount=0,this.ai=So.ur()}forEachTarget(e,n){return this.si.forEach(((s,o)=>n(o))),se.resolve()}getLastRemoteSnapshotVersion(e){return se.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return se.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),se.resolve(this.highestTargetId)}setTargetsMetadata(e,n,s){return s&&(this.lastRemoteSnapshotVersion=s),n>this.oi&&(this.oi=n),se.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new So(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,se.resolve()}updateTargetData(e,n){return this.Pr(n),se.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,se.resolve()}removeTargets(e,n,s){let o=0;const u=[];return this.si.forEach(((f,m)=>{m.sequenceNumber<=n&&s.get(m.targetId)===null&&(this.si.delete(f),u.push(this.removeMatchingKeysForTargetId(e,m.targetId)),o++)})),se.waitFor(u).next((()=>o))}getTargetCount(e){return se.resolve(this.targetCount)}getTargetData(e,n){const s=this.si.get(n)||null;return se.resolve(s)}addMatchingKeys(e,n,s){return this._i.Wr(n,s),se.resolve()}removeMatchingKeys(e,n,s){this._i.zr(n,s);const o=this.persistence.referenceDelegate,u=[];return o&&n.forEach((f=>{u.push(o.markPotentiallyOrphaned(e,f))})),se.waitFor(u)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),se.resolve()}getMatchingKeysForTargetId(e,n){const s=this._i.Hr(n);return se.resolve(s)}containsKey(e,n){return se.resolve(this._i.containsKey(n))}}class $b{constructor(e,n){this.ui={},this.overlays={},this.ci=new nf(0),this.li=!1,this.li=!0,this.hi=new fD,this.referenceDelegate=e(this),this.Pi=new pD(this),this.indexManager=new eD,this.remoteDocumentCache=(function(o){return new mD(o)})((s=>this.referenceDelegate.Ti(s))),this.serializer=new JI(n),this.Ii=new cD(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new hD,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let s=this.ui[e.toKey()];return s||(s=new dD(n,this.referenceDelegate),this.ui[e.toKey()]=s),s}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,s){pe("MemoryPersistence","Starting transaction:",e);const o=new yD(this.ci.next());return this.referenceDelegate.Ei(),s(o).next((u=>this.referenceDelegate.di(o).next((()=>u)))).toPromise().then((u=>(o.raiseOnCommittedEvent(),u)))}Ai(e,n){return se.or(Object.values(this.ui).map((s=>()=>s.containsKey(e,n))))}}class yD extends Y2{constructor(e){super(),this.currentSequenceNumber=e}}class Wg{constructor(e){this.persistence=e,this.Ri=new Xg,this.Vi=null}static mi(e){return new Wg(e)}get fi(){if(this.Vi)return this.Vi;throw Ae(60996)}addReference(e,n,s){return this.Ri.addReference(s,n),this.fi.delete(s.toString()),se.resolve()}removeReference(e,n,s){return this.Ri.removeReference(s,n),this.fi.add(s.toString()),se.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),se.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach((o=>this.fi.add(o.toString())));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,n.targetId).next((o=>{o.forEach((u=>this.fi.add(u.toString())))})).next((()=>s.removeTargetData(e,n)))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return se.forEach(this.fi,(s=>{const o=Te.fromPath(s);return this.gi(e,o).next((u=>{u||n.removeEntry(o,xe.min())}))})).next((()=>(this.Vi=null,n.apply(e))))}updateLimboDocument(e,n){return this.gi(e,n).next((s=>{s?this.fi.delete(n.toString()):this.fi.add(n.toString())}))}Ti(e){return 0}gi(e,n){return se.or([()=>se.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class Hh{constructor(e,n){this.persistence=e,this.pi=new ma((s=>W2(s.path)),((s,o)=>s.isEqual(o))),this.garbageCollector=aD(this,n)}static mi(e,n){return new Hh(e,n)}Ei(){}di(e){return se.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((s=>n.next((o=>s+o))))}wr(e){let n=0;return this.pr(e,(s=>{n++})).next((()=>n))}pr(e,n){return se.forEach(this.pi,((s,o)=>this.br(e,s,o).next((u=>u?se.resolve():n(o)))))}removeTargets(e,n,s){return this.persistence.getTargetCache().removeTargets(e,n,s)}removeOrphanedDocuments(e,n){let s=0;const o=this.persistence.getRemoteDocumentCache(),u=o.newChangeBuffer();return o.ii(e,(f=>this.br(e,f,n).next((m=>{m||(s++,u.removeEntry(f,xe.min()))})))).next((()=>u.apply(e))).next((()=>s))}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),se.resolve()}removeTarget(e,n){const s=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,s)}addReference(e,n,s){return this.pi.set(s,e.currentSequenceNumber),se.resolve()}removeReference(e,n,s){return this.pi.set(s,e.currentSequenceNumber),se.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),se.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Th(e.data.value)),n}br(e,n,s){return se.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const o=this.pi.get(n);return se.resolve(o!==void 0&&o>s)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class Jg{constructor(e,n,s,o){this.targetId=e,this.fromCache=n,this.Es=s,this.ds=o}static As(e,n){let s=He(),o=He();for(const u of n.docChanges)switch(u.type){case 0:s=s.add(u.doc.key);break;case 1:o=o.add(u.doc.key)}return new Jg(e,n.fromCache,s,o)}}class vD{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class _D{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return fR()?8:K2(fn())>0?6:4})()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,s,o){const u={result:null};return this.ys(e,n).next((f=>{u.result=f})).next((()=>{if(!u.result)return this.ws(e,n,o,s).next((f=>{u.result=f}))})).next((()=>{if(u.result)return;const f=new vD;return this.Ss(e,n,f).next((m=>{if(u.result=m,this.Vs)return this.bs(e,n,f,m.size)}))})).next((()=>u.result))}bs(e,n,s,o){return s.documentReadCount<this.fs?(ao()<=Be.DEBUG&&pe("QueryEngine","SDK will not create cache indexes for query:",oo(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),se.resolve()):(ao()<=Be.DEBUG&&pe("QueryEngine","Query:",oo(n),"scans",s.documentReadCount,"local documents and returns",o,"documents as results."),s.documentReadCount>this.gs*o?(ao()<=Be.DEBUG&&pe("QueryEngine","The SDK decides to create cache indexes for query:",oo(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,$i(n))):se.resolve())}ys(e,n){if(tE(n))return se.resolve(null);let s=$i(n);return this.indexManager.getIndexType(e,s).next((o=>o===0?null:(n.limit!==null&&o===1&&(n=og(n,null,"F"),s=$i(n)),this.indexManager.getDocumentsMatchingTarget(e,s).next((u=>{const f=He(...u);return this.ps.getDocuments(e,f).next((m=>this.indexManager.getMinOffset(e,s).next((g=>{const p=this.Ds(n,m);return this.Cs(n,p,f,g.readTime)?this.ys(e,og(n,null,"F")):this.vs(e,p,n,g)}))))})))))}ws(e,n,s,o){return tE(n)||o.isEqual(xe.min())?se.resolve(null):this.ps.getDocuments(e,s).next((u=>{const f=this.Ds(n,u);return this.Cs(n,f,s,o)?se.resolve(null):(ao()<=Be.DEBUG&&pe("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),oo(n)),this.vs(e,f,n,F2(o,iu)).next((m=>m)))}))}Ds(e,n){let s=new Ht(_b(e));return n.forEach(((o,u)=>{of(e,u)&&(s=s.add(u))})),s}Cs(e,n,s,o){if(e.limit===null)return!1;if(s.size!==n.size)return!0;const u=e.limitType==="F"?n.last():n.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(o)>0)}Ss(e,n,s){return ao()<=Be.DEBUG&&pe("QueryEngine","Using full collection scan to execute query:",oo(n)),this.ps.getDocumentsMatchingQuery(e,n,_s.min(),s)}vs(e,n,s,o){return this.ps.getDocumentsMatchingQuery(e,s,o).next((u=>(n.forEach((f=>{u=u.insert(f.key,f)})),u)))}}const Zg="LocalStore",ED=3e8;class TD{constructor(e,n,s,o){this.persistence=e,this.Fs=n,this.serializer=o,this.Ms=new yt(qe),this.xs=new ma((u=>Fg(u)),Gg),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(s)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new uD(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>e.collect(n,this.Ms)))}}function bD(r,e,n,s){return new TD(r,e,n,s)}async function Qb(r,e){const n=De(r);return await n.persistence.runTransaction("Handle user change","readonly",(s=>{let o;return n.mutationQueue.getAllMutationBatches(s).next((u=>(o=u,n.Bs(e),n.mutationQueue.getAllMutationBatches(s)))).next((u=>{const f=[],m=[];let g=He();for(const p of o){f.push(p.batchId);for(const E of p.mutations)g=g.add(E.key)}for(const p of u){m.push(p.batchId);for(const E of p.mutations)g=g.add(E.key)}return n.localDocuments.getDocuments(s,g).next((p=>({Ls:p,removedBatchIds:f,addedBatchIds:m})))}))}))}function SD(r,e){const n=De(r);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(s=>{const o=e.batch.keys(),u=n.Ns.newChangeBuffer({trackRemovals:!0});return(function(m,g,p,E){const T=p.batch,I=T.keys();let P=se.resolve();return I.forEach((j=>{P=P.next((()=>E.getEntry(g,j))).next(($=>{const B=p.docVersions.get(j);Qe(B!==null,48541),$.version.compareTo(B)<0&&(T.applyToRemoteDocument($,p),$.isValidDocument()&&($.setReadTime(p.commitVersion),E.addEntry($)))}))})),P.next((()=>m.mutationQueue.removeMutationBatch(g,T)))})(n,s,e,u).next((()=>u.apply(s))).next((()=>n.mutationQueue.performConsistencyCheck(s))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(s,o,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,(function(m){let g=He();for(let p=0;p<m.mutationResults.length;++p)m.mutationResults[p].transformResults.length>0&&(g=g.add(m.batch.mutations[p].key));return g})(e)))).next((()=>n.localDocuments.getDocuments(s,o)))}))}function Yb(r){const e=De(r);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>e.Pi.getLastRemoteSnapshotVersion(n)))}function AD(r,e){const n=De(r),s=e.snapshotVersion;let o=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(u=>{const f=n.Ns.newChangeBuffer({trackRemovals:!0});o=n.Ms;const m=[];e.targetChanges.forEach(((E,T)=>{const I=o.get(T);if(!I)return;m.push(n.Pi.removeMatchingKeys(u,E.removedDocuments,T).next((()=>n.Pi.addMatchingKeys(u,E.addedDocuments,T))));let P=I.withSequenceNumber(u.currentSequenceNumber);e.targetMismatches.get(T)!==null?P=P.withResumeToken(an.EMPTY_BYTE_STRING,xe.min()).withLastLimboFreeSnapshotVersion(xe.min()):E.resumeToken.approximateByteSize()>0&&(P=P.withResumeToken(E.resumeToken,s)),o=o.insert(T,P),(function($,B,Z){return $.resumeToken.approximateByteSize()===0||B.snapshotVersion.toMicroseconds()-$.snapshotVersion.toMicroseconds()>=ED?!0:Z.addedDocuments.size+Z.modifiedDocuments.size+Z.removedDocuments.size>0})(I,P,E)&&m.push(n.Pi.updateTargetData(u,P))}));let g=Rr(),p=He();if(e.documentUpdates.forEach((E=>{e.resolvedLimboDocuments.has(E)&&m.push(n.persistence.referenceDelegate.updateLimboDocument(u,E))})),m.push(wD(u,f,e.documentUpdates).next((E=>{g=E.ks,p=E.qs}))),!s.isEqual(xe.min())){const E=n.Pi.getLastRemoteSnapshotVersion(u).next((T=>n.Pi.setTargetsMetadata(u,u.currentSequenceNumber,s)));m.push(E)}return se.waitFor(m).next((()=>f.apply(u))).next((()=>n.localDocuments.getLocalViewOfDocuments(u,g,p))).next((()=>g))})).then((u=>(n.Ms=o,u)))}function wD(r,e,n){let s=He(),o=He();return n.forEach((u=>s=s.add(u))),e.getEntries(r,s).next((u=>{let f=Rr();return n.forEach(((m,g)=>{const p=u.get(m);g.isFoundDocument()!==p.isFoundDocument()&&(o=o.add(m)),g.isNoDocument()&&g.version.isEqual(xe.min())?(e.removeEntry(m,g.readTime),f=f.insert(m,g)):!p.isValidDocument()||g.version.compareTo(p.version)>0||g.version.compareTo(p.version)===0&&p.hasPendingWrites?(e.addEntry(g),f=f.insert(m,g)):pe(Zg,"Ignoring outdated watch update for ",m,". Current version:",p.version," Watch version:",g.version)})),{ks:f,qs:o}}))}function RD(r,e){const n=De(r);return n.persistence.runTransaction("Get next mutation batch","readonly",(s=>(e===void 0&&(e=Bg),n.mutationQueue.getNextMutationBatchAfterBatchId(s,e))))}function CD(r,e){const n=De(r);return n.persistence.runTransaction("Allocate target","readwrite",(s=>{let o;return n.Pi.getTargetData(s,e).next((u=>u?(o=u,se.resolve(o)):n.Pi.allocateTargetId(s).next((f=>(o=new hs(e,f,"TargetPurposeListen",s.currentSequenceNumber),n.Pi.addTargetData(s,o).next((()=>o)))))))})).then((s=>{const o=n.Ms.get(s.targetId);return(o===null||s.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(s.targetId,s),n.xs.set(e,s.targetId)),s}))}async function hg(r,e,n){const s=De(r),o=s.Ms.get(e),u=n?"readwrite":"readwrite-primary";try{n||await s.persistence.runTransaction("Release target",u,(f=>s.persistence.referenceDelegate.removeTarget(f,o)))}catch(f){if(!ko(f))throw f;pe(Zg,`Failed to update sequence numbers for target ${e}: ${f}`)}s.Ms=s.Ms.remove(e),s.xs.delete(o.target)}function mE(r,e,n){const s=De(r);let o=xe.min(),u=He();return s.persistence.runTransaction("Execute query","readwrite",(f=>(function(g,p,E){const T=De(g),I=T.xs.get(E);return I!==void 0?se.resolve(T.Ms.get(I)):T.Pi.getTargetData(p,E)})(s,f,$i(e)).next((m=>{if(m)return o=m.lastLimboFreeSnapshotVersion,s.Pi.getMatchingKeysForTargetId(f,m.targetId).next((g=>{u=g}))})).next((()=>s.Fs.getDocumentsMatchingQuery(f,e,n?o:xe.min(),n?u:He()))).next((m=>(xD(s,pI(e),m),{documents:m,Qs:u})))))}function xD(r,e,n){let s=r.Os.get(e)||xe.min();n.forEach(((o,u)=>{u.readTime.compareTo(s)>0&&(s=u.readTime)})),r.Os.set(e,s)}class gE{constructor(){this.activeTargetIds=bI()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class ID{constructor(){this.Mo=new gE,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,s){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,s){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new gE,Promise.resolve()}handleUserChange(e,n,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class DD{Oo(e){}shutdown(){}}const pE="ConnectivityMonitor";class yE{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){pe(pE,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){pe(pE,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let fh=null;function fg(){return fh===null?fh=(function(){return 268435456+Math.round(2147483648*Math.random())})():fh++,"0x"+fh.toString(16)}const Lm="RestConnection",ND={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class OD{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${s}/databases/${o}`,this.Wo=this.databaseId.database===Lh?`project_id=${s}`:`project_id=${s}&database_id=${o}`}Go(e,n,s,o,u){const f=fg(),m=this.zo(e,n.toUriEncodedString());pe(Lm,`Sending RPC '${e}' ${f}:`,m,s);const g={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(g,o,u);const{host:p}=new URL(m),E=Do(p);return this.Jo(e,m,g,s,E).then((T=>(pe(Lm,`Received RPC '${e}' ${f}: `,T),T)),(T=>{throw _o(Lm,`RPC '${e}' ${f} failed with error: `,T,"url: ",m,"request:",s),T}))}Ho(e,n,s,o,u,f){return this.Go(e,n,s,o,u)}jo(e,n,s){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Mo})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((o,u)=>e[u]=o)),s&&s.headers.forEach(((o,u)=>e[u]=o))}zo(e,n){const s=ND[e];return`${this.Uo}/v1/${n}:${s}`}terminate(){}}class MD{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}const cn="WebChannelConnection";class VD extends OD{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,s,o,u){const f=fg();return new Promise(((m,g)=>{const p=new $T;p.setWithCredentials(!0),p.listenOnce(QT.COMPLETE,(()=>{try{switch(p.getLastErrorCode()){case Eh.NO_ERROR:const T=p.getResponseJson();pe(cn,`XHR for RPC '${e}' ${f} received:`,JSON.stringify(T)),m(T);break;case Eh.TIMEOUT:pe(cn,`RPC '${e}' ${f} timed out`),g(new me(ne.DEADLINE_EXCEEDED,"Request time out"));break;case Eh.HTTP_ERROR:const I=p.getStatus();if(pe(cn,`RPC '${e}' ${f} failed with status:`,I,"response text:",p.getResponseText()),I>0){let P=p.getResponseJson();Array.isArray(P)&&(P=P[0]);const j=P?.error;if(j&&j.status&&j.message){const $=(function(Z){const J=Z.toLowerCase().replace(/_/g,"-");return Object.values(ne).indexOf(J)>=0?J:ne.UNKNOWN})(j.status);g(new me($,j.message))}else g(new me(ne.UNKNOWN,"Server responded with status "+p.getStatus()))}else g(new me(ne.UNAVAILABLE,"Connection failed."));break;default:Ae(9055,{l_:e,streamId:f,h_:p.getLastErrorCode(),P_:p.getLastError()})}}finally{pe(cn,`RPC '${e}' ${f} completed.`)}}));const E=JSON.stringify(o);pe(cn,`RPC '${e}' ${f} sending request:`,o),p.send(n,"POST",E,s,15)}))}T_(e,n,s){const o=fg(),u=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],f=XT(),m=KT(),g={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},p=this.longPollingOptions.timeoutSeconds;p!==void 0&&(g.longPollingTimeout=Math.round(1e3*p)),this.useFetchStreams&&(g.useFetchStreams=!0),this.jo(g.initMessageHeaders,n,s),g.encodeInitMessageHeaders=!0;const E=u.join("");pe(cn,`Creating RPC '${e}' stream ${o}: ${E}`,g);const T=f.createWebChannel(E,g);this.I_(T);let I=!1,P=!1;const j=new MD({Yo:B=>{P?pe(cn,`Not sending because RPC '${e}' stream ${o} is closed:`,B):(I||(pe(cn,`Opening RPC '${e}' stream ${o} transport.`),T.open(),I=!0),pe(cn,`RPC '${e}' stream ${o} sending:`,B),T.send(B))},Zo:()=>T.close()}),$=(B,Z,J)=>{B.listen(Z,(q=>{try{J(q)}catch(ge){setTimeout((()=>{throw ge}),0)}}))};return $(T,Hl.EventType.OPEN,(()=>{P||(pe(cn,`RPC '${e}' stream ${o} transport opened.`),j.o_())})),$(T,Hl.EventType.CLOSE,(()=>{P||(P=!0,pe(cn,`RPC '${e}' stream ${o} transport closed`),j.a_(),this.E_(T))})),$(T,Hl.EventType.ERROR,(B=>{P||(P=!0,_o(cn,`RPC '${e}' stream ${o} transport errored. Name:`,B.name,"Message:",B.message),j.a_(new me(ne.UNAVAILABLE,"The operation could not be completed")))})),$(T,Hl.EventType.MESSAGE,(B=>{if(!P){const Z=B.data[0];Qe(!!Z,16349);const J=Z,q=J?.error||J[0]?.error;if(q){pe(cn,`RPC '${e}' stream ${o} received error:`,q);const ge=q.status;let _e=(function(x){const w=Pt[x];if(w!==void 0)return Vb(w)})(ge),Ee=q.message;_e===void 0&&(_e=ne.INTERNAL,Ee="Unknown error status: "+ge+" with message "+q.message),P=!0,j.a_(new me(_e,Ee)),T.close()}else pe(cn,`RPC '${e}' stream ${o} received:`,Z),j.u_(Z)}})),$(m,YT.STAT_EVENT,(B=>{B.stat===eg.PROXY?pe(cn,`RPC '${e}' stream ${o} detected buffering proxy`):B.stat===eg.NOPROXY&&pe(cn,`RPC '${e}' stream ${o} detected no buffering proxy`)})),setTimeout((()=>{j.__()}),0),j}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((n=>n===e))}}function jm(){return typeof document<"u"?document:null}function ff(r){return new jI(r,!0)}class ep{constructor(e,n,s=1e3,o=1.5,u=6e4){this.Mi=e,this.timerId=n,this.d_=s,this.A_=o,this.R_=u,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),s=Math.max(0,Date.now()-this.f_),o=Math.max(0,n-s);o>0&&pe("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${s} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,o,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}const vE="PersistentStream";class Kb{constructor(e,n,s,o,u,f,m,g){this.Mi=e,this.S_=s,this.b_=o,this.connection=u,this.authCredentialsProvider=f,this.appCheckCredentialsProvider=m,this.listener=g,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new ep(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===ne.RESOURCE_EXHAUSTED?(wr(n.toString()),wr("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===ne.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([s,o])=>{this.D_===n&&this.G_(s,o)}),(s=>{e((()=>{const o=new me(ne.UNKNOWN,"Fetching auth token failed: "+s.message);return this.z_(o)}))}))}G_(e,n){const s=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo((()=>{s((()=>this.listener.Xo()))})),this.stream.t_((()=>{s((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((o=>{s((()=>this.z_(o)))})),this.stream.onMessage((o=>{s((()=>++this.F_==1?this.J_(o):this.onNext(o)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return pe(vE,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget((()=>this.D_===e?n():(pe(vE,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class kD extends Kb{constructor(e,n,s,o,u,f){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,s,o,f),this.serializer=u}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=qI(this.serializer,e),s=(function(u){if(!("targetChange"in u))return xe.min();const f=u.targetChange;return f.targetIds&&f.targetIds.length?xe.min():f.readTime?qn(f.readTime):xe.min()})(e);return this.listener.H_(n,s)}Y_(e){const n={};n.database=cg(this.serializer),n.addTarget=(function(u,f){let m;const g=f.target;if(m=sg(g)?{documents:FI(u,g)}:{query:GI(u,g).ft},m.targetId=f.targetId,f.resumeToken.approximateByteSize()>0){m.resumeToken=Lb(u,f.resumeToken);const p=lg(u,f.expectedCount);p!==null&&(m.expectedCount=p)}else if(f.snapshotVersion.compareTo(xe.min())>0){m.readTime=Bh(u,f.snapshotVersion.toTimestamp());const p=lg(u,f.expectedCount);p!==null&&(m.expectedCount=p)}return m})(this.serializer,e);const s=QI(this.serializer,e);s&&(n.labels=s),this.q_(n)}Z_(e){const n={};n.database=cg(this.serializer),n.removeTarget=e,this.q_(n)}}class PD extends Kb{constructor(e,n,s,o,u,f){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,s,o,f),this.serializer=u}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return Qe(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Qe(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Qe(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=HI(e.writeResults,e.commitTime),s=qn(e.commitTime);return this.listener.na(s,n)}ra(){const e={};e.database=cg(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map((s=>Bb(this.serializer,s)))};this.q_(n)}}class LD{}class jD extends LD{constructor(e,n,s,o){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=s,this.serializer=o,this.ia=!1}sa(){if(this.ia)throw new me(ne.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,s,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([u,f])=>this.connection.Go(e,ug(n,s),o,u,f))).catch((u=>{throw u.name==="FirebaseError"?(u.code===ne.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new me(ne.UNKNOWN,u.toString())}))}Ho(e,n,s,o,u){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([f,m])=>this.connection.Ho(e,ug(n,s),o,f,m,u))).catch((f=>{throw f.name==="FirebaseError"?(f.code===ne.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),f):new me(ne.UNKNOWN,f.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class UD{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(wr(n),this.aa=!1):pe("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const da="RemoteStore";class zD{constructor(e,n,s,o,u){this.localStore=e,this.datastore=n,this.asyncQueue=s,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=u,this.Aa.Oo((f=>{s.enqueueAndForget((async()=>{ga(this)&&(pe(da,"Restarting streams for network reachability change."),await(async function(g){const p=De(g);p.Ea.add(4),await Su(p),p.Ra.set("Unknown"),p.Ea.delete(4),await df(p)})(this))}))})),this.Ra=new UD(s,o)}}async function df(r){if(ga(r))for(const e of r.da)await e(!0)}async function Su(r){for(const e of r.da)await e(!1)}function Xb(r,e){const n=De(r);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),rp(n)?ip(n):Po(n).O_()&&np(n,e))}function tp(r,e){const n=De(r),s=Po(n);n.Ia.delete(e),s.O_()&&Wb(n,e),n.Ia.size===0&&(s.O_()?s.L_():ga(n)&&n.Ra.set("Unknown"))}function np(r,e){if(r.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(xe.min())>0){const n=r.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Po(r).Y_(e)}function Wb(r,e){r.Va.Ue(e),Po(r).Z_(e)}function ip(r){r.Va=new VI({getRemoteKeysForTarget:e=>r.remoteSyncer.getRemoteKeysForTarget(e),At:e=>r.Ia.get(e)||null,ht:()=>r.datastore.serializer.databaseId}),Po(r).start(),r.Ra.ua()}function rp(r){return ga(r)&&!Po(r).x_()&&r.Ia.size>0}function ga(r){return De(r).Ea.size===0}function Jb(r){r.Va=void 0}async function BD(r){r.Ra.set("Online")}async function qD(r){r.Ia.forEach(((e,n)=>{np(r,e)}))}async function HD(r,e){Jb(r),rp(r)?(r.Ra.ha(e),ip(r)):r.Ra.set("Unknown")}async function FD(r,e,n){if(r.Ra.set("Online"),e instanceof Pb&&e.state===2&&e.cause)try{await(async function(o,u){const f=u.cause;for(const m of u.targetIds)o.Ia.has(m)&&(await o.remoteSyncer.rejectListen(m,f),o.Ia.delete(m),o.Va.removeTarget(m))})(r,e)}catch(s){pe(da,"Failed to remove targets %s: %s ",e.targetIds.join(","),s),await Fh(r,s)}else if(e instanceof Ah?r.Va.Ze(e):e instanceof kb?r.Va.st(e):r.Va.tt(e),!n.isEqual(xe.min()))try{const s=await Yb(r.localStore);n.compareTo(s)>=0&&await(function(u,f){const m=u.Va.Tt(f);return m.targetChanges.forEach(((g,p)=>{if(g.resumeToken.approximateByteSize()>0){const E=u.Ia.get(p);E&&u.Ia.set(p,E.withResumeToken(g.resumeToken,f))}})),m.targetMismatches.forEach(((g,p)=>{const E=u.Ia.get(g);if(!E)return;u.Ia.set(g,E.withResumeToken(an.EMPTY_BYTE_STRING,E.snapshotVersion)),Wb(u,g);const T=new hs(E.target,g,p,E.sequenceNumber);np(u,T)})),u.remoteSyncer.applyRemoteEvent(m)})(r,n)}catch(s){pe(da,"Failed to raise snapshot:",s),await Fh(r,s)}}async function Fh(r,e,n){if(!ko(e))throw e;r.Ea.add(1),await Su(r),r.Ra.set("Offline"),n||(n=()=>Yb(r.localStore)),r.asyncQueue.enqueueRetryable((async()=>{pe(da,"Retrying IndexedDB access"),await n(),r.Ea.delete(1),await df(r)}))}function Zb(r,e){return e().catch((n=>Fh(r,n,e)))}async function mf(r){const e=De(r),n=Ss(e);let s=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Bg;for(;GD(e);)try{const o=await RD(e.localStore,s);if(o===null){e.Ta.length===0&&n.L_();break}s=o.batchId,$D(e,o)}catch(o){await Fh(e,o)}eS(e)&&tS(e)}function GD(r){return ga(r)&&r.Ta.length<10}function $D(r,e){r.Ta.push(e);const n=Ss(r);n.O_()&&n.X_&&n.ea(e.mutations)}function eS(r){return ga(r)&&!Ss(r).x_()&&r.Ta.length>0}function tS(r){Ss(r).start()}async function QD(r){Ss(r).ra()}async function YD(r){const e=Ss(r);for(const n of r.Ta)e.ea(n.mutations)}async function KD(r,e,n){const s=r.Ta.shift(),o=Qg.from(s,e,n);await Zb(r,(()=>r.remoteSyncer.applySuccessfulWrite(o))),await mf(r)}async function XD(r,e){e&&Ss(r).X_&&await(async function(s,o){if((function(f){return Mb(f)&&f!==ne.ABORTED})(o.code)){const u=s.Ta.shift();Ss(s).B_(),await Zb(s,(()=>s.remoteSyncer.rejectFailedWrite(u.batchId,o))),await mf(s)}})(r,e),eS(r)&&tS(r)}async function _E(r,e){const n=De(r);n.asyncQueue.verifyOperationInProgress(),pe(da,"RemoteStore received new credentials");const s=ga(n);n.Ea.add(3),await Su(n),s&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await df(n)}async function WD(r,e){const n=De(r);e?(n.Ea.delete(2),await df(n)):e||(n.Ea.add(2),await Su(n),n.Ra.set("Unknown"))}function Po(r){return r.ma||(r.ma=(function(n,s,o){const u=De(n);return u.sa(),new kD(s,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)})(r.datastore,r.asyncQueue,{Xo:BD.bind(null,r),t_:qD.bind(null,r),r_:HD.bind(null,r),H_:FD.bind(null,r)}),r.da.push((async e=>{e?(r.ma.B_(),rp(r)?ip(r):r.Ra.set("Unknown")):(await r.ma.stop(),Jb(r))}))),r.ma}function Ss(r){return r.fa||(r.fa=(function(n,s,o){const u=De(n);return u.sa(),new PD(s,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)})(r.datastore,r.asyncQueue,{Xo:()=>Promise.resolve(),t_:QD.bind(null,r),r_:XD.bind(null,r),ta:YD.bind(null,r),na:KD.bind(null,r)}),r.da.push((async e=>{e?(r.fa.B_(),await mf(r)):(await r.fa.stop(),r.Ta.length>0&&(pe(da,`Stopping write stream with ${r.Ta.length} pending writes`),r.Ta=[]))}))),r.fa}class sp{constructor(e,n,s,o,u){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=s,this.op=o,this.removalCallback=u,this.deferred=new Gi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((f=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,n,s,o,u){const f=Date.now()+s,m=new sp(e,n,f,o,u);return m.start(s),m}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new me(ne.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function ap(r,e){if(wr("AsyncQueue",`${e}: ${r}`),ko(r))return new me(ne.UNAVAILABLE,`${e}: ${r}`);throw r}class po{static emptySet(e){return new po(e.comparator)}constructor(e){this.comparator=e?(n,s)=>e(n,s)||Te.comparator(n.key,s.key):(n,s)=>Te.comparator(n.key,s.key),this.keyedMap=Fl(),this.sortedSet=new yt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((n,s)=>(e(n),!1)))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof po)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;n.hasNext();){const o=n.getNext().key,u=s.getNext().key;if(!o.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach((n=>{e.push(n.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const s=new po;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=n,s}}class EE{constructor(){this.ga=new yt(Te.comparator)}track(e){const n=e.doc.key,s=this.ga.get(n);s?e.type!==0&&s.type===3?this.ga=this.ga.insert(n,e):e.type===3&&s.type!==1?this.ga=this.ga.insert(n,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.ga=this.ga.remove(n):e.type===1&&s.type===2?this.ga=this.ga.insert(n,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):Ae(63341,{Rt:e,pa:s}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal(((n,s)=>{e.push(s)})),e}}class Ao{constructor(e,n,s,o,u,f,m,g,p){this.query=e,this.docs=n,this.oldDocs=s,this.docChanges=o,this.mutatedKeys=u,this.fromCache=f,this.syncStateChanged=m,this.excludesMetadataChanges=g,this.hasCachedResults=p}static fromInitialDocuments(e,n,s,o,u){const f=[];return n.forEach((m=>{f.push({type:0,doc:m})})),new Ao(e,n,po.emptySet(n),f,s,o,!0,!1,u)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&af(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,s=e.docChanges;if(n.length!==s.length)return!1;for(let o=0;o<n.length;o++)if(n[o].type!==s[o].type||!n[o].doc.isEqual(s[o].doc))return!1;return!0}}class JD{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class ZD{constructor(){this.queries=TE(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,s){const o=De(n),u=o.queries;o.queries=TE(),u.forEach(((f,m)=>{for(const g of m.Sa)g.onError(s)}))})(this,new me(ne.ABORTED,"Firestore shutting down"))}}function TE(){return new ma((r=>vb(r)),af)}async function op(r,e){const n=De(r);let s=3;const o=e.query;let u=n.queries.get(o);u?!u.ba()&&e.Da()&&(s=2):(u=new JD,s=e.Da()?0:1);try{switch(s){case 0:u.wa=await n.onListen(o,!0);break;case 1:u.wa=await n.onListen(o,!1);break;case 2:await n.onFirstRemoteStoreListen(o)}}catch(f){const m=ap(f,`Initialization of query '${oo(e.query)}' failed`);return void e.onError(m)}n.queries.set(o,u),u.Sa.push(e),e.va(n.onlineState),u.wa&&e.Fa(u.wa)&&up(n)}async function lp(r,e){const n=De(r),s=e.query;let o=3;const u=n.queries.get(s);if(u){const f=u.Sa.indexOf(e);f>=0&&(u.Sa.splice(f,1),u.Sa.length===0?o=e.Da()?0:1:!u.ba()&&e.Da()&&(o=2))}switch(o){case 0:return n.queries.delete(s),n.onUnlisten(s,!0);case 1:return n.queries.delete(s),n.onUnlisten(s,!1);case 2:return n.onLastRemoteStoreUnlisten(s);default:return}}function eN(r,e){const n=De(r);let s=!1;for(const o of e){const u=o.query,f=n.queries.get(u);if(f){for(const m of f.Sa)m.Fa(o)&&(s=!0);f.wa=o}}s&&up(n)}function tN(r,e,n){const s=De(r),o=s.queries.get(e);if(o)for(const u of o.Sa)u.onError(n);s.queries.delete(e)}function up(r){r.Ca.forEach((e=>{e.next()}))}var dg,bE;(bE=dg||(dg={})).Ma="default",bE.Cache="cache";class cp{constructor(e,n,s){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=s||{}}Fa(e){if(!this.options.includeMetadataChanges){const s=[];for(const o of e.docChanges)o.type!==3&&s.push(o);e=new Ao(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const s=n!=="Offline";return(!this.options.qa||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=Ao.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==dg.Cache}}class nS{constructor(e){this.key=e}}class iS{constructor(e){this.key=e}}class nN{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=He(),this.mutatedKeys=He(),this.eu=_b(e),this.tu=new po(this.eu)}get nu(){return this.Ya}ru(e,n){const s=n?n.iu:new EE,o=n?n.tu:this.tu;let u=n?n.mutatedKeys:this.mutatedKeys,f=o,m=!1;const g=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,p=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal(((E,T)=>{const I=o.get(E),P=of(this.query,T)?T:null,j=!!I&&this.mutatedKeys.has(I.key),$=!!P&&(P.hasLocalMutations||this.mutatedKeys.has(P.key)&&P.hasCommittedMutations);let B=!1;I&&P?I.data.isEqual(P.data)?j!==$&&(s.track({type:3,doc:P}),B=!0):this.su(I,P)||(s.track({type:2,doc:P}),B=!0,(g&&this.eu(P,g)>0||p&&this.eu(P,p)<0)&&(m=!0)):!I&&P?(s.track({type:0,doc:P}),B=!0):I&&!P&&(s.track({type:1,doc:I}),B=!0,(g||p)&&(m=!0)),B&&(P?(f=f.add(P),u=$?u.add(E):u.delete(E)):(f=f.delete(E),u=u.delete(E)))})),this.query.limit!==null)for(;f.size>this.query.limit;){const E=this.query.limitType==="F"?f.last():f.first();f=f.delete(E.key),u=u.delete(E.key),s.track({type:1,doc:E})}return{tu:f,iu:s,Cs:m,mutatedKeys:u}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,s,o){const u=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const f=e.iu.ya();f.sort(((E,T)=>(function(P,j){const $=B=>{switch(B){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ae(20277,{Rt:B})}};return $(P)-$(j)})(E.type,T.type)||this.eu(E.doc,T.doc))),this.ou(s),o=o??!1;const m=n&&!o?this._u():[],g=this.Xa.size===0&&this.current&&!o?1:0,p=g!==this.Za;return this.Za=g,f.length!==0||p?{snapshot:new Ao(this.query,e.tu,u,f,e.mutatedKeys,g===0,p,!1,!!s&&s.resumeToken.approximateByteSize()>0),au:m}:{au:m}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new EE,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((n=>this.Ya=this.Ya.add(n))),e.modifiedDocuments.forEach((n=>{})),e.removedDocuments.forEach((n=>this.Ya=this.Ya.delete(n))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=He(),this.tu.forEach((s=>{this.uu(s.key)&&(this.Xa=this.Xa.add(s.key))}));const n=[];return e.forEach((s=>{this.Xa.has(s)||n.push(new iS(s))})),this.Xa.forEach((s=>{e.has(s)||n.push(new nS(s))})),n}cu(e){this.Ya=e.Qs,this.Xa=He();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return Ao.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const hp="SyncEngine";class iN{constructor(e,n,s){this.query=e,this.targetId=n,this.view=s}}class rN{constructor(e){this.key=e,this.hu=!1}}class sN{constructor(e,n,s,o,u,f){this.localStore=e,this.remoteStore=n,this.eventManager=s,this.sharedClientState=o,this.currentUser=u,this.maxConcurrentLimboResolutions=f,this.Pu={},this.Tu=new ma((m=>vb(m)),af),this.Iu=new Map,this.Eu=new Set,this.du=new yt(Te.comparator),this.Au=new Map,this.Ru=new Xg,this.Vu={},this.mu=new Map,this.fu=So.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function aN(r,e,n=!0){const s=uS(r);let o;const u=s.Tu.get(e);return u?(s.sharedClientState.addLocalQueryTarget(u.targetId),o=u.view.lu()):o=await rS(s,e,n,!0),o}async function oN(r,e){const n=uS(r);await rS(n,e,!0,!1)}async function rS(r,e,n,s){const o=await CD(r.localStore,$i(e)),u=o.targetId,f=r.sharedClientState.addLocalQueryTarget(u,n);let m;return s&&(m=await lN(r,e,u,f==="current",o.resumeToken)),r.isPrimaryClient&&n&&Xb(r.remoteStore,o),m}async function lN(r,e,n,s,o){r.pu=(T,I,P)=>(async function($,B,Z,J){let q=B.view.ru(Z);q.Cs&&(q=await mE($.localStore,B.query,!1).then((({documents:O})=>B.view.ru(O,q))));const ge=J&&J.targetChanges.get(B.targetId),_e=J&&J.targetMismatches.get(B.targetId)!=null,Ee=B.view.applyChanges(q,$.isPrimaryClient,ge,_e);return AE($,B.targetId,Ee.au),Ee.snapshot})(r,T,I,P);const u=await mE(r.localStore,e,!0),f=new nN(e,u.Qs),m=f.ru(u.documents),g=bu.createSynthesizedTargetChangeForCurrentChange(n,s&&r.onlineState!=="Offline",o),p=f.applyChanges(m,r.isPrimaryClient,g);AE(r,n,p.au);const E=new iN(e,n,f);return r.Tu.set(e,E),r.Iu.has(n)?r.Iu.get(n).push(e):r.Iu.set(n,[e]),p.snapshot}async function uN(r,e,n){const s=De(r),o=s.Tu.get(e),u=s.Iu.get(o.targetId);if(u.length>1)return s.Iu.set(o.targetId,u.filter((f=>!af(f,e)))),void s.Tu.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(o.targetId),s.sharedClientState.isActiveQueryTarget(o.targetId)||await hg(s.localStore,o.targetId,!1).then((()=>{s.sharedClientState.clearQueryState(o.targetId),n&&tp(s.remoteStore,o.targetId),mg(s,o.targetId)})).catch(Vo)):(mg(s,o.targetId),await hg(s.localStore,o.targetId,!0))}async function cN(r,e){const n=De(r),s=n.Tu.get(e),o=n.Iu.get(s.targetId);n.isPrimaryClient&&o.length===1&&(n.sharedClientState.removeLocalQueryTarget(s.targetId),tp(n.remoteStore,s.targetId))}async function hN(r,e,n){const s=vN(r);try{const o=await(function(f,m){const g=De(f),p=ft.now(),E=m.reduce(((P,j)=>P.add(j.key)),He());let T,I;return g.persistence.runTransaction("Locally write mutations","readwrite",(P=>{let j=Rr(),$=He();return g.Ns.getEntries(P,E).next((B=>{j=B,j.forEach(((Z,J)=>{J.isValidDocument()||($=$.add(Z))}))})).next((()=>g.localDocuments.getOverlayedDocuments(P,j))).next((B=>{T=B;const Z=[];for(const J of m){const q=xI(J,T.get(J.key).overlayedDocument);q!=null&&Z.push(new Cs(J.key,q,cb(q.value.mapValue),sn.exists(!0)))}return g.mutationQueue.addMutationBatch(P,p,Z,m)})).next((B=>{I=B;const Z=B.applyToLocalDocumentSet(T,$);return g.documentOverlayCache.saveOverlays(P,B.batchId,Z)}))})).then((()=>({batchId:I.batchId,changes:Tb(T)})))})(s.localStore,e);s.sharedClientState.addPendingMutation(o.batchId),(function(f,m,g){let p=f.Vu[f.currentUser.toKey()];p||(p=new yt(qe)),p=p.insert(m,g),f.Vu[f.currentUser.toKey()]=p})(s,o.batchId,n),await Au(s,o.changes),await mf(s.remoteStore)}catch(o){const u=ap(o,"Failed to persist write");n.reject(u)}}async function sS(r,e){const n=De(r);try{const s=await AD(n.localStore,e);e.targetChanges.forEach(((o,u)=>{const f=n.Au.get(u);f&&(Qe(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?f.hu=!0:o.modifiedDocuments.size>0?Qe(f.hu,14607):o.removedDocuments.size>0&&(Qe(f.hu,42227),f.hu=!1))})),await Au(n,s,e)}catch(s){await Vo(s)}}function SE(r,e,n){const s=De(r);if(s.isPrimaryClient&&n===0||!s.isPrimaryClient&&n===1){const o=[];s.Tu.forEach(((u,f)=>{const m=f.view.va(e);m.snapshot&&o.push(m.snapshot)})),(function(f,m){const g=De(f);g.onlineState=m;let p=!1;g.queries.forEach(((E,T)=>{for(const I of T.Sa)I.va(m)&&(p=!0)})),p&&up(g)})(s.eventManager,e),o.length&&s.Pu.H_(o),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function fN(r,e,n){const s=De(r);s.sharedClientState.updateQueryState(e,"rejected",n);const o=s.Au.get(e),u=o&&o.key;if(u){let f=new yt(Te.comparator);f=f.insert(u,Yt.newNoDocument(u,xe.min()));const m=He().add(u),g=new hf(xe.min(),new Map,new yt(qe),f,m);await sS(s,g),s.du=s.du.remove(u),s.Au.delete(e),fp(s)}else await hg(s.localStore,e,!1).then((()=>mg(s,e,n))).catch(Vo)}async function dN(r,e){const n=De(r),s=e.batch.batchId;try{const o=await SD(n.localStore,e);oS(n,s,null),aS(n,s),n.sharedClientState.updateMutationState(s,"acknowledged"),await Au(n,o)}catch(o){await Vo(o)}}async function mN(r,e,n){const s=De(r);try{const o=await(function(f,m){const g=De(f);return g.persistence.runTransaction("Reject batch","readwrite-primary",(p=>{let E;return g.mutationQueue.lookupMutationBatch(p,m).next((T=>(Qe(T!==null,37113),E=T.keys(),g.mutationQueue.removeMutationBatch(p,T)))).next((()=>g.mutationQueue.performConsistencyCheck(p))).next((()=>g.documentOverlayCache.removeOverlaysForBatchId(p,E,m))).next((()=>g.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(p,E))).next((()=>g.localDocuments.getDocuments(p,E)))}))})(s.localStore,e);oS(s,e,n),aS(s,e),s.sharedClientState.updateMutationState(e,"rejected",n),await Au(s,o)}catch(o){await Vo(o)}}function aS(r,e){(r.mu.get(e)||[]).forEach((n=>{n.resolve()})),r.mu.delete(e)}function oS(r,e,n){const s=De(r);let o=s.Vu[s.currentUser.toKey()];if(o){const u=o.get(e);u&&(n?u.reject(n):u.resolve(),o=o.remove(e)),s.Vu[s.currentUser.toKey()]=o}}function mg(r,e,n=null){r.sharedClientState.removeLocalQueryTarget(e);for(const s of r.Iu.get(e))r.Tu.delete(s),n&&r.Pu.yu(s,n);r.Iu.delete(e),r.isPrimaryClient&&r.Ru.jr(e).forEach((s=>{r.Ru.containsKey(s)||lS(r,s)}))}function lS(r,e){r.Eu.delete(e.path.canonicalString());const n=r.du.get(e);n!==null&&(tp(r.remoteStore,n),r.du=r.du.remove(e),r.Au.delete(n),fp(r))}function AE(r,e,n){for(const s of n)s instanceof nS?(r.Ru.addReference(s.key,e),gN(r,s)):s instanceof iS?(pe(hp,"Document no longer in limbo: "+s.key),r.Ru.removeReference(s.key,e),r.Ru.containsKey(s.key)||lS(r,s.key)):Ae(19791,{wu:s})}function gN(r,e){const n=e.key,s=n.path.canonicalString();r.du.get(n)||r.Eu.has(s)||(pe(hp,"New document in limbo: "+n),r.Eu.add(s),fp(r))}function fp(r){for(;r.Eu.size>0&&r.du.size<r.maxConcurrentLimboResolutions;){const e=r.Eu.values().next().value;r.Eu.delete(e);const n=new Te(lt.fromString(e)),s=r.fu.next();r.Au.set(s,new rN(n)),r.du=r.du.insert(n,s),Xb(r.remoteStore,new hs($i(sf(n.path)),s,"TargetPurposeLimboResolution",nf.ce))}}async function Au(r,e,n){const s=De(r),o=[],u=[],f=[];s.Tu.isEmpty()||(s.Tu.forEach(((m,g)=>{f.push(s.pu(g,e,n).then((p=>{if((p||n)&&s.isPrimaryClient){const E=p?!p.fromCache:n?.targetChanges.get(g.targetId)?.current;s.sharedClientState.updateQueryState(g.targetId,E?"current":"not-current")}if(p){o.push(p);const E=Jg.As(g.targetId,p);u.push(E)}})))})),await Promise.all(f),s.Pu.H_(o),await(async function(g,p){const E=De(g);try{await E.persistence.runTransaction("notifyLocalViewChanges","readwrite",(T=>se.forEach(p,(I=>se.forEach(I.Es,(P=>E.persistence.referenceDelegate.addReference(T,I.targetId,P))).next((()=>se.forEach(I.ds,(P=>E.persistence.referenceDelegate.removeReference(T,I.targetId,P)))))))))}catch(T){if(!ko(T))throw T;pe(Zg,"Failed to update sequence numbers: "+T)}for(const T of p){const I=T.targetId;if(!T.fromCache){const P=E.Ms.get(I),j=P.snapshotVersion,$=P.withLastLimboFreeSnapshotVersion(j);E.Ms=E.Ms.insert(I,$)}}})(s.localStore,u))}async function pN(r,e){const n=De(r);if(!n.currentUser.isEqual(e)){pe(hp,"User change. New user:",e.toKey());const s=await Qb(n.localStore,e);n.currentUser=e,(function(u,f){u.mu.forEach((m=>{m.forEach((g=>{g.reject(new me(ne.CANCELLED,f))}))})),u.mu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await Au(n,s.Ls)}}function yN(r,e){const n=De(r),s=n.Au.get(e);if(s&&s.hu)return He().add(s.key);{let o=He();const u=n.Iu.get(e);if(!u)return o;for(const f of u){const m=n.Tu.get(f);o=o.unionWith(m.view.nu)}return o}}function uS(r){const e=De(r);return e.remoteStore.remoteSyncer.applyRemoteEvent=sS.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=yN.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=fN.bind(null,e),e.Pu.H_=eN.bind(null,e.eventManager),e.Pu.yu=tN.bind(null,e.eventManager),e}function vN(r){const e=De(r);return e.remoteStore.remoteSyncer.applySuccessfulWrite=dN.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=mN.bind(null,e),e}class Gh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=ff(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return bD(this.persistence,new _D,e.initialUser,this.serializer)}Cu(e){return new $b(Wg.mi,this.serializer)}Du(e){return new ID}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Gh.provider={build:()=>new Gh};class _N extends Gh{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){Qe(this.persistence.referenceDelegate instanceof Hh,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new rD(s,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?Cn.withCacheSize(this.cacheSizeBytes):Cn.DEFAULT;return new $b((s=>Hh.mi(s,n)),this.serializer)}}class gg{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>SE(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=pN.bind(null,this.syncEngine),await WD(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new ZD})()}createDatastore(e){const n=ff(e.databaseInfo.databaseId),s=(function(u){return new VD(u)})(e.databaseInfo);return(function(u,f,m,g){return new jD(u,f,m,g)})(e.authCredentials,e.appCheckCredentials,s,n)}createRemoteStore(e){return(function(s,o,u,f,m){return new zD(s,o,u,f,m)})(this.localStore,this.datastore,e.asyncQueue,(n=>SE(this.syncEngine,n,0)),(function(){return yE.v()?new yE:new DD})())}createSyncEngine(e,n){return(function(o,u,f,m,g,p,E){const T=new sN(o,u,f,m,g,p);return E&&(T.gu=!0),T})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){await(async function(n){const s=De(n);pe(da,"RemoteStore shutting down."),s.Ea.add(5),await Su(s),s.Aa.shutdown(),s.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}gg.provider={build:()=>new gg};class dp{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):wr("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout((()=>{this.muted||e(n)}),0)}}class EN{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new me(ne.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const n=await(async function(o,u){const f=De(o),m={documents:u.map((T=>qh(f.serializer,T)))},g=await f.Ho("BatchGetDocuments",f.serializer.databaseId,lt.emptyPath(),m,u.length),p=new Map;g.forEach((T=>{const I=BI(f.serializer,T);p.set(I.key.toString(),I)}));const E=[];return u.forEach((T=>{const I=p.get(T.toString());Qe(!!I,55234,{key:T}),E.push(I)})),E})(this.datastore,e);return n.forEach((s=>this.recordVersion(s))),n}set(e,n){this.write(n.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,n){try{this.write(n.toMutation(e,this.preconditionForUpdate(e)))}catch(s){this.lastTransactionError=s}this.writtenDocs.add(e.toString())}delete(e){this.write(new cf(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach((n=>{e.delete(n.key.toString())})),e.forEach(((n,s)=>{const o=Te.fromPath(s);this.mutations.push(new Ob(o,this.precondition(o)))})),await(async function(s,o){const u=De(s),f={writes:o.map((m=>Bb(u.serializer,m)))};await u.Go("Commit",u.serializer.databaseId,lt.emptyPath(),f)})(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let n;if(e.isFoundDocument())n=e.version;else{if(!e.isNoDocument())throw Ae(50498,{Gu:e.constructor.name});n=xe.min()}const s=this.readVersions.get(e.key.toString());if(s){if(!n.isEqual(s))throw new me(ne.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),n)}precondition(e){const n=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&n?n.isEqual(xe.min())?sn.exists(!1):sn.updateTime(n):sn.none()}preconditionForUpdate(e){const n=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&n){if(n.isEqual(xe.min()))throw new me(ne.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return sn.updateTime(n)}return sn.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class TN{constructor(e,n,s,o,u){this.asyncQueue=e,this.datastore=n,this.options=s,this.updateFunction=o,this.deferred=u,this.zu=s.maxAttempts,this.M_=new ep(this.asyncQueue,"transaction_retry")}ju(){this.zu-=1,this.Ju()}Ju(){this.M_.p_((async()=>{const e=new EN(this.datastore),n=this.Hu(e);n&&n.then((s=>{this.asyncQueue.enqueueAndForget((()=>e.commit().then((()=>{this.deferred.resolve(s)})).catch((o=>{this.Yu(o)}))))})).catch((s=>{this.Yu(s)}))}))}Hu(e){try{const n=this.updateFunction(e);return!_u(n)&&n.catch&&n.then?n:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(n){return this.deferred.reject(n),null}}Yu(e){this.zu>0&&this.Zu(e)?(this.zu-=1,this.asyncQueue.enqueueAndForget((()=>(this.Ju(),Promise.resolve())))):this.deferred.reject(e)}Zu(e){if(e?.name==="FirebaseError"){const n=e.code;return n==="aborted"||n==="failed-precondition"||n==="already-exists"||!Mb(n)}return!1}}const As="FirestoreClient";class bN{constructor(e,n,s,o,u){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=s,this.databaseInfo=o,this.user=hn.UNAUTHENTICATED,this.clientId=zg.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=u,this.authCredentials.start(s,(async f=>{pe(As,"Received user=",f.uid),await this.authCredentialListener(f),this.user=f})),this.appCheckCredentials.start(s,(f=>(pe(As,"Received new app check token=",f),this.appCheckCredentialListener(f,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Gi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const s=ap(n,"Failed to shutdown persistence");e.reject(s)}})),e.promise}}async function Um(r,e){r.asyncQueue.verifyOperationInProgress(),pe(As,"Initializing OfflineComponentProvider");const n=r.configuration;await e.initialize(n);let s=n.initialUser;r.setCredentialChangeListener((async o=>{s.isEqual(o)||(await Qb(e.localStore,o),s=o)})),e.persistence.setDatabaseDeletedListener((()=>r.terminate())),r._offlineComponents=e}async function wE(r,e){r.asyncQueue.verifyOperationInProgress();const n=await SN(r);pe(As,"Initializing OnlineComponentProvider"),await e.initialize(n,r.configuration),r.setCredentialChangeListener((s=>_E(e.remoteStore,s))),r.setAppCheckTokenChangeListener(((s,o)=>_E(e.remoteStore,o))),r._onlineComponents=e}async function SN(r){if(!r._offlineComponents)if(r._uninitializedComponentsProvider){pe(As,"Using user provided OfflineComponentProvider");try{await Um(r,r._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!(function(o){return o.name==="FirebaseError"?o.code===ne.FAILED_PRECONDITION||o.code===ne.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11})(n))throw n;_o("Error using user provided cache. Falling back to memory cache: "+n),await Um(r,new Gh)}}else pe(As,"Using default OfflineComponentProvider"),await Um(r,new _N(void 0));return r._offlineComponents}async function mp(r){return r._onlineComponents||(r._uninitializedComponentsProvider?(pe(As,"Using user provided OnlineComponentProvider"),await wE(r,r._uninitializedComponentsProvider._online)):(pe(As,"Using default OnlineComponentProvider"),await wE(r,new gg))),r._onlineComponents}function AN(r){return mp(r).then((e=>e.syncEngine))}function wN(r){return mp(r).then((e=>e.datastore))}async function $h(r){const e=await mp(r),n=e.eventManager;return n.onListen=aN.bind(null,e.syncEngine),n.onUnlisten=uN.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=oN.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=cN.bind(null,e.syncEngine),n}function RN(r,e,n={}){const s=new Gi;return r.asyncQueue.enqueueAndForget((async()=>(function(u,f,m,g,p){const E=new dp({next:I=>{E.Nu(),f.enqueueAndForget((()=>lp(u,T)));const P=I.docs.has(m);!P&&I.fromCache?p.reject(new me(ne.UNAVAILABLE,"Failed to get document because the client is offline.")):P&&I.fromCache&&g&&g.source==="server"?p.reject(new me(ne.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):p.resolve(I)},error:I=>p.reject(I)}),T=new cp(sf(m.path),E,{includeMetadataChanges:!0,qa:!0});return op(u,T)})(await $h(r),r.asyncQueue,e,n,s))),s.promise}function CN(r,e,n={}){const s=new Gi;return r.asyncQueue.enqueueAndForget((async()=>(function(u,f,m,g,p){const E=new dp({next:I=>{E.Nu(),f.enqueueAndForget((()=>lp(u,T))),I.fromCache&&g.source==="server"?p.reject(new me(ne.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):p.resolve(I)},error:I=>p.reject(I)}),T=new cp(m,E,{includeMetadataChanges:!0,qa:!0});return op(u,T)})(await $h(r),r.asyncQueue,e,n,s))),s.promise}function cS(r){const e={};return r.timeoutSeconds!==void 0&&(e.timeoutSeconds=r.timeoutSeconds),e}const RE=new Map;const hS="firestore.googleapis.com",CE=!0;class xE{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new me(ne.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=hS,this.ssl=CE}else this.host=e.host,this.ssl=e.ssl??CE;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=Gb;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<nD)throw new me(ne.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}H2("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=cS(e.experimentalLongPollingOptions??{}),(function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new me(ne.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new me(ne.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new me(ne.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(s,o){return s.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class gf{constructor(e,n,s,o){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=s,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new xE({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new me(ne.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new me(ne.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new xE(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(s){if(!s)return new M2;switch(s.type){case"firstParty":return new L2(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new me(ne.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const s=RE.get(n);s&&(pe("ComponentProvider","Removing Datastore"),RE.delete(n),s.terminate())})(this),Promise.resolve()}}function xN(r,e,n,s={}){r=_n(r,gf);const o=Do(e),u=r._getSettings(),f={...u,emulatorOptions:r._getEmulatorOptions()},m=`${e}:${n}`;o&&(oT(`https://${m}`),lT("Firestore",!0)),u.host!==hS&&u.host!==m&&_o("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const g={...u,host:m,ssl:o,emulatorOptions:s};if(!ua(g,f)&&(r._setSettings(g),s.mockUserToken)){let p,E;if(typeof s.mockUserToken=="string")p=s.mockUserToken,E=hn.MOCK_USER;else{p=iR(s.mockUserToken,r._app?.options.projectId);const T=s.mockUserToken.sub||s.mockUserToken.user_id;if(!T)throw new me(ne.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");E=new hn(T)}r._authCredentials=new V2(new JT(p,E))}}class pa{constructor(e,n,s){this.converter=n,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new pa(this.firestore,e,this._query)}}class pt{constructor(e,n,s){this.converter=n,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ps(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new pt(this.firestore,e,this._key)}toJSON(){return{type:pt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,s){if(vu(n,pt._jsonSchema))return new pt(e,s||null,new Te(lt.fromString(n.referencePath)))}}pt._jsonSchemaVersion="firestore/documentReference/1.0",pt._jsonSchema={type:Ut("string",pt._jsonSchemaVersion),referencePath:Ut("string")};class ps extends pa{constructor(e,n,s){super(e,n,sf(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new pt(this.firestore,null,new Te(e))}withConverter(e){return new ps(this.firestore,e,this._path)}}function Lt(r,e,...n){if(r=zt(r),ZT("collection","path",e),r instanceof gf){const s=lt.fromString(e,...n);return B0(s),new ps(r,null,s)}{if(!(r instanceof pt||r instanceof ps))throw new me(ne.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=r._path.child(lt.fromString(e,...n));return B0(s),new ps(r.firestore,null,s)}}function vn(r,e,...n){if(r=zt(r),arguments.length===1&&(e=zg.newId()),ZT("doc","path",e),r instanceof gf){const s=lt.fromString(e,...n);return z0(s),new pt(r,null,new Te(s))}{if(!(r instanceof pt||r instanceof ps))throw new me(ne.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=r._path.child(lt.fromString(e,...n));return z0(s),new pt(r.firestore,r instanceof ps?r.converter:null,new Te(s))}}const IE="AsyncQueue";class DE{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new ep(this,"async_queue_retry"),this._c=()=>{const s=jm();s&&pe(IE,"Visibility state changed to "+s.visibilityState),this.M_.w_()},this.ac=e;const n=jm();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=jm();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const n=new Gi;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!ko(e))throw e;pe(IE,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const n=this.ac.then((()=>(this.rc=!0,e().catch((s=>{throw this.nc=s,this.rc=!1,wr("INTERNAL UNHANDLED ERROR: ",NE(s)),s})).then((s=>(this.rc=!1,s))))));return this.ac=n,n}enqueueAfterDelay(e,n,s){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const o=sp.createAndSchedule(this,e,n,s,(u=>this.hc(u)));return this.tc.push(o),o}uc(){this.nc&&Ae(47125,{Pc:NE(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((n,s)=>n.targetTimeMs-s.targetTimeMs));for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function NE(r){let e=r.message||"";return r.stack&&(e=r.stack.includes(r.message)?r.stack:r.message+`
`+r.stack),e}function OE(r){return(function(n,s){if(typeof n!="object"||n===null)return!1;const o=n;for(const u of s)if(u in o&&typeof o[u]=="function")return!0;return!1})(r,["next","error","complete"])}class Wi extends gf{constructor(e,n,s,o){super(e,n,s,o),this.type="firestore",this._queue=new DE,this._persistenceKey=o?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new DE(e),this._firestoreClient=void 0,await e}}}function IN(r,e){const n=typeof r=="object"?r:fT(),s=typeof r=="string"?r:Lh,o=xg(n,"firestore").getImmediate({identifier:s});if(!o._initialized){const u=tR("firestore");u&&xN(o,...u)}return o}function wu(r){if(r._terminated)throw new me(ne.FAILED_PRECONDITION,"The client has already been terminated.");return r._firestoreClient||DN(r),r._firestoreClient}function DN(r){const e=r._freezeSettings(),n=(function(o,u,f,m){return new eI(o,u,f,m.host,m.ssl,m.experimentalForceLongPolling,m.experimentalAutoDetectLongPolling,cS(m.experimentalLongPollingOptions),m.useFetchStreams,m.isUsingEmulator)})(r._databaseId,r._app?.options.appId||"",r._persistenceKey,e);r._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(r._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),r._firestoreClient=new bN(r._authCredentials,r._appCheckCredentials,r._queue,n,r._componentsProvider&&(function(o){const u=o?._online.build();return{_offline:o?._offline.build(u),_online:u}})(r._componentsProvider))}class zn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new zn(an.fromBase64String(e))}catch(n){throw new me(ne.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new zn(an.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:zn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(vu(e,zn._jsonSchema))return zn.fromBase64String(e.bytes)}}zn._jsonSchemaVersion="firestore/bytes/1.0",zn._jsonSchema={type:Ut("string",zn._jsonSchemaVersion),bytes:Ut("string")};class Ru{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new me(ne.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new rn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Cu{constructor(e){this._methodName=e}}class Qi{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new me(ne.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new me(ne.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return qe(this._lat,e._lat)||qe(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Qi._jsonSchemaVersion}}static fromJSON(e){if(vu(e,Qi._jsonSchema))return new Qi(e.latitude,e.longitude)}}Qi._jsonSchemaVersion="firestore/geoPoint/1.0",Qi._jsonSchema={type:Ut("string",Qi._jsonSchemaVersion),latitude:Ut("number"),longitude:Ut("number")};class Yi{constructor(e){this._values=(e||[]).map((n=>n))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(s,o){if(s.length!==o.length)return!1;for(let u=0;u<s.length;++u)if(s[u]!==o[u])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Yi._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(vu(e,Yi._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((n=>typeof n=="number")))return new Yi(e.vectorValues);throw new me(ne.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Yi._jsonSchemaVersion="firestore/vectorValue/1.0",Yi._jsonSchema={type:Ut("string",Yi._jsonSchemaVersion),vectorValues:Ut("object")};const NN=/^__.*__$/;class ON{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return this.fieldMask!==null?new Cs(e,this.data,this.fieldMask,n,this.fieldTransforms):new Tu(e,this.data,n,this.fieldTransforms)}}class fS{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return new Cs(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function dS(r){switch(r){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ae(40011,{Ac:r})}}class gp{constructor(e,n,s,o,u,f){this.settings=e,this.databaseId=n,this.serializer=s,this.ignoreUndefinedProperties=o,u===void 0&&this.Rc(),this.fieldTransforms=u||[],this.fieldMask=f||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new gp({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const n=this.path?.child(e),s=this.Vc({path:n,fc:!1});return s.gc(e),s}yc(e){const n=this.path?.child(e),s=this.Vc({path:n,fc:!1});return s.Rc(),s}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Qh(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((n=>e.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>e.isPrefixOf(n.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(dS(this.Ac)&&NN.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class MN{constructor(e,n,s){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=s||ff(e)}Cc(e,n,s,o=!1){return new gp({Ac:e,methodName:n,Dc:s,path:rn.emptyPath(),fc:!1,bc:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function xu(r){const e=r._freezeSettings(),n=ff(r._databaseId);return new MN(r._databaseId,!!e.ignoreUndefinedProperties,n)}function pp(r,e,n,s,o,u={}){const f=r.Cc(u.merge||u.mergeFields?2:0,e,n,o);_p("Data must be an object, but it was:",f,s);const m=pS(s,f);let g,p;if(u.merge)g=new Bn(f.fieldMask),p=f.fieldTransforms;else if(u.mergeFields){const E=[];for(const T of u.mergeFields){const I=pg(e,T,n);if(!f.contains(I))throw new me(ne.INVALID_ARGUMENT,`Field '${I}' is specified in your field mask but missing from your input data.`);vS(E,I)||E.push(I)}g=new Bn(E),p=f.fieldTransforms.filter((T=>g.covers(T.field)))}else g=null,p=f.fieldTransforms;return new ON(new yn(m),g,p)}class pf extends Cu{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof pf}}class yp extends Cu{_toFieldTransform(e){return new Ib(e.path,new ou)}isEqual(e){return e instanceof yp}}class vp extends Cu{constructor(e,n){super(e),this.Fc=n}_toFieldTransform(e){const n=new cu(e.serializer,Ab(e.serializer,this.Fc));return new Ib(e.path,n)}isEqual(e){return e instanceof vp&&this.Fc===e.Fc}}function mS(r,e,n,s){const o=r.Cc(1,e,n);_p("Data must be an object, but it was:",o,s);const u=[],f=yn.empty();Rs(s,((g,p)=>{const E=Ep(e,g,n);p=zt(p);const T=o.yc(E);if(p instanceof pf)u.push(E);else{const I=Iu(p,T);I!=null&&(u.push(E),f.set(E,I))}}));const m=new Bn(u);return new fS(f,m,o.fieldTransforms)}function gS(r,e,n,s,o,u){const f=r.Cc(1,e,n),m=[pg(e,s,n)],g=[o];if(u.length%2!=0)throw new me(ne.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let I=0;I<u.length;I+=2)m.push(pg(e,u[I])),g.push(u[I+1]);const p=[],E=yn.empty();for(let I=m.length-1;I>=0;--I)if(!vS(p,m[I])){const P=m[I];let j=g[I];j=zt(j);const $=f.yc(P);if(j instanceof pf)p.push(P);else{const B=Iu(j,$);B!=null&&(p.push(P),E.set(P,B))}}const T=new Bn(p);return new fS(E,T,f.fieldTransforms)}function VN(r,e,n,s=!1){return Iu(n,r.Cc(s?4:3,e))}function Iu(r,e){if(yS(r=zt(r)))return _p("Unsupported field value:",e,r),pS(r,e);if(r instanceof Cu)return(function(s,o){if(!dS(o.Ac))throw o.Sc(`${s._methodName}() can only be used with update() and set()`);if(!o.path)throw o.Sc(`${s._methodName}() is not currently supported inside arrays`);const u=s._toFieldTransform(o);u&&o.fieldTransforms.push(u)})(r,e),null;if(r===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),r instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(s,o){const u=[];let f=0;for(const m of s){let g=Iu(m,o.wc(f));g==null&&(g={nullValue:"NULL_VALUE"}),u.push(g),f++}return{arrayValue:{values:u}}})(r,e)}return(function(s,o){if((s=zt(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return Ab(o.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const u=ft.fromDate(s);return{timestampValue:Bh(o.serializer,u)}}if(s instanceof ft){const u=new ft(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:Bh(o.serializer,u)}}if(s instanceof Qi)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof zn)return{bytesValue:Lb(o.serializer,s._byteString)};if(s instanceof pt){const u=o.databaseId,f=s.firestore._databaseId;if(!f.isEqual(u))throw o.Sc(`Document reference is for database ${f.projectId}/${f.database} but should be for database ${u.projectId}/${u.database}`);return{referenceValue:Kg(s.firestore._databaseId||o.databaseId,s._key.path)}}if(s instanceof Yi)return(function(f,m){return{mapValue:{fields:{[lb]:{stringValue:ub},[jh]:{arrayValue:{values:f.toArray().map((p=>{if(typeof p!="number")throw m.Sc("VectorValues must only contain numeric values.");return $g(m.serializer,p)}))}}}}}})(s,o);throw o.Sc(`Unsupported field value: ${tf(s)}`)})(r,e)}function pS(r,e){const n={};return nb(r)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Rs(r,((s,o)=>{const u=Iu(o,e.mc(s));u!=null&&(n[s]=u)})),{mapValue:{fields:n}}}function yS(r){return!(typeof r!="object"||r===null||r instanceof Array||r instanceof Date||r instanceof ft||r instanceof Qi||r instanceof zn||r instanceof pt||r instanceof Cu||r instanceof Yi)}function _p(r,e,n){if(!yS(n)||!eb(n)){const s=tf(n);throw s==="an object"?e.Sc(r+" a custom object"):e.Sc(r+" "+s)}}function pg(r,e,n){if((e=zt(e))instanceof Ru)return e._internalPath;if(typeof e=="string")return Ep(r,e);throw Qh("Field path arguments must be of type string or ",r,!1,void 0,n)}const kN=new RegExp("[~\\*/\\[\\]]");function Ep(r,e,n){if(e.search(kN)>=0)throw Qh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,r,!1,void 0,n);try{return new Ru(...e.split("."))._internalPath}catch{throw Qh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,r,!1,void 0,n)}}function Qh(r,e,n,s,o){const u=s&&!s.isEmpty(),f=o!==void 0;let m=`Function ${e}() called with invalid data`;n&&(m+=" (via `toFirestore()`)"),m+=". ";let g="";return(u||f)&&(g+=" (found",u&&(g+=` in field ${s}`),f&&(g+=` in document ${o}`),g+=")"),new me(ne.INVALID_ARGUMENT,m+r+g)}function vS(r,e){return r.some((n=>n.isEqual(e)))}class Yh{constructor(e,n,s,o,u){this._firestore=e,this._userDataWriter=n,this._key=s,this._document=o,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new pt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new PN(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Tp("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class PN extends Yh{data(){return super.data()}}function Tp(r,e){return typeof e=="string"?Ep(r,e):e instanceof Ru?e._internalPath:e._delegate._internalPath}function _S(r){if(r.limitType==="L"&&r.explicitOrderBy.length===0)throw new me(ne.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class bp{}class LN extends bp{}function yf(r,e,...n){let s=[];e instanceof bp&&s.push(e),s=s.concat(n),(function(u){const f=u.filter((g=>g instanceof Sp)).length,m=u.filter((g=>g instanceof vf)).length;if(f>1||f>0&&m>0)throw new me(ne.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(s);for(const o of s)r=o._apply(r);return r}class vf extends LN{constructor(e,n,s){super(),this._field=e,this._op=n,this._value=s,this.type="where"}static _create(e,n,s){return new vf(e,n,s)}_apply(e){const n=this._parse(e);return ES(e._query,n),new pa(e.firestore,e.converter,ag(e._query,n))}_parse(e){const n=xu(e.firestore);return(function(u,f,m,g,p,E,T){let I;if(p.isKeyField()){if(E==="array-contains"||E==="array-contains-any")throw new me(ne.INVALID_ARGUMENT,`Invalid Query. You can't perform '${E}' queries on documentId().`);if(E==="in"||E==="not-in"){VE(T,E);const j=[];for(const $ of T)j.push(ME(g,u,$));I={arrayValue:{values:j}}}else I=ME(g,u,T)}else E!=="in"&&E!=="not-in"&&E!=="array-contains-any"||VE(T,E),I=VN(m,f,T,E==="in"||E==="not-in");return jt.create(p,E,I)})(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function wo(r,e,n){const s=e,o=Tp("where",r);return vf._create(o,s,n)}class Sp extends bp{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Sp(e,n)}_parse(e){const n=this._queryConstraints.map((s=>s._parse(e))).filter((s=>s.getFilters().length>0));return n.length===1?n[0]:Ei.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:((function(o,u){let f=o;const m=u.getFlattenedFilters();for(const g of m)ES(f,g),f=ag(f,g)})(e._query,n),new pa(e.firestore,e.converter,ag(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function ME(r,e,n){if(typeof(n=zt(n))=="string"){if(n==="")throw new me(ne.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!yb(e)&&n.indexOf("/")!==-1)throw new me(ne.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const s=e.path.child(lt.fromString(n));if(!Te.isDocumentKey(s))throw new me(ne.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return K0(r,new Te(s))}if(n instanceof pt)return K0(r,n._key);throw new me(ne.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${tf(n)}.`)}function VE(r,e){if(!Array.isArray(r)||r.length===0)throw new me(ne.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function ES(r,e){const n=(function(o,u){for(const f of o)for(const m of f.getFlattenedFilters())if(u.indexOf(m.op)>=0)return m.op;return null})(r.filters,(function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(n!==null)throw n===e.op?new me(ne.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new me(ne.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class TS{convertValue(e,n="none"){switch(bs(e)){case 0:return null;case 1:return e.booleanValue;case 2:return wt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Ts(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Ae(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const s={};return Rs(e,((o,u)=>{s[o]=this.convertValue(u,n)})),s}convertVectorValue(e){const n=e.fields?.[jh].arrayValue?.values?.map((s=>wt(s.doubleValue)));return new Yi(n)}convertGeoPoint(e){return new Qi(wt(e.latitude),wt(e.longitude))}convertArray(e,n){return(e.values||[]).map((s=>this.convertValue(s,n)))}convertServerTimestamp(e,n){switch(n){case"previous":const s=rf(e);return s==null?null:this.convertValue(s,n);case"estimate":return this.convertTimestamp(ru(e));default:return null}}convertTimestamp(e){const n=Es(e);return new ft(n.seconds,n.nanos)}convertDocumentKey(e,n){const s=lt.fromString(e);Qe(Fb(s),9688,{name:e});const o=new su(s.get(1),s.get(3)),u=new Te(s.popFirst(5));return o.isEqual(n)||wr(`Document ${u} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),u}}function Ap(r,e,n){let s;return s=r?n&&(n.merge||n.mergeFields)?r.toFirestore(e,n):r.toFirestore(e):e,s}class jN extends TS{constructor(e){super(),this.firestore=e}convertBytes(e){return new zn(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new pt(this.firestore,null,n)}}class co{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class ys extends Yh{constructor(e,n,s,o,u,f){super(e,n,s,o,f),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new wh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const s=this._document.data.field(Tp("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new me(ne.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=ys._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}ys._jsonSchemaVersion="firestore/documentSnapshot/1.0",ys._jsonSchema={type:Ut("string",ys._jsonSchemaVersion),bundleSource:Ut("string","DocumentSnapshot"),bundleName:Ut("string"),bundle:Ut("string")};class wh extends ys{data(e={}){return super.data(e)}}class la{constructor(e,n,s,o){this._firestore=e,this._userDataWriter=n,this._snapshot=o,this.metadata=new co(o.hasPendingWrites,o.fromCache),this.query=s}get docs(){const e=[];return this.forEach((n=>e.push(n))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach((s=>{e.call(n,new wh(this._firestore,this._userDataWriter,s.key,s,new co(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new me(ne.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(o,u){if(o._snapshot.oldDocs.isEmpty()){let f=0;return o._snapshot.docChanges.map((m=>{const g=new wh(o._firestore,o._userDataWriter,m.doc.key,m.doc,new co(o._snapshot.mutatedKeys.has(m.doc.key),o._snapshot.fromCache),o.query.converter);return m.doc,{type:"added",doc:g,oldIndex:-1,newIndex:f++}}))}{let f=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((m=>u||m.type!==3)).map((m=>{const g=new wh(o._firestore,o._userDataWriter,m.doc.key,m.doc,new co(o._snapshot.mutatedKeys.has(m.doc.key),o._snapshot.fromCache),o.query.converter);let p=-1,E=-1;return m.type!==0&&(p=f.indexOf(m.doc.key),f=f.delete(m.doc.key)),m.type!==1&&(f=f.add(m.doc),E=f.indexOf(m.doc.key)),{type:UN(m.type),doc:g,oldIndex:p,newIndex:E}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new me(ne.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=la._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=zg.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],s=[],o=[];return this.docs.forEach((u=>{u._document!==null&&(n.push(u._document),s.push(this._userDataWriter.convertObjectMap(u._document.data.value.mapValue.fields,"previous")),o.push(u.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function UN(r){switch(r){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ae(61501,{type:r})}}function vs(r){r=_n(r,pt);const e=_n(r.firestore,Wi);return RN(wu(e),r._key).then((n=>bS(e,r,n)))}la._jsonSchemaVersion="firestore/querySnapshot/1.0",la._jsonSchema={type:Ut("string",la._jsonSchemaVersion),bundleSource:Ut("string","QuerySnapshot"),bundleName:Ut("string"),bundle:Ut("string")};class _f extends TS{constructor(e){super(),this.firestore=e}convertBytes(e){return new zn(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new pt(this.firestore,null,n)}}function Un(r){r=_n(r,pa);const e=_n(r.firestore,Wi),n=wu(e),s=new _f(e);return _S(r._query),CN(n,r._query).then((o=>new la(e,s,r,o)))}function ho(r,e,n){r=_n(r,pt);const s=_n(r.firestore,Wi),o=Ap(r.converter,e,n);return Ef(s,[pp(xu(s),"setDoc",r._key,o,r.converter!==null,n).toMutation(r._key,sn.none())])}function zN(r,e,n,...s){r=_n(r,pt);const o=_n(r.firestore,Wi),u=xu(o);let f;return f=typeof(e=zt(e))=="string"||e instanceof Ru?gS(u,"updateDoc",r._key,e,n,s):mS(u,"updateDoc",r._key,e),Ef(o,[f.toMutation(r._key,sn.exists(!0))])}function zm(r){return Ef(_n(r.firestore,Wi),[new cf(r._key,sn.none())])}function BN(r,e){const n=_n(r.firestore,Wi),s=vn(r),o=Ap(r.converter,e);return Ef(n,[pp(xu(r.firestore),"addDoc",s._key,o,r.converter!==null,{}).toMutation(s._key,sn.exists(!1))]).then((()=>s))}function aa(r,...e){r=zt(r);let n={includeMetadataChanges:!1,source:"default"},s=0;typeof e[s]!="object"||OE(e[s])||(n=e[s++]);const o={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(OE(e[s])){const g=e[s];e[s]=g.next?.bind(g),e[s+1]=g.error?.bind(g),e[s+2]=g.complete?.bind(g)}let u,f,m;if(r instanceof pt)f=_n(r.firestore,Wi),m=sf(r._key.path),u={next:g=>{e[s]&&e[s](bS(f,r,g))},error:e[s+1],complete:e[s+2]};else{const g=_n(r,pa);f=_n(g.firestore,Wi),m=g._query;const p=new _f(f);u={next:E=>{e[s]&&e[s](new la(f,p,g,E))},error:e[s+1],complete:e[s+2]},_S(r._query)}return(function(p,E,T,I){const P=new dp(I),j=new cp(E,P,T);return p.asyncQueue.enqueueAndForget((async()=>op(await $h(p),j))),()=>{P.Nu(),p.asyncQueue.enqueueAndForget((async()=>lp(await $h(p),j)))}})(wu(f),m,o,u)}function Ef(r,e){return(function(s,o){const u=new Gi;return s.asyncQueue.enqueueAndForget((async()=>hN(await AN(s),o,u))),u.promise})(wu(r),e)}function bS(r,e,n){const s=n.docs.get(e._key),o=new _f(r);return new ys(r,o,e._key,s,new co(n.hasPendingWrites,n.fromCache),e.converter)}const qN={maxAttempts:5};function $l(r,e){if((r=zt(r)).firestore!==e)throw new me(ne.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return r}class HN{constructor(e,n){this._firestore=e,this._transaction=n,this._dataReader=xu(e)}get(e){const n=$l(e,this._firestore),s=new jN(this._firestore);return this._transaction.lookup([n._key]).then((o=>{if(!o||o.length!==1)return Ae(24041);const u=o[0];if(u.isFoundDocument())return new Yh(this._firestore,s,u.key,u,n.converter);if(u.isNoDocument())return new Yh(this._firestore,s,n._key,null,n.converter);throw Ae(18433,{doc:u})}))}set(e,n,s){const o=$l(e,this._firestore),u=Ap(o.converter,n,s),f=pp(this._dataReader,"Transaction.set",o._key,u,o.converter!==null,s);return this._transaction.set(o._key,f),this}update(e,n,s,...o){const u=$l(e,this._firestore);let f;return f=typeof(n=zt(n))=="string"||n instanceof Ru?gS(this._dataReader,"Transaction.update",u._key,n,s,o):mS(this._dataReader,"Transaction.update",u._key,n),this._transaction.update(u._key,f),this}delete(e){const n=$l(e,this._firestore);return this._transaction.delete(n._key),this}}class FN extends HN{constructor(e,n){super(e,n),this._firestore=e}get(e){const n=$l(e,this._firestore),s=new _f(this._firestore);return super.get(e).then((o=>new ys(this._firestore,s,n._key,o._document,new co(!1,!1),n.converter)))}}function GN(r,e,n){r=_n(r,Wi);const s={...qN,...n};return(function(u){if(u.maxAttempts<1)throw new me(ne.INVALID_ARGUMENT,"Max attempts must be at least 1")})(s),(function(u,f,m){const g=new Gi;return u.asyncQueue.enqueueAndForget((async()=>{const p=await wN(u);new TN(u.asyncQueue,p,m,f,g).ju()})),g.promise})(wu(r),(o=>e(new FN(r,o))),s)}function vi(){return new yp("serverTimestamp")}function $N(r){return new vp("increment",r)}(function(e,n=!0){(function(o){Mo=o})(No),yo(new ca("firestore",((s,{instanceIdentifier:o,options:u})=>{const f=s.getProvider("app").getImmediate(),m=new Wi(new k2(s.getProvider("auth-internal")),new j2(f,s.getProvider("app-check-internal")),(function(p,E){if(!Object.prototype.hasOwnProperty.apply(p.options,["projectId"]))throw new me(ne.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new su(p.options.projectId,E)})(f,o),f);return u={useFetchStreams:n,...u},m._setSettings(u),m}),"PUBLIC").setMultipleInstances(!0)),ms(P0,L0,e),ms(P0,L0,"esm2020")})();const QN={apiKey:"AIzaSyDYdiJjDRBA9nGPj8LGDxAE4O6o6Qlyx68",authDomain:"labyrinth-6dc4f.firebaseapp.com",projectId:"labyrinth-6dc4f",storageBucket:"labyrinth-6dc4f.firebasestorage.app",messagingSenderId:"912154260516",appId:"1:912154260516:web:e118702708fb452fde14b1"},SS=hT(QN),Bm=I2(SS),YN=new vr,Ge=IN(SS),AS=V.createContext(),ya=()=>{const r=V.useContext(AS);if(!r)throw new Error("useAuth must be used within an AuthProvider");return r},KN=({children:r})=>{const[e,n]=V.useState(null),[s,o]=V.useState(!0);V.useEffect(()=>yx(Bm,p=>{n(p),o(!1)}),[]);const m={user:e,loading:s,loginWithGoogle:async()=>{try{return(await jx(Bm,YN)).user}catch(g){throw console.error("Google login error:",g),g}},logout:async()=>{try{await vx(Bm)}catch(g){throw console.error("Logout error:",g),g}},isAuthenticated:!!e};return b.jsx(AS.Provider,{value:m,children:!s&&r})},wS=V.createContext(),Tf=()=>{const r=V.useContext(wS);if(!r)throw new Error("useMedia must be used within a MediaProvider");return r},XN=({children:r})=>{const[e,n]=V.useState(null),[s,o]=V.useState(!0),[u,f]=V.useState(!0),[m,g]=V.useState(!1),[p,E]=V.useState(null),[T,I]=V.useState([]),P=V.useRef(null),j=V.useRef(null),$=V.useCallback(async()=>{try{const w=await navigator.mediaDevices.enumerateDevices();return I(w),console.log(" Available devices:",w),w}catch(w){return console.error("Error enumerating devices:",w),[]}},[]),B=V.useCallback(async(w,D=null)=>{try{console.log(` Getting ${w} track...`);const R=w==="video"?{video:{width:{ideal:320},height:{ideal:240},frameRate:{ideal:15},facingMode:"user",...D&&{deviceId:{exact:D}}}}:{audio:{echoCancellation:!0,noiseSuppression:!0,autoGainControl:!0,...D&&{deviceId:{exact:D}}}};console.log("   Constraints:",R);const A=(await navigator.mediaDevices.getUserMedia(R)).getTracks()[0];return console.log(` Got ${w} track:`,{enabled:A.enabled,readyState:A.readyState,label:A.label,settings:A.getSettings?.()}),A.enabled=!0,A}catch(R){return console.error(` Error getting ${w} track:`,R),w==="video"?(console.log(" Creating fake video track for testing..."),Z()):(console.log(" Creating fake audio track for testing..."),J())}},[]),Z=()=>{console.log(" Creating fake video track...");const w=document.createElement("canvas");w.width=320,w.height=240;const D=w.getContext("2d");let R=0;setInterval(()=>{const he=D.createLinearGradient(0,0,320,240);he.addColorStop(0,"#8b5cf6"),he.addColorStop(1,"#3b82f6"),D.fillStyle=he,D.fillRect(0,0,320,240);const z=160+Math.sin(R*.05)*100,oe=120+Math.cos(R*.05)*80;D.fillStyle="white",D.beginPath(),D.arc(z,oe,30,0,Math.PI*2),D.fill(),D.fillStyle="white",D.font="bold 16px Arial",D.textAlign="center",D.fillText("FAKE CAMERA",160,50),D.fillText("For Testing",160,200),D.font="12px Arial",D.fillText("Enable real camera in settings",160,220),R++},100);const Y=w.captureStream(10).getVideoTracks()[0];return Y.enabled=!0,console.log(" Fake video track created"),Y},J=()=>{console.log(" Creating fake audio track...");const w=new(window.AudioContext||window.webkitAudioContext),D=w.createOscillator(),R=w.createGain();D.connect(R),R.connect(w.destination),D.frequency.value=440,D.type="sine",R.gain.value=0,D.start();const N=w.createMediaStreamDestination();D.connect(N);const A=N.stream.getAudioTracks()[0];return A.enabled=!0,console.log(" Fake audio track created"),A},q=V.useCallback(async(w={})=>{g(!0),E(null);try{console.log(" Initializing media...",w),P.current&&(P.current.stop(),P.current=null),j.current&&(j.current.stop(),j.current=null);const D=new MediaStream;let R=!1,N=!1;if(w.video!==!1)try{P.current=await B("video"),P.current&&(D.addTrack(P.current),R=!0,o(!0),console.log(" Video added to stream"))}catch(A){console.warn("Video init failed:",A),o(!1)}if(w.audio!==!1)try{j.current=await B("audio"),j.current&&(D.addTrack(j.current),N=!0,f(!0),console.log(" Audio added to stream"))}catch(A){console.warn("Audio init failed:",A),f(!1)}return!R&&!N&&E("Could not access camera or microphone. Please check permissions."),n(D),console.log(" Media initialized successfully!",{hasVideo:R,hasAudio:N,streamId:D.id}),await $(),D}catch(D){throw console.error(" Media initialization failed:",D),E(`Failed to initialize media: ${D.message}`),D}finally{g(!1)}},[B,$]),ge=V.useCallback(async()=>{g(!0);try{if(s){console.log(" Turning camera OFF..."),P.current&&(P.current.stop(),P.current=null);const w=new MediaStream;j.current&&w.addTrack(j.current),n(w),o(!1),console.log(" Camera OFF")}else{console.log(" Turning camera ON..."),P.current=await B("video");const w=new MediaStream;j.current&&w.addTrack(j.current),w.addTrack(P.current),n(w),o(!0),console.log(" Camera ON")}}catch(w){console.error("Error toggling camera:",w),E(`Camera error: ${w.message}`)}finally{g(!1)}},[s,B]),_e=V.useCallback(async()=>{g(!0);try{if(u){console.log(" Muting microphone..."),j.current&&(j.current.stop(),j.current=null);const w=new MediaStream;P.current&&w.addTrack(P.current),n(w),f(!1),console.log(" Microphone MUTED")}else{console.log(" Unmuting microphone..."),j.current=await B("audio");const w=new MediaStream;P.current&&w.addTrack(P.current),w.addTrack(j.current),n(w),f(!0),console.log(" Microphone UNMUTED")}}catch(w){console.error("Error toggling microphone:",w),E(`Microphone error: ${w.message}`)}finally{g(!1)}},[u,B]),Ee=V.useCallback(()=>{P.current&&(P.current.stop(),P.current=null),j.current&&(j.current.stop(),j.current=null),n(null),o(!1),f(!1)},[]),O=V.useCallback(async()=>{console.log(" Restarting media with permission request...");try{return(await navigator.mediaDevices.getUserMedia({video:!0,audio:!0})).getTracks().forEach(D=>D.stop()),await q({video:!0,audio:!0}),console.log(" Media restarted with permissions"),!0}catch(w){return console.error(" Permission request failed:",w),E(`Permission denied: ${w.message}`),!1}},[q]);Hm.useEffect(()=>{(async()=>{try{await q({video:!0,audio:!0})}catch{console.log("Auto-initialize failed, user will need to manually enable")}})()},[q]),Hm.useEffect(()=>()=>{Ee()},[Ee]);const x={localStream:e,isCameraOn:s,isMicOn:u,isLoading:m,error:p,devices:T,initializeMedia:q,toggleCamera:ge,toggleMicrophone:_e,stopMedia:Ee,restartMediaWithPermissions:O,getDevices:$};return b.jsx(wS.Provider,{value:x,children:r})},WN=()=>Math.floor(1e5+Math.random()*9e5).toString(),JN=async r=>{const e=Lt(Ge,"rooms"),n=yf(e,wo("roomCode","==",r));return(await Un(n)).empty},ZN=async(r,e)=>{try{let n,s=!1;for(let f=0;f<5&&(n=WN(),s=await JN(n),!s);f++);if(!s)throw new Error("Could not generate unique room code. Please try again.");const o={name:r.name||`${e.displayName}'s Room`,maxParticipants:Math.min(Math.max(r.maxParticipants,2),10),currentParticipants:1,hostId:e.uid,hostName:e.displayName,hostPhotoURL:e.photoURL||"",createdAt:vi(),lastActivity:vi(),isActive:!0,status:"waiting",roomCode:n},u=await BN(Lt(Ge,"rooms"),o);return await ho(vn(Ge,"rooms",u.id,"participants",e.uid),{name:e.displayName,email:e.email,photoURL:e.photoURL||"",joinedAt:vi(),isHost:!0,isActive:!0}),{id:u.id,...o,roomCode:n}}catch(n){throw console.error("Error creating room:",n),n}},Rh=async r=>{try{const e=vn(Ge,"rooms",r),n=await vs(e);return n.exists()?{id:n.id,...n.data()}:null}catch(e){throw console.error("Error getting room:",e),e}},eO=async r=>{try{const e=Lt(Ge,"rooms"),n=yf(e,wo("roomCode","==",r)),s=await Un(n);if(!s.empty){const o=s.docs[0];return{id:o.id,...o.data()}}return null}catch(e){throw console.error("Error getting room by code:",e),e}},tO=async()=>{try{const r=Lt(Ge,"rooms"),e=yf(r,wo("isActive","==",!0),wo("status","in",["waiting","active"]));return(await Un(e)).docs.map(s=>({id:s.id,...s.data()}))}catch(r){throw console.error("Error getting active rooms:",r),r}},dh=async r=>{try{const e=Lt(Ge,"rooms",r,"participants");return(await Un(e)).docs.map(s=>({id:s.id,...s.data()}))}catch(e){throw console.error("Error getting participants:",e),e}},nO=async(r,e)=>{try{console.log("=== JOIN ROOM ATTEMPT ==="),console.log(`User: ${e.uid} (${e.displayName})`),console.log(`Room: ${r}`);const n=vn(Ge,"rooms",r,"participants",e.uid);if((await vs(n)).exists())return console.log("User already a participant, skipping join"),{alreadyJoined:!0};const o=vn(Ge,"rooms",r),u=await vs(o);if(!u.exists())throw new Error("Room not found");const f=u.data();if(console.log("Current room state:",f),f.currentParticipants>=f.maxParticipants)throw console.log("Room is full, cannot join"),new Error("Room is full");console.log("Starting transaction to join room...");try{const m=await GN(Ge,async g=>{const p=await g.get(o);if(!p.exists())throw new Error("Room not found");const E=p.data();if(console.log("Fresh room data in transaction:",E),E.currentParticipants>=E.maxParticipants)throw new Error("Room is now full");return(await g.get(n)).exists()?(console.log("User already joined (race condition detected)"),{alreadyJoined:!0}):(g.set(n,{name:e.displayName,email:e.email,photoURL:e.photoURL||"",joinedAt:vi(),isHost:!1,isActive:!0}),g.update(o,{currentParticipants:E.currentParticipants+1,lastActivity:vi()}),console.log("Transaction successful - user joined"),{success:!0,newCount:E.currentParticipants+1})});return console.log("Transaction result:",m),console.log("=== JOIN SUCCESSFUL ==="),m}catch(m){return console.error("Transaction error:",m),console.log("Trying non-transactional approach..."),await ho(n,{name:e.displayName,email:e.email,photoURL:e.photoURL||"",joinedAt:vi(),isHost:!1,isActive:!0}),await zN(o,{currentParticipants:$N(1),lastActivity:vi()}),console.log("Non-transactional join successful"),{success:!0,fallback:!0}}}catch(n){console.error("Join room error:",n);try{if((await vs(vn(Ge,"rooms",r,"participants",e.uid))).exists())return console.log("User was added despite error (race condition)"),{alreadyJoined:!0}}catch(s){console.error("Final check error:",s)}throw n}},iO=async(r,e)=>{try{console.log("=== DEBUG ROOM STATE ===");const n=vn(Ge,"rooms",r),s=await vs(n);if(s.exists()){const g=s.data();console.log("Room data:",g),console.log(`Participants: ${g.currentParticipants}/${g.maxParticipants}`)}else console.log("Room not found");const o=vn(Ge,"rooms",r,"participants",e),u=await vs(o);console.log("Participant exists?",u.exists()),u.exists()&&console.log("Participant data:",u.data());const f=Lt(Ge,"rooms",r,"participants"),m=await Un(f);console.log("All participants count:",m.docs.length),m.docs.forEach(g=>{console.log(`- ${g.id}: ${g.data().name}`)})}catch(n){console.error("Debug error:",n)}},rO=(r,e)=>{try{const n=vn(Ge,"rooms",r);return console.log(`Setting up room listener for: ${r}`),aa(n,o=>{if(console.log(`Room snapshot received for ${r}:`,o.exists()),o.exists()){const u={id:o.id,...o.data()};console.log("Room data:",u),e(u)}else console.log("Room does not exist"),e(null)},o=>{console.error("Error in room listener:",o),e(null,o)})}catch(n){throw console.error("Error setting up room listener:",n),n}},sO=(r,e)=>{try{const n=Lt(Ge,"rooms",r,"participants");return console.log(`Setting up participants listener for room: ${r}`),aa(n,o=>{const u=o.docs.map(f=>({id:f.id,...f.data()}));console.log(`Participants snapshot: ${u.length} participants`),e(u)},o=>{console.error("Error in participants listener:",o),e([],o)})}catch(n){throw console.error("Error setting up participants listener:",n),n}},aO=r=>{try{const e=Lt(Ge,"rooms"),n=yf(e,wo("isActive","==",!0),wo("status","in",["waiting","active"]));return aa(n,o=>{const u=o.docs.map(f=>({id:f.id,...f.data()}));r(u)},o=>{console.error("Error listening to active rooms:",o)})}catch(e){throw console.error("Error setting up active rooms listener:",e),e}},RS=V.createContext(),Du=()=>{const r=V.useContext(RS);if(!r)throw new Error("useRoom must be used within a RoomProvider");return r},oO=({children:r})=>{const{user:e}=ya(),[n,s]=V.useState([]),[o,u]=V.useState(null),[f,m]=V.useState(!1),[g,p]=V.useState(null),E=async Z=>{if(!e)throw new Error("User must be logged in");m(!0),p(null);try{const J=await ZN(Z,e);return s(q=>[J,...q]),u(J),J}catch(J){throw p(J.message),J}finally{m(!1)}},T=async()=>{m(!0);try{const Z=await tO();return s(Z),Z}catch(Z){throw p(Z.message),Z}finally{m(!1)}},I=async Z=>{m(!0);try{const J=await Rh(Z);if(!J||!J.isActive)throw new Error("Room not found or inactive");return u(J),J}catch(J){throw p(J.message),J}finally{m(!1)}},P=async Z=>{m(!0);try{const J=await eO(Z);if(!J||!J.isActive)throw new Error("Room not found or inactive");return u(J),J}catch(J){throw p(J.message),J}finally{m(!1)}},j=()=>{u(null)},$=()=>{p(null)};V.useEffect(()=>{e&&T()},[e]);const B={rooms:n,currentRoom:o,loading:f,error:g,createRoom:E,fetchActiveRooms:T,joinRoomById:I,joinRoomByCode:P,leaveRoom:j,clearError:$,setCurrentRoom:u};return b.jsx(RS.Provider,{value:B,children:r})},CS=V.createContext(),yg=()=>{const r=V.useContext(CS);if(!r)throw new Error("usePeer must be used within a PeerProvider");return r},lO=({children:r})=>{const{user:e}=ya(),{localStream:n}=Tf(),{currentRoom:s}=Du(),[o,u]=V.useState({}),[f,m]=V.useState("idle"),[g,p]=V.useState(0),E=V.useRef({}),T=V.useRef(null),I=V.useRef([]),P={iceServers:[{urls:"stun:stun.l.google.com:19302"},{urls:"stun:stun1.l.google.com:19302"},{urls:"stun:stun2.l.google.com:19302"},{urls:"stun:stun3.l.google.com:19302"},{urls:"turn:openrelay.metered.ca:80",username:"openrelayproject",credential:"openrelayproject"},{urls:"turn:openrelay.metered.ca:443",username:"openrelayproject",credential:"openrelayproject"}]},j=()=>{console.log(" === PEER CONNECTIONS DEBUG ==="),console.log("Total peer connections:",Object.keys(E.current).length),Object.entries(E.current).forEach(([R,N])=>{console.log(`
 Peer: ${R}`),console.log("  Connection state:",N.connectionState),console.log("  ICE connection state:",N.iceConnectionState),console.log("  Signaling state:",N.signalingState),console.log("  ICE gathering state:",N.iceGatheringState);const A=N.getTransceivers();console.log("  Transceivers:",A.length),A.forEach((Y,he)=>{console.log(`    Transceiver ${he}:`,{direction:Y.direction,currentDirection:Y.currentDirection,receiver:Y.receiver?{track:Y.receiver.track,trackEnabled:Y.receiver.track?.enabled,trackMuted:Y.receiver.track?.muted,trackReadyState:Y.receiver.track?.readyState}:null,sender:Y.sender?{track:Y.sender.track,trackEnabled:Y.sender.track?.enabled,trackMuted:Y.sender.track?.muted}:null})})}),console.log(`
 Peers state:`,o),Object.entries(o).forEach(([R,N])=>{console.log(`  ${R}:`,{hasStream:!!N.stream,streamId:N.stream?.id,streamActive:N.stream?.active,tracks:N.stream?.getTracks().map(A=>({kind:A.kind,id:A.id,enabled:A.enabled,muted:A.muted,readyState:A.readyState,label:A.label})),connectionState:N.connectionState})})},$=V.useCallback(()=>{console.log(" Cleaning up peer connections"),Object.values(E.current).forEach(R=>{R&&R.signalingState!=="closed"&&R.close()}),E.current={},I.current.forEach(R=>R()),I.current=[],u({}),m("idle"),p(0),console.log(" Peer cleanup complete")},[]),B=V.useCallback(async R=>{if(!(!e||!R)){console.log(" Initializing signaling for room:",R);try{const N=vn(Ge,"rooms",R,"signaling",e.uid);await ho(N,{userId:e.uid,userName:e.displayName,isOnline:!0,lastSeen:vi(),status:"online",readyForConnection:!0},{merge:!0}),console.log(" Signaling document created/updated for user:",e.uid)}catch(N){console.error(" Error creating signaling document:",N)}}},[e]),Z=V.useCallback((R,N)=>{console.log(" Creating peer connection to:",R);try{const A=new RTCPeerConnection(P);if(E.current[R]=A,T.current){const Y=T.current.getTracks();console.log(` Adding ${Y.length} local tracks to peer connection`),Y.forEach(he=>{A.addTrack(he,T.current),console.log(`  Added ${he.kind} track:`,he.id)})}return A.ontrack=Y=>{console.log(" ========== ONTRACK EVENT =========="),console.log("  From:",R),console.log("  Track:",{id:Y.track.id,kind:Y.track.kind,enabled:Y.track.enabled,muted:Y.track.muted,readyState:Y.track.readyState,label:Y.track.label}),console.log("  Streams:",Y.streams.length),Y.streams.forEach((he,z)=>{console.log(`  Stream ${z}:`,{id:he.id,active:he.active,tracks:he.getTracks().map(oe=>({id:oe.id,kind:oe.kind,enabled:oe.enabled,muted:oe.muted}))})}),console.log("  Receiver:",Y.receiver),console.log("  Transceiver:",Y.transceiver),u(he=>{const z=he[R];let W=z?.stream;return W||(W=new MediaStream,console.log("  Created new MediaStream:",W.id)),Y.streams.forEach(ue=>{ue.getTracks().forEach(le=>{W.getTracks().some(k=>k.id===le.id)||(console.log(`  Adding ${le.kind} track:`,le.id),W.addTrack(le),le.addEventListener("unmute",()=>{console.log(` Track ${le.id} UNMUTED!`),j()}),le.addEventListener("mute",()=>{console.log(` Track ${le.id} muted`)}),le.addEventListener("ended",()=>{console.log(` Track ${le.id} ended`)}))})}),console.log("  Stream now has tracks:",W.getTracks().length),W.getTracks().forEach(ue=>{console.log(`    ${ue.kind}:`,{id:ue.id,enabled:ue.enabled,muted:ue.muted,readyState:ue.readyState})}),{...he,[R]:{...z,stream:W,connectionState:A.connectionState,userData:N}}})},A.onicecandidate=Y=>{Y.candidate?(console.log(" New ICE candidate for:",R,Y.candidate),J(R,Y.candidate)):console.log(" ICE gathering complete for:",R)},A.onicegatheringstatechange=()=>{console.log(` ICE gathering state for ${R}:`,A.iceGatheringState)},A.onconnectionstatechange=()=>{console.log(` Connection state with ${R}:`,A.connectionState),u(Y=>({...Y,[R]:{...Y[R],connectionState:A.connectionState}})),A.connectionState==="connected"?(console.log(` Connected to ${R}`),m("connected"),j()):(A.connectionState==="disconnected"||A.connectionState==="failed"||A.connectionState==="closed")&&(console.log(` Connection lost with ${R}`),E.current[R]&&(E.current[R].close(),delete E.current[R]),u(Y=>{const he={...Y};return delete he[R],he}))},A.oniceconnectionstatechange=()=>{console.log(` ICE connection state with ${R}:`,A.iceConnectionState),(A.iceConnectionState==="connected"||A.iceConnectionState==="completed")&&console.log(` ICE connected to ${R}`),A.iceConnectionState==="failed"&&(console.log(` ICE connection failed for ${R}, restarting ICE`),setTimeout(()=>{A.iceConnectionState==="failed"&&A.restartIce()},1e3))},A.onsignalingstatechange=()=>{console.log(` Signaling state with ${R}:`,A.signalingState)},A.getReceivers().forEach(Y=>{Y.track&&Y.track.addEventListener("unmute",()=>{console.log(` Receiver track ${Y.track.id} UNMUTED!`)})}),console.log(" Peer connection created for:",R),j(),A}catch(A){return console.error(" Error creating peer connection:",A),null}},[]),J=V.useCallback(async(R,N)=>{if(!(!s?.id||!e))try{const A=vn(Ge,"rooms",s.id,"signaling",R,"candidates",`${Date.now()}_${e.uid}`);await ho(A,{to:R,from:e.uid,candidate:N.toJSON(),timestamp:vi(),type:"candidate"}),console.log(" ICE candidate sent to:",R)}catch(A){console.error(" Error sending ICE candidate:",A)}},[s?.id,e]),q=V.useCallback(async(R,N)=>{if(!(!s?.id||!e)){console.log(" Sending offer to user:",R),console.log("  Offer:",N);try{const A=vn(Ge,"rooms",s.id,"signaling",R,"offers",`${Date.now()}_${e.uid}`);await ho(A,{sdp:JSON.stringify(N),from:e.uid,fromName:e.displayName,to:R,timestamp:vi(),type:"offer"}),console.log(" Offer saved to Firestore")}catch(A){console.error(" Error sending offer:",A)}}},[s?.id,e]),ge=V.useCallback(async(R,N)=>{if(!(!s?.id||!e)){console.log(" Sending answer to user:",R),console.log("  Answer:",N);try{const A=vn(Ge,"rooms",s.id,"signaling",R,"answers",`${Date.now()}_${e.uid}`);await ho(A,{sdp:JSON.stringify(N),from:e.uid,fromName:e.displayName,to:R,timestamp:vi(),type:"answer"}),console.log(" Answer saved to Firestore")}catch(A){console.error(" Error sending answer:",A)}}},[s?.id,e]),_e=V.useCallback(async(R,N)=>{console.log(" ========== HANDLE INCOMING OFFER =========="),console.log("  From:",R),console.log("  Offer type:",N?.type),console.log("  Offer SDP (first 200 chars):",N?.sdp?.substring(0,200));try{let A=E.current[R];if(!A){console.log("  Creating new peer connection...");const he={id:R,name:N.fromName||"Remote User"};if(A=Z(R,he),!A){console.error("   Failed to create peer connection");return}}console.log("  Setting remote description..."),await A.setRemoteDescription(new RTCSessionDescription(N)),console.log("   Remote description set"),console.log("  Creating answer...");const Y=await A.createAnswer({offerToReceiveAudio:!0,offerToReceiveVideo:!0});console.log("  Answer created:",Y.type),console.log("  Setting local description..."),await A.setLocalDescription(Y),console.log("   Local description set"),console.log("  Sending answer to:",R),await ge(R,Y),console.log("   Answer sent"),u(he=>({...he,[R]:{...he[R],connectionState:"connecting",userData:{id:R,name:N.fromName||"Remote User"}}}))}catch(A){console.error(" Error in handleIncomingOffer:",A)}},[Z,ge]),Ee=V.useCallback(async(R,N)=>{console.log(" ========== HANDLE INCOMING ANSWER =========="),console.log("  From:",R),console.log("  Answer type:",N?.type);const A=E.current[R];if(!A){console.error(" No peer connection found for:",R);return}try{const Y=new RTCSessionDescription(N);await A.setRemoteDescription(Y),console.log(" Remote description set for:",R)}catch(Y){console.error(" Error setting remote description:",Y)}},[]),O=V.useCallback(async(R,N)=>{console.log(" ========== HANDLE INCOMING ICE CANDIDATE =========="),console.log("  From:",R),console.log("  Candidate:",N);const A=E.current[R];if(!A){console.error(" No peer connection found for ICE candidate:",R);return}try{await A.addIceCandidate(new RTCIceCandidate(N)),console.log(" ICE candidate added for:",R)}catch(Y){console.error(" Error adding ICE candidate:",Y)}},[]),x=V.useCallback(async(R,N)=>{if(!(!e||e.uid===R)){if(console.log(" ========== CONNECT TO USER =========="),console.log("  User:",R),console.log("  User data:",N),m("connecting"),E.current[R]){console.log(" Already connected to:",R);return}try{const A=Z(R,N);if(!A)throw new Error("Failed to create peer connection");console.log("  Creating offer...");const Y=await A.createOffer({offerToReceiveAudio:!0,offerToReceiveVideo:!0});console.log("  Offer created:",Y.type),await A.setLocalDescription(Y),await q(R,Y),console.log(" Offer created and sent to:",R),u(he=>({...he,[R]:{connectionState:"connecting",userData:N}}))}catch(A){console.error(" Error connecting to user:",A),m("error")}}},[e,Z,q]),w=async R=>{console.log(" ========== TEST CONNECTION =========="),console.log("  Testing connection to:",R);const N=E.current[R];if(!N){console.log(" No peer connection found");return}console.log("  Connection state:",N.connectionState),console.log("  ICE connection state:",N.iceConnectionState),console.log("  Signaling state:",N.signalingState);const A=N.getTransceivers();console.log("  Transceivers:",A.length),A.forEach((Y,he)=>{console.log(`    Transceiver ${he}:`,{direction:Y.direction,currentDirection:Y.currentDirection,receiver:Y.receiver?{track:Y.receiver.track,trackEnabled:Y.receiver.track?.enabled,trackMuted:Y.receiver.track?.muted}:null,sender:Y.sender?{track:Y.sender.track,trackEnabled:Y.sender.track?.enabled}:null})});try{const Y=await N.getStats();console.log("  Stats:",Y)}catch(Y){console.log("  Could not get stats:",Y)}};V.useEffect(()=>{console.log(" Local stream updated:",n?.id),T.current=n},[n]),V.useEffect(()=>{s?.id&&e&&(console.log(" Initializing signaling for room:",s.id),B(s.id))},[s?.id,e,B]),V.useEffect(()=>()=>{$()},[$]),V.useEffect(()=>{if(!s?.id||!e)return;console.log(" Setting up offer listener for user:",e.uid);const R=Lt(Ge,"rooms",s.id,"signaling",e.uid,"offers"),N=aa(R,A=>{console.log(" Offer snapshot received, changes:",A.docChanges().length),A.docChanges().forEach(async Y=>{if(Y.type==="added"){const he=Y.doc.data();console.log(" NEW OFFER RECEIVED from:",he.from),console.log("  Offer data:",he);try{const z=typeof he.sdp=="string"?JSON.parse(he.sdp):he.sdp;await _e(he.from,z),await zm(Y.doc.ref),console.log(" Offer processed and cleaned up")}catch(z){console.error(" Error processing offer:",z)}}})},A=>{console.error(" Error in offer listener:",A)});return I.current.push(N),()=>{N()}},[s?.id,e,_e]),V.useEffect(()=>{if(!s?.id||!e)return;console.log(" Setting up answer listener");const R=Lt(Ge,"rooms",s.id,"signaling",e.uid,"answers"),N=aa(R,A=>{console.log(" Answer snapshot received, changes:",A.docChanges().length),A.docChanges().forEach(async Y=>{if(Y.type==="added"){const he=Y.doc.data();console.log(" Received answer from:",he.from),console.log("  Answer data:",he);try{const z=typeof he.sdp=="string"?JSON.parse(he.sdp):he.sdp;await Ee(he.from,z),await zm(Y.doc.ref),console.log(" Answer processed")}catch(z){console.error(" Error processing answer:",z)}}})});return I.current.push(N),()=>{N()}},[s?.id,e,Ee]),V.useEffect(()=>{if(!s?.id||!e)return;console.log(" Setting up ICE candidate listener");const R=Lt(Ge,"rooms",s.id,"signaling",e.uid,"candidates"),N=aa(R,A=>{console.log(" ICE candidate snapshot received, changes:",A.docChanges().length),A.docChanges().forEach(async Y=>{if(Y.type==="added"){const he=Y.doc.data();console.log(" Received ICE candidate from:",he.from),console.log("  Candidate data:",he);try{let z;typeof he.candidate=="string"?z=JSON.parse(he.candidate):z=he.candidate,await O(he.from,z),await zm(Y.doc.ref),console.log(" ICE candidate processed")}catch(z){console.error(" Error processing ICE candidate:",z)}}})});return I.current.push(N),()=>{N()}},[s?.id,e,O]),V.useEffect(()=>{if(!s?.id||!e)return;console.log(" ========== SETTING UP PARTICIPANTS LISTENER =========="),console.log("  My ID:",e.uid),console.log("  Room Host ID:",s.hostId),console.log("  Am I host?",s.hostId===e.uid);const R=Lt(Ge,"rooms",s.id,"participants"),N=aa(R,A=>{const Y=A.docs.map(z=>({id:z.id,...z.data()}));console.log(" Current participants:",Y.map(z=>`${z.name} (${z.id})`));const he=Y.filter(z=>z.id!==e.uid);if(console.log("  Other participants:",he.length),s.hostId===e.uid)console.log(` I AM THE HOST - connecting to ${he.length} other participants`),he.forEach(z=>{if(!E.current[z.id])console.log(`   Creating connection to: ${z.name} (${z.id})`),setTimeout(()=>{x(z.id,{name:z.name,photoURL:z.photoURL})},1e3);else{const oe=E.current[z.id];console.log(`  ${oe.connectionState==="connected"?"":""} Already connected to ${z.name}: ${oe.connectionState}`)}});else{console.log(" I AM A JOINER - connecting to host only");const z=Y.find(oe=>oe.isHost);z&&z.id!==e.uid&&(E.current[z.id]||(console.log(`   Connecting to host: ${z.name} (${z.id})`),setTimeout(()=>{x(z.id,{name:z.name,photoURL:z.photoURL})},1e3)))}});return I.current.push(N),()=>{N()}},[s,e,x]),V.useEffect(()=>{const R=Object.keys(o).length;p(R),R>0&&f!=="connected"&&m("connected")},[o,f]),V.useEffect(()=>{const R=setInterval(()=>{Object.entries(E.current).forEach(([N,A])=>{A&&(A.connectionState==="disconnected"||A.connectionState==="failed"||A.connectionState==="closed")&&(console.log(` Cleaning up stale connection to ${N}`),A.close(),delete E.current[N],u(Y=>{const he={...Y};return delete he[N],he}))})},1e4);return()=>clearInterval(R)},[]);const D={peers:o,connectionStatus:f,activeConnections:g,connectToUser:x,cleanup:$,debugPeerConnections:j,testConnection:w};return b.jsx(CS.Provider,{value:D,children:r})},kE=({children:r})=>{const{user:e,loading:n}=ya();return n?b.jsx("div",{className:"flex-center",style:{minHeight:"100vh",backgroundColor:"var(--bg-dark)"},children:b.jsxs("div",{className:"text-center",children:[b.jsx("div",{className:"spinner"}),b.jsx("p",{style:{marginTop:"1rem",color:"var(--text-light)"},children:"Loading Labyrinth..."})]})}):e?r:b.jsx(hw,{to:"/",replace:!0})},qm=()=>{const{loginWithGoogle:r}=ya(),e=Io(),[n,s]=Hm.useState(!1),o=async()=>{s(!0);try{await r(),e("/dashboard")}catch(u){console.error("Login failed:",u),alert("Login failed. Please try again.")}finally{s(!1)}};return b.jsx("div",{style:{minHeight:"100vh",width:"100%",background:"linear-gradient(135deg, var(--primary-darker) 0%, var(--primary-dark) 100%)",display:"flex",alignItems:"center",justifyContent:"center",padding:"var(--space-md)"},children:b.jsxs("div",{style:{background:"var(--bg-card)",backdropFilter:"blur(20px)",borderRadius:"var(--radius-xl)",border:"1px solid var(--border-medium)",padding:"var(--space-xl)",width:"90%",maxWidth:"400px",boxShadow:"var(--shadow-xl)",margin:"0 auto"},children:[b.jsxs("div",{style:{textAlign:"center",marginBottom:"var(--space-xl)"},children:[b.jsx("h1",{style:{fontSize:"3rem",fontWeight:"700",background:"linear-gradient(135deg, var(--primary-purple), var(--accent-pink))",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",backgroundClip:"text",marginBottom:"var(--space-xs)",letterSpacing:"1px"},children:"Labyrinth"}),b.jsx("p",{style:{color:"var(--text-gray)",fontSize:"1.1rem",fontWeight:"300"},children:"Video Chat Maze"})]}),b.jsxs("div",{style:{textAlign:"center"},children:[b.jsx("h2",{style:{fontSize:"1.8rem",fontWeight:"600",marginBottom:"var(--space-sm)",color:"var(--text-light)"},children:"Welcome to Labyrinth"}),b.jsx("p",{style:{color:"var(--text-gray)",marginBottom:"var(--space-lg)",fontSize:"1rem",lineHeight:"1.5"},children:"Enter the maze of conversations. Connect, collaborate, and converse."}),b.jsx("button",{onClick:o,disabled:n,style:{width:"100%",background:"white",color:"#333",border:"none",padding:"var(--space-md)",borderRadius:"var(--radius-md)",fontSize:"1rem",fontWeight:"500",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"var(--space-sm)",transition:"all 0.2s ease",boxShadow:"var(--shadow-md)",opacity:n?.6:1},onMouseOver:u=>{n||(u.currentTarget.style.transform="translateY(-2px)",u.currentTarget.style.boxShadow="var(--shadow-lg)")},onMouseOut:u=>{n||(u.currentTarget.style.transform="translateY(0)",u.currentTarget.style.boxShadow="var(--shadow-md)")},children:n?b.jsxs(b.Fragment,{children:[b.jsx("div",{style:{width:"20px",height:"20px",border:"2px solid rgba(0, 0, 0, 0.1)",borderTopColor:"#333",borderRadius:"50%",animation:"spin 1s linear infinite"}}),b.jsx("span",{children:"Signing in..."})]}):b.jsxs(b.Fragment,{children:[b.jsxs("svg",{style:{width:"20px",height:"20px"},viewBox:"0 0 24 24",children:[b.jsx("path",{fill:"currentColor",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),b.jsx("path",{fill:"currentColor",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),b.jsx("path",{fill:"currentColor",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),b.jsx("path",{fill:"currentColor",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),b.jsx("span",{children:"Continue with Google"})]})}),b.jsx("div",{style:{marginTop:"var(--space-lg)",paddingTop:"var(--space-md)",borderTop:"1px solid var(--border-light)"},children:b.jsx("p",{style:{color:"var(--text-gray)",fontSize:"0.9rem",lineHeight:"1.4"},children:"By signing in, you agree to our Terms of Service and Privacy Policy"})})]})]})})},uO=({isOpen:r,onClose:e})=>{const{createRoom:n,loading:s}=Du(),o=Io(),[u,f]=V.useState({name:"",maxParticipants:4}),[m,g]=V.useState("");if(!r)return null;const p=async T=>{if(T.preventDefault(),g(""),u.maxParticipants<2||u.maxParticipants>10){g("Participants must be between 2 and 10");return}try{const I=await n(u);e(),o(`/room/${I.id}`)}catch(I){g(I.message||"Failed to create room")}},E=T=>{const{name:I,value:P}=T.target;f(j=>({...j,[I]:I==="maxParticipants"?parseInt(P)||2:P}))};return b.jsx("div",{style:Et.overlay,children:b.jsxs("div",{style:Et.modal,children:[b.jsxs("div",{style:Et.header,children:[b.jsx("h2",{style:Et.title,children:"Create New Room"}),b.jsx("button",{onClick:e,style:Et.closeButton,children:""})]}),b.jsxs("form",{onSubmit:p,style:Et.form,children:[b.jsx("div",{style:Et.formGroup,children:b.jsxs("label",{style:Et.label,children:["Room Name (Optional)",b.jsx("input",{type:"text",name:"name",value:u.name,onChange:E,placeholder:"Enter room name",style:Et.input,maxLength:30})]})}),b.jsx("div",{style:Et.formGroup,children:b.jsxs("label",{style:Et.label,children:["Maximum Participants: ",u.maxParticipants,b.jsxs("div",{style:Et.sliderContainer,children:[b.jsx("input",{type:"range",name:"maxParticipants",min:"2",max:"10",value:u.maxParticipants,onChange:E,style:Et.slider}),b.jsxs("div",{style:Et.sliderLabels,children:[b.jsx("span",{children:"2"}),b.jsx("span",{children:"10"})]})]}),b.jsx("div",{style:Et.participantHint,children:u.maxParticipants===10?"Max capacity (10 participants)":`${u.maxParticipants} participants maximum`})]})}),m&&b.jsx("div",{style:Et.error,children:m}),b.jsxs("div",{style:Et.buttonGroup,children:[b.jsx("button",{type:"button",onClick:e,style:Et.cancelButton,disabled:s,children:"Cancel"}),b.jsx("button",{type:"submit",style:Et.createButton,disabled:s,children:s?b.jsxs(b.Fragment,{children:[b.jsx("div",{style:Et.spinner}),"Creating..."]}):"Create Room"})]})]}),b.jsx("div",{style:Et.note,children:b.jsxs("p",{style:Et.noteText,children:[b.jsx("strong",{children:"Note:"})," You'll become the host of this room. You can invite others using the room code that will be generated."]})})]})})},Et={overlay:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.7)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3,backdropFilter:"blur(4px)"},modal:{backgroundColor:"var(--bg-card)",borderRadius:"var(--radius-lg)",border:"1px solid var(--border-medium)",width:"90%",maxWidth:"500px",maxHeight:"90vh",overflow:"auto",boxShadow:"var(--shadow-xl)"},header:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"var(--space-lg)",borderBottom:"1px solid var(--border-light)"},title:{fontSize:"1.5rem",fontWeight:"600",color:"var(--text-light)",margin:0},closeButton:{background:"none",border:"none",fontSize:"2rem",color:"var(--text-gray)",cursor:"pointer",padding:"0",width:"40px",height:"40px",display:"flex",alignItems:"center",justifyContent:"center",borderRadius:"50%",transition:"all 0.2s ease"},form:{padding:"var(--space-lg)"},formGroup:{marginBottom:"var(--space-lg)"},label:{display:"block",color:"var(--text-light)",marginBottom:"var(--space-sm)",fontSize:"0.95rem",fontWeight:"500"},input:{width:"100%",padding:"var(--space-sm)",backgroundColor:"rgba(255, 255, 255, 0.1)",border:"1px solid var(--border-light)",borderRadius:"var(--radius-md)",color:"var(--text-light)",fontSize:"1rem",marginTop:"var(--space-xs)",transition:"all 0.2s ease"},sliderContainer:{marginTop:"var(--space-sm)"},slider:{width:"100%",height:"6px",borderRadius:"3px",backgroundColor:"rgba(255, 255, 255, 0.1)",outline:"none",opacity:"0.7",transition:"opacity 0.2s",WebkitAppearance:"none"},sliderLabels:{display:"flex",justifyContent:"space-between",marginTop:"var(--space-xs)",color:"var(--text-gray)",fontSize:"0.9rem"},participantHint:{marginTop:"var(--space-xs)",color:"var(--accent-blue)",fontSize:"0.9rem",fontStyle:"italic"},error:{backgroundColor:"rgba(239, 68, 68, 0.2)",color:"#f87171",padding:"var(--space-sm)",borderRadius:"var(--radius-md)",marginBottom:"var(--space-md)",fontSize:"0.9rem"},buttonGroup:{display:"flex",gap:"var(--space-md)",marginTop:"var(--space-xl)"},cancelButton:{flex:1,padding:"var(--space-md)",backgroundColor:"rgba(255, 255, 255, 0.1)",border:"1px solid var(--border-light)",borderRadius:"var(--radius-md)",color:"var(--text-light)",fontSize:"1rem",fontWeight:"500",cursor:"pointer",transition:"all 0.2s ease"},createButton:{flex:2,padding:"var(--space-md)",background:"linear-gradient(135deg, var(--primary-purple), var(--primary-indigo))",border:"none",borderRadius:"var(--radius-md)",color:"white",fontSize:"1rem",fontWeight:"600",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"var(--space-sm)",transition:"all 0.2s ease"},spinner:{width:"20px",height:"20px",border:"2px solid rgba(255, 255, 255, 0.3)",borderTopColor:"white",borderRadius:"50%",animation:"spin 1s linear infinite"},note:{padding:"var(--space-lg)",backgroundColor:"rgba(59, 130, 246, 0.1)",borderTop:"1px solid rgba(59, 130, 246, 0.3)",borderBottomLeftRadius:"var(--radius-lg)",borderBottomRightRadius:"var(--radius-lg)"},noteText:{margin:0,color:"#93c5fd",fontSize:"0.9rem",lineHeight:1.5}},cO=()=>{const{user:r,logout:e}=ya(),{rooms:n,loading:s,error:o,fetchActiveRooms:u}=Du(),f=Io(),[m,g]=V.useState(n),[p,E]=V.useState(!1),[T,I]=V.useState(!1),[P,j]=V.useState("");V.useEffect(()=>{if(!r)return;console.log("Setting up dashboard room listeners");const q=aO(ge=>{console.log("Dashboard rooms updated:",ge.length,"rooms"),ge.forEach(_e=>{console.log(`Room ${_e.id}: ${_e.currentParticipants}/${_e.maxParticipants}`)}),g(ge)});return()=>{console.log("Cleaning up dashboard listeners"),q()}},[r]),V.useEffect(()=>{g(n)},[n]);const $=async()=>{try{await e(),f("/")}catch(q){console.error("Logout failed:",q)}},B=async q=>{I(!0),j("");try{const ge=m.find(_e=>_e.id===q);if(!ge){j("Room not found");return}if(ge.currentParticipants>=ge.maxParticipants){j("This room is now full");return}if(!ge.isActive||ge.status==="ended"){j("This room is no longer active");return}f(`/room/${q}`)}catch(ge){console.error("Error joining room:",ge),j("Failed to join room. Please try again.")}finally{I(!1)}},Z=q=>{if(!q)return"Just now";let ge;if(q.toDate)ge=q.toDate();else if(q instanceof Date)ge=q;else if(q.seconds)ge=new Date(q.seconds*1e3);else return"Just now";const Ee=new Date-ge,O=Math.floor(Ee/6e4);if(O<1)return"Just now";if(O<60)return`${O}m ago`;const x=Math.floor(O/60);return x<24?`${x}h ago`:`${Math.floor(x/24)}d ago`},J=q=>q.currentParticipants>=q.maxParticipants;return b.jsxs(b.Fragment,{children:[b.jsxs("div",{className:"dashboard-page",children:[b.jsx("nav",{className:"dashboard-nav",children:b.jsxs("div",{className:"container nav-container",children:[b.jsxs("div",{className:"nav-left",children:[b.jsx("div",{className:"nav-logo"}),b.jsx("h1",{className:"nav-title",children:"Labyrinth"})]}),b.jsxs("div",{className:"nav-right",children:[b.jsxs("div",{className:"user-info",children:[r?.photoURL&&b.jsx("img",{src:r.photoURL,alt:r.displayName,className:"user-avatar"}),b.jsx("span",{className:"user-name",children:r?.displayName})]}),b.jsx("button",{onClick:$,className:"logout-btn",children:"Logout"})]})]})}),b.jsx("main",{className:"dashboard-main",children:b.jsx("div",{className:"container",children:b.jsxs("div",{className:"dashboard-content",children:[b.jsxs("div",{className:"dashboard-header",children:[b.jsx("h2",{className:"dashboard-title",children:"Labyrinth Dashboard"}),b.jsx("p",{className:"dashboard-subtitle",children:"Create or join video chat rooms. Host meetings, collaborate, and connect."})]}),b.jsxs("div",{style:Oe.quickActions,children:[b.jsxs("div",{style:Oe.actionCard,children:[b.jsx("div",{style:Oe.actionIcon,children:""}),b.jsx("h3",{style:Oe.actionTitle,children:"Create Room"}),b.jsx("p",{style:Oe.actionDescription,children:"Start a new video chat room. Set participant limits and invite others."}),b.jsx("button",{onClick:()=>E(!0),style:Oe.actionButton,children:"Create New Room"})]}),b.jsxs("div",{style:Oe.actionCard,children:[b.jsx("div",{style:Oe.actionIcon,children:""}),b.jsx("h3",{style:Oe.actionTitle,children:"Active Rooms"}),b.jsx("p",{style:Oe.actionDescription,children:m.length===0?"No active rooms. Be the first to create one!":`${m.length} room${m.length!==1?"s":""} available`}),b.jsx("button",{onClick:u,style:Oe.refreshButton,disabled:s,children:s?"Refreshing...":" Refresh List"})]})]}),b.jsxs("div",{style:Oe.roomsSection,children:[b.jsxs("div",{style:Oe.sectionHeader,children:[b.jsxs("h3",{style:Oe.sectionTitle,children:["Available Rooms ",m.length>0&&`(${m.length})`]}),P&&b.jsxs("div",{style:Oe.joinErrorBanner,children:[P,b.jsx("button",{onClick:()=>j(""),style:Oe.dismissError,children:""})]})]}),o&&b.jsxs("div",{style:Oe.errorMessage,children:["Error: ",o,b.jsx("button",{onClick:u,style:Oe.retryButton,children:"Retry"})]}),s&&m.length===0?b.jsxs("div",{style:Oe.loading,children:[b.jsx("div",{style:Oe.spinner}),b.jsx("p",{children:"Loading rooms..."})]}):m.length===0?b.jsxs("div",{style:Oe.emptyState,children:[b.jsx("div",{style:Oe.emptyIcon,children:""}),b.jsx("h4",{style:Oe.emptyTitle,children:"No Active Rooms"}),b.jsx("p",{style:Oe.emptyText,children:'Be the first to create a room! Click "Create New Room" above.'})]}):b.jsx("div",{style:Oe.roomsGrid,children:m.map(q=>{const ge=J(q);return b.jsxs("div",{style:{...Oe.roomCard,...ge?Oe.roomCardFull:{},...T?Oe.roomCardDisabled:{}},children:[b.jsxs("div",{style:Oe.roomHeader,children:[b.jsxs("div",{style:Oe.roomHost,children:[q.hostPhotoURL?b.jsx("img",{src:q.hostPhotoURL,alt:q.hostName,style:Oe.hostAvatar}):b.jsx("div",{style:Oe.defaultAvatar,children:q.hostName.charAt(0)}),b.jsx("span",{style:Oe.hostName,children:q.hostName})]}),b.jsxs("div",{style:Oe.roomCode,children:["#",q.roomCode]})]}),b.jsx("h4",{style:Oe.roomName,children:q.name}),b.jsxs("div",{style:Oe.roomDetails,children:[b.jsxs("div",{style:Oe.participantInfo,children:[b.jsxs("span",{style:{...Oe.participantCount,...ge?Oe.participantCountFull:{}},children:[q.currentParticipants,"/",q.maxParticipants]}),b.jsx("span",{style:Oe.participantLabel,children:ge?"FULL":"participants"})]}),b.jsx("div",{style:Oe.roomTime,children:Z(q.createdAt)})]}),ge?b.jsx("div",{style:Oe.fullRoomBadge,children:b.jsx("span",{style:Oe.fullRoomText,children:"Room Full"})}):b.jsx("button",{style:Oe.joinRoomButton,onClick:()=>B(q.id),disabled:T,children:T?"Joining...":"Join Room"})]},q.id)})})]})]})})})]}),b.jsx(uO,{isOpen:p,onClose:()=>E(!1)})]})},Oe={quickActions:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(300px, 1fr))",gap:"var(--space-lg)",marginBottom:"var(--space-xl)"},actionCard:{backgroundColor:"var(--bg-card-light)",border:"1px solid var(--border-light)",borderRadius:"var(--radius-lg)",padding:"var(--space-lg)",transition:"all 0.3s ease"},actionIcon:{fontSize:"2.5rem",marginBottom:"var(--space-md)"},actionTitle:{fontSize:"1.3rem",fontWeight:"600",marginBottom:"var(--space-sm)",color:"var(--text-light)"},actionDescription:{color:"var(--text-gray)",marginBottom:"var(--space-md)",lineHeight:1.5},actionButton:{width:"100%",padding:"var(--space-md)",background:"linear-gradient(135deg, var(--primary-purple), var(--primary-indigo))",border:"none",borderRadius:"var(--radius-md)",color:"white",fontSize:"1rem",fontWeight:"600",cursor:"pointer",transition:"all 0.2s ease"},refreshButton:{width:"100%",padding:"var(--space-md)",backgroundColor:"rgba(255, 255, 255, 0.1)",border:"1px solid var(--border-light)",borderRadius:"var(--radius-md)",color:"var(--text-light)",fontSize:"1rem",fontWeight:"500",cursor:"pointer",transition:"all 0.2s ease"},roomsSection:{marginTop:"var(--space-xl)"},sectionHeader:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"var(--space-lg)"},sectionTitle:{fontSize:"1.5rem",fontWeight:"600",color:"var(--text-light)",margin:0},joinErrorBanner:{backgroundColor:"rgba(239, 68, 68, 0.2)",color:"#f87171",padding:"8px 16px",borderRadius:"var(--radius-md)",display:"flex",alignItems:"center",gap:"10px"},dismissError:{background:"none",border:"none",color:"#f87171",fontSize:"1.2rem",cursor:"pointer",padding:"0",width:"24px",height:"24px",display:"flex",alignItems:"center",justifyContent:"center",borderRadius:"50%"},errorMessage:{backgroundColor:"rgba(239, 68, 68, 0.2)",color:"#f87171",padding:"var(--space-md)",borderRadius:"var(--radius-md)",marginBottom:"var(--space-md)"},retryButton:{marginLeft:"10px",padding:"4px 12px",backgroundColor:"rgba(59, 130, 246, 0.2)",border:"1px solid rgba(59, 130, 246, 0.3)",borderRadius:"4px",color:"#93c5fd",cursor:"pointer",fontSize:"0.9rem"},loading:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:"var(--space-xl)",color:"var(--text-gray)"},spinner:{width:"40px",height:"40px",border:"3px solid rgba(255, 255, 255, 0.1)",borderTopColor:"var(--primary-purple)",borderRadius:"50%",animation:"spin 1s linear infinite",marginBottom:"var(--space-md)"},emptyState:{textAlign:"center",padding:"var(--space-xl)",color:"var(--text-gray)"},emptyIcon:{fontSize:"4rem",marginBottom:"var(--space-md)",opacity:.5},emptyTitle:{fontSize:"1.5rem",marginBottom:"var(--space-sm)",color:"var(--text-light)"},emptyText:{fontSize:"1rem",lineHeight:1.5},roomsGrid:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(300px, 1fr))",gap:"var(--space-md)"},roomCard:{backgroundColor:"var(--bg-card-light)",border:"1px solid var(--border-light)",borderRadius:"var(--radius-lg)",padding:"var(--space-lg)",transition:"all 0.3s ease"},roomCardFull:{borderColor:"rgba(239, 68, 68, 0.3)",backgroundColor:"rgba(30, 41, 59, 0.5)"},roomCardDisabled:{pointerEvents:"none",opacity:.5},roomHeader:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"var(--space-md)"},roomHost:{display:"flex",alignItems:"center",gap:"var(--space-sm)"},hostAvatar:{width:"32px",height:"32px",borderRadius:"50%",border:"2px solid var(--border-light)"},defaultAvatar:{width:"32px",height:"32px",borderRadius:"50%",backgroundColor:"var(--primary-purple)",display:"flex",alignItems:"center",justifyContent:"center",color:"white",fontWeight:"600",fontSize:"0.9rem"},hostName:{fontSize:"0.9rem",color:"var(--text-light)",fontWeight:"500"},roomCode:{backgroundColor:"rgba(124, 58, 237, 0.2)",color:"#a78bfa",padding:"var(--space-xs) var(--space-sm)",borderRadius:"var(--radius-sm)",fontSize:"0.8rem",fontWeight:"600",fontFamily:"monospace"},roomName:{fontSize:"1.2rem",fontWeight:"600",color:"var(--text-light)",marginBottom:"var(--space-md)"},roomDetails:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"var(--space-lg)"},participantInfo:{display:"flex",alignItems:"baseline",gap:"var(--space-xs)"},participantCount:{fontSize:"1.5rem",fontWeight:"700",color:"var(--text-light)"},participantCountFull:{color:"#f87171"},participantLabel:{fontSize:"0.9rem",color:"var(--text-gray)"},roomTime:{fontSize:"0.9rem",color:"var(--text-gray)"},fullRoomBadge:{width:"100%",padding:"12px",backgroundColor:"rgba(239, 68, 68, 0.1)",border:"1px solid rgba(239, 68, 68, 0.2)",borderRadius:"var(--radius-md)",textAlign:"center"},fullRoomText:{color:"#f87171",fontWeight:"600",fontSize:"0.9rem"},joinRoomButton:{width:"100%",padding:"var(--space-sm)",backgroundColor:"rgba(59, 130, 246, 0.2)",border:"1px solid rgba(59, 130, 246, 0.3)",borderRadius:"var(--radius-md)",color:"#93c5fd",fontSize:"0.9rem",fontWeight:"600",cursor:"pointer",transition:"all 0.2s ease"}},hO=()=>{const{user:r}=ya(),{currentRoom:e}=Du(),{peers:n,connectionStatus:s,activeConnections:o}=yg(),[u,f]=V.useState(null),[m,g]=V.useState(!1),p=async()=>{g(!0),f(null),console.log("=== CONNECTION DEBUG ===");const E={timestamp:new Date().toISOString(),user:{id:r?.uid,name:r?.displayName},room:{id:e?.id,name:e?.name},peers:Object.keys(n).length,connectionStatus:s,activeConnections:o};if(console.log("Basic Info:",E),e?.id&&r?.uid)try{const T=Lt(Ge,"rooms",e.id,"signaling",r.uid,"offers"),I=await Un(T);E.offersCount=I.docs.length,E.offers=I.docs.map(P=>({id:P.id,from:P.data().from,timestamp:P.data().timestamp})),console.log("Offers found:",E.offersCount),console.log("Offers details:",E.offers)}catch(T){console.error("Error checking offers:",T),E.offersError=T.message}f(E),g(!1)};return b.jsxs("div",{style:{background:"rgba(0,0,0,0.9)",color:"white",padding:"15px",borderRadius:"8px",marginTop:"15px",fontSize:"12px",maxWidth:"400px"},children:[b.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"10px"},children:[b.jsx("strong",{style:{fontSize:"14px"},children:" Connection Debug"}),b.jsx("button",{onClick:p,disabled:m,style:{padding:"5px 10px",background:m?"#6b7280":"#8b5cf6",color:"white",border:"none",borderRadius:"4px",cursor:m?"not-allowed":"pointer",fontSize:"11px"},children:m?"Checking...":"Run Test"})]}),b.jsxs("div",{style:{marginBottom:"8px"},children:[b.jsx("span",{style:{color:"#93c5fd"},children:"Status:"})," ",s]}),b.jsxs("div",{style:{marginBottom:"8px"},children:[b.jsx("span",{style:{color:"#93c5fd"},children:"Active Peers:"})," ",o]}),b.jsxs("div",{style:{marginBottom:"8px"},children:[b.jsx("span",{style:{color:"#93c5fd"},children:"Room ID:"})," ",e?.id?.substring(0,10),"..."]}),b.jsxs("div",{style:{marginBottom:"8px"},children:[b.jsx("span",{style:{color:"#93c5fd"},children:"User ID:"})," ",r?.uid?.substring(0,10),"..."]}),u&&b.jsxs("div",{style:{marginTop:"10px",padding:"10px",background:"rgba(255,255,255,0.1)",borderRadius:"4px",fontSize:"11px"},children:[b.jsx("div",{style:{marginBottom:"5px"},children:b.jsx("strong",{children:" Debug Results:"})}),b.jsxs("div",{style:{marginBottom:"3px"},children:[b.jsx("span",{style:{color:"#86efac"},children:"Offers in my collection:"})," ",u.offersCount||0]}),u.offers&&u.offers.length>0&&b.jsxs("div",{style:{marginTop:"5px"},children:[b.jsx("div",{style:{color:"#fbbf24",marginBottom:"3px"},children:" Offers found:"}),u.offers.map((E,T)=>b.jsxs("div",{style:{marginLeft:"10px",marginBottom:"2px"},children:["From: ",E.from?.substring(0,10),"..."]},T))]}),u.offersError&&b.jsxs("div",{style:{color:"#f87171",marginTop:"5px"},children:["Error: ",u.offersError]}),b.jsxs("div",{style:{marginTop:"5px",fontSize:"10px",opacity:.7},children:["Last checked: ",new Date(u.timestamp).toLocaleTimeString()]})]}),b.jsxs("div",{style:{marginTop:"10px",fontSize:"10px",opacity:.7},children:[b.jsx("div",{children:"User A (Chad): iMKGFzfEF1esEzNogBHreM89MzH2"}),b.jsx("div",{children:"User B (Gautam): GuUKvuO8E0goWwF89MK46MLiImt1"})]})]})},fO=({stream:r,userData:e,connectionState:n})=>{const s=V.useRef(null),[o,u]=V.useState(!1),[f,m]=V.useState(!1),[g,p]=V.useState({video:[],audio:[]}),[E,T]=V.useState(null),[I,P]=V.useState(null),[j,$]=V.useState({width:0,height:0}),[B,Z]=V.useState(""),J=V.useRef([]),q=x=>{const w=new Date().toLocaleTimeString();Z(D=>`${D}
[${w}] ${x}`),console.log(` ${x}`)};V.useEffect(()=>{if(q(`RemoteVideo useEffect called for user: ${e?.name}`),q(`Stream exists: ${!!r}`),q(`Stream active: ${r?.active}`),q(`Stream id: ${r?.id}`),q(`Previous stream id: ${I}`),J.current.forEach(({track:x,listeners:w})=>{Object.entries(w).forEach(([D,R])=>{x.removeEventListener(D,R)})}),J.current=[],r&&r.id!==I){P(r.id);const x=r.getVideoTracks(),w=r.getAudioTracks();q(`Video tracks: ${x.length}`),q(`Audio tracks: ${w.length}`);const D={video:x.map(Y=>({enabled:Y.enabled,muted:Y.muted,kind:Y.kind,label:Y.label||"No label",id:Y.id,readyState:Y.readyState})),audio:w.map(Y=>({enabled:Y.enabled,muted:Y.muted,kind:Y.kind,label:Y.label||"No label",id:Y.id,readyState:Y.readyState}))};p(D);const R=x.length>0,N=w.length>0;u(R),m(N);const A=(Y,he)=>{const z={unmute:()=>{q(` ${he.toUpperCase()} track UNMUTED: ${Y.id}`),he==="video"&&u(!0),he==="audio"&&m(!0),p(oe=>({...oe,[he]:oe[he].map(W=>W.id===Y.id?{...W,muted:!1}:W)}))},mute:()=>{q(` ${he.toUpperCase()} track muted: ${Y.id}`),p(oe=>({...oe,[he]:oe[he].map(W=>W.id===Y.id?{...W,muted:!0}:W)}))},ended:()=>{q(` ${he.toUpperCase()} track ended: ${Y.id}`)},enabled:()=>{q(` ${he.toUpperCase()} track enabled: ${Y.id}`)}};Object.entries(z).forEach(([oe,W])=>{Y.addEventListener(oe,W)}),J.current.push({track:Y,listeners:z}),Y.enabled||(q(` Enabling ${he} track: ${Y.id}`),Y.enabled=!0),Y.muted||z.unmute()};x.forEach(Y=>A(Y,"video")),w.forEach(Y=>A(Y,"audio"))}if(s.current&&r){q(" Setting video srcObject..."),s.current.srcObject!==r&&(s.current.srcObject=r,q(` srcObject set to stream: ${r.id}`));const x=()=>{s.current&&s.current.paused&&(q(" Attempting to play video..."),s.current.play().then(()=>{q(" Video play succeeded"),T(null),setTimeout(()=>{if(s.current){const w=s.current.videoWidth,D=s.current.videoHeight;$({width:w,height:D}),q(` Video dimensions: ${w}x${D}`),q(` Ready state: ${s.current.readyState}`),q(` Current time: ${s.current.currentTime}`),w===0&&D===0&&(q(" Video still black, checking tracks..."),r?.getTracks()?.forEach(N=>{q(`   Track ${N.kind}: enabled=${N.enabled}, muted=${N.muted}, readyState=${N.readyState}`)}))}},2e3)}).catch(w=>{q(` Video play failed: ${w.message}`),T(w.message),setTimeout(()=>{s.current&&s.current.paused&&s.current.play().catch(D=>{q(`Second play attempt failed: ${D.message}`)})},1e3)}))};x(),s.current.onloadedmetadata=()=>{q(" Video metadata loaded"),x()},s.current.oncanplay=()=>{q(" Video can play"),x()},s.current.onresize=()=>{const w=s.current.videoWidth,D=s.current.videoHeight;$({width:w,height:D}),q(` Video resized: ${w}x${D}`)}}return()=>{J.current.forEach(({track:x,listeners:w})=>{Object.entries(w).forEach(([D,R])=>{x.removeEventListener(D,R)})}),J.current=[]}},[r,e,I]),V.useEffect(()=>{const x=[];return x.push(setTimeout(()=>{s.current&&s.current.paused&&o&&(q(" Force playing video after timeout..."),s.current.play().catch(w=>{q(`Force play error: ${w.message}`)}))},3e3)),x.push(setInterval(()=>{if(s.current&&o){const w=s.current.videoWidth,D=s.current.videoHeight;(w!==j.width||D!==j.height)&&($({width:w,height:D}),q(` Periodic check: ${w}x${D}`))}},5e3)),()=>{x.forEach(w=>clearTimeout(w)),x.forEach(w=>clearInterval(w))}},[o,j]);const ge=()=>{switch(n){case"connected":return"#10b981";case"connecting":return"#f59e0b";case"disconnected":return"#ef4444";case"failed":return"#dc2626";default:return"#6b7280"}},_e=()=>{console.log(" ========== VIDEO ELEMENT DEBUG =========="),console.log("Video element:",s.current),console.log("srcObject:",s.current?.srcObject),console.log("srcObject id:",s.current?.srcObject?.id),console.log("Stream id:",r?.id),console.log("Video dimensions:",`${s.current?.videoWidth}x${s.current?.videoHeight}`),console.log("Ready state:",s.current?.readyState),console.log("Paused:",s.current?.paused),console.log("Current time:",s.current?.currentTime),console.log("Error:",s.current?.error),console.log("Network state:",s.current?.networkState),r&&(console.log("Stream tracks:"),r.getTracks().forEach((x,w)=>{console.log(`  Track ${w} (${x.kind}):`,{id:x.id,enabled:x.enabled,muted:x.muted,readyState:x.readyState,label:x.label,constraints:x.getConstraints?.()})})),q("Video element debug logged to console")},Ee=()=>{r&&(r.getTracks().forEach(x=>{console.log(` Forcing ${x.kind} track:`,{before:{enabled:x.enabled,muted:x.muted},after:{enabled:!0,muted:x.muted}}),x.enabled=!0}),q("All tracks forced enabled"))},O=()=>{s.current&&s.current.play().then(()=>q("Manual play succeeded")).catch(x=>q(`Manual play failed: ${x.message}`))};return b.jsxs("div",{style:ot.container,children:[b.jsxs("div",{style:ot.videoWrapper,children:[o?b.jsxs(b.Fragment,{children:[b.jsx("video",{ref:s,autoPlay:!0,playsInline:!0,style:ot.video,muted:!1,onLoadedMetadata:()=>q("onLoadedMetadata fired"),onCanPlay:()=>q("onCanPlay fired"),onPlay:()=>q("onPlay fired"),onError:x=>{q(`onError fired: ${x.target.error?.message}`),T(s.current?.error?.message||"Unknown error")}}),b.jsxs("div",{style:ot.debugOverlay,children:[b.jsxs("div",{style:ot.debugRow,children:[b.jsxs("span",{children:[": ",g.video.length]}),b.jsxs("span",{children:[": ",g.audio.length]})]}),b.jsxs("div",{style:ot.debugRow,children:[b.jsx("span",{style:{color:o?"#10b981":"#ef4444"},children:o?"VIDEO":"NO VIDEO"}),b.jsx("span",{style:{color:f?"#10b981":"#ef4444"},children:f?"AUDIO":"NO AUDIO"})]}),b.jsx("div",{style:ot.debugRow,children:b.jsxs("span",{children:["Size: ",j.width,"x",j.height]})}),g.video.map((x,w)=>b.jsxs("div",{style:ot.trackInfoRow,children:[b.jsxs("span",{children:["V",w,":"]}),b.jsx("span",{style:{color:x.enabled?"#10b981":"#ef4444"},children:x.enabled?"ON":"OFF"}),b.jsx("span",{style:{color:x.muted?"#ef4444":"#10b981"},children:x.muted?"MUTED":"UNMUTED"})]},w))]}),E&&b.jsxs("div",{style:ot.errorOverlay,children:[b.jsxs("div",{style:ot.errorText,children:[" ",E]}),b.jsx("button",{style:ot.retryButton,onClick:O,children:"Retry Play"})]})]}):b.jsxs("div",{style:ot.noVideoPlaceholder,children:[b.jsx("div",{style:ot.avatar,children:e?.name?.charAt(0)||"U"}),b.jsx("p",{style:ot.noVideoText,children:"Waiting for video..."}),b.jsxs("div",{style:ot.trackInfo,children:[b.jsxs("div",{children:["Video tracks: ",g.video.length]}),b.jsxs("div",{children:["Audio tracks: ",g.audio.length]}),g.video.length>0&&b.jsx("div",{style:{fontSize:"0.7rem",color:"#f59e0b"},children:"Track exists but video not showing"})]})]}),b.jsxs("div",{style:ot.statusOverlay,children:[b.jsxs("div",{style:ot.statusIcons,children:[b.jsx("div",{style:{...ot.statusIcon,backgroundColor:o?"rgba(34, 197, 94, 0.7)":"rgba(239, 68, 68, 0.7)"},children:o?"":""}),b.jsx("div",{style:{...ot.statusIcon,backgroundColor:f?"rgba(34, 197, 94, 0.7)":"rgba(239, 68, 68, 0.7)"},children:f?"":""})]}),b.jsx("div",{style:{...ot.connectionStatus,backgroundColor:ge()},children:n||"unknown"})]}),b.jsx("div",{style:ot.nameLabel,children:e?.name||"Remote User"})]}),b.jsxs("div",{style:ot.debugPanel,children:[b.jsxs("div",{style:ot.debugButtons,children:[b.jsx("button",{style:ot.debugButton,onClick:_e,children:" Debug"}),b.jsx("button",{style:ot.debugButton,onClick:Ee,children:" Enable Tracks"}),b.jsx("button",{style:ot.debugButton,onClick:O,children:" Force Play"})]}),b.jsxs("details",{style:ot.debugLog,children:[b.jsx("summary",{children:"Debug Log"}),b.jsx("pre",{style:ot.debugLogContent,children:B})]})]})]})},ot={container:{width:"100%",height:"100%",position:"relative",backgroundColor:"#000",borderRadius:"var(--radius-lg)",overflow:"hidden",border:"2px solid #3b82f6"},videoWrapper:{width:"100%",height:"100%",position:"relative"},video:{width:"100%",height:"100%",objectFit:"cover",backgroundColor:"#000",display:"block"},debugOverlay:{position:"absolute",top:"5px",right:"5px",backgroundColor:"rgba(0, 0, 0, 0.8)",padding:"8px",borderRadius:"4px",fontSize:"0.7rem",color:"white",fontFamily:"monospace",maxWidth:"200px"},debugRow:{display:"flex",gap:"8px",justifyContent:"space-between",marginBottom:"4px"},trackInfoRow:{display:"flex",gap:"6px",justifyContent:"space-between",fontSize:"0.6rem",marginBottom:"2px"},errorOverlay:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",backgroundColor:"rgba(239, 68, 68, 0.8)",padding:"10px",borderRadius:"8px",color:"white",textAlign:"center",zIndex:20},errorText:{marginBottom:"10px",fontSize:"0.8rem"},retryButton:{padding:"5px 10px",backgroundColor:"white",color:"#ef4444",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"0.7rem"},noVideoPlaceholder:{width:"100%",height:"100%",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",backgroundColor:"#1e293b",color:"#94a3b8"},avatar:{width:"80px",height:"80px",borderRadius:"50%",backgroundColor:"#8b5cf6",display:"flex",alignItems:"center",justifyContent:"center",color:"white",fontSize:"2rem",fontWeight:"600",marginBottom:"10px"},noVideoText:{fontSize:"0.9rem",marginBottom:"10px"},trackInfo:{fontSize:"0.8rem",display:"flex",flexDirection:"column",gap:"5px",alignItems:"center",backgroundColor:"rgba(0, 0, 0, 0.3)",padding:"10px",borderRadius:"8px"},statusOverlay:{position:"absolute",top:"10px",left:"10px",right:"10px",display:"flex",justifyContent:"space-between",alignItems:"flex-start",zIndex:10},statusIcons:{display:"flex",gap:"5px"},statusIcon:{padding:"4px 8px",borderRadius:"12px",fontSize:"0.8rem",color:"white",backdropFilter:"blur(10px)",minWidth:"40px",textAlign:"center"},connectionStatus:{padding:"4px 8px",borderRadius:"12px",fontSize:"0.7rem",color:"white",fontWeight:"600",textTransform:"uppercase",backdropFilter:"blur(10px)",backgroundColor:"rgba(0, 0, 0, 0.5)"},nameLabel:{position:"absolute",bottom:"10px",left:"10px",padding:"6px 12px",backgroundColor:"rgba(0, 0, 0, 0.7)",color:"white",borderRadius:"var(--radius-md)",fontSize:"0.9rem",fontWeight:"500"},debugPanel:{position:"absolute",bottom:"10px",right:"10px",zIndex:20,display:"flex",flexDirection:"column",gap:"5px",alignItems:"flex-end"},debugButtons:{display:"flex",gap:"5px"},debugButton:{padding:"6px 12px",backgroundColor:"rgba(59, 130, 246, 0.7)",border:"1px solid rgba(59, 130, 246, 0.9)",borderRadius:"4px",color:"white",fontSize:"0.8rem",cursor:"pointer",fontWeight:"500"},debugLog:{backgroundColor:"rgba(0, 0, 0, 0.8)",color:"white",padding:"8px",borderRadius:"4px",fontSize:"0.7rem",fontFamily:"monospace",maxWidth:"300px",maxHeight:"150px",overflow:"auto"},debugLogContent:{margin:0,whiteSpace:"pre-wrap",wordBreak:"break-word"}},dO=()=>{const{localStream:r,isMicOn:e}=Tf(),n=V.useRef(null),s=V.useRef(null),o=V.useRef(null),u=V.useRef(null),f=V.useRef(null),[m,g]=V.useState(!1),[p,E]=V.useState(0);V.useEffect(()=>{if(!r||!e){s.current&&(cancelAnimationFrame(s.current),s.current=null),o.current&&o.current.state!=="closed"&&o.current.close(),g(!1),E(0);return}const $=r.getAudioTracks()[0];if(!$||!$.enabled){g(!1),E(0);return}return(async()=>{try{const Z=window.AudioContext||window.webkitAudioContext;o.current||(o.current=new Z),u.current=o.current.createAnalyser(),u.current.fftSize=256,u.current.minDecibels=-90,u.current.maxDecibels=-10,u.current.smoothingTimeConstant=.85,f.current=o.current.createMediaStreamSource(r),f.current.connect(u.current),g(!0),T()}catch(Z){console.error("Error setting up audio visualizer:",Z),g(!1)}})(),()=>{s.current&&cancelAnimationFrame(s.current),f.current&&f.current.disconnect(),u.current&&u.current.disconnect()}},[r,e]);const T=()=>{if(!n.current||!u.current)return;const $=n.current,B=$.getContext("2d"),Z=u.current.frequencyBinCount,J=new Uint8Array(Z),q=()=>{s.current=requestAnimationFrame(q),u.current.getByteFrequencyData(J);let ge=0;for(let w=0;w<J.length;w++)ge+=J[w];const _e=ge/J.length;E(_e),B.clearRect(0,0,$.width,$.height),B.fillStyle="rgba(0, 0, 0, 0.3)",B.fillRect(0,0,$.width,$.height);const Ee=$.width/Z*2.5;let O,x=0;for(let w=0;w<Z;w++){O=J[w]/2;const D=B.createLinearGradient(0,$.height,0,$.height-O);O<30?(D.addColorStop(0,"#10b981"),D.addColorStop(1,"#34d399")):O<60?(D.addColorStop(0,"#f59e0b"),D.addColorStop(1,"#fbbf24")):(D.addColorStop(0,"#ef4444"),D.addColorStop(1,"#f87171")),B.fillStyle=D,B.fillRect(x,$.height-O,Ee,O),x+=Ee+1}};q()},I=Math.min(Math.round(p/128*100),100);let P="low",j="#10b981";return I>30&&(P="medium",j="#f59e0b"),I>60&&(P="high",j="#ef4444"),b.jsxs("div",{style:kt.container,children:[b.jsxs("div",{style:kt.header,children:[b.jsxs("div",{style:kt.title,children:[b.jsx("span",{style:kt.icon,children:""}),"Microphone Activity"]}),b.jsxs("div",{style:kt.status,children:[b.jsx("div",{style:{...kt.statusDot,backgroundColor:e?"#10b981":"#ef4444"}}),b.jsx("span",{children:e?"Active":"Muted"})]})]}),b.jsxs("div",{style:kt.visualizerContainer,children:[b.jsx("canvas",{ref:n,width:300,height:80,style:kt.canvas}),b.jsxs("div",{style:kt.volumeInfo,children:[b.jsx("div",{style:kt.volumeBarContainer,children:b.jsx("div",{style:{...kt.volumeBar,width:`${I}%`,backgroundColor:j}})}),b.jsxs("div",{style:kt.volumeText,children:[b.jsx("span",{style:{color:j,fontWeight:"600"},children:P.toUpperCase()}),b.jsxs("span",{children:[I,"%"]})]})]})]}),b.jsx("div",{style:kt.instructions,children:!m&&e?b.jsxs("div",{style:kt.warning,children:[b.jsx("span",{style:kt.warningIcon,children:""}),'Speak to see audio activity. Try saying "Testing, 1, 2, 3"']}):e?b.jsxs("div",{style:kt.active,children:[b.jsx("span",{style:kt.activeIcon,children:""}),"Microphone is working! Volume: ",P]}):b.jsxs("div",{style:kt.muted,children:[b.jsx("span",{style:kt.mutedIcon,children:""}),"Microphone is muted"]})}),b.jsx("button",{onClick:()=>{if(e&&o.current){const $=o.current.createOscillator(),B=o.current.createGain();$.connect(B),B.connect(o.current.destination),$.frequency.value=440,$.type="sine",B.gain.setValueAtTime(0,o.current.currentTime),B.gain.linearRampToValueAtTime(.1,o.current.currentTime+.1),B.gain.linearRampToValueAtTime(0,o.current.currentTime+.5),$.start(o.current.currentTime),$.stop(o.current.currentTime+.5)}},style:kt.testButton,disabled:!e,children:" Test Sound"})]})},kt={container:{backgroundColor:"rgba(255, 255, 255, 0.05)",borderRadius:"var(--radius-lg)",padding:"15px",border:"1px solid var(--border-light)",marginTop:"20px"},header:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"15px"},title:{display:"flex",alignItems:"center",gap:"8px",fontWeight:"600",color:"var(--text-light)",fontSize:"1rem"},icon:{fontSize:"1.2rem"},status:{display:"flex",alignItems:"center",gap:"6px",fontSize:"0.85rem",color:"var(--text-gray)"},statusDot:{width:"8px",height:"8px",borderRadius:"50%"},visualizerContainer:{position:"relative",marginBottom:"15px"},canvas:{width:"100%",height:"80px",borderRadius:"var(--radius-md)",backgroundColor:"rgba(0, 0, 0, 0.5)"},volumeInfo:{marginTop:"10px"},volumeBarContainer:{width:"100%",height:"6px",backgroundColor:"rgba(255, 255, 255, 0.1)",borderRadius:"3px",overflow:"hidden",marginBottom:"5px"},volumeBar:{height:"100%",borderRadius:"3px",transition:"width 0.2s ease"},volumeText:{display:"flex",justifyContent:"space-between",fontSize:"0.8rem",color:"var(--text-gray)"},instructions:{fontSize:"0.85rem",textAlign:"center",marginBottom:"15px",padding:"10px",borderRadius:"var(--radius-md)"},warning:{color:"#f59e0b",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px"},warningIcon:{fontSize:"1rem"},muted:{color:"#ef4444",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px"},mutedIcon:{fontSize:"1rem"},active:{color:"#10b981",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px"},activeIcon:{fontSize:"1rem"},testButton:{width:"100%",padding:"10px",backgroundColor:"rgba(59, 130, 246, 0.2)",border:"1px solid rgba(59, 130, 246, 0.3)",borderRadius:"var(--radius-md)",color:"#93c5fd",fontSize:"0.9rem",fontWeight:"500",cursor:"pointer",transition:"all 0.2s ease"}},mO=()=>{const{localStream:r,isCameraOn:e,isMicOn:n,isLoading:s,error:o,initializeMedia:u,restartMediaWithPermissions:f}=Tf(),m=V.useRef(null);if(V.useEffect(()=>{if(m.current&&r){console.log(" Setting video srcObject for local preview"),m.current.srcObject=r;const E=r.getVideoTracks(),T=r.getAudioTracks();console.log(" Local stream tracks:",{video:E.length,audio:T.length,videoEnabled:E[0]?.enabled,audioEnabled:T[0]?.enabled})}},[r]),V.useEffect(()=>{(async()=>r||(console.log(" Initializing media on mount..."),await u()))()},[]),s)return b.jsxs("div",{style:We.loadingContainer,children:[b.jsx("div",{style:We.spinner}),b.jsx("p",{children:"Loading camera and microphone..."}),b.jsx("p",{style:We.hint,children:"Please allow permissions if prompted"})]});if(o)return b.jsxs("div",{style:We.errorContainer,children:[b.jsx("div",{style:We.errorIcon,children:""}),b.jsx("h4",{children:"Camera/Microphone Error"}),b.jsx("p",{style:We.errorText,children:o}),b.jsxs("div",{style:We.errorButtons,children:[b.jsx("button",{onClick:f,style:We.retryButton,children:"Request Permissions"}),b.jsx("button",{onClick:u,style:We.secondaryButton,children:"Try Again"})]}),b.jsx("p",{style:We.helpText,children:"If this persists, check browser settings for camera/microphone permissions."})]});const g=r?.getVideoTracks().length>0,p=r?.getAudioTracks().length>0;return b.jsxs("div",{style:We.container,children:[b.jsxs("div",{style:We.videoWrapper,children:[g?b.jsx("video",{ref:m,autoPlay:!0,playsInline:!0,muted:!0,style:We.video,onLoadedMetadata:()=>console.log(" Local video metadata loaded"),onCanPlay:()=>console.log(" Local video can play")}):b.jsxs("div",{style:We.cameraOffPlaceholder,children:[b.jsx("div",{style:We.cameraOffIcon,children:""}),b.jsx("p",{children:"Camera not available"}),b.jsx("p",{style:We.smallText,children:e?"Waiting for camera...":"Camera is off"}),b.jsx("button",{onClick:()=>u({video:!0,audio:n}),style:We.enableButton,children:"Enable Camera"})]}),b.jsx("div",{style:We.statusOverlay,children:b.jsxs("div",{style:We.statusIcons,children:[b.jsxs("div",{style:{...We.statusIcon,...e&&g?We.statusOn:We.statusOff},children:[e&&g?"":"",b.jsx("span",{style:We.statusText,children:e&&g?"Camera On":"Camera Off"})]}),b.jsxs("div",{style:{...We.statusIcon,...n&&p?We.statusOn:We.statusOff},children:[n&&p?"":"",b.jsx("span",{style:We.statusText,children:n&&p?"Mic On":"Mic Muted"})]})]})}),b.jsx("div",{style:We.debugInfo,children:b.jsxs("span",{children:["Tracks: V:",r?.getVideoTracks().length||0," A:",r?.getAudioTracks().length||0]})}),b.jsx("div",{style:We.nameLabel,children:"You (Preview)"})]}),p&&b.jsx(dO,{}),b.jsxs("div",{style:We.mediaControls,children:[b.jsx("button",{onClick:()=>u({video:!0,audio:!0}),style:We.mediaButton,children:" Refresh Media"}),b.jsx("button",{onClick:f,style:We.mediaButton,children:" Request Permissions"})]})]})},We={container:{width:"100%",height:"100%",position:"relative",display:"flex",flexDirection:"column",gap:"15px"},loadingContainer:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:"100%",color:"var(--text-gray)",textAlign:"center"},spinner:{width:"40px",height:"40px",border:"3px solid rgba(255, 255, 255, 0.1)",borderTopColor:"var(--primary-purple)",borderRadius:"50%",animation:"spin 1s linear infinite",marginBottom:"15px"},hint:{fontSize:"0.9rem",opacity:.7,marginTop:"10px"},errorContainer:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:"100%",textAlign:"center",padding:"20px",color:"var(--text-light)"},errorIcon:{fontSize:"3rem",marginBottom:"15px",opacity:.7},errorText:{color:"var(--text-gray)",marginBottom:"20px",fontSize:"0.9rem"},errorButtons:{display:"flex",gap:"10px",marginBottom:"15px"},retryButton:{padding:"10px 20px",backgroundColor:"var(--primary-purple)",border:"none",borderRadius:"var(--radius-md)",color:"white",fontWeight:"500",cursor:"pointer",transition:"all 0.2s ease"},secondaryButton:{padding:"10px 20px",backgroundColor:"rgba(255, 255, 255, 0.1)",border:"1px solid var(--border-light)",borderRadius:"var(--radius-md)",color:"var(--text-light)",fontWeight:"500",cursor:"pointer",transition:"all 0.2s ease"},helpText:{fontSize:"0.8rem",color:"var(--text-gray)",maxWidth:"300px"},videoWrapper:{position:"relative",width:"100%",flex:1,backgroundColor:"#000",borderRadius:"var(--radius-lg)",overflow:"hidden",minHeight:"300px"},video:{width:"100%",height:"100%",objectFit:"cover",transform:"scaleX(-1)",backgroundColor:"#000"},cameraOffPlaceholder:{width:"100%",height:"100%",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",backgroundColor:"var(--bg-card)",color:"var(--text-gray)",textAlign:"center"},cameraOffIcon:{fontSize:"4rem",marginBottom:"15px",opacity:.5},smallText:{fontSize:"0.9rem",marginBottom:"15px",opacity:.7},enableButton:{padding:"8px 16px",backgroundColor:"var(--primary-purple)",border:"none",borderRadius:"var(--radius-md)",color:"white",fontWeight:"500",cursor:"pointer"},statusOverlay:{position:"absolute",top:"15px",left:"15px",right:"15px",zIndex:10},statusIcons:{display:"flex",gap:"10px",flexWrap:"wrap"},statusIcon:{display:"flex",alignItems:"center",gap:"6px",padding:"6px 12px",borderRadius:"20px",fontSize:"0.9rem",fontWeight:"500",backdropFilter:"blur(10px)",backgroundColor:"rgba(0, 0, 0, 0.5)",color:"white"},statusOn:{backgroundColor:"rgba(34, 197, 94, 0.7)"},statusOff:{backgroundColor:"rgba(239, 68, 68, 0.7)"},statusText:{fontSize:"0.8rem"},debugInfo:{position:"absolute",top:"15px",right:"15px",padding:"4px 8px",backgroundColor:"rgba(0, 0, 0, 0.7)",color:"white",borderRadius:"4px",fontSize:"0.7rem",fontFamily:"monospace"},nameLabel:{position:"absolute",bottom:"15px",left:"15px",padding:"6px 12px",backgroundColor:"rgba(0, 0, 0, 0.7)",color:"white",borderRadius:"var(--radius-md)",fontSize:"0.9rem",fontWeight:"500"},mediaControls:{display:"flex",gap:"10px",justifyContent:"center"},mediaButton:{padding:"8px 16px",backgroundColor:"rgba(59, 130, 246, 0.2)",border:"1px solid rgba(59, 130, 246, 0.3)",borderRadius:"var(--radius-md)",color:"#93c5fd",fontSize:"0.8rem",cursor:"pointer"}},gO=()=>{const{roomId:r}=WA(),e=Io(),{user:n}=ya(),{setCurrentRoom:s}=Du(),[o,u]=V.useState(null),[f,m]=V.useState([]),[g,p]=V.useState(!0),[E,T]=V.useState(""),[I,P]=V.useState(!1),{peers:j,connectionStatus:$,activeConnections:B,initializeUserSignaling:Z,connectToUser:J}=yg(),{localStream:q,isCameraOn:ge,isMicOn:_e,toggleCamera:Ee,toggleMicrophone:O,isLoading:x,error:w}=Tf(),D=async()=>{console.clear(),console.log(" === COMPLETE FIRESTORE DEBUG === "),console.log("Timestamp:",new Date().toISOString()),console.log("Current user:",n?.uid),console.log("Room ID:",r);try{console.log(`
 === CURRENT ROOM DATA ===`);const W=vn(Ge,"rooms",r),ue=await vs(W);if(!ue.exists()){console.log(" Room not found in Firestore");return}const le=ue.data();console.log(" Room Document:",{id:r,name:le.name,hostId:le.hostId,hostName:le.hostName,roomCode:le.roomCode,currentParticipants:le.currentParticipants,maxParticipants:le.maxParticipants,status:le.status,isActive:le.isActive,createdAt:le.createdAt?.toDate?.()||le.createdAt,lastActivity:le.lastActivity?.toDate?.()||le.lastActivity}),console.log(`
 === PARTICIPANTS ===`);const k=Lt(Ge,"rooms",r,"participants"),ee=await Un(k);console.log(`Total participants in DB: ${ee.docs.length}`),console.log(`Room shows: ${le.currentParticipants}/${le.maxParticipants}`),ee.docs.forEach(Se=>{const Ce=Se.data();console.log(`- ${Ce.name} (${Se.id})`,{isHost:Ce.isHost,isActive:Ce.isActive,joinedAt:Ce.joinedAt?.toDate?.()||Ce.joinedAt,email:Ce.email,isCurrentUser:Se.id===n?.uid})});const ce=ee.docs.some(Se=>Se.id===n?.uid);console.log(`
 Current user in participants? ${ce?"YES":"NO"}`),console.log(`
 === SIGNALING DATA ===`);const de=Lt(Ge,"rooms",r,"signaling"),we=await Un(de);console.log(`Signaling users: ${we.docs.length}`);for(const Se of we.docs){const Ce=Se.id,Pe=Se.data();console.log(`
 User: ${Ce} (${Pe.userName||"No name"})`),console.log("   Signaling Document:",{isOnline:Pe.isOnline,readyForConnection:Pe.readyForConnection,status:Pe.status,lastSeen:Pe.lastSeen?.toDate?.()||Pe.lastSeen});const Ye=Lt(Ge,"rooms",r,"signaling",Ce,"offers"),dn=await Un(Ye);console.log(`   Offers TO this user: ${dn.docs.length}`),dn.docs.forEach(In=>{const Kt=In.data();console.log(`     From: ${Kt.from} (${Kt.fromName}) to: ${Kt.to}`,{type:Kt.type,timestamp:Kt.timestamp?.toDate?.()||Kt.timestamp,docId:In.id})});const xn=Lt(Ge,"rooms",r,"signaling",Ce,"answers"),on=await Un(xn);console.log(`   Answers TO this user: ${on.docs.length}`),on.docs.forEach(In=>{const Kt=In.data();console.log(`     From: ${Kt.from} to: ${Kt.to}`)});const Ji=Lt(Ge,"rooms",r,"signaling",Ce,"candidates"),ln=await Un(Ji);console.log(`   ICE Candidates TO this user: ${ln.docs.length}`)}console.log(`
 === SUMMARY ===`),console.log(`Room: ${le.name} (${r})`),console.log(`Host: ${le.hostName} (${le.hostId})`),console.log(`Capacity: ${le.currentParticipants}/${le.maxParticipants}`),console.log(`Current user ${n?.uid} is ${ce?"IN":"NOT IN"} room`),console.log(`UI shows error: "${E}"`),console.log(`UI loading state: ${g}`)}catch(W){console.error(" Debug error:",W)}};V.useEffect(()=>{if(!r||!n)return;console.log(" Setting up real-time listeners for room:",r);const W=rO(r,le=>{console.log(" Room real-time update:",le),le?(u(le),s(le),E&&le.isActive&&le.currentParticipants<=le.maxParticipants&&T("")):T("Room was deleted")}),ue=sO(r,le=>{console.log(" Participants real-time update:",le),m(le);const k=le.some(ee=>ee.id===n.uid);console.log("Current user in room?",k),k&&E.includes("Room is full")&&(console.log(' User is in room, clearing "room is full" error'),T(""))});return()=>{console.log(" Cleaning up real-time listeners"),W(),ue()}},[r,n,E,s]);const R=V.useCallback(async()=>{if(!(!n||!r||I)){p(!0),T(""),P(!0),console.log("=== LOAD ROOM START ==="),console.log("User:",n.uid,n.displayName),console.log("Room ID:",r);try{const W=await Rh(r);if(console.log("Room data from service:",W),!W){T("Room not found"),p(!1);return}if(!W.isActive||W.status==="ended"){T("Room is no longer active"),p(!1);return}const ue=await dh(r);console.log("Participants from service:",ue),console.log("Participant IDs:",ue.map(Pe=>Pe.id));const le=ue.some(Pe=>Pe.id===n.uid);if(console.log("Is user already in room?",le),u(W),m(ue),s(W),le){console.log(" User already in room, loading complete"),p(!1),setTimeout(()=>{Z?.()},1e3);return}const k=ue.length>=W.maxParticipants;console.log("Is room full?",k,`(${ue.length}/${W.maxParticipants})`);const ee=vn(Ge,"rooms",r),de=(await vs(ee)).data(),we=Lt(Ge,"rooms",r,"participants"),Se=await Un(we),Ce=Se.docs.length;if(console.log("Fresh check - Room capacity:",de?.currentParticipants,"/",de?.maxParticipants),console.log("Fresh check - Actual participants:",Ce),console.log("Fresh check - User in fresh participants?",Se.docs.some(Pe=>Pe.id===n.uid)),Ce>=W.maxParticipants){console.log(" Room is actually full, cannot join"),T(`Room is full (${Ce}/${W.maxParticipants} participants)`),p(!1);return}console.log(" Attempting to join room...");try{const Pe=await nO(r,n);console.log("Join result:",Pe),await new Promise(on=>setTimeout(on,1e3));const Ye=await Rh(r),dn=await dh(r);console.log("After join - Room:",Ye),console.log("After join - Participants:",dn),u(Ye),m(dn),s(Ye);const xn=dn.some(on=>on.id===n.uid);if(console.log("User now in room?",xn),xn)console.log(" Successfully joined room, initializing signaling..."),setTimeout(()=>{Z?.()},1500);else{const on=await Un(Lt(Ge,"rooms",r,"participants"));if(on.docs.some(ln=>ln.id===n.uid)){console.log(" Race condition resolved - user IS in room");const ln=on.docs.map(In=>({id:In.id,...In.data()}));m(ln)}else console.log(" User still not in room after join attempt"),T("Failed to join room. Please try again.")}}catch(Pe){console.error("Join error:",Pe);const Ye=await dh(r);Ye.some(xn=>xn.id===n.uid)?(console.log(" User actually joined despite error (race condition)"),m(Ye),T(""),setTimeout(()=>{Z?.()},1500)):Pe.message.includes("full")?T("Room is now full. Please try another room."):T(`Failed to join: ${Pe.message}`)}}catch(W){console.error("Error in loadRoom:",W),T(`Failed to load room: ${W.message}`)}finally{p(!1),console.log("=== LOAD ROOM END ===")}}},[n,r,I,s,Z]);V.useEffect(()=>{if(!n){e("/");return}R()},[n,e,R]);const N=()=>{e("/dashboard")},A=()=>{o?.roomCode&&(navigator.clipboard.writeText(o.roomCode),alert(`Room code ${o.roomCode} copied to clipboard!`))},Y=()=>{const W=`${window.location.origin}/room/${r}`;navigator.clipboard.writeText(W),alert(`Invite link copied to clipboard!

${W}`)},he=async()=>{console.log(" Manually refreshing room data..."),p(!0);try{const W=await Rh(r),ue=await dh(r);u(W),m(ue),s(W),T(""),console.log(" Room data refreshed")}catch(W){console.error("Error refreshing room:",W)}finally{p(!1)}},z=()=>{console.clear(),console.log(" === WEBRTC CONNECTION DEBUG ==="),console.log("Peers object:",j),Object.entries(j).forEach(([ue,le])=>{if(console.log(`
 Peer: ${ue} (${le.userData?.name})`),console.log("   Connection state:",le.connectionState),le.stream){console.log("   Stream exists:",!!le.stream),console.log("   Stream active:",le.stream.active),console.log("   Stream id:",le.stream.id);const k=le.stream.getVideoTracks(),ee=le.stream.getAudioTracks();console.log("   Video tracks:",k.length),console.log("   Audio tracks:",ee.length),k.forEach((ce,de)=>{console.log(`   Video track ${de}:`,{enabled:ce.enabled,readyState:ce.readyState,muted:ce.muted,kind:ce.kind,label:ce.label})}),ee.forEach((ce,de)=>{console.log(`   Audio track ${de}:`,{enabled:ce.enabled,readyState:ce.readyState,muted:ce.muted,kind:ce.kind,label:ce.label})})}else console.log("    No stream available")}),console.log(`
 WebRTC Support:`),console.log("   RTCPeerConnection:",typeof RTCPeerConnection<"u"?" Available":" Not available"),console.log("   getUserMedia:",typeof navigator.mediaDevices?.getUserMedia<"u"?" Available":" Not available"),console.log(`
 Video Elements:`),document.querySelectorAll("video").forEach((ue,le)=>{console.log(`   Video ${le}:`,{srcObject:ue.srcObject,readyState:ue.readyState,error:ue.error,paused:ue.paused,muted:ue.muted,isRemote:!ue.muted})})};if(g)return b.jsxs("div",{style:ae.loadingContainer,children:[b.jsx("div",{style:ae.spinner}),b.jsx("p",{style:ae.loadingText,children:"Loading room..."}),b.jsx("button",{onClick:he,style:ae.refreshButton,children:"Force Refresh"})]});const oe=f.some(W=>W.id===n?.uid);return E&&E.includes("full")&&!oe?b.jsx("div",{style:ae.fullRoomContainer,children:b.jsxs("div",{style:ae.fullRoomContent,children:[b.jsx("div",{style:ae.fullRoomIcon,children:""}),b.jsx("h2",{style:ae.fullRoomTitle,children:"Room Full"}),b.jsxs("p",{style:ae.fullRoomMessage,children:["This room has reached its maximum capacity of ",o?.maxParticipants," participants."]}),b.jsxs("div",{style:ae.fullRoomDetails,children:[b.jsxs("p",{children:[b.jsx("strong",{children:"Room:"})," ",o?.name]}),b.jsxs("p",{children:[b.jsx("strong",{children:"Host:"})," ",o?.hostName]}),b.jsxs("p",{children:[b.jsx("strong",{children:"Current Participants:"})," ",o?.currentParticipants,"/",o?.maxParticipants]}),b.jsxs("p",{children:[b.jsx("strong",{children:"You are in room?"})," ",oe?"YES":"NO"]})]}),b.jsxs("div",{style:ae.debugInfo,children:[b.jsx("button",{onClick:D,style:ae.debugButton,children:" Debug Firestore"}),b.jsx("button",{onClick:he,style:ae.debugButton,children:" Refresh Data"})]}),b.jsxs("div",{style:ae.fullRoomActions,children:[b.jsx("button",{onClick:()=>e("/dashboard"),style:ae.fullRoomButton,children:"Back to Dashboard"}),!oe&&b.jsx("button",{onClick:async()=>{console.log(" Retrying join..."),P(!1),await R()},style:ae.fullRoomButtonSecondary,children:"Try Again"})]})]})}):E&&!E.includes("full")?b.jsxs("div",{style:ae.errorContainer,children:[b.jsx("div",{style:ae.errorIcon,children:""}),b.jsx("h2",{style:ae.errorTitle,children:"Room Unavailable"}),b.jsx("p",{style:ae.errorMessage,children:E}),b.jsxs("div",{style:ae.errorActions,children:[b.jsx("button",{onClick:()=>e("/dashboard"),style:ae.backButton,children:"Back to Dashboard"}),b.jsx("button",{onClick:he,style:ae.refreshButton,children:"Try Again"})]})]}):o?b.jsxs("div",{style:ae.container,children:[b.jsxs("header",{style:ae.header,children:[b.jsxs("div",{style:ae.headerLeft,children:[b.jsx("button",{onClick:()=>e("/dashboard"),style:ae.backButton,children:" Back"}),b.jsxs("div",{style:ae.roomInfo,children:[b.jsx("h1",{style:ae.roomName,children:o.name}),b.jsxs("div",{style:ae.roomMeta,children:[b.jsxs("span",{style:ae.roomCode,onClick:A,title:"Click to copy",children:["#",o.roomCode]}),b.jsxs("span",{style:ae.participantCount,children:[o.currentParticipants,"/",o.maxParticipants," participants"]}),b.jsx("span",{style:ae.roomStatus,"data-status":o.status,children:o.status}),!oe&&b.jsx("span",{style:ae.warningBadge,children:"Not in room"})]})]})]}),b.jsx("div",{style:ae.headerRight,children:b.jsx("button",{onClick:N,style:ae.leaveButton,children:"Leave Room"})})]}),b.jsxs("main",{style:ae.main,children:[b.jsxs("div",{style:ae.videoSection,children:[b.jsx("div",{style:ae.videoContainer,children:b.jsx(mO,{})}),Object.entries(j).map(([W,ue])=>b.jsx("div",{style:ae.videoContainer,children:b.jsx(fO,{stream:ue.stream,userData:ue.userData,connectionState:ue.connectionState})},W)),Object.keys(j).length===0&&$==="connected"&&b.jsxs("div",{style:ae.noConnectionsMessage,children:[b.jsx("div",{style:ae.noConnectionsIcon,children:""}),b.jsx("p",{style:ae.noConnectionsText,children:"Connected to room"}),b.jsx("p",{style:ae.noConnectionsSubtext,children:"Waiting for other participants to join..."}),b.jsxs("p",{style:ae.inviteHint,children:["Share room code: ",b.jsxs("strong",{children:["#",o?.roomCode]})]})]}),b.jsxs("div",{style:ae.connectionStatus,children:[b.jsx("div",{style:{...ae.statusIndicator,backgroundColor:$==="connected"?"#10b981":$==="connecting"?"#f59e0b":"#ef4444"},children:$.toUpperCase()}),b.jsxs("div",{style:ae.statusText,children:[B," connection",B!==1?"s":""," active"]})]})]}),b.jsxs("aside",{style:ae.sidebar,children:[b.jsxs("div",{style:ae.sidebarHeader,children:[b.jsx("h3",{style:ae.sidebarTitle,children:"Participants"}),b.jsx("span",{style:ae.participantBadge,children:f.length}),b.jsx("button",{onClick:he,style:ae.refreshSmallButton,title:"Refresh participants",children:""})]}),b.jsx("div",{style:ae.participantsList,children:f.map(W=>b.jsxs("div",{style:{...ae.participantItem,...W.isHost?ae.hostItem:{},...W.id===n?.uid?ae.currentUserItem:{}},children:[b.jsxs("div",{style:ae.participantAvatar,children:[W.photoURL?b.jsx("img",{src:W.photoURL,alt:W.name,style:ae.avatarImage}):b.jsx("div",{style:ae.defaultAvatar,children:W.name.charAt(0)}),W.isHost&&b.jsx("div",{style:ae.hostBadge,title:"Host",children:""})]}),b.jsxs("div",{style:ae.participantInfo,children:[b.jsxs("div",{style:ae.participantName,children:[W.name,W.id===n?.uid&&b.jsx("span",{style:ae.youBadge,children:" (You)"})]}),b.jsxs("div",{style:ae.participantStatus,children:[b.jsx("span",{style:ae.statusDot}),W.isActive?"Online":"Offline"]})]}),o.hostId===n?.uid&&!W.isHost&&b.jsx("button",{style:ae.kickButton,title:"Kick participant",onClick:()=>alert(`Kick ${W.name} - Coming soon`),children:""})]},W.id))}),b.jsxs("div",{style:ae.controlsSection,children:[b.jsx("h4",{style:ae.controlsTitle,children:"Room Controls"}),b.jsxs("div",{style:ae.controlsGrid,children:[b.jsx("button",{style:{...ae.controlButton,..._e?ae.controlButtonActive:ae.controlButtonInactive},onClick:O,disabled:x,children:_e?" Mic On":" Mic Muted"}),b.jsx("button",{style:{...ae.controlButton,...ge?ae.controlButtonActive:ae.controlButtonInactive},onClick:Ee,disabled:x,children:ge?" Camera On":" Camera Off"}),b.jsx("button",{style:ae.controlButton,onClick:Y,children:" Invite"}),b.jsx("button",{style:ae.controlButton,onClick:()=>navigator.clipboard.writeText(`#${o.roomCode}`),children:" Copy Code"}),o.hostId===n?.uid&&b.jsx("button",{style:ae.controlButtonDanger,onClick:()=>alert("End Room - Coming soon"),children:" End Room"})]}),w&&b.jsxs("div",{style:ae.mediaError,children:[" ",w]}),b.jsxs("div",{style:ae.peersStatus,children:[b.jsxs("div",{style:ae.peersStatusHeader,children:[b.jsx("span",{children:"Active Connections:"}),b.jsx("span",{style:{color:B>0?"#10b981":"#f59e0b",fontWeight:"600"},children:B})]}),Object.entries(j).map(([W,ue])=>b.jsxs("div",{style:ae.peerItem,children:[b.jsx("span",{style:ae.peerName,children:ue.userData?.name||"Peer"}),b.jsx("span",{style:{...ae.peerStatus,color:ue.connectionState==="connected"?"#10b981":ue.connectionState==="connecting"?"#f59e0b":"#ef4444"},children:ue.connectionState||"unknown"})]},W))]})]})]})]}),b.jsxs("details",{style:ae.debugPanel,children:[b.jsx("summary",{style:ae.debugSummary,children:" Debug Panel"}),b.jsx(hO,{}),b.jsxs("div",{style:ae.debugActions,children:[b.jsx("button",{onClick:D,style:ae.debugButton,children:" Debug Firestore"}),b.jsx("button",{onClick:iO,style:ae.debugButton,children:"Check Room State"}),b.jsx("button",{onClick:()=>console.log("Peers:",j),style:ae.debugButton,children:"Log Peers"}),b.jsx("button",{onClick:he,style:ae.debugButton,children:"Refresh Data"}),o?.hostId===n?.uid&&f.length>1&&b.jsx("button",{onClick:()=>{const W=f.find(ue=>ue.id!==n?.uid);W&&(console.log("Manual connect to:",W),J(W.id,{name:W.name,photoURL:W.photoURL}))},style:ae.debugButton,children:" Manual Connect"})]})]}),b.jsx("button",{style:ae.controlButton,onClick:z,children:" Debug WebRTC"}),b.jsx("button",{style:ae.controlButton,onClick:()=>{const W=document.createElement("canvas");W.width=640,W.height=480;const ue=W.getContext("2d"),le=ue.createLinearGradient(0,0,640,480);le.addColorStop(0,"#8b5cf6"),le.addColorStop(1,"#3b82f6"),ue.fillStyle=le,ue.fillRect(0,0,640,480),ue.fillStyle="white",ue.font="bold 30px Arial",ue.textAlign="center",ue.fillText("TEST VIDEO",320,200),ue.font="20px Arial",ue.fillText("Remote Stream Test",320,240),ue.fillText(new Date().toLocaleTimeString(),320,280);const k=W.captureStream(30),ee=k.getVideoTracks()[0];if(ee.enabled=!0,console.log(" Created test stream:",k),console.log("   Video track:",ee),Object.keys(j).length>0){const ce=Object.keys(j)[0];console.log(`Adding test stream to peer: ${ce}`),setPeers(de=>({...de,[ce]:{...de[ce],stream:k}}))}},children:" Test Video"}),b.jsx("button",{onClick:()=>{const{debugPeerConnections:W,testConnection:ue}=yg();W();const le=Object.keys(j)[0];le&&ue(le)},style:ae.debugButton,children:" Debug Connections"}),b.jsx("button",{onClick:()=>{console.log(" === ROOMPAGE PEERS DEBUG ==="),console.log("Peers:",j),Object.entries(j).forEach(([W,ue])=>{console.log(`
 Peer ${W}:`),console.log("  Connection state:",ue.connectionState),console.log("  User data:",ue.userData),console.log("  Has stream:",!!ue.stream),ue.stream&&(console.log("  Stream id:",ue.stream.id),console.log("  Stream active:",ue.stream.active),console.log("  Tracks:",ue.stream.getTracks().map(le=>({kind:le.kind,enabled:le.enabled,muted:le.muted,readyState:le.readyState}))))})},style:ae.debugButton,children:" Log Peers State"}),b.jsx("footer",{style:ae.footer,children:b.jsxs("div",{style:ae.footerContent,children:[b.jsxs("div",{style:ae.footerInfo,children:[b.jsxs("span",{children:["Room created by ",o.hostName]}),b.jsx("span",{style:ae.footerSeparator,children:""}),b.jsxs("span",{children:["You are ",o.hostId===n?.uid?"the host":"a participant"]}),b.jsx("span",{style:ae.footerSeparator,children:""}),b.jsx("span",{style:{color:$==="connected"?"#10b981":$==="connecting"?"#f59e0b":"#ef4444"},children:$.toUpperCase()}),!oe&&b.jsxs(b.Fragment,{children:[b.jsx("span",{style:ae.footerSeparator,children:""}),b.jsx("span",{style:{color:"#ef4444"},children:"NOT IN ROOM"})]})]}),b.jsxs("div",{style:ae.footerActions,children:[b.jsx("button",{style:ae.footerButton,onClick:Y,children:"Copy Invite Link"}),b.jsx("button",{style:ae.footerButton,onClick:()=>alert("Settings - Coming soon"),children:"Settings"})]})]})})]}):b.jsxs("div",{style:ae.errorContainer,children:[b.jsx("h2",{style:ae.errorTitle,children:"Room Not Found"}),b.jsx("button",{onClick:()=>e("/dashboard"),style:ae.backButton,children:"Back to Dashboard"})]})},ae={container:{minHeight:"100vh",backgroundColor:"var(--bg-dark)",color:"var(--text-light)",display:"flex",flexDirection:"column"},loadingContainer:{minHeight:"100vh",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",backgroundColor:"var(--bg-dark)",gap:"20px"},spinner:{width:"50px",height:"50px",border:"4px solid rgba(255, 255, 255, 0.1)",borderTopColor:"var(--primary-purple)",borderRadius:"50%",animation:"spin 1s linear infinite",marginBottom:"10px"},loadingText:{color:"var(--text-gray)",fontSize:"1.1rem"},refreshButton:{padding:"10px 20px",backgroundColor:"rgba(59, 130, 246, 0.2)",border:"1px solid rgba(59, 130, 246, 0.3)",borderRadius:"var(--radius-md)",color:"#93c5fd",cursor:"pointer",fontSize:"0.9rem"},errorContainer:{minHeight:"100vh",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",backgroundColor:"var(--bg-dark)",textAlign:"center",padding:"20px",gap:"20px"},errorIcon:{fontSize:"4rem",marginBottom:"20px"},errorTitle:{fontSize:"2rem",marginBottom:"10px",color:"var(--text-light)"},errorMessage:{color:"var(--text-gray)",marginBottom:"30px",fontSize:"1.1rem",maxWidth:"400px"},errorActions:{display:"flex",gap:"15px"},backButton:{padding:"10px 20px",backgroundColor:"var(--primary-purple)",border:"none",borderRadius:"var(--radius-md)",color:"white",cursor:"pointer",fontSize:"1rem",transition:"all 0.2s ease"},fullRoomContainer:{minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"var(--bg-dark)",padding:"20px"},fullRoomContent:{background:"var(--bg-card)",padding:"40px",borderRadius:"var(--radius-xl)",border:"1px solid var(--border-medium)",textAlign:"center",maxWidth:"500px"},fullRoomIcon:{fontSize:"4rem",marginBottom:"20px"},fullRoomTitle:{fontSize:"2rem",marginBottom:"15px",color:"var(--text-light)"},fullRoomMessage:{color:"var(--text-gray)",marginBottom:"25px",fontSize:"1.1rem"},fullRoomDetails:{textAlign:"left",marginBottom:"30px",padding:"20px",backgroundColor:"rgba(255, 255, 255, 0.05)",borderRadius:"var(--radius-md)",fontSize:"0.9rem"},debugInfo:{display:"flex",gap:"10px",justifyContent:"center",marginBottom:"20px"},debugButton:{padding:"8px 16px",backgroundColor:"rgba(255, 255, 255, 0.1)",border:"1px solid var(--border-light)",borderRadius:"var(--radius-md)",color:"var(--text-light)",cursor:"pointer",fontSize:"0.8rem"},fullRoomActions:{display:"flex",gap:"15px",justifyContent:"center"},fullRoomButton:{padding:"12px 24px",backgroundColor:"var(--primary-purple)",border:"none",borderRadius:"var(--radius-md)",color:"white",cursor:"pointer",fontSize:"1rem",fontWeight:"500"},fullRoomButtonSecondary:{padding:"12px 24px",backgroundColor:"transparent",border:"1px solid var(--border-light)",borderRadius:"var(--radius-md)",color:"var(--text-light)",cursor:"pointer",fontSize:"1rem"},header:{backgroundColor:"var(--bg-card)",borderBottom:"1px solid var(--border-light)",padding:"15px 20px",display:"flex",justifyContent:"space-between",alignItems:"center"},headerLeft:{display:"flex",alignItems:"center",gap:"20px"},roomInfo:{display:"flex",flexDirection:"column",gap:"5px"},roomName:{fontSize:"1.5rem",fontWeight:"600",margin:0,color:"var(--text-light)"},roomMeta:{display:"flex",alignItems:"center",gap:"15px",fontSize:"0.9rem",color:"var(--text-gray)",flexWrap:"wrap"},roomCode:{backgroundColor:"rgba(124, 58, 237, 0.2)",color:"#a78bfa",padding:"4px 8px",borderRadius:"4px",fontFamily:"monospace",fontWeight:"600",cursor:"pointer",transition:"all 0.2s ease"},participantCount:{padding:"4px 8px",backgroundColor:"rgba(59, 130, 246, 0.2)",borderRadius:"4px"},roomStatus:{padding:"4px 8px",borderRadius:"4px",fontWeight:"500",textTransform:"capitalize"},warningBadge:{padding:"4px 8px",backgroundColor:"rgba(239, 68, 68, 0.2)",color:"#f87171",borderRadius:"4px",fontWeight:"500"},headerRight:{display:"flex",alignItems:"center",gap:"10px"},leaveButton:{padding:"10px 20px",backgroundColor:"rgba(239, 68, 68, 0.2)",border:"1px solid rgba(239, 68, 68, 0.3)",borderRadius:"var(--radius-md)",color:"#f87171",cursor:"pointer",fontWeight:"500",transition:"all 0.2s ease"},main:{flex:1,display:"flex",padding:"20px",gap:"20px",overflow:"hidden"},videoSection:{flex:3,display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(300px, 1fr))",gap:"15px",backgroundColor:"var(--bg-card-light)",borderRadius:"var(--radius-lg)",border:"1px solid var(--border-light)",padding:"15px",minHeight:"500px",overflowY:"auto",position:"relative"},videoContainer:{position:"relative",backgroundColor:"#000",borderRadius:"var(--radius-md)",overflow:"hidden",aspectRatio:"16/9",minHeight:"250px",border:"2px solid var(--border-light)"},noConnectionsMessage:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",textAlign:"center",padding:"40px",backgroundColor:"rgba(0, 0, 0, 0.7)",borderRadius:"var(--radius-lg)",backdropFilter:"blur(10px)",border:"1px solid var(--border-light)",zIndex:10},noConnectionsIcon:{fontSize:"3rem",marginBottom:"15px",opacity:.7},noConnectionsText:{fontSize:"1.5rem",marginBottom:"10px",color:"var(--text-light)"},noConnectionsSubtext:{color:"var(--text-gray)",marginBottom:"15px",fontSize:"1rem"},inviteHint:{color:"#a78bfa",fontSize:"0.9rem",backgroundColor:"rgba(124, 58, 237, 0.1)",padding:"8px 12px",borderRadius:"var(--radius-md)",display:"inline-block"},connectionStatus:{position:"absolute",bottom:"20px",right:"20px",backgroundColor:"rgba(0, 0, 0, 0.8)",color:"white",padding:"8px 12px",borderRadius:"var(--radius-md)",fontSize:"0.9rem",zIndex:100,display:"flex",alignItems:"center",gap:"10px",backdropFilter:"blur(10px)"},statusIndicator:{padding:"4px 8px",borderRadius:"12px",color:"white",fontWeight:"600",fontSize:"0.8rem",textTransform:"uppercase"},statusText:{fontSize:"0.8rem",opacity:.9},sidebar:{flex:1,backgroundColor:"var(--bg-card-light)",borderRadius:"var(--radius-lg)",border:"1px solid var(--border-light)",padding:"20px",minWidth:"300px",maxHeight:"600px",overflowY:"auto"},sidebarHeader:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px",paddingBottom:"15px",borderBottom:"1px solid var(--border-light)"},sidebarTitle:{fontSize:"1.2rem",fontWeight:"600",margin:0,color:"var(--text-light)"},participantBadge:{backgroundColor:"var(--primary-purple)",color:"white",padding:"4px 10px",borderRadius:"12px",fontSize:"0.8rem",fontWeight:"600"},refreshSmallButton:{background:"none",border:"none",color:"var(--text-gray)",cursor:"pointer",fontSize:"1rem",padding:"5px",borderRadius:"4px"},participantsList:{display:"flex",flexDirection:"column",gap:"10px",marginBottom:"30px"},participantItem:{display:"flex",alignItems:"center",gap:"12px",padding:"12px",backgroundColor:"rgba(255, 255, 255, 0.05)",borderRadius:"var(--radius-md)",transition:"all 0.2s ease"},hostItem:{backgroundColor:"rgba(124, 58, 237, 0.1)",borderLeft:"3px solid var(--primary-purple)"},currentUserItem:{backgroundColor:"rgba(59, 130, 246, 0.1)",borderLeft:"3px solid #3b82f6"},participantAvatar:{position:"relative",width:"40px",height:"40px"},avatarImage:{width:"100%",height:"100%",borderRadius:"50%",objectFit:"cover"},defaultAvatar:{width:"100%",height:"100%",borderRadius:"50%",backgroundColor:"var(--primary-purple)",display:"flex",alignItems:"center",justifyContent:"center",color:"white",fontWeight:"600",fontSize:"1.2rem"},hostBadge:{position:"absolute",bottom:"-5px",right:"-5px",backgroundColor:"var(--primary-purple)",borderRadius:"50%",width:"20px",height:"20px",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"0.8rem"},participantInfo:{flex:1,minWidth:0},participantName:{fontWeight:"500",color:"var(--text-light)",marginBottom:"4px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},youBadge:{color:"var(--accent-blue)",fontSize:"0.9rem"},participantStatus:{display:"flex",alignItems:"center",gap:"6px",fontSize:"0.8rem",color:"var(--text-gray)"},statusDot:{width:"8px",height:"8px",backgroundColor:"#10b981",borderRadius:"50%"},kickButton:{width:"28px",height:"28px",backgroundColor:"rgba(239, 68, 68, 0.1)",border:"1px solid rgba(239, 68, 68, 0.3)",borderRadius:"50%",color:"#f87171",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"1.2rem",transition:"all 0.2s ease"},controlsSection:{marginTop:"30px",paddingTop:"20px",borderTop:"1px solid var(--border-light)"},controlsTitle:{fontSize:"1rem",fontWeight:"600",marginBottom:"15px",color:"var(--text-light)"},controlsGrid:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"10px",marginBottom:"20px"},controlButton:{padding:"12px",backgroundColor:"rgba(255, 255, 255, 0.1)",border:"1px solid var(--border-light)",borderRadius:"var(--radius-md)",color:"var(--text-light)",cursor:"pointer",fontSize:"0.9rem",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",transition:"all 0.2s ease"},controlButtonActive:{backgroundColor:"rgba(34, 197, 94, 0.2)",borderColor:"rgba(34, 197, 94, 0.5)",color:"#4ade80"},controlButtonInactive:{backgroundColor:"rgba(239, 68, 68, 0.2)",borderColor:"rgba(239, 68, 68, 0.5)",color:"#f87171"},controlButtonDanger:{gridColumn:"1 / -1",padding:"12px",backgroundColor:"rgba(239, 68, 68, 0.2)",border:"1px solid rgba(239, 68, 68, 0.3)",borderRadius:"var(--radius-md)",color:"#f87171",cursor:"pointer",fontSize:"0.9rem",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",transition:"all 0.2s ease"},mediaError:{marginTop:"10px",padding:"8px 12px",backgroundColor:"rgba(245, 158, 11, 0.2)",border:"1px solid rgba(245, 158, 11, 0.3)",borderRadius:"var(--radius-md)",color:"#fbbf24",fontSize:"0.8rem"},peersStatus:{marginTop:"20px",padding:"15px",backgroundColor:"rgba(0, 0, 0, 0.2)",borderRadius:"var(--radius-md)"},peersStatusHeader:{display:"flex",justifyContent:"space-between",marginBottom:"10px",fontSize:"0.9rem"},peerItem:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"6px 0",fontSize:"0.8rem"},peerName:{color:"var(--text-gray)"},peerStatus:{fontWeight:"500",fontSize:"0.75rem",textTransform:"uppercase"},debugPanel:{margin:"20px",padding:"15px",backgroundColor:"rgba(0, 0, 0, 0.5)",borderRadius:"var(--radius-md)",border:"1px solid var(--border-light)"},debugSummary:{cursor:"pointer",padding:"10px",backgroundColor:"rgba(59, 130, 246, 0.2)",border:"1px solid rgba(59, 130, 246, 0.3)",borderRadius:"var(--radius-md)",color:"#93c5fd",fontWeight:"500",marginBottom:"15px"},debugActions:{display:"flex",gap:"10px",marginTop:"15px",flexWrap:"wrap"},footer:{backgroundColor:"var(--bg-card)",borderTop:"1px solid var(--border-light)",padding:"15px 20px",marginTop:"auto"},footerContent:{display:"flex",justifyContent:"space-between",alignItems:"center"},footerInfo:{display:"flex",alignItems:"center",gap:"10px",color:"var(--text-gray)",fontSize:"0.9rem",flexWrap:"wrap"},footerSeparator:{opacity:.5},footerActions:{display:"flex",gap:"10px"},footerButton:{padding:"8px 16px",backgroundColor:"rgba(255, 255, 255, 0.1)",border:"1px solid var(--border-light)",borderRadius:"var(--radius-md)",color:"var(--text-light)",cursor:"pointer",fontSize:"0.9rem",transition:"all 0.2s ease"}};function pO(){return b.jsx(KN,{children:b.jsx(XN,{children:b.jsx(oO,{children:b.jsxs(lO,{children:["  ",b.jsxs(Lw,{children:["  ",b.jsxs(dw,{children:[b.jsx(so,{path:"/",element:b.jsx(qm,{})}),b.jsx(so,{path:"/Labyrinth",element:b.jsx(qm,{})})," ",b.jsx(so,{path:"/dashboard",element:b.jsx(kE,{children:b.jsx(cO,{})})}),b.jsx(so,{path:"/room/:roomId",element:b.jsx(kE,{children:b.jsx(gO,{})})}),b.jsx(so,{path:"*",element:b.jsx(qm,{})})]})]})]})})})})}mA.createRoot(document.getElementById("root")).render(b.jsx(V.StrictMode,{children:b.jsx(pO,{})}));
